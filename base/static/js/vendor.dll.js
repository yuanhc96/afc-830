/*! For license information please see vendor.dll.js.LICENSE.txt */
var _dll_vendor;(function(){var __webpack_modules__={2238:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e,i.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,e||(i[s][a]=1))})),i}},369:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return r.GADDIAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return r.connectedComponentAsync}}),e.default=void 0,Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return r.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return r.detectCycleAsync}}),e.detectDirectedCycleAsync=void 0,Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return r.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return r.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return r.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return r.floydWarshallAsync}}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return r.getAdjMatrixAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return r.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return r.getInDegreeAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return r.getNeighborsAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return r.getOutDegreeAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return r.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return r.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return r.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return r.pageRankAsync}});var r=n(485),i=r.detectCycleAsync;e.detectDirectedCycleAsync=i;var o={getAdjMatrixAsync:r.getAdjMatrixAsync,connectedComponentAsync:r.connectedComponentAsync,getDegreeAsync:r.getDegreeAsync,getInDegreeAsync:r.getInDegreeAsync,getOutDegreeAsync:r.getOutDegreeAsync,detectCycleAsync:r.detectCycleAsync,detectDirectedCycleAsync:i,detectAllCyclesAsync:r.detectAllCyclesAsync,detectAllDirectedCycleAsync:r.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:r.detectAllUndirectedCycleAsync,dijkstraAsync:r.dijkstraAsync,findAllPathAsync:r.findAllPathAsync,findShortestPathAsync:r.findShortestPathAsync,floydWarshallAsync:r.floydWarshallAsync,labelPropagationAsync:r.labelPropagationAsync,louvainAsync:r.louvainAsync,minimumSpanningTreeAsync:r.minimumSpanningTreeAsync,pageRankAsync:r.pageRankAsync,getNeighborsAsync:r.getNeighborsAsync,GADDIAsync:r.GADDIAsync};e.default=o},3764:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(3026))&&r.__esModule?r:{default:r},o=n(643);e.default=function(t,e,n,r){void 0===r&&(r=!0);var a=function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n),s=new i.default,u=t.edges,c=void 0===u?[]:u;s.enqueue(e);for(var l="",f=function(){var t=s.dequeue();a.enter({current:t,previous:l}),(0,o.getNeighbors)(t,c,r?"target":void 0).forEach((function(e){a.allowTraversal({previous:l,current:t,next:e})&&s.enqueue(e)})),a.leave({current:t,previous:l}),l=t};!s.isEmpty();)f()}},9527:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return e?o(t):i(t)},e.detectStrongConnectComponents=e.detectConnectedComponents=void 0;var r=n(643),i=function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=t.edges,o=void 0===i?[]:i,a=[],s={},u=[],c=function t(e){u.push(e),s[e.id]=!0;for(var i=(0,r.getNeighbors)(e.id,o),a=function(e){var r=i[e];if(!s[r]){var o=n.filter((function(t){return t.id===r}));o.length>0&&t(o[0])}},c=0;c<i.length;++c)a(c)},l=0;l<n.length;l++){var f=n[l];if(!s[f.id]){c(f);for(var d=[];u.length>0;)d.push(u.pop());a.push(d)}}return a};e.detectConnectedComponents=i;var o=function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=t.edges,o=void 0===i?[]:i,a=[],s={},u={},c={},l=[],f=0,d=function t(e){u[e.id]=f,c[e.id]=f,f+=1,a.push(e),s[e.id]=!0;for(var i=(0,r.getNeighbors)(e.id,o,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),d=function(r){var o=i[r];if(u[o]||0===u[o])s[o]&&(c[e.id]=Math.min(c[e.id],u[o]));else{var a=n.filter((function(t){return t.id===o}));a.length>0&&t(a[0]),c[e.id]=Math.min(c[e.id],c[o])}},h=0;h<i.length;h++)d(h);if(c[e.id]===u[e.id]){for(var p=[];a.length>0;){var g=a.pop();if(s[g.id]=!1,p.push(g),g===e)break}p.length>0&&l.push(p)}},h=0,p=n;h<p.length;h++){var g=p[h];u[g.id]||0===u[g.id]||d(g)}return l};e.detectStrongConnectComponents=o},2935:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.secondReg=e.dateReg=void 0,e.secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,e.dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/},2556:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOutDegree=e.getInDegree=e.default=void 0;var n=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e},r=n;e.default=r,e.getInDegree=function(t,e){return n(t)[e]?n(t)[e].inDegree:0},e.getOutDegree=function(t,e){return n(t)[e]?n(t)[e].outDegree:0}},4282:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.detectAllUndirectedCycle=e.detectAllDirectedCycle=e.detectAllCycles=e.default=void 0;var i,o=(i=n(5891))&&i.__esModule?i:{default:i},a=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(9527)),s=n(643);function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}var c=function(t,e,n){var r,i;void 0===n&&(n=!0);for(var o=[],u=0,c=(0,a.default)(t,!1);u<c.length;u++){var l=c[u];if(l.length)for(var f=l[0],d=f.id,h=[f],p=((r={})[d]=f,r),g=((i={})[d]=new Set,i);h.length>0;)for(var v=h.pop(),m=v.id,y=(0,s.getNeighbors)(m,t.edges),b=function(r){var i,a=y[r],s=t.nodes.find((function(t){return t.id===a}));if(a===m)o.push(((i={})[a]=v,i));else if(a in g){if(!g[m].has(s)){for(var u=!0,c=[s,v],l=p[m];g[a].size&&!g[a].has(l)&&(c.push(l),l!==p[l.id]);)l=p[l.id];if(c.push(l),e&&n?(u=!1,c.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(u=!0)):e&&!n&&c.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(u=!1),u){for(var f={},d=1;d<c.length;d+=1)f[c[d-1].id]=c[d];c.length&&(f[c[c.length-1].id]=c[0]),o.push(f)}g[a].add(v)}}else p[a]=v,h.push(s),g[a]=new Set([v])},x=0;x<y.length;x+=1)b(x)}return o};e.detectAllUndirectedCycle=c;var l=function(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],u=[],c={},l={},f=function t(a,s,l){var f=!1;if(e&&!1===n&&e.indexOf(a.id)>-1)return f;r.push(a),i.add(a);for(var d=l[a.id],h=0;h<d.length;h+=1)if((v=c[d[h]])===s){for(var p={},g=1;g<r.length;g+=1)p[r[g-1].id]=r[g];r.length&&(p[r[r.length-1].id]=r[0]),u.push(p),f=!0}else i.has(v)||t(v,s,l)&&(f=!0);if(f)!function(t){for(var e=[t];e.length>0;){var n=e.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(t){e.push(t)})),o[n.id].clear())}}(a);else for(h=0;h<d.length;h+=1){var v=c[d[h]];o[v.id].has(a)||o[v.id].add(a)}return r.pop(),f},d=t.nodes,h=void 0===d?[]:d,p=0;p<h.length;p+=1){var g=h[p],v=g.id;l[v]=p,c[p]=g}if(e&&n){var m=function(t){var n=e[t];l[h[t].id]=l[n],l[n]=0,c[0]=h.find((function(t){return t.id===n})),c[l[h[t].id]]=h[t]};for(p=0;p<e.length;p++)m(p)}for(var y=function(r){for(var i,o,a=1/0,c=0;c<r.length;c+=1)for(var f=r[c],d=0;d<f.length;d++){var h=l[f[d].id];h<a&&(a=h,o=c)}var p=r[o],g=[];for(c=0;c<p.length;c+=1){var v=p[c];g[v.id]=[];for(var m=0,y=(0,s.getNeighbors)(v.id,t.edges,"target").filter((function(t){return p.map((function(t){return t.id})).indexOf(t)>-1}));m<y.length;m++){var b=y[m];b!==v.id||!1===n&&e.indexOf(v.id)>-1?g[v.id].push(l[b]):u.push(((i={})[v.id]=v,i))}}return{component:p,adjList:g,minIdx:a}},b=0;b<h.length;){var x=h.filter((function(t){return l[t.id]>=b})),w=(0,a.detectStrongConnectComponents)({nodes:x,edges:t.edges}).filter((function(t){return t.length>1}));if(0===w.length)break;var _=y(w),E=_.minIdx,S=_.adjList,C=_.component;if(!(C.length>1))break;C.forEach((function(t){o[t.id]=new Set}));var k=c[E];if(e&&n&&-1===e.indexOf(k.id))return u;f(k,k,S),b=E+1}return u};e.detectAllDirectedCycle=l,e.detectAllCycles=function(t,e,n,r){return void 0===r&&(r=!0),e?l(t,n,r):c(t,n,r)};e.default=function(t){var e=null,n=t.nodes,r={},i={},a={},s={};(void 0===n?[]:n).forEach((function(t){i[t.id]=t}));for(var u={enter:function(t){var n=t.current,o=t.previous;if(a[n]){e={};for(var s=n,u=o;u!==n;)e[s]=u,s=u,u=r[u];e[s]=u}else a[n]=n,delete i[n],r[n]=o},leave:function(t){var e=t.current;s[e]=e,delete a[e]},allowTraversal:function(t){var n=t.next;return!e&&!s[n]}};Object.keys(i).length;){var c=Object.keys(i)[0];(0,o.default)(t,c,u)}return e}},5891:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){i(t,e,"",function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n))};var r=n(643);function i(t,e,n,o){o.enter({current:e,previous:n});var a=t.edges,s=void 0===a?[]:a;(0,r.getNeighbors)(e,s,"target").forEach((function(r){o.allowTraversal({previous:n,current:e,next:r})&&i(t,r,e,o)})),o.leave({current:e,previous:n})}},8089:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(655),i=n(9242),o=n(643);function a(t,e,n,o){if(t===e)return[t];if(o[e])return o[e];for(var s=[],u=0,c=n[e];u<c.length;u++){var l=a(t,c[u],n,o);if(!l)return;for(var f=0,d=l;f<d.length;f++){var h=d[f];(0,i.isArray)(h)?s.push((0,r.__spreadArray)((0,r.__spreadArray)([],h,!0),[e],!1)):s.push([h,e])}}return o[e]=s,o[e]}e.default=function(t,e,n,r){var i=t.nodes,s=void 0===i?[]:i,u=t.edges,c=void 0===u?[]:u,l=[],f={},d={},h={};s.forEach((function(t,n){var r=t.id;l.push(r),d[r]=1/0,r===e&&(d[r]=0)}));for(var p=s.length,g=function(t){var e=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r}(d,s,f),i=e.id;if(f[i]=!0,d[i]===1/0)return"continue";(n?(0,o.getOutEdgesNodeId)(i,c):(0,o.getEdgesByNodeId)(i,c)).forEach((function(t){var n=t.target,o=t.source,a=n===i?o:n,s=r&&t[r]?t[r]:1;d[a]>d[e.id]+s?(d[a]=d[e.id]+s,h[a]=[e.id]):d[a]===d[e.id]+s&&h[a].push(e.id)}))},v=0;v<p;v++)g();h[e]=[e];var m={};for(var y in d)d[y]!==1/0&&a(e,y,h,m);var b={};for(var y in m)b[y]=m[y][0];return{length:d,path:b,allPath:m}}},1727:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findShortestPath=e.findAllPath=void 0;var r,i=(r=n(8089))&&r.__esModule?r:{default:r},o=n(643);e.findShortestPath=function(t,e,n,r,o){var a=(0,i.default)(t,e,r,o),s=a.length,u=a.path,c=a.allPath;return{length:s[n],path:u[n],allPath:c[n]}},e.findAllPath=function(t,e,n,r){var i;if(e===n)return[[e]];var a=t.edges,s=void 0===a?[]:a,u=[e],c=((i={})[e]=!0,i),l=[],f=[],d=r?(0,o.getNeighbors)(e,s,"target"):(0,o.getNeighbors)(e,s);for(l.push(d);u.length>0&&l.length>0;){var h=l[l.length-1];if(h.length){var p=h.shift();if(p&&(u.push(p),c[p]=!0,d=r?(0,o.getNeighbors)(p,s,"target"):(0,o.getNeighbors)(p,s),l.push(d.filter((function(t){return!c[t]})))),u[u.length-1]===n){var g=u.map((function(t){return t}));f.push(g),v=u.pop(),c[v]=!1,l.pop()}}else{var v=u.pop();c[v]=!1,l.pop()}}return f}},5033:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(2238))&&r.__esModule?r:{default:r};e.default=function(t,e){for(var n=(0,i.default)(t,e),r=[],o=n.length,a=0;a<o;a+=1){r[a]=[];for(var s=0;s<o;s+=1)a===s?r[a][s]=0:0!==n[a][s]&&n[a][s]?r[a][s]=n[a][s]:r[a][s]=1/0}for(var u=0;u<o;u+=1)for(a=0;a<o;a+=1)for(s=0;s<o;s+=1)r[a][s]>r[a][u]+r[u][s]&&(r[a][s]=r[a][u]+r[u][s]);return r}},1146:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(9242),i=n(8575),o=function(){function t(t,e,n,r,o){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||i.VACANT_NODE_LABEL,edgeLabel:r||i.VACANT_EDGE_LABEL,nodeLabel2:o||i.VACANT_NODE_LABEL}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),a=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new o(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=i.VACANT_GRAPH_ID),void 0===e&&(e=!1);var n=new i.Graph(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,o=t.nodeEdgeNodeLabel,a=o.nodeLabel1,s=o.edgeLabel,u=o.nodeLabel2;a!==i.VACANT_NODE_LABEL&&n.addNode(e,a),u!==i.VACANT_NODE_LABEL&&n.addNode(r,u),a!==i.VACANT_NODE_LABEL&&u!==a&&n.addEdge(void 0,e,r,s)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],r=n.fromNode,i=n.toNode;r<i&&(void 0===t||i===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),s=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),u=function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,o=void 0===i?1:i,s=t.maxNodeNum,u=void 0===s?4:s,c=t.top,l=void 0===c?10:c,f=t.directed,d=void 0!==f&&f,h=t.verbose,p=void 0!==h&&h;this.graphs=e,this.dfsCode=new a,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=l,this.directed=d,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var u=o[s];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,u=0;u<s;u++){var c=a[u],l=t.nodeMap[c.to];n<=l.label&&!r.hasNode(l)&&i.push(c)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,u=s.length,c=0;c<u;c++){var l=s[c],f=o[l.to].label;e.to===l.to||n>f||r.hasNode(o[l.to])||(e.label<l.label||e.label===l.label&&a<=f)&&i.push(l)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(i.VACANT_GRAPH_ID,n),u=r.nodeMap,c=new a,l={};r.nodes.forEach((function(e){t.findForwardRootEdges(r,e).forEach((function(t){var n=u[t.to],i="".concat(e.label,"-").concat(t.label,"-").concat(n.label);l[i]||(l[i]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var o={graphId:r.id,edge:t,preNode:null};l[i].projected.push(o)}))}));var f=this.findMinLabel(l);if(f){c.dfsEdgeList.push(new o(0,1,f.nodeLabel1,f.edgeLabel,f.nodeLabel2));var d="".concat(f.nodeLabel1,"-").concat(f.edgeLabel,"-").concat(f.nodeLabel2);return function a(l){for(var f=c.buildRmpath(),d=c.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,h=c.dfsEdgeList[f[0]].toNode,p={},g=!1,v=0,m=n?-1:0,y=function(e){if(g)return"break";l.forEach((function(n){var i=new s(n),o=t.findBackwardEdge(r,i.edges[f[e]],i.edges[f[0]],i);o&&(p[o.label]||(p[o.label]={projected:[],edgeLabel:o.label}),p[o.label].projected.push({graphId:r.id,edge:p,preNode:n}),v=c.dfsEdgeList[f[e]].fromNode,g=!0)}))},b=f.length-1;b>m&&"break"!==y(b);b--);if(g){var x=t.findMinLabel(p);c.dfsEdgeList.push(new o(h,v,i.VACANT_NODE_LABEL,x.edgeLabel,i.VACANT_NODE_LABEL));var w=c.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[w]===c.dfsEdgeList[w]&&a(p[x.edgeLabel].projected)}var _={};g=!1;var E=0;l.forEach((function(e){var n=new s(e),i=t.findForwardPureEdges(r,n.edges[f[0]],d,n);i.length>0&&(g=!0,E=h,i.forEach((function(t){var n="".concat(t.label,"-").concat(u[t.to].label);_[n]||(_[n]={projected:[],edgeLabel:t.label,nodeLabel2:u[t.to].label}),_[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}));var S=f.length,C=function(e){if(g)return"break";var n=f[e];l.forEach((function(e){var i=new s(e),o=t.findForwardRmpathEdges(r,i.edges[n],d,i);o.length>0&&(g=!0,E=c.dfsEdgeList[n].fromNode,o.forEach((function(t){var n="".concat(t.label,"-").concat(u[t.to].label);_[n]||(_[n]={projected:[],edgeLabel:t.label,nodeLabel2:u[t.to].label}),_[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}))};for(b=0;b<S&&"break"!==C(b);b++);if(!g)return!0;var k=t.findMinLabel(_);c.dfsEdgeList.push(new o(E,h+1,i.VACANT_NODE_LABEL,k.edgeLabel,k.nodeLabel2));var M=c.dfsEdgeList.length-1;return e.dfsEdgeList[M]===c.dfsEdgeList[M]&&a(_["".concat(k.edgeLabel,"-").concat(k.nodeLabel2)].projected)}(l[d].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,r.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[r[0]].toNode,u=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c={},l={};t.forEach((function(t){for(var i=e.graphs[t.graphId],o=i.nodeMap,f=new s(t),d=r.length-1;d>=0;d--){var h=e.findBackwardEdge(i,f.edges[r[d]],f.edges[r[0]],f);if(h){var p="".concat(e.dfsCode.dfsEdgeList[r[d]].fromNode,"-").concat(h.label);l[p]||(l[p]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[r[d]].fromNode,edgeLabel:h.label}),l[p].projected.push({graphId:t.graphId,edge:h,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(i,f.edges[r[0]],u,f).forEach((function(e){var n="".concat(a,"-").concat(e.label,"-").concat(o[e.to].label);c[n]||(c[n]={projected:[],fromNodeId:a,edgeLabel:e.label,nodeLabel2:o[e.to].label}),c[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var g=function(n){e.findForwardRmpathEdges(i,f.edges[r[n]],u,f).forEach((function(i){var a="".concat(e.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(i.label,"-").concat(o[i.to].label);c[a]||(c[a]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:o[i.to].label}),c[a].projected.push({graphId:t.graphId,edge:i,preNode:t})}))};for(d=0;d<r.length;d++)g(d)}})),Object.keys(l).forEach((function(t){var n=l[t],r=n.toNodeId,i=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new o(a,r,"-1",i,"-1")),e.subGraphMining(l[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(c).forEach((function(t){var n=c[t],r=n.fromNodeId,s=n.edgeLabel,u=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new o(r,a+1,i.VACANT_NODE_LABEL,s,u)),e.subGraphMining(c[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(t).forEach((function(n){var r=t[n],u=r.nodeMap;r.nodes.forEach((function(t,r){var c=t.label,l="".concat(n,"-").concat(c);if(!a[l]){var f=i[c]||0;f++,i[c]=f}a[l]={graphKey:n,label:c},t.edges.forEach((function(t){var r=c,i=u[t.to].label;if(!e&&r>i){var a=i;i=r,r=a}var l=t.label,f="".concat(n,"-").concat(r,"-").concat(l,"-").concat(i),d="".concat(r,"-").concat(l,"-").concat(i);if(!o[d]){var h=o[d]||0;h++,o[d]=h}s[f]={graphId:n,nodeLabel1:r,edgeLabel:l,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){if(!(i[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),r.push(e)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(r){var i=e[r],o=i.nodeMap;i.nodes.forEach((function(e){t.findForwardRootEdges(i,e).forEach((function(t){var i=o[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(i.label);n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:r,edge:t,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var r=n[e],i=r.projected,a=r.nodeLabel1,s=r.edgeLabel,u=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new o(0,1,a,s,u)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()}))}},t}(),c="cluster";e.default=function(t){var e=t.graphs,n=t.directed,r=void 0!==n&&n,o=t.nodeLabelProp,a=void 0===o?c:o,s=t.edgeLabelProp,l=void 0===s?c:s,f=function(t,e,n,r){var o={};return Object.keys(t).forEach((function(a,s){var u=t[a],c=new i.Graph(s,!0,e),l={};u.nodes.forEach((function(t,e){c.addNode(e,t[n]),l[t.id]=e})),u.edges.forEach((function(t,e){var n=l[t.source],i=l[t.target];c.addEdge(-1,n,i,t[r])})),c&&c.getNodeNum()&&(o[c.id]=c)})),o}(e,r,a,l),d=t.minSupport,h=t.maxNodeNum,p=t.minNodeNum,g=t.verbose,v=t.top,m=new u({graphs:f,minSupport:d,maxNodeNum:h,minNodeNum:p,top:v,verbose:g,directed:r});m.run();var y=function(t,e,n){var r=[];return t.forEach((function(t){var i={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;i.nodes.push(((n={id:"".concat(t.id)})[e]=t.label,n))})),t.edges.forEach((function(t){var e;i.edges.push(((e={source:"".concat(t.from),target:"".concat(t.to)})[n]=t.label,e))})),r.push(i)})),r}(m.frequentSubgraphs,a,l);return y}},8575:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VACANT_NODE_LABEL=e.VACANT_NODE_ID=e.VACANT_GRAPH_ID=e.VACANT_EDGE_LABEL=e.VACANT_EDGE_ID=e.Node=e.Graph=e.Edge=e.AUTO_EDGE_ID=void 0;e.VACANT_EDGE_ID=-1;var n=-1;e.VACANT_NODE_ID=n;e.VACANT_EDGE_LABEL="-1";var r="-1";e.VACANT_NODE_LABEL=r,e.VACANT_GRAPH_ID=-1,e.AUTO_EDGE_ID="-1";var i=function(t,e,r,i){void 0===t&&(t=-1),void 0===e&&(e=n),void 0===r&&(r=n),void 0===i&&(i="-1"),this.id=t,this.from=e,this.to=r,this.label=i};e.Edge=i;var o=function(){function t(t,e){void 0===t&&(t=n),void 0===e&&(e=r),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}();e.Node=o;var a=function(){function t(t,e,r){void 0===t&&(t=n),void 0===e&&(e=!0),void 0===r&&(r=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new o(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var o=new i(t,e,n,r);if(this.edges.push(o),this.edgeMap[t]=o,this.nodeMap[e].addEdge(o),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(o),!this.directed){var a=new i(t,n,e,r);this.nodeMap[n].addEdge(a),this.edgeLabelMap[r].push(a)}}},t}();e.Graph=a},2812:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(655),i=u(n(5033)),o=u(n(1146)),a=u(n(8089)),s=n(643);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(l(o,t,e,n,r))})),i},l=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,u){if(e<=i&&n!==u){o.push(u),a.push(t[u]);var c=t[u][r];s[c]?(s[c].count++,s[c].dists.push(e)):s[c]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},f=function(t,e,n,r){var i=n.nodes;return r||(r={}),Object.keys(t).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var u=t[o],c=null===(a=e[u.start])||void 0===a?void 0:a.nodeIdxs,l=null===(s=e[u.end])||void 0===s?void 0:s.nodeIdxs;if(c&&l){var f=new Set(l),d=c.filter((function(t){return f.has(t)}));if(d&&d.length){for(var h={},p=d.length,g=0;g<p;g++){var v=i[d[g]];r[o].nodes.push(v),h[v.id]=!0}n.edges.forEach((function(t){h[t.source]&&h[t.target]&&r[o].edges.push(t)}))}}}})),r},d=function(t,e,n,r){var i,o,a={};t.nodes.forEach((function(t){a[t.id]=t}));var s=0;return!(null===(i=null==e?void 0:e.edges)||void 0===i?void 0:i.length)||(null===(o=null==e?void 0:e.nodes)||void 0===o?void 0:o.length)<2?0:(t.edges.forEach((function(t){var i=a[t.source][n],o=a[t.target][n],u=null==e?void 0:e.nodes[0][n],c=null==e?void 0:e.nodes[1][n],l=null==e?void 0:e.edges[0][r];t[r]===l&&(i===u&&o===c||i===c&&o===u)&&s++})),s)},h=function(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];r[o]||(r[o]=[]),r[o].push(t)})),{nodeMap:n,nodeLabelMap:r}},p=function(t,e,n){var r={},i={};return t.forEach((function(t,o){r["".concat(s.uniqueId)]={idx:o,edge:t};var a=t[e];i[a]||(i[a]=[]),i[a].push(t);var u=n[t.source];u&&(u.degree++,u.outDegree++);var c=n[t.target];c&&(c.degree++,c.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},g=function(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,u=a;u<r;u++)if(o!==u){var c=t[u].id,l=e[u];i["".concat(s,"-").concat(c)]=l,n||(i["".concat(c,"-").concat(s)]=l)}})),i},v=function(t,e,n,r,i,o,a,s,u,c,l){var h,p="".concat(e.id,"-").concat(n.id);if(c&&c[p])return c[p];var g=l?l[p]:void 0;if(!g){var v=((h={})[p]={start:r[e.id].idx,end:r[n.id].idx,distance:i},h);g=(l=f(v,o,t,l))[p]}return d(g,a,s,u)},m=function(t,e,n,r){var i,o,a,s=null===(i=t[e])||void 0===i?void 0:i.degree,u=null===(o=t[e])||void 0===o?void 0:o.inDegree,c=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,u=1/0,c=1/0,r[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var r=n[t.id].inDegree;u>r&&(u=r);var i=n[t.id].outDegree;c>i&&(c=i)})),t[e]={degree:s,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}};e.default=function(t,e,n,s,u,y,b){var x;if(void 0===n&&(n=!1),void 0===y&&(y="cluster"),void 0===b&&(b="cluster"),t&&t.nodes){var w=t.nodes.length;if(w){var _=(0,i.default)(t,n),E=(0,i.default)(e,n),S=g(t.nodes,_,n),C=g(e.nodes,E,n),k=h(t.nodes,y),M=k.nodeMap,O=k.nodeLabelMap,T=h(e.nodes,y),A=T.nodeMap,N=T.nodeLabelMap;p(t.edges,b,M);var I=p(e.edges,b,A).edgeLabelMap,P=[];null==E||E.forEach((function(t){P=P.concat(t)})),u||(u=Math.max.apply(Math,(0,r.__spreadArray)((0,r.__spreadArray)([],P,!1),[2],!1))),s||(s=u);var D=c(t,_,y,s),L=c(e,E,y,s),R=function(t,e,n,r,i){var o=Math.ceil(n/e),a={},s=0;return r.forEach((function(t,r){for(var u=0,c=0,l=t.nodeIdxs,f=t.neighborNum-1;u<o;){for(var d=l[1+Math.floor(Math.random()*f)],h=0;(a["".concat(r,"-").concat(d)]||a["".concat(d,"-").concat(r)])&&(d=Math.floor(Math.random()*e),!(++h>2*e)););if(h<2*e&&(a["".concat(r,"-").concat(d)]={start:r,end:d,distance:i[r][d]},u++,++s>=n))return a;if(++c>2*e)break}u<o&&(o=(o+(o-u))/(e-r-1))})),a}(0,w,Math.min(100,w*(w-1)/2),D,_),j=f(R,D,t),B={graphs:j,nodeLabelProp:y,edgeLabelProp:b,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n},F=(0,o.default)(B).slice(0,10),z=F.length,$=[];F.forEach((function(t,e){$[e]={},Object.keys(j).forEach((function(n){var r=j[n],i=d(r,t,y,b);$[e][n]=i}))}));var G=function(t,e,n){for(var r=1/0,i=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[];o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]}));var s=0,u=[];a.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,u.push(e);var r=0,i=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var c=0;u.forEach((function(t,e){u.forEach((function(n,r){e!==r&&(c+=Math.abs(t-n))})),c/=u.length*(u.length-1)/2}));var l=c-s;r<l&&(r=l,i=e)},a=0;a<e;a++)o(a);return{structure:n[i],structureCountMap:t[i]}}($,z,F),V=G.structure,U=G.structureCountMap,W=e.nodes[0],H=[],Y=null===(x=e.nodes[0])||void 0===x?void 0:x[y],X=-1/0;e.nodes.forEach((function(t){var e=t[y],n=O[e];(null==n?void 0:n.length)>X&&(X=n.length,H=n,Y=e,W=t)}));var q={},Z={},K={},J={},Q={},tt={};Object.keys(N).forEach((function(r,i){Q[r]=[],n&&(tt[r]=[]);var o=-1/0,a=N[r],s={};a.forEach((function(t){var e=C["".concat(W.id,"-").concat(t.id)];if(e&&Q[r].push(e),o<e&&(o=e),s["".concat(W.id,"-").concat(t.id)]={start:0,end:A[t.id].idx,distance:e},n){var i=C["".concat(t.id,"-").concat(W.id)];i&&tt[r].push(i)}})),Q[r]=Q[r].sort((function(t,e){return t-e})),n&&(tt[r]=tt[r].sort((function(t,e){return t-e}))),Z=f(s,L,e,Z);var u=[];if(Object.keys(s).forEach((function(t){if(K[t])u.push(K[t]);else{var e=Z[t];K[t]=d(e,V,y,b),u.push(K[t])}})),u=u.sort((function(t,e){return e-t})),J["".concat(W.id,"-").concat(r)]=u,r!==Y)for(var c=function(e){var n=H[e],i=D[M[n.id].idx],o=i.nodeLabelCountMap[r],a=N[r].length;if(!o||o.count<a)return H.splice(e,1),"continue";for(var s=!1,c=0;c<a;c++)if(o.dists[c]>Q[r][c]){s=!0;break}if(s)return H.splice(e,1),"continue";var l={};i.neighbors.forEach((function(t){var e=S["".concat(n.id,"-").concat(t.id)];l["".concat(n.id,"-").concat(t.id)]={start:M[n.id].idx,end:M[t.id].idx,distance:e}})),j=f(l,D,t,j);var h=[];Object.keys(l).forEach((function(t){if(U[t])h.push(U[t]);else{var e=j[t];U[t]=d(e,V,y,b),h.push(U[t])}})),h=h.sort((function(t,e){return e-t}));var p=!1;for(c=0;c<a;c++)if(h[c]<u[c]){p=!0;break}return p?(H.splice(e,1),"continue"):void 0},l=((null==H?void 0:H.length)||0)-1;l>=0;l--)c(l)}));var et=[];null==H||H.forEach((function(r){for(var i=M[r.id].idx,o=l(t.nodes,_[i],i,y,u).neighbors,a=!1,s=o.length-1;s>=0;s--){if(o.length+1<e.nodes.length)return void(a=!0);var c=o[s],f=c[y];if(N[f]&&N[f].length)if(Q[f]&&Q[f].length){var d="".concat(r.id,"-").concat(c.id),h=S[d],p=Q[f].length-1;if(h>Q[f][p])o.splice(s,1);else{if(n){var g="".concat(c.id,"-").concat(r.id),x=S[g];if(p=tt[f].length-1,x>tt[f][p]){o.splice(s,1);continue}}var w=U[d]?U[d]:v(t,r,c,M,h,D,V,y,b,U,j),E="".concat(W.id,"-").concat(f);if(w<J[E][J[E].length-1])o.splice(s,1);else{var C=m(q,f,A,N),k=C.minPatternNodeLabelDegree;C.minPatternNodeLabelInDegree,C.minPatternNodeLabelOutDegree,M[c.id].degree<k&&o.splice(s,1)}}}else o.splice(s,1);else o.splice(s,1)}a||et.push({nodes:[r].concat(o)})}));var nt=(0,a.default)(e,W.id,!1).length,rt={};n?(Object.keys(nt).forEach((function(t){var e=A[t].node[y];rt[e]?rt[e].push(nt[t]):rt[e]=[nt[t]]})),Object.keys(rt).forEach((function(t){rt[t].sort((function(t,e){return t-e}))}))):rt=Q;for(var it=function(r){var i=et[r],o=i.nodes[0],s={},u={};i.nodes.forEach((function(t,e){u[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[y];s[n]?s[n]++:s[n]=1}));var c=[],l={};t.edges.forEach((function(t){u[t.source]&&u[t.target]&&(c.push(t),l[t[b]]?l[t[b]]++:l[t[b]]=1,u[t.source].degree++,u[t.target].degree++,u[t.source].outDegree++,u[t.target].inDegree++)}));for(var f=Object.keys(I).length,d=!1,h=0;h<f;h++){var p=Object.keys(I)[h];if(!l[p]||l[p]<I[p].length){d=!0;break}}if(d)return et.splice(r,1),"continue";var g=c.length;if(g<e.edges.length)return et.splice(r,1),"break";var v=!1,x=function(t){var e=c[t],r=e[b],i=I[r];if(!i||!i.length)return l[r]--,i&&l[r]<i.length?(v=!0,"break"):(c.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue");var o=u[e.source].node[y],a=u[e.target].node[y],s=!1;return i.forEach((function(t){var e=A[t.source].node,r=A[t.target].node;e[y]===o&&r[y]===a&&(s=!0),n||e[y]!==a||r[y]!==o||(s=!0)})),s?void 0:(l[r]--,i&&l[r]<i.length?(v=!0,"break"):(c.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue"))};for(h=g-1;h>=0&&"break"!==x(h);h--);if(v)return et.splice(r,1),"continue";i.edges=c;var w=(0,a.default)(i,i.nodes[0].id,!1).length;if(Object.keys(w).reverse().forEach((function(t){if(t!==i.nodes[0].id&&!v){if(w[t]===1/0){var e=u[t].node[y];if(s[e]--,s[e]<N[e].length)return void(v=!0);var n=i.nodes.indexOf(u[t].node);return i.nodes.splice(n,1),void(u[t]=void 0)}var r=M[t].node[y];if(!rt[r]||!rt[r].length||w[t]>rt[r][rt[r].length-1]){if(e=u[t].node[y],s[e]--,s[e]<N[e].length)return void(v=!0);n=i.nodes.indexOf(u[t].node),i.nodes.splice(n,1),u[t]=void 0}}})),v)return et.splice(r,1),"continue";for(var _=!0,E=0;_&&!v;){if(_=!1,n?u[o.id].degree<A[W.id].degree||u[o.id].inDegree<A[W.id].inDegree||u[o.id].outDegree<A[W.id].outDegree:u[o.id].degree<A[W.id].degree){v=!0;break}if(s[o[y]]<N[o[y]].length){v=!0;break}for(var S=i.nodes.length-1;S>=0;S--){var C=i.nodes[S],k=u[C.id].degree,O=u[C.id].inDegree,T=u[C.id].outDegree,P=C[y],D=m(q,P,A,N),L=D.minPatternNodeLabelDegree,R=D.minPatternNodeLabelInDegree,j=D.minPatternNodeLabelOutDegree;if(n?k<L||O<R||T<j:k<L){if(s[C[y]]--,s[C[y]]<N[C[y]].length){v=!0;break}i.nodes.splice(S,1),u[C.id]=void 0,_=!0}}if(v||!_&&0!==E)break;for(var B=(g=c.length)-1;B>=0;B--){var F=c[B];if(!u[F.source]||!u[F.target]){c.splice(B,1);var z=F[b];if(l[z]--,u[F.source]&&(u[F.source].degree--,u[F.source].outDegree--),u[F.target]&&(u[F.target].degree--,u[F.target].inDegree--),I[z]&&l[z]<I[z].length){v=!0;break}_=!0}}E++}return v||v||i.nodes.length<e.nodes.length||c.length<e.edges.length?(et.splice(r,1),"continue"):void 0},ot=et.length-1;ot>=0&&"break"!==it(ot);ot--);var at=et.length,st=function(t){var e=et[t],n={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);n[e]?n[e]++:n[e]=1}));for(var r=function(t){var e=et[t],r={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[e]?r[e]++:r[e]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(t){r[t]!==n[t]&&(i=!1)})),i&&et.splice(t,1)},i=at-1;i>t;i--)r(i);at=et.length};for(ot=0;ot<=at-1;ot++)st(ot);return et}}}},5170:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(2238))&&r.__esModule?r:{default:r},o=n(643);e.default=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var a=t.nodes,s=void 0===a?[]:a,u=t.edges,c=void 0===u?[]:u,l={},f={};s.forEach((function(t,e){var n=(0,o.uniqueId)();t.clusterId=n,l[n]={id:n,nodes:[t]},f[t.id]={node:t,idx:e}}));var d=(0,i.default)(t,e),h=[],p={};d.forEach((function(t,e){var n=0,r=s[e].id;p[r]={},t.forEach((function(t,e){if(t){n+=t;var i=s[e].id;p[r][i]=t}})),h.push(n)}));for(var g=0,v=function(){var t=!1;if(s.forEach((function(e){var n={};Object.keys(p[e.id]).forEach((function(t){var r=p[e.id][t],i=f[t].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(t){r<n[t]?(r=n[t],i=[t]):r===n[t]&&i.push(t)})),1!==i.length||i[0]!==e.clusterId){var o=i.indexOf(e.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){t=!0;var a=l[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var u=Math.floor(Math.random()*i.length),c=l[i[u]];c.nodes.push(e),e.clusterId=c.id}}})),!t)return"break";g++};g<r&&"break"!==v(););Object.keys(l).forEach((function(t){var e=l[t];e.nodes&&e.nodes.length||delete l[t]}));var m=[],y={};c.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=f[e].node.clusterId,a=f[r].node.clusterId,s="".concat(o,"---").concat(a);if(y[s])y[s].weight+=i,y[s].count++;else{var u={source:o,target:a,weight:i,count:1};y[s]=u,m.push(u)}}));var b=[];return Object.keys(l).forEach((function(t){b.push(l[t])})),{clusters:b,clusterEdges:m}}},5179:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(9242),i=u(n(2238)),o=u(n(9741)),a=n(3665),s=n(6838);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var u=t[s].clusterId,c=0;c<i;c++)u===t[c].clusterId&&(a+=(e[s][c]||0)-(n[s]||0)*(n[c]||0)/o);return a*(1/o)},l=function(t,e){void 0===t&&(t=[]);for(var n=t.length,r=new o.default([]),i=0;i<n;i++)r=r.add(new o.default(e[i]));var a=r.avg(n);a.normalize();var s=0;for(i=0;i<n;i++)s+=(c=new o.default(e[i])).squareEuclideanDistance(a);var u=[];for(t.forEach((function(){u.push([])})),i=0;i<n;i++){var c=new o.default(e[i]);t[i].clusterInertial=0;for(var l=0;l<n;l++)if(i!==l){var f=new o.default(e[l]);u[i][l]=c.squareEuclideanDistance(f),t[i].clusterInertial+=u[i][l]}else u[i][l]=0}var d=0,h=2*n*s;for(i=0;i<n;i++){var p=t[i].clusterId;for(l=0;l<n;l++){var g=t[l].clusterId;i!==l&&p===g&&(d+=t[i].clusterInertial*t[l].clusterInertial/Math.pow(h,2)-u[i][l]/h)}}return Number(d.toFixed(4))};e.default=function(t,e,n,o,u,f,d,h,p){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===o&&(o=1e-4),void 0===u&&(u=!1),void 0===f&&(f=void 0),void 0===d&&(d=[]),void 0===h&&(h=["id"]),void 0===p&&(p=1);var g=t.nodes,v=void 0===g?[]:g,m=t.edges,y=void 0===m?[]:m,b=[];if(u){v.forEach((function(t,e){t.properties=t.properties||{},t.originIndex=e}));var x=[];v.every((function(t){return t.hasOwnProperty("nodeType")}))&&(x=Array.from(new Set(v.map((function(t){return t.nodeType})))),v.forEach((function(t){t.properties.nodeType=x.findIndex((function(e){return e===t.nodeType}))})));var w=(0,a.getAllProperties)(v,f);b=(0,s.oneHot)(w,d,h)}var _=1,E={},S={};v.forEach((function(t,e){var n=String(_++);t.clusterId=n,E[n]={id:n,nodes:[t]},S[t.id]={node:t,idx:e}}));var C=(0,i.default)(t,e),k=[],M={},O=0;C.forEach((function(t,e){var n=0,r=v[e].id;M[r]={},t.forEach((function(t,e){if(t){n+=t;var i=v[e].id;M[r][i]=t,O+=t}})),k.push(n)})),O/=2;for(var T=1/0,A=1/0,N=0,I=[],P={};;){T=u&&v.every((function(t){return t.hasOwnProperty("properties")}))?c(v,C,k,O)+l(v,b)*p:c(v,C,k,O),0===N&&(A=T,I=v,P=E);var D=T>0&&T>A&&T-A<o;if(T>A&&(I=v.map((function(t){return{node:t,clusterId:t.clusterId}})),P=(0,r.clone)(E),A=T),D||N>100)break;N++,Object.keys(E).forEach((function(t){var e=0;y.forEach((function(r){var i=r.source,o=r.target,a=S[i].node.clusterId,s=S[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=r[n]||1)})),E[t].sumTot=e})),v.forEach((function(t,e){var r,i=E[t.clusterId],o=0,a=k[e]/(2*O),s=0,c=i.nodes;c.forEach((function(t){var n=S[t.id].idx;s+=C[e][n]||0}));var f=s-i.sumTot*a,d=c.filter((function(e){return e.id!==t.id})),h=[];d.forEach((function(t,e){h[e]=b[t.originIndex]}));var g=l(d,b)*p,v=M[t.id];if(Object.keys(v).forEach((function(n){var i=S[n].node.clusterId;if(i!==t.clusterId){var s=E[i],c=s.nodes;if(c&&c.length){var d=0;c.forEach((function(t){var n=S[t.id].idx;d+=C[e][n]||0}));var h=d-s.sumTot*a,v=c.concat([t]),m=[];v.forEach((function(t,e){m[e]=b[t.originIndex]}));var y=l(v,b)*p,x=h-f;u&&(x=h+y-(f+g)),x>o&&(o=x,r=s)}}})),o>0){r.nodes.push(t);var m=t.clusterId;t.clusterId=r.id;var x=i.nodes.indexOf(t);i.nodes.splice(x,1);var w=0,_=0;y.forEach((function(t){var e=t.source,i=t.target,o=S[e].node.clusterId,a=S[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(w+=t[n]||1),(o===m&&a!==m||a===m&&o!==m)&&(_+=t[n]||1)})),r.sumTot=w,i.sumTot=_}}))}var L={},R=0;Object.keys(P).forEach((function(t){var e=P[t];if(e.nodes&&e.nodes.length){var n=String(R+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),P[n]=e,L[t]=n,delete P[t],R++)}else delete P[t]})),I.forEach((function(t){var e=t.node,n=t.clusterId;e&&(e.clusterId=n,e.clusterId&&L[e.clusterId]&&(e.clusterId=L[e.clusterId]))}));var j=[],B={};y.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=S[e].node.clusterId,a=S[r].node.clusterId;if(o&&a){var s="".concat(o,"---").concat(a);if(B[s])B[s].weight+=i,B[s].count++;else{var u={source:o,target:a,weight:i,count:1};B[s]=u,j.push(u)}}}));var F=[];return Object.keys(P).forEach((function(t){F.push(P[t])})),{clusters:F,clusterEdges:j}}},9454:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(8823)),i=a(n(7085)),o=n(643);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){var n=[],r=t.nodes,a=void 0===r?[]:r,s=t.edges,u=void 0===s?[]:s;if(0===a.length)return n;var c=a[0],l=new Set;l.add(c);var f=new i.default((function(t,n){return e?t.weight-n.weight:0}));for((0,o.getEdgesByNodeId)(c.id,u).forEach((function(t){f.insert(t)}));!f.isEmpty();){var d=f.delMin(),h=d.source,p=d.target;l.has(h)&&l.has(p)||(n.push(d),l.has(h)||(l.add(h),(0,o.getEdgesByNodeId)(h,u).forEach((function(t){f.insert(t)}))),l.has(p)||(l.add(p),(0,o.getEdgesByNodeId)(p,u).forEach((function(t){f.insert(t)}))))}return n},u=function(t,e){var n=[],i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a;if(0===o.length)return n;var u=s.map((function(t){return t}));e&&u.sort((function(t,e){return t.weight-e.weight}));for(var c=new r.default(o.map((function(t){return t.id})));u.length>0;){var l=u.shift(),f=l.source,d=l.target;c.connected(f,d)||(n.push(l),c.union(f,d))}return n};e.default=function(t,e,n){return n?{prim:s,kruskal:u}[n](t,e):u(t,e)}},4926:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(2556))&&r.__esModule?r:{default:r},o=n(643);e.default=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r,a=1,s=0,u=1e3,c=t.nodes,l=void 0===c?[]:c,f=t.edges,d=void 0===f?[]:f,h=l.length,p={},g={},v=0;v<h;++v)p[y=(E=l[v]).id]=1/h,g[y]=1/h;for(var m=(0,i.default)(t);u>0&&a>e;){for(s=0,v=0;v<h;++v){var y=(E=l[v]).id;if(r=0,0===m[E.id].inDegree)p[y]=0;else{for(var b=(0,o.getNeighbors)(y,d,"source"),x=0;x<b.length;++x){var w=b[x],_=m[w].outDegree;_>0&&(r+=g[w]/_)}p[y]=n*r,s+=p[y]}}for(s=(1-s)/h,a=0,v=0;v<h;++v){var E;r=p[y=(E=l[v]).id]+s,a+=Math.abs(r-g[y]),g[y]=r}u-=1}return g}},7085:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){return t-e},r=function(){function t(t){void 0===t&&(t=n),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}();e.default=r},8481:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LinkedListNode=void 0;var n=function(t,e){return t===e},r=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}();e.LinkedListNode=r;var i=function(){function t(t){void 0===t&&(t=n),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new r(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new r(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}();e.default=i},3026:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(8481))&&r.__esModule?r:{default:r},o=function(){function t(){this.linkedList=new i.default}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}();e.default=o},8823:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}();e.default=n},7892:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.DistanceType=void 0,e.DistanceType=n,function(t){t.EuclideanDistance="euclideanDistance"}(n||(e.DistanceType=n={}))},643:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueId=e.getOutEdgesNodeId=e.getNeighbors=e.getEdgesByNodeId=void 0,e.getNeighbors=function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));return"target"===n?r.filter((function(e){return e.source===t})).map((function(t){return t.target})):"source"===n?r.filter((function(e){return e.target===t})).map((function(t){return t.source})):r.map((function(e){return e.source===t?e.target:e.source}))},e.getOutEdgesNodeId=function(t,e){return e.filter((function(e){return e.source===t}))},e.getEdgesByNodeId=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))},e.uniqueId=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)}},6838:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oneHot=e.getDistance=e.getAllKeyValueMap=e.default=void 0;var r,i=n(9242),o=n(7892),a=(r=n(9741))&&r.__esModule?r:{default:r},s=function(t,e,n){var r=[];(null==e?void 0:e.length)?r=e:(t.forEach((function(t){r=r.concat(Object.keys(t))})),r=(0,i.uniq)(r));var o={};return r.forEach((function(e){var r=[];t.forEach((function(t){void 0!==t[e]&&""!==t[e]&&r.push(t[e])})),r.length&&!(null==n?void 0:n.includes(e))&&(o[e]=(0,i.uniq)(r))})),o};e.getAllKeyValueMap=s;var u=function(t,e,n){var r=s(t,e,n),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r).every((function(t){return t.every((function(t){return"number"==typeof t}))}));return t.forEach((function(t,e){var n=[];Object.keys(r).forEach((function(e){var i=t[e],a=r[e],s=a.findIndex((function(t){return i===t})),u=[];if(o)u.push(i);else for(var c=0;c<a.length;c++)c===s?u.push(1):u.push(0);n=n.concat(u)})),i[e]=n})),i};e.oneHot=u;var c=function(t,e,n,r){void 0===n&&(n=o.DistanceType.EuclideanDistance);var i=0;return n===o.DistanceType.EuclideanDistance&&(i=new a.default(t).euclideanDistance(new a.default(e))),i};e.getDistance=c;var l={getAllKeyValueMap:s,oneHot:u,getDistance:c};e.default=l},3665:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPropertyWeight=e.getAllSortProperties=e.getAllProperties=e.default=void 0;var r=n(2935),i=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=100);var n={};t.forEach((function(t){t.properties&&Object.keys(t.properties).forEach((function(e){"id"===e||!"".concat(t.properties[e]).match(r.secondReg)&&!"".concat(t.properties[e]).match(r.dateReg)&&isNaN(Number(t.properties[e]))?n.hasOwnProperty(e)&&delete n[e]:n.hasOwnProperty(e)?n[e]+=1:n[e]=1}))}));var i=Object.keys(n).sort((function(t,e){return n[e]-n[t]}));return i.length<e?i:i.slice(0,e)};e.getAllSortProperties=i;var o=function(t,e){return e.map((function(e){return t.hasOwnProperty(e)?t[e]:0}))},a=function(t){for(var e=i(t),n=[],r=0;r<t.length;r++)n[r]=o(t[r].properties,e);return n};e.getPropertyWeight=a;var s=function(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach((function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])})),n};e.getAllProperties=s;var u={getAllSortProperties:i,getPropertyWeight:a,getAllProperties:s};e.default=u},9741:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(9242),i=function(){function t(t){this.arr=t}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new t(i)}},t.prototype.subtract=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new t(i)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var r in this.arr)n[r]=this.arr[r]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return r}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=(0,r.clone)(this.arr);n.sort((function(t,e){return t-e}));var i=n[n.length-1],o=n[0];for(var a in this.arr)e[a]=(this.arr[a]-o)/(i-o);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*t.arr[i];return r}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},t}();e.default=i},1656:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return f.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return f.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return y.getNeighbors}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return v.default}});var i=x(n(2238)),o=x(n(3764)),a=x(n(9527)),s=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=b(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(2556)),u=x(n(4282)),c=x(n(5891)),l=x(n(8089)),f=n(1727),d=x(n(5033)),h=x(n(5170)),p=x(n(5179)),g=x(n(9454)),v=x(n(4926)),m=x(n(2812)),y=n(643);function b(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(b=function(t){return t?n:e})(t)}function x(t){return t&&t.__esModule?t:{default:t}}},6044:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MESSAGE=e.ALGORITHM=void 0,e.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"},e.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},585:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=n(6044),o=(r=n(2067))&&r.__esModule?r:{default:r};e.default=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new Promise((function(n,r){var a=new o.default;a.postMessage({_algorithmType:t,data:e}),a.onmessage=function(t){var e=t.data,o=e.data,s=e._algorithmType;i.MESSAGE.SUCCESS===s?n(o):r(),a.terminate()}}))}}},485:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pageRankAsync=e.minimumSpanningTreeAsync=e.louvainAsync=e.labelPropagationAsync=e.getOutDegreeAsync=e.getNeighborsAsync=e.getInDegreeAsync=e.getDegreeAsync=e.getAdjMatrixAsync=e.floydWarshallAsync=e.findShortestPathAsync=e.findAllPathAsync=e.dijkstraAsync=e.detectCycleAsync=e.detectAllUndirectedCycleAsync=e.detectAllDirectedCycleAsync=e.detectAllCyclesAsync=e.connectedComponentAsync=e.GADDIAsync=void 0;var r,i=(r=n(585))&&r.__esModule?r:{default:r},o=n(6044);e.getAdjMatrixAsync=function(t,e){return(0,i.default)(o.ALGORITHM.getAdjMatrix).apply(void 0,[t,e])},e.connectedComponentAsync=function(t,e){return(0,i.default)(o.ALGORITHM.connectedComponent).apply(void 0,[t,e])},e.getDegreeAsync=function(t){return(0,i.default)(o.ALGORITHM.getDegree)(t)},e.getInDegreeAsync=function(t,e){return(0,i.default)(o.ALGORITHM.getInDegree)(t,e)},e.getOutDegreeAsync=function(t,e){return(0,i.default)(o.ALGORITHM.getOutDegree)(t,e)},e.detectCycleAsync=function(t){return(0,i.default)(o.ALGORITHM.detectCycle)(t)},e.detectAllCyclesAsync=function(t){return(0,i.default)(o.ALGORITHM.detectAllCycles)(t)},e.detectAllDirectedCycleAsync=function(t){return(0,i.default)(o.ALGORITHM.detectAllDirectedCycle)(t)},e.detectAllUndirectedCycleAsync=function(t){return(0,i.default)(o.ALGORITHM.detectAllUndirectedCycle)(t)},e.dijkstraAsync=function(t,e,n,r){return(0,i.default)(o.ALGORITHM.dijkstra).apply(void 0,[t,e,n,r])},e.findAllPathAsync=function(t,e,n,r){return(0,i.default)(o.ALGORITHM.findAllPath).apply(void 0,[t,e,n,r])},e.findShortestPathAsync=function(t,e,n,r,a){return(0,i.default)(o.ALGORITHM.findShortestPath).apply(void 0,[t,e,n,r,a])},e.floydWarshallAsync=function(t,e){return(0,i.default)(o.ALGORITHM.floydWarshall).apply(void 0,[t,e])},e.labelPropagationAsync=function(t,e,n,r){return void 0===r&&(r=1e3),(0,i.default)(o.ALGORITHM.labelPropagation)(t,e,n,r)},e.louvainAsync=function(t,e,n,r){return(0,i.default)(o.ALGORITHM.louvain)(t,e,n,r)},e.minimumSpanningTreeAsync=function(t,e,n){return(0,i.default)(o.ALGORITHM.minimumSpanningTree).apply(void 0,[t,e,n])},e.pageRankAsync=function(t,e,n){return(0,i.default)(o.ALGORITHM.pageRank).apply(void 0,[t,e,n])},e.getNeighborsAsync=function(t,e,n){return(0,i.default)(o.ALGORITHM.getNeighbors).apply(void 0,[t,e,n])},e.GADDIAsync=function(t,e,n,r,a,s,u){return void 0===n&&(n=!1),void 0===s&&(s="cluster"),void 0===u&&(u="cluster"),(0,i.default)(o.ALGORITHM.GADDI).apply(void 0,[t,e,n,r,a,s,u])}},2067:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=o?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=t[s]}return i.default=t,n&&n.set(t,i),i}(n(1656)),o=n(6044);function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}var s="undefined"!=typeof self?self:{};s.onmessage=function(t){var e=t.data,n=e._algorithmType,r=e.data;if(n)if("function"!=typeof i[n])s.postMessage({_algorithmType:o.MESSAGE.FAILURE});else{var a=i[n].apply(i,r);s.postMessage({_algorithmType:o.MESSAGE.SUCCESS,data:a})}},e.default=null},462:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===o(e)?e:String(e)}function s(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.r(e),n.d(e,{Kernel:function(){return U},World:function(){return Mt}});var f,d=n(6719),h=n.n(d),p=n(1763),g=n.n(p),v=n(1469),m=n.n(v),y=n(4687),b=n.n(y),x=1;function w(){return x++}!function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.SAMPLED=4]="SAMPLED",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(f||(f={}));var _,E,S,C,k=function(){function t(){u(this,t),this.config=void 0}return l(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}();function M(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}"undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"}(_||(_={})),function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"}(E||(E={})),function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"}(S||(S={})),function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"}(C||(C={}));var A,N,I,P,D,L,R,j,B,F,z,$,G,V,U=function(){function t(e,n){u(this,t),this.engine=e,this.configService=n,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,r;return l(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(T({canvas:e||M(),antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=g()(e)||h()(e)||m()(e);if(this.compiledBundle&&this.compiledBundle.context){var i=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(i)return i.value=e,this;var o=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));o&&(r?(o.data=e,o.isReferer=!1,o.storageClass===S.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(o.isReferer=!0,o.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(r=i(b().mark((function t(){var e,n,r=this,i=arguments;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data,n=t.name;r.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(n=i(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=i(b().mark((function t(){var e,n,r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=T({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?C.WGSL:C.GLSL450:C.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===S.StorageBuffer){var n=1;t.type===_.FloatArray?n=1:t.type===_.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),W=n(1550),H=n.n(W),Y=function(){function t(e,n){u(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,i=n.offset,o=n.stride,a=n.normalized,s=n.size,c=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:c||0},s&&(this.attribute.size=s)}return l(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),X=(s(A={},f.POINTS,"points"),s(A,f.LINES,"lines"),s(A,f.LINE_LOOP,"line loop"),s(A,f.LINE_STRIP,"line strip"),s(A,f.TRIANGLES,"triangles"),s(A,f.TRIANGLE_FAN,"triangle fan"),s(A,f.TRIANGLE_STRIP,"triangle strip"),A),q=(s(N={},f.STATIC_DRAW,"static"),s(N,f.DYNAMIC_DRAW,"dynamic"),s(N,f.STREAM_DRAW,"stream"),N),Z=(s(I={},f.BYTE,"int8"),s(I,f.UNSIGNED_INT,"int16"),s(I,f.INT,"int32"),s(I,f.UNSIGNED_BYTE,"uint8"),s(I,f.UNSIGNED_SHORT,"uint16"),s(I,f.UNSIGNED_INT,"uint32"),s(I,f.FLOAT,"float"),I),K=(s(P={},f.ALPHA,"alpha"),s(P,f.LUMINANCE,"luminance"),s(P,f.LUMINANCE_ALPHA,"luminance alpha"),s(P,f.RGB,"rgb"),s(P,f.RGBA,"rgba"),s(P,f.RGBA4,"rgba4"),s(P,f.RGB5_A1,"rgb5 a1"),s(P,f.RGB565,"rgb565"),s(P,f.DEPTH_COMPONENT,"depth"),s(P,f.DEPTH_STENCIL,"depth stencil"),P),J=(s(D={},f.DONT_CARE,"dont care"),s(D,f.NICEST,"nice"),s(D,f.FASTEST,"fast"),D),Q=(s(L={},f.NEAREST,"nearest"),s(L,f.LINEAR,"linear"),s(L,f.LINEAR_MIPMAP_LINEAR,"mipmap"),s(L,f.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),s(L,f.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),s(L,f.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),L),tt=(s(R={},f.REPEAT,"repeat"),s(R,f.CLAMP_TO_EDGE,"clamp"),s(R,f.MIRRORED_REPEAT,"mirror"),R),et=(s(j={},f.NONE,"none"),s(j,f.BROWSER_DEFAULT_WEBGL,"browser"),j),nt=(s(B={},f.NEVER,"never"),s(B,f.ALWAYS,"always"),s(B,f.LESS,"less"),s(B,f.LEQUAL,"lequal"),s(B,f.GREATER,"greater"),s(B,f.GEQUAL,"gequal"),s(B,f.EQUAL,"equal"),s(B,f.NOTEQUAL,"notequal"),B),rt=(s(F={},f.FUNC_ADD,"add"),s(F,f.MIN_EXT,"min"),s(F,f.MAX_EXT,"max"),s(F,f.FUNC_SUBTRACT,"subtract"),s(F,f.FUNC_REVERSE_SUBTRACT,"reverse subtract"),F),it=(s(z={},f.ZERO,"zero"),s(z,f.ONE,"one"),s(z,f.SRC_COLOR,"src color"),s(z,f.ONE_MINUS_SRC_COLOR,"one minus src color"),s(z,f.SRC_ALPHA,"src alpha"),s(z,f.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),s(z,f.DST_COLOR,"dst color"),s(z,f.ONE_MINUS_DST_COLOR,"one minus dst color"),s(z,f.DST_ALPHA,"dst alpha"),s(z,f.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),s(z,f.CONSTANT_COLOR,"constant color"),s(z,f.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),s(z,f.CONSTANT_ALPHA,"constant alpha"),s(z,f.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),s(z,f.SRC_ALPHA_SATURATE,"src alpha saturate"),z),ot=(s($={},f.NEVER,"never"),s($,f.ALWAYS,"always"),s($,f.LESS,"less"),s($,f.LEQUAL,"lequal"),s($,f.GREATER,"greater"),s($,f.GEQUAL,"gequal"),s($,f.EQUAL,"equal"),s($,f.NOTEQUAL,"notequal"),$),at=(s(G={},f.ZERO,"zero"),s(G,f.KEEP,"keep"),s(G,f.REPLACE,"replace"),s(G,f.INVERT,"invert"),s(G,f.INCR,"increment"),s(G,f.DECR,"decrement"),s(G,f.INCR_WRAP,"increment wrap"),s(G,f.DECR_WRAP,"decrement wrap"),G),st=(s(V={},f.FRONT,"front"),s(V,f.BACK,"back"),V),ut=function(){function t(e,n){u(this,t),this.buffer=void 0;var r=n.data,i=n.usage,o=n.type;this.buffer=e.buffer({data:r,usage:q[i||f.STATIC_DRAW],type:Z[o||f.UNSIGNED_BYTE]})}return l(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}();function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var dt="attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",ht=0,pt=!1,gt=function(){function t(e,n){var r=this;u(this,t),this.reGl=e,this.context=n,this.entity=w(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,o=t.data,a=t.isReferer,s=t.storageClass;if(s===S.StorageBuffer){if(a)r.textureCache[e]={data:void 0},i["".concat(e,"Size")]=function(){return o.compiledBundle.context.output.textureSize};else{r.textureCache[e]=r.calcDataTexture(e,n,o);var u=r.textureCache[e],c=u.textureWidth,l=u.isOutput;i["".concat(e,"Size")]=[c,c],l&&(r.outputTextureName=e,r.context.needPingpong&&(r.outputTextureName="".concat(e,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(e,n,o)))}i[e]=function(){return pt&&console.log("[".concat(r.entity,"]: ").concat(e," ").concat(r.textureCache[e].id)),r.textureCache[e].texture}}else if(s===S.Uniform){if(o&&(Array.isArray(o)||h()(o))&&o.length>16)throw new Error("invalid data type ".concat(n));i[e]=function(){return t.data}}}));var o=this.getOuputDataTexture(),a=o.textureWidth,s=o.texelCount;i.u_OutputTextureSize=[a,a],i.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var c={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:i,vert:dt,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(c)}var e;return l(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()})),pt&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:(e=i(b().mark((function t(){var e,n,r,i,o,a,s,u,c=this;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=c.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,i=n.elementsPerTexel,o=n.typedArrayConstructor,a=void 0===o?Float32Array:o,s=[],4!==i)for(u=0;u<e.length;u+=4)1===i?s.push(e[u]):2===i?s.push(e[u],e[u+1]):s.push(e[u],e[u+1],e[u+2]);else s=e;return t.abrupt("return",new a(s.slice(0,r)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture,pt&&console.log("[".concat(this.entity,"]: confirm input ").concat(e," from model ").concat(n.entity,", ").concat(n.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));if(n){var r=this.calcDataTexture(t,n.type,e),i=r.texture,o=r.data;this.textureCache[t].data=o,this.textureCache[t].texture=i}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e,pt&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return ft(ft({},t),{},{id:ht++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===_.Vector4FloatArray&&(r=4);for(var i=[],o=0;o<n.length;o+=r)1===r?i.push(n[o],0,0,0):2===r?i.push(n[o],n[o+1],0,0):3===r?i.push(n[o],n[o+1],n[o+2],0):4===r&&i.push(n[o],n[o+1],n[o+2],n[o+3]);var a,s=n.length,u=Math.ceil(s/r),c=Math.ceil(Math.sqrt(u)),l=c*c;u<l&&i.push.apply(i,function(t){if(Array.isArray(t))return ct(t)}(a=new Array(4*(l-u)).fill(0))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||function(t,e){if(t){if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(t,e):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var f=this.reGl.texture({width:c,height:c,data:i,type:"float"});return{id:ht++,data:i,originalDataLength:s,typedArrayConstructor:h()(n)?n.constructor:void 0,textureWidth:c,texture:f,texelCount:u,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),vt=function(){function t(e,n){u(this,t),this.elements=void 0;var r=n.data,i=n.usage,o=n.type,a=n.count;this.elements=e.elements({data:r,usage:q[i||f.STATIC_DRAW],type:Z[o||f.UNSIGNED_BYTE],count:a})}return l(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),mt=function(){function t(e,n){u(this,t),this.framebuffer=void 0;var r=n.width,i=n.height,o=n.color,a=n.colors,s=(n.depth,n.stencil,{width:r,height:i});Array.isArray(a)&&(s.colors=a.map((function(t){return t.get()}))),o&&"boolean"!=typeof o&&(s.color=o.get()),this.framebuffer=e.framebuffer(s)}return l(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),yt=n(8630),bt=n.n(yt);function xt(t){var e={};return Object.keys(t).forEach((function(n){wt(n,t[n],e,"")})),e}function wt(t,e,n,r){null===e||"number"==typeof e||"boolean"==typeof e||Array.isArray(e)&&"number"==typeof e[0]||h()(e)||""===e||void 0!==e.resize?n["".concat(r&&r+".").concat(t)]=e:(bt()(e)&&Object.keys(e).forEach((function(i){wt(i,e[i],n,"".concat(r&&r+".").concat(t))})),Array.isArray(e)&&e.forEach((function(e,i){Object.keys(e).forEach((function(o){wt(o,e[o],n,"".concat(r&&r+".").concat(t,"[").concat(i,"]"))}))})))}function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var St=function(){function t(e,n){u(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,i=n.fs,o=n.defines,a=n.attributes,s=n.uniforms,c=n.primitive,l=n.count,d=n.elements,h=n.depth,p=n.blend,g=n.stencil,v=n.cull,m=n.instances,y=n.scissor,b=n.viewport,x={};s&&(this.uniforms=xt(s),Object.keys(s).forEach((function(t){x[t]=e.prop(t)})));var w={};Object.keys(a).forEach((function(t){w[t]=a[t].get()}));var _=o&&this.generateDefines(o)||"",E={attributes:w,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(_,"\n").concat(i),uniforms:x,vert:"\n".concat(_,"\n").concat(r),primitive:X[void 0===c?f.TRIANGLES:c]};m&&(E.instances=m),l&&(E.count=l),d&&(E.elements=d.get()),y&&(E.scissor=y),b&&(E.viewport=b),this.initDepthDrawParams({depth:h},E),this.initBlendDrawParams({blend:p},E),this.initStencilDrawParams({stencil:g},E),this.initCullDrawParams({cull:v},E),this.drawCommand=e(E)}return l(t,[{key:"addUniforms",value:function(t){this.uniforms=Et(Et({},this.uniforms),xt(t))}},{key:"draw",value:function(t){var e=Et(Et({},this.uniforms),xt(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=o(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:"string"===r||(n[t]=e[t].get())})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:nt[n.func||f.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:it[i&&i.srcRGB||f.SRC_ALPHA],srcAlpha:it[i&&i.srcAlpha||f.SRC_ALPHA],dstRGB:it[i&&i.dstRGB||f.ONE_MINUS_SRC_ALPHA],dstAlpha:it[i&&i.dstAlpha||f.ONE_MINUS_SRC_ALPHA]},equation:{rgb:rt[o&&o.rgb||f.FUNC_ADD],alpha:rt[o&&o.alpha||f.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,i=n.mask,o=void 0===i?-1:i,a=n.func,s=void 0===a?{cmp:f.ALWAYS,ref:0,mask:-1}:a,u=n.opFront,c=void 0===u?{fail:f.KEEP,zfail:f.KEEP,zpass:f.KEEP}:u,l=n.opBack,d=void 0===l?{fail:f.KEEP,zfail:f.KEEP,zpass:f.KEEP}:l;e.stencil={enable:!!r,mask:o,func:Et(Et({},s),{},{cmp:ot[s.cmp]}),opFront:{fail:at[c.fail],zfail:at[c.zfail],zpass:at[c.zpass]},opBack:{fail:at[d.fail],zfail:at[d.zfail],zpass:at[d.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?f.BACK:i;e.cull={enable:!!r,face:st[o]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map((function(e){return"#define ".concat(e," ").concat(Number(t[e]))})).join("\n")}}]),t}(),Ct=function(){function t(e,n){u(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,i=n.type,o=void 0===i?f.UNSIGNED_BYTE:i,a=n.width,s=n.height,c=n.flipY,l=void 0!==c&&c,d=n.format,h=void 0===d?f.RGBA:d,p=n.mipmap,g=void 0!==p&&p,v=n.wrapS,m=void 0===v?f.CLAMP_TO_EDGE:v,y=n.wrapT,b=void 0===y?f.CLAMP_TO_EDGE:y,x=n.aniso,w=void 0===x?0:x,_=n.alignment,E=void 0===_?1:_,S=n.premultiplyAlpha,C=void 0!==S&&S,k=n.mag,M=void 0===k?f.NEAREST:k,O=n.min,T=void 0===O?f.NEAREST:O,A=n.colorSpace,N=void 0===A?f.BROWSER_DEFAULT_WEBGL:A;this.width=a,this.height=s;var I={width:a,height:s,type:Z[o],format:K[h],wrapS:tt[m],wrapT:tt[b],mag:Q[M],min:Q[T],alignment:E,flipY:l,colorSpace:et[N],premultiplyAlpha:C,aniso:w};r&&(I.data=r),"number"==typeof g?I.mipmap=J[g]:"boolean"==typeof g&&(I.mipmap=g),this.texture=e.texture(I)}return l(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),kt=function(){function t(){var e=this;u(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=i(b().mark((function t(n){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.uniforms){t.next=3;break}return t.next=3,Promise.all(Object.keys(n.uniforms).map(function(){var t=i(b().mark((function t(e){var r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.uniforms[e]||void 0===n.uniforms[e].load){t.next=5;break}return t.next=3,n.uniforms[e].load();case 3:r=t.sent,n.uniforms[e]=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",new St(e.gl,n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Y(e.gl,t)},this.createBuffer=function(t){return new ut(e.gl,t)},this.createElements=function(t){return new vt(e.gl,t)},this.createTexture2D=function(t){return new Ct(e.gl,t)},this.createFramebuffer=function(t){return new mt(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=i(b().mark((function t(n){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new gt(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,i=t.stencil,o=t.framebuffer,a=void 0===o?null:o,s={color:n,depth:r,stencil:i};s.framebuffer=null===a?a:a.get(),e.gl.clear(s)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(f.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(f.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,i=t.width,o=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,i,o),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,r={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(r.framebuffer=n.get()),e.gl.read(r)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return l(t,[{key:"init",value:(e=i(b().mark((function t(e){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){H()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}(),Mt=function(){function t(){u(this,t),this.engine=void 0,this.configService=new k}return l(t,[{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setEngine",value:function(t){this.engine=t}},{key:"createEntity",value:function(){return w()}},{key:"createKernel",value:function(t){var e=new U(this.engine,this.configService);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t;return n.setConfig(e),n.setEngine(new kt),n}}]),t}()},4993:function(t,e,n){"use strict";n.r(e),n.d(e,{AbstractEvent:function(){return Pu},AbstractGraph:function(){return su},AbstractLayout:function(){return Iu},Algorithm:function(){return Ay},Annotation:function(){return Vy},Arrow:function(){return Su},BaseGlobal:function(){return Bu},Bundling:function(){return Py},Combo:function(){return ks},Edge:function(){return ms},EdgeFilterLens:function(){return zy},Fisheye:function(){return Ly},G6GraphEvent:function(){return Ba},Global:function(){return md},Graph:function(){return ih},Grid:function(){return Ny},Hull:function(){return iu},ImageMinimap:function(){return Fy},Layout:function(){return Ed.Layouts},Legend:function(){return Gy},Marker:function(){return Cu},Menu:function(){return Dy},Minimap:function(){return Iy},Node:function(){return xs},Shape:function(){return ku},SnapLine:function(){return $y},TimeBar:function(){return By},ToolBar:function(){return Ry},Tooltip:function(){return jy},TreeGraph:function(){return uh},TreeLayout:function(){return jd},Util:function(){return Ld},default:function(){return Wy},registerBehavior:function(){return ju},registerCombo:function(){return Ru},registerEdge:function(){return Lu},registerLayout:function(){return Bd},registerNode:function(){return Du},version:function(){return Hy}});var r={};n.r(r),n.d(r,{GADDI:function(){return Jt},Stack:function(){return te},breadthFirstSearch:function(){return G},connectedComponent:function(){return W},cosineSimilarity:function(){return wt},default:function(){return ne},depthFirstSearch:function(){return K},detectAllCycles:function(){return tt},detectAllDirectedCycle:function(){return Q},detectAllUndirectedCycle:function(){return J},detectCycle:function(){return et},detectDirectedCycle:function(){return ee},dijkstra:function(){return nt},findAllPath:function(){return at},findShortestPath:function(){return ot},floydWarshall:function(){return st},getAdjMatrix:function(){return I},getDegree:function(){return Y},getInDegree:function(){return X},getNeighbors:function(){return F},getOutDegree:function(){return q},iLouvain:function(){return mt},kCore:function(){return yt},kMeans:function(){return xt},labelPropagation:function(){return ut},louvain:function(){return vt},minimumSpanningTree:function(){return At},nodesCosineSimilarity:function(){return _t},pageRank:function(){return Nt}});var i={};n.r(i),n.d(i,{Line:function(){return Oe},applyMatrix:function(){return de},compare:function(){return ae},distance:function(){return ge},floydWarshall:function(){return me},fractionToLine:function(){return Ie},getAdjMatrix:function(){return ye},getBBoxBoundLine:function(){return Te},getCircleCenterByPoints:function(){return pe},getCircleIntersectByPoint:function(){return le},getDegree:function(){return Ee},getEllipseIntersectByPoint:function(){return fe},getLineIntersect:function(){return ue},getPointsCenter:function(){return Pe},getRectIntersectByPoint:function(){return ce},intersectBBox:function(){return ke},invertMatrix:function(){return he},isPointInPolygon:function(){return Ce},isPointsOverlap:function(){return Re},isPolygonsIntersect:function(){return Me},itemIntersectByLine:function(){return Ne},lerp:function(){return Fe},lerpArray:function(){return ze},move:function(){return xe},pointLineDistance:function(){return Be},pointLineSquareDist:function(){return Le},pointRectSquareDist:function(){return je},rotate:function(){return _e},scale:function(){return we},scaleMatrix:function(){return ve},squareDist:function(){return De},translate:function(){return be}});var o={};n.r(o),n.d(o,{cloneBesidesImg:function(){return mn},getAnimateCfgWithCallback:function(){return yn},getBBox:function(){return nn},getComboBBox:function(){return gn},getLabelPosition:function(){return on},getLetterWidth:function(){return ln},getLoopCfgs:function(){return rn},getTextSize:function(){return fn},plainCombosToTrees:function(){return hn},reconstructTree:function(){return pn},shouldRefreshEdge:function(){return vn},traverseTree:function(){return un},traverseTreeUp:function(){return cn},truncateLabelByLength:function(){return dn}});var a={};n.r(a),n.d(a,{catmullRomToBezier:function(){return kn},fillPath:function(){return Yn},fillPathByDiff:function(){return Zn},formatPath:function(){return Qn},intersection:function(){return Wn},parsePathArray:function(){return Dn},parsePathString:function(){return Cn},pathToAbsolute:function(){return On},pathToCurve:function(){return In},rectPath:function(){return zn}});var s={};n.r(s),n.d(s,{easeBack:function(){return go},easeBackIn:function(){return ho},easeBackInOut:function(){return go},easeBackOut:function(){return po},easeBounce:function(){return co},easeBounceIn:function(){return uo},easeBounceInOut:function(){return lo},easeBounceOut:function(){return co},easeCircle:function(){return Ki},easeCircleIn:function(){return qi},easeCircleInOut:function(){return Ki},easeCircleOut:function(){return Zi},easeCubic:function(){return Ri},easeCubicIn:function(){return Di},easeCubicInOut:function(){return Ri},easeCubicOut:function(){return Li},easeElastic:function(){return yo},easeElasticIn:function(){return mo},easeElasticInOut:function(){return bo},easeElasticOut:function(){return yo},easeExp:function(){return Xi},easeExpIn:function(){return Hi},easeExpInOut:function(){return Xi},easeExpOut:function(){return Yi},easeLinear:function(){return Ai},easePoly:function(){return Fi},easePolyIn:function(){return ji},easePolyInOut:function(){return Fi},easePolyOut:function(){return Bi},easeQuad:function(){return Pi},easeQuadIn:function(){return Ni},easeQuadInOut:function(){return Pi},easeQuadOut:function(){return Ii},easeSin:function(){return Ui},easeSinIn:function(){return Gi},easeSinInOut:function(){return Ui},easeSinOut:function(){return Vi}});var u={};n.r(u),n.d(u,{calculationItemsBBox:function(){return Ua},cloneEvent:function(){return $a},formatPadding:function(){return za},isNaN:function(){return Va},isViewportChanged:function(){return Ga},processParallelEdges:function(){return Wa},uniqueId:function(){return Fa}});var c={};n.r(c),n.d(c,{getClosedSpline:function(){return Gs},getControlPoint:function(){return Fs},getSpline:function(){return Bs},getStarPath:function(){return Xs},paddedHull:function(){return Ys},pathToPoints:function(){return $s},pointsToPolygon:function(){return zs},roundedHull:function(){return Hs}});var l={};n.r(l),n.d(l,{defaultSubjectColors:function(){return Mu}});var f={};n.r(f),n.d(f,{isForce:function(){return Ou}});var d={};n.r(d),n.d(d,{Base:function(){return _c},Circle:function(){return Sc},Ellipse:function(){return Mc},Image:function(){return Ac},Line:function(){return Pc},Marker:function(){return Rc},Path:function(){return Yc},Polygon:function(){return Zc},Polyline:function(){return Jc},Rect:function(){return tl},Text:function(){return nl}});var h={};n.r(h),n.d(h,{Base:function(){return xl},Circle:function(){return _l},Dom:function(){return Sl},Ellipse:function(){return kl},Image:function(){return Ol},Line:function(){return Al},Marker:function(){return Dl},Path:function(){return Rl},Polygon:function(){return Bl},Polyline:function(){return zl},Rect:function(){return Gl},Text:function(){return Yl}});var p={};n.r(p),n.d(p,{getColorSetsBySubjectColors:function(){return pd},getColorsWithSubjectColor:function(){return hd},mixColor:function(){return dd}});var g={};n.r(g),n.d(g,{arrayToTextureData:function(){return Id},attributesToTextureData:function(){return Nd},buildTextureData:function(){return Od},buildTextureDataWithOneEdgeAttr:function(){return Td},buildTextureDataWithTwoEdgeAttr:function(){return Ad},proccessToFunc:function(){return Md},radialLayout:function(){return Pd}});var v={};n.r(v),n.d(v,{gpuDetector:function(){return Dd}});var m={};n.r(m),n.d(m,{assign:function(){return rp},default:function(){return Ep},defaultI18n:function(){return sp},format:function(){return wp},parse:function(){return _p},setGlobalDateI18n:function(){return cp},setGlobalDateMasks:function(){return xp}});var y=n(655),b=n(9242),x={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,n=this.events;this.graph=t,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!0),(0,b.each)(n,(function(e,n){t.on(n,e)})),document.addEventListener("visibilitychange",(function(){e.keydown=!1}))},unbind:function(t){var e=this.events,n=t.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!1),(0,b.each)(e,(function(e,n){t.off(n,e)})),t.get("canvas").set("draggable",n)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}},w=function(){function t(){}return t.registerBehavior=function(e,n){if(!n)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,b.clone)(x);Object.assign(r,n);var i=function(t){var e=this;Object.assign(this,this.getDefaultCfg(),t);var n=this.getEvents();this.events=null;var r={};n&&((0,b.each)(n,(function(t,n){r[n]=(0,b.wrapBehavior)(e,t)})),this.events=r)};i.prototype=r,t.types[e]=i},t.hasBehavior=function(e){return!!t.types[e]},t.getBehavior=function(e){return t.types[e]},t.types={},t}(),_=w,E=_,S="*",C=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events[S]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};a(i),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}(),k=C,M=n(5600);function O(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return M.fromRotation(r,n),M.multiply(t,r,e)}function T(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return M.fromScaling(r,n),M.multiply(t,r,e)}function A(t,e,n){return M.multiply(t,n,e)}function N(t,e){for(var n,r,i,o,a=t?[].concat(t):[1,0,0,0,1,0,0,0,1],s=0,u=e.length;s<u;s++){var c=e[s];switch(c[0]){case"t":n=a,r=a,i=[c[1],c[2]],void 0,o=[0,0,0,0,0,0,0,0,0],M.fromTranslation(o,i),M.multiply(n,o,r);break;case"s":T(a,a,[c[1],c[2]]);break;case"r":O(a,a,c[1]);break;case"m":A(a,a,c[1])}}return a}var I=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e,i.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,e||(i[s][a]=1))})),i},P=function(t,e){return t===e},D=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}(),L=function(){function t(t){void 0===t&&(t=P),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new D(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new D(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}(),R=L,j=function(){function t(){this.linkedList=new R}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}(),B=j,F=function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));return"target"===n?r.filter((function(e){return e.source===t})).map((function(t){return t.target})):"source"===n?r.filter((function(e){return e.target===t})).map((function(t){return t.source})):r.map((function(e){return e.source===t?e.target:e.source}))},z=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))},$=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)},G=function(t,e,n,r){void 0===r&&(r=!0);var i=function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n),o=new B,a=t.edges,s=void 0===a?[]:a;o.enqueue(e);for(var u="",c=function(){var t=o.dequeue();i.enter({current:t,previous:u}),F(t,s,r?"target":void 0).forEach((function(e){i.allowTraversal({previous:u,current:t,next:e})&&o.enqueue(e)})),i.leave({current:t,previous:u}),u=t};!o.isEmpty();)c()},V=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s=[],u=function t(e){s.push(e),a[e.id]=!0;for(var r=F(e.id,i),o=function(e){var i=r[e];if(!a[i]){var o=n.filter((function(t){return t.id===i}));o.length>0&&t(o[0])}},u=0;u<r.length;++u)o(u)},c=0;c<n.length;c++){var l=n[c];if(!a[l.id]){u(l);for(var f=[];s.length>0;)f.push(s.pop());o.push(f)}}return o},U=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s={},u={},c=[],l=0,f=function t(e){s[e.id]=l,u[e.id]=l,l+=1,o.push(e),a[e.id]=!0;for(var r=F(e.id,i,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),f=function(i){var o=r[i];if(s[o]||0===s[o])a[o]&&(u[e.id]=Math.min(u[e.id],s[o]));else{var c=n.filter((function(t){return t.id===o}));c.length>0&&t(c[0]),u[e.id]=Math.min(u[e.id],u[o])}},d=0;d<r.length;d++)f(d);if(u[e.id]===s[e.id]){for(var h=[];o.length>0;){var p=o.pop();if(a[p.id]=!1,h.push(p),p===e)break}h.length>0&&c.push(h)}},d=0,h=n;d<h.length;d++){var p=h[d];s[p.id]||0===s[p.id]||f(p)}return c};function W(t,e){return e?U(t):V(t)}var H=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e},Y=H,X=function(t,e){return H(t)[e]?H(t)[e].inDegree:0},q=function(t,e){return H(t)[e]?H(t)[e].outDegree:0};function Z(t,e,n,r){r.enter({current:e,previous:n});var i=t.edges;F(e,void 0===i?[]:i,"target").forEach((function(i){r.allowTraversal({previous:n,current:e,next:i})&&Z(t,i,e,r)})),r.leave({current:e,previous:n})}function K(t,e,n){Z(t,e,"",function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n))}var J=function(t,e,n){var r,i;void 0===n&&(n=!0);for(var o=[],a=0,s=W(t,!1);a<s.length;a++){var u=s[a];if(u.length)for(var c=u[0],l=c.id,f=[c],d=((r={})[l]=c,r),h=((i={})[l]=new Set,i);f.length>0;)for(var p=f.pop(),g=p.id,v=F(g,t.edges),m=function(r){var i,a=v[r],s=t.nodes.find((function(t){return t.id===a}));if(a===g)o.push(((i={})[a]=p,i));else if(a in h){if(!h[g].has(s)){for(var u=!0,c=[s,p],l=d[g];h[a].size&&!h[a].has(l)&&(c.push(l),l!==d[l.id]);)l=d[l.id];if(c.push(l),e&&n?(u=!1,c.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(u=!0)):e&&!n&&c.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(u=!1),u){for(var m={},y=1;y<c.length;y+=1)m[c[y-1].id]=c[y];c.length&&(m[c[c.length-1].id]=c[0]),o.push(m)}h[a].add(p)}}else d[a]=p,f.push(s),h[a]=new Set([p])},y=0;y<v.length;y+=1)m(y)}return o},Q=function(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],a=[],s={},u={},c=function t(u,c,l){var f=!1;if(e&&!1===n&&e.indexOf(u.id)>-1)return f;r.push(u),i.add(u);for(var d=l[u.id],h=0;h<d.length;h+=1)if((v=s[d[h]])===c){for(var p={},g=1;g<r.length;g+=1)p[r[g-1].id]=r[g];r.length&&(p[r[r.length-1].id]=r[0]),a.push(p),f=!0}else i.has(v)||t(v,c,l)&&(f=!0);if(f)!function(t){for(var e=[t];e.length>0;){var n=e.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(t){e.push(t)})),o[n.id].clear())}}(u);else for(h=0;h<d.length;h+=1){var v=s[d[h]];o[v.id].has(u)||o[v.id].add(u)}return r.pop(),f},l=t.nodes,f=void 0===l?[]:l,d=0;d<f.length;d+=1){var h=f[d],p=h.id;u[p]=d,s[d]=h}if(e&&n){var g=function(t){var n=e[t];u[f[t].id]=u[n],u[n]=0,s[0]=f.find((function(t){return t.id===n})),s[u[f[t].id]]=f[t]};for(d=0;d<e.length;d++)g(d)}for(var v=function(r){for(var i,o,s=1/0,c=0;c<r.length;c+=1)for(var l=r[c],f=0;f<l.length;f++){var d=u[l[f].id];d<s&&(s=d,o=c)}var h=r[o],p=[];for(c=0;c<h.length;c+=1){var g=h[c];p[g.id]=[];for(var v=0,m=F(g.id,t.edges,"target").filter((function(t){return h.map((function(t){return t.id})).indexOf(t)>-1}));v<m.length;v++){var y=m[v];y!==g.id||!1===n&&e.indexOf(g.id)>-1?p[g.id].push(u[y]):a.push(((i={})[g.id]=g,i))}}return{component:h,adjList:p,minIdx:s}},m=0;m<f.length;){var y=f.filter((function(t){return u[t.id]>=m})),b=U({nodes:y,edges:t.edges}).filter((function(t){return t.length>1}));if(0===b.length)break;var x=v(b),w=x.minIdx,_=x.adjList,E=x.component;if(!(E.length>1))break;E.forEach((function(t){o[t.id]=new Set}));var S=s[w];if(e&&n&&-1===e.indexOf(S.id))return a;c(S,S,_),m=w+1}return a},tt=function(t,e,n,r){return void 0===r&&(r=!0),e?Q(t,n,r):J(t,n,r)},et=function(t){var e=null,n=t.nodes,r={},i={},o={},a={};(void 0===n?[]:n).forEach((function(t){i[t.id]=t}));for(var s={enter:function(t){var n=t.current,a=t.previous;if(o[n]){e={};for(var s=n,u=a;u!==n;)e[s]=u,s=u,u=r[u];e[s]=u}else o[n]=n,delete i[n],r[n]=a},leave:function(t){var e=t.current;a[e]=e,delete o[e]},allowTraversal:function(t){var n=t.next;return!e&&!a[n]}};Object.keys(i).length;)K(t,Object.keys(i)[0],s);return e},nt=function(t,e,n,r){var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,u=[],c={},l={},f={};o.forEach((function(t,n){var r=t.id;u.push(r),l[r]=1/0,r===e&&(l[r]=0)}));for(var d=o.length,h=function(t){var e=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r}(l,o,c),i=e.id;if(c[i]=!0,l[i]===1/0)return"continue";var a=[];a=n?function(t,e){return e.filter((function(e){return e.source===t}))}(i,s):z(i,s),a.forEach((function(t){var n=t.target,o=t.source,a=n===i?o:n,s=r&&t[r]?t[r]:1;l[a]>l[e.id]+s?(l[a]=l[e.id]+s,f[a]=[e.id]):l[a]===l[e.id]+s&&f[a].push(e.id)}))},p=0;p<d;p++)h();f[e]=[e];var g={};for(var v in l)l[v]!==1/0&&rt(e,v,f,g);var m={};for(var v in g)m[v]=g[v][0];return{length:l,path:m,allPath:g}};function rt(t,e,n,r){if(t===e)return[t];if(r[e])return r[e];for(var i=[],o=0,a=n[e];o<a.length;o++){var s=rt(t,a[o],n,r);if(!s)return;for(var u=0,c=s;u<c.length;u++){var l=c[u];(0,b.isArray)(l)?i.push((0,y.__spreadArray)((0,y.__spreadArray)([],l,!0),[e],!1)):i.push([l,e])}}return r[e]=i,r[e]}var it,ot=function(t,e,n,r,i){var o=nt(t,e,r,i),a=o.length,s=o.path,u=o.allPath;return{length:a[n],path:s[n],allPath:u[n]}},at=function(t,e,n,r){var i;if(e===n)return[[e]];var o=t.edges,a=void 0===o?[]:o,s=[e],u=((i={})[e]=!0,i),c=[],l=[],f=r?F(e,a,"target"):F(e,a);for(c.push(f);s.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var h=d.shift();if(h&&(s.push(h),u[h]=!0,f=r?F(h,a,"target"):F(h,a),c.push(f.filter((function(t){return!u[t]})))),s[s.length-1]===n){var p=s.map((function(t){return t}));l.push(p),g=s.pop(),u[g]=!1,c.pop()}}else{var g=s.pop();u[g]=!1,c.pop()}}return l},st=function(t,e){for(var n=I(t,e),r=[],i=n.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:0!==n[o][a]&&n[o][a]?r[o][a]=n[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r},ut=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,u={},c={};o.forEach((function(t,e){var n=$();t.clusterId=n,u[n]={id:n,nodes:[t]},c[t.id]={node:t,idx:e}}));var l=I(t,e),f=[],d={};l.forEach((function(t,e){var n=0,r=o[e].id;d[r]={},t.forEach((function(t,e){if(t){n+=t;var i=o[e].id;d[r][i]=t}})),f.push(n)}));for(var h=0,p=function(){var t=!1;if(o.forEach((function(e){var n={};Object.keys(d[e.id]).forEach((function(t){var r=d[e.id][t],i=c[t].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(t){r<n[t]?(r=n[t],i=[t]):r===n[t]&&i.push(t)})),1!==i.length||i[0]!==e.clusterId){var o=i.indexOf(e.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){t=!0;var a=u[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var l=Math.floor(Math.random()*i.length),f=u[i[l]];f.nodes.push(e),e.clusterId=f.id}}})),!t)return"break";h++};h<r&&"break"!==p(););Object.keys(u).forEach((function(t){var e=u[t];e.nodes&&e.nodes.length||delete u[t]}));var g=[],v={};s.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=c[e].node.clusterId,a=c[r].node.clusterId,s="".concat(o,"---").concat(a);if(v[s])v[s].weight+=i,v[s].count++;else{var u={source:o,target:a,weight:i,count:1};v[s]=u,g.push(u)}}));var m=[];return Object.keys(u).forEach((function(t){m.push(u[t])})),{clusters:m,clusterEdges:g}},ct=function(){function t(t){this.arr=t}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new t(i)}},t.prototype.subtract=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new t(i)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var r in this.arr)n[r]=this.arr[r]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return r}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=(0,b.clone)(this.arr);n.sort((function(t,e){return t-e}));var r=n[n.length-1],i=n[0];for(var o in this.arr)e[o]=(this.arr[o]-i)/(r-i);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*t.arr[i];return r}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},t}(),lt=ct,ft=function(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach((function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])})),n};!function(t){t.EuclideanDistance="euclideanDistance"}(it||(it={}));var dt=function(t,e,n){var r=function(t,e,n){var r=[];(null==e?void 0:e.length)?r=e:(t.forEach((function(t){r=r.concat(Object.keys(t))})),r=(0,b.uniq)(r));var i={};return r.forEach((function(e){var r=[];t.forEach((function(t){void 0!==t[e]&&""!==t[e]&&r.push(t[e])})),r.length&&!(null==n?void 0:n.includes(e))&&(i[e]=(0,b.uniq)(r))})),i}(t,e,n),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r).every((function(t){return t.every((function(t){return"number"==typeof t}))}));return t.forEach((function(t,e){var n=[];Object.keys(r).forEach((function(e){var i=t[e],a=r[e],s=a.findIndex((function(t){return i===t})),u=[];if(o)u.push(i);else for(var c=0;c<a.length;c++)c===s?u.push(1):u.push(0);n=n.concat(u)})),i[e]=n})),i},ht=function(t,e,n,r){void 0===n&&(n=it.EuclideanDistance);var i=0;return n===it.EuclideanDistance&&(i=new lt(t).euclideanDistance(new lt(e))),i},pt=function(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var u=t[s].clusterId,c=0;c<i;c++)u===t[c].clusterId&&(a+=(e[s][c]||0)-(n[s]||0)*(n[c]||0)/o);return a*(1/o)},gt=function(t,e){void 0===t&&(t=[]);for(var n=t.length,r=new lt([]),i=0;i<n;i++)r=r.add(new lt(e[i]));var o=r.avg(n);o.normalize();var a=0;for(i=0;i<n;i++)a+=(u=new lt(e[i])).squareEuclideanDistance(o);var s=[];for(t.forEach((function(){s.push([])})),i=0;i<n;i++){var u=new lt(e[i]);t[i].clusterInertial=0;for(var c=0;c<n;c++)if(i!==c){var l=new lt(e[c]);s[i][c]=u.squareEuclideanDistance(l),t[i].clusterInertial+=s[i][c]}else s[i][c]=0}var f=0,d=2*n*a;for(i=0;i<n;i++){var h=t[i].clusterId;for(c=0;c<n;c++){var p=t[c].clusterId;i!==c&&h===p&&(f+=t[i].clusterInertial*t[c].clusterInertial/Math.pow(d,2)-s[i][c]/d)}}return Number(f.toFixed(4))},vt=function(t,e,n,r,i,o,a,s,u){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===a&&(a=[]),void 0===s&&(s=["id"]),void 0===u&&(u=1);var c=t.nodes,l=void 0===c?[]:c,f=t.edges,d=void 0===f?[]:f,h=[];if(i){l.forEach((function(t,e){t.properties=t.properties||{},t.originIndex=e}));var p=[];l.every((function(t){return t.hasOwnProperty("nodeType")}))&&(p=Array.from(new Set(l.map((function(t){return t.nodeType})))),l.forEach((function(t){t.properties.nodeType=p.findIndex((function(e){return e===t.nodeType}))})));var g=ft(l,o);h=dt(g,a,s)}var v=1,m={},y={};l.forEach((function(t,e){var n=String(v++);t.clusterId=n,m[n]={id:n,nodes:[t]},y[t.id]={node:t,idx:e}}));var x=I(t,e),w=[],_={},E=0;x.forEach((function(t,e){var n=0,r=l[e].id;_[r]={},t.forEach((function(t,e){if(t){n+=t;var i=l[e].id;_[r][i]=t,E+=t}})),w.push(n)})),E/=2;for(var S=1/0,C=1/0,k=0,M=[],O={};;){S=i&&l.every((function(t){return t.hasOwnProperty("properties")}))?pt(l,x,w,E)+gt(l,h)*u:pt(l,x,w,E),0===k&&(C=S,M=l,O=m);var T=S>0&&S>C&&S-C<r;if(S>C&&(M=l.map((function(t){return{node:t,clusterId:t.clusterId}})),O=(0,b.clone)(m),C=S),T||k>100)break;k++,Object.keys(m).forEach((function(t){var e=0;d.forEach((function(r){var i=r.source,o=r.target,a=y[i].node.clusterId,s=y[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=r[n]||1)})),m[t].sumTot=e})),l.forEach((function(t,e){var r,o=m[t.clusterId],a=0,s=w[e]/(2*E),c=0,l=o.nodes;l.forEach((function(t){var n=y[t.id].idx;c+=x[e][n]||0}));var f=c-o.sumTot*s,p=l.filter((function(e){return e.id!==t.id})),g=[];p.forEach((function(t,e){g[e]=h[t.originIndex]}));var v=gt(p,h)*u,b=_[t.id];if(Object.keys(b).forEach((function(n){var o=y[n].node.clusterId;if(o!==t.clusterId){var c=m[o],l=c.nodes;if(l&&l.length){var d=0;l.forEach((function(t){var n=y[t.id].idx;d+=x[e][n]||0}));var p=d-c.sumTot*s,g=l.concat([t]),b=[];g.forEach((function(t,e){b[e]=h[t.originIndex]}));var w=gt(g,h)*u,_=p-f;i&&(_=p+w-(f+v)),_>a&&(a=_,r=c)}}})),a>0){r.nodes.push(t);var S=t.clusterId;t.clusterId=r.id;var C=o.nodes.indexOf(t);o.nodes.splice(C,1);var k=0,M=0;d.forEach((function(t){var e=t.source,i=t.target,o=y[e].node.clusterId,a=y[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(k+=t[n]||1),(o===S&&a!==S||a===S&&o!==S)&&(M+=t[n]||1)})),r.sumTot=k,o.sumTot=M}}))}var A={},N=0;Object.keys(O).forEach((function(t){var e=O[t];if(e.nodes&&e.nodes.length){var n=String(N+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),O[n]=e,A[t]=n,delete O[t],N++)}else delete O[t]})),M.forEach((function(t){var e=t.node,n=t.clusterId;e&&(e.clusterId=n,e.clusterId&&A[e.clusterId]&&(e.clusterId=A[e.clusterId]))}));var P=[],D={};d.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=y[e].node.clusterId,a=y[r].node.clusterId;if(o&&a){var s="".concat(o,"---").concat(a);if(D[s])D[s].weight+=i,D[s].count++;else{var u={source:o,target:a,weight:i,count:1};D[s]=u,P.push(u)}}}));var L=[];return Object.keys(O).forEach((function(t){L.push(O[t])})),{clusters:L,clusterEdges:P}},mt=function(t,e,n,r,i,o,a,s){return void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=void 0),void 0===o&&(o=[]),void 0===a&&(a=["id"]),void 0===s&&(s=1),vt(t,e,n,r,!0,i,o,a,s)},yt=function(t,e){var n;void 0===e&&(e=1);for(var r=(0,b.clone)(t),i=r.nodes,o=void 0===i?[]:i,a=r.edges,s=void 0===a?[]:a,u=function(){var t=Y({nodes:o,edges:s}),r=Object.keys(t);r.sort((function(e,n){var r,i;return(null===(r=t[e])||void 0===r?void 0:r.degree)-(null===(i=t[n])||void 0===i?void 0:i.degree)}));var i=r[0];if(!o.length||(null===(n=t[i])||void 0===n?void 0:n.degree)>=e)return"break";var a=o.findIndex((function(t){return t.id===i}));o.splice(a,1),s=s.filter((function(t){return!(t.source===i||t.target===i)}))};"break"!==u(););return{nodes:o,edges:s}},bt=function(t,e,n){return t===it.EuclideanDistance?e[n]:[]},xt=function(t,e,n,r,i,o){void 0===e&&(e=3),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=["id"]),void 0===o&&(o=it.EuclideanDistance);var a=t.nodes,s=void 0===a?[]:a,u=t.edges,c=void 0===u?[]:u,l={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(o===it.EuclideanDistance&&!s.every((function(t){return t.hasOwnProperty(n)})))return l;var f=[],d=[];if(o===it.EuclideanDistance&&(f=ft(s,n),d=dt(f,r,i)),!d.length)return l;for(var h=(0,b.uniq)(d.map((function(t){return t.join("")}))),p=Math.min(e,s.length,h.length),g=0;g<s.length;g++)s[g].originIndex=g;var v=[],m=[],y=[];for(g=0;g<p;g++)if(0===g){var x=Math.floor(Math.random()*s.length);o===it.EuclideanDistance?v[g]=d[x]:v[g]=[],m.push(x),y[g]=[s[x]],s[x].clusterId=String(g)}else{for(var w=-1/0,_=0,E=function(t){if(!m.includes(t)){for(var e=0,n=0;n<v.length;n++){var r=0;o===it.EuclideanDistance&&(r=ht(d[s[t].originIndex],v[n],o)),e+=r}var i=e/v.length;i>w&&!v.find((function(e){return(0,b.isEqual)(e,bt(o,d,s[t].originIndex))}))&&(w=i,_=t)}},S=0;S<s.length;S++)E(S);v[g]=bt(o,d,_),m.push(_),y[g]=[s[_]],s[_].clusterId=String(g)}for(var C=0;;){for(g=0;g<s.length;g++){var k=0,M=1/0;if(0!==C||!m.includes(g)){for(var O=0;O<v.length;O++){var T=0;o===it.EuclideanDistance&&(T=ht(d[g],v[O],o)),T<M&&(M=T,k=O)}if(void 0!==s[g].clusterId)for(var A=y[Number(s[g].clusterId)].length-1;A>=0;A--)y[Number(s[g].clusterId)][A].id===s[g].id&&y[Number(s[g].clusterId)].splice(A,1);s[g].clusterId=String(k),y[k].push(s[g])}}var N=!1;for(g=0;g<y.length;g++){var I=y[g],P=new lt([]);for(O=0;O<I.length;O++)P=P.add(new lt(d[I[O].originIndex]));var D=P.avg(I.length);D.equal(new lt(v[g]))||(N=!0,v[g]=D.getArr())}if(C++,s.every((function(t){return void 0!==t.clusterId}))&&N||C>=1e3)break}var L=[],R={};return c.forEach((function(t){var e,n,r=t.source,i=t.target,o=null===(e=s.find((function(t){return t.id===r})))||void 0===e?void 0:e.clusterId,a=null===(n=s.find((function(t){return t.id===i})))||void 0===n?void 0:n.clusterId,u="".concat(o,"---").concat(a);if(R[u])R[u].count++;else{var c={source:o,target:a,count:1};R[u]=c,L.push(c)}})),{clusters:y,clusterEdges:L}},wt=function(t,e){var n=new lt(e),r=n.norm2(),i=new lt(t),o=i.norm2(),a=n.dot(i),s=r*o;return s?a/s:0},_t=function(t,e,n,r,i){void 0===t&&(t=[]),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=[]);var o=(0,b.clone)(t.filter((function(t){return t.id!==e.id}))),a=t.findIndex((function(t){return t.id===e.id})),s=ft(t,n),u=dt(s,r,i),c=u[a],l=[];return o.forEach((function(t,n){if(t.id!==e.id){var r=u[n],i=wt(r,c);l.push(i),t.cosineSimilarity=i}})),o.sort((function(t,e){return e.cosineSimilarity-t.cosineSimilarity})),{allCosineSimilarity:l,similarNodes:o}},Et=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}(),St=Et,Ct=function(t,e){return t-e},kt=function(){function t(t){void 0===t&&(t=Ct),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}(),Mt=kt,Ot=function(t,e){var n=[],r=t.nodes,i=void 0===r?[]:r,o=t.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=i[0],u=new Set;u.add(s);var c=new Mt((function(t,n){return e?t.weight-n.weight:0}));for(z(s.id,a).forEach((function(t){c.insert(t)}));!c.isEmpty();){var l=c.delMin(),f=l.source,d=l.target;u.has(f)&&u.has(d)||(n.push(l),u.has(f)||(u.add(f),z(f,a).forEach((function(t){c.insert(t)}))),u.has(d)||(u.add(d),z(d,a).forEach((function(t){c.insert(t)}))))}return n},Tt=function(t,e){var n=[],r=t.nodes,i=void 0===r?[]:r,o=t.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=a.map((function(t){return t}));e&&s.sort((function(t,e){return t.weight-e.weight}));for(var u=new St(i.map((function(t){return t.id})));s.length>0;){var c=s.shift(),l=c.source,f=c.target;u.connected(l,f)||(n.push(c),u.union(l,f))}return n},At=function(t,e,n){return n?{prim:Ot,kruskal:Tt}[n](t,e):Tt(t,e)},Nt=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r,i=1,o=0,a=1e3,s=t.nodes,u=void 0===s?[]:s,c=t.edges,l=void 0===c?[]:c,f=u.length,d={},h={},p=0;p<f;++p)d[v=(w=u[p]).id]=1/f,h[v]=1/f;for(var g=Y(t);a>0&&i>e;){for(o=0,p=0;p<f;++p){var v=(w=u[p]).id;if(r=0,0===g[w.id].inDegree)d[v]=0;else{for(var m=F(v,l,"source"),y=0;y<m.length;++y){var b=m[y],x=g[b].outDegree;x>0&&(r+=h[b]/x)}d[v]=n*r,o+=d[v]}}for(o=(1-o)/f,i=0,p=0;p<f;++p){var w;r=d[v=(w=u[p]).id]+o,i+=Math.abs(r-h[v]),h[v]=r}a-=1}return h},It=-1,Pt="-1",Dt="-1",Lt=function(t,e,n,r){void 0===t&&(t=-1),void 0===e&&(e=It),void 0===n&&(n=It),void 0===r&&(r=Pt),this.id=t,this.from=e,this.to=n,this.label=r},Rt=function(){function t(t,e){void 0===t&&(t=It),void 0===e&&(e=Dt),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),jt=function(){function t(t,e,n){void 0===t&&(t=It),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new Rt(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var i=new Lt(t,e,n,r);if(this.edges.push(i),this.edgeMap[t]=i,this.nodeMap[e].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new Lt(t,n,e,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},t}(),Bt=function(){function t(t,e,n,r,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||Dt,edgeLabel:r||Pt,nodeLabel2:i||Dt}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),Ft=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new Bt(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1);var n=new jt(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,i=t.nodeEdgeNodeLabel,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;o!==Dt&&n.addNode(e,o),s!==Dt&&n.addNode(r,s),o!==Dt&&s!==o&&n.addEdge(void 0,e,r,a)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],r=n.fromNode,i=n.toNode;r<i&&(void 0===t||i===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),zt=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),$t=function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,o=void 0===i?1:i,a=t.maxNodeNum,s=void 0===a?4:a,u=t.top,c=void 0===u?10:u,l=t.directed,f=void 0!==l&&l,d=t.verbose,h=void 0!==d&&d;this.graphs=e,this.dfsCode=new Ft,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=f,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=h,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var u=o[s];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,u=0;u<s;u++){var c=a[u],l=t.nodeMap[c.to];n<=l.label&&!r.hasNode(l)&&i.push(c)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,u=s.length,c=0;c<u;c++){var l=s[c],f=o[l.to].label;e.to===l.to||n>f||r.hasNode(o[l.to])||(e.label<l.label||e.label===l.label&&a<=f)&&i.push(l)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(-1,n),i=r.nodeMap,o=new Ft,a={};r.nodes.forEach((function(e){t.findForwardRootEdges(r,e).forEach((function(t){var n=i[t.to],o="".concat(e.label,"-").concat(t.label,"-").concat(n.label);a[o]||(a[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var s={graphId:r.id,edge:t,preNode:null};a[o].projected.push(s)}))}));var s=this.findMinLabel(a);if(s){o.dfsEdgeList.push(new Bt(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var u="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return function a(s){for(var u=o.buildRmpath(),c=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l=o.dfsEdgeList[u[0]].toNode,f={},d=!1,h=0,p=n?-1:0,g=function(e){if(d)return"break";s.forEach((function(n){var i=new zt(n),a=t.findBackwardEdge(r,i.edges[u[e]],i.edges[u[0]],i);a&&(f[a.label]||(f[a.label]={projected:[],edgeLabel:a.label}),f[a.label].projected.push({graphId:r.id,edge:f,preNode:n}),h=o.dfsEdgeList[u[e]].fromNode,d=!0)}))},v=u.length-1;v>p&&"break"!==g(v);v--);if(d){var m=t.findMinLabel(f);o.dfsEdgeList.push(new Bt(l,h,Dt,m.edgeLabel,Dt));var y=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[y]===o.dfsEdgeList[y]&&a(f[m.edgeLabel].projected)}var b={};d=!1;var x=0;s.forEach((function(e){var n=new zt(e),o=t.findForwardPureEdges(r,n.edges[u[0]],c,n);o.length>0&&(d=!0,x=l,o.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),b[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}));var w=u.length,_=function(e){if(d)return"break";var n=u[e];s.forEach((function(e){var a=new zt(e),s=t.findForwardRmpathEdges(r,a.edges[n],c,a);s.length>0&&(d=!0,x=o.dfsEdgeList[n].fromNode,s.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),b[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}))};for(v=0;v<w&&"break"!==_(v);v++);if(!d)return!0;var E=t.findMinLabel(b);o.dfsEdgeList.push(new Bt(x,l+1,Dt,E.edgeLabel,E.nodeLabel2));var S=o.dfsEdgeList.length-1;return e.dfsEdgeList[S]===o.dfsEdgeList[S]&&a(b["".concat(E.edgeLabel,"-").concat(E.nodeLabel2)].projected)}(a[u].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,b.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};t.forEach((function(t){for(var u=e.graphs[t.graphId],c=u.nodeMap,l=new zt(t),f=r.length-1;f>=0;f--){var d=e.findBackwardEdge(u,l.edges[r[f]],l.edges[r[0]],l);if(d){var h="".concat(e.dfsCode.dfsEdgeList[r[f]].fromNode,"-").concat(d.label);s[h]||(s[h]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[r[f]].fromNode,edgeLabel:d.label}),s[h].projected.push({graphId:t.graphId,edge:d,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(u,l.edges[r[0]],o,l).forEach((function(e){var n="".concat(i,"-").concat(e.label,"-").concat(c[e.to].label);a[n]||(a[n]={projected:[],fromNodeId:i,edgeLabel:e.label,nodeLabel2:c[e.to].label}),a[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var p=function(n){e.findForwardRmpathEdges(u,l.edges[r[n]],o,l).forEach((function(i){var o="".concat(e.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(i.label,"-").concat(c[i.to].label);a[o]||(a[o]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:c[i.to].label}),a[o].projected.push({graphId:t.graphId,edge:i,preNode:t})}))};for(f=0;f<r.length;f++)p(f)}})),Object.keys(s).forEach((function(t){var n=s[t],r=n.toNodeId,o=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new Bt(i,r,"-1",o,"-1")),e.subGraphMining(s[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(t){var n=a[t],r=n.fromNodeId,o=n.edgeLabel,s=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Bt(r,i+1,Dt,o,s)),e.subGraphMining(a[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(t).forEach((function(n){var r=t[n],u=r.nodeMap;r.nodes.forEach((function(t,r){var c=t.label,l="".concat(n,"-").concat(c);if(!a[l]){var f=i[c]||0;f++,i[c]=f}a[l]={graphKey:n,label:c},t.edges.forEach((function(t){var r=c,i=u[t.to].label;if(!e&&r>i){var a=i;i=r,r=a}var l=t.label,f="".concat(n,"-").concat(r,"-").concat(l,"-").concat(i),d="".concat(r,"-").concat(l,"-").concat(i);if(!o[d]){var h=o[d]||0;h++,o[d]=h}s[f]={graphId:n,nodeLabel1:r,edgeLabel:l,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){if(!(i[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),r.push(e)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(r){var i=e[r],o=i.nodeMap;i.nodes.forEach((function(e){t.findForwardRootEdges(i,e).forEach((function(t){var i=o[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(i.label);n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:r,edge:t,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var r=n[e],i=r.projected,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Bt(0,1,o,a,s)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()}))}},t}(),Gt="cluster",Vt=function(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(Ut(o,t,e,n,r))})),i},Ut=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,u){if(e<=i&&n!==u){o.push(u),a.push(t[u]);var c=t[u][r];s[c]?(s[c].count++,s[c].dists.push(e)):s[c]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},Wt=function(t,e,n,r){var i=n.nodes;return r||(r={}),Object.keys(t).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var u=t[o],c=null===(a=e[u.start])||void 0===a?void 0:a.nodeIdxs,l=null===(s=e[u.end])||void 0===s?void 0:s.nodeIdxs;if(c&&l){var f=new Set(l),d=c.filter((function(t){return f.has(t)}));if(d&&d.length){for(var h={},p=d.length,g=0;g<p;g++){var v=i[d[g]];r[o].nodes.push(v),h[v.id]=!0}n.edges.forEach((function(t){h[t.source]&&h[t.target]&&r[o].edges.push(t)}))}}}})),r},Ht=function(t,e,n,r){var i,o,a={};t.nodes.forEach((function(t){a[t.id]=t}));var s=0;return!(null===(i=null==e?void 0:e.edges)||void 0===i?void 0:i.length)||(null===(o=null==e?void 0:e.nodes)||void 0===o?void 0:o.length)<2?0:(t.edges.forEach((function(t){var i=a[t.source][n],o=a[t.target][n],u=null==e?void 0:e.nodes[0][n],c=null==e?void 0:e.nodes[1][n],l=null==e?void 0:e.edges[0][r];t[r]===l&&(i===u&&o===c||i===c&&o===u)&&s++})),s)},Yt=function(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];r[o]||(r[o]=[]),r[o].push(t)})),{nodeMap:n,nodeLabelMap:r}},Xt=function(t,e,n){var r={},i={};return t.forEach((function(t,o){r["".concat($)]={idx:o,edge:t};var a=t[e];i[a]||(i[a]=[]),i[a].push(t);var s=n[t.source];s&&(s.degree++,s.outDegree++);var u=n[t.target];u&&(u.degree++,u.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},qt=function(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,u=a;u<r;u++)if(o!==u){var c=t[u].id,l=e[u];i["".concat(s,"-").concat(c)]=l,n||(i["".concat(c,"-").concat(s)]=l)}})),i},Zt=function(t,e,n,r,i,o,a,s,u,c,l){var f,d="".concat(e.id,"-").concat(n.id);if(c&&c[d])return c[d];var h=l?l[d]:void 0;if(!h){var p=((f={})[d]={start:r[e.id].idx,end:r[n.id].idx,distance:i},f);h=(l=Wt(p,o,t,l))[d]}return Ht(h,a,s,u)},Kt=function(t,e,n,r){var i,o,a,s=null===(i=t[e])||void 0===i?void 0:i.degree,u=null===(o=t[e])||void 0===o?void 0:o.inDegree,c=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,u=1/0,c=1/0,r[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var r=n[t.id].inDegree;u>r&&(u=r);var i=n[t.id].outDegree;c>i&&(c=i)})),t[e]={degree:s,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},Jt=function(t,e,n,r,i,o,a){var s;if(void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),t&&t.nodes){var u=t.nodes.length;if(u){var c=st(t,n),l=st(e,n),f=qt(t.nodes,c,n),d=qt(e.nodes,l,n),h=Yt(t.nodes,o),p=h.nodeMap,g=h.nodeLabelMap,v=Yt(e.nodes,o),m=v.nodeMap,b=v.nodeLabelMap;Xt(t.edges,a,p);var x=Xt(e.edges,a,m).edgeLabelMap,w=[];null==l||l.forEach((function(t){w=w.concat(t)})),i||(i=Math.max.apply(Math,(0,y.__spreadArray)((0,y.__spreadArray)([],w,!1),[2],!1))),r||(r=i);var _=Vt(t,c,o,r),E=Vt(e,l,o,r),S=function(t,e,n,r,i){var o=Math.ceil(n/e),a={},s=0;return r.forEach((function(t,r){for(var u=0,c=0,l=t.nodeIdxs,f=t.neighborNum-1;u<o;){for(var d=l[1+Math.floor(Math.random()*f)],h=0;(a["".concat(r,"-").concat(d)]||a["".concat(d,"-").concat(r)])&&(d=Math.floor(Math.random()*e),!(++h>2*e)););if(h<2*e&&(a["".concat(r,"-").concat(d)]={start:r,end:d,distance:i[r][d]},u++,++s>=n))return a;if(++c>2*e)break}u<o&&(o=(o+(o-u))/(e-r-1))})),a}(0,u,Math.min(100,u*(u-1)/2),_,c),C=Wt(S,_,t),k=function(t){var e=t.graphs,n=t.directed,r=void 0!==n&&n,i=t.nodeLabelProp,o=void 0===i?Gt:i,a=t.edgeLabelProp,s=void 0===a?Gt:a,u=function(t,e,n,r){var i={};return Object.keys(t).forEach((function(o,a){var s=t[o],u=new jt(a,!0,e),c={};s.nodes.forEach((function(t,e){u.addNode(e,t[n]),c[t.id]=e})),s.edges.forEach((function(t,e){var n=c[t.source],i=c[t.target];u.addEdge(-1,n,i,t[r])})),u&&u.getNodeNum()&&(i[u.id]=u)})),i}(e,r,o,s),c=t.minSupport,l=t.maxNodeNum,f=t.minNodeNum,d=t.verbose,h=t.top,p=new $t({graphs:u,minSupport:c,maxNodeNum:l,minNodeNum:f,top:h,verbose:d,directed:r});p.run();var g=function(t,e,n){var r=[];return t.forEach((function(t){var i={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;i.nodes.push(((n={id:"".concat(t.id)})[e]=t.label,n))})),t.edges.forEach((function(t){var e;i.edges.push(((e={source:"".concat(t.from),target:"".concat(t.to)})[n]=t.label,e))})),r.push(i)})),r}(p.frequentSubgraphs,o,s);return g}({graphs:C,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),M=k.length,O=[];k.forEach((function(t,e){O[e]={},Object.keys(C).forEach((function(n){var r=C[n],i=Ht(r,t,o,a);O[e][n]=i}))}));var T=function(t,e,n){for(var r=1/0,i=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[];o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]}));var s=0,u=[];a.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,u.push(e);var r=0,i=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var c=0;u.forEach((function(t,e){u.forEach((function(n,r){e!==r&&(c+=Math.abs(t-n))})),c/=u.length*(u.length-1)/2}));var l=c-s;r<l&&(r=l,i=e)},a=0;a<e;a++)o(a);return{structure:n[i],structureCountMap:t[i]}}(O,M,k),A=T.structure,N=T.structureCountMap,I=e.nodes[0],P=[],D=null===(s=e.nodes[0])||void 0===s?void 0:s[o],L=-1/0;e.nodes.forEach((function(t){var e=t[o],n=g[e];(null==n?void 0:n.length)>L&&(L=n.length,P=n,D=e,I=t)}));var R={},j={},B={},F={},z={},$={};Object.keys(b).forEach((function(r,i){z[r]=[],n&&($[r]=[]);var s=-1/0,u=b[r],c={};u.forEach((function(t){var e=d["".concat(I.id,"-").concat(t.id)];if(e&&z[r].push(e),s<e&&(s=e),c["".concat(I.id,"-").concat(t.id)]={start:0,end:m[t.id].idx,distance:e},n){var i=d["".concat(t.id,"-").concat(I.id)];i&&$[r].push(i)}})),z[r]=z[r].sort((function(t,e){return t-e})),n&&($[r]=$[r].sort((function(t,e){return t-e}))),j=Wt(c,E,e,j);var l=[];if(Object.keys(c).forEach((function(t){if(B[t])l.push(B[t]);else{var e=j[t];B[t]=Ht(e,A,o,a),l.push(B[t])}})),l=l.sort((function(t,e){return e-t})),F["".concat(I.id,"-").concat(r)]=l,r!==D)for(var h=function(e){var n=P[e],i=_[p[n.id].idx],s=i.nodeLabelCountMap[r],u=b[r].length;if(!s||s.count<u)return P.splice(e,1),"continue";for(var c=!1,d=0;d<u;d++)if(s.dists[d]>z[r][d]){c=!0;break}if(c)return P.splice(e,1),"continue";var h={};i.neighbors.forEach((function(t){var e=f["".concat(n.id,"-").concat(t.id)];h["".concat(n.id,"-").concat(t.id)]={start:p[n.id].idx,end:p[t.id].idx,distance:e}})),C=Wt(h,_,t,C);var g=[];Object.keys(h).forEach((function(t){if(N[t])g.push(N[t]);else{var e=C[t];N[t]=Ht(e,A,o,a),g.push(N[t])}})),g=g.sort((function(t,e){return e-t}));var v=!1;for(d=0;d<u;d++)if(g[d]<l[d]){v=!0;break}return v?(P.splice(e,1),"continue"):void 0},g=((null==P?void 0:P.length)||0)-1;g>=0;g--)h(g)}));var G=[];null==P||P.forEach((function(r){for(var s=p[r.id].idx,u=Ut(t.nodes,c[s],s,o,i).neighbors,l=!1,d=u.length-1;d>=0;d--){if(u.length+1<e.nodes.length)return void(l=!0);var h=u[d],g=h[o];if(b[g]&&b[g].length)if(z[g]&&z[g].length){var v="".concat(r.id,"-").concat(h.id),y=f[v],x=z[g].length-1;if(y>z[g][x])u.splice(d,1);else{if(n){var w="".concat(h.id,"-").concat(r.id),E=f[w];if(x=$[g].length-1,E>$[g][x]){u.splice(d,1);continue}}var S=N[v]?N[v]:Zt(t,r,h,p,y,_,A,o,a,N,C),k="".concat(I.id,"-").concat(g);if(S<F[k][F[k].length-1])u.splice(d,1);else{var M=Kt(R,g,m,b),O=M.minPatternNodeLabelDegree;M.minPatternNodeLabelInDegree,M.minPatternNodeLabelOutDegree,p[h.id].degree<O&&u.splice(d,1)}}}else u.splice(d,1);else u.splice(d,1)}l||G.push({nodes:[r].concat(u)})}));var V=nt(e,I.id,!1).length,U={};n?(Object.keys(V).forEach((function(t){var e=m[t].node[o];U[e]?U[e].push(V[t]):U[e]=[V[t]]})),Object.keys(U).forEach((function(t){U[t].sort((function(t,e){return t-e}))}))):U=z;for(var W=function(r){var i=G[r],s=i.nodes[0],u={},c={};i.nodes.forEach((function(t,e){c[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[o];u[n]?u[n]++:u[n]=1}));var l=[],f={};t.edges.forEach((function(t){c[t.source]&&c[t.target]&&(l.push(t),f[t[a]]?f[t[a]]++:f[t[a]]=1,c[t.source].degree++,c[t.target].degree++,c[t.source].outDegree++,c[t.target].inDegree++)}));for(var d=Object.keys(x).length,h=!1,g=0;g<d;g++){var v=Object.keys(x)[g];if(!f[v]||f[v]<x[v].length){h=!0;break}}if(h)return G.splice(r,1),"continue";var y=l.length;if(y<e.edges.length)return G.splice(r,1),"break";var w=!1,_=function(t){var e=l[t],r=e[a],i=x[r];if(!i||!i.length)return f[r]--,i&&f[r]<i.length?(w=!0,"break"):(l.splice(t,1),c[e.source].degree--,c[e.target].degree--,c[e.source].outDegree--,c[e.target].inDegree--,"continue");var s=c[e.source].node[o],u=c[e.target].node[o],d=!1;return i.forEach((function(t){var e=m[t.source].node,r=m[t.target].node;e[o]===s&&r[o]===u&&(d=!0),n||e[o]!==u||r[o]!==s||(d=!0)})),d?void 0:(f[r]--,i&&f[r]<i.length?(w=!0,"break"):(l.splice(t,1),c[e.source].degree--,c[e.target].degree--,c[e.source].outDegree--,c[e.target].inDegree--,"continue"))};for(g=y-1;g>=0&&"break"!==_(g);g--);if(w)return G.splice(r,1),"continue";i.edges=l;var E=nt(i,i.nodes[0].id,!1).length;if(Object.keys(E).reverse().forEach((function(t){if(t!==i.nodes[0].id&&!w){if(E[t]===1/0){var e=c[t].node[o];if(u[e]--,u[e]<b[e].length)return void(w=!0);var n=i.nodes.indexOf(c[t].node);return i.nodes.splice(n,1),void(c[t]=void 0)}var r=p[t].node[o];if(!U[r]||!U[r].length||E[t]>U[r][U[r].length-1]){if(e=c[t].node[o],u[e]--,u[e]<b[e].length)return void(w=!0);n=i.nodes.indexOf(c[t].node),i.nodes.splice(n,1),c[t]=void 0}}})),w)return G.splice(r,1),"continue";for(var S=!0,C=0;S&&!w;){if(S=!1,n?c[s.id].degree<m[I.id].degree||c[s.id].inDegree<m[I.id].inDegree||c[s.id].outDegree<m[I.id].outDegree:c[s.id].degree<m[I.id].degree){w=!0;break}if(u[s[o]]<b[s[o]].length){w=!0;break}for(var k=i.nodes.length-1;k>=0;k--){var M=i.nodes[k],O=c[M.id].degree,T=c[M.id].inDegree,A=c[M.id].outDegree,N=M[o],P=Kt(R,N,m,b),D=P.minPatternNodeLabelDegree,L=P.minPatternNodeLabelInDegree,j=P.minPatternNodeLabelOutDegree;if(n?O<D||T<L||A<j:O<D){if(u[M[o]]--,u[M[o]]<b[M[o]].length){w=!0;break}i.nodes.splice(k,1),c[M.id]=void 0,S=!0}}if(w||!S&&0!==C)break;for(var B=(y=l.length)-1;B>=0;B--){var F=l[B];if(!c[F.source]||!c[F.target]){l.splice(B,1);var z=F[a];if(f[z]--,c[F.source]&&(c[F.source].degree--,c[F.source].outDegree--),c[F.target]&&(c[F.target].degree--,c[F.target].inDegree--),x[z]&&f[z]<x[z].length){w=!0;break}S=!0}}C++}return w||w||i.nodes.length<e.nodes.length||l.length<e.edges.length?(G.splice(r,1),"continue"):void 0},H=G.length-1;H>=0&&"break"!==W(H);H--);var Y=G.length,X=function(t){var e=G[t],n={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);n[e]?n[e]++:n[e]=1}));for(var r=function(t){var e=G[t],r={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[e]?r[e]++:r[e]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(t){r[t]!==n[t]&&(i=!1)})),i&&G.splice(t,1)},i=Y-1;i>t;i--)r(i);Y=G.length};for(H=0;H<=Y-1;H++)X(H);return G}}},Qt=function(){function t(t){void 0===t&&(t=10),this.linkedList=new R,this.maxStep=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map((function(t){return t.value}))},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t}(),te=Qt,ee=et,ne={getAdjMatrix:I,breadthFirstSearch:G,connectedComponent:W,getDegree:Y,getInDegree:X,getOutDegree:q,detectCycle:et,detectDirectedCycle:ee,detectAllCycles:tt,detectAllDirectedCycle:Q,detectAllUndirectedCycle:J,depthFirstSearch:K,dijkstra:nt,findAllPath:at,findShortestPath:ot,floydWarshall:st,labelPropagation:ut,louvain:vt,iLouvain:mt,kCore:yt,kMeans:xt,cosineSimilarity:wt,nodesCosineSimilarity:_t,minimumSpanningTree:At,pageRank:Nt,getNeighbors:F,Stack:te,GADDI:Jt},re=n(7160),ie=n(1437),oe=N,ae=function(t){return function(e,n){return e[t]-n[t]}},se=function(t,e,n){return t>=e&&t<=n},ue=function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=e.x-t.x,s=e.y-t.y,u=r.x-n.x,c=r.y-n.y,l=a*c-s*u,f=1/l;if(l*l>1e-4*(a*a+s*s)*(u*u+c*c)){var d=(i*c-o*u)*f,h=(i*s-o*a)*f;return se(d,0,1)&&se(h,0,1)?{x:t.x+d*a,y:t.y+d*s}:null}return null},ce=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=[],s={x:n+i/2,y:r+o/2};a.push({x:n,y:r}),a.push({x:n+i,y:r}),a.push({x:n+i,y:r+o}),a.push({x:n,y:r+o}),a.push({x:n,y:r});for(var u=null,c=1;c<a.length&&!(u=ue(a[c-1],a[c],s,e));c++);return u},le=function(t,e){var n=t.x,r=t.y,i=t.r,o=e.x-n,a=e.y-r;if(o*o+a*a<i*i)return null;var s=Math.atan(a/o);return{x:n+Math.abs(i*Math.cos(s))*Math.sign(o),y:r+Math.abs(i*Math.sin(s))*Math.sign(a)}},fe=function(t,e){var n=t.rx,r=t.ry,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=Math.atan2(s/r,a/n);return u<0&&(u+=2*Math.PI),{x:i+n*Math.cos(u),y:o+r*Math.sin(u)}},de=function(t,e,n){void 0===n&&(n=1);var r=[t.x,t.y,n];return e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),re.transformMat3(r,r,e),{x:r[0],y:r[1]}},he=function(t,e,n){void 0===n&&(n=1),e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]);var r=M.invert([1,0,0,0,1,0,0,0,1],e);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[t.x,t.y,n];return re.transformMat3(i,i,r),{x:i[0],y:i[1]}},pe=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=t.x-n.x,a=t.y-n.y,s=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,u=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,c=i*o-r*a;return{x:-(a*s-i*u)/c,y:-(r*u-o*s)/c}},ge=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},ve=function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n},me=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)e[r][i]>e[r][o]+e[o][i]&&(e[r][i]=e[r][o]+e[o][i]);return e},ye=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e,i.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];i[a][s]=1,e||(i[s][a]=1)})),i},be=function(t,e){t.translate(e.x,e.y)},xe=function(t,e,n,r){void 0===r&&(r={duration:500});var i=t.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=t.getCanvasBBox(),a=e.x-o.minX,s=e.y-o.minY;if(n){var u=a*i[0],c=s*i[4],l=0,f=0,d=0,h=0;t.animate((function(t){return i=oe(i,[["t",(d=u*t)-l,(h=c*t)-f]]),l=d,f=h,{matrix:i}}),r)}else{var p=oe(i,[["t",a,s]]);t.setMatrix(p)}},we=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=e;(0,b.isArray)(e)||(r=[e,e]),(0,b.isArray)(e)&&1===e.length&&(r=[e[0],e[0]]),n=oe(n,[["s",r[0],r[1]]]),t.setMatrix(n)},_e=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=oe(n,[["r",e]]),t.setMatrix(n)},Ee=function(t,e,n){for(var r=[],i=0;i<t;i++)r[i]=0;return n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r};function Se(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}var Ce=function(t,e,n){var r=!1,i=t.length,o=1e-6;function a(t){return Math.abs(t)<o?0:t<0?-1:1}if(i<=2)return!1;for(var s=0;s<i;s++){var u=t[s],c=t[(s+1)%i];if(Se(u,c,[e,n]))return!0;a(u[1]-n)>0!=a(c[1]-n)>0&&a(e-(n-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(r=!r)}return r},ke=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},Me=function(t,e){var n=function(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}},r=function(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e};if(t.length<2||e.length<2)return!1;var i=n(t),o=n(e);if(!ke(i,o))return!1;var a=!1;if((0,b.each)(e,(function(e){if(Ce(t,e[0],e[1]))return a=!0,!1})),a)return!0;if((0,b.each)(t,(function(t){if(Ce(e,t[0],t[1]))return a=!0,!1})),a)return!0;var s=r(t),u=r(e),c=!1;return(0,b.each)(u,(function(t){if(function(t,e){var n=!1;return(0,b.each)(t,(function(t){if(ue(t.from,t.to,e.from,e.to))return n=!0,!1})),n}(s,t))return c=!0,!1})),c},Oe=function(){function t(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}return t.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),r=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:n,maxY:r,width:n-t,height:r-e}},t}(),Te=function(t,e){return{top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]}[e]},Ae=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){var o=n/i,a=r/i;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},Ne=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=0,o=[],a=0;a<4;a++){var s=Te(r,n[a]),u=s[0],c=s[1],l=s[2],f=s[3];o[a]=ue({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:u,y:c},{x:l,y:f}),o[a]&&(i+=1)}return[o,i]},Ie=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=Te(r,n[a]),u=s[0],c=s[1],l=s[2],f=s[3],d=Ae(e,new Oe(u,c,l,f));(d=Math.abs(d-.5))>=0&&d<=1&&(o+=1,i=d<i?d:i)}return 0===o?-1:i},Pe=function(t){var e=0,n=0;if(t.length>0){for(var r=0,i=t;r<i.length;r++){var o=i[r];e+=o.x,n+=o.y}e/=t.length,n/=t.length}return{x:e,y:n}},De=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},Le=function(t,e){var n,r=e.x1,i=e.y1,o=e.x2-r,a=e.y2-i,s=t.x-r,u=t.y-i,c=s*o+u*a;n=c<=0||(c=(s=o-s)*o+(u=a-u)*a)<=0?0:c*c/(o*o+a*a);var l=s*s+u*u-n;return l<0&&(l=0),l},Re=function(t,e,n){return void 0===n&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},je=function(t,e){var n=t.x<e.x,r=t.x>e.x+e.width,i=t.y>e.y+e.height,o=t.y<e.y;if(!(n||r||i||o))return 0;if(i&&!n&&!r)return Math.pow(e.y+e.height-t.y,2);if(o&&!n&&!r)return Math.pow(t.y-e.y,2);if(n&&!i&&!o)return Math.pow(e.x-t.x,2);if(r&&!i&&!o)return Math.pow(e.x+e.width-t.x,2);var a=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),s=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return a*a+s*s},Be=function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e.x,s=e.y,u=[i-n,o-r];if(ie.exactEquals(u,[0,0]))return NaN;var c=[-u[1],u[0]];ie.normalize(c,c);var l=[a-n,s-r];return Math.abs(ie.dot(l,c))},Fe=function(t,e,n){return t+(e-t)*n},ze=function(t,e,n){for(var r=Math.min(t.length,e.length),i=new Array(r),o=0;o<r;o++)i[o]=Fe(t[o],e[o],n);return i},$e="rgb(95, 149, 255)",Ge="rgb(0, 0, 0)",Ve="rgb(247, 250, 255)",Ue="rgb(253, 253, 253)",We="rgb(250, 250, 250)",He="rgb(224, 224, 224)",Ye="rgb(234, 234, 234)",Xe="#4572d9",qe={version:"0.8.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:$e,fill:"rgb(239, 244, 255)"},size:20,color:$e,linkPoints:{size:8,lineWidth:1,fill:Ve,stroke:$e}},nodeStateStyles:{active:{fill:Ve,stroke:$e,lineWidth:2,shadowColor:$e,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:$e,lineWidth:4,shadowColor:$e,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:Xe,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Ve,stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:We,stroke:He,lineWidth:1}},edgeLabel:{style:{fill:Ge,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:He,lineAppendWidth:2},color:He},edgeStateStyles:{active:{stroke:$e,lineWidth:1},selected:{stroke:$e,lineWidth:2,shadowColor:$e,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$e,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Ye,lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:Ge,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Ue,lineWidth:1,stroke:He,r:5,width:20,height:10},size:[20,5],color:He,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:$e,lineWidth:1,fill:Ve},selected:{stroke:$e,lineWidth:2,fill:Ue,shadowColor:$e,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Xe,lineWidth:2,fill:Ue,"text-shape":{fontWeight:500}},inactive:{stroke:He,fill:Ue,lineWidth:1},disable:{stroke:Ye,fill:We,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:"undefined"!=typeof window&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Ze={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ke=Math.PI,Je=Math.sin,Qe=Math.cos,tn=Je(Ke/8),en=Qe(Ke/8),nn=function(t,e){var n=t.getBBox(),r={x:n.minX,y:n.minY},i={x:n.maxX,y:n.maxY};if(e){var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),r=de(r,o),i=de(i,o)}var a=r.x,s=r.y,u=i.x,c=i.y;return{x:a,y:s,minX:a,minY:s,maxX:u,maxY:c,width:u-a,height:c-s}},rn=function(t){var e=t.sourceNode||t.targetNode,n=e.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=e.getKeyShape(),i=r.getBBox(),o=t.loopCfg||{},a=o.dist||2*Math.max(i.width,i.height),s=o.position||qe.defaultLoopPosition,u=[n[6],n[7]],c=[t.startPoint.x,t.startPoint.y],l=[t.endPoint.x,t.endPoint.y],f=i.height/2,d=i.width/2,h=f,p=f,g=h*tn,v=h*en,m=p*tn,y=p*en,b=r.get("type"),x=Math.min(f/2,d/2),w=Math.min(f,d),_=(null==o?void 0:o.pointPadding)?Math.min(w,null==o?void 0:o.pointPadding):x;if(c[0]===l[0]&&c[1]===l[1]){switch(s){case"top":"circle"===b?(c=[u[0]-g,u[1]-v],l=[u[0]+m,u[1]-y]):(c=[u[0]-_,u[1]-f],l=[u[0]+_,u[1]-f]);break;case"top-right":h=f,p=d,"circle"===b?(c=[u[0]+(g=h*tn),u[1]-(v=h*en)],l=[u[0]+(y=p*en),u[1]-(m=p*tn)]):(c=[u[0]+d-_,u[1]-f],l=[u[0]+d,u[1]-f+_]);break;case"right":h=d,p=d,"circle"===b?(c=[u[0]+(v=h*en),u[1]-(g=h*tn)],l=[u[0]+(y=p*en),u[1]+(m=p*tn)]):(c=[u[0]+d,u[1]-_],l=[u[0]+d,u[1]+_]);break;case"bottom-right":h=d,p=f,"circle"===b?(c=[u[0]+(v=h*en),u[1]+(g=h*tn)],l=[u[0]+(m=p*tn),u[1]+(y=p*en)]):(c=[u[0]+d,u[1]+f-_],l=[u[0]+d-_,u[1]+f]);break;case"bottom":h=f,p=f,"circle"===b?(c=[u[0]+(g=h*tn),u[1]+(v=h*en)],l=[u[0]-(m=p*tn),u[1]+(y=p*en)]):(c=[u[0]-_,u[1]+f],l=[u[0]+_,u[1]+f]);break;case"bottom-left":h=f,p=d,"circle"===b?(c=[u[0]-(g=h*tn),u[1]+(v=h*en)],l=[u[0]-(y=p*en),u[1]+(m=p*tn)]):(c=[u[0]-d,u[1]+f-_],l=[u[0]-d+_,u[1]+f]);break;case"left":h=d,p=d,"circle"===b?(c=[u[0]-(v=h*en),u[1]+(g=h*tn)],l=[u[0]-(y=p*en),u[1]-(m=p*tn)]):(c=[u[0]-d,u[1]-_],l=[u[0]-d,u[1]+_]);break;case"top-left":h=d,p=f,"circle"===b?(c=[u[0]-(v=h*en),u[1]-(g=h*tn)],l=[u[0]-(m=p*tn),u[1]-(y=p*en)]):(c=[u[0]-d+_,u[1]-f],l=[u[0]-d,u[1]-f+_]);break;default:c=[u[0]-(g=(h=d)*tn),u[1]-(v=h*en)],l=[u[0]+(m=(p=d)*tn),u[1]-(y=p*en)]}if(!1===o.clockwise){var E=[c[0],c[1]];c=[l[0],l[1]],l=[E[0],E[1]]}}var S=[c[0]-u[0],c[1]-u[1]],C=(h+a)/h,k=(p+a)/p;!1===o.clockwise&&(C=(p+a)/p,k=(h+a)/h);var M=ie.scale([0,0],S,C),O=[u[0]+M[0],u[1]+M[1]],T=[l[0]-u[0],l[1]-u[1]],A=ie.scale([0,0],T,k),N=[u[0]+A[0],u[1]+A[1]];return t.startPoint={x:c[0],y:c[1]},t.endPoint={x:l[0],y:l[1]},t.controlPoints=[{x:O[0],y:O[1]},{x:N[0],y:N[1]}],t},on=function(t,e,n,r,i){var o=1e-4,a=[],s=null==t?void 0:t.getPoint(e);if(!s)return{x:0,y:0,angle:0};if(e<o)a=t.getStartTangent().reverse();else if(e>.9999)a=t.getEndTangent();else{var u=null==t?void 0:t.getPoint(e+o);a.push([s.x,s.y]),a.push([u.x,u.y])}var c=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(c<0&&(c+=2*Ke),n&&(s.x+=Qe(c)*n,s.y+=Je(c)*n),r){var l=c-Ke/2;c>.5*Ke&&c<1.5*Ke&&(l-=Ke),s.x+=Qe(l)*r,s.y+=Je(l)*r}var f={x:s.x,y:s.y,angle:c};return i?(c>.5*Ke&&c<1.5*Ke&&(c-=Ke),(0,y.__assign)({rotate:c},f)):f},an=function t(e,n,r,i){if(!1===i(e,n,r))return!1;if(e&&e.children)for(var o=e.children.length-1;o>=0;o--)if(!t(e.children[o],e,o,i))return!1;return!0},sn=function t(e,n,r,i){if(e&&e.children)for(var o=e.children.length-1;o>=0;o--)if(!t(e.children[o],e,o,i))return;return!1!==i(e,n,r)},un=function(t,e){"function"==typeof e&&an(t,null,-1,e)},cn=function(t,e){"function"==typeof e&&sn(t,null,-1,e)},ln=function(t,e){return e*(Ze[t]||1)},fn=function(t,e){var n=0,r=new RegExp("[-]+");return t.split("").forEach((function(t){r.test(t)?n+=e:n+=ln(t,e)})),[n,e]},dn=function(t,e){return"number"!=typeof e||e<=0||e>=t.length?t:t.substring(0,e)+"..."},hn=function(t,e){var n=[],r={},i={};t.forEach((function(t){i[t.id]=t})),t.forEach((function(t,e){var o=(0,b.clone)(t);o.itemType="combo",o.children=void 0,o.parentId===o.id?(console.warn("The parentId for combo ".concat(o.id," can not be the same as the combo's id")),delete o.parentId):o.parentId&&!i[o.parentId]&&(console.warn("The parent combo for combo ".concat(o.id," does not exist!")),delete o.parentId);var a=r[o.id];if(a){if(o.children=a.children,r[o.id]=o,!(a=o).parentId)return void n.push(a);var s=r[a.parentId];if(s)s.children?s.children.push(o):s.children=[o];else{var u={id:a.parentId,children:[a]};r[a.parentId]=u,r[o.id]=o}}else if((0,b.isString)(t.parentId)){var c=r[t.parentId];if(c)c.children?c.children.push(o):c.children=[o],r[o.id]=o;else{var l={id:t.parentId,children:[o]};r[l.id]=l,r[o.id]=o}}else n.push(o),r[o.id]=o}));var o={};(e||[]).forEach((function(t){o[t.id]=t;var e=r[t.comboId];if(e){var n={id:t.id,comboId:t.comboId};e.children?e.children.push(n):e.children=[n],n.itemType="node",r[t.id]=n}}));var a=0;return n.forEach((function(t){t.depth=a+10,un(t,(function(t){var e,n=r[t.id].itemType;e="node"===n?r[t.comboId]:r[t.parentId],t.depth=e&&"node"===n?a+1:a+10,a<t.depth&&(a=t.depth);var i=o[t.id];return i&&(i.depth=t.depth),!0}))})),n},pn=function(t,e,n){var r,i,o=t,a={root:{children:t}},s=!1,u="root";(t||[]).forEach((function(t){if(!s)return t.id===e?(i=t,"combo"===t.itemType?i.parentId=n:i.comboId=n,void(s=!0)):void un(t,(function(t){var r;return a[t.id]={children:(null==t?void 0:t.children)||[]},o=null===(r=a[t.parentId||t.comboId||"root"])||void 0===r?void 0:r.children,!t||!t.removed&&e!==t.id||!o||(u=t.parentId||t.comboId||"root",i=t,"combo"===t.itemType?i.parentId=n:i.comboId=n,s=!0,!1)}))}));var c=(o=null===(r=a[u])||void 0===r?void 0:r.children)?o.indexOf(i):-1;if(c>-1&&o.splice(c,1),s||(i={id:e,itemType:"node",comboId:n},a[e]={children:void 0}),e){var l=!1;if(n){var f=0;(t||[]).forEach((function(t){l||un(t,(function(t){return n!==t.id||(l=!0,t.children?t.children.push(i):t.children=[i],f=t.depth,"node"===i.itemType?i.depth=f+2:i.depth=f+1,!1)}))}))}else n&&l||"node"===i.itemType||t.push(i);var d=i.depth;un(i,(function(t){return"node"===t.itemType?d+=2:d+=1,t.depth=d,!0}))}return t},gn=function(t,e,n){var r={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!t||0===t.length){var i=(null==n?void 0:n.getModel())||{},o=i.x,a=i.y,s=i.fixSize,u=i.collapsed,c=i.fixCollapseSize,l=u?c:s,f=(0,b.isArray)(l)?l:[l,l],d=f[0],h=f[1],p=[d/2,h/2];return{minX:o-p[0],minY:a-p[1],maxX:o+p[0],maxY:a+p[1],x:o,y:a,width:d,height:h}}return t.forEach((function(t){var n=e.findById(t.id);if(n&&n.isVisible()){n.set("bboxCanvasCache",void 0);var i=n.getCanvasBBox();i.x&&r.minX>i.minX&&(r.minX=i.minX),i.y&&r.minY>i.minY&&(r.minY=i.minY),i.x&&r.maxX<i.maxX&&(r.maxX=i.maxX),i.y&&r.maxY<i.maxY&&(r.maxY=i.maxY)}})),r.x=(r.minX+r.maxX)/2,r.y=(r.minY+r.maxY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,"circle"===(null==n?void 0:n.getKeyShape().get("type"))&&(r.width=Math.hypot(r.height,r.width),r.height=r.width),Object.keys(r).forEach((function(t){r[t]!==1/0&&r[t]!==-1/0||(r[t]=void 0)})),r},vn=function(t){var e=(0,b.isNumber)(t.x)||(0,b.isNumber)(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||(0,b.isNumber)(t.style.r)||(0,b.isNumber)(t.style.width)||(0,b.isNumber)(t.style.height)||(0,b.isNumber)(t.style.rx)||(0,b.isNumber)(t.style.ry)),e},mn=function(t){var e={};return Object.keys(t).forEach((function(n){var r=t[n];if((0,b.isObject)(r)&&!(0,b.isArray)(r)){var i={};Object.keys(r).forEach((function(t){var e=r[t];("img"!==t||(0,b.isString)(e))&&(i[t]=(0,b.clone)(e))})),e[n]=i}else e[n]=(0,b.clone)(r)})),e},yn=function(t){var e,n=t.animateCfg,r=t.callback;if(n)if(e=(0,b.clone)(n),n.callback){var i=n.callback;e.callback=function(){r(),i()}}else e.callback=r;else e={duration:500,callback:r};return e},bn=function(t){if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var e=t.nodes,n=t.edges,r=t.combos,i=void 0===r?[]:r;if(!e&&!n){var o=!0;return un(t,(function(t){return!!(0,b.isString)(t.id)||(o=!1,!1)})),o}var a=(e||[]).find((function(t){return!(0,b.isString)(t.id)}));if(a)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(a.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var s=(e||[]).map((function(t){return t.id})),u=null==i?void 0:i.map((function(t){return t.id})),c=(0,y.__spreadArray)((0,y.__spreadArray)([],s,!0),u,!0),l=(n||[]).find((function(t){return!c.includes(t.source)||!c.includes(t.target)}));return!l||(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},xn=function(){function t(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return t.prototype.formatModes=function(){var t=this.modes;(0,b.each)(t,(function(t){(0,b.each)(t,(function(e,n){(0,b.isString)(e)&&(t[n]={type:e})}))}))},t.prototype.setBehaviors=function(t){var e,n=this.graph,r=this.modes[t],i=[];(0,b.each)(r||[],(function(t){var r=_.getBehavior(t.type||t);r&&(e=new r(t))&&(e.bind(n),i.push(e))})),this.currentBehaves=i},t.mergeBehaviors=function(t,e){return(0,b.each)(e,(function(e){t.indexOf(e)<0&&((0,b.isString)(e)&&(e={type:e}),t.push(e))})),t},t.filterBehaviors=function(t,e){var n=[];return t.forEach((function(t){var r;r=(0,b.isString)(t)?t:t.type,e.indexOf(r)<0&&n.push(t)})),n},t.prototype.setMode=function(t){var e=this.modes,n=this.graph,r=t;e[r]&&(n.emit("beforemodechange",{mode:t}),(0,b.each)(this.currentBehaves,(function(t){t.delegate&&t.delegate.remove(),t.unbind(n)})),this.setBehaviors(r),n.emit("aftermodechange",{mode:t}),this.mode=t)},t.prototype.getMode=function(){return this.mode},t.prototype.manipulateBehaviors=function(e,n,r){var i,o=this;if(i=(0,b.isArray)(e)?e:[e],(0,b.isArray)(n))return(0,b.each)(n,(function(e){o.modes[e]?o.modes[e]=r?t.mergeBehaviors(o.modes[e]||[],i):t.filterBehaviors(o.modes[e]||[],i):r&&(o.modes[e]=i)})),this;var a=n;return n||(a=this.mode),this.modes[a]||r&&(this.modes[a]=i),this.modes[a]=r?t.mergeBehaviors(this.modes[a]||[],i):t.filterBehaviors(this.modes[a]||[],i),this.formatModes(),this.setMode(this.mode),this},t.prototype.updateBehavior=function(t,e,n){(0,b.isString)(t)&&(t={type:t});var r=[];if(n&&n!==this.mode&&"default"!==n){if(!(r=this.modes[n])||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var i=r.length;for(a=0;a<i;a++){if((s=r[a]).type===t.type||s===t.type)return s===t.type&&(s={type:s}),Object.assign(s,e),r[a]=s,this;a===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(r=this.currentBehaves)||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var o=r.length,a=0;a<o;a++){var s;if((s=r[a]).type===t.type)return s.updateCfg(e),this;a===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},t.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t}(),wn=xn,_n="\t\n\v\f\r \u2028\u2029",En=new RegExp("([a-z])["+_n+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+_n+"]*,?["+_n+"]*)+)","ig"),Sn=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+_n+"]*,?["+_n+"]*","ig"),Cn=function(t){if(!t)return null;if((0,b.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(En,(function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(Sn,(function(t,e){e&&a.push(+e)})),"m"===s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;a.length>=e[s]&&(n.push([i].concat(a.splice(0,e[s]))),e[s]););return t})),n},kn=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},Mn=function(t,e,n,r,i){var o=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var a=Math.PI/180,s=t+n*Math.cos(-r*a),u=t+n*Math.cos(-i*a);o=[["M",s,e+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,u,e+n*Math.sin(-i*a)]]}else o=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},On=function(t){if(!(t=Cn(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,o=0,a=0,s=0,u=0;"M"===t[0][0]&&(a=i=+t[0][1],s=o=+t[0][2],u++,r[0]=["M",i,o]);for(var c=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),l=void 0,f=void 0,d=u,h=t.length;d<h;d++){if(r.push(l=[]),(e=(f=t[d])[0])!==e.toUpperCase())switch(l[0]=e.toUpperCase(),l[0]){case"A":l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=+f[6]+i,l[7]=+f[7]+o;break;case"V":l[1]=+f[1]+o;break;case"H":l[1]=+f[1]+i;break;case"R":for(var p=2,g=(n=[i,o].concat(f.slice(1))).length;p<g;p++)n[p]=+n[p]+i,n[++p]=+n[p]+o;r.pop(),r=r.concat(kn(n,c));break;case"O":r.pop(),(n=Mn(i,o,f[1],f[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(Mn(i,o,f[1],f[2],f[3])),l=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+f[1]+i,s=+f[2]+o;break;default:for(p=1,g=f.length;p<g;p++)l[p]=+f[p]+(p%2?i:o)}else if("R"===e)n=[i,o].concat(f.slice(1)),r.pop(),r=r.concat(kn(n,c)),l=["R"].concat(f.slice(-2));else if("O"===e)r.pop(),(n=Mn(i,o,f[1],f[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(Mn(i,o,f[1],f[2],f[3])),l=["U"].concat(r[r.length-1].slice(-2));else for(var v=0,m=f.length;v<m;v++)l[v]=f[v];if("O"!==(e=e.toUpperCase()))switch(l[0]){case"Z":i=+a,o=+s;break;case"H":i=l[1];break;case"V":o=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];break;default:i=l[l.length-2],o=l[l.length-1]}}return r},Tn=function(t,e,n,r){return[t,e,n,r,n,r]},An=function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},Nn=function(t,e,n,r,i,o,a,s,u,c){n===r&&(n+=1);var l,f,d,h,p,g=120*Math.PI/180,v=Math.PI/180*(+i||0),m=[],y=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(c)f=c[0],d=c[1],h=c[2],p=c[3];else{t=(l=y(t,e,-v)).x,e=l.y,s=(l=y(s,u,-v)).x,u=l.y,t===s&&e===u&&(s+=1,u+=1);var b=(t-s)/2,x=(e-u)/2,w=b*b/(n*n)+x*x/(r*r);w>1&&(n*=w=Math.sqrt(w),r*=w);var _=n*n,E=r*r,S=(o===a?-1:1)*Math.sqrt(Math.abs((_*E-_*x*x-E*b*b)/(_*x*x+E*b*b)));h=S*n*x/r+(t+s)/2,p=S*-r*b/n+(e+u)/2,f=Math.asin(((e-p)/r).toFixed(9)),d=Math.asin(((u-p)/r).toFixed(9)),f=t<h?Math.PI-f:f,d=s<h?Math.PI-d:d,f<0&&(f=2*Math.PI+f),d<0&&(d=2*Math.PI+d),a&&f>d&&(f-=2*Math.PI),!a&&d>f&&(d-=2*Math.PI)}var C=d-f;if(Math.abs(C)>g){var k=d,M=s,O=u;d=f+g*(a&&d>f?1:-1),s=h+n*Math.cos(d),u=p+r*Math.sin(d),m=Nn(s,u,n,r,i,0,a,M,O,[d,k,h,p])}C=d-f;var T=Math.cos(f),A=Math.sin(f),N=Math.cos(d),I=Math.sin(d),P=Math.tan(C/4),D=4/3*n*P,L=4/3*r*P,R=[t,e],j=[t+D*A,e-L*T],B=[s+D*I,u-L*N],F=[s,u];if(j[0]=2*R[0]-j[0],j[1]=2*R[1]-j[1],c)return[j,B,F].concat(m);for(var z=[],$=0,G=(m=[j,B,F].concat(m).join().split(",")).length;$<G;$++)z[$]=$%2?y(m[$-1],m[$],v).y:y(m[$],m[$+1],v).x;return z},In=function(t,e){var n,r=On(t),i=e&&On(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],u=[],c="",l="",f=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(Nn.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(An(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(An(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(Tn(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(Tn(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(Tn(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(Tn(e.x,e.y,e.X,e.Y))}return t},d=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)s[e]="A",i&&(u[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},h=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var p=0;p<n;p++){r[p]&&(c=r[p][0]),"C"!==c&&(s[p]=c,p&&(l=s[p-1])),r[p]=f(r[p],o,l),"A"!==s[p]&&"C"===c&&(s[p]="C"),d(r,p),i&&(i[p]&&(c=i[p][0]),"C"!==c&&(u[p]=c,p&&(l=u[p-1])),i[p]=f(i[p],a,l),"A"!==u[p]&&"C"===c&&(u[p]="C"),d(i,p)),h(r,i,o,a,p),h(i,r,a,o,p);var g=r[p],v=i&&i[p],m=g.length,y=i&&v.length;o.x=g[m-2],o.y=g[m-1],o.bx=parseFloat(g[m-4])||o.x,o.by=parseFloat(g[m-3])||o.y,a.bx=i&&(parseFloat(v[y-4])||a.x),a.by=i&&(parseFloat(v[y-3])||a.y),a.x=i&&v[y-2],a.y=i&&v[y-1]}return i?[r,i]:r},Pn=/,?([a-z]),?/gi,Dn=function(t){return t.join(",").replace(Pn,"$1")},Ln=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},Rn=function(t,e,n,r,i,o,a,s,u){null===u&&(u=1);for(var c=(u=u>1?1:u<0?0:u)/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,h=0;h<12;h++){var p=c*l[h]+c,g=Ln(p,t,n,i,a),v=Ln(p,e,r,o,s),m=g*g+v*v;d+=f[h]*Math.sqrt(m)}return c*d},jn=function(t,e,n,r,i,o,a,s){for(var u,c,l,f,d=[],h=[[],[]],p=0;p<2;++p)if(0===p?(c=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*a,l=3*n-3*t):(c=6*e-12*r+6*o,u=-3*e+9*r-9*o+3*s,l=3*r-3*e),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;(f=-l/c)>0&&f<1&&d.push(f)}else{var g=c*c-4*l*u,v=Math.sqrt(g);if(!(g<0)){var m=(-c+v)/(2*u);m>0&&m<1&&d.push(m);var y=(-c-v)/(2*u);y>0&&y<1&&d.push(y)}}for(var b,x=d.length,w=x;x--;)b=1-(f=d[x]),h[0][x]=b*b*b*t+3*b*b*f*n+3*b*f*f*i+f*f*f*a,h[1][x]=b*b*b*e+3*b*b*f*r+3*b*f*f*o+f*f*f*s;return h[0][w]=t,h[1][w]=e,h[0][w+1]=a,h[1][w+1]=s,h[0].length=h[1].length=w+2,{min:{x:Math.min.apply(0,h[0]),y:Math.min.apply(0,h[1])},max:{x:Math.max.apply(0,h[0]),y:Math.max.apply(0,h[1])}}},Bn=function(t,e,n,r,i,o,a,s){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,s)||Math.min(e,r)>Math.max(o,s))){var u=(t-n)*(o-s)-(e-r)*(i-a);if(u){var c=((t*r-e*n)*(i-a)-(t-n)*(i*s-o*a))/u,l=((t*r-e*n)*(o-s)-(e-r)*(i*s-o*a))/u,f=+c.toFixed(2),d=+l.toFixed(2);if(!(f<+Math.min(t,n).toFixed(2)||f>+Math.max(t,n).toFixed(2)||f<+Math.min(i,a).toFixed(2)||f>+Math.max(i,a).toFixed(2)||d<+Math.min(e,r).toFixed(2)||d>+Math.max(e,r).toFixed(2)||d<+Math.min(o,s).toFixed(2)||d>+Math.max(o,s).toFixed(2)))return{x:c,y:l}}}},Fn=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},zn=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=Dn,o},$n=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:zn(t,e,n,r),vb:[t,e,n,r].join(" ")}},Gn=function(t,e,n,r,i,o,a,s){(0,b.isArray)(t)||(t=[t,e,n,r,i,o,a,s]);var u=jn.apply(null,t);return $n(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Vn=function(t,e,n,r,i,o,a,s,u){var c=1-u,l=Math.pow(c,3),f=Math.pow(c,2),d=u*u,h=d*u,p=t+2*u*(n-t)+d*(i-2*n+t),g=e+2*u*(r-e)+d*(o-2*r+e),v=n+2*u*(i-n)+d*(a-2*i+n),m=r+2*u*(o-r)+d*(s-2*o+r);return{x:l*t+3*f*u*n+3*c*u*u*i+h*a,y:l*e+3*f*u*r+3*c*u*u*o+h*s,m:{x:p,y:g},n:{x:v,y:m},start:{x:c*t+u*n,y:c*e+u*r},end:{x:c*i+u*a,y:c*o+u*s},alpha:90-180*Math.atan2(p-v,g-m)/Math.PI}},Un=function(t,e,n){if(r=Gn(t),i=Gn(e),r=$n(r),i=$n(i),!(Fn(i,r.x,r.y)||Fn(i,r.x2,r.y)||Fn(i,r.x,r.y2)||Fn(i,r.x2,r.y2)||Fn(r,i.x,i.y)||Fn(r,i.x2,i.y)||Fn(r,i.x,i.y2)||Fn(r,i.x2,i.y2)||(r.x<i.x2&&r.x>i.x||i.x<r.x2&&i.x>r.x)&&(r.y<i.y2&&r.y>i.y||i.y<r.y2&&i.y>r.y)))return n?0:[];for(var r,i,o=~~(Rn.apply(0,t)/8),a=~~(Rn.apply(0,e)/8),s=[],u=[],c={},l=n?0:[],f=0;f<o+1;f++){var d=Vn.apply(0,t.concat(f/o));s.push({x:d.x,y:d.y,t:f/o})}for(f=0;f<a+1;f++)d=Vn.apply(0,e.concat(f/a)),u.push({x:d.x,y:d.y,t:f/a});for(f=0;f<o;f++)for(var h=0;h<a;h++){var p=s[f],g=s[f+1],v=u[h],m=u[h+1],y=Math.abs(g.x-p.x)<.001?"y":"x",b=Math.abs(m.x-v.x)<.001?"y":"x",x=Bn(p.x,p.y,g.x,g.y,v.x,v.y,m.x,m.y);if(x){if(c[x.x.toFixed(4)]===x.y.toFixed(4))continue;c[x.x.toFixed(4)]=x.y.toFixed(4);var w=p.t+Math.abs((x[y]-p[y])/(g[y]-p[y]))*(g.t-p.t),_=v.t+Math.abs((x[b]-v[b])/(m[b]-v[b]))*(m.t-v.t);w>=0&&w<=1&&_>=0&&_<=1&&(n?l+=1:l.push({x:x.x,y:x.y,t1:w,t2:_}))}}return l},Wn=function(t,e){return function(t,e,n){var r,i,o,a,s,u,c,l,f,d;t=In(t),e=In(e);for(var h=[],p=0,g=t.length;p<g;p++){var v=t[p];if("M"===v[0])r=s=v[1],i=u=v[2];else{"C"===v[0]?(f=[r,i].concat(v.slice(1)),r=f[6],i=f[7]):(f=[r,i,r,i,s,u,s,u],r=s,i=u);for(var m=0,y=e.length;m<y;m++){var b=e[m];if("M"===b[0])o=c=b[1],a=l=b[2];else{"C"===b[0]?(d=[o,a].concat(b.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,c,l,c,l],o=c,a=l);for(var x=Un(f,d,n),w=0,_=x.length;w<_;w++)x[w].segment1=p,x[w].segment2=m,x[w].bez1=f,x[w].bez2=d;h=h.concat(x)}}}}return h}(t,e)};function Hn(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&n.push(e[0]),a===e.length-2&&r.push(e[a+1]),o[a]=[(1-i)*e[a][0]+i*e[a+1][0],(1-i)*e[a][1]+i*e[a+1][1]];t(o,i)}}(t,e),{left:n,right:r.reverse()}}var Yn=function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var u=o.reduce((function(e,r,i){return i===n?e.concat(t[n]):e.concat(function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var o=r,a=1/n,s=0;s<n-1;s++){var u=Hn(o,a/(1-a*s));i.push(u.left),o=u.right}return i.push(o),i.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])}))}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r}(t[i],t[i+1],r))}),[]);return u.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||u.push("Z"),u},Xn=function(t,e){if(t.length!==e.length)return!1;var n=!0;return(0,b.each)(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n};function qn(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var Zn=function(t,e){var n=function(t,e){var n,r,i=t.length,o=e.length,a=0;if(0===i||0===o)return null;for(var s=[],u=0;u<=i;u++)s[u]=[],s[u][0]={min:u};for(var c=0;c<=o;c++)s[0][c]={min:c};for(u=1;u<=i;u++)for(n=t[u-1],c=1;c<=o;c++){r=e[c-1],a=Xn(n,r)?0:1;var l=s[u-1][c].min+1,f=s[u][c-1].min+1,d=s[u-1][c-1].min+a;s[u][c]=qn(l,f,d)}return s}(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var u=1;u<=r;u++){var c=n[u][u].min;s=u;for(var l=a;l<=i;l++)n[u][l].min<c&&(c=n[u][l].min,s=l);a=s,n[u][a].type&&o.push({index:u-1,type:n[u][a].type})}for(u=o.length-1;u>=0;u--)a=o[u].index,"add"===o[u].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var f=i-(r=t.length);if(r<i)for(u=0;u<f;u++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function Kn(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=Jn(e)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(t.length*o))?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function Jn(t){var e=[];switch(t[0]){case"M":case"L":case"T":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var Qn=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=Jn(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Kn(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=Kn(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Kn(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t},tr=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();function er(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var nr="undefined"!=typeof window&&void 0!==window.document;function rr(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function ir(t){return t.cfg.visible&&t.cfg.capture}var or=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=(0,b.mix)(r,e),n}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(k),ar=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},sr=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},ur=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},cr=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},lr=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},fr=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},dr=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,hr=3,pr=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],gr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function vr(t){return t?mr(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new fr:"undefined"!=typeof navigator?mr(navigator.userAgent):"undefined"!=typeof process&&process.version?new ur(process.version.slice(1)):null}function mr(t){var e=function(t){return""!==t&&pr.reduce((function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]}),!1)}(t);if(!e)return null;var n=e[0],r=e[1];if("searchbot"===n)return new lr;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<hr&&(i=ar(ar([],i,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(hr-i.length),!0)):i=[];var o=i.join("."),a=function(t){for(var e=0,n=gr.length;e<n;e++){var r=gr[e],i=r[0];if(r[1].exec(t))return i}return null}(t),s=dr.exec(t);return s&&s[1]?new cr(n,o,a,s[1]):new sr(n,o,a)}function yr(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=e[0],h=e[1],p=e[2],g=e[3],v=e[4],m=e[5],y=e[6],b=e[7],x=e[8];return n[0]=d*r+h*a+p*c,n[1]=d*i+h*s+p*l,n[2]=d*o+h*u+p*f,n[3]=g*r+v*a+m*c,n[4]=g*i+v*s+m*l,n[5]=g*o+v*u+m*f,n[6]=y*r+b*a+x*c,n[7]=y*i+b*s+x*l,n[8]=y*o+b*u+x*f,n}function br(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function xr(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=l*a-s*c,d=-l*o+s*u,h=c*o-a*u,p=n*f+r*d+i*h;return p?(p=1/p,e[0]=f*p,e[1]=(-l*r+i*c)*p,e[2]=(s*r-i*a)*p,e[3]=d*p,e[4]=(l*n-i*u)*p,e[5]=(-s*n+i*o)*p,e[6]=h*p,e[7]=(-c*n+r*u)*p,e[8]=(a*n-r*o)*p,e):null}var wr=N,_r="matrix",Er=["zIndex","capture","visible","type"],Sr=["repeat"];function Cr(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}var kr=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return(0,b.mix)(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if(!r)return this.attrs;if((0,b.isObject)(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,i),this.afterAttrsChange(((t={})[r]=i,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(er(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(_r,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(_r)},e.prototype.setMatrix=function(t){this.attr(_r,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?yr(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e,n=this.attr("matrix");e=t&&n?yr(t,n):n||t,this.set("totalMatrix",e),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?br(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=xr(e);if(n)return br(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase()[(0,b.upperFirst)(t.type)];r&&(n=new r({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){return this.cfg.clipShape||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};(0,b.each)(e,(function(t,r){(0,b.isArray)(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)(0,b.isArray)(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}));var r=new(0,this.constructor)({attrs:n});return(0,b.each)(Er,(function(e){r.set(e,t.get(e))})),r},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,o,a,s,u,c=t[0],l=t[1],f=t[2],d=void 0===f?"easeLinear":f,h=t[3],p=void 0===h?b.noop:h,g=t[4],v=void 0===g?0:g;(0,b.isFunction)(c)?(i=c,c={}):(0,b.isObject)(c)&&c.onFrame&&(i=c.onFrame,o=c.repeat),(0,b.isObject)(l)?(l=(u=l).duration,d=u.easing||"easeLinear",v=u.delay||0,o=u.repeat||o||!1,p=u.callback||b.noop,a=u.pauseCallback||b.noop,s=u.resumeCallback||b.noop):((0,b.isNumber)(p)&&(v=p,p=null),(0,b.isFunction)(d)?(p=d,d="easeLinear"):d=d||"easeLinear");var m=function(t,e){var n={},r=e.attr();return(0,b.each)(t,(function(t,e){-1!==Sr.indexOf(e)||(0,b.isEqual)(r[e],t)||(n[e]=t)})),n}(c,this),y={fromAttrs:Cr(m,this),toAttrs:m,duration:l,easing:d,repeat:o,callback:p,pauseCallback:a,resumeCallback:s,delay:v,startTime:n.getTime(),id:(0,b.uniqueId)(),onFrame:i,pathFormatted:!1};r.length>0?r=function(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,i=e.duration,o=Object.prototype.hasOwnProperty;return(0,b.each)(t,(function(t){n+r<t.startTime+t.delay+t.duration&&i>t.delay&&(0,b.each)(e.toAttrs,(function(e,n){o.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0);var n=this.get("animations");(0,b.each)(n,(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return(0,b.each)(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return(0,b.each)(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,r=this,i=e.propagationPath;this.getEvents(),"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var o=function(t){var o=i[t],s=o.get("name");if(s){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&rr(o,n))return"break";(0,b.isArray)(s)?(0,b.each)(s,(function(t){r.emitDelegateEvent(o,t,e)})):a.emitDelegateEvent(o,s,e)}},a=this,s=0;s<i.length&&"break"!==o(s);s++);},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),r=wr(n,[["t",t,e]]);return this.setMatrix(r),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),r=wr(n,[["s",t,e||t]]);return this.setMatrix(r),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=wr(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=this.getMatrix(),o=wr(i,[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix(),i=wr(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(i),this},e}(or),Mr=kr,Or={},Tr="_INDEX";function Ar(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Ar(t,e)}))}}function Nr(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Nr(t,e)}))}}var Ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?((0,b.each)(a,(function(t){var e=t.getBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=(0,b.min)(i),e=(0,b.max)(i),n=(0,b.min)(o),r=(0,b.max)(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?((0,b.each)(a,(function(t){var e=t.getCanvasBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=(0,b.min)(i),e=(0,b.max)(i),n=(0,b.min)(o),r=(0,b.max)(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){var e=this.getChildren();(0,b.each)(e,(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];(0,b.isObject)(n)?r=n:r.type=n;var i=Or[r.type];i||(i=(0,b.upperFirst)(r.type),Or[r.type]=i);var o=new(this.getShapeBase()[i])(r);return this.add(o),o},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=t[0],i=t[1];if((0,b.isFunction)(r))n=new r(i||{parent:this});else{var o=r||{};n=new(this.getGroupBase())(o)}return this.add(n),n},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!ir(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var o=[t,e,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,o=t.length-1;o>=0;o--){var a=t[o];if(ir(a)&&(a.isGroup()?i=a.getShape(e,n,r):a.isHit(e,n)&&(i=a)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&function(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),er(t.getChildren(),e)}(i,t,!1),t.set("parent",this),e&&Ar(t,e),r&&Nr(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,b.each)(t,(function(t,e){return t[Tr]=e,t})),t.sort((function(t,e){var n,r=(n=e,t.get("zIndex")-n.get("zIndex"));return 0===r?t[Tr]-e[Tr]:r})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[],n=this.getChildren();return(0,b.each)(n,(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null,n=this.getChildren();return(0,b.each)(n,(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(Mr),Pr=Ir,Dr=n(5374);function Lr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Rr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function jr(){}var Br=.7,Fr=1/Br,zr="\\s*([+-]?\\d+)\\s*",$r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vr=/^#([0-9a-f]{3,8})$/,Ur=new RegExp(`^rgb\\(${zr},${zr},${zr}\\)$`),Wr=new RegExp(`^rgb\\(${Gr},${Gr},${Gr}\\)$`),Hr=new RegExp(`^rgba\\(${zr},${zr},${zr},${$r}\\)$`),Yr=new RegExp(`^rgba\\(${Gr},${Gr},${Gr},${$r}\\)$`),Xr=new RegExp(`^hsl\\(${$r},${Gr},${Gr}\\)$`),qr=new RegExp(`^hsla\\(${$r},${Gr},${Gr},${$r}\\)$`),Zr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Kr(){return this.rgb().formatHex()}function Jr(){return this.rgb().formatRgb()}function Qr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ti(e):3===n?new ri(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ei(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ei(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ur.exec(t))?new ri(e[1],e[2],e[3],1):(e=Wr.exec(t))?new ri(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Hr.exec(t))?ei(e[1],e[2],e[3],e[4]):(e=Yr.exec(t))?ei(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Xr.exec(t))?ci(e[1],e[2]/100,e[3]/100,1):(e=qr.exec(t))?ci(e[1],e[2]/100,e[3]/100,e[4]):Zr.hasOwnProperty(t)?ti(Zr[t]):"transparent"===t?new ri(NaN,NaN,NaN,0):null}function ti(t){return new ri(t>>16&255,t>>8&255,255&t,1)}function ei(t,e,n,r){return r<=0&&(t=e=n=NaN),new ri(t,e,n,r)}function ni(t,e,n,r){return 1===arguments.length?((i=t)instanceof jr||(i=Qr(i)),i?new ri((i=i.rgb()).r,i.g,i.b,i.opacity):new ri):new ri(t,e,n,null==r?1:r);var i}function ri(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ii(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}`}function oi(){const t=ai(this.opacity);return`${1===t?"rgb(":"rgba("}${si(this.r)}, ${si(this.g)}, ${si(this.b)}${1===t?")":`, ${t})`}`}function ai(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function si(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ui(t){return((t=si(t))<16?"0":"")+t.toString(16)}function ci(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fi(t,e,n,r)}function li(t){if(t instanceof fi)return new fi(t.h,t.s,t.l,t.opacity);if(t instanceof jr||(t=Qr(t)),!t)return new fi;if(t instanceof fi)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new fi(a,s,u,t.opacity)}function fi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function di(t){return(t=(t||0)%360)<0?t+360:t}function hi(t){return Math.max(0,Math.min(1,t||0))}function pi(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function gi(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Lr(jr,Qr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Kr,formatHex:Kr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return li(this).formatHsl()},formatRgb:Jr,toString:Jr}),Lr(ri,ni,Rr(jr,{brighter(t){return t=null==t?Fr:Math.pow(Fr,t),new ri(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Br:Math.pow(Br,t),new ri(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ri(si(this.r),si(this.g),si(this.b),ai(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ii,formatHex:ii,formatHex8:function(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}${ui(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:oi,toString:oi})),Lr(fi,(function(t,e,n,r){return 1===arguments.length?li(t):new fi(t,e,n,null==r?1:r)}),Rr(jr,{brighter(t){return t=null==t?Fr:Math.pow(Fr,t),new fi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Br:Math.pow(Br,t),new fi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ri(pi(t>=240?t-240:t+120,i,r),pi(t,i,r),pi(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new fi(di(this.h),hi(this.s),hi(this.l),ai(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ai(this.opacity);return`${1===t?"hsl(":"hsla("}${di(this.h)}, ${100*hi(this.s)}%, ${100*hi(this.l)}%${1===t?")":`, ${t})`}`}}));var vi=t=>()=>t;function mi(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):vi(isNaN(t)?e:t)}var yi=function t(e){var n=function(t){return 1==(t=+t)?mi:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):vi(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=ni(t)).r,(e=ni(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=mi(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function bi(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ni(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}function xi(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function wi(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _i(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Ti(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function Ei(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Si(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ci(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Ti(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}bi((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return gi((n-r/e)*e,a,i,o,s)}})),bi((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return gi((n-r/e)*e,i,o,a,s)}}));var ki=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mi=new RegExp(ki.source,"g");function Oi(t,e){var n,r,i,o=ki.lastIndex=Mi.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=ki.exec(t))&&(r=Mi.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Si(n,r)})),o=Mi.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function Ti(t,e){var n,r=typeof e;return null==e||"boolean"===r?vi(e):("number"===r?Si:"string"===r?(n=Qr(e))?(e=n,yi):Oi:e instanceof Qr?yi:e instanceof Date?Ei:wi(e)?xi:Array.isArray(e)?_i:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ci:Si)(t,e)}function Ai(t){return+t}function Ni(t){return t*t}function Ii(t){return t*(2-t)}function Pi(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Di(t){return t*t*t}function Li(t){return--t*t*t+1}function Ri(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ji=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Bi=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Fi=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),zi=Math.PI,$i=zi/2;function Gi(t){return 1==+t?1:1-Math.cos(t*$i)}function Vi(t){return Math.sin(t*$i)}function Ui(t){return(1-Math.cos(zi*t))/2}function Wi(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Hi(t){return Wi(1-+t)}function Yi(t){return 1-Wi(t)}function Xi(t){return((t*=2)<=1?Wi(1-t):2-Wi(t-1))/2}function qi(t){return 1-Math.sqrt(1-t*t)}function Zi(t){return Math.sqrt(1- --t*t)}function Ki(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Ji=4/11,Qi=6/11,to=8/11,eo=3/4,no=9/11,ro=10/11,io=15/16,oo=21/22,ao=63/64,so=1/Ji/Ji;function uo(t){return 1-co(1-t)}function co(t){return(t=+t)<Ji?so*t*t:t<to?so*(t-=Qi)*t+eo:t<ro?so*(t-=no)*t+io:so*(t-=oo)*t+ao}function lo(t){return((t*=2)<=1?1-co(1-t):co(t-1)+1)/2}var fo=1.70158,ho=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(fo),po=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(fo),go=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(fo),vo=2*Math.PI,mo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=vo);function i(t){return e*Wi(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*vo)},i.period=function(n){return t(e,n)},i}(1,.3),yo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=vo);function i(t){return 1-e*Wi(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*vo)},i.period=function(n){return t(e,n)},i}(1,.3),bo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=vo);function i(t){return((t=2*t-1)<0?e*Wi(-t)*Math.sin((r-t)/n):2-e*Wi(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*vo)},i.period=function(n){return t(e,n)},i}(1,.3),xo={},wo=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},_o=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},Eo=[1,0,0,0,1,0,0,0,1];function So(t,e,n){var r,i=e.startTime;if(n<i+e.delay||e._paused)return!1;var o,a=e.duration,u=e.easing,c=xo[(o=u).toLowerCase()]||s[o];if(n=n-i-e.delay,e.repeat)r=c(r=n%a/a);else{if(!((r=n/a)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;r=c(r)}if(e.onFrame){var l=e.onFrame(r);t.attr(l)}else!function(t,e,n){var r={},i=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a,s,u;for(var c in o)if(!(0,b.isEqual)(i[c],o[c]))if("path"===c){var l=o[c],f=i[c];l.length>f.length?(l=Cn(o[c]),f=Cn(i[c]),f=Zn(f,l),f=Qn(f,l),e.fromAttrs.path=f,e.toAttrs.path=l):e.pathFormatted||(l=Cn(o[c]),f=Cn(i[c]),f=Qn(f,l),e.fromAttrs.path=f,e.toAttrs.path=l,e.pathFormatted=!0),r[c]=[];for(var d=0;d<l.length;d++){for(var h=l[d],p=f[d],g=[],v=0;v<h.length;v++)(0,b.isNumber)(h[v])&&p&&(0,b.isNumber)(p[v])?(a=Ti(p[v],h[v]),g.push(a(n))):g.push(h[v]);r[c].push(g)}}else if("matrix"===c){var m=(s=i[c]||Eo,(wi(u=o[c]||Eo)?xi:_i)(s,u))(n);r[c]=m}else wo(c)&&_o(o[c])?r[c]=o[c]:(0,b.isFunction)(o[c])||(a=Ti(i[c],o[c]),r[c]=a(n));t.attr(r)}}(t,e,r);return!1}var Co=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this;this.timer=Dr.HT((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((t=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)n=e[a],So(t,n,i)&&(e.splice(a,1),n.callback&&n.callback());0===e.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),ko=Co,Mo=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Oo(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function To(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&rr(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var Ao=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");(0,b.each)(Mo,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");(0,b.each)(Mo,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var a=new tr(t,e);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,u=n.timeStamp-this.mousedownTimeStamp,c=a.clientX-t.clientX,l=a.clientY-t.clientY;u>120||c*c+l*l>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,o){var a=this._getEventObj(t,e,n,r,i,o);if(r){a.shape=r,Oo(r,t,a);for(var s=r.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||To(s,t,a),a.propagationPath.push(s),s=s.getParent()}else Oo(this.canvas,t,a)},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),No=Ao,Io=vr(),Po=Io&&"firefox"===Io.name,Do=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");(0,b.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new No({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new ko(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");nr&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");nr&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(Po&&!(0,b.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,b.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,r=e.y;return this.getPointByClient(n,r)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(Pr),Lo=Do,Ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(Pr),jo=Ro,Bo=function(t){function e(e){return t.call(this,e)||this}return(0,y.__extends)(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;if(e){var a=br(e,[t.minX,t.minY]),s=br(e,[t.maxX,t.minY]),u=br(e,[t.minX,t.maxY]),c=br(e,[t.maxX,t.maxY]);n=Math.min(a[0],s[0],u[0],c[0]),i=Math.max(a[0],s[0],u[0],c[0]),r=Math.min(a[1],s[1],u[1],c[1]),o=Math.max(a[1],s[1],u[1],c[1])}var l=this.attrs;if(l.shadowColor){var f=l.shadowBlur,d=void 0===f?0:f,h=l.shadowOffsetX,p=void 0===h?0:h,g=l.shadowOffsetY,v=void 0===g?0:g,m=n-d+p,y=i+d+p,b=r-d+v,x=o+d+v;n=Math.min(n,m),i=Math.max(i,y),r=Math.min(r,b),o=Math.max(o,x)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},e}(Mr),Fo=new Map;function zo(t,e){Fo.set(t,e)}function $o(t){return Fo.get(t)}function Go(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function Vo(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Uo(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function Wo(t,e){return Math.abs(t-e)<.001}function Ho(t,e){var n=(0,b.min)(t),r=(0,b.min)(e);return{x:n,y:r,width:(0,b.max)(t)-n,height:(0,b.max)(e)-r}}function Yo(t){return(t+2*Math.PI)%(2*Math.PI)}var Xo={box:function(t,e,n,r){return Ho([t,n],[e,r])},length:function(t,e,n,r){return Uo(t,e,n,r)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?Uo(t,e,i,o):a>(n-t)*(n-t)+(r-e)*(r-e)?Uo(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){var a=[n-t,r-e];if(ie.exactEquals(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var s=[-a[1],a[0]];ie.normalize(s,s);var u=[i-t,o-e];return Math.abs(ie.dot(u,s))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}},qo=1e-4;function Zo(t,e,n,r,i,o){var a,s=1/0,u=[n,r],c=20;o&&o>200&&(c=o/10);for(var l=1/c,f=l/10,d=0;d<=c;d++){var h=d*l,p=[i.apply(null,t.concat([h])),i.apply(null,e.concat([h]))];(y=Uo(u[0],u[1],p[0],p[1]))<s&&(a=h,s=y)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var g=t.length;return{x:t[g-1],y:e[g-1]}}for(s=1/0,d=0;d<32&&!(f<qo);d++){var v=a-f,m=a+f,y=(p=[i.apply(null,t.concat([v])),i.apply(null,e.concat([v]))],Uo(u[0],u[1],p[0],p[1]));if(v>=0&&y<s)a=v,s=y;else{var b=[i.apply(null,t.concat([m])),i.apply(null,e.concat([m]))],x=Uo(u[0],u[1],b[0],b[1]);m<=1&&x<s?(a=m,s=x):f*=.5}}return{x:i.apply(null,t.concat([a])),y:i.apply(null,e.concat([a]))}}function Ko(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function Jo(t,e,n){var r=t+n-2*e;if(Wo(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function Qo(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function ta(t,e,n,r,i,o,a){var s=Ko(t,n,i,a),u=Ko(e,r,o,a),c=Xo.pointAt(t,e,n,r,a),l=Xo.pointAt(n,r,i,o,a);return[[t,e,c.x,c.y,s,u],[s,u,l.x,l.y,i,o]]}function ea(t,e,n,r,i,o,a){if(0===a)return(Uo(t,e,n,r)+Uo(n,r,i,o)+Uo(t,e,i,o))/2;var s=ta(t,e,n,r,i,o,.5),u=s[0],c=s[1];return u.push(a-1),c.push(a-1),ea.apply(null,u)+ea.apply(null,c)}var na={box:function(t,e,n,r,i,o){var a=Jo(t,n,i)[0],s=Jo(e,r,o)[0],u=[t,i],c=[e,o];return void 0!==a&&u.push(Ko(t,n,i,a)),void 0!==s&&c.push(Ko(e,r,o,s)),Ho(u,c)},length:function(t,e,n,r,i,o){return ea(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,r,i,o,a,s){return Zo([t,n,i],[e,r,o],a,s,Ko)},pointDistance:function(t,e,n,r,i,o,a,s){var u=this.nearestPoint(t,e,n,r,i,o,a,s);return Uo(u.x,u.y,a,s)},interpolationAt:Ko,pointAt:function(t,e,n,r,i,o,a){return{x:Ko(t,n,i,a),y:Ko(e,r,o,a)}},divide:function(t,e,n,r,i,o,a){return ta(t,e,n,r,i,o,a)},tangentAngle:function(t,e,n,r,i,o,a){var s=Qo(t,n,i,a),u=Qo(e,r,o,a);return Yo(Math.atan2(u,s))}};function ra(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function ia(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function oa(t,e,n,r){var i,o,a,s=-3*t+9*e-9*n+3*r,u=6*t-12*e+6*n,c=3*e-3*t,l=[];if(Wo(s,0))Wo(u,0)||(i=-c/u)>=0&&i<=1&&l.push(i);else{var f=u*u-4*s*c;Wo(f,0)?l.push(-u/(2*s)):f>0&&(o=(-u-(a=Math.sqrt(f)))/(2*s),(i=(-u+a)/(2*s))>=0&&i<=1&&l.push(i),o>=0&&o<=1&&l.push(o))}return l}function aa(t,e,n,r,i,o,a,s,u){var c=ra(t,n,i,a,u),l=ra(e,r,o,s,u),f=Xo.pointAt(t,e,n,r,u),d=Xo.pointAt(n,r,i,o,u),h=Xo.pointAt(i,o,a,s,u),p=Xo.pointAt(f.x,f.y,d.x,d.y,u),g=Xo.pointAt(d.x,d.y,h.x,h.y,u);return[[t,e,f.x,f.y,p.x,p.y,c,l],[c,l,g.x,g.y,h.x,h.y,a,s]]}function sa(t,e,n,r,i,o,a,s,u){if(0===u)return function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=Uo(t[i],e[i],t[(i+1)%r],e[(i+1)%r]);return n/2}([t,n,i,a],[e,r,o,s]);var c=aa(t,e,n,r,i,o,a,s,.5),l=c[0],f=c[1];return l.push(u-1),f.push(u-1),sa.apply(null,l)+sa.apply(null,f)}var ua={extrema:oa,box:function(t,e,n,r,i,o,a,s){for(var u=[t,a],c=[e,s],l=oa(t,n,i,a),f=oa(e,r,o,s),d=0;d<l.length;d++)u.push(ra(t,n,i,a,l[d]));for(d=0;d<f.length;d++)c.push(ra(e,r,o,s,f[d]));return Ho(u,c)},length:function(t,e,n,r,i,o,a,s){return sa(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,u,c,l){return Zo([t,n,i,a],[e,r,o,s],u,c,ra,l)},pointDistance:function(t,e,n,r,i,o,a,s,u,c,l){var f=this.nearestPoint(t,e,n,r,i,o,a,s,u,c,l);return Uo(f.x,f.y,u,c)},interpolationAt:ra,pointAt:function(t,e,n,r,i,o,a,s,u){return{x:ra(t,n,i,a,u),y:ra(e,r,o,s,u)}},divide:function(t,e,n,r,i,o,a,s,u){return aa(t,e,n,r,i,o,a,s,u)},tangentAngle:function(t,e,n,r,i,o,a,s,u){var c=ia(t,n,i,a,u),l=ia(e,r,o,s,u);return Yo(Math.atan2(l,c))}};function ca(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function la(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}var fa=function(t,e,n,r,i,o,a){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),u=1/0,c=-1/0,l=[o,a],f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var d=s+f;o<a?o<d&&d<a&&l.push(d):a<d&&d<o&&l.push(d)}for(f=0;f<l.length;f++){var h=ca(t,0,n,r,i,l[f]);h<u&&(u=h),h>c&&(c=h)}var p=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),g=1/0,v=-1/0,m=[o,a];for(f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var y=p+f;o<a?o<y&&y<a&&m.push(y):a<y&&y<o&&m.push(y)}for(f=0;f<m.length;f++){var b=la(0,e,n,r,i,m[f]);b<g&&(g=b),b>v&&(v=b)}return{x:u,y:g,width:c-u,height:v-g}};var da=function(t){return function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=Uo(r[0],r[1],i[0],i[1])}return e}(t)};function ha(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function pa(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape");return n&&(e=ha(e,n.getCanvasBBox())),r&&(e=ha(e,r.getCanvasBBox())),e}var ga=null;function va(){if(!ga){var t=document.createElement("canvas");t.width=1,t.height=1,ga=t.getContext("2d")}return ga}function ma(t,e,n){var r=1;if((0,b.isString)(t)&&(r=t.split("\n").length),r>1){var i=function(t,e){return e?e-t:.14*t}(e,n);return e*r+i*(r-1)}return e}function ya(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}var ba=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,xa=/[^\s\,]+/gi,wa=function(t){var e=t||[];return(0,b.isArray)(e)?e:(0,b.isString)(e)?(e=e.match(ba),(0,b.each)(e,(function(t,n){if((t=t.match(xa))[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}(0,b.each)(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0},_a=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var s,u,c,l=function(t,e,n,r){var i,o,a,s,u,c,l,f=[],d=!!r;if(d){a=r[0],s=r[1];for(var h=0,p=t.length;h<p;h+=1){var g=t[h];a=ie.min([0,0],a,g),s=ie.max([0,0],s,g)}}h=0;for(var v=t.length;h<v;h+=1)if(g=t[h],0!==h||n)if(h!==v-1||n){i=t[[h?h-1:v-1,h-1][n?0:1]],o=t[n?(h+1)%v:h+1];var m=[0,0];m=ie.sub(m,o,i),m=ie.scale(m,m,.4);var y=ie.distance(g,i),b=ie.distance(g,o),x=y+b;0!==x&&(y/=x,b/=x);var w=ie.scale([0,0],m,-y),_=ie.scale([0,0],m,b);c=ie.add([0,0],g,w),u=ie.add([0,0],g,_),u=ie.min([0,0],u,ie.max([0,0],o,g)),u=ie.max([0,0],u,ie.min([0,0],o,g)),w=ie.sub([0,0],u,g),w=ie.scale([0,0],w,-y/b),c=ie.add([0,0],g,w),c=ie.min([0,0],c,ie.max([0,0],i,g)),c=ie.max([0,0],c,ie.min([0,0],i,g)),_=ie.sub([0,0],g,c),_=ie.scale([0,0],_,b/y),u=ie.add([0,0],g,_),d&&(c=ie.max([0,0],c,a),c=ie.min([0,0],c,s),u=ie.max([0,0],u,a),u=ie.min([0,0],u,s)),f.push(l),f.push(c),l=u}else c=g,f.push(l),f.push(c);else l=g;return n&&f.push(f.shift()),f}(i,0,r,n),f=i.length,d=[];for(o=0;o<f-1;o+=1)s=l[2*o],u=l[2*o+1],c=i[o+1],d.push(["C",s[0],s[1],u[0],u[1],c[0],c[1]]);return r&&(s=l[f],u=l[f+1],c=i[0],d.push(["C",s[0],s[1],u[0],u[1],c[0],c[1]])),d},Ea="\t\n\v\f\r \u2028\u2029",Sa=new RegExp("([a-z])["+Ea+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ea+"]*,?["+Ea+"]*)+)","ig"),Ca=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ea+"]*,?["+Ea+"]*","ig");function ka(t){if(!t)return null;if((0,b.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(Sa,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(Ca,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""})),n}var Ma=/[a-z]/;function Oa(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function Ta(t){var e=ka(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if(Ma.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,u=0,c=0,l=0,f=e[0];"M"!==f[0]&&"m"!==f[0]||(u=a=+f[1],c=s=+f[2],l++,o[0]=["M",a,s]),r=l;for(var d=e.length;r<d;r++){var h=e[r],p=o[r-1],g=[],v=(i=h[0]).toUpperCase();if(i!==v)switch(g[0]=v,v){case"A":g[1]=h[1],g[2]=h[2],g[3]=h[3],g[4]=h[4],g[5]=h[5],g[6]=+h[6]+a,g[7]=+h[7]+s;break;case"V":g[1]=+h[1]+s;break;case"H":g[1]=+h[1]+a;break;case"M":u=+h[1]+a,c=+h[2]+s,g[1]=u,g[2]=c;break;default:for(var m=1,y=h.length;m<y;m++)g[m]=+h[m]+(m%2?a:s)}else g=e[r];switch(v){case"Z":a=+u,s=+c;break;case"H":g=["L",a=g[1],s];break;case"V":g=["L",a,s=g[1]];break;case"T":a=g[1],s=g[2];var b=Oa([p[1],p[2]],[p[3],p[4]]);g=["Q",b[0],b[1],a,s];break;case"S":a=g[g.length-2],s=g[g.length-1];var x=p.length,w=Oa([p[x-4],p[x-3]],[p[x-2],p[x-1]]);g=["C",w[0],w[1],g[1],g[2],a,s];break;case"M":u=g[g.length-2],c=g[g.length-1];break;default:a=g[g.length-2],s=g[g.length-1]}o.push(g)}return o}function Aa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Na(t,e){return Aa(t)*Aa(e)?(t[0]*e[0]+t[1]*e[1])/(Aa(t)*Aa(e)):1}function Ia(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Na(t,e))}function Pa(t,e){return t[0]===e[0]&&t[1]===e[1]}function Da(t,e){var n=e[1],r=e[2],i=(0,b.mod)((0,b.toRadian)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],u=t[1],c=e[6],l=e[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(u-l)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(u-l)/2,h=f*f/(n*n)+d*d/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(d*d)+r*r*(f*f),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*d/r:0,m=n?g*-r*f/n:0,y=(s+c)/2+Math.cos(i)*v-Math.sin(i)*m,x=(u+l)/2+Math.sin(i)*v+Math.cos(i)*m,w=[(f-v)/n,(d-m)/r],_=[(-1*f-v)/n,(-1*d-m)/r],E=Ia([1,0],w),S=Ia(w,_);return Na(w,_)<=-1&&(S=Math.PI),Na(w,_)>=1&&(S=0),0===a&&S>0&&(S-=2*Math.PI),1===a&&S<0&&(S+=2*Math.PI),{cx:y,cy:x,rx:Pa(t,[c,l])?0:n,ry:Pa(t,[c,l])?0:r,startAngle:E,endAngle:E+S,xRotation:i,arcFlag:o,sweepFlag:a}}function La(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function Ra(t){for(var e=[],n=null,r=null,i=null,o=0,a=(t=wa(t)).length,s=0;s<a;s++){var u=t[s];r=t[s+1];var c=u[0],l={command:c,prePoint:n,params:u,startTangent:null,endTangent:null};switch(c){case"M":i=[u[1],u[2]],o=s;break;case"A":var f=Da(n,u);l.arcParams=f}if("Z"===c)n=i,r=t[o+1];else{var d=u.length;n=[u[d-2],u[d-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),l.currentPoint=n,e[o]&&Pa(n,e[o].currentPoint)&&(e[o].prePoint=l.prePoint);var h=r?[r[r.length-2],r[r.length-1]]:null;l.nextPoint=h;var p=l.prePoint;if(["L","H","V"].includes(c))l.startTangent=[p[0]-n[0],p[1]-n[1]],l.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===c){var g=[u[1],u[2]];l.startTangent=[p[0]-g[0],p[1]-g[1]],l.endTangent=[n[0]-g[0],n[1]-g[1]]}else if("T"===c)g=La((y=e[s-1]).currentPoint,p),"Q"===y.command?(l.command="Q",l.startTangent=[p[0]-g[0],p[1]-g[1]],l.endTangent=[n[0]-g[0],n[1]-g[1]]):(l.command="TL",l.startTangent=[p[0]-n[0],p[1]-n[1]],l.endTangent=[n[0]-p[0],n[1]-p[1]]);else if("C"===c){var v=[u[1],u[2]],m=[u[3],u[4]];l.startTangent=[p[0]-v[0],p[1]-v[1]],l.endTangent=[n[0]-m[0],n[1]-m[1]],0===l.startTangent[0]&&0===l.startTangent[1]&&(l.startTangent=[v[0]-m[0],v[1]-m[1]]),0===l.endTangent[0]&&0===l.endTangent[1]&&(l.endTangent=[m[0]-v[0],m[1]-v[1]])}else if("S"===c){var y;v=La((y=e[s-1]).currentPoint,p),m=[u[1],u[2]],"C"===y.command?(l.command="C",l.startTangent=[p[0]-v[0],p[1]-v[1]],l.endTangent=[n[0]-m[0],n[1]-m[1]]):(l.command="SQ",l.startTangent=[p[0]-m[0],p[1]-m[1]],l.endTangent=[n[0]-m[0],n[1]-m[1]])}else if("A"===c){var b=.001,x=l.arcParams||{},w=x.cx,_=void 0===w?0:w,E=x.cy,S=void 0===E?0:E,C=x.rx,k=void 0===C?0:C,M=x.ry,O=void 0===M?0:M,T=x.sweepFlag,A=void 0===T?0:T,N=x.startAngle,I=void 0===N?0:N,P=x.endAngle,D=void 0===P?0:P;0===A&&(b*=-1);var L=k*Math.cos(I-b)+_,R=O*Math.sin(I-b)+S;l.startTangent=[L-i[0],R-i[1]];var j=k*Math.cos(I+D+b)+_,B=O*Math.sin(I+D-b)+S;l.endTangent=[p[0]-j,p[1]-B]}e.push(l)}return e}function ja(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!u||0===Math.sin(u)||(0,b.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),l=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,l=l>Math.PI/2?Math.PI-l:l,{xExtra:Math.cos(u/2-c)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(l-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0}}Math.PI,zo("rect",Go),zo("image",Go),zo("circle",Vo),zo("marker",Vo),zo("polyline",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}var a=Ho(n,r),s=a.x,u=a.y,c={minX:s,minY:u,maxX:s+a.width,maxY:u+a.height};return{x:(c=pa(t,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),zo("polygon",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}return Ho(n,r)})),zo("text",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.text,o=e.fontSize,a=e.lineHeight,s=e.font;s||(s=ya(e));var u,c=function(t,e){var n=va(),r=0;if((0,b.isNil)(t)||""===t)return r;if(n.save(),n.font=e,(0,b.isString)(t)&&t.includes("\n")){var i=t.split("\n");(0,b.each)(i,(function(t){var e=n.measureText(t).width;r<e&&(r=e)}))}else r=n.measureText(t).width;return n.restore(),r}(i,s);if(c){var l=e.textAlign,f=e.textBaseline,d=ma(i,o,a),h={x:n,y:r-d};l&&("end"===l||"right"===l?h.x-=c:"center"===l&&(h.x-=c/2)),f&&("top"===f?h.y+=d:"middle"===f&&(h.y+=d/2)),u={x:h.x,y:h.y,width:c,height:d}}else u={x:n,y:r,width:0,height:0};return u})),zo("path",(function(t){var e=t.attr(),n=e.path,r=e.stroke?e.lineWidth:0,i=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=(g=t[o]).currentPoint,s=g.params,u=g.prePoint,c=void 0;switch(g.command){case"Q":c=na.box(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":c=ua.box(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var l=g.arcParams;c=fa(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:n.push(a[0]),r.push(a[1])}c&&(g.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&("L"===g.command||"M"===g.command)&&g.prePoint&&g.nextPoint&&i.push(g)}n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),r=r.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var f=(0,b.min)(n),d=(0,b.min)(r),h=(0,b.max)(n),p=(0,b.max)(r);if(0===i.length)return{x:f,y:d,width:h-f,height:p-d};for(o=0;o<i.length;o++){var g;(a=(g=i[o]).currentPoint)[0]===f?f-=ja(g,e).xExtra:a[0]===h&&(h+=ja(g,e).xExtra),a[1]===d?d-=ja(g,e).yExtra:a[1]===p&&(p+=ja(g,e).yExtra)}return{x:f,y:d,width:h-f,height:p-d}}(t.get("segments")||Ra(n),r),o=i.x,a=i.y,s={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(s=pa(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),zo("line",(function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=pa(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),zo("ellipse",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}));var Ba=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.item=n.item,r.canvasX=n.canvasX,r.canvasY=n.canvasY,r.wheelDelta=n.wheelDelta,r.detail=n.detail,r}return(0,y.__extends)(e,t),e}(tr),Fa=function(t){return"".concat(t,"-").concat(Math.random()).concat(Date.now())},za=function(t){if((0,b.isArray)(t))switch(t.length){case 4:return t;case 3:return t.push(t[1]),t;case 2:return t.concat(t);case 1:return[t[0],t[0],t[0],t[0]];default:return[0,0,0,0]}if((0,b.isNumber)(t))return[t,t,t,t];if((0,b.isString)(t)){var e=parseInt(t,10);return[e,e,e,e]}return[0,0,0,0]},$a=function(t){var e=new Ba(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},Ga=function(t){if(!t)return!1;for(var e=[1,0,0,0,1,0,0,0,1],n=0;n<9;n++)if(t[n]!==e[n])return!0;return!1},Va=function(t){return Number.isNaN(Number(t))},Ua=function(t){for(var e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++){var a=t[o].getBBox(),s=a.minX,u=a.minY,c=a.maxX,l=a.maxY;s<e&&(e=s),u<r&&(r=u),c>n&&(n=c),l>i&&(i=l)}return{x:Math.floor(e),y:Math.floor(r),width:Math.ceil(n)-Math.floor(e),height:Math.ceil(i)-Math.floor(r),minX:e,minY:r,maxX:n,maxY:i}},Wa=function(t,e,n,r,i){void 0===e&&(e=15),void 0===n&&(n="quadratic"),void 0===r&&(r=void 0),void 0===i&&(i=void 0);for(var o=t.length,a=2*e,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},c=[],l={},f=0;f<o;f++){var d=t[f],h=d.source,p=d.target,g="".concat(h,"-").concat(p);if(!c[f]){u[g]||(u[g]=[]),c[f]=!0,u[g].push(d);for(var v=0;v<o;v++)if(f!==v){var m=t[v],y=m.source,b=m.target;c[v]||(h===b&&p===y?(u[g].push(m),c[v]=!0,l["".concat(y,"|").concat(b,"|").concat(u[g].length-1)]=!0):h===y&&p===b&&(u[g].push(m),c[v]=!0))}}}for(var x in u)for(var w=u[x],_=w.length,E=0;E<_;E++){var S=w[E];if(S.source!==S.target)if(1===_&&r&&S.source!==S.target)S.type=r;else{S.type=n;var C=(E%2==0?1:-1)*(l["".concat(S.source,"|").concat(S.target,"|").concat(E)]?-1:1);S.curveOffset=_%2==1?C*Math.ceil(E/2)*a:C*(Math.floor(E/2)*a+e)}else i&&(S.type=i),S.loopCfg={position:s[E%8],dist:20*Math.floor(E/8)+50}}return t},Ha=n(1278),Ya=function(){function t(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return t.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),r=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(r-t[0]-t[2])/2+t[0]}},t.prototype.fitCenter=function(t,e){var n,r=this.graph,i=r.get("group"),o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var a=1/0,s=1/0,u=-1/0,c=-1/0;o.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;a>n&&(a=n),s>r&&(s=r),u<n&&(u=n),c<r&&(c=r)}));var l=i.getMatrix()||[1,0,0,0,1,0,0,0,1],f=de({x:a,y:s},l),d=f.x,h=f.y,p=de({x:u,y:c},l),g=p.x,v=p.y;n={minX:d,maxX:g,minY:h,maxY:v,width:g-d,height:v-h,x:d,y:h}}else n=i.getCanvasBBox();if(0!==n.width&&0!==n.height){var m=this.getViewCenter(),y=n.x+n.width/2,b=n.y+n.height/2;r.translate(m.x-y,m.y-b,t,e)}},t.prototype.animatedFitView=function(t,e,n,r,i,o,a,s){var u=this.graph;n=n||{duration:500,easing:"easeCubic"};var c=r.x+i.x-o.x-r.minX,l=r.y+i.y-o.y-r.minY;if(!Va(c)&&!Va(l)){var f=(0,Ha.vs)([1,0,0,0,1,0,0,0,1],[["t",c,l]]);if(s){var d=u.get("minZoom"),h=u.get("maxZoom"),p=a;d&&a<d?(p=d,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph minzoom has been used instead")):h&&a>h&&(p=h,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph maxzoom has been used instead"));var g=(0,Ha.vs)(f,[["t",-i.x,-i.y],["s",p,p],["t",i.x,i.y]]),v=yn({animateCfg:n,callback:function(){t.setMatrix(g),u.emit("viewportchange",{action:"translate",matrix:f}),u.emit("viewportchange",{action:"zoom",matrix:g})}});t.stopAnimate(),t.setMatrix(e),t.animate((function(t){return{matrix:ze(e,g,t)}}),v)}else{var m=yn({animateCfg:n,callback:function(){u.emit("viewportchange",{action:"translate",matrix:f})}});t.animate((function(t){return{matrix:ze(e,f,t)}}),m)}}},t.prototype.fitView=function(t,e){var n,r=this.graph,i=this.getFormatPadding(),o=r.get("width"),a=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,f=1/0,d=-1/0,h=-1/0;c.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;l>n&&(l=n),f>r&&(f=r),d<n&&(d=n),h<r&&(h=r)})),n={minX:l,maxX:d,minY:f,maxY:h,width:d-l,height:h-f,x:l,y:f}}else n=s.getCanvasBBox();if(0!==n.width&&0!==n.height){var p=this.getViewCenter(),g={x:n.x+n.width/2,y:n.y+n.height/2},v=(o-i[1]-i[3])/n.width,m=(a-i[0]-i[2])/n.height,y=v;if(v>m&&(y=m),t)this.animatedFitView(s,u,e,n,p,g,y,!0);else{var b=p.x-g.x,x=p.y-g.y;if(Va(b)||Va(x))return;r.translate(b,x),r.zoom(y,p)||console.warn("zoom failed, ratio out of range, ratio: %f",y)}}},t.prototype.fitViewByRules=function(t,e,n){var r,i=t.onlyOutOfViewPort,o=void 0!==i&&i,a=t.direction,s=void 0===a?"both":a,u=t.ratioRule,c=void 0===u?"min":u,l=this.graph,f=this.getFormatPadding(),d=l.get("width"),h=l.get("height"),p=l.get("group"),g=p.getMatrix()||[1,0,0,0,1,0,0,0,1];p.resetMatrix();var v=l.getNodes();if(v.length>l.get("optimizeThreshold")){var m=1/0,y=1/0,b=-1/0,x=-1/0;v.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;m>n&&(m=n),y>r&&(y=r),b<n&&(b=n),x<r&&(x=r)})),r={minX:m,maxX:b,minY:y,maxY:x,width:b-m,height:x-y,x:m,y:y}}else r=p.getCanvasBBox();if(0!==r.width&&0!==r.height){var w,_=this.getViewCenter(),E={x:r.x+r.width/2,y:r.y+r.height/2},S=(d-f[1]-f[3])/r.width,C=(h-f[0]-f[2])/r.height;if(w="x"===s?S:"y"===s?C:"max"===c?Math.max(S,C):Math.min(S,C),o&&(w=w<1?w:1),e)this.animatedFitView(p,g,n,r,_,E,w,!0);else{var k=l.getZoom()*w,M=l.get("minZoom");k<M&&(k=M,console.warn("fitview failed, ratio out of range, ratio: %f",w,"graph minzoom has been used instead")),l.translate(_.x-E.x,_.y-E.y),l.zoomTo(k,_)}}},t.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return za(t)},t.prototype.focusPoint=function(t,e,n){var r=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),a=this.graph.get("group").getMatrix();if(a||(a=[1,0,0,0,1,0,0,0,1]),e){var s=(o.x-t.x)*a[0],u=(o.y-t.y)*a[4],c=0,l=0,f=0,d=0;this.graph.get("canvas").animate((function(t){f=s*t,d=u*t,r.graph.translate(f-c,d-l),c=f,l=d}),(0,y.__assign)({},n))}else this.graph.translate((o.x-t.x)*a[0],(o.y-t.y)*a[4])},t.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),he({x:t,y:e},n)},t.prototype.getPointByClient=function(t,e){var n=this.graph.get("canvas").getPointByClient(t,e);return this.getPointByCanvas(n.x,n.y)},t.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas"),r=this.getCanvasByPoint(t,e),i=n.getClientByPoint(r.x,r.y);return{x:i.x,y:i.y}},t.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),de({x:t,y:e},n)},t.prototype.focus=function(t,e,n){if((0,b.isString)(t)&&(t=this.graph.findById(t)),t){var r=0,i=0;if(t.getType&&"edge"===t.getType()){var o=t.getSource().get("group").getMatrix(),a=t.getTarget().get("group").getMatrix();o&&a?(r=(o[6]+a[6])/2,i=(o[7]+a[7])/2):(o||a)&&(r=o?o[6]:a[6],i=o?o[7]:a[7])}else{var s=t.get("group").getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),r=s[6],i=s[7]}this.focusPoint({x:r,y:i},e,n)}},t.prototype.focusItems=function(t,e,n,r){if(t.length){var i=this.graph,o=this.getFormatPadding(),a=i.get("width"),s=i.get("height"),u=i.get("group"),c=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},f=0,d=t;f<d.length;f++){var h=d[f].getBBox();h.minX<l.minX&&(l.minX=h.minX),h.minY<l.minY&&(l.minY=h.minY),h.maxX>l.maxX&&(l.maxX=h.maxX),h.maxY>l.maxY&&(l.maxY=h.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,0!==l.width&&0!==l.height){var p=this.getViewCenter(),g={x:l.x+l.width/2,y:l.y+l.height/2},v=(a-o[1]-o[3])/l.width,m=(s-o[0]-o[2])/l.height,y=v;v>m&&(y=m),n?this.animatedFitView(u,c,r,l,p,g,y,e):(i.translate(p.x-g.x,p.y-g.y),e&&!i.zoom(y,p)&&console.warn("zoom failed, ratio out of range, ratio: %f",y))}}},t.prototype.changeSize=function(t,e){var n=this.graph;if(!(0,b.isNumber)(t)||!(0,b.isNumber)(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e}),n.get("canvas").changeSize(t,e),n.get("plugins").forEach((function(t){t.get("gridContainer")&&t.positionInit()}))},t.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t}(),Xa=Ya;function qa(t){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qa(t)}function Za(t){if("string"!=typeof t)return t;var e=function(t){if("string"!=typeof t)return t;try{return JSON.parse(t.trim())}catch(e){return t.trim()}},n=e(t);if("string"!=typeof n)return n;for(var r=function(t){return t[t.length-1]},i=t.trim(),o=[],a=[],s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some((function(t){return r(a)===t}))},u=null,c=0,l="";c<i.length;){var f=i[c],d=s('"',"'");if(d||f.trim()){var h="\\"===i[c-1],p=s("}"),g=s("]"),v=s(","),m=r(o);if(d)if(r(a)!==f||h)l+=f;else{a.pop();var y=e(l);m.push(y),u=y,l=""}else if(g&&","===f)l&&(m.push(e(l)),l="");else if(p&&":"===f)a.push(","),l&&(m.push(l),l="");else if(v&&","===f)l&&(m.push(e(l)),l=""),a.pop();else if("}"===f&&(p||v)){l&&(m.push(e(l)),l=""),v&&a.pop();for(var b={},x=1;x<m.length;x+=2)b[m[x-1]]=m[x];o.pop(),o.length&&r(o).push(b),a.pop(),u=b}else"]"===f&&g?(l&&(m.push(e(l)),l=""),o.pop(),o.length&&r(o).push(m),a.pop(),u=m):"{"===f?(o.push([]),a.push("}")):"["===f?(o.push([]),a.push("]")):'"'===f?a.push('"'):"'"===f?a.push("'"):l+=f;c+=1}else c+=1}return u||l}var Ka=function(t){return t.split("-").reduce((function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}))},Ja=function(t){return function(e){for(var n=t.length,r=[],i=0,o="";i<n;)if("{"===t[i]&&"{"===t[i+1])r.push(o),o="",i+=2;else if("}"===t[i]&&"}"===t[i+1]){if(r.length){var a=r.pop();o=(0,b.get)(e,o,a.endsWith("=")?'"{'.concat(o,'}"'):o),r.push(a+o)}i+=2,o=""}else o+=t[i],i+=1;return r.push(o),r.map((function(t,e){return r[e-1]&&r[e-1].endsWith("=")?'"{'.concat(t,'}"'):t})).join("")}};function Qa(t,e){var n={},r=t.getAttributeNames&&t.getAttributeNames()||[],i=t.children&&Array.from(t.children).map((function(t){return Qa(t,e)})),o={},a=t.tagName?t.tagName.toLowerCase():"group";return"text"===a&&(n.text=t.innerText),o.type=a,"img"===a&&(o.type="image"),Array.from(r).forEach((function(e){var r=Ka(e),i=t.getAttribute(e);try{if("style"===r||"attrs"===r){var a=Za(i);n=(0,y.__assign)((0,y.__assign)({},n),a)}else o[r]=Za(i)}catch(t){if("style"===r)throw t;o[r]=i}})),o.attrs=n,e&&e.style&&o.name&&"object"===qa(e.style[o.name])&&(o.attrs=(0,y.__assign)((0,y.__assign)({},o.attrs),e.style[o.name])),e&&e.style&&o.keyshape&&(o.attrs=(0,y.__assign)((0,y.__assign)({},o.attrs),e.style)),i.length&&(o.children=i),o}function ts(t,e){var n;void 0===e&&(e={x:0,y:0});var r=(0,y.__assign)({x:0,y:0,width:0,height:0},e);if(null===(n=t.children)||void 0===n?void 0:n.length){var i=t.attrs,o=void 0===i?{}:i,a=o.marginTop,s=(0,y.__assign)({},e);a&&(s.y+=a);for(var u=0;u<t.children.length;u++){t.children[u].attrs.key="".concat(o.key||"root"," -").concat(u," ");var c=ts(t.children[u],s);if(c.bbox){var l=c.bbox;"inline"===c.attrs.next?s.x+=c.bbox.width:s.y+=c.bbox.height,l.width+l.x>r.width&&(r.width=l.width+l.x),l.height+l.y>r.height&&(r.height=l.height+l.y)}}}return t.bbox=function(t,e,n){var r,i,o=t.attrs,a=void 0===o?{}:o,s={x:e.x||0,y:e.y||0,width:n.width||0,height:n.height||0};switch(t.type){case"maker":case"circle":a.r&&(i=2*a.r,r=2*a.r);break;case"text":a.text&&(i=fn(a.text,a.fontSize||12)[0],r=16,s.y+=r,s.height=r,s.width=i,t.attrs=(0,y.__assign)({fontSize:12,fill:"#000"},a));break;default:a.width&&(i=a.width),a.height&&(r=a.height)}return r>=0&&(s.height=r),i>=0&&(s.width=i),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}(t,e,r),t.attrs=(0,y.__assign)((0,y.__assign)({},t.attrs),t.bbox),t}function es(t,e){var n,r,i,o,a=(t||{}).type,s=((null==e?void 0:e.attrs)||{}).key;if(s&&t&&(t.attrs.key=s),!t&&e)return{action:"delete",val:e,type:a,key:s};if(t&&!e)return{action:"add",val:t,type:a};if(!t&&!e)return{action:"same",type:a};var u=[];if((null===(n=t.children)||void 0===n?void 0:n.length)>0||(null===(r=e.children)||void 0===r?void 0:r.length)>0)for(var c=Math.max(null===(i=t.children)||void 0===i?void 0:i.length,null===(o=e.children)||void 0===o?void 0:o.length),l=e.children||[],f=t.children||[],d=0;d<c;d+=1)u.push(es(f[d],l[d]));var h=Object.keys(e.attrs),p=Object.keys(t.attrs);return e.type!==t.type?{action:"restructure",nowTarget:t,formerTarget:e,key:s,children:u}:h.filter((function(t){return"children"!==t})).some((function(n){return t.attrs[n]!==e.attrs[n]||!p.includes(n)}))?{action:"change",val:t,children:u,type:a,key:s}:{action:"same",children:u,type:a,key:s}}function ns(t){var e={},n=function(e){var n="function"==typeof t?t(e):t,r=Ja(n)(e),i=document.createElement("div");i.innerHTML=r;var o=ts(Qa(i.children[0],e));return i.remove(),o};return{draw:function(t,r){var i=n(t),o=r;return function t(e){var n=e.attrs,i=void 0===n?{}:n,a=e.bbox,s=e.type,u=e.children,c=(0,y.__rest)(e,["attrs","bbox","type","children"]);if("group"!==e.type){var l=r.addShape(e.type,(0,y.__assign)({attrs:i,origin:{bbox:a,type:s,children:u}},c));e.keyshape&&(o=l)}e.children&&e.children.forEach((function(e){return t(e)}))}(i),e[t.id]=[i],o},update:function(t,r){e[t.id]||(e[t.id]=[]);var i=r.getContainer(),o=i.get("children"),a=n(t),s=es(a,e[t.id].pop()),u=function t(e){var n;"group"!==e.type&&i.addShape(e.type,{attrs:e.attrs}),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))},c=function t(e){var n,r=o.find((function(t){return t.attrs.key===e.attrs.key}));r&&i.removeChild(r),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))};!function t(e){var n=e.key;if("group"!==e.type){var i=o.find((function(t){return t.attrs.key===n}));switch(e.action){case"change":if(i){var a=e.val.keyshape?r.getOriginStyle():{};i.attr((0,y.__assign)((0,y.__assign)({},a),e.val.attrs))}break;case"add":u(e.val);break;case"delete":c(e.val);break;case"restructure":c(e.formerTarget),u(e.nowTarget)}}e.children&&e.children.forEach((function(e){return t(e)}))}(s),e[t.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var rs={};function is(t){return rs[t]||(rs[t]=(0,b.upperFirst)(t)),rs[t]}var os={defaultShapeType:"defaultType",className:null,getShape:function(t){var e=this;return e[t]||e[e.defaultShapeType]||e["simple-circle"]},draw:function(t,e,n){var r=this.getShape(t);n.shapeMap={};var i=r.draw(e,n);return r.afterDraw&&r.afterDraw(e,n,i),i},baseUpdate:function(t,e,n,r){var i,o,a=this.getShape(t);a.update&&(a.mergeStyle=null===(i=a.getOptions)||void 0===i?void 0:i.call(a,e,r),null===(o=a.update)||void 0===o||o.call(a,e,n,r)),a.afterUpdate&&a.afterUpdate(e,n)},setState:function(t,e,n,r){this.getShape(t).setState(e,n,r)},shouldUpdate:function(t){return!!this.getShape(t).update},getControlPoints:function(t,e){return this.getShape(t).getControlPoints(e)},getAnchorPoints:function(t,e){return this.getShape(t).getAnchorPoints(e)}},as={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints;return t.anchorPoints||e}},ss=function(){function t(){}return t.registerFactory=function(e,n){var r=is(e),i=os,o=(0,y.__assign)((0,y.__assign)({},i),n);return t[r]=o,o.className=r,o},t.getFactory=function(e){return t[is(e)]},t.registerNode=function(e,n,r){var i,o=t.Node;if("string"==typeof n||"function"==typeof n){var a=ns(n);i=(0,y.__assign)((0,y.__assign)({},o.getShape("single-node")),a)}else if(n.jsx)a=ns(n.jsx),i=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},o.getShape("single-node")),a),n);else{o.getShape(r);var s=r?o.getShape(r):as;i=(0,y.__assign)((0,y.__assign)({},s),n)}return i.type=e,i.itemType="node",o[e]=i,i},t.registerEdge=function(e,n,r){var i=t.Edge,o=r?i.getShape(r):as,a=(0,y.__assign)((0,y.__assign)({},o),n);return a.type=e,a.itemType="edge",i[e]=a,a},t.registerCombo=function(e,n,r){var i=t.Combo,o=r?i.getShape(r):as,a=(0,y.__assign)((0,y.__assign)({},o),n);return a.type=e,a.itemType="combo",i[e]=a,a},t}(),us=ss;ss.registerFactory("node",{defaultShapeType:"circle"}),ss.registerFactory("edge",{defaultShapeType:"line"}),ss.registerFactory("combo",{defaultShapeType:"circle"});var cs="bboxCache",ls="bboxCanvasCache",fs=function(){function t(t){this._cfg={},this.destroyed=!1,this.optimize=!1;this._cfg=Object.assign({id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]},this.getDefaultCfg(),t);var e=this.get("model"),n=e.id,r=this.get("type");void 0===n?n=Fa(r):"string"!=typeof n&&(n=String(n)),this.get("model").id=n,this.set("id",n);var i=t.group;i&&(i.set("item",this),i.set("id",n)),this.init(),this.draw();var o=e.shape||e.type||("edge"===r?"line":"circle"),a=this.get("shapeFactory");if(a&&a[o]){var s=a[o].options;if(s&&s.stateStyles){var u=this.get("styles")||e.stateStyles;u=(0,b.deepMix)({},s.stateStyles,u),this.set("styles",u)}}}return t.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=nn(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=nn(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.drawInner=function(){var t=this,e=t.get("shapeFactory"),n=t.get("group"),r=t.get("model");n.clear();var i=r.visible;if(void 0===i||i||t.changeVisibility(i),e){t.updatePosition(r);var o=t.getShapeCfg(r),a=o.type,s=e.draw(a,o,n);s&&(t.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",a),this.restoreStates(e,a)}},t.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),n=this.getKeyShape(),r=this,i=n.get("name");if(this.get("originStyle")){var o=this.get("originStyle");i&&!o[i]&&(o[i]={});var a=this.getCurrentStatesStyle(),s=function(t){var n=e[t],s=n.get("name"),u=n.attr();if(s&&s!==i){var c=a[s];o[s]||(o[s]={}),c?Object.keys(u).forEach((function(t){var e=u[t];e!==c[t]&&(o[s][t]=e)})):o[s]="image"!==n.get("type")?(0,b.clone)(u):r.getShapeStyleByName(s)}else{var l=n.attr(),f={};Object.keys(a).forEach((function(t){var e=a[t];t!==i&&(0,b.isPlainObject)(e)||(f[t]=e)})),Object.keys(l).forEach((function(t){var e=l[t];f[t]!==e&&(i?o[i][t]=e:o[t]=e)}))}};for(c=0;c<e.length;c++)s(c);delete o.path,delete o.matrix,delete o.x,delete o.y,o[i]&&(delete o[i].x,delete o[i].y,delete o[i].matrix,delete o[i].path),r.set("originStyle",o)}else{for(var u={},c=0;c<e.length;c++){var l=e[c],f=l.get("type"),d=l.get("name");if(d&&d!==i)u[d]="image"!==f?(0,b.clone)(l.attr()):r.getShapeStyleByName(d),"text"===f&&u[d]&&(delete u[d].x,delete u[d].y,delete u[d].matrix);else{var h=r.getShapeStyleByName();if(delete h.path,delete h.matrix,i)if(d)u[i]=h;else{var p=Fa("shape");l.set("name",p),t.shapeMap[p]=l,u[p]="image"!==f?(0,b.clone)(l.attr()):r.getShapeStyleByName(d)}else Object.assign(u,h)}}r.set("originStyle",u)}},t.prototype.restoreStates=function(t,e){var n=this,r=n.get("states");(0,b.each)(r,(function(r){t.setState(e,r,!0,n)}))},t.prototype.init=function(){var t=us.getFactory(this.get("type"));this.set("shapeFactory",t)},t.prototype.get=function(t){return this._cfg[t]},t.prototype.set=function(t,e){(0,b.isPlainObject)(t)?this._cfg=(0,y.__assign)((0,y.__assign)({},this._cfg),t):this._cfg[t]=e},t.prototype.getDefaultCfg=function(){return{}},t.prototype.clearCache=function(){this.set(cs,null),this.set(ls,null)},t.prototype.beforeDraw=function(){},t.prototype.afterDraw=function(){},t.prototype.afterUpdate=function(){},t.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},t.prototype.getShapeStyleByName=function(t){var e,n=this.get("group");if(e=t?n.shapeMap[t]:this.getKeyShape()){var r={};return(0,b.each)(e.attr(),(function(t,e){("img"!==e||(0,b.isString)(t))&&(r[e]=t)})),r}return{}},t.prototype.getShapeCfg=function(t,e){var n=this.get("styles");if(n){var r=t;return r.style=(0,y.__assign)((0,y.__assign)({},n),t.style),r}return t},t.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},t.prototype.getOriginStyle=function(){return this.get("originStyle")},t.prototype.getCurrentStatesStyle=function(){var t=this,e={},n=t.getStates();return n&&n.length?((0,b.each)(t.getStates(),(function(n){e=Object.assign(e,t.getStateStyle(n))})),e):this.get("originStyle")},t.prototype.setState=function(t,e){var n=this.get("states"),r=this.get("shapeFactory"),i=t,o=t;(0,b.isString)(e)&&(i="".concat(t,":").concat(e),o="".concat(t,":"));var a=n;if((0,b.isBoolean)(e)){var s=n.indexOf(o);if(e){if(s>-1)return;n.push(i)}else s>-1&&n.splice(s,1)}else if((0,b.isString)(e)){var u=n.filter((function(t){return t.includes(o)}));u.length>0&&this.clearStates(u),(a=a.filter((function(t){return!t.includes(o)}))).push(i),this.set("states",a)}if(r){var c=this.get("model").type;r.setState(c,t,e,this)}},t.prototype.clearStates=function(t){var e=this,n=e.getStates(),r=e.get("shapeFactory"),i=e.get("model").type;t||(t=n),(0,b.isString)(t)&&(t=[t]);var o=n.filter((function(e){return-1===t.indexOf(e)}));e.set("states",o),t.forEach((function(t){r.setState(i,t,!1,e)}))},t.prototype.setOptimize=function(t){this.optimize=t},t.prototype.getContainer=function(){return this.get("group")},t.prototype.getKeyShape=function(){return this.get("keyShape")},t.prototype.getModel=function(){return this.get("model")},t.prototype.getType=function(){return this.get("type")},t.prototype.getID=function(){return this.get("id")},t.prototype.isItem=function(){return!0},t.prototype.getStates=function(){return this.get("states")},t.prototype.hasState=function(t){return this.getStates().indexOf(t)>=0},t.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},t.prototype.getUpdateType=function(t){},t.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model");if("move"===e)this.updatePosition(t);else{var r=n.visible,i=t.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o={x:n.x,y:n.y};t.x=isNaN(+t.x)?n.x:+t.x,t.y=isNaN(+t.y)?n.y:+t.y;var a=this.get("styles");if(t.stateStyles){var s=t.stateStyles;(0,b.mix)(a,s),delete t.stateStyles}Object.assign(n,t),o.x===t.x&&o.y===t.y||this.updatePosition(t),this.updateShape(e)}this.afterUpdate(),this.clearCache()},t.prototype.updateShape=function(t){var e=this.get("shapeFactory"),n=this.get("model"),r=n.type;if(e.shouldUpdate(r)&&r===this.get("currentShape")){var i=this.getShapeCfg(n,t);e.baseUpdate(r,i,this,t),"move"!==t&&this.setOriginStyle()}else this.draw();this.restoreStates(e,r)},t.prototype.updatePosition=function(t){var e=this.get("model"),n=isNaN(+t.x)?+e.x:+t.x,r=isNaN(+t.y)?+e.y:+t.y,i=this.get("group");if(isNaN(n)||isNaN(r))return!1;e.x=n,e.y=r;var o=i.getMatrix();return!(o&&o[6]===n&&o[7]===r||(i.resetMatrix(),be(i,{x:n,y:r}),this.clearCache(),0))},t.prototype.getBBox=function(){var t=this.get(cs);return t||(t=this.calculateBBox(),this.set(cs,t)),t},t.prototype.getCanvasBBox=function(){var t=this.get(ls);return t||(t=this.calculateCanvasBBox(),this.set(ls,t)),t},t.prototype.toFront=function(){this.get("group").toFront()},t.prototype.toBack=function(){this.get("group").toBack()},t.prototype.show=function(){this.changeVisibility(!0)},t.prototype.hide=function(){this.changeVisibility(!1)},t.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},t.prototype.isVisible=function(){return this.get("visible")},t.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},t.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},t}(),ds=fs,hs={source:"start",target:"end"},ps="Node",gs="Point",vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,e){var n=hs[t]+gs,r=t+ps,i=this.get(r);i&&!i.destroyed&&i.removeEdge(this),(0,b.isPlainObject)(e)?(this.set(n,e),this.set(r,null)):e&&(e.addEdge(this),this.set(r,e),this.set(n,null))},e.prototype.getLinkPoint=function(t,e,n){var r=hs[t]+gs,i=t+ps,o=this.get(r);if(!o){var a=this.get(i),s=t+"Anchor",u=this.getPrePoint(t,n),c=e[s];(0,b.isNil)(c)||(o=a.getLinkPointByAnchor(c)),o=o||a.getLinkPoint(u),(0,b.isNil)(o.index)||this.set("".concat(t,"AnchorIndex"),o.index)}return o},e.prototype.getPrePoint=function(t,e){if(e&&e.length)return e["source"===t?0:e.length-1];var n="source"===t?"target":"source";return this.getEndPoint(n)},e.prototype.getEndPoint=function(t){var e=t+ps,n=hs[t]+gs,r=this.get(e);return r&&!r.destroyed?r.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),r=this.get("shapeFactory"),i=t.type;return r.getControlPoints(i,{startPoint:e,endPoint:n})},e.prototype.getEndCenter=function(t){var e=t+ps,n=hs[t]+gs,r=this.get(e);if(r){var i=r.getBBox();return{x:i.centerX,y:i.centerY}}return this.get(n)},e.prototype.init=function(){t.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(e,n){var r=this,i=r.get("linkCenter"),o=(null==n?void 0:n.includes("move"))?e:t.prototype.getShapeCfg.call(this,e);if(i)o.startPoint=r.getEndCenter("source"),o.endPoint=r.getEndCenter("target");else{var a=o.controlPoints||r.getControlPointsByCenter(o);o.startPoint=r.getLinkPoint("source",e,a),o.endPoint=r.getLinkPoint("target",e,a)}return o.sourceNode=r.get("sourceNode"),o.targetNode=r.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),e=this.get("source".concat(ps)),n=this.get("target".concat(ps));return e?delete t["source".concat(ps)]:t.source=this.get("start".concat(gs)),n?delete t["target".concat(ps)]:t.target=this.get("end".concat(gs)),(0,b.isString)(t.source)||(0,b.isPlainObject)(t.source)||(t.source=t.source.getID()),(0,b.isString)(t.target)||(0,b.isPlainObject)(t.target)||(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model"),r=n.visible,i=t.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o=this.get("source"),a=this.get("target");if(o&&!o.destroyed&&a&&!a.destroyed){var s=this.get("styles");if(t.stateStyles){var u=t.stateStyles;(0,b.mix)(s,u),delete t.stateStyles}Object.assign(n,t),this.updateShape(e),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var e=this.get("source".concat(ps)),n=this.get("target".concat(ps));e&&!e.destroyed&&e.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),t.prototype.destroy.call(this)},e}(ds),ms=vs,ys="anchorPointsCache",bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getNearestPoint=function(t,e){for(var n=0,r=t[0],i=ge(t[0],e),o=0;o<t.length;o++){var a=t[o],s=ge(a,e);s<i&&(r=a,i=s,n=o)}return r.anchorIndex=n,r},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("target")===t}))},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("source")===t}))},e.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");return"target"===t?n.filter((function(t){return t.getSource()===e})).map((function(t){return t.getTarget()})):"source"===t?n.filter((function(t){return t.getTarget()===e})).map((function(t){return t.getSource()})):n.map((function(t){return t.getSource()===e?t.getTarget():t.getSource()}))},e.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},e.prototype.getLinkPoint=function(t){var e,n,r=this.get("keyShape").get("type"),i=this.get("type"),o=this.getBBox();"combo"===i?(e=o.centerX||(o.maxX+o.minX)/2,n=o.centerY||(o.maxY+o.minY)/2):(e=o.centerX,n=o.centerY);var a,s=this.getAnchorPoints();switch(r){case"circle":a=le({x:e,y:n,r:o.width/2},t);break;case"ellipse":a=fe({x:e,y:n,rx:o.width/2,ry:o.height/2},t);break;default:a=ce(o,t)}var u=a;return s.length&&(u||(u=t),u=this.getNearestPoint(s,u)),u||(u={x:e,y:n}),u},e.prototype.getAnchorPoints=function(){var t=this.get(ys);if(!t){t=[];var e=this.get("shapeFactory"),n=this.getBBox(),r=this.get("model"),i=this.getShapeCfg(r),o=r.type,a=e.getAnchorPoints(o,i)||[];(0,b.each)(a,(function(e,r){var i={x:n.minX+e[0]*n.width,y:n.minY+e[1]*n.height,anchorIndex:r};t.push(i)})),this.set(ys,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var e=this.getEdges(),n=e.indexOf(t);n>-1&&e.splice(n,1)},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set(ys,null)},e.prototype.getUpdateType=function(t){var e,n,r,i,o;if(t){var a=!(0,b.isNil)(t.x),s=!(0,b.isNil)(t.y),u=Object.keys(t);return 1===u.length&&(a||s)||2===u.length&&a&&s?"move":(0,b.isNumber)(t.x)||(0,b.isNumber)(t.y)||t.type||t.anchorPoints||t.size||(null==t?void 0:t.style)&&((null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.r)||(null===(n=null==t?void 0:t.style)||void 0===n?void 0:n.width)||(null===(r=null==t?void 0:t.style)||void 0===r?void 0:r.height)||(null===(i=null==t?void 0:t.style)||void 0===i?void 0:i.rx)||(null===(o=null==t?void 0:t.style)||void 0===o?void 0:o.ry))?"bbox|label":u.includes("label")||u.includes("labelCfg")?"style|label":"style"}},e.prototype.setState=function(e,n){var r=this;this.optimize?t.prototype.setState.call(this,e,n):this.runWithBBoxAffected((function(){return t.prototype.setState.call(r,e,n)}))},e.prototype.clearStates=function(e){var n=this;this.optimize?t.prototype.clearStates.call(this,e):this.runWithBBoxAffected((function(){return t.prototype.clearStates.call(n,e)}))},e.prototype.runWithBBoxAffected=function(t){var e=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),r={};Object.keys(this.getKeyShape().attr()).forEach((function(t){e.includes(t)&&(r[t]=n[t])})),t();for(var i=this.getKeyShape().attr(),o=0;o<e.length;o++){var a=e[o];if(i[a]!==r[a]){this.clearCache(),this.getEdges().forEach((function(t){return t.refresh()}));break}}},e}(ds),xs=bs,ws="bboxCache",_s="bboxCanvasCache",Es="sizeCache",Ss="anchorPointsCache",Cs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var e=this.get("styles"),n=this.get("bbox");if(e&&n){var r=t,i=(0,b.isNumber)(t.size)?[t.size,t.size]:t.size,o=(0,b.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,a=i||o||qe.defaultCombo.size,s={r:(Math.max(n.width,n.height)||Math.max(a[0],a[1]))/2,width:n.width||a[0],height:n.height||a[1]};r.style=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},e),t.style),s);var u=t.padding||qe.defaultCombo.padding;return(0,b.isNumber)(u)?(s.r+=u,s.width+=2*u,s.height+=2*u):(s.r=s.r+Math.max.apply(Math,u),s.width+=u[1]+u[3]||2*u[1],s.height+=u[0]+u[2]||2*u[0]),this.set(Es,s),r}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),e=this.get("group"),n=nn(t,e);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var r=this.get(ws)||{},i=r.x,o=r.x;return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n.x=n.minX,n.y=n.minY,n.x===i&&n.y===o||this.set(Ss,null),n}},e.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){return this.get("combos").push(t),!0},e.prototype.addNode=function(t){return this.get("nodes").push(t),!0},e.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var e=this.getCombos(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.removeNode=function(t){if(t){var e=this.getNodes(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){return this.set(_s,null),this.calculateCanvasBBox()},e.prototype.clearCache=function(){this.set(ws,null),this.set(_s,null),this.set(Ss,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),this.set(Es,null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},e}(xs),ks=Cs,Ms="node",Os="edge",Ts="vedge",As="combo",Ns="Mapper",Is="stateStyles",Ps=function(){function t(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,b.throttle)((function(t){var n=e.graph;if(n&&!n.get("destroyed")){var r=e.edgeToBeUpdateMap;if(r){var i=Object.values(r);i.length&&(i.forEach((function(t){var e=t.edge;if(e&&!e.destroyed){var n=e.getSource(),r=e.getTarget();n&&!n.destroyed&&r&&!r.destroyed&&e.refresh(t.updateType)}})),e.edgeToBeUpdateMap={})}}}),16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return t.prototype.addItem=function(t,e){var n=this.graph,r=t===Ts?Os:t,i=n.get("".concat(r,"Group"))||n.get("group"),o=(0,b.upperFirst)(r),a=null,s=n.get(r+(0,b.upperFirst)(Is))||{},u=n.get("default"+o);e[Is]&&(s=e[Is]),u&&(0,b.each)(u,(function(t,n){(0,b.isObject)(t)&&!(0,b.isArray)(t)?e[n]=(0,b.deepMix)({},t,e[n]):(0,b.isArray)(t)?e[n]=e[n]||(0,b.clone)(u[n]):e[n]=e[n]||u[n]}));var c=n.get(r+Ns);if(c){var l=c(e);l[Is]&&(s=l[Is],delete l[Is]),(0,b.each)(l,(function(t,n){(0,b.isObject)(t)&&!(0,b.isArray)(t)?e[n]=(0,b.deepMix)({},e[n],t):e[n]=l[n]||e[n]}))}if(n.emit("beforeadditem",{type:t,model:e}),t===Os||t===Ts){var f=void 0,d=void 0;if(f=e.source,d=e.target,f&&(0,b.isString)(f)&&(f=n.findById(f)),d&&(0,b.isString)(d)&&(d=n.findById(d)),!f||!d)return void console.warn("The source or target node of edge ".concat(e.id," does not exist!"));f.getType&&"combo"===f.getType()&&(e.isComboEdge=!0),d.getType&&"combo"===d.getType()&&(e.isComboEdge=!0),a=new ms({model:e,source:f,target:d,styles:s,linkCenter:n.get("linkCenter"),group:i.addGroup()})}else if(t===Ms)a=new xs({model:e,styles:s,group:i.addGroup()});else if(t===As){var h=e.children,p=gn(h,n),g=void 0,v=void 0;if(isNaN(p.x)?isNaN(e.x)&&(g=100*Math.random()):g=p.x,isNaN(p.y)?isNaN(e.y)&&(v=100*Math.random()):v=p.y,isNaN(e.x)||isNaN(e.y))e.x=g,e.y=v;else{var m=e.x-g,y=e.y-v;this.updateComboSucceeds(e.id,m,y,h)}var x=i.addGroup();x.setZIndex(e.depth),a=new ks({model:e,styles:s,animate:n.get("animate"),bbox:e.collapsed?gn([],n):p,group:x}),e.collapsed||"circle"!==a.getKeyShape().get("type")||(p.width=Math.hypot(p.height,p.width),p.height=p.width,a.set("bbox",p),a.refresh());var w=a.getModel();(h||[]).forEach((function(t){var e=n.findById(t.id);a.addChild(e),t.depth=w.depth+2}))}if(a)return a.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(t,"s")).push(a),n.get("itemMap")[a.get("id")]=a,n.emit("afteradditem",{item:a,model:e}),a},t.prototype.updateItem=function(t,e){var n,r,i=this,o=this.graph;if((0,b.isString)(t)&&(t=o.findById(t)),t&&!t.destroyed){var a="";t.getType&&(a=t.getType());var s=o.get(a+Ns),u=t.getModel(),c=u.x,l=u.y,f=t.getUpdateType(e);if(s){var d=s((0,b.deepMix)({},u,e)),h=(0,b.deepMix)({},u,d,e);d[Is]&&(t.set("styles",h[Is]),delete h[Is]),(0,b.each)(h,(function(t,n){e[n]=t}))}else(0,b.each)(e,(function(t,n){u[n]&&(0,b.isObject)(t)&&!(0,b.isArray)(t)&&(e[n]=(0,y.__assign)((0,y.__assign)({},u[n]),e[n]))}));if(o.emit("beforeupdateitem",{item:t,cfg:e}),a===Os){if(e.source){var p=e.source;(0,b.isString)(p)&&(p=o.findById(p)),t.setSource(p)}if(e.target){var g=e.target;(0,b.isString)(g)&&(g=o.findById(g)),t.setTarget(g)}t.update(e)}else if(a===Ms){t.update(e,f);var v=t.getEdges();"move"===f?(0,b.each)(v,(function(t){i.edgeToBeUpdateMap[t.getID()]={edge:t,updateType:f},i.throttleRefresh()})):(null==f?void 0:f.includes("bbox"))&&(0,b.each)(v,(function(t){t.refresh(f)}))}else if(a===As){if(t.update(e,f),!isNaN(e.x)||!isNaN(e.y)){var m=e.x-c||0,x=e.y-l||0;this.updateComboSucceeds(u.id,m,x)}var w=t.getEdges();if(((null==f?void 0:f.includes("bbox"))||"move"===f)&&a===As){var _=t.get("shapeFactory"),E=u.type||"circle";(void 0===u.animate||void 0===e.animate?null===(r=null===(n=_[E])||void 0===n?void 0:n.options)||void 0===r?void 0:r.animate:u.animate||e.animate)?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(0,b.each)(w,(function(t){t&&!t.destroyed&&t.refresh()}))}}),201):(0,b.each)(w,(function(t){t.refresh()}))}}t.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:t,cfg:e})}},t.prototype.updateCombo=function(t,e,n){var r,i,o=this,a=this.graph;if((0,b.isString)(t)&&(t=a.findById(t)),t&&!t.destroyed){var s=t.getModel(),u=gn(e,a,t),c=u.x,l=u.y;t.set("bbox",u);var f=c,d=l;n?(f=isNaN(s.x)?c:s.x,d=isNaN(s.y)?l:s.y):(f=isNaN(c)?s.x:c,d=isNaN(l)?s.y:l),t.update({x:f,y:d});var h=t.get("shapeFactory"),p=s.type||"circle";(void 0===s.animate?null===(i=null===(r=h[p])||void 0===r?void 0:r.options)||void 0===i?void 0:i.animate:s.animate)?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(t.getShapeCfg(s),o.updateComboEdges(t))}}),201):this.updateComboEdges(t)}},t.prototype.updateComboEdges=function(t){for(var e,n,r=t.getEdges()||[],i=0;i<r.length;i++){var o=r[i];(null==o?void 0:o.destroyed)||(null===(e=null==o?void 0:o.getSource())||void 0===e?void 0:e.destroyed)||(null===(n=null==o?void 0:o.getTarget())||void 0===n?void 0:n.destroyed)||o.refresh()}},t.prototype.collapseCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph;(0,b.isString)(t)&&(t=n.findById(t));var r=t.getChildren();r.nodes.forEach((function(t){n.hideItem(t,e)})),r.combos.forEach((function(t){n.hideItem(t,e)}))},t.prototype.updateComboSucceeds=function(t,e,n,r){var i=this;void 0===r&&(r=[]);var o=this.graph;if(e||n){var a=r;if(!(null==a?void 0:a.length)){var s=o.get("comboTrees");null==s||s.forEach((function(e){un(e,(function(e){return e.id!==t||(a=e.children,!1)}))}))}null==a||a.forEach((function(t){var r=o.findById(t.id);if(r){var a=r.getModel();i.updateItem(t.id,{x:(a.x||0)+e,y:(a.y||0)+n})}}))}},t.prototype.expandCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph;(0,b.isString)(t)&&(t=n.findById(t));var r=t.getChildren(),i=new Set;r.nodes.forEach((function(t){n.showItem(t,e),t.getEdges().forEach((function(t){return i.add(t)}))})),r.combos.forEach((function(t){t.getModel().collapsed?t.show():n.showItem(t,e),t.getEdges().forEach((function(t){return i.add(t)}))})),i.forEach((function(t){return t.refresh()}))},t.prototype.removeItem=function(t){var e=this,n=this.graph;if((0,b.isString)(t)&&(t=n.findById(t)),t&&!t.destroyed){var r=(0,b.clone)(t.getModel()),i="";t.getType&&(i=t.getType()),n.emit("beforeremoveitem",{item:r,type:i});var o=n.get("".concat(i,"s")),a=o.indexOf(t);if(a>-1&&o.splice(a,1),i===Os){var s=n.get("v".concat(i,"s")),u=s.indexOf(t);u>-1&&s.splice(u,1)}var c=t.get("id");delete n.get("itemMap")[c];var l=n.get("comboTrees"),f=t.get("id");if(i===Ms){var d=t.getModel().comboId;if(l&&d){var h=l,p=!1;l.forEach((function(t){p||un(t,(function(t){if(t.id===f&&h){var e=h.indexOf(t);return h.splice(e,1),p=!0,!1}return h=t.children,!0}))}))}for(var g=(m=t.getEdges()).length-1;g>=0;g--)n.removeItem(m[g],!1);d&&n.updateCombo(d)}else if(i===As){var v,m,y=t.getModel().parentId,x=!1;for((l||[]).forEach((function(t){x||un(t,(function(t){return t.id!==f||(v=t,x=!0,!1)}))})),v.removed=!0,v&&v.children&&v.children.forEach((function(t){e.removeItem(t.id)})),g=(m=t.getEdges()).length;g>=0;g--)n.removeItem(m[g],!1);y&&n.updateCombo(y)}t.destroy(),n.emit("afterremoveitem",{item:r,type:i})}},t.prototype.setItemState=function(t,e,n){var r=this.graph,i=e;(0,b.isString)(n)&&(i="".concat(e,":").concat(n)),t.hasState(i)===n&&n||(0,b.isString)(n)&&t.hasState(i)||(r.emit("beforeitemstatechange",{item:t,state:i,enabled:n}),t.setState(e,n),r.autoPaint(),r.emit("afteritemstatechange",{item:t,state:i,enabled:n}))},t.prototype.priorityState=function(t,e){var n=this.graph,r=t;(0,b.isString)(t)&&(r=n.findById(t)),this.setItemState(r,e,!1),this.setItemState(r,e,!0)},t.prototype.clearItemStates=function(t,e){var n=this.graph;(0,b.isString)(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},t.prototype.refreshItem=function(t){var e=this.graph;(0,b.isString)(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},t.prototype.addCombos=function(t,e){var n=this,r=this.graph;(t||[]).forEach((function(t){cn(t,(function(t){var r;return e.forEach((function(e){e.id===t.id&&(e.children=t.children,e.depth=t.depth,r=e)})),r&&n.addItem("combo",r),!0}))}));var i=r.get("comboGroup");i&&i.sort()},t.prototype.changeItemVisibility=function(t,e){var n=this,r=this.graph;if((0,b.isString)(t)&&(t=r.findById(t)),t){if(r.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()===Ms){var i=t.getEdges();(0,b.each)(i,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}))}else if(t.getType&&t.getType()===As){var o=r.get("comboTrees"),a=t.get("id"),s=[],u=!1;(o||[]).forEach((function(t){u||t.children&&0!==t.children.length&&un(t,(function(t){return t.id!==a||(s=t.children,u=!0,!1)}))})),s&&(!e||e&&!t.getModel().collapsed)&&s.forEach((function(t){var i=r.findById(t.id);n.changeItemVisibility(i,e)})),i=t.getEdges(),(0,b.each)(i,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}))}return r.emit("afteritemvisibilitychange",{item:t,visible:e}),t}console.warn("The item to be shown or hidden does not exist!")},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),Ds=Ps,Ls=function(){function t(t){this.graph=t,this.destroyed=!1}return t.prototype.updateState=function(t,e,n){var r=this.graph.get("states"),i=e;(0,b.isString)(n)&&(i="".concat(e,":").concat(n)),r[i]||(r[i]=[]),n?r[i].push(t):r[i]=r[i].filter((function(e){return e!==t})),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:r})},t.prototype.updateStates=function(t,e,n){var r=this.graph.get("states");((0,b.isString)(e)?[e]:e).forEach((function(e){var i=e;r[i]||(r[i]=[]),(0,b.isString)(n)&&(i="".concat(e,":").concat(n)),n?r[i].push(t):r[i]=r[i].filter((function(e){return e!==t}))})),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:e})},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),Rs=Ls,js=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){if("\\"===t.charAt(0))return t.slice(1);var r=e[n];return 0===r&&(r="0"),r||""})):t},Bs=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i.x,a=i.y;e.push(o),e.push(a)}var s=_a(e);return s.unshift(["M",t[0].x,t[0].y]),s},Fs=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i={x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y},o=[0,0];ie.normalize(o,[e.x-t.x,e.y-t.y]),o&&(o[0]||o[1])||(o=[0,0]);var a=[-o[1]*r,o[0]*r];return i.x+=a[0],i.y+=a[1],i},zs=function(t,e){var n=t.length;if(!n)return"";for(var r="",i=0;i<n;i++){var o=t[i];r+=js(0===i?"M{x} {y}":"L{x} {y}",o)}return e&&(r+="Z"),r},$s=function(t){var e=[];return t.forEach((function(t){if("A"!==t[0])for(var n=1;n<t.length;n+=2)e.push([t[n],t[n+1]]);else{var r=t.length;e.push([t[r-2],t[r-1]])}})),e},Gs=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));var e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2];t.unshift(r),t.unshift(i),t.push(e),t.push(n);for(var o=[],a=1;a<t.length-2;a+=1){var s=t[a-1].x,u=t[a-1].y,c=t[a].x,l=t[a].y,f=t[a+1].x,d=t[a+1].y,h=c+(f-s)/6,p=l+(d-u)/6,g=f-((a!==t.length-2?t[a+2].x:f)-c)/6,v=d-((a!==t.length-2?t[a+2].y:d)-l)/6;o.push(["C",h,p,g,v,f,d])}return o.unshift(["M",r.x,r.y]),o},Vs=function(t,e){return ie.scale([0,0],ie.normalize([0,0],t),e)},Us=function(t,e){var n=[t[1]-e[1],e[0]-t[0]],r=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===r)throw new Error("p0 should not be equal to p1");return[n[0]/r,n[1]/r]},Ws=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function Hs(t,e){if(!t||t.length<1)return"";if(1===t.length)return function(t){var n=[t[0][0],t[0][1]-e],r=[t[0][0],t[0][1]+e];return"M ".concat(n," A ").concat(e,",").concat(e,",0,0,0,").concat(r," A ").concat(e,",").concat(e,",0,0,0,").concat(n)}(t);if(2===t.length)return function(t){var n=ie.scale([0,0],Us(t[0],t[1]),e),r=ie.scale([0,0],n,-1),i=ie.add([0,0],t[0],n),o=ie.add([0,0],t[1],n),a=ie.add([0,0],t[1],r),s=ie.add([0,0],t[0],r);return"M ".concat(i," L ").concat(o," A ").concat([e,e,"0,0,0",a].join(",")," L ").concat(s," A ").concat([e,e,"0,0,0",i].join(","))}(t);for(var n=new Array(t.length),r=0;r<n.length;++r){var i=0===r?t[t.length-1]:t[r-1],o=t[r],a=ie.scale([0,0],Us(i,o),e);n[r]=[ie.add([0,0],i,a),ie.add([0,0],o,a)]}var s="A ".concat([e,e,"0,0,0,"].join(","));return(n=n.map((function(t,e){var r="";return 0===e&&(r="M ".concat(n[n.length-1][1]," ")),r+"".concat(s+t[0]," L ").concat(t[1])}))).join(" ")}function Ys(t,e){var n,r,i,o=t.length;if(!t||o<1)return"";if(1===o)return r=[(n=t)[0][0],n[0][1]-e],i=[n[0][0],n[0][1]+e],"M ".concat(r," A ").concat([e,e,"0,0,0",i].join(",")," A ").concat([e,e,"0,0,0",r].join(","));if(2===o)return function(t){var n=Ws(t[0],t[1]),r=Vs(n,e),i=ie.add([0,0],t[0],ie.scale([0,0],r,-1)),o=ie.add([0,0],t[1],r),a=1.2*e,s=Vs(ie.normalize([0,0],n),a),u=ie.scale([0,0],s,-1),c=ie.add([0,0],i,u),l=ie.add([0,0],o,u),f=ie.add([0,0],i,s);return"M ".concat(i," C ").concat([c,l,o].join(",")," S ").concat([f,i].join(",")," Z")}(t);for(var a=t.map((function(e,n){var r=t[(n+1)%o];return{p:e,v:ie.normalize([0,0],Ws(e,r))}})),s=0;s<a.length;++s){var u=s>0?s-1:o-1,c=ie.normalize([0,0],ie.add([0,0],a[u].v,ie.scale([0,0],a[s].v,-1)));a[s].p=ie.add([0,0],a[s].p,ie.scale([0,0],c,e))}return a.map((function(t){var e=t.p;return{x:e[0],y:e[1]}}))}var Xs=function(t,e){for(var n=[],r=0;r<5;r++){var i=Math.cos((18+72*r)/180*Math.PI)*t,o=Math.sin((18+72*r)/180*Math.PI)*t,a=Math.cos((54+72*r)/180*Math.PI)*e,s=Math.sin((54+72*r)/180*Math.PI)*e;0===r?n.push(["M",i,-o]):n.push(["L",i,-o]),n.push(["L",a,-s])}return n.push(["Z"]),n},qs=function(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)},Zs=function(t){var e=t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}}));e.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x}));for(var n={},r=e.length-1;r>=0;r--){var i=e[r],o=i.x,a=i.y;n["".concat(o,"-").concat(a)]&&e.splice(r,1),n["".concat(o,"-").concat(a)]=!0}if(1===e.length)return e;var s=[];for(r=0;r<e.length;r++){for(;s.length>=2&&qs(s[s.length-2],s[s.length-1],e[r])<=0;)s.pop();s.push(e[r])}var u=[];for(r=e.length-1;r>=0;r--){for(;u.length>=2&&qs(u[u.length-2],u[u.length-1],e[r])<=0;)u.pop();u.push(e[r])}return u.pop(),s.pop(),s.concat(u)},Ks={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Js(t,e,n){var r=!1,i=function(t,n){return e.cells[t+n*e.width]},o=function(t,e){var r=0;return i(t-1,e-1)>=n&&(r+=1),i(t,e-1)>n&&(r+=2),i(t-1,e)>n&&(r+=4),i(t,e)>n&&(r+=8),r},a=function(n,r){for(var i,a,s=n,u=r,c=0;c<e.width*e.height;c++){if(i=s,a=u,t.findIndex((function(t){return t.x===s&&t.y===u}))>-1){if(t[0].x===s&&t[0].y===u)return!0}else t.push({x:s,y:u});var l=o(s,u);switch(l){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===i&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:u--;break;case 9:1===i&&(0===a?u-=1:u+=1);break;case 10:case 8:case 11:u++;break;default:return console.warn("Marching squares invalid state: ".concat(l)),!0}}};this.march=function(){for(var t=0;t<e.width&&!r;t+=1)for(var s=0;s<e.height&&!r;s+=1)i(t,s)>n&&15!==o(t,s)&&(r=a(t,s));return r}}var Qs=function(t,e){var n=Number.POSITIVE_INFINITY,r=null;return t.forEach((function(t){var i=Ie(t,e);i>=0&&i<n&&(r=t,n=i)})),r},tu=function(t,e,n){var r=Object.assign(Ks,n),i=Pe(t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}})));t=t.sort((function(t,e){return De({x:t.getModel().x,y:t.getModel().y},i)-De({x:e.getModel().x,y:e.getModel().y},i)}));var o=[],a=[];t.forEach((function(t){var n=function(t,e,n,r,i){var o=function(t,e,n){var r=null,i=Number.POSITIVE_INFINITY;return e.forEach((function(e){var o={x:t.getModel().x,y:t.getModel().y},a={x:e.getModel().x,y:e.getModel().y},s=De(o,a),u=new Oe(o.x,o.y,a.x,a.y),c=n.reduce((function(t,e){return Ie(e,u)>0?t+1:t}),0);s*Math.pow(c+1,2)<i&&(r=e,i=s*Math.pow(c+1,2))})),r}(t,n,e);if(null===o)return[];var a=function(t){for(var n=[];t.length>0;){var r=t.pop();if(0===t.length){n.push(r);break}var i=t.pop(),o=new Oe(r.x1,r.y1,i.x2,i.y2);Qs(e,o)?(n.push(r),t.push(i)):t.push(o)}return n}(function(t,e,n,r){var i=[],o=[];o.push(t);for(var a=!0,s=0,u=function(t,e){var n=!1;return e.forEach((function(e){n||(Re(t,{x:e.x1,y:e.y1})||Re(t,{x:e.x2,y:e.y2}))&&(n=!0)})),n},c=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n].getBBox(),o=[[i.x,i.y],[i.x+i.width,i.y],[i.x,i.y+i.height],[i.x+i.width,i.y+i.height]];if(Ce(o,t.x,t.y))return!0}return!1};a&&s<n;){a=!1;for(var l=function(){var t=o.pop(),n=Qs(e,t);if(n){var l=Ne(n,t),f=l[0];if(2===l[1]){var d=function(s){for(var l=r,d=nu(n,l,f,s),h=u(d,o)||u(d,i),p=c(d,e);!h&&p&&l>=1;)d=nu(n,l/=1.5,f,s),h=u(d,o)||u(d,i),p=c(d,e);!d||h||s&&p||(o.push(new Oe(t.x1,t.y1,d.x,d.y)),o.push(new Oe(d.x,d.y,t.x2,t.y2)),a=!0)};d(!0),a||d(!1)}}a||i.push(t),s+=1};!a&&o.length;)l()}for(;o.length;)i.push(o.pop());return i}(new Oe(t.getModel().x,t.getModel().y,o.getModel().x,o.getModel().y),e,r,i));return a}(t,e,o,r.maxRoutingIterations,r.morphBuffer);n.forEach((function(t){a.push(t)})),o.push(t)}));for(var s,u,c,l,f,d=function(t,e,n){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];t.forEach((function(t){i.push(t.getBBox())})),e.forEach((function(t){i.push(t.getBBox())}));for(var o=0,a=i;o<a.length;o++){var s=a[o];r.minX=(s.minX<r.minX?s.minX:r.minX)-n,r.minY=(s.minY<r.minY?s.minY:r.minY)-n,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+n,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+n}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}(t,a,r.nodeR0),h=(s=d.width,u=d.height,c=r.pixelGroupSize,l=Math.ceil(s/c),f=Math.ceil(u/c),{cells:new Float32Array(Math.max(0,l*f)).fill(0),width:l,height:f}),p=[],g=[],v=0;v<r.maxMarchingIterations;v++)if(eu(t,e,a,d,h,r),g=[],new Js(p=[],h,r.threshold).march()){var m=p.map((function(t){return{x:Math.round(t.x*r.pixelGroupSize+d.minX),y:Math.round(t.y*r.pixelGroupSize+d.minY)}}));if(m){var y=m.length;if(r.skip>1)for(y=Math.floor(m.length/r.skip);y<3&&r.skip>1;)r.skip-=1,y=Math.floor(m.length/r.skip);for(var b=0,x=0;x<y;x+=1,b+=r.skip)g.push({x:m[b].x,y:m[b].y})}if(g&&function(){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=g.map((function(t){return[t.x,t.y]}));if(!Ce(i,r.getBBox().centerX,r.getBBox().centerY))return!1}return!0}())return g;if(r.threshold*=.9,v<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(0!==r.nonMemberInfluenceFactor&&e.length>0))break;r.nonMemberInfluenceFactor*=.8}}return g};function eu(t,e,n,r,i,o){function a(t,e){var n=Math.floor((t-e)/o.pixelGroupSize);return n<0?0:n}function s(t,e){return t*o.pixelGroupSize+e}var u=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),c=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),l=function(t,e){return[Math.min(a(t.minX,e+r.minX),i.width),Math.min(a(t.minY,e+r.minY),i.height),Math.min(a(t.maxX,-e+r.minX),i.width),Math.min(a(t.maxY,-e+r.minY),i.height)]},f=function(t,e){for(var n=t.getBBox(),a=l(n,o.nodeR1),u=a[0],c=a[1],f=a[2],d=a[3],h=c;h<d;h+=1)for(var p=u;p<f;p+=1)if(!(e<0&&i[p+h*i.width]<=0)){var g=s(p,r.minX),v=s(h,r.minY),m=je({x:g,y:v},{x:n.minX,y:n.minY,width:n.width,height:n.height});if(m<Math.pow(o.nodeR1,2)){var y=Math.sqrt(m)-o.nodeR1;i.cells[p+h*i.width]+=e*y*y}}};o.nodeInfluenceFactor&&t.forEach((function(t){f(t,o.nodeInfluenceFactor/u)})),o.edgeInfluenceFactor&&n.forEach((function(t){!function(t,e){for(var n=t.getBBox(),a=l(n,o.edgeR1),u=a[0],c=a[1],f=a[2],d=a[3],h=c;h<d;h+=1)for(var p=u;p<f;p+=1)if(!(e<0&&i.cells[p+h*i.width]<=0)){var g=s(p,r.minX),v=s(h,r.minY),m=Le({x:g,y:v},t);if(m<Math.pow(o.edgeR1,2)){var y=Math.sqrt(m)-o.edgeR1;i.cells[p+h*i.width]+=e*y*y}}}(t,o.edgeInfluenceFactor/c)})),o.negativeNodeInfluenceFactor&&e.forEach((function(t){f(t,o.negativeNodeInfluenceFactor/u)}))}function nu(t,e,n,r){var i=t.getBBox(),o=n[0],a=n[1],s=n[2],u=n[3],c={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},l=i.height*i.width;function f(t,e){return i.width*(.5*(t.y-i.minY+(e.y-i.minY)))}if(a)return o?r?c.topLeft:c.bottomRight:s?r?c.bottomLeft:c.topRight:f(a,u)<.5*l?a.y>u.y?r?c.topLeft:c.bottomRight:r?c.topRight:c.bottomLeft:a.y<u.y?r?c.bottomLeft:c.topRight:r?c.bottomRight:c.topLeft;if(u){if(o)return r?c.topRight:c.bottomLeft;if(s)return r?c.bottomRight:c.topLeft}return f(o,s)<.5*l?o.x>s.x?r?c.topLeft:c.bottomRight:r?c.bottomLeft:c.topRight:o.x<s.x?r?c.topRight:c.bottomLeft:r?c.bottomRight:c.topLeft}var ru=function(){function t(t,e){this.cfg=(0,b.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map((function(e){return(0,b.isString)(e)?t.findById(e):e})),this.nonMembers=this.cfg.nonMembers.map((function(e){return(0,b.isString)(e)?t.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return t.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},t.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},t.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},t.prototype.calcPath=function(t,e){var n,r,i;switch(this.type){case"round-convex":r=ka(i=Hs((n=Zs(t)).map((function(t){return[t.x,t.y]})),this.padding));break;case"smooth-convex":2===(n=Zs(t)).length?r=ka(i=Hs(n.map((function(t){return[t.x,t.y]})),this.padding)):n.length>2&&(i=Ys(n.map((function(t){return[t.x,t.y]})),this.padding),r=Gs(i));break;case"bubble":r=(n=tu(t,e,this.cfg.bubbleCfg)).length>=2&&Gs(n)}return r},t.prototype.render=function(){this.group.addShape("path",{attrs:(0,y.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},t.prototype.addMember=function(t){if(t){(0,b.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.addNonMember=function(t){if(t){(0,b.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.removeMember=function(t){if(t){(0,b.isString)(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.removeNonMember=function(t){if(t){(0,b.isString)(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map((function(t){return(0,b.isString)(t)?n.graph.findById(t):t}))),e&&(this.nonMembers=e.map((function(t){return(0,b.isString)(t)?n.graph.findById(t):t}))),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.updateStyle=function(t){this.group.findById(this.id).attr((0,y.__assign)({},t))},t.prototype.updateCfg=function(t){var e=this;this.cfg=(0,b.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map((function(t){return(0,b.isString)(t)?e.graph.findById(t):t}))),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map((function(t){return(0,b.isString)(t)?e.graph.findById(t):t}))),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.contain=function(t){var e,n,r=this,i=(e=(0,b.isString)(t)?this.graph.findById(t):t).getKeyShape();if("path"===e.get("type"))n=$s(i.attr("path"));else{var o=i.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map((function(t){var e=r.graph.getPointByCanvas(t[0],t[1]);return[e.x,e.y]})),Me(n,$s(this.path))},t.prototype.destroy=function(){this.group.remove(),this.cfg=null},t}(),iu=ru,ou=N,au=function(t){function e(e){var n=t.call(this)||this;return n.sortCombos=(0,b.debounce)((function(){var t=n.get("comboSorted");if(n&&!n.destroyed&&!t){n.set("comboSorted",!0);var e=[],r={};(n.get("comboTrees")||[]).forEach((function(t){un(t,(function(t){return e[t.depth]?e[t.depth].push(t.id):e[t.depth]=[t.id],r[t.id]=t.depth,!0}))})),(n.getEdges().concat(n.get("vedges"))||[]).forEach((function(t){var n=t.getModel(),i=r[n.source]||0,o=r[n.target]||0,a=Math.max(i,o);e[a]?e[a].push(n.id):e[a]=[n.id]})),e.forEach((function(t){if(t&&t.length)for(var e=t.length-1;e>=0;e--){var r=n.findById(t[e]);r&&r.toFront()}}))}}),500,!1),n.cfg=(0,b.deepMix)(n.getDefaultCfg(),e),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new te(n.cfg.maxStep),n.redoStack=new te(n.cfg.maxStep)),n}return(0,y.__extends)(e,t),e.prototype.init=function(){this.initCanvas();var t=new Xa(this),e=new wn(this),n=new Ds(this),r=new Rs(this);this.set({viewController:t,modeController:e,itemController:n,stateController:r}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var e=(t.get("el")||{}).id,n=void 0===e?"g6":e,r=t.addGroup({id:"".concat(n,"-root"),className:qe.rootContainerClassName});if(this.get("groupByTypes")){var i=r.addGroup({id:"".concat(n,"-edge"),className:qe.edgeContainerClassName}),o=r.addGroup({id:"".concat(n,"-node"),className:qe.nodeContainerClassName}),a=r.addGroup({id:"".concat(n,"-combo"),className:qe.comboContainerClassName});a.toBack(),this.set({nodeGroup:o,edgeGroup:i,comboGroup:a})}var s=r.addGroup({id:"".concat(n,"-delegate"),className:qe.delegateContainerClassName});this.set({delegateGroup:s}),this.set("group",r)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,e){return(0,b.isPlainObject)(t)?this.cfg=(0,y.__assign)((0,y.__assign)({},this.cfg),t):this.cfg[t]=e,"enabledStack"!==t||!e||this.undoStack||this.redoStack||(this.undoStack=new te(this.cfg.maxStep),this.redoStack=new te(this.cfg.maxStep)),this},e.prototype.get=function(t){var e;return null===(e=this.cfg)||void 0===e?void 0:e[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,e){(0,b.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");e||(e=t.get("states")),n.clearItemStates(t,e),this.get("stateController").updateStates(t,e,!1)},e.prototype.node=function(t){"function"==typeof t&&this.set("nodeMapper",t)},e.prototype.edge=function(t){"function"==typeof t&&this.set("edgeMapper",t)},e.prototype.combo=function(t){"function"==typeof t&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,e){var n,r=this.get("".concat(t,"s"));return(0,b.each)(r,(function(t,r){if(e(t,r))return n=t})),n},e.prototype.findAll=function(t,e){var n=[];return(0,b.each)(this.get("".concat(t,"s")),(function(t,r){e(t,r)&&n.push(t)})),n},e.prototype.findAllByState=function(t,e,n){return n?this.findAll(t,(function(t){return t.hasState(e)&&n(t)})):this.findAll(t,(function(t){return t.hasState(e)}))},e.prototype.translate=function(t,e,n,r){var i=this,o=this.get("group"),a=(0,b.clone)(o.getMatrix());if(a||(a=[1,0,0,0,1,0,0,0,1]),n){var s=yn({animateCfg:r,callback:function(){return i.emit("viewportchange",{action:"translate",matrix:o.getMatrix()})}});xe(o,{x:o.getCanvasBBox().x+t,y:o.getCanvasBBox().y+e},n,s||{duration:500,easing:"easeCubic"})}else a=ou(a,[["t",t,e]]),o.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:a}),this.autoPaint()},e.prototype.moveTo=function(t,e,n,r){var i=this.get("group");xe(i,{x:t,y:e},n,r||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},e.prototype.fitView=function(t,e,n,r){t&&this.set("fitViewPadding",t);var i=this.get("viewController");e?i.fitViewByRules(e,n,r):i.fitView(n,r),this.autoPaint()},e.prototype.fitCenter=function(t,e){this.get("viewController").fitCenter(t,e),this.autoPaint()},e.prototype.addBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!0),this},e.prototype.removeBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!1),this},e.prototype.updateBehavior=function(t,e,n){return this.get("modeController").updateBehavior(t,e,n),this},e.prototype.zoom=function(t,e,n,r){var i=this,o=this.get("group"),a=(0,b.clone)(o.getMatrix())||[1,0,0,0,1,0,0,0,1],s=this.get("minZoom"),u=this.get("maxZoom"),c=this.getZoom()||1,l=c*t,f=t,d=!1;if(s&&l<s?(f=s/c,d=!0):u&&l>u&&(f=u/c,d=!0),a=ou(a,e?[["t",-e.x,-e.y],["s",f,f],["t",e.x,e.y]]:[["s",f,f]]),n){var h=(0,b.clone)(o.getMatrix());h||(h=[1,0,0,0,1,0,0,0,1]);var p=h[0],g=p*f,v=yn({animateCfg:r,callback:function(){return i.emit("viewportchange",{action:"zoom",matrix:o.getMatrix()})}});o.animate((function(t){if(1===t)h=a;else{var n=Fe(p,g,t)/h[0];h=ou(h,e?[["t",-e.x,-e.y],["s",n,n],["t",e.x,e.y]]:[["s",n,n]])}return{matrix:h}}),v)}else o.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint();return!d},e.prototype.zoomTo=function(t,e,n,r){var i=t/this.getZoom();return this.zoom(i,e,n,r)},e.prototype.focusItem=function(t,e,n){var r=this.get("viewController"),i=!1;e?i=!0:void 0===e&&(i=this.get("animate"));var o={};n?o=n:void 0===n&&(o=this.get("animateCfg")),r.focus(t,i,o),this.autoPaint()},e.prototype.focusItems=function(t,e,n,r){this.get("viewController").focusItems(t,e,n,r)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,e){return this.get("viewController").getPointByClient(t,e)},e.prototype.getClientByPoint=function(t,e){return this.get("viewController").getClientByPoint(t,e)},e.prototype.getPointByCanvas=function(t,e){return this.get("viewController").getPointByCanvas(t,e)},e.prototype.getCanvasByPoint=function(t,e){return this.get("viewController").getCanvasByPoint(t,e)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController").changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!1}],o.nodes=[{id:r,visible:!0}];break;case"edge":i.nodes=[{id:r,visible:!1}],o.edges=[{id:r,visible:!0}];break;case"combo":i.nodes=[{id:r,visible:!1}],o.combos=[{id:r,visible:!0}]}this.pushStack("visible",{before:i,after:o})}},e.prototype.hideItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController").changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!0}],o.nodes=[{id:r,visible:!1}];break;case"edge":i.nodes=[{id:r,visible:!0}],o.edges=[{id:r,visible:!1}];break;case"combo":i.nodes=[{id:r,visible:!0}],o.combos=[{id:r,visible:!1}]}this.pushStack("visible",{before:i,after:o})}},e.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},e.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},e.prototype.remove=function(t,e){void 0===e&&(e=!0),this.removeItem(t,e)},e.prototype.removeItem=function(t,e){void 0===e&&(e=!0);var n=t;if((0,b.isString)(t)&&(n=this.findById(t)),!n&&(0,b.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var r="";if(n.getType&&(r=n.getType()),e&&this.get("enabledStack")){var i=(0,y.__assign)((0,y.__assign)({},n.getModel()),{itemType:r}),o={};switch(r){case"node":o.nodes=[i],o.edges=[];for(var a=n.getEdges(),s=a.length-1;s>=0;s--)o.edges.push((0,y.__assign)((0,y.__assign)({},a[s].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[i];break;case"combo":o.combos=[i]}this.pushStack("delete",{before:o,after:{}})}if("node"===r&&n.getModel().comboId&&this.updateComboTree(n,void 0,!1),this.get("itemController").removeItem(n),"combo"===r){var u=pn(this.get("comboTrees"));this.set("comboTrees",u)}}},e.prototype.innerAddItem=function(t,e,n){if(!function(t,e){if("node"===t||"combo"===t){if(e.id&&!(0,b.isString)(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(e.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(!("edge"!==t||e.source&&e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}(t,e))return!1;if(!e.id||!this.findById(e.id)){var r,i=this.get("comboTrees")||[];if("combo"===t){var o=this.get("itemMap"),a=!1;if(i.forEach((function(i){a||cn(i,(function(i){if(e.parentId===i.id){a=!0;var s=(0,y.__assign)({id:e.id,depth:i.depth+2},e);i.children?i.children.push(s):i.children=[s],e.depth=s.depth,r=n.addItem(t,e)}var u=o[i.id];return a&&u&&u.getType&&"combo"===u.getType()&&n.updateCombo(u,i.children),!0}))})),!a){var s=(0,y.__assign)({id:e.id,depth:0},e);e.depth=s.depth,i.push(s),r=n.addItem(t,e)}this.set("comboTrees",i),e.collapsed&&(this.collapseCombo(r,!1),this.updateCombo(r))}else if("node"===t&&(0,b.isString)(e.comboId)&&i){var u;(u=this.findById(e.comboId))&&u.getType&&"combo"!==u.getType()&&console.warn("'".concat(e.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),r=n.addItem(t,e);var c=this.get("itemMap"),l=!1,f=!1;i.forEach((function(t){f||l||cn(t,(function(t){if(t.id===e.id)return f=!0,!1;if(e.comboId===t.id&&!f){l=!0;var r=(0,b.clone)(e);r.itemType="node",t.children?t.children.push(r):t.children=[r],r.depth=t.depth+1}return l&&c[t.id].getType&&"combo"===c[t.id].getType()&&n.updateCombo(c[t.id],t.children),!0}))}))}else r=n.addItem(t,e);return("node"===t&&e.comboId||"combo"===t&&e.parentId)&&(u=this.findById(e.comboId||e.parentId))&&u.getType&&"combo"===u.getType()&&u.addChild(r),r}console.warn("This item exists already. Be sure the id %c".concat(e.id,"%c is unique."),"font-size: 20px; color: red;","")},e.prototype.addItem=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!r);var o=this.get("itemController"),a=this.innerAddItem(t,e,o);if(!1===a||!0===a)return a;var s=this.get("combos");if(s&&s.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var u=(0,y.__assign)((0,y.__assign)({},a.getModel()),{itemType:t}),c={};switch(t){case"node":c.nodes=[u];break;case"edge":c.edges=[u];break;case"combo":c.combos=[u]}this.pushStack("add",{before:{},after:c})}return a},e.prototype.addItems=function(t,e,n){void 0===t&&(t=[]),void 0===e&&(e=!0),void 0===n&&(n=!0);var r=this.get("comboSorted");this.set("comboSorted",r&&!n);for(var i=this.get("itemController"),o=[],a=0;a<t.length;a++)"edge"!==(s=t[a]).type&&"vedge"!==s.type?o.push(this.innerAddItem(s.type,s.model,i)):o.push(void 0);for(a=0;a<t.length;a++){var s;"edge"!==(s=t[a]).type&&"vedge"!==s.type||(o[a]=this.innerAddItem(s.type,s.model,i))}if(n){var u=this.get("combos");u&&u.length>0&&this.sortCombos()}if(this.autoPaint(),e&&this.get("enabledStack")){var c={nodes:[],edges:[],combos:[]};for(a=0;a<t.length;a++){var l=t[a].type,f=o[a];if(f&&!0!==f){var d=(0,y.__assign)((0,y.__assign)({},f.getModel()),{itemType:l});switch(l){case"node":c.nodes.push(d);break;case"edge":c.edges.push(d);break;case"combo":c.combos.push(d)}}}this.pushStack("addItems",{before:{},after:c})}return o},e.prototype.add=function(t,e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!0),this.addItem(t,e,n,r)},e.prototype.updateItem=function(t,e,n){var r=this;void 0===n&&(n=!0);var i,o=this.get("itemController");i=(0,b.isString)(t)?this.findById(t):t;var a,s=n&&this.get("enabledStack");s&&(a=(0,b.clone)(i.getModel()));var u="";i.getType&&(u=i.getType());var c=(0,y.__spreadArray)([],i.getStates(),!0);if("combo"===u&&(0,b.each)(c,(function(t){return r.setItemState(i,t,!1)})),o.updateItem(i,e),"combo"===u&&(0,b.each)(c,(function(t){return r.setItemState(i,t,!0)})),s){var l={nodes:[],edges:[],combos:[]},f={nodes:[],edges:[],combos:[]},d=(0,y.__assign)({id:a.id},e);switch(u){case"node":l.nodes.push(a),f.nodes.push(d);break;case"edge":l.edges.push(a),f.edges.push(d);break;case"combo":l.combos.push(a),f.combos.push(d)}this.pushStack("update",{before:l,after:f})}},e.prototype.update=function(t,e,n){void 0===n&&(n=!0),this.updateItem(t,e,n)},e.prototype.setItemState=function(t,e,n){(0,b.isString)(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,e,n),this.get("stateController").updateState(t,e,n)},e.prototype.priorityState=function(t,e){this.get("itemController").priorityState(t,e)},e.prototype.data=function(t){bn(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var n=e.nodes,r=void 0===n?[]:n,i=e.edges,o=void 0===i?[]:i,a=e.combos,s=void 0===a?[]:a;if(this.clear(!0),this.emit("beforerender"),t.addItems(r.map((function(t){return{type:"node",model:t}})),!1,!1),0!==(null==s?void 0:s.length)){var u=hn(s,r);this.set("comboTrees",u),t.addCombos(s)}t.addItems(o.map((function(t){return{type:"edge",model:t}})),!1,!1);var c=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var l=t.get("layoutController");if(l){if(l.layout(f),this.destroyed)return}else f();function f(){(t.get("comboTrees")||[]).forEach((function(e){cn(e,(function(e){var n=t.findById(e.id);return"combo"===n.getType()&&e.collapsed&&(t.collapseCombo(e.id,!1),t.updateCombo(n)),!0}))})),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",c),setTimeout((function(){var e;null===(e=t.getCombos())||void 0===e||e.forEach((function(t){t.set("animate",!0)}))}),0)}this.get("groupByTypes")||(s&&0!==s.length?this.sortCombos():e.nodes&&e.edges&&e.nodes.length<e.edges.length?this.getNodes().forEach((function(t){t.toFront()})):this.getEdges().forEach((function(t){t.toBack()})))},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,e,n){var r,i=this,o=this.get("itemMap");(0,b.each)(n,(function(n){if(r=o[n.id]){if(i.get("animate")&&"node"===t){var a=r.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r.set("originAttrs",{x:a[6],y:a[7]})}i.updateItem(r,n,!1)}else r=i.addItem(t,n,!1);r&&e["".concat(t,"s")].push(r)}))},e.prototype.changeData=function(t,e){var n,r=this;void 0===e&&(e=!0);var i=this,o=t||i.get("data");if(!bn(o))return this;this.emit("beforechangedata"),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:o}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map((function(t){return i.clearItemStates(t)})),this.getEdges().map((function(t){return i.clearItemStates(t)}));var a=this.get("canvas"),s=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(o),i.render());var u=this.get("itemMap"),c={nodes:[],edges:[]},l=o.combos;if(l){var f=hn(l,o.nodes);this.set("comboTrees",f)}else this.set("comboTrees",[]);this.diffItems("node",c,o.nodes),(0,b.each)(u,(function(t,e){u[e].getModel().depth=0,t.getType&&"edge"===t.getType()||(t.getType&&"combo"===t.getType()?(delete u[e],t.destroy()):c.nodes.indexOf(t)<0&&(delete u[e],i.remove(t,!1)))}));for(var d=this.getCombos(),h=d.length-1;h>=0;h--)d[h].destroyed&&d.splice(h,1);l&&(i.addCombos(l),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",c,o.edges),(0,b.each)(u,(function(t,e){(!t.getType||"node"!==t.getType()&&"combo"!==t.getType())&&c.edges.indexOf(t)<0&&(delete u[e],i.remove(t,!1))})),(this.get("comboTrees")||[]).forEach((function(t){cn(t,(function(t){return"combo"===r.findById(t.id).getType()&&t.collapsed&&r.collapseCombo(t.id,!1),!0}))})),this.set({nodes:c.nodes,edges:c.edges});var p=this.get("layoutController");return p&&(p.changeData((function(){setTimeout((function(){var t;null===(t=i.getCombos())||void 0===t||t.forEach((function(t){t.set("animate",!0)}))}),0)})),i.get("animate")&&!p.getLayoutType()?(i.positionsAnimate(),null===(n=i.getCombos())||void 0===n||n.forEach((function(t){return t.set("animate",!0)}))):i.autoPaint()),setTimeout((function(){a.set("localRefresh",s)}),16),this.set("data",o),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var e=this.get("comboTrees");this.get("itemController").addCombos(e,t)},e.prototype.createCombo=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=this.get("itemController");this.set("comboSorted",!1);var o,a="";if(t){if((0,b.isString)(t))a=t,o={id:t};else{if(!(a=t.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");o=t}var s=n&&this.get("enabledStack"),u={nodes:[],combos:[]};s&&e.forEach((function(t){var e=r.findById(t),n=e.getType();if("node"===n||"combo"===n){var i=e.getModel();u["".concat(n,"s")].push({id:t,parentId:"node"===n?i.comboId:i.parentId})}}));var c=this.get("comboTrees"),l=new Set(e),f=new Map;c&&(c.forEach((function(t){cn(t,(function(t,e,n){if(l.has(t.id)){if(e){var o=r.findById(e.id),a=r.findById(t.id);e.children.splice(n,1),o.removeChild(a),i.updateCombo(o,e.children)}"combo"===t.itemType&&f.set(t.id,t)}return!0}))})),c=c.filter((function(t){return!l.has(t.id)})),this.set("comboTrees",c));var d={nodes:[],combos:[]},h=e.map((function(t){var e=r.findById(t),n=e.getModel(),i="";e.getType&&(i=e.getType());var o=f.get(t)||{id:e.getID(),itemType:i};return"combo"===i?(o.parentId=a,n.parentId=a):"node"===i&&(o.comboId=a,n.comboId=a),s&&d["".concat(i,"s")].push({id:n.id,parentId:a}),o}));o.children=h,this.addItem("combo",o,!1),this.set("comboSorted",!1),c&&(c.forEach((function(t){un(t,(function(t){return t.id!==a||(t.itemType="combo",t.children=h,!1)}))})),this.sortCombos()),s&&(d.combos.push(o),this.pushStack("createCombo",{before:u,after:d}))}},e.prototype.uncombo=function(t,e){var n,r,i=this;void 0===e&&(e=!0);var o=t;if((0,b.isString)(t)&&(o=this.findById(t)),!o||o.getType&&"combo"!==o.getType())console.warn("The item is not a combo!");else{var a=o.getModel(),s=o.getModel().parentId,u=this.get("comboTrees");u||(u=[]);var c,l=this.get("itemMap"),f=o.get("id"),d=[],h=this.get("combos"),p=this.findById(s),g=e&&this.get("enabledStack"),v={};if(g&&((v=(0,b.clone)(a)).children=[]),u.forEach((function(t){c||cn(t,(function(t){var e;if(t.id===f){c=t;var n=o.getEdges().map((function(t){return t.getID()}));n.forEach((function(t){i.removeItem(t,!1)}));var r=h.indexOf(o);h.splice(r,1),delete l[f];var a=(0,b.clone)(o.getModel());o.destroy(),i.emit("afterremoveitem",{item:a,type:"combo"})}return!s||!c||t.id!==s||(p.removeCombo(o),-1!==(r=(d=t.children).indexOf(c))&&d.splice(r,1),null===(e=c.children)||void 0===e||e.forEach((function(t){var e=i.findById(t.id),n=e.getModel();e.getType&&"combo"===e.getType()?(t.parentId=s,delete t.comboId,n.parentId=s,delete n.comboId):e.getType&&"node"===e.getType()&&(t.comboId=s,n.comboId=s),p.addChild(e),d.push(t)})),i.updateCombo(p),!1)}))})),!s&&c){var m=u.indexOf(c);u.splice(m,1),null===(n=c.children)||void 0===n||n.forEach((function(t){t.parentId=void 0;var e=i.findById(t.id).getModel();delete e.parentId,delete e.comboId,"node"!==t.itemType&&u.push(t)}))}if(g){var y={nodes:[],combos:[]},x={nodes:[],combos:[]};null===(r=c.children)||void 0===r||r.forEach((function(t){var e=i.findById(t.id).getType();"node"!==e&&"combo"!==e||(y["".concat(e,"s")].push({id:t.id,parentId:f}),x["".concat(e,"s")].push({id:t.id,parentId:s}))})),y.combos.push(v),this.pushStack("uncombo",{before:y,after:x})}}},e.prototype.updateCombos=function(t){var e=this;void 0===t&&(t=!1);var n=this,r=this.get("comboTrees"),i=n.get("itemController"),o=n.get("itemMap");(r||[]).forEach((function(n){cn(n,(function(n){var r;if(!n)return!0;var a=o[n.id];if("combo"===(null===(r=null==a?void 0:a.getType)||void 0===r?void 0:r.call(a))){var s=(0,y.__spreadArray)([],a.getStates(),!0);(0,b.each)(s,(function(t){return e.setItemState(a,t,!1)})),i.updateCombo(a,n.children,t),(0,b.each)(s,(function(t){return e.setItemState(a,t,!0)}))}return!0}))})),n.sortCombos()},e.prototype.updateCombo=function(t){var e,n=this,r=t;if((0,b.isString)(t)&&(r=this.findById(t)),!r||r.getType&&"combo"!==r.getType())console.warn("The item to be updated is not a combo!");else{e=r.get("id");var i=this.get("comboTrees"),o=this.get("itemController"),a=this.get("itemMap");(i||[]).forEach((function(t){cn(t,(function(t){if(!t)return!0;var r=a[t.id];if(e===t.id&&r&&r.getType&&"combo"===r.getType()){var i=(0,y.__spreadArray)([],r.getStates(),!0);(0,b.each)(i,(function(t){r.getStateStyle(t)&&n.setItemState(r,t,!1)})),o.updateCombo(r,t.children),(0,b.each)(i,(function(t){r.getStateStyle(t)&&n.setItemState(r,t,!0)})),e&&(e=t.parentId)}return!0}))}))}},e.prototype.updateComboTree=function(t,e,n){var r;void 0===n&&(n=!0),this.set("comboSorted",!1);var i,o=(r=(0,b.isString)(t)?this.findById(t):t).getModel(),a=o.comboId||o.parentId,s="";if(r.getType&&(s=r.getType()),e&&"combo"===s){var u,c=this.get("comboTrees"),l=!0;if((c||[]).forEach((function(t){u||un(t,(function(t){if(!u)return t.id===r.getID()&&(u=t),!0}))})),un(u,(function(t){return t.id!==e||(l=!1,!1)})),!l)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(n&&this.get("enabledStack")){var f={},d={};"combo"===s?(f.combos=[{id:o.id,parentId:o.parentId}],d.combos=[{id:o.id,parentId:e}]):"node"===s&&(f.nodes=[{id:o.id,parentId:o.comboId}],d.nodes=[{id:o.id,parentId:e}]),this.pushStack("updateComboTree",{before:f,after:d})}if(o.parentId||o.comboId){var h=this.findById(o.parentId||o.comboId);h&&h.removeChild(r)}"combo"===s?o.parentId=e:"node"===s&&(o.comboId=e),e&&(i=this.findById(e))&&i.addChild(r),a&&(i=this.findById(a))&&i.removeChild(r);var p=pn(this.get("comboTrees"),o.id,e);this.set("comboTrees",p),this.updateCombos()},e.prototype.save=function(){var t=[],e=[],n=[];return(0,b.each)(this.get("nodes"),(function(e){t.push(e.getModel())})),(0,b.each)(this.get("edges"),(function(t){e.push(t.getModel())})),(0,b.each)(this.get("combos"),(function(t){n.push(t.getModel())})),{nodes:t,edges:e,combos:n}},e.prototype.changeSize=function(t,e){return this.get("viewController").changeSize(t,e),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var e=t.get("nodes"),n=t.get("edges"),r=t.get("edges");(0,b.each)(e,(function(t){t.refresh()})),(0,b.each)(n,(function(t){t.refresh()})),(0,b.each)(r,(function(t){t.refresh()}))}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,b.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType()))return t.getChildren();console.warn("The combo does not exist!")},e.prototype.positionsAnimate=function(t){var e=this;e.emit("beforeanimate");var n=e.get("animateCfg"),r=n.onFrame,i=t?e.getNodes().concat(e.getCombos()):e.getNodes(),o=i.map((function(t){var e=t.getModel();return{id:e.id,x:e.x,y:e.y}}));e.stopAnimate();var a=e.get("canvas");e.animating=!0,a.animate((function(n){(0,b.each)(o,(function(t){var i=e.findById(t.id);if(i&&!i.destroyed){var o=i.get("originAttrs"),a=i.get("model"),s=i.getContainer().getMatrix();if(null==o&&(s&&(o={x:s[6],y:s[7]}),i.set("originAttrs",o||0)),r){var u=r(i,n,t,o||{x:0,y:0});i.set("model",Object.assign(a,u))}else o?(a.x=o.x+(t.x-o.x)*n,a.y=o.y+(t.y-o.y)*n):(a.x=t.x,a.y=t.y)}})),e.refreshPositions(t)}),{duration:n.duration,easing:n.easing,callback:function(){(0,b.each)(i,(function(t){t.set("originAttrs",null)})),n.callback&&n.callback(),e.emit("afteranimate"),e.animating=!1}})},e.prototype.refreshPositions=function(t){var e=this;e.emit("beforegraphrefreshposition");var n,r=e.get("nodes"),i=e.get("edges"),o=e.get("vedges"),a=e.get("combos"),s={},u=function(t){(0,b.each)(t,(function(t){n=t.getModel();var e=t.get("originAttrs");if(!e||n.x!==e.x||n.y!==e.y){var r=t.updatePosition({x:n.x,y:n.y});s[n.id]=r,n.comboId&&(s[n.comboId]=s[n.comboId]||r),n.parentId&&(s[n.parentId]=s[n.parentId]||r)}}))};u(a),u(r),a&&0!==a.length&&(t?(u(a),e.updateCombos()):e.updateCombos()),(0,b.each)(i,(function(t){var e=t.getSource().getModel(),n=t.getTarget();if(!(0,b.isPlainObject)(n)){var r=n.getModel();(s[e.id]||s[r.id]||t.getModel().isComboEdge)&&t.refresh()}})),(0,b.each)(o,(function(t){t.refresh()})),e.emit("aftergraphrefreshposition"),e.autoPaint()},e.prototype.stopAnimate=function(){this.isAnimating()&&this.get("canvas").stopAnimate()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},e.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},e.prototype.clear=function(t){var e;return void 0===t&&(t=!1),null===(e=this.get("canvas"))||void 0===e||e.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,e,n,r){var i=this;void 0===t&&(t={}),void 0===r&&(r=!0);var o=this.get("layoutController");if((0,b.isString)(t)&&(t={type:t}),e){var a=n;a||(a="begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),a=this.getPointByCanvas(a.x,a.y);var s=["force","gForce","fruchterman","force2"];s.includes(t.type)||!t.type&&s.includes(null==o?void 0:o.layoutType)?t.center=[a.x,a.y]:this.once("afterlayout",(function(t){var n=i.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];a.x=a.x*n[0]+n[6],a.y=a.y*n[0]+n[7];var r=i.getGroup().getCanvasBBox(),o=r.minX,s=r.maxX,u=r.minY,c={x:(o+s)/2,y:(u+r.maxY)/2};"begin"===e&&(c.x=o,c.y=u),i.translate(a.x-c.x,a.y-c.y)}))}var u=(0,y.__assign)({},this.get("layout")),c={};Object.assign(c,u,t),t.pipes&&!t.type?delete c.type:!t.pipes&&c.type&&delete c.pipes,this.set("layout",c),o&&(o.isLayoutTypeSame(c)&&c.gpuEnabled===u.gpuEnabled?o.updateLayoutCfg(c):o.changeLayout(c),r&&this.get("enabledStack")&&this.pushStack("layout",{before:u,after:c}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");null==t||t.destroyLayout()},e.prototype.layout=function(){var t,e=this.get("layoutController"),n=this.get("layout");n&&e&&(n.workerEnabled?e.layout():(null===(t=e.layoutMethods)||void 0===t?void 0:t.length)?e.relayout(!0):e.layout())},e.prototype.collapseCombo=function(t,e){var n=this;if(void 0===e&&(e=!0),!this.destroyed)if((0,b.isString)(t)&&(t=this.findById(t)),t){this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var r=t.getModel();this.get("itemController").collapseCombo(t,e),r.collapsed=!0;var i=this.getEdges().concat(this.get("vedges")),o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(t){s||un(t,(function(t){if(s&&t.depth<=r.depth)return!1;if(r.id===t.id&&(s=!0),s){var e=n.findById(t.id);e&&e.getType&&"combo"===e.getType()&&(o=(o=o.concat(e.getNodes())).concat(e.getCombos()))}return!0}))}));var u={};i.forEach((function(t){var e=t.getModel(),i=e.isVEdge,a=e.size,s=void 0===a?1:a;if(!t.isVisible()||i){var c,l=t.getSource(),f=t.getTarget(),d=null;if(l.getModel().id===r.id||o.includes(l)&&!o.includes(f)?(d=f,c=!1):(f.getModel().id===r.id||!o.includes(l)&&o.includes(f))&&(d=l,c=!0),d){if(i)return void n.removeItem(t,!1);for(var h=d.getModel();!d.isVisible();){var p=h.parentId,g=h.comboId,v=p||g;if(!(d=n.findById(v))||!v)return;h=d.getModel()}var m=h.id,y=c?{source:m,target:r.id,size:s,isVEdge:!0}:{source:r.id,target:m,size:s,isVEdge:!0},b="".concat(y.source,"-").concat(y.target);if(u[b])return void(u[b].size+=s);u[b]=y}}})),this.addItems(Object.values(u).map((function(t){return{type:"vedge",model:t}})),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}else console.warn("The combo to be collapsed does not exist!")},e.prototype.expandCombo=function(t,e){var n=this;if(void 0===e&&(e=!0),(0,b.isString)(t)&&(t=this.findById(t)),!t||t.getType&&"combo"!==t.getType())console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var r=t.getModel();this.get("itemController").expandCombo(t,e),r.collapsed=!1;var i=this.getEdges().concat(this.get("vedges")),o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(t){s||un(t,(function(t){if(s&&t.depth<=r.depth)return!1;if(r.id===t.id&&(s=!0),s){var e=n.findById(t.id);e&&e.getType&&"combo"===e.getType()&&(o=(o=o.concat(e.getNodes())).concat(e.getCombos()))}return!0}))}));var u={};i.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var e,i=t.getSource(),a=t.getTarget(),s=i.get("id"),c=a.get("id"),l=null;if(s===r.id||o.includes(i)&&!o.includes(a)?(l=a,e=!1):c===r.id||!o.includes(i)&&o.includes(a)?(l=i,e=!0):o.includes(i)&&o.includes(a)&&i.isVisible()&&a.isVisible()&&t.show(),l){var f=t.getModel(),d=f.isVEdge,h=f.size,p=void 0===h?1:h;if(d)return void n.removeItem(t,!1);for(var g=l.getModel();!l.isVisible();){var v=g.parentId,m=g.comboId,y=v||m;if(!(l=n.findById(y))||!y)return;g=l.getModel()}for(var b=g.id,x=e?a:i,w=x.getModel();!x.isVisible();){var _=w.parentId,E=w.comboId,S=_||E;if(!(x=n.findById(S))||!S)return;if(w.comboId===r.id||w.parentId===r.id)break;w=x.getModel()}var C=w.id;if(b){var k=e?{source:b,target:C,isVEdge:!0,size:p}:{source:C,target:b,isVEdge:!0,size:p},M="".concat(k.source,"-").concat(k.target);if(u[M])return void(u[M].size+=p);u[M]=k}}}})),this.addItems(Object.values(u).map((function(t){return{type:"vedge",model:t}})),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})}},e.prototype.collapseExpandCombo=function(t,e){if(void 0===e&&(e=!0),(0,b.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType())){for(var n=t.getModel(),r=this.findById(n.parentId);r;){var i=r.getModel();if(i.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(r=void 0);r=this.findById(i.parentId)}n.collapsed?this.expandCombo(t,e):this.collapseCombo(t,e),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,e){var n=t;return(0,b.isString)(t)&&(n=this.findById(t)),n.getNeighbors(e)},e.prototype.getNodeDegree=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=!1);var r=t;(0,b.isString)(t)&&(r=this.findById(t));var i=this.get("degrees");i&&!n||(i=Y(this.save()),this.set("degrees",i));var o=i[r.getID()],a=0;if(!o)return 0;switch(e){case"in":a=o.inDegree;break;case"out":a=o.outDegree;break;case"all":a=o;break;default:a=o.degree}return a},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,e,n){if(void 0===t&&(t="update"),void 0===n&&(n="undo"),this.get("enabledStack")){var r=e?(0,b.clone)(e):{before:{},after:(0,b.clone)(this.save())};"redo"===n?this.redoStack.push({action:t,data:r}):this.undoStack.push({action:t,data:r}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn(" undo & redo  Graph  enabledStack: true !")},e.prototype.getAdjMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix");return n&&t||(n=I(this.save(),e),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix"),r=this.get("shortestPathMatrix");return n&&t||(n=I(this.save(),e),this.set("adjMatrix",n)),r&&t||(r=st(this.save(),e),this.set("shortestPathMatrix",r)),r},e.prototype.on=function(e,n,r){return t.prototype.on.call(this,e,n,r)},e.prototype.destroy=function(){var t,e,n,r,i;this.clear(),this.clearStack(),null===(t=this.get("itemController"))||void 0===t||t.destroy(),null===(e=this.get("modeController"))||void 0===e||e.destroy(),null===(n=this.get("viewController"))||void 0===n||n.destroy(),null===(r=this.get("stateController"))||void 0===r||r.destroy(),null===(i=this.get("canvas"))||void 0===i||i.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(t.members&&!(t.members.length<1)){var e=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),e&&!e.get("destroyed")||((e=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",e)),n[t.id])return console.warn("Existed hull id."),n[t.id];var r=e.addGroup({id:"".concat(t.id,"-container")}),i=new iu(this,(0,y.__assign)((0,y.__assign)({},t),{group:r}));return n[i.id]=i,i}console.warn("Create hull failed! The members is empty.")},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var e,n;n=(0,b.isString)(t)?this.getHullById(t):t,null===(e=this.get("hullMap"))||void 0===e||delete e[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach((function(e){t[e].destroy()})),this.set("hullMap",{}))},e}(k),su=au;function uu(t){return uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(t)}var cu=N,lu="-shape",fu="-label",du=["startArrow","endArrow"],hu={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},pu={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:hu,combo:hu},gu="-label-bg",vu={options:{labelCfg:{style:{fontFamily:qe.windowFontFamily}},descriptionCfg:{style:{fontFamily:qe.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return"move"===e||(null==e?void 0:e.includes("bbox"))?t:(0,b.deepMix)({},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){e.shapeMap={},this.mergeStyle=this.getOptions(t);var n=this.drawShape(t,e);if(n.set("className",this.itemType+lu),e.shapeMap[this.itemType+lu]=n,t.label){var r=this.drawLabel(t,e);r.set("className",this.itemType+fu),e.shapeMap[this.itemType+fu]=r}return n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n=(this.mergeStyle||this.getOptions(t)||{}).labelCfg||{},r=this.getLabelStyle(t,n,e),i=r.rotate;delete r.rotate;var o=e.addShape("text",{attrs:r,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(e.shapeMap["text-shape"]=o,!isNaN(i)&&""!==i){var a=o.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(r.rotateCenter)switch(r.rotateCenter){case"center":default:s=cu(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=cu(s,[["t",-r.x,-r.y],["r",i],["t",r.x,r.y]]);break;case"leftcenter":s=cu(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]])}else s=cu(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]]);o.setMatrix(s)}if(r.background){var u=this.drawLabelBg(t,e,o),c=this.itemType+gu;u.set("classname",c),e.shapeMap[c]=u,o.toFront()}return o},drawLabelBg:function(t,e,n){var r=this.options.labelCfg,i=(0,b.mix)({},r,t.labelCfg),o=this.getLabelBgStyleByPosition(n,i),a=e.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return e.shapeMap["text-bg-shape"]=a,a},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e){return{}},getLabelStyle:function(t,e,n){var r=this.getLabelStyleByPosition(t,e,n),i="".concat(this.itemType,"Label"),o=qe[i]?qe[i].style:null;return(0,y.__assign)((0,y.__assign)((0,y.__assign)({},o),r),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,n){this.updateShapeStyle(t,e,n),this.updateLabel(t,e,n)},updateShapeStyle:function(t,e,n){var r,i=e.getContainer(),o=e.getKeyShape(),a=(0,b.mix)({},o.attr(),t.style),s=function(t){var e,n=a[t];if((0,b.isPlainObject)(n)){var s=(null===(r=i.shapeMap)||void 0===r?void 0:r[t])||i.find((function(e){return e.get("name")===t}));null==s||s.attr(n)}else o.attr(((e={})[t]=n,e))};for(var u in a)s(u)},updateLabel:function(t,e,n){var r,i;if(t.label||""===t.label){var o=e.getContainer(),a=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,s=void 0===a?{}:a,u=this.itemType+fu,c=o.shapeMap[u]||o.find((function(t){return t.get("className")===u})),l=this.itemType+gu,f=o.shapeMap[l]||o.find((function(t){return t.get("className")===l}));if(c){(!n||"bbox|label"===n||"edge"===this.itemType&&"style"!==n)&&(s=(0,b.deepMix)(s,t.labelCfg));var d=this.getLabelStyleByPosition(t,s,o),h=null===(r=t.labelCfg)||void 0===r?void 0:r.style,p=(0,y.__assign)((0,y.__assign)({},d),h),g=p.rotate;if(delete p.rotate,isNaN(g)||""===g)1!==(null===(i=c.getMatrix())||void 0===i?void 0:i[4])&&c.resetMatrix(),c.attr(p);else{var v=[1,0,0,0,1,0,0,0,1];v=cu(v,[["t",-p.x,-p.y],["r",g],["t",p.x,p.y]]),p.matrix=v,c.attr(p)}if(f)if(p.background){var m=this.getLabelBgStyleByPosition(c,s);f.attr(m)}else o.removeChild(f);else p.background&&((f=this.drawLabelBg(t,o,c)).set("classname",l),o.shapeMap[l]=f,c.toFront())}else{var x=this.drawLabel(t,o);x.set("className",u),o.shapeMap[u]=x}}},afterUpdate:function(t,e){},setState:function(t,e,n){var r,i,o,a=n.get("keyShape");if(a&&!a.destroyed){var s=n.getType(),u=(0,b.isBoolean)(e)?t:"".concat(t,":").concat(e),c=this.getStateStyle(u,n),l=n.getStateStyle(u);if(l||c){var f=(0,b.mix)({},l||c),d=n.getContainer(),h={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===s&&(h.r=1,h.width=1,h.height=1),e){var p=function(t){var e,n=f[t];if((0,b.isPlainObject)(n)&&!du.includes(t)){var r=(null===(o=d.shapeMap)||void 0===o?void 0:o[t])||d.find((function(e){return e.get("name")===t}));null==r||r.attr(n)}else a.attr(((e={})[t]=n,e))};for(var g in f)p(g)}else{var v=mn(n.getCurrentStatesStyle()),m=n.getModel(),y=(0,b.mix)({},m.style,mn(n.getOriginStyle())),x=a.get("name"),w=a.attr(),_={};Object.keys(w).forEach((function(t){if("img"!==t){var e=w[t];e&&"object"===uu(e)?_[t]=(0,b.clone)(e):_[t]=e}}));var E={},S=function(t){var e=f[t];if((0,b.isPlainObject)(e)&&!du.includes(t)){var n=d.shapeMap[t]||d.find((function(e){return e.get("name")===t}));if(n){var r=mn(n.attr());(0,b.each)(e,(function(e,i){if(t===x&&_[i]&&!h[i]){delete _[i];var o=y[t][i]||pu[s][i];a.attr(i,o)}else if(r[i]||0===r[i]){delete r[i];var u=y[t][i]||pu[s][i];n.attr(i,u)}})),E[t]=r}}else if(_[t]&&!h[t]){delete _[t];var i=y[t]||(y[x]?y[x][t]:void 0)||pu[s][t];a.attr(t,i)}};for(var C in f)S(C);for(var g in x?E[x]=_:(0,b.mix)(E,_),v)if(!h[g]){var k=v[g];(0,b.isPlainObject)(k)&&!du.includes(g)||(x?((0,b.mix)(y[x],((i={})[g]=k,i)),delete y[g]):(0,b.mix)(y,((r={})[g]=k,r)),delete v[g])}var M={};(0,b.deepMix)(M,y,E,v);var O=!1,T=function(t){var e,n,r=M[t];if((0,b.isPlainObject)(r)&&!du.includes(t)){var i=d.shapeMap[t]||d.find((function(e){return e.get("name")===t}));i&&(("text"===i.get("type")||i.get("labelRelated"))&&(delete r.x,delete r.y,delete r.matrix),t===x&&("combo"===s&&(delete r.r,delete r.width,delete r.height),O=!0),i.attr(r))}else if(!O){var o=r||pu[s][t];"combo"===s?x||a.attr(((e={})[t]=o,e)):a.attr(((n={})[t]=o,n))}};for(var A in M)T(A)}}}},getStateStyle:function(t,e){var n=e.getModel(),r=e.getType(),i=this.getOptions(n),o=i.stateStyles,a=i.style,s=void 0===a?{}:a,u=n.stateStyles?n.stateStyles[t]:o&&o[t];return"combo"===r?(0,b.clone)(u):(0,b.mix)({},s,u)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e,n;return(null==t?void 0:t.anchorPoints)||(null===(e=this.getCustomConfig(t))||void 0===e?void 0:e.anchorPoints)||(null===(n=this.options)||void 0===n?void 0:n.anchorPoints)}},mu={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:qe.nodeLabel.offset,getSize:function(t){var e,n=(null===(e=this.mergeStyle)||void 0===e?void 0:e.size)||t.size||this.getOptions({}).size||qe.defaultNode.size;return(0,b.isArray)(n)&&1===n.length&&(n=[n[0],n[0]]),(0,b.isArray)(n)||(n=[n,n]),n},getLabelStyleByPosition:function(t,e){var n=e.maxLength,r=t.label;n&&(r=dn(r,n));var i=e.position||this.labelPosition;if("center"===i)return{x:0,y:0,text:r,textBaseline:"middle",textAlign:"center"};var o=e.offset;(0,b.isNil)(o)&&(o=this.offset);var a,s=this.getSize(t);switch(i){case"top":a={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":a={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":a={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:a={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"}}return a.text=r,a},getLabelBgStyleByPosition:function(t,e){var n;if(!t)return{};var r=null===(n=e.style)||void 0===n?void 0:n.background;if(!r)return{};var i=t.getBBox(),o=za(r.padding),a=i.width+o[1]+o[3],s=i.height+o[0]+o[2];return(0,y.__assign)((0,y.__assign)({x:i.minX-o[3],y:i.minY-o[0]},r),{width:a,height:s})},drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t),i=e.addShape(n,{attrs:r,draggable:!0,name:"node-shape"});return e.shapeMap["node-shape"]=i,i},updateLinkPoints:function(t,e){var n,r=(this.mergeStyle||this.getOptions(t)).linkPoints,i=e.shapeMap["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),o=e.shapeMap["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),a=e.shapeMap["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),s=e.shapeMap["link-point-bottom"]||e.find((function(t){return"link-point-bottom"===t.get("className")}));i&&(n=i.attr()),o&&!n&&(n=o.attr()),a&&!n&&(n=a.attr()),s&&!n&&(n=s.attr()),n||(n=r);var u=(0,b.mix)({},n,t.linkPoints),c=u.fill,l=u.stroke,f=u.lineWidth,d=u.size/2;d||(d=u.r);var h=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=h.left,g=h.right,v=h.top,m=h.bottom,x=this.getSize(t),w=x[0],_=x[1],E={r:d,fill:c,stroke:l,lineWidth:f};if(i)p||void 0===p?i.attr((0,y.__assign)((0,y.__assign)({},E),{x:-w/2,y:0})):(i.remove(),delete e.shapeMap["link-point-left"]);else if(p){var S="link-point-left";e.shapeMap[S]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:-w/2,y:0}),className:S,name:S,isAnchorPoint:!0})}if(o)g||void 0===g||(o.remove(),delete e.shapeMap["link-point-right"]),o.attr((0,y.__assign)((0,y.__assign)({},E),{x:w/2,y:0}));else if(g){var C="link-point-right";e.shapeMap[C]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:w/2,y:0}),className:C,name:C,isAnchorPoint:!0})}if(a)v||void 0===v||(a.remove(),delete e.shapeMap["link-point-top"]),a.attr((0,y.__assign)((0,y.__assign)({},E),{x:0,y:-_/2}));else if(v){var k="link-point-top";e.shapeMap[k]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:0,y:-_/2}),className:k,name:k,isAnchorPoint:!0})}if(s)m||void 0===m?s.attr((0,y.__assign)((0,y.__assign)({},E),{x:0,y:_/2})):(s.remove(),delete e.shapeMap["link-point-bottom"]);else if(m){var M="link-point-bottom";e.shapeMap[M]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:0,y:_/2}),className:M,name:M,isAnchorPoint:!0})}},updateShape:function(t,e,n,r,i){e.get("keyShape").attr((0,y.__assign)({},n)),this.updateLabel(t,e,i),r&&this.updateIcon(t,e)},updateIcon:function(t,e){var n=this,r=e.getContainer(),i=(this.mergeStyle||this.getOptions(t)).icon,o=t.icon?t.icon:{show:void 0,text:void 0},a=o.show,s=o.text,u=r.shapeMap["".concat(this.type,"-icon")]||r.find((function(t){return t.get("name")==="".concat(n.type,"-icon")}));if(u)if(a||void 0===a){var c=(0,b.mix)({},u.attr(),i),l=c.width,f=void 0===l?20:l,d=c.height,h=void 0===d?20:d;("iconfont"===c.fontFamily||c.hasOwnProperty("text"))&&(f=0,h=0),u.attr((0,y.__assign)((0,y.__assign)({},c),{x:-f/2,y:-h/2}))}else u.remove(),delete r.shapeMap["".concat(this.type,"-icon")];else if(a){var p="".concat(this.type,"-icon");s?r.shapeMap[p]=r.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:p,name:p}):(f=i.width,h=i.height,r.shapeMap[p]=r.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},i),{x:-f/2,y:-h/2}),className:p,name:p}));var g=r.shapeMap["node-label"]||r.find((function(t){return"node-label"===t.get("name")}));g&&g.toFront()}}},yu=(0,y.__assign)((0,y.__assign)({},vu),mu);us.registerNode("single-node",yu);var bu="edge-shape",xu={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:qe.defaultEdge.size,style:{x:0,y:0,stroke:qe.defaultEdge.style.stroke,lineAppendWidth:qe.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:qe.edgeLabel.style.fill,fontSize:qe.edgeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},stateStyles:(0,y.__assign)({},qe.edgeStateStyles)},getPath:function(t){var e=[];return(0,b.each)(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},r=(0,b.mix)({},e,n,t.style),i=t.size||qe.defaultEdge.size,o=(t=this.getPathPoints(t)).startPoint,a=t.endPoint,s=this.getControlPoints(t),u=[o];s&&(u=u.concat(s)),u.push(a);var c=this.getPath(u);return(0,b.mix)({},qe.defaultEdge.style,{stroke:qe.defaultEdge.color,lineWidth:i,path:c},r)},updateShapeStyle:function(t,e,n){var r,i=e.getContainer(),o=(null===(r=e.getKeyShape)||void 0===r?void 0:r.call(e))||i.shapeMap["edge-shape"],a=t.size,s=(t=this.getPathPoints(t)).startPoint,u=t.endPoint,c=this.getControlPoints(t),l=[s];c&&(l=l.concat(c)),l.push(u);var f=o.attr(),d=t.style||{};void 0===d.stroke&&(d.stroke=t.color);var h=t.sourceNode,p=t.targetNode,g={radius:d.radius};c||(g={source:h,target:p,offset:d.offset,radius:d.radius});var v=this.getPath(l,g),m={};"move"===n?m={path:v}:(f.endArrow&&!1===d.endArrow&&(t.style.endArrow={path:""}),f.startArrow&&!1===d.startArrow&&(t.style.startArrow={path:""}),void 0===(m=(0,y.__assign)({},t.style)).lineWidth&&(m.lineWdith=((0,b.isNumber)(a)?a:null==a?void 0:a[0])||f.lineWidth),void 0===m.path&&(m.path=v),void 0===m.stroke&&(m.stroke=f.stroke||t.color)),o&&o.attr(m)},getLabelStyleByPosition:function(t,e,n){var r,i=e.position||this.labelPosition,o={},a=null==n?void 0:n.shapeMap[bu];r="start"===i?0:"end"===i?1:.5;var s,u=e.refX||this.refX,c=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return o.x=t.startPoint.x+u,o.y=t.startPoint.y+c,o.text=t.label,o;s=(0,b.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate;var l=on(a,r,u,c,s);return o.x=l.x,o.y=l.y,o.rotate=l.rotate,o.textAlign=this._getTextAlign(i,l.angle),o.text=t.label,o},getLabelBgStyleByPosition:function(t,e){if(!t)return{};var n=t.getBBox(),r=e.style&&e.style.background;if(!r)return{};var i=r.padding,o=n.width+i[1]+i[3],a=n.height+i[0]+i[2],s=(0,y.__assign)((0,y.__assign)({},r),{width:o,height:a,x:n.minX-i[3],y:n.minY-i[0],matrix:[1,0,0,0,1,0,0,0,1]});return((0,b.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate)&&(s.matrix=t.attr("matrix")||[1,0,0,0,1,0,0,0,1]),s},_getTextAlign:function(t,e){var n="center";return e?(e%=2*Math.PI,"center"!==t&&(n=e>=0&&e<=Math.PI/2||e>=1.5*Math.PI&&e<2*Math.PI?t:function(t){var e=t;return"start"===t?e="end":"end"===t&&(e="start"),e}(t)),n):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var n=this.getShapeStyle(t),r=e.addShape("path",{className:bu,name:bu,attrs:n});return e.shapeMap[bu]=r,r},drawLabel:function(t,e){var n=this.options.labelCfg,r=(0,b.deepMix)({},n,t.labelCfg),i=this.getLabelStyle(t,r,e),o=i.rotate;delete i.rotate;var a=e.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0});if(e.shapeMap["text-shape"]=a,isNaN(o)||""===o||a.rotateAtStart(o),i.background){var s=this.drawLabelBg(t,e,a,i,o),u=this.itemType+gu;s.set("classname",u),e.shapeMap[u]=s,a.toFront()}return a},drawLabelBg:function(t,e,n,r,i){var o=this.options.labelCfg,a=(0,b.deepMix)({},o,t.labelCfg),s=this.getLabelBgStyleByPosition(n,a),u=e.addShape("rect",{name:"text-bg-shape",attrs:s,labelRelated:!0});return e.shapeMap["text-bg-shape"]=u,u}},wu=(0,y.__assign)((0,y.__assign)({},vu),xu);us.registerEdge("single-edge",wu),us.registerEdge("line",{getControlPoints:function(){}},"single-edge"),us.registerEdge("spline",{getPath:function(t){return Bs(t)}},"single-edge"),us.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e,n,r=t.startPoint,i=t.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2;if(void 0!==t.controlPoints){if(n=t.controlPoints[0],e=pe(r,n,i),r.x<=i.x&&r.y>i.y?this.clockwise=e.x>n.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=e.x>n.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=e.y<n.y?0:1:this.clockwise=e.y<n.y?1:0,(n.x-r.x)/(n.y-r.y)==(i.x-r.x)/(i.y-r.y))return[]}else{void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),(0,b.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:i.x-r.x,y:i.y-r.y},u=Math.atan2(s.y,s.x);n={x:t.curveOffset*Math.cos(-Math.PI/2+u)+o,y:t.curveOffset*Math.sin(-Math.PI/2+u)+a},e=pe(r,n,i)}var c=ge(r,e);return[{x:c,y:c}]},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),2===t.length?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),us.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var n=t.startPoint,r=t.endPoint;void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,b.isArray)(this.curveOffset)&&(t.curveOffset=t.curveOffset[0]),(0,b.isArray)(this.curvePosition)&&(t.curvePosition=t.curveOffset[0]),e=[Fs(n,r,t.curvePosition,t.curveOffset)]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),us.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,b.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,b.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var n=t.startPoint,r=t.endPoint;e=[Fs(n,r,t.curvePosition[0],t.curveOffset[0]),Fs(n,r,t.curvePosition[1],t.curveOffset[1])]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),us.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,b.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,b.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,b.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var r=n.y-e.y,i=[0,0];return t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset),[{x:e.x,y:e.y+r*this.curvePosition[0]+i[0]},{x:n.x,y:n.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),us.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,b.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,b.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,b.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var r=n.x-e.x,i=[0,0];return t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset),[{x:e.x+r*this.curvePosition[0]+i[0],y:e.y},{x:n.x-r*this.curvePosition[1]+i[1],y:n.y}]}},"cubic"),us.registerEdge("loop",{getPathPoints:function(t){return rn(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var _u={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:qe.comboLabel.refX,refY:qe.comboLabel.refY,options:{style:{stroke:qe.defaultCombo.style.stroke,fill:qe.defaultCombo.style.fill,lineWidth:qe.defaultCombo.style.lineWidth},labelCfg:{style:{fill:qe.comboLabel.style.fill,fontSize:qe.comboLabel.style.fontSize,fontFamily:qe.windowFontFamily}},stateStyles:(0,y.__assign)({},qe.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(t){var e=(0,b.clone)(t.size||this.options.size||qe.defaultCombo.size);return(0,b.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),(0,b.isArray)(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,i=t.padding||this.options.padding;(0,b.isArray)(i)&&(i=Math.max.apply(Math,i));var o=e.refX,a=e.refY;(0,b.isNil)(o)&&(o=this.refX),(0,b.isNil)(a)&&(a=this.refY);var s,u=this.getSize(t),c=(Math.max(r.r,u[0]/2)||u[0]/2)+i;switch(n){case"top":s={x:0,y:-c-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:c+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-c+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"}}return s.text=t.label,s},drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t);return e.addShape(n,{attrs:r,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(t,e,n){var r=t.collapsed,i=t.collapsedSubstituteIcon,o=void 0===i?{}:i,a=Object.assign({},this.options.collapsedSubstituteIcon,o),s=a.show,u=a.img,c=a.width,l=a.height,f=e.getContainer(),d=f.find((function(t){return"combo-collapsed-substitute-icon"===t.get("name")})),h=d&&!d.destroyed,p=e.get("keyShape");if(r&&s){if(h)d.show();else{var g={width:c||2*n.r||n.width,height:l||2*n.r||n.height};d=f.addShape("image",{attrs:(0,y.__assign)({img:u,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}p.hide()}else h&&(d.hide(),p.show())},updateShape:function(t,e,n){var r=this,i=e.get("keyShape");e.get("animate")&&(void 0===t.animate?this.options.animate:t.animate)&&i.animate?(t.collapsed||this.updateCollapsedIcon(t,e,n),i.animate(n,{duration:200,easing:"easeLinear",callback:function(){t.collapsed&&r.updateCollapsedIcon(t,e,n)}})):(i.attr((0,y.__assign)({},n)),this.updateCollapsedIcon(t,e,n)),this.updateLabel(t,e)}},Eu=(0,y.__assign)((0,y.__assign)({},vu),_u);us.registerCombo("single-combo",Eu),us.registerCombo("circle",{options:{size:[qe.defaultCombo.size[0],qe.defaultCombo.size[0]],padding:Math.max.apply(Math,qe.defaultCombo.padding),animate:!0,style:{stroke:qe.defaultCombo.style.stroke,fill:qe.defaultCombo.style.fill,lineWidth:qe.defaultCombo.style.lineWidth},labelCfg:{style:{fill:qe.comboLabel.style.fill,fontSize:qe.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,y.__assign)({},qe.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);return delete n.height,delete n.width,e.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;(0,b.isArray)(n)&&(n=Math.max.apply(Math,n));var r,i={stroke:t.color},o=(0,b.mix)({},e,i,t.style),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;if(a)r=(0,b.isNumber)(a)?a/2:a[0]/2;else{var s=this.getSize(t);r=!(0,b.isNumber)(o.r)||isNaN(o.r)?s[0]/2||qe.defaultCombo.style.r:Math.max(o.r,s[0]/2)||s[0]/2}o.r=r+n;var u=(0,y.__assign)({x:0,y:0},o);return t.style?t.style.r=r:t.style={r:r},u},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;(0,b.isArray)(r)&&(r=Math.max.apply(Math,r));var i,o=(0,b.clone)(t.style),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;i=a?(0,b.isNumber)(a)?a/2:a[0]/2:Math.max(o.r,n[0]/2)||n[0]/2,o.r=i+r;var s=e.get("sizeCache");s&&(s.r=o.r);var u={stroke:t.color},c=e.get("keyShape"),l=(0,b.mix)({},c.attr(),u,o);t.style?t.style.r=i:t.style={r:i},this.updateShape(t,e,l,!0)}},"single-combo"),us.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:qe.defaultCombo.style.stroke,fill:qe.defaultCombo.style.fill,lineWidth:qe.defaultCombo.style.lineWidth},labelCfg:{style:{fill:qe.comboLabel.style.fill,fontSize:qe.comboLabel.style.fontSize,fontFamily:qe.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},qe.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,i=t.padding||this.options.padding;(0,b.isNumber)(i)&&(i=[i,i,i,i]);var o=e.refX,a=e.refY;(0,b.isNil)(o)&&(o=this.refX),(0,b.isNil)(a)&&(a=this.refY);var s,u=-r.width/2-i[3],c=r.width/2+i[1],l=-r.height/2-i[0],f=r.height/2+i[2];switch(n){case"top":s={x:u+o,y:l+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:f+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:u+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;case"top-center":s={x:0,y:l+a,textBaseline:"top",textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"}}return s.text=t.label,s},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;(0,b.isNumber)(n)&&(n=[n,n,n,n]);var r,i,o={stroke:t.color},a=(0,b.mix)({},e,o,t.style),s=this.getSize(t),u=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;u?(0,b.isNumber)(u)?(r=u,i=u):(r=u[0],i=u[1]):(r=!(0,b.isNumber)(a.width)||isNaN(a.width)?s[0]||qe.defaultCombo.style.width:Math.max(a.width,s[0])||s[0],i=!(0,b.isNumber)(a.height)||isNaN(a.height)?s[1]||qe.defaultCombo.style.height:Math.max(a.height,s[1])||s[1]);var c=-r/2-n[3],l=-i/2-n[0];a.width=r+n[1]+n[3],a.height=i+n[0]+n[2];var f=(0,y.__assign)({x:c,y:l},a);return t.style?(t.style.width=r,t.style.height=i):t.style={width:r,height:i},f},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;(0,b.isNumber)(r)&&(r=[r,r,r,r]);var i,o,a=(0,b.clone)(t.style),s=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;s?(0,b.isNumber)(s)?(i=s,o=s):(i=s[0],o=s[1]):(i=Math.max(a.width,n[0])||n[0],o=Math.max(a.height,n[1])||n[1]),a.width=i+r[1]+r[3],a.height=o+r[0]+r[2];var u=e.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-i/2-r[3],a.y=-o/2-r[0];var c={stroke:t.color},l=e.get("keyShape"),f=(0,b.mix)({},l.attr(),c,a);t.style?(t.style.width=i,t.style.height=o):t.style={width:i,height:o},this.updateShape(t,e,f,!1)}},"single-combo"),us.registerNode("simple-circle",{options:{size:qe.defaultNode.size,style:{x:0,y:0,stroke:qe.defaultNode.style.stroke,fill:qe.defaultNode.style.fill,lineWidth:qe.defaultNode.style.lineWidth},labelCfg:{style:{fill:qe.nodeLabel.style.fill,fontSize:qe.nodeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},stateStyles:(0,y.__assign)({},qe.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(t,e){var n=this.getShapeStyle(t),r="".concat(this.type,"-keyShape"),i=e.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:r,draggable:!0});return e.shapeMap[r]=i,i},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,b.deepMix)({},e,n),i=this.getSize(t)[0]/2;return(0,y.__assign)({x:0,y:0,r:i},r)},update:function(t,e,n){var r=this.getSize(t),i={stroke:t.color,r:r[0]/2},o=e.get("keyShape"),a=(0,b.deepMix)({},o.attr(),i,t.style);this.updateShape(t,e,a,!0,n)}},"single-node"),us.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:qe.defaultNode.style.stroke,fill:qe.defaultNode.style.fill,lineWidth:qe.defaultNode.style.lineWidth},labelCfg:{style:{fill:qe.nodeLabel.style.fill,fontSize:qe.nodeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},qe.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,b.mix)({},e,n),i=this.getSize(t),o=r.width||i[0],a=r.height||i[1];return(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a},r)},update:function(t,e,n){e.getContainer();var r=(this.mergeStyle||this.getOptions(t)).style,i=this.getSize(t),o=e.get("keyShape");t.size||(i[0]=o.attr("width")||r.width,i[1]=o.attr("height")||r.height);var a={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=(0,b.mix)({},r,o.attr(),a);s=(0,b.mix)(s,t.style),this.updateShape(t,e,s,!1,n)}},"single-node"),us.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:qe.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t);delete r.fill;var i=e.addShape(n,{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(t,i),i},drawClip:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).clipCfg;if(n.show){var r=n.type,i=n.x,o=n.y,a=n.style;if("circle"===r){var s=n.r;e.setClip({type:"circle",attrs:(0,y.__assign)({r:s,x:i,y:o},a)})}else if("rect"===r){var u=n.width,c=n.height,l=i-u/2,f=o-c/2;e.setClip({type:"rect",attrs:(0,y.__assign)({x:l,y:f,width:u,height:c},a)})}else if("ellipse"===r){var d=n.rx,h=n.ry;e.setClip({type:"ellipse",attrs:(0,y.__assign)({x:i,y:o,rx:d,ry:h},a)})}else if("polygon"===r){var p=n.points;e.setClip({type:"polygon",attrs:(0,y.__assign)({points:p},a)})}else if("path"===r){var g=n.path;e.setClip({type:"path",attrs:(0,y.__assign)({path:g},a)})}}},getShapeStyle:function(t){var e=this.mergeStyle||this.getOptions(t),n=e.style,r=e.img,i=this.getSize(t),o=i[0],a=i[1];return n&&(o=n.width||i[0],a=n.height||i[1]),(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a,img:r},n)},updateShapeStyle:function(t,e){var n=e.getContainer(),r="".concat(this.itemType,"-shape"),i=n.shapeMap[r]||n.find((function(t){return t.get("className")===r}))||e.getKeyShape(),o=this.getShapeStyle(t);i&&!i.destroyed&&i.attr(o)}},"single-node");var Su={triangle:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=15),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",0 L ").concat(r+e,",-").concat(t/2," L ").concat(r+e,",").concat(t/2," Z")},vee:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=20),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",0 L ").concat(r+e,",-").concat(t/2,"\n        L ").concat(r+2*e/3,",0 L ").concat(r+e,",").concat(t/2," Z")},circle:function(t,e){return void 0===t&&(t=5),void 0===e&&(e=0),"M ".concat(2*e,", 0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*-t,",0")},rect:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=10),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",").concat(-t/2," \n        L ").concat(r+e,",").concat(-t/2," \n        L ").concat(r+e,",").concat(t/2," \n        L ").concat(r,",").concat(t/2," Z")},diamond:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",0 \n        L ").concat(r+e/2,",").concat(-t/2," \n        L ").concat(r+e,",0 \n        L ").concat(r+e/2,",").concat(t/2," Z")},triangleRect:function(t,e,n,r,i,o){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=15),void 0===r&&(r=3),void 0===i&&(i=5),void 0===o&&(o=0);var a=2*o,s=a+e+i;return"M ".concat(a,",0 L ").concat(a+e,",-").concat(t/2," L ").concat(a+e,",").concat(t/2," Z\n            M ").concat(s,", -").concat(n/2,"\n            L ").concat(s+r," -").concat(n/2,"\n            L ").concat(s+r," ").concat(n/2,"\n            L ").concat(s," ").concat(n/2,"\n            Z")}},Cu={collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e+i],["L",t+r,e+i],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e-i],["L",t+r,e-i],["L",t,e+n],["Z"]]}},ku=us,Mu=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Ou=function(t){return"force"===t||"g6force"===t||"gForce"===t||"force2"===t},Tu=N,Au=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},u),o),c),i),l),f),{transform:Tu,mat3:M}),Nu=function(){function t(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return t.prototype.initLayout=function(){},t.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},t.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var n=t.pipes;return Array.isArray(n)?n.map((function(t){return(null==t?void 0:t.type)||""})):null},t.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t),n=Array.isArray(this.layoutType),r=Array.isArray(e);return n&&r?this.layoutType.every((function(t,n){return t===e[n]})):!Array.isArray(e)&&!Array.isArray(this.layoutType)&&(null==t?void 0:t.type)===this.layoutType},t.prototype.refreshLayout=function(){var t=this,e=t.graph,n=t.layoutType,r=t.layoutCfg;if(e){var i=(void 0===r?{}:r).animate,o=void 0===i&&("force"===n||"force2"===n),a=Ou(n)&&(i||o);e.get("animate")&&!a?e.positionsAnimate("comboCombined"===n):e.refreshPositions("comboCombined"===n)}},t.prototype.changeLayout=function(t){var e=t.disableTriggerLayout,n=(0,y.__rest)(t,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,e||this.layout()},t.prototype.changeData=function(t){this.layout(t)},t.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods,e=[];return null==t||t.forEach((function(t){var n,r=null===(n=t.getType)||void 0===n?void 0:n.call(t);r&&e.push(r),t.destroy()})),this.layoutMethods=[],e},t.prototype.destroyLayout=function(){this.destoryLayoutMethods();var t=this.graph;t&&!t.get("destroyed")&&t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},t.prototype.setDataFromGraph=function(){for(var t,e=[],n=[],r=[],i=[],o=[],a=[],s=[],u=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),f=u.length,d=0;d<f;d++){var h=u[d];if(h&&!h.destroyed){var p=h.getModel();h.isVisible()?e.push(p):n.push(p)}}var g=c.length;for(d=0;d<g;d++){var v=c[d];v&&!v.destroyed&&(p=v.getModel(),v.isVisible()?p.isComboEdge?o.push(p):r.push(p):i.push(p))}var m=l.length;for(d=0;d<m;d++){var y=l[d];y.destroyed||(p=y.getModel(),y.isVisible()?a.push(p):s.push(p))}return{nodes:e,hiddenNodes:n,edges:r,hiddenEdges:i,combos:a,hiddenCombos:s,comboEdges:o,vedges:null===(t=this.graph.get("vedges"))||void 0===t?void 0:t.map((function(t){return t.getModel()}))}},t.prototype.relayout=function(t){var e=this,n=this,r=n.graph,i=n.layoutMethods,o=n.layoutCfg;if(r&&!r.get("destroyed")){if(t){this.data=this.setDataFromGraph();var a=this.data.nodes;if(!a)return!1;this.initPositions(o.center,a)}r.emit("beforelayout");var s=Promise.resolve();null==i||i.forEach((function(t,n){var r=o[n]||o;s=s.then((function(){var t,a=e.execLayoutMethod(r,n);return n===i.length-1&&(null===(t=o.onAllLayoutEnd)||void 0===t||t.call(o)),a}))}))}},t.prototype.filterLayoutData=function(t,e){var n,r,i=t.nodes,o=t.edges,a=(0,y.__rest)(t,["nodes","edges"]);if(!i)return t;n=(0,b.isFunction)(null==e?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0};var s=i.filter(n);if((0,b.isFunction)(null==e?void 0:e.edgesFilter))r=e.edgesFilter;else{var u=s.reduce((function(t,e){return t[e.id]=!0,t}),{});r=function(t){return u[t.source]&&u[t.target]}}return(0,y.__assign)({nodes:s,edges:o.filter(r)},a)},t.prototype.getLayoutBBox=function(t){var e=this.graph,n=(0,b.groupBy)(e.getNodes(),(function(t){return t.getModel().layoutOrder})),r=Object.values(n).map((function(t){var e=Ua(t);return e.size=[e.width,e.height],e}));return{groupNodes:Object.values((0,b.groupBy)(t,"layoutOrder")),layoutNodes:r}},t.prototype.layoutAnimate=function(){},t.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(void 0!==t[0].x&&null!==t[0].x&&!Va(t[0].x)){for(var e=[0,0],n=t.length,r=0;r<n;r++){var i=t[r];e[0]+=i.x,e[1]+=i.y}for(e[0]/=t.length,e[1]/=t.length,r=0;r<n;r++)(i=t[r]).x-=e[0],i.y-=e[1]}},t.prototype.initPositions=function(t,e){var n,r=this.graph;if(!e)return!1;var i=e.filter((function(t){return Va(t.x)||Va(t.y)})),o=i?i.length:0;if(o){if(null===(n=this.initWithPreset)||void 0===n?void 0:n.call(this))return!1;var a=.85*r.get("width"),s=.85*r.get("height"),u=Math.ceil(Math.sqrt(o)*(a/s)),c=a/(u-1),l=s/(Math.ceil(o/u)-1);isFinite(c)&&c||(c=0),isFinite(l)&&c||(l=0);for(var f=t[0]-a/2,d=t[1]-s/2,h=!0,p=0;p<o;p++){var g=i[p];Va(+g.x)&&(h=!1,g.x=p%u*c+f),Va(+g.y)&&(h=!1,g.y=Math.floor(p/u)*l+d)}return h}},t.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},t}(),Iu=Nu,Pu=function(t){this.graph=t,this.destroyed=!1,this.initEvents()},Du=ku.registerNode,Lu=ku.registerEdge,Ru=ku.registerCombo,ju=E.registerBehavior,Bu=qe,Fu=(ku.registerNode,ku.registerEdge,ku.registerCombo,E.registerBehavior,n(369));function zu(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function $u(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function Gu(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function Vu(t,e){return t[0]===e[0]&&t[1]===e[1]}var Uu=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Wu=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Hu=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Yu=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Xu(t,e){var n=t.match(Yu);(0,b.each)(n,(function(t){var n=t.split(":");e.addColorStop(n[0],n[1])}))}function qu(t,e,n){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if((0,b.isString)(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(t,e,n){var r,i,o=Uu.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),s=o[2],u=e.getBBox();a>=0&&a<.5*Math.PI?(r={x:u.minX,y:u.minY},i={x:u.maxX,y:u.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:u.maxX,y:u.minY},i={x:u.minX,y:u.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:u.maxX,y:u.maxY},i={x:u.minX,y:u.minY}):(r={x:u.minX,y:u.maxY},i={x:u.maxX,y:u.minY});var c=Math.tan(a),l=c*c,f=(i.x-r.x+c*(i.y-r.y))/(l+1)+r.x,d=c*(i.x-r.x+c*(i.y-r.y))/(l+1)+r.y,h=t.createLinearGradient(r.x,r.y,f,d);return Xu(s,h),h}(t,e,n);if("r"===n[0])return function(t,e,n){var r=Wu.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4];if(0===a){var u=s.match(Yu);return u[u.length-1].split(":")[1]}var c=e.getBBox(),l=c.maxX-c.minX,f=c.maxY-c.minY,d=Math.sqrt(l*l+f*f)/2,h=t.createRadialGradient(c.minX+l*i,c.minY+f*o,0,c.minX+l/2,c.minY+f/2,a*d);return Xu(s,h),h}(t,e,n);if("p"===n[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var r,i,o=Hu.exec(n),a=o[1],s=o[2];function u(){r=t.createPattern(i,a),e.set("pattern",r),e.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?u():(i.onload=u,i.src=i.src),r}(t,e,n)}return n}return n instanceof CanvasPattern?n:void 0}function Zu(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ku(t,e){return Zu(t)*Zu(e)?(t[0]*e[0]+t[1]*e[1])/(Zu(t)*Zu(e)):1}function Ju(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Ku(t,e))}function Qu(t,e){var n=e[1],r=e[2],i=(0,b.mod)((0,b.toRadian)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],u=t[1],c=e[6],l=e[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(u-l)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(u-l)/2,h=f*f/(n*n)+d*d/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(d*d)+r*r*(f*f),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*d/r:0,m=n?g*-r*f/n:0,y=(s+c)/2+Math.cos(i)*v-Math.sin(i)*m,x=(u+l)/2+Math.sin(i)*v+Math.cos(i)*m,w=[(f-v)/n,(d-m)/r],_=[(-1*f-v)/n,(-1*d-m)/r],E=Ju([1,0],w),S=Ju(w,_);return Ku(w,_)<=-1&&(S=Math.PI),Ku(w,_)>=1&&(S=0),0===a&&S>0&&(S-=2*Math.PI),1===a&&S<0&&(S+=2*Math.PI),{cx:y,cy:x,rx:Vu(t,[c,l])?0:n,ry:Vu(t,[c,l])?0:r,startAngle:E,endAngle:E+S,xRotation:i,arcFlag:o,sweepFlag:a}}var tc=Math.sin,ec=Math.cos,nc=Math.atan2,rc=Math.PI;function ic(t,e,n,r,i,o,a){var s=e.stroke,u=e.lineWidth,c=nc(r-o,n-i),l=new Yc({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*ec(rc/6)+","+10*tc(rc/6)+" L0,0 L"+10*ec(rc/6)+",-"+10*tc(rc/6),stroke:s,lineWidth:u}});l.translate(i,o),l.rotateAtPoint(i,o,c),t.set(a?"startArrowShape":"endArrowShape",l)}function oc(t,e,n,r,i,o,a){var s=e.startArrow,u=e.endArrow,c=e.stroke,l=e.lineWidth,f=a?s:u,d=f.d,h=f.fill,p=f.stroke,g=f.lineWidth,v=(0,y.__rest)(f,["d","fill","stroke","lineWidth"]),m=nc(r-o,n-i);d&&(i-=ec(m)*d,o-=tc(m)*d);var b=new Yc({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:(0,y.__assign)((0,y.__assign)({},v),{stroke:p||c,lineWidth:g||l,fill:h})});b.translate(i,o),b.rotateAtPoint(i,o,m),t.set(a?"startArrowShape":"endArrowShape",b)}function ac(t,e,n,r,i){var o=nc(r-e,n-t);return{dx:ec(o)*i,dy:tc(o)*i}}function sc(t,e,n,r,i,o){"object"==typeof e.startArrow?oc(t,e,n,r,i,o,!0):e.startArrow?ic(t,e,n,r,i,o,!0):t.set("startArrowShape",null)}function uc(t,e,n,r,i,o){"object"==typeof e.endArrow?oc(t,e,n,r,i,o,!1):e.endArrow?ic(t,e,n,r,i,o,!1):t.set("startArrowShape",null)}var cc={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function lc(t,e){var n=e.attr();for(var r in n){var i=n[r],o=cc[r]?cc[r]:r;"matrix"===o&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&t.setLineDash?(0,b.isArray)(i)&&t.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=qu(t,e,i):"globalAlpha"===o&&(i*=t.globalAlpha),t[o]=i)}}function fc(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function dc(t,e,n){var r=t.get("refreshElements");(0,b.each)(r,(function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===t?gc(e,n):hc(e,n)}function hc(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&gc(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&hc(r.cfg.children,e);else{var i=vc(r,e);r.cfg.refresh=i,i&&r.isGroup()&&hc(r.cfg.children,e)}}}function pc(t){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&pc(n.cfg.children)}}function gc(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.refresh=!0,r.isGroup()&&gc(r.get("children"),e)}}function vc(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&Gu(n,e)}function mc(t,e,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var s=[0,0],u=[0,0],c={dx:0,dy:0};e.beginPath();for(var l=0;l<i.length;l++){var f=i[l],d=f[0];if(0===l&&o&&o.d)c=ac((h=t.getStartTangent())[0][0],h[0][1],h[1][0],h[1][1],o.d);else if(l===i.length-2&&"Z"===i[l+1][0]&&a&&a.d)"Z"===i[l+1][0]&&(c=ac((h=t.getEndTangent())[0][0],h[0][1],h[1][0],h[1][1],a.d));else if(l===i.length-1&&a&&a.d){var h;"Z"!==i[0]&&(c=ac((h=t.getEndTangent())[0][0],h[0][1],h[1][0],h[1][1],a.d))}var p=c.dx,g=c.dy;switch(d){case"M":e.moveTo(f[1]-p,f[2]-g),u=[f[1],f[2]];break;case"L":e.lineTo(f[1]-p,f[2]-g);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-p,f[4]-g);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-p,f[6]-g);break;case"A":var v=void 0;r?(v=r[l])||(v=Qu(s,f),r[l]=v):v=Qu(s,f);var m=v.cx,y=v.cy,b=v.rx,x=v.ry,w=v.startAngle,_=v.endAngle,E=v.xRotation,S=v.sweepFlag;if(e.ellipse)e.ellipse(m,y,b,x,E,w,_,1-S);else{var C=b>x?b:x,k=b>x?1:b/x,M=b>x?x/b:1;e.translate(m,y),e.rotate(E),e.scale(k,M),e.arc(0,0,C,w,_,1-S),e.scale(1/k,1/M),e.rotate(-E),e.translate(-m,-y)}break;case"Z":e.closePath()}if("Z"===d)s=u;else{var O=f.length;s=[f[O-2],f[O-1]]}}}}function yc(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}var bc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.onCanvasChange=function(t){yc(this,t)},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),lc(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];(0,b.each)(t,(function(t){var r=t.cfg.cacheCanvasBBox;r&&t.cfg.isInView&&(e.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(e.length){var i=(0,b.min)(e),o=(0,b.max)(e),a=(0,b.min)(n),s=(0,b.max)(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:s,width:o-i,height:s-a};var u=this.cfg.canvas;if(u){var c=u.getViewRange();this.set("isInView",Gu(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},e.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),lc(t,this),this._applyClip(t,this.getClip()),fc(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(jo),xc=bc,wc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return xc},e.prototype.onCanvasChange=function(t){yc(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=$o(t)(this),r=e/2,i=n.x-r,o=n.y-r,a=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:o,minY:o,width:n.width+e,height:n.height+e,maxX:a,maxY:s}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),lc(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!Gu(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),lc(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=Gu(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&((0,b.isNil)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.isStroke()&&n>0&&((0,b.isNil)(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Bo),_c=wc,Ec=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,u=o.r,c=i/2,l=zu(a,s,t,e);return r&&n?l<=u+c:r?l<=u:!!n&&l>=u-c&&l<=u+c},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}(_c),Sc=Ec;function Cc(t,e,n,r){return t/(n*n)+e/(r*r)}var kc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=i/2,s=o.x,u=o.y,c=o.rx,l=o.ry,f=(t-s)*(t-s),d=(e-u)*(e-u);return r&&n?Cc(f,d,c+a,l+a)<=1:r?Cc(f,d,c,l)<=1:!!n&&Cc(f,d,c-a,l-a)>=1&&Cc(f,d,c+a,l+a)<=1},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,u=i>o?o/i:1;t.save(),t.translate(n,r),t.scale(s,u),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(_c),Mc=kc;function Oc(t){return t instanceof HTMLElement&&(0,b.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var Tc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if((0,b.isString)(t)){var r=new Image;r.onload=function(){if(e.destroyed)return!1;e.attr("img",r),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},r.crossOrigin="Anonymous",r.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Oc(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.sx,s=e.sy,u=e.swidth,c=e.sheight,l=e.img;(l instanceof Image||Oc(l))&&((0,b.isNil)(a)||(0,b.isNil)(s)||(0,b.isNil)(u)||(0,b.isNil)(c)?t.drawImage(l,n,r,i,o):t.drawImage(l,a,s,u,c,n,r,i,o))},e}(_c),Ac=Tc;function Nc(t,e,n,r,i,o,a){var s=Math.min(t,n),u=Math.max(t,n),c=Math.min(e,r),l=Math.max(e,r),f=i/2;return o>=s-f&&o<=u+f&&a>=c-f&&a<=l+f&&Xo.pointToLine(t,e,n,r,o,a)<=i/2}var Ic=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&sc(this,t,r,i,e,n),a&&uc(this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var o=this.attr();return Nc(o.x1,o.y1,o.x2,o.y2,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,u={dx:0,dy:0},c={dx:0,dy:0};a&&a.d&&(u=ac(n,r,i,o,e.startArrow.d)),s&&s.d&&(c=ac(n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+u.dx,r+u.dy),t.lineTo(i-c.dx,o-c.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return Xo.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return Xo.pointAt(n,r,i,o,t)},e}(_c),Pc=Ic,Dc={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},Lc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,b.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",s=this._getR(r);if((0,b.isFunction)(a))n=Ta(n=(t=a)(i,o,s));else{if(!(t=e.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=t(i,o,s)}return n},e.prototype.createPath=function(t){mc(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=Dc,e}(_c),Rc=Lc;function jc(t,e,n){var r=va();return t.createPath(r),r.isPointInPath(e,n)}var Bc=1e-6;function Fc(t){return Math.abs(t)<Bc?0:t<0?-1:1}function zc(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function $c(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(zc(a,s,[e,n]))return!0;Fc(a[1]-n)>0!=Fc(s[1]-n)>0&&Fc(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function Gc(t,e,n,r,i,o,a,s){var u=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(u<r||u>i)return!1;var c={x:t+n*Math.cos(u),y:e+n*Math.sin(u)};return zu(c.x,c.y,a,s)<=o/2}var Vc=N,Uc=(0,y.__assign)({hasArc:function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var u=t[s],c=u.currentPoint,l=u.params,f=u.prePoint,d=u.box;if(!d||$u(d.x-a,d.y-a,d.width+e,d.height+e,n,r)){switch(u.command){case"L":case"Z":o=Nc(f[0],f[1],c[0],c[1],e,n,r);break;case"Q":o=na.pointDistance(f[0],f[1],l[1],l[2],l[3],l[4],n,r)<=e/2;break;case"C":o=ua.pointDistance(f[0],f[1],l[1],l[2],l[3],l[4],l[5],l[6],n,r,i)<=e/2;break;case"A":var h=u.arcParams,p=h.cx,g=h.cy,v=h.rx,m=h.ry,y=h.startAngle,b=h.endAngle,x=h.xRotation,w=[n,r,1],_=v>m?v:m,E=Vc(null,[["t",-p,-g],["r",-x],["s",1/(v>m?1:v/m),1/(v>m?m/v:1)]]);re.transformMat3(w,w,E),o=Gc(0,0,_,y,b,e,w[0],w[1])}if(o)break}}return o}},a);function Wc(t,e,n){for(var r=!1,i=0;i<t.length&&!(r=$c(t[i],e,n));i++);return r}var Hc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Ta(t);var e=Uc.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Ra(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t,e=this.attr(),n=e.startArrow,r=e.endArrow;n&&sc(this,e,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]),r&&uc(this,e,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var u=this.getTotalLength();s=Uc.isPointInStroke(o,i,t,e,u)}if(!s&&r)if(a)s=jc(this,t,e);else{var c=this.attr("path"),l=Uc.extractPolygons(c);s=Wc(l.polygons,t,e)||Wc(l.polylines,t,e)}return s},e.prototype.createPath=function(t){mc(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,b.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;(0,b.each)(r,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if((0,b.isNil)(o)||(0,b.isNil)(n))return null;var a=o.length,s=i[n+1];return ua.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Uc.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,r,i=0,o=0,a=[],s=this.get("curve");s&&((0,b.each)(s,(function(t,e){n=s[e+1],r=t.length,n&&(i+=ua.length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?((0,b.each)(s,(function(u,c){n=s[c+1],r=u.length,n&&((t=[])[0]=o/i,e=ua.length(u[r-2],u[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/i,a.push(t))})),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([r[0],r[1]]),t.push([i[0],i[1]]))}return t},e}(_c),Yc=Hc;function Xc(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++)if(Nc(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0;if(i){var s=t[0],u=t[o-1];if(Nc(s[0],s[1],u[0],u[1],e,n,r))return!0}return!1}var qc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr().points,a=!1;return n&&(a=Xc(o,i,t,e,!0)),!a&&r&&(a=$c(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];0===n?t.moveTo(r[0],r[1]):t.lineTo(r[0],r[1])}t.closePath()}},e}(_c),Zc=qc,Kc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,o=n.length,a=n[0][0],s=n[0][1],u=n[o-1][0],c=n[o-1][1];r&&sc(this,t,n[1][0],n[1][1],a,s),i&&uc(this,t,n[o-2][0],n[o-2][1],u,c)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!(!n||!i)&&Xc(this.attr().points,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,o=n.length;if(!(n.length<2)){var a,s=n[0][0],u=n[0][1],c=n[o-1][0],l=n[o-1][1];r&&r.d&&(s+=(a=ac(s,u,n[1][0],n[1][1],r.d)).dx,u+=a.dy),i&&i.d&&(c-=(a=ac(n[o-2][0],n[o-2][1],c,l,i.d)).dx,l-=a.dy),t.beginPath(),t.moveTo(s,u);for(var f=0;f<o-1;f++){var d=n[f];t.lineTo(d[0],d[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,b.isNil)(e)?(this.set("totalLength",da(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,b.each)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),Xo.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];(0,b.each)(t,(function(a,s){t[s+1]&&((n=[])[0]=i/e,r=Xo.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(_c),Jc=Kc,Qc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,u=o.width,c=o.height,l=o.radius;if(l){var f=!1;return n&&(f=function(t,e,n,r,i,o,a,s){return Nc(t+i,e,t+n-i,e,o,a,s)||Nc(t+n,e+i,t+n,e+r-i,o,a,s)||Nc(t+n-i,e+r,t+i,e+r,o,a,s)||Nc(t,e+r-i,t,e+i,o,a,s)||Gc(t+n-i,e+i,i,1.5*Math.PI,2*Math.PI,o,a,s)||Gc(t+n-i,e+r-i,i,0,.5*Math.PI,o,a,s)||Gc(t+i,e+r-i,i,.5*Math.PI,Math.PI,o,a,s)||Gc(t+i,e+i,i,Math.PI,1.5*Math.PI,o,a,s)}(a,s,u,c,l,i,t,e)),!f&&r&&(f=jc(this,t,e)),f}var d=i/2;return r&&n?$u(a-d,s-d,u+d,c+d,t,e):r?$u(a,s,u,c,t,e):n?function(t,e,n,r,i,o,a){var s=i/2;return $u(t-s,e-s,n,i,o,a)||$u(t+n-s,e-s,i,r,o,a)||$u(t+s,e+r-s,n,i,o,a)||$u(t-s,e+s,i,r,o,a)}(a,s,u,c,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(n,r,i,o);else{var s=function(t){var e=0,n=0,r=0,i=0;return(0,b.isArray)(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,[e,n,r,i]}(a),u=s[0],c=s[1],l=s[2],f=s[3];t.moveTo(n+u,r),t.lineTo(n+i-c,r),0!==c&&t.arc(n+i-c,r+c,c,-Math.PI/2,0),t.lineTo(n+i,r+o-l),0!==l&&t.arc(n+i-l,r+o-l,l,0,Math.PI/2),t.lineTo(n+f,r+o),0!==f&&t.arc(n+f,r+o-f,f,Math.PI/2,Math.PI),t.lineTo(n,r+u),0!==u&&t.arc(n+u,r+u,u,Math.PI,1.5*Math.PI),t.closePath()}},e}(_c),tl=Qc,el=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=ya(t)},e.prototype._setText=function(t){var e=null;(0,b.isString)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,s=i.y,u=1*i.fontSize,c=this._getSpaceingY(),l=ma(i.text,i.fontSize,i.lineHeight);(0,b.each)(e,(function(e,i){r=s+i*(c+u)-l+u,"middle"===o&&(r+=l-u-(l-u)/2),"top"===o&&(r+=l-u),(0,b.isNil)(e)||(n?t.fillText(e,a,r):t.strokeText(e,a,r))}))},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=n.text;(0,b.isNil)(a)||(e?t.fillText(a,r,i):t.strokeText(a,r,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&n>0&&((0,b.isNil)(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&((0,b.isNil)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(_c),nl=el;function rl(t,e,n){var r,i,o=t.getTotalMatrix();if(o){var a=(r=[e,n,1],(i=o)?br(xr(i),r):r);return[a[0],a[1]]}return[e,n]}function il(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!ir(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var r=rl(t,e,n),i=r[0],o=r[1];if(t.isClipped(i,o))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&n>=a.minY&&n<=a.maxY}function ol(t,e,n){if(!il(t,e,n))return null;for(var r=null,i=t.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=ol(a,e,n);else if(il(a,e,n)){var s=a,u=rl(a,e,n),c=u[0],l=u[1];s.isInShape(c,l)&&(r=a)}if(r)break}return r}var al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return xc},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*n,o>1&&r.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,n){return this.get("quickHit")?ol(this,e,n):t.prototype.getShape.call(this,e,n,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),n=this.getViewRange();return e.length&&e[0]===this?t=n:(t=function(t){if(!t.length)return null;var e=[],n=[],r=[],i=[];return(0,b.each)(t,(function(t){var o=function(t){var e,n,r;if(t.destroyed)e=t._cacheCanvasBBox;else{var i=t.get("cacheCanvasBBox"),o=i&&!(!i.width||!i.height),a=t.getCanvasBBox(),s=a&&!(!a.width||!a.height);o&&s?(r=a,e=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):o?e=i:s&&(e=a)}return e}(t);o&&(e.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))})),{minX:(0,b.min)(e),minY:(0,b.min)(n),maxX:(0,b.max)(r),maxY:(0,b.max)(i)}}(e),t&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(t,e){return t&&e&&Gu(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}(t,n)))),t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,b.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),lc(t,this),fc(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),lc(t,this),dc(this,n,r),fc(t,n,r),t.restore()):e.length&&pc(e),(0,b.each)(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(0,b.requestAnimationFrame)((function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)})),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Lo),sl=al,ul={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},cl={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function ll(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function fl(t){var e=ul[t.type],n=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var r=ll(e);if(t.get("id")&&(r.id=t.get("id")),t.set("el",r),t.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function dl(t,e){var n=t.get("el"),r=(0,b.toArray)(n.children).sort(e),i=document.createDocumentFragment();r.forEach((function(t){i.appendChild(t)})),n.appendChild(i)}function hl(t){var e=t.attr().matrix;if(e){for(var n=t.cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function pl(t,e){var n=t.getClip(),r=t.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){fl(n),n.createPath(e);var i=e.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function gl(t,e){e.forEach((function(e){e.draw(t)}))}function vl(t,e){var n=t.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=t.getParent(),o=i?i.getChildren():[n],a=t.get("el");if("remove"===e)if(t.get("isClipShape")){var s=a&&a.parentNode,u=s&&s.parentNode;s&&u&&u.removeChild(s)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===e)a.setAttribute("visibility","visible");else if("hide"===e)a.setAttribute("visibility","hidden");else if("zIndex"===e)!function(t,e){var n=t.parentNode,r=Array.from(n.childNodes).filter((function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()})),i=r[e],o=r.indexOf(t);if(i){if(o>e)n.insertBefore(t,i);else if(o<e){var a=r[e+1];a?n.insertBefore(t,a):n.appendChild(t)}}else n.appendChild(t)}(a,o.indexOf(t));else if("sort"===e){var c=t.get("children");c&&c.length&&dl(t,(function(t,e){return c.indexOf(t)-c.indexOf(e)?1:0}))}else"clear"===e?a&&(a.innerHTML=""):"matrix"===e?hl(t):"clip"===e?pl(t,r):"attr"===e||"add"===e&&t.draw(r)}}var ml=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=ll("g");this.set("el",t);var e=this.getParent();if(e){var n=e.get("el");n||(n=e.createDom(),e.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,e)}},e.prototype.onCanvasChange=function(t){vl(this,t)},e.prototype.getShapeBase=function(){return h},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),pl(this,t),this.createPath(t),e.length&&gl(t,e))},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,b.each)(e||n,(function(t,e){cl[e]&&r.setAttribute(cl[e],t)})),hl(this)},e}(jo),yl=ml,bl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,e)}},e.prototype.getShapeBase=function(){return h},e.prototype.getGroupBase=function(){return yl},e.prototype.onCanvasChange=function(t){vl(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var n=$o(this.get("type"));n&&(e=n(this))}if(e){var r=e.x,i=e.y,o=e.width,a=e.height,s=this.getHitLineWidth(),u=s/2,c=r-u,l=i-u;return{x:c,y:l,minX:c,minY:l,maxX:r+o+u,maxY:i+a+u,width:o+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},e.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||fl(this),pl(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},e.prototype.createPath=function(t,e){},e.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,u=n.strokeOpacity,c=n.lineWidth,l=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",r):"fillStyle"in n&&this._setColor(t,"fill",i):this._setColor(t,"fill",r||i),s&&l.setAttribute(cl.fillOpacity,s)),this.canStroke&&c>0&&(e?"stroke"in n?this._setColor(t,"stroke",o):"strokeStyle"in n&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",o||a),u&&l.setAttribute(cl.strokeOpacity,u),c&&l.setAttribute(cl.lineWidth,c))},e.prototype._setColor=function(t,e,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=t.find("gradient",n))||(i=t.addGradient(n)),r.setAttribute(cl[e],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=t.find("pattern",n))||(i=t.addPattern(n)),r.setAttribute(cl[e],"url(#"+i+")")}else r.setAttribute(cl[e],n);else r.setAttribute(cl[e],"none")},e.prototype.shadow=function(t,e){var n=this.attr(),r=e||n,i=r.shadowOffsetX,o=r.shadowOffsetY,a=r.shadowBlur,s=r.shadowColor;(i||o||a||s)&&function(t,e){var n=t.cfg.el,r=t.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=e.find("filter",i);o||(o=e.addShadow(i)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}(this,t)},e.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&hl(this)},e.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},e.prototype.isPointInPath=function(t,e){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=t+r.left,o=e+r.top,a=document.elementFromPoint(i,o);return!(!a||!a.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},e}(Bo),xl=bl,wl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,b.each)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):cl[e]&&r.setAttribute(cl[e],t)}))},e}(xl),_l=wl,El=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return(0,y.__extends)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");if((0,b.each)(e||n,(function(t,e){cl[e]&&r.setAttribute(cl[e],t)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var o=r.childNodes,a=o.length-1;a>=0;a--)r.removeChild(o[a]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},e}(xl),Sl=El,Cl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,b.each)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):cl[e]&&r.setAttribute(cl[e],t)}))},e}(xl),kl=Cl,Ml=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,b.each)(e||r,(function(t,e){"img"===e?n._setImage(r.img):cl[e]&&i.setAttribute(cl[e],t)}))},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),n=this.get("el");if((0,b.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)e.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,b.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+t.width),r.setAttribute("height",""+t.height),r.getContext("2d").putImageData(t,0,0),e.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",r.toDataURL())}},e}(xl),Ol=Ml,Tl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,b.each)(e||n,(function(e,i){if("startArrow"===i||"endArrow"===i)if(e){var o=(0,b.isObject)(e)?t.addArrow(n,cl[i]):t.getDefaultArrow(n,cl[i]);r.setAttribute(cl[i],"url(#"+o+")")}else r.removeAttribute(cl[i]);else cl[i]&&r.setAttribute(cl[i],e)}))},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return Xo.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return Xo.pointAt(n,r,i,o,t)},e}(xl),Al=Tl,Nl={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},Il={get:function(t){return Nl[t]},register:function(t,e){Nl[t]=e},remove:function(t){delete Nl[t]},getAll:function(){return Nl}},Pl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,b.isArray)(t)?t.map((function(t){return t.join(" ")})).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),n=e.x,r=e.y,i=e.r||e.radius,o=e.symbol||"circle";return(t=(0,b.isFunction)(o)?o:Il.get(o))?t(n,r,i):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=Il,e}(xl),Dl=Pl,Ll=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,b.each)(e||r,(function(e,o){if("path"===o&&(0,b.isArray)(e))i.setAttribute("d",n._formatPath(e));else if("startArrow"===o||"endArrow"===o)if(e){var a=(0,b.isObject)(e)?t.addArrow(r,cl[o]):t.getDefaultArrow(r,cl[o]);i.setAttribute(cl[o],"url(#"+a+")")}else i.removeAttribute(cl[o]);else cl[o]&&i.setAttribute(cl[o],e)}))},e.prototype._formatPath=function(t){var e=t.map((function(t){return t.join(" ")})).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=e?e.getPointAtLength(t*n):null;return r?{x:r.x,y:r.y}:null},e}(xl),Rl=Ll,jl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,b.each)(e||n,(function(t,e){"points"===e&&(0,b.isArray)(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):cl[e]&&r.setAttribute(cl[e],t)}))},e}(xl),Bl=jl,Fl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,b.each)(e||n,(function(t,e){"points"===e&&(0,b.isArray)(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):cl[e]&&r.setAttribute(cl[e],t)}))},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,b.isNil)(e)?(this.set("totalLength",da(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,b.each)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),Xo.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];(0,b.each)(t,(function(a,s){t[s+1]&&((n=[])[0]=i/e,r=Xo.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(xl),zl=Fl,$l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el"),o=!1,a=["x","y","width","height","radius"];(0,b.each)(e||r,(function(t,e){-1===a.indexOf(e)||o?-1===a.indexOf(e)&&cl[e]&&i.setAttribute(cl[e],t):(i.setAttribute("d",n._assembleRect(r)),o=!0)}))},e.prototype._assembleRect=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.radius;if(!o)return"M "+e+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var a=function(t){var e=0,n=0,r=0,i=0;return(0,b.isArray)(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}}(o);return(0,b.isArray)(o)?1===o.length?a.r1=a.r2=a.r3=a.r4=o[0]:2===o.length?(a.r1=a.r3=o[0],a.r2=a.r4=o[1]):3===o.length?(a.r1=o[0],a.r2=a.r4=o[1],a.r3=o[2]):(a.r1=o[0],a.r2=o[1],a.r3=o[2],a.r4=o[3]):a.r1=a.r2=a.r3=a.r4=o,[["M "+(e+a.r1)+","+n],["l "+(r-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(i-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-r)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-i)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]].join(" ")},e}(xl),Gl=$l,Vl={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Ul={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},Wl={left:"left",start:"left",center:"middle",right:"end",end:"end"},Hl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");this._setFont(),(0,b.each)(e||r,(function(t,e){"text"===e?n._setText(""+t):"matrix"===e&&t?hl(n):cl[e]&&i.setAttribute(cl[e],t)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,r=e.textAlign,i=vr();i&&"firefox"===i.name?t.setAttribute("dominant-baseline",Ul[n]||"alphabetic"):t.setAttribute("alignment-baseline",Vl[n]||"baseline"),t.setAttribute("text-anchor",Wl[r]||"left")},e.prototype._setText=function(t){var e=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,o=void 0===i?"bottom":i;if(t)if(~t.indexOf("\n")){var a=t.split("\n"),s=a.length-1,u="";(0,b.each)(a,(function(t,e){0===e?"alphabetic"===o?u+='<tspan x="'+r+'" dy="'+-s+'em">'+t+"</tspan>":"top"===o?u+='<tspan x="'+r+'" dy="0.9em">'+t+"</tspan>":"middle"===o?u+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+t+"</tspan>":"bottom"===o?u+='<tspan x="'+r+'" dy="-'+(s+.3)+'em">'+t+"</tspan>":"hanging"===o&&(u+='<tspan x="'+r+'" dy="'+(-(s-1)-.3)+'em">'+t+"</tspan>"):u+='<tspan x="'+r+'" dy="1em">'+t+"</tspan>"})),e.innerHTML=u}else e.innerHTML=t;else e.innerHTML=""},e}(xl),Yl=Hl,Xl=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ql=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Zl=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Kl(t){var e=t.match(Zl);if(!e)return"";var n="";return e.sort((function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])})),(0,b.each)(e,(function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'})),n}var Jl=function(){function t(t){this.cfg={};var e=null,n=(0,b.uniqueId)("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var n,r,i=Xl.exec(t),o=(0,b.mod)((0,b.toRadian)(parseFloat(i[1])),2*Math.PI),a=i[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(o),u=s*s,c=(r.x-n.x+s*(r.y-n.y))/(u+1)+n.x,l=s*(r.x-n.x+s*(r.y-n.y))/(u+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",c),e.setAttribute("y2",l),e.innerHTML=Kl(a)}(t,e=ll("linearGradient")):function(t,e){var n=ql.exec(t),r=parseFloat(n[1]),i=parseFloat(n[2]),o=parseFloat(n[3]),a=n[4];e.setAttribute("cx",r),e.setAttribute("cy",i),e.setAttribute("r",o),e.innerHTML=Kl(a)}(t,e=ll("radialGradient")),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),Ql=Jl,tf={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},ef={x:"-40%",y:"-40%",width:"200%",height:"200%"},nf=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=ll("filter");return(0,b.each)(ef,(function(t,n){e.setAttribute(n,t)})),this.el=e,this.id=(0,b.uniqueId)("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var n=!0,r=this.cfg;return(0,b.each)(Object.keys(r),(function(t){if(r[t]!==e[t])return n=!1,!1})),n},t.prototype.update=function(t,e){var n=this.cfg;return n[tf[t]]=e,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(t,e){var n='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}(),rf=nf,of=function(){function t(t,e){this.cfg={};var n=ll("marker"),r=(0,b.uniqueId)("marker_");n.setAttribute("id",r);var i=ll("path");i.setAttribute("stroke",t.stroke||"none"),i.setAttribute("fill",t.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var o=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===o?this._setDefaultPath(e,i):(this.cfg=o,this._setMarker(t.lineWidth,i)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var n=this.el,r=this.cfg.path,i=this.cfg.d;(0,b.isArray)(r)&&(r=r.map((function(t){return t.join(" ")})).join("")),e.setAttribute("d",r),n.appendChild(e),i&&n.setAttribute("refX",""+i/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}(),af=of,sf=function(){function t(t){this.type="clip",this.cfg={};var e=ll("clipPath");this.el=e,this.id=(0,b.uniqueId)("clip_"),e.id=this.id;var n=t.cfg.el;return e.appendChild(n),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}(),uf=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,cf=function(){function t(t){this.cfg={};var e=ll("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=ll("image");e.appendChild(n);var r=(0,b.uniqueId)("pattern_");e.id=r,this.el=e,this.id=r,this.cfg=t;var i=uf.exec(t)[2];n.setAttribute("href",i);var o=new Image;function a(){e.setAttribute("width",""+o.width),e.setAttribute("height",""+o.height)}return i.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=i,o.complete?a():(o.onload=a,o.src=o.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),lf=function(){function t(t){var e=ll("defs"),n=(0,b.uniqueId)("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},t.prototype.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new af(t,e);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addGradient=function(t){var e=new Ql(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var n=new af(t,e);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(t){var e=new rf(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new cf(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new sf(t);return this.el.appendChild(e.el),this.add(e),e.id},t}(),ff=lf,df=function(t){function e(e){return t.call(this,(0,y.__assign)((0,y.__assign)({},e),{autoDraw:!0,renderer:"svg"}))||this}return(0,y.__extends)(e,t),e.prototype.getShapeBase=function(){return h},e.prototype.getGroupBase=function(){return yl},e.prototype.getShape=function(t,e,n){var r=n.target||n.srcElement;if(!ul[r.tagName]){for(var i=r.parentNode;i&&!ul[i.tagName];)i=i.parentNode;r=i}return this.find((function(t){return t.get("el")===r}))},e.prototype.createDom=function(){var t=ll("svg"),e=new ff(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},e.prototype.onCanvasChange=function(t){var e=this.get("context"),n=this.get("el");if("sort"===t){var r=this.get("children");r&&r.length&&dl(this,(function(t,e){return r.indexOf(t)-r.indexOf(e)?1:0}))}else if("clear"===t){if(n){n.innerHTML="";var i=e.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===t?hl(this):"clip"===t?pl(this,e):"changeSize"===t&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();pl(this,t),e.length&&gl(t,e)},e}(Lo),hf=df,pf=n(6767),gf=n.n(pf);function vf(t){return vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(t)}var mf=/^\s+/,yf=/\s+$/;function bf(t,e){if(e=e||{},(t=t||"")instanceof bf)return t;if(!(this instanceof bf))return new bf(t,e);var n=function(t){var e,n,r,i={r:0,g:0,b:0},o=1,a=null,s=null,u=null,c=!1,l=!1;return"string"==typeof t&&(t=function(t){t=t.replace(mf,"").replace(yf,"").toLowerCase();var e,n=!1;if(Rf[t])t=Rf[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=qf.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=qf.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=qf.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=qf.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=qf.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=qf.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=qf.hex8.exec(t))?{r:$f(e[1]),g:$f(e[2]),b:$f(e[3]),a:Wf(e[4]),format:n?"name":"hex8"}:(e=qf.hex6.exec(t))?{r:$f(e[1]),g:$f(e[2]),b:$f(e[3]),format:n?"name":"hex"}:(e=qf.hex4.exec(t))?{r:$f(e[1]+""+e[1]),g:$f(e[2]+""+e[2]),b:$f(e[3]+""+e[3]),a:Wf(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=qf.hex3.exec(t))&&{r:$f(e[1]+""+e[1]),g:$f(e[2]+""+e[2]),b:$f(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==vf(t)&&(Zf(t.r)&&Zf(t.g)&&Zf(t.b)?(e=t.r,n=t.g,r=t.b,i={r:255*Ff(e,255),g:255*Ff(n,255),b:255*Ff(r,255)},c=!0,l="%"===String(t.r).substr(-1)?"prgb":"rgb"):Zf(t.h)&&Zf(t.s)&&Zf(t.v)?(a=Vf(t.s),s=Vf(t.v),i=function(t,e,n){t=6*Ff(t,360),e=Ff(e,100),n=Ff(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=r%6;return{r:255*[n,a,o,o,s,n][u],g:255*[s,n,n,a,o,o][u],b:255*[o,o,s,n,n,a][u]}}(t.h,a,s),c=!0,l="hsv"):Zf(t.h)&&Zf(t.s)&&Zf(t.l)&&(a=Vf(t.s),u=Vf(t.l),i=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=Ff(t,360),e=Ff(e,100),n=Ff(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=a(u,s,t+1/3),i=a(u,s,t),o=a(u,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,a,u),c=!0,l="hsl"),t.hasOwnProperty("a")&&(o=t.a)),o=Bf(o),{ok:c,format:t.format||l,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:o}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function xf(t,e,n){t=Ff(t,255),e=Ff(e,255),n=Ff(n,255);var r,i,o=Math.max(t,e,n),a=Math.min(t,e,n),s=(o+a)/2;if(o==a)r=i=0;else{var u=o-a;switch(i=s>.5?u/(2-o-a):u/(o+a),o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:s}}function wf(t,e,n){t=Ff(t,255),e=Ff(e,255),n=Ff(n,255);var r,i,o=Math.max(t,e,n),a=Math.min(t,e,n),s=o,u=o-a;if(i=0===o?0:u/o,o==a)r=0;else{switch(o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:s}}function _f(t,e,n,r){var i=[Gf(Math.round(t).toString(16)),Gf(Math.round(e).toString(16)),Gf(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Ef(t,e,n,r){return[Gf(Uf(r)),Gf(Math.round(t).toString(16)),Gf(Math.round(e).toString(16)),Gf(Math.round(n).toString(16))].join("")}function Sf(t,e){e=0===e?0:e||10;var n=bf(t).toHsl();return n.s-=e/100,n.s=zf(n.s),bf(n)}function Cf(t,e){e=0===e?0:e||10;var n=bf(t).toHsl();return n.s+=e/100,n.s=zf(n.s),bf(n)}function kf(t){return bf(t).desaturate(100)}function Mf(t,e){e=0===e?0:e||10;var n=bf(t).toHsl();return n.l+=e/100,n.l=zf(n.l),bf(n)}function Of(t,e){e=0===e?0:e||10;var n=bf(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),bf(n)}function Tf(t,e){e=0===e?0:e||10;var n=bf(t).toHsl();return n.l-=e/100,n.l=zf(n.l),bf(n)}function Af(t,e){var n=bf(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,bf(n)}function Nf(t){var e=bf(t).toHsl();return e.h=(e.h+180)%360,bf(e)}function If(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=bf(t).toHsl(),r=[bf(t)],i=360/e,o=1;o<e;o++)r.push(bf({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function Pf(t){var e=bf(t).toHsl(),n=e.h;return[bf(t),bf({h:(n+72)%360,s:e.s,l:e.l}),bf({h:(n+216)%360,s:e.s,l:e.l})]}function Df(t,e,n){e=e||6,n=n||30;var r=bf(t).toHsl(),i=360/n,o=[bf(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(bf(r));return o}function Lf(t,e){e=e||6;for(var n=bf(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(bf({h:r,s:i,v:o})),o=(o+s)%1;return a}bf.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=Bf(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=wf(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=wf(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=xf(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=xf(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return _f(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[Gf(Math.round(t).toString(16)),Gf(Math.round(e).toString(16)),Gf(Math.round(n).toString(16)),Gf(Uf(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Ff(this._r,255))+"%",g:Math.round(100*Ff(this._g,255))+"%",b:Math.round(100*Ff(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Ff(this._r,255))+"%, "+Math.round(100*Ff(this._g,255))+"%, "+Math.round(100*Ff(this._b,255))+"%)":"rgba("+Math.round(100*Ff(this._r,255))+"%, "+Math.round(100*Ff(this._g,255))+"%, "+Math.round(100*Ff(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(jf[_f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+Ef(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=bf(t);n="#"+Ef(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return bf(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Mf,arguments)},brighten:function(){return this._applyModification(Of,arguments)},darken:function(){return this._applyModification(Tf,arguments)},desaturate:function(){return this._applyModification(Sf,arguments)},saturate:function(){return this._applyModification(Cf,arguments)},greyscale:function(){return this._applyModification(kf,arguments)},spin:function(){return this._applyModification(Af,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(Df,arguments)},complement:function(){return this._applyCombination(Nf,arguments)},monochromatic:function(){return this._applyCombination(Lf,arguments)},splitcomplement:function(){return this._applyCombination(Pf,arguments)},triad:function(){return this._applyCombination(If,[3])},tetrad:function(){return this._applyCombination(If,[4])}},bf.fromRatio=function(t,e){if("object"==vf(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:Vf(t[r]));t=n}return bf(t,e)},bf.equals=function(t,e){return!(!t||!e)&&bf(t).toRgbString()==bf(e).toRgbString()},bf.random=function(){return bf.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},bf.mix=function(t,e,n){n=0===n?0:n||50;var r=bf(t).toRgb(),i=bf(e).toRgb(),o=n/100;return bf({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},bf.readability=function(t,e){var n=bf(t),r=bf(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},bf.isReadable=function(t,e,n){var r,i,o,a,s,u=bf.readability(t,e);switch(i=!1,(o=n,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(s=(o.size||"small").toLowerCase())&&"large"!==s&&(s="small"),r={level:a,size:s}).level+r.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},bf.mostReadable=function(t,e,n){var r,i,o,a,s=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<e.length;c++)(r=bf.readability(t,e[c]))>u&&(u=r,s=bf(e[c]));return bf.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,bf.mostReadable(t,["#fff","#000"],n))};var Rf=bf.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},jf=bf.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(Rf);function Bf(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Ff(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function zf(t){return Math.min(1,Math.max(0,t))}function $f(t){return parseInt(t,16)}function Gf(t){return 1==t.length?"0"+t:""+t}function Vf(t){return t<=1&&(t=100*t+"%"),t}function Uf(t){return Math.round(255*parseFloat(t)).toString(16)}function Wf(t){return $f(t)/255}var Hf,Yf,Xf,qf=(Yf="[\\s|\\(]+("+(Hf="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Hf+")[,|\\s]+("+Hf+")\\s*\\)?",Xf="[\\s|\\(]+("+Hf+")[,|\\s]+("+Hf+")[,|\\s]+("+Hf+")[,|\\s]+("+Hf+")\\s*\\)?",{CSS_UNIT:new RegExp(Hf),rgb:new RegExp("rgb"+Yf),rgba:new RegExp("rgba"+Xf),hsl:new RegExp("hsl"+Yf),hsla:new RegExp("hsla"+Xf),hsv:new RegExp("hsv"+Yf),hsva:new RegExp("hsva"+Xf),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Zf(t){return!!qf.CSS_UNIT.exec(t)}var Kf=2,Jf=.16,Qf=.05,td=.05,ed=.15,nd=5,rd=4,id=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function od(t,e,n){var r;return(r=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-Kf*e:Math.round(t.h)+Kf*e:n?Math.round(t.h)+Kf*e:Math.round(t.h)-Kf*e)<0?r+=360:r>=360&&(r-=360),r}function ad(t,e,n){return 0===t.h&&0===t.s?t.s:((r=n?t.s-Jf*e:e===rd?t.s+Jf:t.s+Qf*e)>1&&(r=1),n&&e===nd&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function sd(t,e,n){var r;return(r=n?t.v+td*e:t.v-ed*e)>1&&(r=1),Number(r.toFixed(2))}function ud(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=bf(t),i=nd;i>0;i-=1){var o=r.toHsv(),a=bf({h:od(o,i,!0),s:ad(o,i,!0),v:sd(o,i,!0)}).toHexString();n.push(a)}n.push(r.toHexString());for(var s=1;s<=rd;s+=1){var u=r.toHsv(),c=bf({h:od(u,s),s:ad(u,s),v:sd(u,s)}).toHexString();n.push(c)}return"dark"===e.theme?id.map((function(t){var r=t.index,i=t.opacity;return bf.mix(e.backgroundColor||"#141414",n[r],100*i).toHexString()})):n}var cd={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ld={},fd={};Object.keys(cd).forEach((function(t){ld[t]=ud(cd[t]),ld[t].primary=ld[t][5],fd[t]=ud(cd[t],{theme:"dark",backgroundColor:"#141414"}),fd[t].primary=fd[t][5]})),ld.red,ld.volcano,ld.gold,ld.orange,ld.yellow,ld.lime,ld.green,ld.cyan,ld.blue,ld.geekblue,ld.purple,ld.magenta,ld.grey;var dd=function(t,e,n){var r=gf()(t),i=gf()(e);return gf()([(1-n)*r.red()+n*i.red(),(1-n)*r.green()+n*i.green(),(1-n)*r.blue()+n*i.blue()]).rgb()},hd=function(t,e,n,r){return void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)"),"default"===n?function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="rgb(150, 150, 150)");var r=dd(e,t,.05).rgb().toString(),i=dd(e,t,.1).rgb().toString(),o=dd(e,t,.2).rgb().toString(),a=dd(e,t,.4).rgb().toString(),s=dd(e,n,.02).rgb().toString(),u=dd(e,n,.05).rgb().toString(),c=dd(e,n,.1).rgb().toString(),l=dd(e,n,.2).rgb().toString(),f=dd(e,n,.3).rgb().toString(),d=ud(t,{theme:"default",backgroundColor:e}),h=gf()(t).hex().toLowerCase(),p=d.indexOf(h),g=t;return-1!==p&&(g=d[p+1]),{mainStroke:t,mainFill:i,activeStroke:t,activeFill:r,inactiveStroke:a,inactiveFill:r,selectedStroke:t,selectedFill:e,highlightStroke:g,highlightFill:o,disableStroke:f,disableFill:u,edgeMainStroke:f,edgeActiveStroke:t,edgeInactiveStroke:l,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:c,comboMainStroke:f,comboMainFill:s,comboActiveStroke:t,comboActiveFill:r,comboInactiveStroke:f,comboInactiveFill:s,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:s,comboDisableStroke:l,comboDisableFill:u}}(t,e,"rgb(150, 150, 150)"):function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="#777");var r=dd(e,t,.2).rgb().toString(),i=dd(e,t,.3).rgb().toString(),o=dd(e,t,.6).rgb().toString(),a=dd(e,t,.8).rgb().toString(),s=dd(e,n,.2).rgb().toString(),u=dd(e,n,.25).rgb().toString(),c=dd(e,n,.3).rgb().toString(),l=dd(e,n,.4).rgb().toString(),f=dd(e,n,.5).rgb().toString(),d=ud(t,{theme:"dark",backgroundColor:e}),h=gf()(t).hex().toLowerCase(),p=d.indexOf(h),g=t;return-1!==p&&(g=d[p+1]),{mainStroke:a,mainFill:r,activeStroke:t,activeFill:i,inactiveStroke:a,inactiveFill:r,selectedStroke:t,selectedFill:r,highlightStroke:t,highlightFill:o,disableStroke:f,disableFill:u,edgeMainStroke:n,edgeActiveStroke:t,edgeInactiveStroke:n,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:u,comboActiveStroke:t,comboActiveFill:s,comboInactiveStroke:l,comboInactiveFill:u,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:s}}(t,e,"#777")},pd=function(t,e,n,r){void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)");var i=[];return t.forEach((function(t){i.push(hd(t,e,n,r))})),i},gd="rgb(0, 0, 0)",vd=hd("rgb(95, 149, 255)","rgb(255, 255, 255)"),md={version:"0.8.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:vd.mainStroke,fill:vd.mainFill},size:20,color:vd.mainStroke,linkPoints:{size:8,lineWidth:1,fill:vd.activeFill,stroke:vd.activeStroke}},nodeStateStyles:{active:{fill:vd.activeFill,stroke:vd.activeStroke,lineWidth:2,shadowColor:vd.mainStroke,shadowBlur:10},selected:{fill:vd.selectedFill,stroke:vd.selectedStroke,lineWidth:4,shadowColor:vd.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:vd.highlightFill,stroke:vd.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:vd.inactiveFill,stroke:vd.inactiveStroke,lineWidth:1},disable:{fill:vd.disableFill,stroke:vd.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:gd,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:vd.edgeMainStroke,lineAppendWidth:2},color:vd.edgeMainStroke},edgeStateStyles:{active:{stroke:vd.edgeActiveStroke,lineWidth:1},selected:{stroke:vd.edgeSelectedStroke,lineWidth:2,shadowColor:vd.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:vd.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:vd.edgeInactiveStroke,lineWidth:1},disable:{stroke:vd.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:gd,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:vd.comboMainFill,lineWidth:1,stroke:vd.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:vd.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:vd.comboActiveStroke,lineWidth:1,fill:vd.comboActiveFill},selected:{stroke:vd.comboSelectedStroke,lineWidth:2,fill:vd.comboSelectedFill,shadowColor:vd.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:vd.comboHighlightStroke,lineWidth:2,fill:vd.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:vd.comboInactiveStroke,fill:vd.comboInactiveFill,lineWidth:1},disable:{stroke:vd.comboDisableStroke,fill:vd.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function yd(t,e,n){if(t){if("function"==typeof t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if("function"==typeof t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}var bd=Au.cloneEvent,xd=Au.isViewportChanged,wd=function(t){function e(e){var n=t.call(this,e)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=e,n.destroyed=!1,n.initEvents(),n}return(0,y.__extends)(e,t),e.prototype.initEvents=function(){var t=this.graph,e=this.extendEvents,n=void 0===e?[]:e,r=t.get("canvas"),i=r.get("el"),o=(0,b.wrapBehavior)(this,"onCanvasEvents"),a=(0,b.wrapBehavior)(this,"onExtendEvents"),s=(0,b.wrapBehavior)(this,"onWheelEvent");r.off("*").on("*",o),this.canvasHandler=o,n.push(yd(i,"wheel",s)),"undefined"!=typeof window&&(n.push(yd(window,"keydown",a)),n.push(yd(window,"keyup",a)),n.push(yd(window,"focus",a))),this.resetHandler&&t.off("afterchangedata",this.resetHandler),this.resetHandler=(0,b.wrapBehavior)(this,"resetStatus"),t.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var n=this,r=this.graph,i=r.get("canvas"),o=t.target,a=t.type;switch(a){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout((function(){return n.mousedown=!1}));break;case"click":if(!this.mousedown)return}t.canvasX=t.x,t.canvasY=t.y;var s={x:t.canvasX,y:t.canvasY},u=r.get("group").getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),xd(u)&&(s=r.getPointByClient(t.clientX,t.clientY)),t.x=s.x,t.y=s.y,t.currentTarget=r,o===i)return"mousemove"!==a&&"mouseleave"!==a||this.handleMouseMove(t,"canvas"),t.target=i,t.item=null,r.emit(a,t),void r.emit("canvas:".concat(a),t);var c=e.getItemRoot(o);if(c){var l=c.get("item");if(!l.destroyed){var f=l.getType();if(t.target=o,t.item=l,t.canvasX===t.x&&t.canvasY===t.y){var d=r.getCanvasByPoint(t.x,t.y);t.canvasX=d.x,t.canvasY=d.y}t.name&&!t.name.includes(":")?(r.emit("".concat(f,":").concat(a),t),r.emit(a,t)):t.name&&r.emit(t.name,t),"dragstart"===a&&(this.dragging=!0),"dragend"===a&&(this.dragging=!1),"mousemove"===a&&this.handleMouseMove(t,f)}}else r.emit(a,t)},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,b.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,e){var n=this.graph,r=this.preItem,i=n.get("canvas"),o=t.target===i?null:t.item;t=bd(t),r&&r!==o&&!r.destroyed&&(t.item=r,this.emitCustomEvent(r.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(r.getType(),"dragleave",t)),o&&r!==o&&(t.item=o,this.emitCustomEvent(e,"mouseenter",t),this.dragging&&this.emitCustomEvent(e,"dragenter",t)),this.preItem=o},e.prototype.emitCustomEvent=function(t,e,n){n.type=e,this.graph.emit("".concat(t,":").concat(e),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,e=t.graph,n=t.canvasHandler,r=t.extendEvents;e.get("canvas").off("*",n),(0,b.each)(r,(function(t){t.remove()})),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(Pu),_d=wd,Ed=n(3360),Sd=n(1746),Cd=n.n(Sd),kd=Au.traverseTree,Md=function(t,e){return t?(0,b.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},Od=function(t,e){var n=[],r=[],i={},o=0;for(o=0;o<t.length;o++){var a=t[o];i[a.id]=o,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(o=0;o<e.length;o++){var s=e[o];r[i[s.source]].push(i[s.target]),r[i[s.target]].push(i[s.source])}var u=0;for(o=0;o<t.length;o++){var c=n.length,l=r[o],f=l.length;n[4*o+2]=c,n[4*o+3]=l.length,u=Math.max(u,l.length);for(var d=0;d<f;++d){var h=l[d];n.push(+h)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},Td=function(t,e,n){var r=[],i=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),i.push([])}for(a=0;a<e.length;a++){var u=e[a];i[o[u.source]].push(o[u.target]),i[o[u.source]].push(n(u)),i[o[u.target]].push(o[u.source]),i[o[u.target]].push(n(u))}var c=0;for(a=0;a<t.length;a++){var l=r.length,f=i[a],d=f.length;r[4*a+2]=l,r[4*a+3]=d/2,c=Math.max(c,d/2);for(var h=0;h<d;++h){var p=f[h];r.push(+p)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:c}},Ad=function(t,e,n,r){var i=[],o=[],a={},s=0;for(s=0;s<t.length;s++){var u=t[s];a[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),o.push([])}for(s=0;s<e.length;s++){var c=e[s];o[a[c.source]].push(a[c.target]),o[a[c.source]].push(n(c)),o[a[c.source]].push(r(c)),o[a[c.source]].push(0),o[a[c.target]].push(a[c.source]),o[a[c.target]].push(n(c)),o[a[c.target]].push(r(c)),o[a[c.target]].push(0)}var l=0;for(s=0;s<t.length;s++){var f=i.length,d=o[s],h=d.length;i[4*s+2]=f+1048576*h/4,i[4*s+3]=0,l=Math.max(l,h/4);for(var p=0;p<h;++p){var g=d[p];i.push(+g)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:l}},Nd=function(t,e){var n=[],r=t.length,i={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}},Id=function(t){for(var e=[],n=t.length,r=t[0].length,i=function(r){t.forEach((function(t,i){if(e.push(t[r]),i===n-1)for(;e.length%4!=0;)e.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(e)},Pd=function(t,e){var n={x:1/0,y:1/0},r={x:-1/0,y:-1/0},i="x",o="y";e&&["V","TB","BT"].indexOf(e)>=0&&(o="x",i="y");var a=0;kd(t,(function(t){return a++,t.x>r.x&&(r.x=t.x),t.x<n.x&&(n.x=t.x),t.y>r.y&&(r.y=t.y),t.y<n.y&&(n.y=t.y),!0}));var s=2*Math.PI/a,u=r[o]-n[o];return 0===u||kd(t,(function(e){var r=(e[o]-n[o])/u*(2*Math.PI-s)+s,a=Math.abs("x"===i?e.x-t.x:e.y-t.y);return e.x=a*Math.cos(r),e.y=a*Math.sin(r),!0})),t},Dd=function t(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(e){var n=void 0!==(e=e||{}).parent?e.parent:document.body,r=void 0!==e.id?e.id:"oldie",i=t().getWebGLErrorMessage();i.id=r,n.appendChild(i)}}},Ld=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},Au),p),g),v),Rd=Ld.radialLayout,jd=function(){function t(t){this.type=t.type,this.radial=t.radial,this.config=t}return t.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(t){var n=Cd()[e.type](t,e.config);return Rd(n),n}:this.layoutMethod=function(t){return Cd()[e.type](t,e.config)}},t.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},t.prototype.layout=function(t){return this.init(t),this.execute()},t}();(0,Ed.registerLayout)("grid",Ed.GridLayout),(0,Ed.registerLayout)("random",Ed.RandomLayout),(0,Ed.registerLayout)("force",Ed.ForceLayout),(0,Ed.registerLayout)("circular",Ed.CircularLayout),(0,Ed.registerLayout)("dagre",Ed.DagreLayout),(0,Ed.registerLayout)("dagreCompound",Ed.DagreCompoundLayout),(0,Ed.registerLayout)("radial",Ed.RadialLayout),(0,Ed.registerLayout)("concentric",Ed.ConcentricLayout),(0,Ed.registerLayout)("mds",Ed.MDSLayout),(0,Ed.registerLayout)("fruchterman",Ed.FruchtermanLayout),(0,Ed.registerLayout)("fruchterman-gpu",Ed.FruchtermanGPULayout),(0,Ed.registerLayout)("gForce",Ed.GForceLayout),(0,Ed.registerLayout)("force2",Ed.Force2Layout),(0,Ed.registerLayout)("gForce-gpu",Ed.GForceGPULayout),(0,Ed.registerLayout)("comboForce",Ed.ComboForceLayout),(0,Ed.registerLayout)("comboCombined",Ed.ComboCombinedLayout),(0,Ed.registerLayout)("forceAtlas2",Ed.ForceAtlas2Layout);var Bd=function(t,e){e.isCustomLayout=!0,Ed.Layouts[t]=(0,Ed.registerLayout)(t,e)},Fd=function(t,e){var n=t.toString(),r=new Blob(["importScripts('".concat(e,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))};function zd(t){return zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(t)}var $d,Gd,Vd,Ud,Wd=function(t){return setTimeout(t,16)},Hd=function(t){return clearTimeout(t)},Yd=function(t){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||Wd)(t)},Xd=function(t){return("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Hd)(t)},qd=["fruchterman","gForce"],Zd=["force","grid","circular"],Kd=function(t){function e(e){var n=t.call(this,e)||this;return n.graph=e,n.layoutCfg=e.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return(0,y.__extends)(e,t),e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=function(t){void 0===t&&(t="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");var e=new Fd((function(){var t="LAYOUT_RUN",e="LAYOUT_END",n="LAYOUT_ERROR",r="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(i){(function(e){var n=e.data.type;return n===t||n===r})(i)&&function(i){var o=this;switch(i.data.type){case t:var a,s=i.data,u=s.nodes,c=s.edges,l=s.layoutCfg,f=(v=void 0===l?{}:l).type;if(!(d=layout.getLayoutByName(f))){this.postMessage({type:n,message:"layout ".concat(f," not found")});break}v.onLayoutEnd=function(){o.postMessage({type:e,nodes:u}),null==a||a.destroy()},(a=new d(v)).init({nodes:u,edges:c}),a.execute();break;case r:var d,h=i.data,p=h.nodes,g=(c=h.edges,h.layoutCfg),v=void 0===g?{}:g,m=h.canvas;if(f=v.type,!(d=layout.getLayoutByName(f))){this.postMessage({type:n,message:"layout ".concat(f," not found")});break}if("gpu"!==f.split("-")[1]){this.postMessage({type:n,message:"layout ".concat(f," does not support GPU")});break}var y=new d(v);y.init({nodes:p,edges:c}),y.executeWithWorker(m,this)}}(i)}}),t);return e}(this.layoutCfg.workerScriptURL)),this.worker},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(Xd(t.requestId),t.requestId=null),t.requestId2&&(Xd(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return(0,y.__awaiter)(n,void 0,void 0,(function(){var n,o,a,s,u,c,l,f,d;return(0,y.__generator)(this,(function(h){switch(h.label){case 0:if(!(n=this.graph)||n.get("destroyed"))return[2];o=t.type,t.onLayoutEnd=function(){n.emit("aftersublayout",{type:o}),r()},o&&this.isGPU&&(this.hasGPUVersion(o)?o="".concat(o,"-gpu"):console.warn("The '".concat(o,"' layout does not support GPU calculation for now, it will run in CPU."))),Au.isForce(o)?(a=t.onTick,s=t.animate,u=void 0===s&&("force"===o||"force2"===o),f=function(){a&&a(),(s||u)&&n.refreshPositions()},t.tick=f):"comboForce"!==o&&"comboCombined"!==o||(t.comboTrees=n.get("comboTrees"));try{c=new Ed.Layouts[o](t),this.layoutMethods[e]&&this.layoutMethods[e].destroy(),this.layoutMethods[e]=c}catch(t){console.warn("The layout method: '".concat(o,"' does not exist! Please specify it first.")),i()}return c.enableTick&&(l=t.onTick,f=function(){l&&l(),n.refreshPositions()},c.tick=f),function(t,e){var n;(null===(n=null==t?void 0:t.nodes)||void 0===n?void 0:n.length)&&t.nodes.forEach((function(t){t.layoutOrder=e}))}(d=this.filterLayoutData(this.data,t),e),c.init(d),n.emit("beforesublayout",{type:o}),[4,c.execute()];case 1:return h.sent(),c.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}}))}))}))},e.prototype.updateLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return(0,y.__awaiter)(n,void 0,void 0,(function(){var n,i,o;return(0,y.__generator)(this,(function(a){switch(a.label){case 0:return n=this.graph,i=null==e?void 0:e.type,e.onLayoutEnd=function(){n.emit("aftersublayout",{type:i}),r()},o=this.filterLayoutData(this.data,e),t.init(o),t.updateCfg(e),n.emit("beforesublayout",{type:i}),[4,t.execute()];case 1:return a.sent(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}}))}))}))},e.prototype.layout=function(t){var e,n=this,r=this.graph;if(r&&!r.get("destroyed")){this.data=this.setDataFromGraph();var i=this.data,o=i.nodes,a=i.hiddenNodes;if(!o)return!1;var s=r.get("width"),u=r.get("height"),c={};Object.assign(c,{width:s,height:u,center:[s/2,u/2]},this.layoutCfg),this.layoutCfg=c;var l=c.type,f=!1;null===(e=this.layoutMethods)||void 0===e||e.forEach((function(t){var e;return f=!!(null===(e=t.nodes)||void 0===e?void 0:e.length)||f}));var d=this.destoryLayoutMethods();r.emit("beforelayout"),f&&l&&1===(null==d?void 0:d.length)&&d[0]===l?this.tweakInit():this.initPositions(c.center,o),this.initPositions(c.center,a),l&&"gpu"===l.split("-")[1]&&(l=l.split("-")[0],c.gpuEnabled=!0);var h=!1;c.gpuEnabled&&(h=!0,Dd().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),h=!1)),h&&!this.hasGPUVersion(l)&&(console.warn("The '".concat(l,"' layout does not support GPU calculation for now, it will run in CPU.")),h=!1),this.isGPU=h;var p=c.onLayoutEnd,g=c.layoutEndFormatted,v=c.adjust;if(g||(c.layoutEndFormatted=!0,c.onAllLayoutEnd=function(){return(0,y.__awaiter)(n,void 0,void 0,(function(){return(0,y.__generator)(this,(function(t){switch(t.label){case 0:return p&&p(o),this.refreshLayout(),v&&c.pipes?[4,this.adjustPipesBox(this.data,v)]:[3,2];case 1:t.sent(),this.refreshLayout(),t.label=2;case 2:return r.emit("afterlayout"),[2]}}))}))}),this.stopWorker(),c.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var m=Promise.resolve(),b=!1;return c.type?(b=!0,m=m.then((function(){return(0,y.__awaiter)(n,void 0,void 0,(function(){return(0,y.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(c,0)];case 1:return[2,t.sent()]}}))}))}))):c.pipes&&(b=!0,c.pipes.forEach((function(t,e){m=m.then((function(){return(0,y.__awaiter)(n,void 0,void 0,(function(){return(0,y.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.execLayoutMethod(t,e)];case 1:return[2,n.sent()]}}))}))}))}))),b?m.then((function(){c.onAllLayoutEnd&&c.onAllLayoutEnd(),t&&t()})).catch((function(t){console.warn("graph layout failed,",t)})):(r.refreshPositions(),null==t||t()),!1}},e.prototype.tweakInit=function(){var t=this.data,e=this.graph,n=t.nodes,r=t.edges;if(null==n?void 0:n.length){var i={};n.forEach((function(t){var e=t.x,n=t.y;isNaN(e)||isNaN(n)||(i[t.id]={x:e,y:n},t.mass=t.mass||2)})),r.forEach((function(t){var e=t.source,n=t.target,r=i[e],o=i[n];!r&&o?i[e]={x:o.x+80*(Math.random()-.5),y:o.y+80*(Math.random()-.5)}:!o&&r&&(i[n]={x:r.x+80*(Math.random()-.5),y:r.y+80*(Math.random()-.5)})}));var o=e.get("width"),a=e.get("height");n.forEach((function(t){var e=i[t.id]||{x:o/2+20*(Math.random()-.5),y:a/2+20*(Math.random()-.5)};t.x=e.x,t.y=e.y}))}},e.prototype.initWithPreset=function(){var t=this.layoutCfg,e=this.data,n=t.preset;return!(!(null==n?void 0:n.type)||!Ed.Layouts[null==n?void 0:n.type]||(new Ed.Layouts[null==n?void 0:n.type](n).layout(e),delete t.preset,0))},e.prototype.layoutWithWorker=function(t,e){var n=this,r=this.layoutCfg,i=this.graph,o=this.getWorker(),a=this.workerData;if(!o)return!1;a.requestId=null,a.requestId2=null,a.currentTick=null,a.currentTickData=null,i.emit("beforelayout");var s=Promise.resolve(),u=!1;if(r.type)u=!0,s=s.then((function(){return n.runWebworker(o,t,r)}));else if(r.pipes){u=!0;for(var c=function(e){s=s.then((function(){return n.runWebworker(o,t,e)}))},l=0,f=r.pipes;l<f.length;l++)c(f[l])}return u&&s.then((function(){r.onAllLayoutEnd&&r.onAllLayoutEnd(),null==e||e()})).catch((function(t){console.error("layout failed",t)})),!0},e.prototype.runWebworker=function(t,e,n){var r,i,o=this,a=this.isGPU,s=this.filterLayoutData(e,n),u=s.nodes,c=s.edges,l=document.createElement("canvas"),f=a&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in l,d=(i={},(r=n)&&"object"===zd(r)?(Object.keys(r).forEach((function(t){r.hasOwnProperty(t)&&function(t){return"function"!=typeof t}(r[t])&&(i[t]=r[t])})),i):r);if(f){var h=l.transferControlToOffscreen();d.type="".concat(d.type,"-gpu"),t.postMessage({type:"GPU_LAYOUT_RUN",nodes:u,edges:c,layoutCfg:d,canvas:h},[h])}else t.postMessage({type:"LAYOUT_RUN",nodes:u,edges:c,layoutCfg:d});return new Promise((function(e,r){t.onmessage=function(t){o.handleWorkerMessage(e,r,t,s,n)}}))},e.prototype.handleWorkerMessage=function(t,e,n,r,i){var o=this.graph,a=this.workerData,s=n.data,u=s.type,c=function(){i.onTick&&i.onTick()};switch(u){case"LAYOUT_TICK":a.currentTick=s.currentTick,a.currentTickData=s,a.requestId||(a.requestId=Yd((function(){Qd(r,s),o.refreshPositions(),c(),s.currentTick===s.totalTicks?t():a.currentTick===s.totalTicks&&(a.requestId2=Yd((function(){Qd(r,a.currentTickData),o.refreshPositions(),a.requestId2=null,c(),t()}))),a.requestId=null})));break;case"LAYOUT_END":null==a.currentTick&&(Qd(r,s),t());break;case"GPU_LAYOUT_END":null==a.currentTick&&(function(t,e){for(var n=t.nodes,r=e.vertexEdgeData,i=n.length,o=0;o<i;o++){var a=n[o],s=r[4*o],u=r[4*o+1];a.x=s,a.y=u}}(r,s),t());break;case"LAYOUT_ERROR":console.warn("Web-Worker layout error!",s.message),e();break;default:e()}},e.prototype.updateLayoutCfg=function(t){var e=this,n=this.graph,r=this.layoutMethods;if(n&&!n.get("destroyed")){var i=t.disableTriggerLayout,o=(0,y.__rest)(t,["disableTriggerLayout"]),a=(0,b.mix)({},this.layoutCfg,o);if(this.layoutCfg=a,!i)if(null==r?void 0:r.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!o.workerEnabled||!this.layoutWithWorker(this.data,null)){n.emit("beforelayout");var s=Promise.resolve(),u=!1;1===(null==r?void 0:r.length)?(u=!0,s=s.then((function(){return(0,y.__awaiter)(e,void 0,void 0,(function(){return(0,y.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(r[0],a)];case 1:return[2,t.sent()]}}))}))}))):(null==r?void 0:r.length)&&(u=!0,r.forEach((function(t,n){var r=a.pipes[n];s=s.then((function(){return(0,y.__awaiter)(e,void 0,void 0,(function(){return(0,y.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(t,r)];case 1:return[2,e.sent()]}}))}))}))}))),u&&s.then((function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()})).catch((function(t){console.warn("layout failed",t)}))}}else this.layout()}},e.prototype.adjustPipesBox=function(t,e){var n=this;return new Promise((function(r){var i=t.nodes;(null==i?void 0:i.length)||r(),Zd.includes(e)||(console.warn("The adjust type ".concat(e," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),r());var o={center:n.layoutCfg.center,nodeSize:function(t){return Math.max(t.height,t.width)},preventOverlap:!0,onLayoutEnd:function(){}},a=n.getLayoutBBox(i),s=a.groupNodes,u=a.layoutNodes,c=(0,b.clone)(u);o.onLayoutEnd=function(){null==u||u.forEach((function(t,e){var n,r,i,o=t.x-(null===(n=c[e])||void 0===n?void 0:n.x),a=t.y-(null===(r=c[e])||void 0===r?void 0:r.y);null===(i=s[e])||void 0===i||i.forEach((function(t){t.x+=o,t.y+=a}))})),r()},new Ed.Layouts[e](o).layout({nodes:u})}))},e.prototype.hasGPUVersion=function(t){return qd.includes(t)},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(Iu),Jd=Kd;function Qd(t,e){for(var n=t.nodes,r=e.nodes,i=n.length,o=0;o<i;o++){var a=n[o];a.x=r[o].x,a.y=r[o].y}}function th(t){$d||($d=document.createElement("table"),Gd=document.createElement("tr"),Vd=/^\s*<(\w+|!)[^>]*>/,Ud={tr:document.createElement("tbody"),tbody:$d,thead:$d,tfoot:$d,td:Gd,th:Gd,"*":document.createElement("div")});var e=Vd.test(t)&&RegExp.$1;e&&e in Ud||(e="*");var n=Ud[e];t="string"==typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,n.innerHTML=""+t;var r=n.childNodes[0];return r&&n.contains(r)&&n.removeChild(r),r}var eh=function t(e,n){var r;e.isGroup()&&n.isGroup()&&(null===(r=e.get("children"))||void 0===r||r.forEach((function(e,r){var i=n.get("children")[r];t(e,i)})));var i=e.get("type"),o=n.get("type");if("image"===i&&"image"===o){var a=e.get("clipShape");a&&n.setClip({type:a.get("type"),attrs:a.attr()})}},nh=N,rh=function(t){function e(e){var n=t.call(this,e)||this,r=n.get("defaultNode");return r||n.set("defaultNode",{type:"circle"}),r.type||(r.type="circle",n.set("defaultNode",r)),n.destroyed=!1,n}return(0,y.__extends)(e,t),e.prototype.initLayoutController=function(){var t=new Jd(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new _d(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if("string"==typeof t&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e,n=t.clientWidth,r=t.clientHeight,i=this.get("width")||n,o=this.get("height")||r;if(this.get("width")||this.get("height")||(this.set("width",n),this.set("height",r)),"svg"===this.get("renderer"))e=new hf({container:t,width:i,height:o});else{var a={container:t,width:i,height:o},s=this.get("pixelRatio");s&&(a.pixelRatio=s,window.devicePixelRatio=s),e=new sl(a)}this.set("canvas",e)},e.prototype.initPlugins=function(){var t=this;(0,b.each)(t.get("plugins"),(function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)}))},e.prototype.downloadImageWatermark=function(t,e,n,r){return(0,y.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return(0,y.__generator)(this,(function(s){switch(s.label){case 0:return i=t.style.backgroundImage,o=i.slice(5,i.length-2),(a=new Image).src=o,[4,new Promise((function(t){a.onload=function(){var i=e.createPattern(a,"repeat");e.rect(0,0,n,r),e.fillStyle=i,e.fill(),t("")}}))];case 1:return s.sent(),[2]}}))}))},e.prototype.asyncToDataUrl=function(t,e,n,r,i,o){var a=this,s=document.querySelector(".g6-graph-watermarker"),u=this.get("canvas"),c=u.getRenderer(),l=o||u.get("el"),f="";t||(t="image/png"),setTimeout((function(){return(0,y.__awaiter)(a,void 0,void 0,(function(){var o,a,u,d,h,p,g,v,m,b;return(0,y.__generator)(this,(function(y){switch(y.label){case 0:return"svg"!==c?[3,1]:(o=l.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(u=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a)).replaceChild(o,u.documentElement),d=(new XMLSerializer).serializeToString(u),f="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(d)),[3,4]);case 1:return h=void 0,p=l.getContext("2d"),g=r||this.get("width"),v=i||this.get("height"),m=void 0,s?[4,this.downloadImageWatermark(s,p,g,v)]:[3,3];case 2:y.sent(),y.label=3;case 3:if(e){b="undefined"!=typeof window?window.devicePixelRatio:1;try{h=p.getImageData(0,0,g*b,v*b),m=p.globalCompositeOperation,p.globalCompositeOperation="destination-over",p.fillStyle=e,p.fillRect(0,0,g,v)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}f=l.toDataURL(t),e&&(p.clearRect(0,0,g,v),p.putImageData(h,0,0),p.globalCompositeOperation=m),y.label=4;case 4:return n&&n(f),[2]}}))}))}),16)},e.prototype.toDataURL=function(t,e){var n=this.get("canvas"),r=n.getRenderer(),i=n.get("el");t||(t="image/png");var o="";if("svg"===r){var a=i.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),u=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);u.replaceChild(a,u.documentElement);var c=(new XMLSerializer).serializeToString(u);o="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(c))}else{var l=void 0,f=i.getContext("2d"),d=Math.max(this.get("width"),500),h=Math.max(this.get("height"),500),p=void 0;if(e){var g="undefined"!=typeof window&&window.devicePixelRatio||1;try{l=f.getImageData(0,0,d*g,h*g),p=f.globalCompositeOperation,f.globalCompositeOperation="destination-over",f.fillStyle=e,f.fillRect(0,0,d,h)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}o=i.toDataURL(t),e&&(f.clearRect(0,0,d,h),f.putImageData(l,0,0),f.globalCompositeOperation=p)}return o},e.prototype.toFullDataURL=function(t,e,n){var r=this.get("group").getCanvasBBox(),i=r.height,o=r.width,a=this.get("renderer"),s=th('<div id="virtual-image"></div>'),u=n?n.backgroundColor:void 0,c=n?n.padding:void 0;c?(0,b.isNumber)(c)&&(c=[c,c,c,c]):c=[0,0,0,0];var l=i+c[0]+c[2],f=o+c[1]+c[3],d={container:s,height:l,width:f,quickHit:!0},h="svg"===a?new hf(d):new sl(d),p=this.get("group").clone(),g=(0,b.clone)(p.getMatrix());g||(g=[1,0,0,0,1,0,0,0,1]);var v=(r.maxX+r.minX)/2,m=(r.maxY+r.minY)/2;g=nh(g,[["t",-v,-m],["t",o/2+c[3],i/2+c[0]]]),p.resetMatrix(),p.setMatrix(g),h.add(p);var y=h.get("el"),x="";e||(e="image/png"),setTimeout((function(){if("svg"===a){var n=y.cloneNode(!0),r=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",r);i.replaceChild(n,i.documentElement);var o=(new XMLSerializer).serializeToString(i);x="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(o))}else{var s=void 0,c=y.getContext("2d"),d=void 0;if(u){var h="undefined"!=typeof window?window.devicePixelRatio:1;try{s=c.getImageData(0,0,f*h,l*h),d=c.globalCompositeOperation,c.globalCompositeOperation="destination-over",c.fillStyle=u,c.fillRect(0,0,f,l)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}x=y.toDataURL(e),u&&(c.clearRect(0,0,f,l),c.putImageData(s,0,0),c.globalCompositeOperation=d)}t&&t(x)}),16)},e.prototype.downloadFullImage=function(t,e,n){var r=this,i=this.get("group").getCanvasBBox(),o=i.height,a=i.width,s=this.get("renderer"),u=th('<div id="virtual-image"></div>'),c=document.querySelector(".g6-graph-watermarker"),l=n?n.backgroundColor:void 0,f=n?n.padding:void 0;f?(0,b.isNumber)(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var d=o+f[0]+f[2],h=a+f[1]+f[3];if(c){var p=this.get("graphWaterMarker").cfg||{},g=p.width,v=p.height;d=Math.ceil(d/v)*v,h=Math.ceil(h/g)*g}var m,y,x={container:u,height:d,width:h},w="svg"===s?new hf(x):new sl(x),_=(y=(m=this.get("group")).clone(),eh(m,y),y),E=(0,b.clone)(_.getMatrix());E||(E=[1,0,0,0,1,0,0,0,1]);var S=(i.maxX+i.minX)/2,C=(i.maxY+i.minY)/2;E=nh(E,[["t",-S,-C],["t",a/2+f[3],o/2+f[0]]]),_.resetMatrix(),_.setMatrix(E),w.add(_);var k=w.get("el");e||(e="image/png"),this.asyncToDataUrl(e,l,(function(n){var i=document.createElement("a"),o=(t||"graph")+("svg"===s?".svg":".".concat(e.split("/")[1]));r.dataURLToImage(n,s,i,o);var a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),i.dispatchEvent(a)}),h,d,k)},e.prototype.downloadImage=function(t,e,n){var r=this,i=this;i.stopAnimate();var o=i.get("canvas").getRenderer();e||(e="image/png");var a=(t||"graph")+("svg"===o?".svg":e.split("/")[1]),s=document.createElement("a");i.asyncToDataUrl(e,n,(function(t){r.dataURLToImage(t,o,s,a);var e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),s.dispatchEvent(e)}))},e.prototype.dataURLToImage=function(t,e,n,r){if(t&&"data:"!==t){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==e){var i=t.split(","),o="";if(i&&i.length>0){var a=i[0].match(/:(.*?);/);a&&a.length>=2&&(o=a[1])}for(var s=atob(i[1]),u=s.length,c=new Uint8Array(u);u--;)c[u]=s.charCodeAt(u);var l=new Blob([c],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(l,r):n.addEventListener("click",(function(){n.download=r,n.href=window.URL.createObjectURL(l)}))}else n.addEventListener("click",(function(){n.download=r,n.href=t}))}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},e.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},e.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);n>=0&&(t.destroyPlugin(),e.splice(n,1))},e.prototype.setImageWaterMarker=function(t,e){void 0===t&&(t=md.waterMarkerImage);var n=this.get("container");(0,b.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=(0,b.deepMix)({},md.imageWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,u=i.image;if(!t){var c=s?n:document.querySelector(".g6-graph-watermarker");return c&&(c.style.cssText=void 0),void(r&&r.clear())}if(r)r.clear();else{var l={container:n,width:o,height:a,capture:!1},f=this.get("pixelRatio");f&&(l.pixelRatio=f,window.devicePixelRatio=f),r=new sl(l),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),h=u.rotate,p=u.x,g=u.y;d.rotate(-h*Math.PI/180);var v=new Image;v.crossOrigin="anonymous",v.src=t,v.onload=function(){if(d.drawImage(v,p,g,u.width,u.height),d.rotate(h*Math.PI/180),s)n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var t=document.querySelector(".g6-graph-watermarker");t||((t=document.createElement("div")).className="g6-graph-watermarker"),t.className="g6-graph-watermarker",r.destroyed||(t.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(t))}}},e.prototype.setTextWaterMarker=function(t,e){var n=this.get("container");(0,b.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=(0,b.deepMix)({},md.textWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,u=i.text;if(!(null==t?void 0:t.length)){var c=s?n:document.querySelector(".g6-graph-watermarker");return c&&(c.style.cssText=void 0),void(r&&r.clear())}if(r)r.clear();else{var l={container:n,width:o,height:a,capture:!1},f=this.get("pixelRatio");f&&(l.pixelRatio=f,window.devicePixelRatio=f),r=new sl(l),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),h=u.rotate,p=u.fill,g=u.fontFamily,v=u.fontSize,m=u.baseline,y=u.x,x=u.y,w=u.lineHeight;d.rotate(-h*Math.PI/180),d.font="".concat(v,"px ").concat(g),d.fillStyle=p,d.textBaseline=m;for(var _=(0,b.isString)(t)?[t]:t,E=_.length-1;E>=0;E--)d.fillText(_[E],y,x+E*w);if(d.rotate(h*Math.PI/180),s)n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var S=document.querySelector(".g6-graph-watermarker");S||((S=document.createElement("div")).className="g6-graph-watermarker"),S.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(S)}},e.prototype.destroy=function(){var e,n,r,i;(0,b.each)(this.get("plugins"),(function(t){t.destroyPlugin()}));var o=this.get("tooltips");if(o)for(var a=0;a<o.length;a++){var s=o[a];if(s){var u=s.parentElement;u&&u.removeChild(s)}}null===(e=this.get("eventController"))||void 0===e||e.destroy(),null===(n=this.get("layoutController"))||void 0===n||n.destroy(),null===(r=this.get("graphWaterMarker"))||void 0===r||r.destroy(),null===(i=document.querySelector(".g6-graph-watermarker"))||void 0===i||i.remove(),t.prototype.destroy.call(this)},e}(su),ih=rh,oh=Ld.radialLayout,ah=Ld.traverseTree,sh=function(t){function e(e){var n=t.call(this,e)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return(0,y.__extends)(e,t),e.prototype.getLayout=function(){var t=this.get("layout");return t?"function"==typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="indented"===t.type?"LR":"TB"),t.radial?function(e){var n=Cd()[t.type](e,t);return oh(n),n}:function(e){return Cd()[t.type](e,t)}):null},e.indexOfChild=function(t,e){var n=-1;return(0,b.each)(t,(function(t,r){if(e===t.id)return n=r,!1})),n},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.animate=!0,e},e.prototype.innerAddChild=function(t,e,n){var r=this,i=t.data;i&&(i.x=t.x,i.y=t.y,i.depth=t.depth);var o=r.addItem("node",i,!1);if(e){if(o.set("parent",e),n){var a=e.get("originAttrs");if(a)o.set("originAttrs",a);else{var s=e.getModel();o.set("originAttrs",{x:s.x,y:s.y})}}var u=e.get("children");u?u.push(o):e.set("children",[o]),r.addItem("edge",{source:e.get("id"),target:o.get("id"),id:"".concat(e.get("id"),":").concat(o.get("id"))},!1)}return(0,b.each)(t.children||[],(function(t){r.innerAddChild(t,o,n)})),r.emit("afteraddchild",{item:o,parent:e}),o},e.prototype.innerUpdateChild=function(t,n,r){var i=this,o=i.findById(t.id);if(o){(0,b.each)(t.children||[],(function(t){i.innerUpdateChild(t,o,r)}));var a,s,u=o.get("children");if(u&&u.length>0)for(var c=u.length-1;c>=0;c--){var l=u[c].getModel();-1===e.indexOfChild(t.children||[],l.id)&&(i.innerRemoveChild(l.id,{x:t.x,y:t.y},r),u.splice(c,1))}o.get("originAttrs")&&(a=o.get("originAttrs").x,s=o.get("originAttrs").y);var f=o.getModel();r&&o.set("originAttrs",{x:f.x,y:f.y}),o.set("model",Object.assign(f,t.data)),a===t.x&&s===t.y||o.updatePosition({x:t.x,y:t.y})}else i.innerAddChild(t,n,r)},e.prototype.innerRemoveChild=function(t,e,n){var r=this,i=r.findById(t);if(i)if((0,b.each)(i.get("children"),(function(t){r.innerRemoveChild(t.getModel().id,e,n)})),n){var o=i.getModel();i.set("to",e),i.set("originAttrs",{x:o.x,y:o.y}),r.get("removeList").push(i)}else r.removeItem(i,!1)},e.prototype.changeData=function(t,e){void 0===e&&(e=!0);var n=this;this.getNodes().map((function(t){return n.clearItemStates(t)})),this.getEdges().map((function(t){return n.clearItemStates(t)})),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(t)},e.prototype.updateLayout=function(t,e){void 0===e&&(e=!0);var n=this;t?(e&&this.get("enabledStack")&&this.pushStack("layout",{before:n.get("layout"),after:t}),n.set("layout",t),n.set("layoutMethod",n.getLayout()),n.layout()):console.warn("layout cannot be null")},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(t)},e.prototype.layout=function(t){var e=this,n=e.get("data"),r=e.get("layoutMethod"),i=r?r(n,e.get("layout")):n,o=e.get("animate");e.emit("beforerefreshlayout",{data:n,layoutData:i}),e.emit("beforelayout"),e.innerUpdateChild(i,void 0,o),t&&e.get("viewController").fitView(),o?e.layoutAnimate(i):(e.refresh(),e.paint()),e.emit("afterrefreshlayout",{data:n,layoutData:i}),e.emit("afterlayout")},e.prototype.addChild=function(t,e,n){void 0===n&&(n=!0);var r=this;r.emit("beforeaddchild",{model:t,parent:e}),(0,b.isString)(e)||(e=e.get("id"));var i=r.findDataById(e);i&&(i.children||(i.children=[]),i.children.push(t),r.findById(e).refresh(),r.changeData(void 0,n))},e.prototype.updateChildren=function(t,e,n){void 0===n&&(n=!0);var r=this,i=r.findById(e);e&&i?(r.findDataById(e).children=t,i.refresh(),r.changeData(void 0,n)):console.warn("Update children failed! There is no node with id '".concat(e,"'"))},e.prototype.updateChild=function(t,n,r){void 0===r&&(r=!0);var i=this;if(n&&i.findById(n)){var o=i.findDataById(n),a=i.findById(t.id);if(o.children||(o.children=[]),a){var s=e.indexOfChild(o.children,t.id);s>-1&&(o.children[s]=t)}else o.children.push(t);var u=i.findById(n);null==u||u.refresh(),i.changeData(void 0,r)}else i.changeData(t,r)},e.prototype.removeChild=function(t,n){void 0===n&&(n=!0);var r,i=this,o=i.findById(t);if((r=o?null==o?void 0:o.get("parent"):i.getNodes().find((function(e){return!!(e.getModel().children||[]).find((function(e){return e.id===t}))})))&&!r.destroyed){var a=r.get("id"),s=i.findDataById(a),u=s&&s.children||[],c=e.indexOfChild(u,t);u.splice(c,1),r.refresh()}i.changeData(void 0,n)},e.prototype.findDataById=function(t,e){var n=this;if(e||(e=n.get("data")),t===e.id)return e;var r=null;return(0,b.each)(e.children||[],(function(e){return e.id===t?(r=e,!1):!(r=n.findDataById(t,e))&&void 0})),r},e.prototype.layoutAnimate=function(t,e){var n=this,r=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach((function(t){var e=t.get("model");e.sourceAnchor||(e.sourceAnchor=t.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(r){ah(t,(function(i){var o=n.findById(i.id);if(o){var a=o.get("originAttrs"),s=o.get("model");if(a||(a={x:s.x,y:s.y},o.set("originAttrs",a)),e){var u=e(o,r,a,t);o.set("model",Object.assign(s,u))}else s.x=a.x+(i.x-a.x)*r,s.y=a.y+(i.y-a.y)*r}return!0})),(0,b.each)(n.get("removeList"),(function(t){var e=t.getModel(),n=t.get("originAttrs"),i=t.get("to");e.x=n.x+(i.x-n.x)*r,e.y=n.y+(i.y-n.y)*r})),n.refreshPositions()}),{duration:r.duration,easing:r.ease,callback:function(){(0,b.each)(n.getNodes(),(function(t){t.set("originAttrs",null)})),(0,b.each)(n.get("removeList"),(function(t){n.removeItem(t,!1)})),n.set("removeList",[]),r.callback&&r.callback(),n.emit("afteranimate",{data:t})},delay:r.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){void 0===t&&(t=!0);var e=this,n=e.get("data");if(!n||!(0,b.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");e.clear(),t&&this.get("enabledStack")&&this.clearStack(),e.emit("beforerender"),e.layout(this.get("fitView")),e.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(e){t.prototype.data.call(this,e),this.set("originData",JSON.parse(JSON.stringify(e)))},e}(ih),uh=sh;function ch(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}var lh,fh=function(){function t(t){this._cfgs=(0,b.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return t.prototype.getDefaultCfgs=function(){return{}},t.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var n=e.getEvents(),r={};(0,b.each)(n,(function(n,i){var o=(0,b.wrapBehavior)(e,n);r[i]=o,t.on(i,o)})),this._events=r,this.init()},t.prototype.getEvents=function(){return{}},t.prototype.get=function(t){var e;return null===(e=this._cfgs)||void 0===e?void 0:e[t]},t.prototype.set=function(t,e){this._cfgs[t]=e},t.prototype.destroy=function(){},t.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;(0,b.each)(e,(function(e,n){t.off(n,e)})),this._events=null,this._cfgs=null,this.destroyed=!0},t}(),dh=fh,hh=(lh=function(t,e){return lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},lh(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}lh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ph="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",gh=function(t){function e(e){return t.call(this,e)||this}return hh(e,t),e.prototype.getDefaultCfgs=function(){return{img:ph,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),e=t.get("container"),n=t.get("canvas").get("el"),r=this.get("img")||ph;r.includes("url(")||(r='url("'.concat(r,'")'));var i=th("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),o=th("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(r,";\n        user-select: none\n        '></div>"));this.set("container",i),this.set("gridContainer",o),this.positionInit(),i.appendChild(o),e.insertBefore(i,n)},e.prototype.positionInit=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("width"),r=t.get("height");ch(this.get("container"),{width:"".concat(n,"px"),height:"".concat(r,"px")});var i=80*n/e,o=80*r/e;ch(this.get("gridContainer"),{width:"".concat(i,"px"),height:"".concat(o,"px"),left:"-".concat(i/2,"px"),top:"-".concat(o/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var e=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var r=this.get("follow");ch(e,{transform:"matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(r?n[6]:"0",", ").concat(r?n[7]:"0",")")})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)},e}(dh),vh=gh,mh=n(8186),yh=n.n(mh),bh=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&yh()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var xh=function(t){function e(e){return t.call(this,e)||this}return bh(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>1</li>\n            <li>2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),e=th("<div class=".concat(t||"g6-component-contextmenu","></div>"));ch(e,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,b.isString)(n)&&(n=document.getElementById(n)),n.appendChild(e),this.set("menu",e)},e.prototype.onMenuShow=function(t){var e=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&-1===n.indexOf(t.item.getType()))return void e.onMenuHide()}else if(-1===n.indexOf("canvas"))return void e.onMenuHide();if(this.get("shouldBegin")(t)){var r=this.get("menu"),i=this.get("getContent"),o=this.get("graph"),a=i(t,o);(0,b.isString)(a)?r.innerHTML=a:r.innerHTML=a.outerHTML,this.removeMenuEventListener();var s=this.get("handleMenuClick");if(s){var u=function(e){s(e.target,t.item,o)};this.set("handleMenuClickWrapper",u),r.addEventListener("click",u)}var c=o.get("width"),l=o.get("height"),f=r.getBoundingClientRect(),d=this.get("offsetX")||0,h=this.get("offsetY")||0,p=o.getContainer().offsetTop,g=o.getContainer().offsetLeft,v=t.canvasX+g+d,m=t.canvasY+p+h;v+f.width>c&&(v=t.canvasX-f.width-d+g),m+f.height>l&&(m=t.canvasY-f.height-h+p),ch(r,{top:"".concat(m,"px"),left:"".concat(v,"px"),visibility:"visible"});var y="click"===this.get("trigger"),x=function(t){y?y=!1:e.onMenuHide()};document.body.addEventListener("click",x),this.set("handler",x)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null)),e&&document.body.removeEventListener("click",e)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&ch(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,b.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(dh),wh=xh,_h=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Eh=function(){return Eh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Eh.apply(this,arguments)},Sh=Math.max,Ch=N,kh=function(t){function e(e){var n=t.call(this,e)||this;return n.handleUpdateCanvas=(0,b.debounce)((function(t){var e=n;e.destroyed||e.updateCanvas()}),100,!1),n}return _h(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.size,r=e.graph;if(!this.destroyed){var i=this.get("canvas").get("container"),o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,a=navigator.userAgent.toLowerCase().indexOf("safari")>-1,s=th("\n      <div\n        class=".concat(e.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!a&&!o,"\n      </div>")),u=0,c=0,l=!1,f=0,d=0,h=0,p=0,g=0,v=0,m=a||o?"mousedown":"dragstart";s.addEventListener(m,(function(i){var o,a;if(i.dataTransfer){var m=new Image;m.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(a=(o=i.dataTransfer).setDragImage)||void 0===a||a.call(o,m,0,0);try{i.dataTransfer.setData("text/html","view-port-minimap")}catch(t){i.dataTransfer.setData("text","view-port-minimap")}}if(e.refresh=!1,i.target===s){var y=s.style;f=parseInt(y.left,10),d=parseInt(y.top,10),h=parseInt(y.width,10),p=parseInt(y.height,10),h>n[0]||p>n[1]||(v=r.getZoom(),g=t.get("ratio"),l=!0,u=i.clientX,c=i.clientY)}}),!1);var y=function(t){if(l&&!(0,b.isNil)(t.clientX)&&!(0,b.isNil)(t.clientY)){var e=u-t.clientX,i=c-t.clientY;(f-e<0||f-e+h>=n[0])&&(e=0),(d-i<0||d-i+p>=n[1])&&(i=0),d-=i,ch(s,{left:"".concat(f-=e,"px"),top:"".concat(d,"px")}),r.translate(e*v/g,i*v/g),u=t.clientX,c=t.clientY}};a||o||s.addEventListener("drag",y,!1);var x=function(){l=!1,e.refresh=!0},w=a||o?"mouseup":"dragend";s.addEventListener(w,x,!1),i.addEventListener("mouseleave",x),i.addEventListener("mouseup",x),(a||o)&&i.addEventListener("mousemove",y,!1),this.set("viewport",s),i.appendChild(s)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("totaldx"),n=this.get("totaldy"),r=this.get("graph"),i=this.get("size"),o=r.get("canvas").get("el"),a=r.get("width")||o.scrollWidth||500,s=r.get("height")||o.scrollHeight||500,u=r.getPointByCanvas(0,0),c=r.getPointByCanvas(a,s),l=this.get("viewport");l||this.initViewport();var f=(c.x-u.x)*t,d=(c.y-u.y)*t,h=u.x*t+e,p=u.y*t+n,g=h+f,v=p+d;h<0&&(f+=h,h=0),g>i[0]&&(f-=g-i[0]),p<0&&(d+=p,p=0),v>i[1]&&(d-=v-i[1]),this.set("ratio",t),ch(l,{left:"".concat(h,"px"),top:"".concat(p,"px"),width:"".concat(f,"px"),height:"".concat(d,"px")})}},e.prototype.updateGraphShapes=function(){var t,e=this._cfgs.graph,n=this.get("canvas"),r=e.get("group");r.destroyed||(n.clear(),this.get("hideEdge")?(t=n.addGroup(),r.get("children").forEach((function(e){e.get("id").includes("-edge")||t.add(e.clone())}))):((t=r.clone()).resetMatrix(),n.add(t)),"svg"===e.get("renderer")&&this.updateVisible(t))},e.prototype.updateVisible=function(t){var e=this;if(t.isGroup()||t.get("visible")){var n=t.get("children");if(!n||!n.length)return;n.forEach((function(t){t.get("visible")||t.hide(),e.updateVisible(t)}))}else t.hide()},e.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,b.each)(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,r)})),(0,b.each)(e.getNodes(),(function(e){t.updateOneNodeKeyShape(e,r)}));var i=e.getCombos();if(i&&i.length){var o=r.find((function(t){return"comboGroup"===t.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||((0,b.each)(i,(function(e){t.updateOneComboKeyShape(e,o)})),null==o||o.sort(),null==o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,e){if(!this.destroyed){var n=this.get("itemMap")||{},r=n[t.get("id")],i=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?s=Object.assign(a,s):(r=o,e.add(r));var u=r.get("type");"rect"!==u&&"image"!==u||(s.x=i.minX,s.y=i.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0;var c=t.getModel().depth;isNaN(c)||r.set("zIndex",c),n[t.get("id")]=r,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")],i=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?(s=Object.assign(a,s),r.toFront()):(r=o,e.add(r));var u=r.get("type");"rect"!==u&&"image"!==u||(s.x=i.minX,s.y=i.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0;var c=t.getModel().depth;isNaN(c)||r.set("zIndex",c),n[t.get("id")]=r,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,b.each)(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,r)})),(0,b.each)(e.getNodes(),(function(e){t.updateOneNodeDelegateShape(e,r)}));var i=e.getCombos();if(i&&i.length){var o=r.find((function(t){return"comboGroup"===t.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||((0,b.each)(i,(function(e){t.updateOneComboKeyShape(e,o)})),null==o||o.sort(),null==o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var n=e.length-1;n>=0;n--){var r=t[e[n]],i=r.exist;r.exist=!1,i||(r.remove(),delete t[e[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")];if(r){var i=t.get("keyShape").attr("path");r.attr("path",i)}else r=t.get("keyShape").clone(),e.add(r);t.isVisible()?r.show():r.hide(),r.exist=!0,n[t.get("id")]=r,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,e){var n=this.get("delegateStyle"),r=this.get("itemMap")||{},i=r[t.get("id")],o=t.getBBox();if(i){var a={x:o.minX,y:o.minY,width:o.width,height:o.height};i.attr(a),i.toFront()}else i=e.addShape("rect",{attrs:Eh({x:o.minX,y:o.minY,width:o.width,height:o.height},n),name:"minimap-node-shape"});t.isVisible()?i.show():i.hide(),i.exist=!0,r[t.get("id")]=i,this.set("itemMap",r)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=t.get("size"),r=t.get("className"),i=t.get("container"),o=th("<div class='".concat(r,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,b.isString)(i)&&(i=document.getElementById(i)),i?i.appendChild(o):e.get("container").appendChild(o),t.set("container",o);var a,s=th('<div class="g6-minimap-container" style="position: relative;"></div>');o.appendChild(s),s.addEventListener("dragenter",(function(t){t.preventDefault()})),s.addEventListener("dragover",(function(t){t.preventDefault()})),a="svg"===e.get("renderer")?new hf({container:s,width:n[0],height:n[1]}):new sl({container:s,width:n[0],height:n[1]}),t.set("canvas",a),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("size"),n=this.get("canvas"),r=this.get("type"),i=this.get("padding");if(!n.destroyed){switch(r){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var o=n.get("children")[0];if(o){o.resetMatrix();var a=o.getCanvasBBox(),s=t.get("canvas").getCanvasBBox(),u=t.getZoom()||1,c=s.width/u,l=s.height/u;Number.isFinite(a.width)&&(c=Sh(a.width,c),l=Sh(a.height,l)),c+=2*i,l+=2*i;var f=Math.min(e[0]/c,e[1]/l),d=[1,0,0,0,1,0,0,0,1],h=0,p=0;Number.isFinite(a.minX)&&(h=-a.minX),Number.isFinite(a.minY)&&(p=-a.minY);var g=(e[0]-(c-2*i)*f)/2,v=(e[1]-(l-2*i)*f)/2;d=Ch(d,[["t",h,p],["s",f,f],["t",g,v]]),o.setMatrix(d),this.set("ratio",f),this.set("totaldx",g+h*f),this.set("totaldy",v+p*f),this.set("dx",g),this.set("dy",v),this.updateViewport()}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;null===(t=this.get("canvas"))||void 0===t||t.destroy();var e=this.get("container");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)},e}(dh),Mh=kh,Oh=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Th(t,e,n){var r=t.x-e.x,i=t.y-e.y;return!n||Math.abs(r)>n||Math.abs(i)>n?Math.sqrt(r*r+i*i):n}function Ah(t,e){var n=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(n*n*e.source.x+n*(t.y-e.source.y)+t.x)/(n*n+1);return{x:r,y:n*(r-e.source.x)+e.source.y}}var Nh=function(t){function e(e){return t.call(this,e)||this}return Oh(e,t),e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick");this.set("tick",(function(){e&&e(),t.refreshPositions()}))},e.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var n=t.edges||[],r=t.nodes||[],i={},o=!1;if(r.forEach((function(t){null!==t.x&&null!==!t.y&&void 0!==t.x&&void 0!==!t.y||(o=!0),i[t.id]=t})),o)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",i);var a=e.get("divisions"),s=e.get("divRate"),u=e.divideEdges(a);e.set("edgePoints",u);var c=e.getEdgeBundles();e.set("edgeBundles",c);for(var l=e.get("cycles"),f=e.get("iterations"),d=e.get("iterRate"),h=e.get("lambda"),p=0;p<l;p++){for(var g=function(t){var r=[];n.forEach((function(t,n){if(t.source!==t.target){var o=i[t.source],s=i[t.target];r[n]=e.getEdgeForces({source:o,target:s},n,a,h);for(var c=0;c<a+1;c++)u[n][c].x+=r[n][c].x,u[n][c].y+=r[n][c].y}}))},v=0;v<f;v++)g();h/=2,a*=s,f*=d,u=e.divideEdges(a),e.set("edgePoints",u)}n.forEach((function(t,e){t.source!==t.target&&(t.type="polyline",t.controlPoints=u[e].slice(1,u[e].length-1))})),e.get("graph").refresh()}},e.prototype.updateBundling=function(t){var e=this,n=t.data;if(n&&e.set("data",n),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach((function(n){e.set(n,t[n])})),t.onTick){var r=this.get("graph");e.set("tick",(function(){t.onTick(),r.refresh()}))}e.bundling(n)},e.prototype.divideEdges=function(t){var e=this,n=e.get("data").edges,r=e.get("nodeIdMap"),i=e.get("edgePoints");return i&&void 0!==i||(i=[]),n.forEach((function(n,o){var a;i[o]&&void 0!==i[o]||(i[o]=[]);var s=r[n.source],u=r[n.target];if(1===t)i[o].push({x:s.x,y:s.y}),i[o].push({x:.5*(s.x+u.x),y:.5*(s.y+u.y)}),i[o].push({x:u.x,y:u.y});else{var c=((null===(a=i[o])||void 0===a?void 0:a.length)?e.getEdgeLength(i[o]):Th({x:s.x,y:s.y},{x:u.x,y:u.y}))/(t+1),l=c,f=[{x:s.x,y:s.y}];i[o].forEach((function(t,e){if(0!==e){for(var n=Th(t,i[o][e-1]);n>l;){var r=l/n,a={x:i[o][e-1].x,y:i[o][e-1].y};a.x+=r*(t.x-i[o][e-1].x),a.y+=r*(t.y-i[o][e-1].y),f.push(a),n-=l,l=c}l-=n}})),f.push({x:u.x,y:u.y}),i[o]=f}})),i},e.prototype.getEdgeLength=function(t){var e=0;return t.forEach((function(n,r){0!==r&&(e+=Th(n,t[r-1]))})),e},e.prototype.getEdgeBundles=function(){var t=this,e=t.get("data").edges||[],n=t.get("bundleThreshold"),r=t.get("nodeIdMap"),i=t.get("edgeBundles");return i||(i=[]),e.forEach((function(t,e){i[e]&&void 0!==i[e]||(i[e]=[])})),e.forEach((function(o,a){var s=r[o.source],u=r[o.target];e.forEach((function(e,o){if(!(o<=a)){var c=r[e.source],l=r[e.target];t.getBundleScore({source:s,target:u},{source:c,target:l})>=n&&(i[a].push(o),i[o].push(a))}}))})),i},e.prototype.getBundleScore=function(t,e){var n=this;return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=Th({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=Th({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),n.getAngleScore(t,e)*n.getScaleScore(t,e)*n.getPositionScore(t,e)*n.getVisibilityScore(t,e)},e.prototype.getAngleScore=function(t,e){var n=function(t,e){return t.x*e.x+t.y*e.y}({x:t.vx,y:t.vy},{x:e.vx,y:e.vy});return n/(t.length*e.length)},e.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},e.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2;return n/(n+Th({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2}))},e.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e),r=this.getEdgeVisibility(e,t);return n<r?n:r},e.prototype.getEdgeVisibility=function(t,e){var n=Ah(e.source,t),r=Ah(e.target,t),i={x:(n.x+r.x)/2,y:(n.y+r.y)/2},o={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Th(i,o)/Th(n,r))},e.prototype.getEdgeForces=function(t,e,n,r){for(var i=this,o=i.get("edgePoints"),a=i.get("K")/(Th(t.source,t.target)*(n+1)),s=[{x:0,y:0}],u=1;u<n;u++){var c={x:0,y:0},l=i.getSpringForce({pre:o[e][u-1],cur:o[e][u],next:o[e][u+1]},a),f=i.getElectrostaticForce(u,e);c.x=r*(l.x+f.x),c.y=r*(l.y+f.y),s.push(c)}return s.push({x:0,y:0}),s},e.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,r=t.pre.y+t.next.y-2*t.cur.y;return{x:n*=e,y:r*=e}},e.prototype.getElectrostaticForce=function(t,e){var n=this,r=n.get("eps"),i=n.get("edgeBundles"),o=n.get("edgePoints"),a=i[e],s={x:0,y:0};return a.forEach((function(n){var i={x:o[n][t].x-o[e][t].x,y:o[n][t].y-o[e][t].y};if(Math.abs(i.x)>r||Math.abs(i.y)>r){var a=1/Th(o[n][t],o[e][t]);s.x+=i.x*a,s.y+=i.y*a}})),s},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(dh),Ih=Nh,Ph=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dh=function(){return Dh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Dh.apply(this,arguments)},Lh={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Rh=function(t){function e(e){return t.call(this,e)||this}return Ph(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,b.clone)(Lh),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},e.prototype.init=function(){var t=this,e=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",e*e);var n=t.get("d");t.set("molecularParam",(n+1)*e)},e.prototype.createDelegate=function(t){var e=this,n=this,r=n.get("delegate");r&&!r.destroyed||(n.magnify(t),(r=n.get("delegate")).on("dragstart",(function(t){n.set("delegateCenterDiff",{x:r.attr("x")-t.x,y:r.attr("y")-t.y})})),r.on("drag",(function(t){n.magnify(t)})),"wheel"===this.get("scaleDBy")&&r.on("mousewheel",(function(t){e.scaleDByWheel(t)})),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",(function(t){n.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,r=e.get("graph"),i=e.get("delegate"),o=(i?{x:i.attr("x"),y:i.attr("y")}:void 0)||r.getPointByClient(t.clientX,t.clientY);n=t.originalEvent.wheelDelta<0?.95:1/.95;var a=e.get("maxR"),s=e.get("minR"),u=e.get("r");(u>(a||r.get("height"))&&n>1||u<(s||.05*r.get("height"))&&n<1)&&(n=1),u*=n,e.set("r",u),e.set("r2",u*u);var c=e.get("d");e.set("molecularParam",(c+1)*u),e.set("delegateCenterDiff",void 0),e.magnify(t,o)}},e.prototype.scaleRByDrag=function(t){var e=this;if(t){var n,r=e.get("dragPrePos"),i=e.get("graph"),o=i.getPointByClient(t.clientX,t.clientY);n=t.x-r.x<0?.95:1/.95;var a=e.get("maxR"),s=e.get("minR"),u=e.get("r");(u>(a||i.get("height"))&&n>1||u<(s||.05*i.get("height"))&&n<1)&&(n=1),u*=n,e.set("r",u),e.set("r2",u*u);var c=e.get("d");e.set("molecularParam",(c+1)*u),e.magnify(t,o),e.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var e=this;if(t||t.originalEvent){t.preventDefault&&t.preventDefault();var n;n=t.originalEvent.wheelDelta<0?-.1:.1;var r=e.get("d")+n,i=e.get("maxD"),o=e.get("minD");if(r<i&&r>o){e.set("d",r);var a=e.get("r");e.set("molecularParam",(r+1)*a);var s=e.get("delegate"),u=s?{x:s.attr("x"),y:s.attr("y")}:void 0;e.set("delegateCenterDiff",void 0),e.magnify(t,u)}}},e.prototype.scaleDByDrag=function(t){var e=this,n=e.get("dragPrePos"),r=t.x-n.x>0?.1:-.1,i=e.get("d")+r,o=e.get("maxD"),a=e.get("minD");if(i<o&&i>a){e.set("d",i);var s=e.get("r");e.set("molecularParam",(i+1)*s),e.magnify(t)}e.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,e){var n=this;n.restoreCache();var r=n.get("graph"),i=n.get("cachedMagnifiedModels"),o=n.get("cachedOriginPositions"),a=n.get("showLabel"),s=n.get("r"),u=n.get("r2"),c=n.get("d"),l=n.get("molecularParam"),f=r.getNodes(),d=f.length,h=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};!n.get("dragging")||"mousemove"!==n.get("trigger")&&"click"!==n.get("trigger")||(h=n.get("cacheCenter"));var p=n.get("delegateCenterDiff");p&&(h.x+=p.x,h.y+=p.y),n.updateDelegate(h,s);for(var g=0;g<d;g++){var v=f[g].getModel(),m=v.x,y=v.y;if(!isNaN(m)&&!isNaN(y)){var b=(m-h.x)*(m-h.x)+(y-h.y)*(y-h.y);if(!isNaN(b)&&b<u&&0!==b){var x=Math.sqrt(b),w=l*x/(c*x+s),_=(m-h.x)/x,E=(y-h.y)/x;if(v.x=_*w+h.x,v.y=E*w+h.y,o[v.id]||(o[v.id]={x:m,y:y,texts:[]}),i.push(v),a&&2*x<s)for(var S=f[g].getContainer().getChildren(),C=S.length,k=0;k<C;k++){var M=S[k];"text"===M.get("type")&&(o[v.id].texts.push({visible:M.get("visible"),shape:M}),M.set("visible",!0))}}}}r.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,e=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),r=e.length,i=0;i<r;i++){var o=e[i],a=n[o.id];o.x=a.x,o.y=a.y;for(var s=a.texts.length,u=0;u<s;u++){var c=a.texts[u];c.shape.set("visible",c.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var e=this,n=t.r,r=t.d,i=t.trigger,o=t.minD,a=t.maxD,s=t.minR,u=t.maxR,c=t.scaleDBy,l=t.scaleRBy;isNaN(t.r)||(e.set("r",n),e.set("r2",n*n)),isNaN(r)||e.set("d",r),isNaN(a)||e.set("maxD",a),isNaN(o)||e.set("minD",o),isNaN(u)||e.set("maxR",u),isNaN(s)||e.set("minR",s);var f,d=e.get("d"),h=e.get("r");e.set("molecularParam",(d+1)*h),"mousemove"!==i&&"click"!==i&&"drag"!==i||e.set("trigger",i),("drag"===c||"wheel"===c||"unset"===c)&&(e.set("scaleDBy",c),e.get("delegate").remove(),e.get("delegate").destroy(),(f=e.get("dPercentText"))&&(f.remove(),f.destroy())),"drag"!==l&&"wheel"!==l&&"unset"!==l||(e.set("scaleRBy",l),e.get("delegate").remove(),e.get("delegate").destroy(),(f=e.get("dPercentText"))&&(f.remove(),f.destroy()))},e.prototype.updateDelegate=function(t,e){var n=this,r=this,i=r.get("graph"),o=r.get("delegate");if(!o||o.destroyed){var a=i.get("group"),s=r.get("delegateStyle")||Lh;o=a.addShape("circle",{attrs:Dh({r:e/1.5,x:t.x,y:t.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?o.on("mousewheel",(function(t){r.scaleRByWheel(t)})):"drag"===this.get("scaleRBy")&&(o.on("dragstart",(function(t){r.set("dragging",!0),r.set("cacheCenter",{x:t.x,y:t.y}),r.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){r.scaleRByDrag(t)})),o.on("dragend",(function(t){r.set("dragging",!1)}))),"wheel"===this.get("scaleDBy")?o.on("mousewheel",(function(t){n.scaleDByWheel(t)})):"drag"===this.get("scaleDBy")&&(o.on("dragstart",(function(t){r.set("dragging",!0),r.set("cacheCenter",{x:t.x,y:t.y}),r.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){n.scaleDByDrag(t)})),o.on("dragend",(function(t){r.set("dragging",!1)}))))}else o.attr({x:t.x,y:t.y,r:e/1.5});if(r.get("showDPercent")){var u=Math.round((r.get("d")-r.get("minD"))/(r.get("maxD")-r.get("minD"))*100),c=r.get("dPercentText"),l=t.y+e/1.5+16;!c||c.destroyed?(c=i.get("group").addShape("text",{attrs:{text:"".concat(u,"%"),x:t.x,y:l,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),r.set("dPercentText",c)):c.attr({text:"".concat(u,"%"),x:t.x,y:l})}r.set("delegate",o)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(dh),jh=Rh,Bh=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&yh()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var Fh=function(t){function e(e){return t.call(this,e)||this}return Bh(e,t),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},e.prototype.init=function(){var t=this,e=this.get("graph"),n=this.get("getContent")(e),r=n;(0,b.isString)(n)&&(r=th(n));var i=this.get("className");r.setAttribute("class",i||"g6-component-toolbar");var o=this.get("container");o||(o=this.get("graph").get("container")),(0,b.isString)(o)&&(o=document.getElementById(o)),o.appendChild(r),this.set("toolBar",r);var a=this.get("handleClick");r.addEventListener("click",(function(n){var r=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;){if(e.push(n),"HTML"===n.tagName)return e.push(document,window),e;n=n.parentElement}return e}(n).filter((function(t){return"LI"===t.nodeName}));if(0!==r.length){var i=r[0].getAttribute("code");i&&(a?a(i,e):t.handleDefaultOperator(i))}}));var s=this.get("position");s&&ch(r,{top:"".concat(s.y,"px"),left:"".concat(s.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),r=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');e&&n&&r&&i&&(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),t.on("stackchange",(function(t){var o=t.undoStack,a=t.redoStack,s=o.length,u=a.length;0===s?(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),n.removeAttribute("style")),0===u?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style"))})))},e.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(e&&0!==e.length){var n=e.pop();if(n){var r=n.action;t.pushStack(r,(0,b.clone)(n.data),"redo");var i=n.data.before;if("add"===r&&(i=n.data.after),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);delete e.id,t.updateItem(n,e,!1),"combo"===n.getType()&&t.updateCombo(n)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"add":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.removeItem(e.id,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"createCombo":var o=n.data.after.combos,a=o[o.length-1];Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))})),t.removeItem(a.id,!1);break;case"uncombo":var s=i.combos[i.combos.length-1],u=i.nodes.concat(i.combos).map((function(t){return t.id})).filter((function(t){return t!==s.id}));t.createCombo(s,u,!1);break;case"layout":t.updateLayout(i,void 0,void 0,!1)}}}},e.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(e&&0!==e.length){var n=e.pop();if(n){var r=n.action,i=n.data.after;if(t.pushStack(r,(0,b.clone)(n.data)),"delete"===r&&(i=n.data.before),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);delete e.id,t.updateItem(n,e,!1),"combo"===n.getType()&&t.updateCombo(n)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach((function(e){t.removeItem(e.id,!1)})),i.nodes&&i.nodes.forEach((function(e){t.removeItem(e.id,!1)})),i.combos&&i.combos.forEach((function(e){t.removeItem(e.id,!1)}));break;case"add":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"createCombo":var o=i.combos[i.combos.length-1];t.createCombo(o,o.children.map((function(t){return t.id})),!1);break;case"uncombo":var a=n.data.before.combos,s=a[a.length-1];t.uncombo(s.id,!1);break;case"layout":t.updateLayout(i,void 0,void 0,!1)}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),e=t.getZoom(),n=1/(1-.05*this.get("zoomSensitivity"));n*e>(this.get("maxZoom")||t.get("maxZoom"))||t.zoomTo(e*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),e=t.getZoom(),n=1-.05*this.get("zoomSensitivity");n*e<(this.get("minZoom")||t.get("minZoom"))||t.zoomTo(e*n)},e.prototype.realZoom=function(){this.get("graph").zoomTo(1)},e.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,b.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(dh),zh=Fh,$h=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&yh()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var Gh=function(t){function e(e){return t.call(this,e)||this}return $h(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>".concat(t.item.getType(),"</h4>\n          <span class='tooltip-id'>ID").concat(t.item.getID(),"</span>\n        ")},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,e=t.get("className")||"g6-component-tooltip",n=th("<div class='".concat(e,"'></div>")),r=t.get("container");r||(r=t.get("graph").get("container")),(0,b.isString)(r)&&(r=document.getElementById(r)),ch(n,{position:"absolute",visibility:"hidden",display:"none"}),r.appendChild(n),"click"!==t.get("trigger")&&(n.addEventListener("mouseenter",(function(t){ch(n,{visibility:"visible",display:"unset"})})),n.addEventListener("mouseleave",(function(e){t.hideTooltip()}))),t.set("tooltip",n)},e.prototype.onClick=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,r=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),r.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),r.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,r=this.get("graph");this.currentTarget=n,this.showTooltip(t),r.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var e=this.get("itemTypes");if(!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=this.get("tooltip"),r=this.get("getContent")(t);(0,b.isString)(r)?n.innerHTML=r:(this.clearContainer(),n.appendChild(r)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&ch(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),n=this.get("tooltip");if(e(t)){var r=this.get("graph"),i=r.get("width"),o=r.get("height"),a=this.get("offsetX")||0,s=this.get("offsetY")||0,u=r.getPointByClient(t.clientX,t.clientY),c=this.get("fixToNode"),l=t.item;if(l.getType&&"node"===l.getType()&&c&&(0,b.isArray)(c)&&c.length>=2){var f=l.getBBox();u={x:f.minX+f.width*c[0],y:f.minY+f.height*c[1]}}var d=r.getCanvasByPoint(u.x,u.y),h=d.x,p=d.y,g=r.getContainer(),v={x:h+g.offsetLeft+a,y:p+g.offsetTop+s};ch(n,{visibility:"visible",display:"unset"});var m=n.getBoundingClientRect();h+m.width+a>i&&(v.x-=m.width+a),p+m.height+s>o&&(v.y-=m.height+s),ch(n,{left:"".concat(v.x,"px"),top:"".concat(v.y,"px")})}else ch(n,{visibility:"hidden",display:"none"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,b.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(dh),Vh=Gh,Uh={};function Wh(t,e){Uh[t]=e}var Hh=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){(0,b.assign)(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return(0,b.map)(this.ticks,(function(e,n){return(0,b.isObject)(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}}))},t.prototype.getText=function(t,e){var n=this.formatter,r=n?n(t,e):t;return(0,b.isNil)(r)||!(0,b.isFunction)(r.toString)?"":r.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){(0,b.assign)(this,this.__cfg__),this.setDomain(),(0,b.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if((0,b.isString)(t)){var n=Uh[t];if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else(0,b.isFunction)(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(t,e,n){return(0,b.isNumber)(t)?(t-e)/(n-e):NaN},t.prototype.calcValue=function(t,e,n){return e+t*(n-e)},t}(),Yh=Hh,Xh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return(0,y.__extends)(e,t),e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var e=this.translateIndexMap.get(t);return void 0===e&&(e=(0,b.isNumber)(t)?t:NaN),e},e.prototype.scale=function(t){var e=this.translate(t),n=this.calcPercent(e,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),r=Math.round(e*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},e.prototype.getText=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e;return(0,b.isNumber)(e)&&!this.values.includes(e)&&(i=this.values[i]),t.prototype.getText.apply(this,(0,y.__spreadArrays)([i],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,b.isNil)(this.getConfig("min"))&&(this.min=0),(0,b.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(Yh),qh=Xh,Zh=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Kh="\\d\\d?",Jh="\\d\\d",Qh="[^\\s]+",tp=/\[([^]*?)\]/gm;function ep(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var np=function(t){return function(e,n){var r=n[t].map((function(t){return t.toLowerCase()})),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function rp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o)t[a]=o[a]}return t}var ip=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],op=["January","February","March","April","May","June","July","August","September","October","November","December"],ap=ep(op,3),sp={dayNamesShort:ep(ip,3),dayNames:ip,monthNamesShort:ap,monthNames:op,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},up=rp({},sp),cp=function(t){return up=rp(up,t)},lp=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},fp=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},dp={D:function(t){return String(t.getDate())},DD:function(t){return fp(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return fp(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return fp(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return fp(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return fp(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return fp(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return fp(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return fp(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return fp(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return fp(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return fp(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+fp(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+fp(Math.floor(Math.abs(e)/60),2)+":"+fp(Math.abs(e)%60,2)}},hp=function(t){return+t-1},pp=[null,Kh],gp=[null,Qh],vp=["isPm",Qh,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],mp=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}],yp={D:["day",Kh],DD:["day",Jh],Do:["day",Kh+Qh,function(t){return parseInt(t,10)}],M:["month",Kh,hp],MM:["month",Jh,hp],YY:["year",Jh,function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour",Kh,void 0,"isPm"],hh:["hour",Jh,void 0,"isPm"],H:["hour",Kh],HH:["hour",Jh],m:["minute",Kh],mm:["minute",Jh],s:["second",Kh],ss:["second",Jh],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond",Jh,function(t){return 10*+t}],SSS:["millisecond","\\d{3}"],d:pp,dd:pp,ddd:gp,dddd:gp,MMM:["month",Qh,np("monthNamesShort")],MMMM:["month",Qh,np("monthNames")],a:vp,A:vp,ZZ:mp,Z:mp},bp={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},xp=function(t){return rp(bp,t)},wp=function(t,e,n){if(void 0===e&&(e=bp.default),void 0===n&&(n={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=bp[e]||e;var r=[];e=e.replace(tp,(function(t,e){return r.push(e),"@@@"}));var i=rp(rp({},up),n);return(e=e.replace(Zh,(function(e){return dp[e](t,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function _p(t,e,n){if(void 0===n&&(n={}),"string"!=typeof e)throw new Error("Invalid format in fecha parse");if(e=bp[e]||e,t.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=e.replace(tp,(function(t,e){return o.push(lp(e)),"@@@"})),s={},u={};a=lp(a).replace(Zh,(function(t){var e=yp[t],n=e[0],r=e[1],o=e[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,o&&(u[o]=!0),i.push(e),"("+r+")"})),Object.keys(u).forEach((function(t){if(!s[t])throw new Error("Invalid format. "+t+" is required in specified format")})),a=a.replace(/@@@/g,(function(){return o.shift()}));var c=t.match(new RegExp(a,"i"));if(!c)return null;for(var l,f=rp(rp({},up),n),d=1;d<c.length;d++){var h=i[d-1],p=h[0],g=h[2],v=g?g(c[d],f):+c[d];if(null==v)return null;r[p]=v}if(1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0),null==r.timezoneOffset){l=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond);for(var m=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(d=0,m.length);d<y;d++)if(s[m[d][0]]&&r[m[d][0]]!==l[m[d][1]]())return null}else if(l=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),r.month>11||r.month<0||r.day>31||r.day<1||r.hour>23||r.hour<0||r.minute>59||r.minute<0||r.second>59||r.second<0)return null;return l}var Ep={format:wp,parse:_p,defaultI18n:sp,setGlobalDateI18n:cp,setGlobalDateMasks:xp},Sp="format";function Cp(t,e){return(m[Sp]||Ep[Sp])(t,e)}function kp(t){return(0,b.isString)(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),(0,b.isDate)(t)&&(t=t.getTime()),t}var Mp=1e3,Op=6e4,Tp=36e5,Ap=24*Tp,Np=31*Ap,Ip=365*Ap,Pp=[["HH:mm:ss",Mp],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",Op],["HH:mm",6e5],["HH:mm",18e5],["HH",Tp],["HH",6*Tp],["HH",12*Tp],["YYYY-MM-DD",Ap],["YYYY-MM-DD",4*Ap],["YYYY-WW",7*Ap],["YYYY-MM",Np],["YYYY-MM",4*Np],["YYYY-MM",6*Np],["YYYY",380*Ap]];var Dp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="timeCat",e}return(0,y.__extends)(e,t),e.prototype.translate=function(t){t=kp(t);var e=this.values.indexOf(t);return-1===e&&(e=(0,b.isNumber)(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var n=this.translate(t);if(n>-1){var r=this.values[n],i=this.formatter;return i?i(r,e):Cp(r,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;(0,b.each)(e,(function(t,n){e[n]=kp(t)})),e.sort((function(t,e){return t-e})),t.prototype.setDomain.call(this)},e}(qh),Lp=Dp,Rp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return(0,y.__extends)(e,t),e.prototype.scale=function(t){if((0,b.isNil)(t))return NaN;var e=this.rangeMin(),n=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(n-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,n=(0,b.head)(e),r=(0,b.last)(e);n<this.min&&(this.min=n),r>this.max&&(this.max=r),(0,b.isNil)(this.minLimit)||(this.min=n),(0,b.isNil)(this.maxLimit)||(this.max=r)},e.prototype.setDomain=function(){var t=(0,b.getRange)(this.values),e=t.min,n=t.max;(0,b.isNil)(this.min)&&(this.min=e),(0,b.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=e,this.max=n)},e.prototype.calculateTicks=function(){var e=this,n=t.prototype.calculateTicks.call(this);return this.nice||(n=(0,b.filter)(n,(function(t){return t>=e.min&&t<=e.max}))),n},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;return(t-n)/(e-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Yh),jp=Rp,Bp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return(0,y.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(jp),Fp=Bp;function zp(t,e){var n=Math.E;return e>=0?Math.pow(n,Math.log(e)/t):-1*Math.pow(n,Math.log(-e)/t)}function $p(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function Gp(t,e,n){(0,b.isNil)(n)&&(n=Math.max.apply(null,t));var r=n;return(0,b.each)(t,(function(t){t>0&&t<r&&(r=t)})),r===n&&(r=n/e),r>1&&(r=1),r}var Vp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return(0,y.__extends)(e,t),e.prototype.invert=function(t){var e,n=this.base,r=$p(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===t)return 0;var s=1/(r-(e=$p(n,a/n)))*o;if(t<s)return t/s*a}else e=$p(n,this.min);var u=(t-i)/o*(r-e)+e;return Math.pow(n,u)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=Gp(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;if(t<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),t<i?t/i/($p(r,e)-$p(r,n)):($p(r,t)-$p(r,n))/($p(r,e)-$p(r,n))},e}(jp),Up=Vp,Wp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return(0,y.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),n=this.exponent,r=zp(n,this.max),i=zp(n,this.min),o=e*(r-i)+i,a=o>=0?1:-1;return Math.pow(o,n)*a},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;var r=this.exponent;return(zp(r,t)-zp(r,n))/(zp(r,e)-zp(r,n))},e}(jp),Hp=Wp,Yp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return(0,y.__extends)(e,t),e.prototype.getText=function(t,e){var n=this.translate(t),r=this.formatter;return r?r(n,e):Cp(n,this.mask)},e.prototype.scale=function(e){var n=e;return((0,b.isString)(n)||(0,b.isDate)(n))&&(n=this.translate(n)),t.prototype.scale.call(this,n)},e.prototype.translate=function(t){return kp(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),n=this.getConfig("max");if((0,b.isNil)(e)&&(0,b.isNumber)(e)||(this.min=this.translate(this.min)),(0,b.isNil)(n)&&(0,b.isNumber)(n)||(this.max=this.translate(this.max)),t&&t.length){var r=[],i=1/0,o=i,a=0;(0,b.each)(t,(function(t){var e=kp(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");i>e?(o=i,i=e):o>e&&(o=e),a<e&&(a=e),r.push(e)})),t.length>1&&(this.minTickInterval=o-i),(0,b.isNil)(e)&&(this.min=i),(0,b.isNil)(n)&&(this.max=a)}},e}(Fp),Xp=Yp,qp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return(0,y.__extends)(e,t),e.prototype.invert=function(t){var e=this.ticks,n=e.length,r=this.getInvertPercent(t),i=Math.floor(r*(n-1));if(i>=n-1)return(0,b.last)(e);if(i<0)return(0,b.head)(e);var o=e[i],a=i/(n-1);return o+(r-a)/((i+1)/(n-1)-a)*(e[i+1]-o)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||((0,b.last)(e)!==this.max&&e.push(this.max),(0,b.head)(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<(0,b.head)(e))return 0;if(t>(0,b.last)(e))return 1;var n=0;return(0,b.each)(e,(function(e,r){if(!(t>=e))return!1;n=r})),n/(e.length-1)},e}(jp),Zp=qp,Kp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return(0,y.__extends)(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Zp),Jp=Kp,Qp={};function tg(t,e){if(function(t){return Qp[t]}(t))throw new Error("type '"+t+"' existed.");Qp[t]=e}var eg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return(0,y.__extends)(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,b.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(Yh),ng=eg;function rg(t){var e=t.values,n=t.tickInterval,r=t.tickCount,i=t.showLast;if((0,b.isNumber)(n)){var o=(0,b.filter)(e,(function(t,e){return e%n==0})),a=(0,b.last)(e);return i&&(0,b.last)(o)!==a&&o.push(a),o}var s=e.length,u=t.min,c=t.max;if((0,b.isNil)(u)&&(u=0),(0,b.isNil)(c)&&(c=e.length-1),!(0,b.isNumber)(r)||r>=s)return e.slice(u,c+1);if(r<=0||c<=0)return[];for(var l=1===r?s:Math.floor(s/(r-1)),f=[],d=u,h=0;h<r&&!(d>=c);h++)d=Math.min(u+h*l,c),h===r-1&&i?f.push(e[c]):f.push(e[d]);return f}var ig=Math.sqrt(50),og=Math.sqrt(10),ag=Math.sqrt(2),sg=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,n;void 0===t&&(t=5);var r,i=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],u=this._domain[a];return u<s&&(s=(e=[u,s])[0],u=e[1],o=(n=[a,o])[0],a=n[1]),(r=ug(s,u,t))>0?r=ug(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,t):r<0&&(r=ug(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,t)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,this.domain(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,this.domain(i)),this},t.prototype.ticks=function(t){return void 0===t&&(t=5),function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=ug(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o}(this._domain[0],this._domain[this._domain.length-1],t||5)},t}();function ug(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ig?10:o>=og?5:o>=ag?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ig?10:o>=og?5:o>=ag?2:1)}function cg(t,e,n){return("ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e))*e}function lg(t,e,n){var r=cg(t,n,"floor"),i=cg(e,n,"ceil");r=(0,b.fixedBase)(r,n),i=(0,b.fixedBase)(i,n);for(var o=[],a=Math.max((i-r)/(Math.pow(2,12)-1),n),s=r;s<=i;s+=a){var u=(0,b.fixedBase)(s,a);o.push(u)}return{min:r,max:i,ticks:o}}function fg(t,e,n){var r,i=t.minLimit,o=t.maxLimit,a=t.min,s=t.max,u=t.tickCount,c=void 0===u?5:u,l=(0,b.isNil)(i)?(0,b.isNil)(e)?a:e:i,f=(0,b.isNil)(o)?(0,b.isNil)(n)?s:n:o;if(l>f&&(f=(r=[l,f])[0],l=r[1]),c<=2)return[l,f];for(var d=(f-l)/(c-1),h=[],p=0;p<c;p++)h.push(l+d*p);return h}function dg(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var hg=[1,5,2,2.5,4,3],pg=100*Number.EPSILON;function gg(t,e,n,r,i,o){var a=(0,b.size)(e),s=(0,b.indexOf)(e,t),u=0,c=function(t,e){return(t%e+e)%e}(r,o);return(c<pg||o-c<pg)&&r<=0&&i>=0&&(u=1),1-s/(a-1)-n+u}function vg(t,e,n){var r=(0,b.size)(e);return 1-(0,b.indexOf)(e,t)/(r-1)-n+1}function mg(t,e,n,r,i,o){var a=(t-1)/(o-i),s=(e-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function yg(t,e){return t>=e?2-(t-1)/(e-1):1}function bg(t,e,n,r){var i=e-t;return 1-.5*(Math.pow(e-r,2)+Math.pow(t-n,2))/Math.pow(.1*i,2)}function xg(t,e,n){var r=e-t;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function wg(t,e,n){if(void 0===n&&(n=5),t===e)return{max:e,min:t,ticks:[t]};var r=n<0?0:Math.round(n);if(0===r)return{max:e,min:t,ticks:[]};var i=(e-t)/r,o=Math.pow(10,Math.floor(Math.log10(i))),a=o;2*o-i<1.5*(i-a)&&5*o-i<2.75*(i-(a=2*o))&&10*o-i<1.5*(i-(a=5*o))&&(a=10*o);for(var s=Math.ceil(e/a),u=Math.floor(t/a),c=Math.max(s*a,e),l=Math.min(u*a,t),f=Math.floor((c-l)/a)+1,d=new Array(f),h=0;h<f;h++)d[h]=dg(l+h*a);return{min:l,max:c,ticks:d}}function _g(t,e){var n=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function Eg(t){return new Date(t).getFullYear()}function Sg(t){return new Date(t,0,1).getTime()}function Cg(t){return new Date(t).getMonth()}function kg(t,e){return new Date(t,e,1).getTime()}Wh("cat",rg),Wh("time-cat",(function(t){return rg((0,y.__assign)({showLast:!0},t))})),Wh("wilkinson-extended",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.nice,o=t.tickInterval,a=t.minLimit,s=t.maxLimit,u=function(t,e,n,r,i,o){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=hg),void 0===o&&(o=[.25,.2,.5,.05]);var a=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||"number"!=typeof t||"number"!=typeof e||!a)return{min:0,max:0,ticks:[]};if(e-t<1e-15||1===a)return{min:t,max:e,ticks:[t]};if(e-t>1e148){var s=(e-t)/(_=n||5);return{min:t,max:e,ticks:Array(_).fill(null).map((function(e,n){return dg(t+s*n)}))}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<i.length;l+=1){var f=i[l],d=vg(f,i,c);if(o[0]*d+o[1]+o[2]+o[3]<u.score){c=1/0;break}for(var h=2;h<1/0;){var p=yg(h,a);if(o[0]*d+o[1]+o[2]*p+o[3]<u.score)break;for(var g=(e-t)/(h+1)/c/f,v=Math.ceil(Math.log10(g));v<1/0;){var m=c*f*Math.pow(10,v),y=xg(t,e,m*(h-1));if(o[0]*d+o[1]*y+o[2]*p+o[3]<u.score)break;var x=Math.floor(e/m)*c-(h-1)*c,w=Math.ceil(t/m)*c;if(x<=w)for(var _=w-x,E=0;E<=_;E+=1){var S=(x+E)*(m/c),C=S+m*(h-1),k=m,M=gg(f,i,c,S,C,k),O=bg(t,e,S,C),T=mg(h,a,t,e,S,C),A=o[0]*M+o[1]*O+o[2]*T+1*o[3];A>u.score&&(!r||S<=t&&C>=e)&&(u.lmin=S,u.lmax=C,u.lstep=k,u.score=A)}v+=1}h+=1}}c+=1}var N=dg(u.lmax),I=dg(u.lmin),P=dg(u.lstep),D=Math.floor(function(t){return Math.round(1e12*t)/1e12}((N-I)/P))+1,L=new Array(D);for(L[0]=dg(I),l=1;l<D;l++)L[l]=dg(L[l-1]+P);return{min:Math.min(t,(0,b.head)(L)),max:Math.max(e,(0,b.last)(L)),ticks:L}}(e,n,r,i).ticks;return(0,b.isNil)(a)&&(0,b.isNil)(s)?o?lg(e,n,o).ticks:u:fg(t,(0,b.head)(u),(0,b.last)(u))})),Wh("r-pretty",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.tickInterval,o=t.minLimit,a=t.maxLimit,s=wg(e,n,r).ticks;return(0,b.isNil)(o)&&(0,b.isNil)(a)?i?lg(e,n,i).ticks:s:fg(t,(0,b.head)(s),(0,b.last)(s))})),Wh("time",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickInterval,o=t.tickCount;if(i)o=Math.ceil((n-e)/i);else{var a=(n-e)/(i=function(t,e,n){var r,i=(r=function(t){return t[1]},function(t,e,n,i){for(var o=(0,b.isNil)(n)?0:n,a=(0,b.isNil)(i)?t.length:i;o<a;){var s=o+a>>>1;r(t[s])>e?a=s:o=s+1}return o})(Pp,(e-t)/n)-1,o=Pp[i];return i<0?o=Pp[0]:i>=Pp.length&&(o=(0,b.last)(Pp)),o}(e,n,o)[1])/o;a>1&&(i*=Math.ceil(a)),r&&i<r&&(i=r)}i=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),i);for(var s=[],u=e;u<n+i;u+=i)s.push(u);return s})),Wh("time-pretty",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickCount,o=t.tickInterval,a=[];o||(o=(n-e)/i,r&&o<r&&(o=r)),o=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),o);var s=Eg(e);if(o>Ip)for(var u=Eg(n),c=Math.ceil(o/Ip),l=s;l<=u+c;l+=c)a.push(Sg(l));else if(o>Np){var f=Math.ceil(o/Np),d=Cg(e),h=function(t,e){var n=Eg(t),r=Eg(e),i=Cg(t);return 12*(r-n)+(Cg(e)-i)%12}(e,n);for(l=0;l<=h+f;l+=f)a.push(kg(s,l+d))}else if(o>Ap){var p=(b=new Date(e)).getFullYear(),g=b.getMonth(),v=b.getDate(),m=Math.ceil(o/Ap),y=function(t,e){return Math.ceil((e-t)/Ap)}(e,n);for(l=0;l<y+m;l+=m)a.push(new Date(p,g,v+l).getTime())}else if(o>Tp){p=(b=new Date(e)).getFullYear(),g=b.getMonth(),m=b.getDate();var b,x=b.getHours(),w=Math.ceil(o/Tp),_=function(t,e){return Math.ceil((e-t)/Tp)}(e,n);for(l=0;l<=_+w;l+=w)a.push(new Date(p,g,m,x+l).getTime())}else if(o>Op){var E=function(t,e){return Math.ceil((e-t)/6e4)}(e,n),S=Math.ceil(o/Op);for(l=0;l<=E+S;l+=S)a.push(e+l*Op)}else{var C=o;C<Mp&&(C=Mp);var k=Math.floor(e/Mp)*Mp,M=Math.ceil((n-e)/Mp),O=Math.ceil(C/Mp);for(l=0;l<M+O;l+=O)a.push(k+l*Mp)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a})),Wh("log",(function(t){var e,n=t.base,r=t.tickCount,i=t.min,o=t.max,a=t.values,s=$p(n,o);if(i>0)e=Math.floor($p(n,i));else{var u=Gp(a,n,o);e=Math.floor($p(n,u))}for(var c=s-e,l=Math.ceil(c/r),f=[],d=e;d<s+l;d+=l)f.push(Math.pow(n,d));return i<=0&&f.unshift(0),f})),Wh("pow",(function(t){var e=t.exponent,n=t.tickCount,r=Math.ceil(zp(e,t.max));return wg(Math.floor(zp(e,t.min)),r,n).ticks.map((function(t){var n=t>=0?1:-1;return Math.pow(t,e)*n}))})),Wh("quantile",(function(t){var e=t.tickCount,n=t.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(t,e){return t-e})),i=[],o=0;o<e;o++){var a=o/(e-1);i.push(_g(r,a))}return i})),Wh("d3-linear",(function(t){var e=t.min,n=t.max,r=t.tickInterval,i=t.minLimit,o=t.maxLimit,a=function(t){var e=t.min,n=t.max,r=t.nice,i=t.tickCount,o=new sg;return o.domain([e,n]),r&&o.nice(i),o.ticks(i)}(t);return(0,b.isNil)(i)&&(0,b.isNil)(o)?r?lg(e,n,r).ticks:a:fg(t,(0,b.head)(a),(0,b.last)(a))})),tg("cat",qh),tg("category",qh),tg("identity",ng),tg("linear",Fp),tg("log",Up),tg("pow",Hp),tg("time",Xp),tg("timeCat",Lp),tg("quantize",Zp),tg("quantile",Jp);var Mg=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function Og(t){return function(t){return(0,b.map)(t,(function(t,e){return[0===e?"M":"L",t[0],t[1]]}))}(t)}function Tg(t,e,n,r){void 0===r&&(r=5);for(var i=new Fp({values:t}),o=new qh({values:(0,b.map)(t,(function(t,e){return e}))}),a=(0,b.map)(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]})),s=[],u=0;u<a.length;u++){var c=a[u],l=Ag({x:c[0],y:c[1],y0:n,size:r});s.push.apply(s,l)}return function(t,e){void 0===e&&(e=!0);var n=[],r=t[0];n.push(["M",r.x,r.y]);for(var i=1,o=t.length;i<o;i++)n.push(["L",t[i].x,t[i].y]);return e&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}(s)}function Ag(t){var e,n,r,i,o=t.x,a=t.y,s=t.y0,u=t.size;(0,b.isArray)(a)?(e=a[0],n=a[1]):(e=s,n=a),(0,b.isArray)(o)?(r=o[0],i=o[1]):(r=o-u/2,i=o+u/2);var c=[{x:r,y:e},{x:r,y:n}];return c.push({x:i,y:n},{x:i,y:e}),c}var Ng=function(){return Ng=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ng.apply(this,arguments)},Ig={stroke:"#C5C5C5",strokeOpacity:.85},Pg={fill:"#CACED4",opacity:.85},Dg=function(){function t(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,a=void 0===o?200:o,s=t.height,u=void 0===s?26:s,c=t.smooth,l=void 0===c||c,f=t.isArea,d=void 0!==f&&f,h=t.data,p=void 0===h?[]:h,g=t.lineStyle,v=t.areaStyle,m=t.group,y=t.interval,b=void 0===y?null:y;this.group=m,this.x=n,this.y=i,this.width=a,this.height=u,this.data=p,this.smooth=l,this.isArea=d,this.lineStyle=Object.assign({},Ig,g),this.areaStyle=Object.assign({},Pg,v),this.intervalConfig=b,this.renderLine()}return t.prototype.renderLine=function(){var t=this,e=t.x,n=t.y,r=t.width,i=t.height,o=(t.barWidth,t.data),a=t.smooth,s=t.isArea,u=t.lineStyle,c=t.areaStyle,l=this.group.addGroup({name:"trend-group"});if(o){var f=function(t,e,n,r){void 0===r&&(r=!0);var i=new Fp({values:t}),o=new qh({values:(0,b.map)(t,(function(t,e){return e}))}),a=(0,b.map)(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]}));return r?function(t){if(t.length<=2)return Og(t);var e=[];(0,b.each)(t,(function(t){(0,b.isEqual)(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var n=_a(e,!1),r=(0,b.head)(t),i=r[0],o=r[1];return n.unshift(["M",i,o]),n}(a):Og(a)}(o,r,i,a);if(l.addShape("path",{attrs:Ng({path:f},u),name:"trend-line"}),s){var d=function(t,e,n,r){var i=Mg([],t,!0),o=function(t,e){var n=new Fp({values:t}),r=Math.max(0,n.min);return e-n.scale(r)*e}(r,n);return i.push(["L",e,o]),i.push(["L",0,o]),i.push(["Z"]),i}(f,r,i,o);l.addShape("path",{attrs:Ng({path:d},c),name:"trend-area"})}}this.intervalConfig&&l.addShape("path",{attrs:Ng({path:Tg(this.intervalConfig.data,r,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),l.move(e,n)},t.prototype.destory=function(){this.group.destroy()},t}(),Lg=Dg,Rg=function(){return Rg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Rg.apply(this,arguments)},jg={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Bg={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},Fg=function(){function t(t){var e=t.group,n=t.name,r=t.type,i=t.x,o=void 0===i?0:i,a=t.y,s=void 0===a?0:a,u=t.width,c=void 0===u?2:u,l=t.height,f=void 0===l?24:l,d=t.style,h=void 0===d?{}:d;this.group=e,this.name=n,this.handleType=r,this.x=o,this.y=s,this.width=c,this.height=f,"trend"===r?this.style=Rg(Rg({},jg),h):"simple"===r&&(this.style=Rg(Rg({},Bg),h)),this.renderHandle()}return t.prototype.setX=function(t){this.setXY(t,void 0)},t.prototype.setY=function(t){this.setXY(void 0,t)},t.prototype.setXY=function(t,e){(0,b.isNumber)(t)&&(this.x=t),(0,b.isNumber)(e)&&(this.y=e),this.updateXY()},t.prototype.renderHandle=function(){var t=this,e=t.width,n=t.height,r=t.style,i=t.name,o=r.fill,a=r.stroke,s=r.radius,u=r.opacity,c=r.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:n,fill:o,stroke:a,radius:s,opacity:u,cursor:c},name:"".concat(i,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:o,stroke:a,radius:s,opacity:u,cursor:c,lineAppendWidth:12},name:"".concat(i,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n,r:2*e,fill:o,stroke:a,radius:s,opacity:u,cursor:c},name:"".concat(i,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n/2,r:2*e,fill:o,stroke:a,radius:s,opacity:u,cursor:c,lineWidth:2},name:"".concat(i,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},t.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.topCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.topCircle.attr("fill",e)}))},t.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)}))},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}(),zg=Fg,$g="timebarstartplay",Gg="timebarendplay",Vg="valuechange",Ug="timebarConfigChanged",Wg="playPauseBtn",Hg="nextStepBtn",Yg="preStepBtn",Xg=function(){return Xg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xg.apply(this,arguments)},qg=function(){function t(t){this.config=(0,b.deepMix)({},t),this.init()}return t.prototype.update=function(t){this.config=(0,b.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var t=this.config,e=t.group,n=t.style,r=n.scale,i=void 0===r?1:r,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,u=void 0===s?0:s,c=this.config.x+a,l=this.config.y+u,f=e.addGroup({name:Wg});this.startMarkerGroup=f.addGroup({name:Wg}),this.circle=e.addShape("circle",{attrs:Xg({x:c,y:l,r:this.config.r*i},n),name:Wg}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,i),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=f.addGroup({name:Wg});var d=.25*this.config.r*i,h=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*i,y:l-h/2,width:d,height:h,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*i,y:l-h/2,width:d,height:h,fill:n.stroke||"#aaa",lineWidth:0}})},t.prototype.updateElement=function(){var t=this.config.style,e=t.scale,n=void 0===e?1:e,r=t.offsetX,i=void 0===r?0:r,o=t.offsetY,a=void 0===o?0:o,s=this.config.x+i,u=this.config.y+a;this.circle.attr("x",s),this.circle.attr("y",u),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(s,u,n));var c=.25*this.config.r*n,l=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",s-.375*this.config.r*n),this.pauseLeftMarker.attr("y",u-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",s+1/8*this.config.r*n),this.pauseRightMarker.attr("y",u-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},t.prototype.getStartMarkerPath=function(t,e,n){var r=.5*this.config.r*Math.sqrt(3)*n;return[["M",t-r/Math.sqrt(3)/2,e-r/2],["L",t+r/Math.sqrt(3),e],["L",t-r/Math.sqrt(3)/2,e+r/2]]},t}(),Zg=qg,Kg=function(){return Kg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Kg.apply(this,arguments)},Jg=N,Qg={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},tv={fill:"#fff"},ev={fill:"green"},nv={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},rv={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},iv={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:nv,timeTypeControllerStyle:rv},ov=50,av={SINGLE:"single",RANGE:"range"},sv=function(){function t(t){this.controllerCfg=(0,b.deepMix)({},iv,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||av.RANGE,this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t+n,e],["L",t,e+n],["Z",t,e-n],["M",t,e],["L",t-n,e-n],["L",t-n,e+n],["Z"]]},t.prototype.getPreMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t-n,e],["L",t,e+n],["L",t,e-n],["M",t,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]},t.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,n=t.height,r=t.x,i=t.y,o=t.hideTimeTypeController,a=t.fill,s=void 0===a?"#aaa":a,u=t.stroke,c=void 0===u?"green":u,l=t.containerStyle,f=void 0===l?{}:l,d=Kg(Kg({},Qg),t.playBtnStyle||{}),h=Kg(Kg({},tv),t.preBtnStyle||{}),p=Kg(Kg({},ev),t.nextBtnStyle||{}),g=n/2-5,v=i+10,m=this.controllerGroup.addShape("rect",{attrs:Kg({x:r,y:v,width:e,height:n,stroke:c,fill:s},f),name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:v,r:g}):this.playButton=new Zg({group:this.controllerGroup,x:e/2,y:v+g+5,r:g,isPlay:this.isPlay,style:d});var y=h.offsetX||0,b=h.offsetY||0,x=(h.scale||1)*g;this.controllerGroup.addShape("path",{attrs:Kg({path:this.getPreMarkerPath(e/2-5*g+y,v+g+5+b,.5*x)},h),name:Yg});var w=p.offsetX||0,_=p.offsetY||0,E=(p.scale||1)*g;this.controllerGroup.addShape("path",{attrs:Kg({path:this.getNextMarkerPath(e/2+5*g+w,v+g+5+_,.5*E)},p),name:Hg}),m.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var S=this.controllerCfg.scale,C=void 0===S?1:S,k=this.controllerGroup.getCanvasBBox(),M=(k.maxX+k.minX)/2,O=(k.maxY+k.minY)/2,T=Jg([1,0,0,0,1,0,0,0,1],[["t",-M,-O],["s",C,C],["t",M,O]]);this.controllerGroup.setMatrix(T)},t.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,n=t.width,r=t.hideTimeTypeController,i=Kg(Kg({},nv),this.controllerCfg.speedControllerStyle||{}),o=i.scroller,a=void 0===o?{}:o,s=i.text,u=void 0===s?{}:s,c=i.pointer,l=void 0===c?{}:c,f=i.scale,d=void 0===f?1:f,h=i.offsetX,p=void 0===h?0:h,g=i.offsetY,v=void 0===g?0:g,m=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=m;var y=[],b=5;this.speedAxisY=[19,22,26,32,39];for(var x=0;x<5;x++){var w=e+this.speedAxisY[x],_=n-(r?ov:110);m.addShape("line",{attrs:Kg({x1:_,x2:_+15,y1:w,y2:w},a),speed:b,name:"speed-rect"}),this.speedAxisY[x]=w,y.push(b),b-=1}this.speedText=m.addShape("text",{attrs:Kg({x:n-(r?ov:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u),name:"speed-text"}),this.speedPoint=m.addShape("path",{attrs:Kg({path:this.getPointerPath(n-(r?ov:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var E=this.speedGroup.getCanvasBBox(),S=(E.maxX+E.minX)/2,C=(E.maxY+E.minY)/2,k=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];k=Jg(k,[["t",-S,-C],["s",d,d],["t",S+p*d,C+v*d]]),this.speedGroup.setMatrix(k)},t.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},t.prototype.renderToggleTime=function(){var t,e,n=this.controllerCfg,r=n.width,i=n.defaultTimeType,o=Kg(Kg({},rv),this.controllerCfg.timeTypeControllerStyle||{}),a=o.scale,s=void 0===a?1:a,u=o.offsetX,c=void 0===u?0:u,l=o.offsetY,f=void 0===l?0:l,d=o.box,h=void 0===d?{}:d,p=o.check,g=void 0===p?{}:p,v=o.text,m=void 0===v?{}:v;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var y=i===av.SINGLE;this.toggleGroup.addShape("rect",{attrs:Kg({x:r-ov,y:this.speedAxisY[0]+3.5},h),isChecked:y,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Kg({path:[["M",r-ov+3,this.speedAxisY[1]+6],["L",r-ov+7,this.speedAxisY[1]+10],["L",r-ov+12,this.speedAxisY[1]+4]]},g),capture:!1,name:"check-icon"}),y||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Kg({text:y?(null===(t=this.controllerCfg)||void 0===t?void 0:t.timeRangeControllerText)||"":(null===(e=this.controllerCfg)||void 0===e?void 0:e.timePointControllerText)||"",x:r-ov+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},m),name:"checked-text"});var b=this.toggleGroup.getCanvasBBox(),x=(b.maxX+b.minX)/2,w=(b.maxY+b.minY)/2,_=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];_=Jg(_,[["t",-x,-w],["s",s,s],["t",x+c*s,w+f*s]]),this.toggleGroup.setMatrix(_)},t.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",(function(e){var n=e.target.attr("y1"),r=t.speedPoint.attr("matrix"),i=t.speedAxisY.indexOf(r[7]||0),o=t.speedAxisY.indexOf(n),a=t.speedAxisY[o]-t.speedAxisY[i];r=Jg(r,[["t",0,a]]),t.speedPoint.setMatrix(r),t.currentSpeed=t.speedAxisY.length-o,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(Ug,{speed:t.currentSpeed,type:t.currentType})})),this.speedGroup.on("mousewheel",(function(e){e.preventDefault();var n=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],r=n[7],i=t.speedAxisY.indexOf(r);if(-1===i){var o=1/0;t.speedAxisY.forEach((function(t,e){var n=Math.abs(t-r);o>n&&(o=n,i=e)}))}i=e.originalEvent.deltaY>0?Math.max(0,i-1):Math.min(t.speedAxisY.length-1,i+1);var a=t.speedAxisY[i]-r;n=Jg(n,[["t",0,a]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-i,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(Ug,{speed:t.currentSpeed,type:t.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(e){var n,r,i=e.target.get("isChecked");i?(t.checkedIcon.hide(),t.checkedText.attr("text",(null===(r=t.controllerCfg)||void 0===r?void 0:r.timePointControllerText)||""),t.currentType=av.RANGE):(t.checkedIcon.show(),t.checkedText.attr("text",(null===(n=t.controllerCfg)||void 0===n?void 0:n.timeRangeControllerText)||""),t.currentType=av.SINGLE),e.target.set("isChecked",!i),t.group.emit(Ug,{type:t.currentType,speed:t.currentSpeed})}))},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}(),uv=sv,cv=function(){return cv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},cv.apply(this,arguments)},lv=N,fv={fill:"#416180",opacity:.05},dv={fill:"#416180",opacity:.15,radius:5},hv={fill:"#5B8FF9",opacity:.3,cursor:"grab"},pv={width:2,height:24},gv={textBaseline:"middle",fill:"#000",opacity:.45},vv={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},mv={lineWidth:1,stroke:"#ccc"},yv=function(){function t(t){var e=this;this.prevX=0,this.onMouseDown=function(t){return function(n){e.currentHandler=t;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),e.prevX=(0,b.get)(r,"touches.0.pageX",r.pageX);var i=e.canvas.get("container");i.addEventListener("mousemove",e.onMouseMove),i.addEventListener("mouseup",e.onMouseUp),i.addEventListener("mouseleave",e.onMouseUp),i.addEventListener("touchmove",e.onMouseMove),i.addEventListener("touchend",e.onMouseUp),i.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();var n=(0,b.get)(t,"touches.0.pageX",t.pageX),r=n-e.prevX,i=e.adjustOffsetRange(r/e.width);e.updateStartEnd(i),e.updateUI(),e.prevX=n},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var t=e.canvas.get("container");t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))};var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.width,s=void 0===a?100:a,u=t.height,c=t.padding,l=void 0===c?10:c,f=t.trendCfg,d=t.controllerCfg,h=void 0===d?{speed:1}:d,p=t.backgroundStyle,g=void 0===p?{}:p,v=t.foregroundStyle,m=void 0===v?{}:v,y=t.handlerStyle,x=void 0===y?{}:y,w=t.textStyle,_=void 0===w?{}:w,E=t.start,S=void 0===E?0:E,C=t.end,k=void 0===C?1:C,M=t.minText,O=void 0===M?"":M,T=t.maxText,A=void 0===T?"":T,N=t.group,I=t.graph,P=t.canvas,D=t.tick,L=void 0===D?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(t){return t},ticks:[]}:D,R=t.type;this.graph=I,this.canvas=P,this.group=N,this.timeBarType=R,this.x=r,this.y=o,this.width=s,this.height=u,this.padding=l,this.ticks=L.ticks,this.trendCfg=f,this.controllerCfg=h,this.currentSpeed=h.speed||1,this.tickLabelFormatter=L.tickLabelFormatter,"trend"===R?this.backgroundStyle=cv(cv({},fv),g):"simple"===R&&(this.backgroundStyle=cv(cv({},dv),g)),this.foregroundStyle=cv(cv({},hv),m),this.handlerStyle=cv(cv({},pv),x),this.textStyle=cv(cv({},gv),_),this.tickLabelStyle=cv(cv({},vv),L.tickLabelStyle),this.tickLineStyle=cv(cv({},mv),L.tickLineStyle),this.currentMode=h.defaultTimeType||av.RANGE,this.start=S,this.end=k,this.minText=O,this.maxText=A,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return t.prototype.update=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.minText,a=t.maxText,s=t.start,u=t.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(u,0)),(0,b.assign)(this,{x:e,y:n,width:r,height:i,minText:o,maxText:a}),this.updateUI()},t.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},t.prototype.renderSlider=function(){var t=this,e=this,n=e.width,r=e.height,i=e.timeBarType;if("trend"===i&&(0,b.size)((0,b.get)(this.trendCfg,"data"))){var o=new Lg(cv(cv({x:this.x,y:this.y,width:n,height:r},this.trendCfg),{group:this.group}));this.trendComponent=o}var a=this.group.addGroup({name:"slider-group"});a.addShape("rect",{attrs:cv({x:0,y:0,width:n,height:r},this.backgroundStyle),name:"background"});var s=this.group.addGroup();"trend"===i?(this.minTextShape=s.addShape("text",{attrs:cv({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:cv({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=s.addShape("text",{attrs:cv({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:cv({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:cv({x:0,y:this.y,height:r},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",(function(t){t.target.attr("cursor","grabbing")})),this.foregroundShape.on("mouseup",(function(e){e.target.attr("cursor",t.foregroundStyle.cursor||"grab")}));var u=(0,b.get)(this.handlerStyle,"width",2),c=(0,b.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new zg({name:"minHandlerShape",group:l,type:i,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var f=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new zg({name:"maxHandlerShape",group:f,type:i,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var d=this.ticks,h=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(t){t.destroy()}));var p=-1/0,g=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=d.map((function(e,n){var i;t.tickPosList.push(t.x+n*h),t.tickLabelFormatter?(i=t.tickLabelFormatter(e),!(0,b.isString)(i)&&i&&(i=e.date)):i=e.date;var o=t.x+n*h,a=t.y+r+5,s=t.group.addShape("text",{attrs:cv({x:o,y:a,text:i,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle),name:"tick-label"});if((0,b.isNumber)(g)&&n!==d.length-1){var u=lv([1,0,0,0,1,0,0,0,1],[["t",-o,-a],["r",g],["t",o-5,a+2]]);s.attr({textAlign:"left",matrix:u})}0===n?s.attr({textAlign:"left"}):n!==d.length-1&&s.attr({textAlign:"right"});var c=t.group.addShape("line",{attrs:cv({x1:t.x+n*h,y1:t.y+r+2,x2:t.x+n*h,y2:t.y+r+6},t.tickLineStyle),name:"tick-line"});c.toBack();var l=s.getBBox();return l.minX>p?(s.show(),c.show(),p=l.minX+l.width+10):(s.hide(),c.hide()),s})),this.controllerBtnGroup=new uv(cv({group:this.group,x:this.x,y:this.y+r+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),a.move(this.x,this.y),this.bindEvents(),this.currentMode===av.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},t.prototype.bindEvents=function(){var t=this,e=this.group.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Wg,":click"),(function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()})),this.group.on("".concat(Hg,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()})),this.group.on("".concat(Yg,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()})),this.group.on(Ug,(function(e){var n=e.type,r=e.speed;t.currentSpeed=r,t.currentMode=n,n===av.SINGLE?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):n===av.RANGE&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())}))},t.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},t.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,n=1-this.start;return Math.min(n,Math.max(e,t));case this.maxHandlerShape:return e=0-this.end,n=1-this.end,Math.min(n,Math.max(e,t));case this.foregroundShape:return e=0-this.start,n=1-this.end,Math.min(n,Math.max(e,t));default:return 0}},t.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):null==e?void 0:e.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):null==n?void 0:n.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}},t.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var e=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",n-e);var r=(0,b.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var i=this.dodgeText([e,n]),o=i[0],a=i[1];this.minHandlerShape.setX(e-r/2),(0,b.each)(o,(function(e,n){return t.minTextShape.attr(n,e)})),this.maxHandlerShape.setX(n-r/2),(0,b.each)(a,(function(e,n){return t.maxTextShape.attr(n,e)})),this.currentMode===av.RANGE?this.graph.emit(Vg,{value:[this.start,this.end].sort()}):this.currentMode===av.SINGLE&&this.graph.emit(Vg,{value:[this.end,this.end]})},t.prototype.dodgeText=function(t){var e,n,r=(0,b.get)(this.handlerStyle,"width",2),i=this.minTextShape,o=this.maxTextShape,a=t[0],s=t[1],u=!1;a>s&&(a=(e=[s,a])[0],s=e[1],i=(n=[o,i])[0],o=n[1],u=!0);var c=i.getBBox(),l=o.getBBox(),f=null,d=null;return"trend"===this.timeBarType?(f=a-c.width<this.x+2?{x:a+r/2+2,textAlign:"left"}:{x:a-r/2-2,textAlign:"right"},d=s+l.width>this.x+this.width?{x:s-r/2-2,textAlign:"right"}:{x:s+r/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(f=i.attr("x")>c.width?{x:a,textAlign:"center"}:{x:a,textAlign:"left"},d=o.attr("x")>this.width-l.width?{x:s,textAlign:"right"}:{x:s,textAlign:"center"}),u?[d,f]:[f,d]},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t,n=e.ticks,r=e.width,i=t.currentSpeed,o=r/n.length/(1e3*(10-i)/60),a=t.adjustOffsetRange(o/t.width);t.updateStartEnd(a),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit($g,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(Gg,null))},t.prototype.destory=function(){this.graph.off(Vg,(function(){}));var t=this.group,e=t.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var n=t.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("".concat(Wg,":click")),t.off("".concat(Hg,":click")),t.off("".concat(Yg,":click")),t.off(Ug),t.destroy(),this.trendComponent&&this.trendComponent.destory()},t}(),bv=yv,xv=function(){function t(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.container,a=t.text,s=t.padding,u=void 0===s?[4,4,4,4]:s,c=t.className,l=void 0===c?"g6-component-timebar-tooltip":c,f=t.backgroundColor,d=void 0===f?"#000":f,h=t.textColor,p=void 0===h?"#fff":h,g=t.opacity,v=void 0===g?.8:g,m=t.fontSize,y=void 0===m?12:m;this.container=o,this.className=l,this.backgroundColor=d,this.textColor=p,this.x=n,this.y=i,this.text=a,this.padding=u,this.opacity=v,this.fontSize=y,this.render()}return t.prototype.render=function(){var t=this,e=t.className,n=(t.x,t.y,t.backgroundColor),r=t.textColor,i=t.text,o=t.padding,a=t.opacity,s=t.fontSize,u=t.container,c=th("<div class='".concat(e,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(a,'"></div>'));(0,b.isString)(u)&&(u=document.getElementById(u)),u.appendChild(c),t.parentHeight=u.offsetHeight,t.parentWidth=u.offsetWidth,ch(c,{visibility:"hidden",top:0,left:0});var l=th("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(n,"; font-size: ").concat(s,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(r,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));l.innerHTML=i,c.appendChild(l),t.backgroundDOM=l;var f=th("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));c.appendChild(f),t.arrowDOM=f,t.container=c},t.prototype.show=function(t){var e=this,n=t.text,r=t.x;t.y,t.clientX,t.clientY,e.backgroundDOM.innerHTML=n;var i=e.backgroundDOM.offsetWidth,o=e.backgroundDOM.offsetHeight,a=e.arrowDOM.offsetWidth,s=e.arrowDOM.offsetHeight;ch(e.container,{top:"".concat(-o-s,"px"),left:"".concat(r,"px"),visibility:"visible"}),ch(e.backgroundDOM,{marginLeft:"".concat(-i/2,"px")}),ch(e.arrowDOM,{marginLeft:"".concat(-a/2,"px"),top:"".concat(o,"px")});var u=r-i/2,c=r+i/2;u<0?ch(e.backgroundDOM,{marginLeft:"".concat(-i/2-u,"px")}):c>e.parentWidth&&ch(e.backgroundDOM,{marginLeft:"".concat(-i/2-c+e.parentWidth+12,"px")})},t.prototype.hide=function(){ch(this.container,{top:0,left:0,visibility:"hidden"})},t}(),wv=xv,_v=function(){return _v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},_v.apply(this,arguments)},Ev=N,Sv={fill:"#5B8FF9"},Cv={fill:"#e6e8e9"},kv=function(){function t(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,n=t.canvas,r=t.group,i=t.width,o=t.height,a=t.padding,s=t.data,u=t.start,c=t.end,l=t.x,f=void 0===l?0:l,d=t.y,h=void 0===d?0:d,p=t.tickLabelFormatter,g=t.selectedTickStyle,v=void 0===g?Sv:g,m=t.unselectedTickStyle,y=void 0===m?Cv:m,b=t.tooltipBackgroundColor,x=t.tooltipFomatter,w=t.tickLabelStyle,_=t.controllerCfg,E=void 0===_?{speed:1}:_;this.graph=e,this.group=r,this.sliceGroup=r.addGroup({name:"slice-group"}),this.canvas=n,this.width=i,this.height=o,this.padding=a,this.data=s,this.start=u,this.end=c,this.tickLabelFormatter=p,this.tickLabelStyle=w||{},this.selectedTickStyle=v,this.unselectedTickStyle=y,this.controllerCfg=E,this.currentSpeed=E.speed||1,this.x=f,this.y=h,this.tooltipBackgroundColor=b,this.tooltipFomatter=x,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var t=this,e=this,n=e.width,r=e.height,i=e.padding,o=e.data,a=e.start,s=e.end,u=e.tickLabelFormatter,c=e.selectedTickStyle,l=e.unselectedTickStyle,f=e.tickLabelStyle,d=n-2*i,h=r-(3*i+4+10)-2*i,p=o.length,g=(d-2*(p-1))/p;this.tickWidth=g;var v=this.sliceGroup,m=[],y=[],x=Math.round(p*a),w=Math.round(p*s);this.startTickRectId=x,this.endTickRectId=w;var _=f.rotate;delete f.rotate,o.forEach((function(e,r){var o=r>=x&&r<=w?c:l,a=v.addShape("rect",{attrs:_v({x:i+r*(g+2),y:i,width:g,height:h},o),draggable:!0,name:"tick-rect-".concat(r)}),s=v.addShape("rect",{attrs:{x:i+r*g+2*(2*r-1)/2,y:i,width:0===r||r===p-1?g+1:g+2,height:h,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(r)});s.toFront();var d,E=a.getBBox(),S=(E.minX+E.maxX)/2;if(m.push({rect:a,pickRect:s,value:e.date,x:S,y:E.minY}),u?(d=u(e),!(0,b.isString)(d)&&d&&(d=e.date)):r%Math.round(p/10)==0&&(d=e.date),d){y.push(d);var C=E.maxY+2*i;v.addShape("line",{attrs:{stroke:"#BFBFBF",x1:S,y1:C,x2:S,y2:C+4},name:"tick-line"});var k=C+4+i,M=v.addShape("text",{attrs:_v({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:S,y:k,textAlign:"center",text:d,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},f),capture:!1,name:"tick-label"}),O=M.getBBox();if(O.maxX>n?M.attr("textAlign","right"):O.minX<0&&M.attr("textAlign","left"),(0,b.isNumber)(_)&&10!==y.length){var T=Ev([1,0,0,0,1,0,0,0,1],[["t",-S,-k],["r",_],["t",S-5,k+2]]);M.attr({textAlign:"left",matrix:T})}1===y.length?M.attr({textAlign:"left"}):10===y.length&&M.attr({textAlign:"right"})}})),this.tickRects=m;var E=this.group;this.currentSpeed=1,this.controllerBtnGroup=new uv(_v({group:E,x:this.x,y:this.y+r+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},t.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",(function(e){var n=e.target;if("rect"===n.get("type")&&n.get("name")){var r=parseInt(n.get("name").split("-")[2],10);if(!isNaN(r)){var i=t.tickRects,o=t.unselectedTickStyle;i.forEach((function(t){t.rect.attr(o)}));var a=t.selectedTickStyle;i[r].rect.attr(a),t.startTickRectId=r,t.endTickRectId=r;var s=r/i.length;t.graph.emit(Vg,{value:[s,s]})}}})),e.on("dragstart",(function(e){var n=t.tickRects,r=t.unselectedTickStyle;n.forEach((function(t){t.rect.attr(r)}));var i=e.target,o=parseInt(i.get("name").split("-")[2],10),a=t.selectedTickStyle;n[o].rect.attr(a),t.startTickRectId=o;var s=o/n.length;t.graph.emit(Vg,{value:[s,s]}),t.dragging=!0})),e.on("dragover",(function(e){if(t.dragging&&"rect"===e.target.get("type")){for(var n=parseInt(e.target.get("name").split("-")[2],10),r=t.startTickRectId,i=t.tickRects,o=t.selectedTickStyle,a=t.unselectedTickStyle,s=0;s<i.length;s++){var u=s>=r&&s<=n?o:a;i[s].rect.attr(u)}var c=i.length;t.endTickRectId=n;var l=r/c,f=n/c;t.graph.emit(Vg,{value:[l,f]})}})),e.on("drop",(function(e){if(t.dragging&&(t.dragging=!1,"rect"===e.target.get("type"))){var n=t.startTickRectId,r=parseInt(e.target.get("name").split("-")[2],10);if(!(r<n)){var i=t.selectedTickStyle,o=t.tickRects;o[r].rect.attr(i),t.endTickRectId=r;var a=o.length,s=n/a,u=r/a;t.graph.emit(Vg,{value:[s,u]})}}}));var n=this,r=n.tooltipBackgroundColor,i=n.tooltipFomatter,o=n.canvas,a=new wv({container:o.get("container"),backgroundColor:r}),s=this.tickRects;s.forEach((function(t){var e=t.pickRect;e.on("mouseenter",(function(t){var e=t.target;if("rect"===e.get("type")){var n=parseInt(e.get("name").split("-")[2],10),r=o.getClientByPoint(s[n].x,s[n].y);a.show({x:s[n].x,y:s[n].y,clientX:r.x,clientY:r.y,text:i?i(s[n].value):s[n].value})}})),e.on("mouseleave",(function(t){a.hide()}))}));var u=this.group;u.on("".concat(Wg,":click"),(function(){t.isPlay=!t.isPlay,t.changePlayStatus()})),u.on("".concat(Hg,":click"),(function(){t.updateStartEnd(1)})),u.on("".concat(Yg,":click"),(function(){t.updateStartEnd(-1)})),u.on(Ug,(function(e){e.type;var n=e.speed;t.currentSpeed=n}))},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit($g,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(Gg,null))},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.updateStartEnd=function(t){var e=this,n=this.tickRects,r=n.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,a=e.endTickRectId;if(t>0?e.endTickRectId++:(n[e.endTickRectId].rect.attr(i),e.endTickRectId--),a!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var s=e.startTickRectId;s<=e.endTickRectId-1;s++)n[s].rect.attr(i);e.startTickRectId=e.endTickRectId}if(n[e.endTickRectId]){n[e.endTickRectId].rect.attr(o);var u=e.startTickRectId/r,c=e.endTickRectId/r;this.graph.emit(Vg,{value:[u,c]})}},t.prototype.destory=function(){var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach((function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")})),this.tickRects.length=0,t.off("".concat(Wg,":click")),t.off("".concat(Hg,":click")),t.off("".concat(Yg,":click")),t.off(Ug),this.sliceGroup.destroy()},t}(),Mv=kv,Ov=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tv=function(){return Tv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Tv.apply(this,arguments)},Av=function(t){function e(e){var n=t.call(this,e)||this;return n.afterrenderListener=function(t){return n.filterData({})},n.valueChangeListener=(0,b.throttle)((function(t){return n.filterData(t)}),200,{trailing:!0,leading:!0}),n.changeData=function(t){var e=n.get("graph");n.cacheGraphData=e.get("data"),n.filterData({})},n}return Ov(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{}}},e.prototype.initContainer=function(){var t,e,n=this.get("graph"),r=this._cfgs,i=r.width,o=r.height,a=this.get("className")||"g6-component-timebar",s=this.get("container"),u=this.get("graph").get("container");s?((0,b.isString)(s)&&(s=document.getElementById(s)),t=s):ch(t=th("<div class='".concat(a,"'></div>")),{position:"relative"}),u.appendChild(t),this.set("timeBarContainer",t),e="SVG"===n.get("renderer")?new hf({container:t,width:i,height:o}):new sl({container:t,width:i,height:o}),this.get("containerCSS")&&ch(t,this.get("containerCSS")),this.set("canvas",e)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",t),this.renderTrend(),this.initEvent();var e="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",e)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var e=this.get("timebar");e&&(e.isPlay=!!t,e.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,e=this._cfgs,n=e.width,r=e.x,i=e.y,o=e.padding,a=e.type,s=e.trend,u=e.slider,c=e.controllerCfg,l=e.textStyle,f=e.tick,d=e.backgroundStyle,h=e.foregroundStyle,p=s.data,g=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(s,["data"]),v=n-2*o,m="trend"===a?26:4,y=this.get("graph"),b=this.get("timeBarGroup"),x=this.get("canvas"),w=null;if("trend"===a||"simple"===a){var _=this.get("getValue");w=new bv(Tv(Tv({graph:y,canvas:x,group:b,type:a,x:r+o,y:"trend"===a?i+o:i+o+15,width:v,height:m,padding:o,backgroundStyle:d,foregroundStyle:h,trendCfg:Tv(Tv({},g),{data:p.map((function(t){return(null==_?void 0:_(t))||t.value}))})},u),{tick:{ticks:p,tickLabelFormatter:f.tickLabelFormatter,tickLabelStyle:f.tickLabelStyle,tickLineStyle:f.tickLineStyle},handlerStyle:Tv(Tv({},u.handlerStyle),{height:u.height||m}),controllerCfg:c,textStyle:l}))}else"tick"===a&&(w=new Mv(Tv({graph:y,canvas:x,group:b,x:r+o,y:i+o,width:n,height:42,padding:2,controllerCfg:c},f)));var E=function e(){var n=t.get("timebar");n.draggingHandler=!1,n.isPlay&&(n.isPlay=!1,n.currentHandler=n.maxHandlerShape,n.changePlayStatus()),document.removeEventListener("mouseup",e)};x.on("mousedown",(function(t){"maxHandlerShape-handler"!==t.target.get("name")&&"minHandlerShape-handler"!==t.target.get("name")&&t.target!==w.foregroundShape||document.addEventListener("mouseup",E)})),this.set("timebar",w)},e.prototype.filterData=function(t){var e,n=t.value;if(!n){n=[];var r=this._cfgs.type;r&&"trend"!==r&&"simple"!==r?"tick"===r&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end):(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end)}var i=null,o=this._cfgs.type;if("trend"===o||"simple"===o?i=this._cfgs.trend.data:"tick"===o&&(i=this._cfgs.tick.data),i&&0!==i.length){var a=this.get("rangeChange"),s=this.get("graph"),u=Math.round(i.length*n[0]),c=Math.round(i.length*n[1]);c=c>=i.length?i.length-1:c,u=u>=i.length?i.length-1:u;var l=null===(e=this._cfgs.tick)||void 0===e?void 0:e.tickLabelFormatter,f=l?l(i[u]):i[u].date,d=l?l(i[c]):i[c].date;if("tick"!==o&&this.get("timebar").setText(f,d),a)a(s,f,d);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=s.get("data"));var h=this.get("filterItemTypes"),p=this.get("changeData"),g=this.get("getDate"),v=this.get("shouldIgnore"),m=i[u].date,y=i[c].date;if(p||void 0===p){var b=this.cacheGraphData.nodes,x=this.cacheGraphData.edges,w={},_={};s.getNodes().forEach((function(t){return w[t.getID()]=!0})),s.getEdges().forEach((function(t){return _[t.getID()]=!0})),h.includes("node")&&(b.forEach((function(t){var e=+((null==g?void 0:g(t))||t.date),n=e>=m&&e<=y||(null==v?void 0:v("node",t,{min:m,max:y})),r=w[t.id];r&&!n?(s.removeItem(t.id),w[t.id]=!1):!r&&n&&(s.addItem("node",t),w[t.id]=!0)})),null==x||x.forEach((function(t){var e=w[t.source]&&w[t.target]||(null==v?void 0:v("edge",t,{min:m,max:y})),n=!!s.findById(t.id);n&&!e?(s.removeItem(t.id),_[t.id]=!1):!n&&e?(s.addItem("edge",t),_[t.id]=!0):n||(_[t.id]=!1)}))),(this.get("filterEdge")||h.includes("edge"))&&(null==x||x.filter((function(t){var e=+((null==g?void 0:g(t))||t.date),n=e>=m&&e<=y||(null==v?void 0:v("edge",t,{min:m,max:y})),r=w[t.source]&&w[t.target],i=n&&r,o=_[t.id];o&&!i?(_[t.id]=!1,s.removeItem(t.id)):!o&&i&&(_[t.id]=!0,s.addItem("edge",t))})))}else h.includes("node")&&s.getNodes().forEach((function(t){var e=t.getModel();if(!(null==v?void 0:v("node",e,{min:m,max:y}))){var n=+((null==g?void 0:g(e))||e.date);n<m||n>y?s.hideItem(t):s.showItem(t)}})),(this.get("filterEdge")||h.includes("edge"))&&s.getEdges().forEach((function(t){var e=t.getModel();if(!(null==v?void 0:v("edge",e,{min:i[u].date,max:i[c].date}))){var n=+((null==g?void 0:g(e))||e.date);if(n<i[u].date||n>i[c].date)s.hideItem(t);else{var r=t.getSource().isVisible(),o=t.getTarget().isVisible();r&&o&&s.showItem(t)}}}))}}else console.warn(" TimeBar ")},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Vg,this.valueChangeListener)},e.prototype.destroy=function(){var e=this.get("graph");e.off("afterchangedata",this.changeData),e.off("afterrender",this.afterrenderListener),e.off(Vg,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),t.prototype.destroy.call(this);var r=this.get("timeBarContainer");if(r){var i=this.get("container");i||(i=this.get("graph").get("container")),(0,b.isString)(i)&&(i=document.getElementById(i)),i.removeChild(r)}},e}(dh),Nv=Av,Iv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pv=Au.applyMatrix,Dv=function(t){function e(e){return t.call(this,e)||this}return Iv(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.graph;if(!this.destroyed){var r=this.get("container");(0,b.isString)(r)&&(r=document.getElementById(r));var i=th("<div class=".concat(e.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),o=0,a=0,s=!1,u=0,c=0,l=0,f=0,d=0,h=0;r.addEventListener("mousedown",(function(r){if(e.refresh=!1,r.target===i){var u=i.style;l=parseInt(u.width,10),f=parseInt(u.height,10);var c=t.get("width"),p=t.get("height");l>c||f>p||(h=n.getZoom(),d=t.get("ratio"),s=!0,o=r.clientX,a=r.clientY)}}),!1),r.addEventListener("mousemove",(function(e){if(s&&!(0,b.isNil)(e.clientX)&&!(0,b.isNil)(e.clientY)){var r=t.get("width"),p=t.get("height"),g=i.style;u=parseInt(g.left,10),c=parseInt(g.top,10),l=parseInt(g.width,10),f=parseInt(g.height,10);var v=o-e.clientX,m=a-e.clientY;u-v<0?v=u:u-v+l>=r&&(v=0),c-m<0?m=c:c-m+f>=p&&(m=0),c-=m,ch(i,{left:"".concat(u-=v,"px"),top:"".concat(c,"px")}),n.translate(v*h/d,m*h/d),o=e.clientX,a=e.clientY}}),!1),r.addEventListener("mouseleave",(function(){s=!1,e.refresh=!0}),!1),r.addEventListener("mouseup",(function(){s=!1,e.refresh=!0}),!1),this.set("viewport",i),r.appendChild(i)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),n=this.get("height"),r=this.get("graph"),i=r.get("width"),o=i/r.get("height"),a=r.getGroup(),s=a.getCanvasBBox(),u=[(s.minX+s.maxX)/2,(s.minY+s.maxY)/2],c=[s.maxX-s.minX,s.maxY-s.minY],l={centerX:u[0],centerY:u[1],width:0,height:0,minX:0,minY:0};s[0]/s[1]>o?(l.width=c[0],l.height=l.width/o):(l.height=c[1],l.width=l.height*o),l.minX=u[0]-l.width/2,l.minY=u[1]-l.height/2;var f=a.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]);var d=M.invert([1,0,0,0,1,0,0,0,1],f),h=Pv({x:l.minX,y:l.minY},d),p=r.getCanvasByPoint(h.x,h.y),g=this.get("viewport");g||this.initViewport();var v=i/l.width,m=v*e,y=v*n,b=e*-p.x/l.width,x=n*-p.y/l.height,w=b+m,_=x+y;b<0&&(m+=b,b=0),w>e&&(m-=w-e),x<0&&(y+=x,x=0),_>n&&(y-=_-n),this.set("ratio",t),ch(g,{left:"".concat(b,"px"),top:"".concat(x,"px"),width:"".concat(m,"px"),height:"".concat(y,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=e.get("width"),r=e.get("height")/n,i=t.get("className"),o=t.get("container"),a=t.get("width"),s=t.get("height");a||s||(a=200),a?(s=r*a,t.set("height",s)):(a=1/r*s,t.set("width",a));var u=th("<div class='".concat(i,"' style='width: ").concat(a,"px; height: ").concat(s,"px; overflow: hidden; position: relative;'></div>"));(0,b.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(u):e.get("container").appendChild(u),t.set("container",u);var c=th('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');u.appendChild(c);var l=th('<span style="display: table-cell; vertical-align: middle; "></span>');c.appendChild(l),t.set("containerDOM",c),t.set("containerSpan",l);var f=th('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",f),t.updateImgSize(),l.appendChild(f),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,e=t.get("imgDOM"),n=t.get("width"),r=t.get("height");e.onload=function(){var t=function(t,e){var n,r;if(t.naturalWidth)n=t.naturalWidth,r=t.naturalHeight;else{var i=new Image;i.src=t.src,i.onload=function(){}}return[n,r]}(e);t[0]>t[1]?e.width=n:e.height=r}},e.prototype.updateCanvas=function(){if(this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("width")/t.get("canvas").getCanvasBBox().width;this.set("ratio",e),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var e=this;e.get("imgDOM").remove(),e.set("graphImg",t);var n=th('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));e.set("imgDOM",n),n.src=t,e.updateImgSize(),e.get("containerSpan").appendChild(n),e.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(dh),Lv=Dv,Rv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jv=function(){return jv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jv.apply(this,arguments)},Bv=Au.distance,Fv={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},zv=function(t){function e(e){return t.call(this,e)||this}return Rv(e,t),e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,b.clone)(Fv),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},e.prototype.init=function(){var t=this,e=t.get("showLabel"),n="node"===e||"both"===e,r="edge"===e||"both"===e;t.set("showNodeLabel",n),t.set("showEdgeLabel",r),t.get("shouldShow")||t.set("shouldShow",(function(){return!0}))},e.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");n&&!n.destroyed||(e.filter(t),(n=e.get("delegate")).on("dragstart",(function(t){})),n.on("drag",(function(t){e.filter(t)})),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",(function(t){e.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,r=e.get("graph"),i=e.get("delegate");(i?(i.attr("x"),i.attr("y"),1):void 0)||r.getPointByClient(t.clientX,t.clientY),n=t.originalEvent.wheelDelta<0?.95:1/.95;var o=e.get("maxR"),a=e.get("minR"),s=e.get("r");(s>(o||r.get("height"))&&n>1||s<(a||.05*r.get("height"))&&n<1)&&(n=1),s*=n,e.set("r",s),e.filter(t)}},e.prototype.filter=function(t){var e=this,n=e.get("graph"),r=n.getNodes(),i={},o=e.get("r"),a=e.get("type"),s={x:t.x,y:t.y};e.updateDelegate(s,o);var u=e.get("shouldShow"),c=e.get("vShapes");c&&c.forEach((function(t){t.remove(),t.destroy()})),c=[],r.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;Bv({x:n,y:r},s)<o&&(i[e.id]=t)}));var l=n.getEdges(),f=[];l.forEach((function(t){var e=t.getModel(),n=e.source,r=e.target;u(e)&&("only-source"===a||"one"===a?i[n]&&!i[r]&&f.push(t):"only-target"===a||"one"===a?i[r]&&!i[n]&&f.push(t):"both"===a&&i[n]&&i[r]&&f.push(t))}));var d=e.get("showNodeLabel"),h=e.get("showEdgelabel"),p=n.get("group");f.forEach((function(t){t.get("group").get("children").forEach((function(t){var e=t.get("type"),n=p.addShape(e,{attrs:t.attr()});c.push(n),d&&"text"===e&&n.set("visible",!0)}))})),Object.keys(i).forEach((function(t){var e=i[t].get("group").clone();if(p.add(e),c.push(e),h)for(var n=e.get("children"),r=0;r<n.length;r++){var o=n[r];"text"===o.get("type")&&o.set("visible",!0)}})),e.set("vShapes",c)},e.prototype.updateParams=function(t){var e=this,n=t.r,r=t.trigger,i=t.minR,o=t.maxR,a=t.scaleRBy,s=t.showLabel,u=t.shouldShow;if(isNaN(t.r)||e.set("r",n),isNaN(o)||e.set("maxR",o),isNaN(i)||e.set("minR",i),"mousemove"!==r&&"click"!==r||e.set("trigger",r),"wheel"===a||"unset"===a){e.set("scaleRBy",a),e.get("delegate").remove(),e.get("delegate").destroy();var c=e.get("dPercentText");c&&(c.remove(),c.destroy())}"node"!==s&&"both"!==s||e.set("showNodeLabel",!0),"edge"!==s&&"both"!==s||e.set("showEdgeLabel",!0),u&&e.set("shouldShow",u)},e.prototype.updateDelegate=function(t,e){var n=this,r=n.get("graph"),i=n.get("delegate");if(!i||i.destroyed){var o=r.get("group"),a=n.get("delegateStyle")||Fv;i=o.addShape("circle",{attrs:jv({r:e,x:t.x,y:t.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&i.on("mousewheel",(function(t){n.scaleRByWheel(t)}))}else i.attr({x:t.x,y:t.y,r:e});n.set("delegate",i)},e.prototype.clear=function(){var t=this,e=t.get("vShapes");e&&e.forEach((function(t){t.remove(),t.destroy()})),e=[],t.set("vShapes",e);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(dh),$v=zv,Gv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vv=Au.pointLineDistance,Uv={stroke:"#FA8C16",lineWidth:1},Wv=function(t){function e(e){return t.call(this,e)||this}return Gv(e,t),e.prototype.getDefaultCfgs=function(){return{line:Uv,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var e=t.item,n=(e.get("delegateShape")||e).getBBox(),r=e.getModel(),i=r.x-n.x,o=r.y-n.y;this.show({x:n.minX+i,y:n.minY+o},{width:n.width,height:n.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines,r=t.itemAlignType;this.get("graph").getNodes().forEach((function(t){var i=t.getBBox(),o=t.get("id");!0===r||"horizontal"===r?(e["".concat(o,"tltr")]=[i.minX,i.minY,i.maxX,i.minY,t],e["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,t],e["".concat(o,"blbr")]=[i.minX,i.maxY,i.maxX,i.maxY,t]):"center"===r&&(e["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,t]),!0===r||"vertical"===r?(n["".concat(o,"tlbl")]=[i.minX,i.minY,i.minX,i.maxY,t],n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,t],n["".concat(o,"trbr")]=[i.maxX,i.minY,i.maxX,i.maxY,t]):"center"===r&&(n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,t])}))},e.prototype.show=function(t,e){var n=(0,b.mix)({},t);return this.itemAlign(t,e,n),t},e.prototype.itemAlign=function(t,e,n){var r=this,i=this._cfgs,o=i.horizontalLines,a=i.verticalLines,s=i.tolerance,u={x:n.x+e.width/2,y:n.y},c={x:n.x+e.width/2,y:n.y+e.height/2},l={x:n.x+e.width/2,y:n.y+e.height},f={x:n.x,y:n.y+e.height/2},d={x:n.x+e.width,y:n.y+e.height/2},h=[],p=[],g=null;if(this.clearAlignLine(),(0,b.each)(o,(function(t){t[4].isVisible&&(h.push(r.getLineDisObject(t,u)),h.push(r.getLineDisObject(t,c)),h.push(r.getLineDisObject(t,l)))})),(0,b.each)(a,(function(t){t[4].isVisible&&(p.push(r.getLineDisObject(t,f)),p.push(r.getLineDisObject(t,c)),p.push(r.getLineDisObject(t,d)))})),h.sort((function(t,e){return t.dis-e.dis})),p.sort((function(t,e){return t.dis-e.dis})),0!==h.length&&h[0].dis<s){t.y=h[0].line[1]-h[0].point.y+n.y,g={type:"item",horizontals:[h[0]]};for(var v=1;v<3;v++)h[0].dis===h[v].dis&&g.horizontals.push(h[v])}if(0!==p.length&&p[0].dis<s)for(t.x=p[0].line[0]-p[0].point.x+n.x,g?g.verticals=[p[0]]:g={type:"item",verticals:[p[0]]},v=1;v<3;v++)p[0].dis===p[v].dis&&g.verticals.push(p[v]);g&&(g.bbox=e,this.addAlignLine(g))},e.prototype.addAlignLine=function(t){var e=t.bbox,n=t.type,r=t.horizontals,i=t.verticals,o=this._cfgs,a=o.line,s=o.alignLines,u=this.get("graph").get("group");"item"===n&&(r&&(0,b.each)(r,(function(t){var n,r,i=t.line,o=t.point,c=(i[0]+i[2])/2;o.x<c?(n=o.x-e.width/2,r=Math.max(i[0],i[2])):(n=o.x+e.width/2,r=Math.min(i[0],i[2]));var l=(0,b.mix)({x1:n,y1:i[1],x2:r,y2:i[1]},a),f=u.addShape("line",{attrs:l,capture:!1});s.push(f)})),i&&(0,b.each)(i,(function(t){var n,r,i=t.line,o=t.point,c=(i[1]+i[3])/2;o.y<c?(n=o.y-e.height/2,r=Math.max(i[1],i[3])):(n=o.y+e.height/2,r=Math.min(i[1],i[3]));var l=(0,b.mix)({x1:i[0],y1:n,x2:i[0],y2:r},a),f=u.addShape("line",{attrs:l,capture:!1});s.push(f)})))},e.prototype.getLineDisObject=function(t,e){return{line:t,point:e,dis:Vv(t,e)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,b.each)(t,(function(t){t.remove()})),t.length=0},e.prototype.destory=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines;this.get("graph").getNodes().forEach((function(t){var r=t.get("id");delete e["".concat(r,"tltr")],delete e["".concat(r,"lcrc")],delete e["".concat(r,"blbr")],delete n["".concat(r,"tlbl")],delete n["".concat(r,"tcbc")],delete n["".concat(r,"trbr")]})),this.clearAlignLine()},e}(dh),Hv=Wv,Yv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xv=function(){return Xv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xv.apply(this,arguments)},qv=["click","mouseenter"],Zv=function(t){function e(e){return t.call(this,e)||this}return Yv(e,t),e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{};t.multiple&&"mouseenter"===t.trigger&&this.set("multiple",!1);var e=this.get("align");if(!e){var n=this.get("position").split("-");n.includes("left")&&(e="left"),e=n.includes("right")?"right":"center",this.set("align",e)}var r=this.get("graph").get("container"),i=th("<div class='g6-legend-container' style=\"position: absolute;\"></div>");r.appendChild(i),this.set("container",i);var o=this.render();ch(i,this.getContainerPos(o)),this.bindEvents()},e.prototype.getContainerPos=function(t){void 0===t&&(t=[0,0]);var e=this.get("graph"),n=this.get("offsetX"),r=this.get("offsetY"),i=this.get("margin"),o=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(e.getWidth()-t[0])/2+0,top:(e.getHeight()-t[1])/2+0};return o.forEach((function(n){var r=i[a[n]],o=n;switch(n){case"top":case"left":r+=0;break;case"bottom":r=e.getHeight()-t[1]-r+0,o="top";break;default:r=e.getWidth()-t[0]-r+0,o="left"}s[o]=r})),s.top+=r+e.getContainer().offsetTop,s.left+=n+e.getContainer().offsetLeft,Object.keys(s).forEach((function(t){s[t]="".concat(s[t],"px")})),s},e.prototype.bindEvents=function(){var t=this,e=t.get("filter");if(e&&e.enable){var n=e.trigger||"click";qv.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var r=t.get("legendCanvas");"mouseenter"===n?(r.on("node-container:mouseenter",(function(e){return t.filterData(e)})),r.on("node-container:mouseleave",(function(e){t.clearFilter(),t.clearActiveLegend()}))):(r.on("node-container:click",(function(e){return t.filterData(e)})),r.on("click",(function(e){e.target&&e.target.isCanvas&&e.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())})))}},e.prototype.changeData=function(t){this.set("data",t);var e=this.render();ch(this.get("container"),this.getContainerPos(e))},e.prototype.activateLegend=function(t){var e=this.get("filter");(null==e?void 0:e.multiple)||this.clearActiveLegend();var n=t.get("parent");n.get("active")?(n.set("active",!1),this.findLegendItemsByState("active").length&&n.set("inactive",!0)):(n.set("inactive",!1),n.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach((function(t){t.set("inactive",!0)})):this.clearActiveLegend();var r=(null==e?void 0:e.legendStateStyles)||{},i=(null==r?void 0:r.inactive)||{opacity:.5,"text-shape":{opacity:.5}},o=i["text-shape"]||{};this.findLegendItemsByState("inactive").forEach((function(t){var e=t.get("children"),n=e[0],r=e[1];n.attr(Xv(Xv({},n.get("oriAttrs")),i)),r.attr(Xv(Xv({},r.get("oriAttrs")),o))}));var a=(null==r?void 0:r.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},s=a["text-shape"]||{};this.findLegendItemsByState("active").forEach((function(t){var e=t.get("children"),n=e[0],r=e[1];n.attr(Xv(Xv({},n.get("oriAttrs")),a)),r.attr(Xv(Xv({},r.get("oriAttrs")),s))}))},e.prototype.findLegendItemsByState=function(t,e,n){void 0===e&&(e="all"),void 0===n&&(n=!0);var r=this.get("legendCanvas").find((function(t){return"root"===t.get("name")})),i=r.find((function(t){return"node-group"===t.get("name")})),o=r.find((function(t){return"edge-group"===t.get("name")}));return"node"===e?i.get("children").filter((function(e){return!!e.get(t)===n})):"edge"===e?o.get("children").filter((function(e){return!!e.get(t)===n})):i.get("children").filter((function(e){return!!e.get(t)===n})).concat(o.get("children").filter((function(e){return!!e.get(t)===n})))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas").find((function(t){return"root"===t.get("name")}));[t.find((function(t){return"node-group"===t.get("name")})),t.find((function(t){return"edge-group"===t.get("name")}))].forEach((function(t){t.get("children").forEach((function(t){t.set("active",!1),t.set("inactive",!1);var e=t.get("children"),n=e[0],r=e[1];n.attr(n.get("oriAttrs")),r.attr(r.get("oriAttrs"))}))}))},e.prototype.filterData=function(t){var e=this.get("filter"),n=null==e?void 0:e.filterFunctions;if(e&&n){var r=this.get("legendCanvas"),i=this.get("graph"),o=e.graphActiveState||"active",a=e.graphInactiveState||"inactive",s=e.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(t.target);var u=r.find((function(t){return"root"===t.get("name")})),c=u.find((function(t){return"node-group"===t.get("name")})),l=u.find((function(t){return"edge-group"===t.get("name")})),f=c.get("children").filter((function(t){return t.get("active")})),d=l.get("children").filter((function(t){return t.get("active")})),h=0,p=["getNodes","getEdges"];p.forEach((function(t){i[t]().forEach((function(e){var r=!1;("getNodes"===t?f:d).forEach((function(t){var i=n[t.get("id")];r=r||i(e.getModel())})),r?(i.setItemState(e,a,!1),i.setItemState(e,o,!0),h++):(i.setItemState(e,o,!1),i.setItemState(e,a,!0))}))})),h||p.forEach((function(t){i[t]().forEach((function(t){i.clearItemStates(t,[a])}))}))}},e.prototype.clearFilter=function(){var t=this.get("graph"),e=this.get("filter");if(e){var n=e.graphActiveState||"active",r=e.graphInactiveState||"inactive";t.getNodes().forEach((function(e){t.clearItemStates(e,[n,r])})),t.getEdges().forEach((function(e){t.clearItemStates(e,[n,r])}))}},e.prototype.render=function(){var t=this;this.processData();var e=this.get("legendCanvas");e?e.clear():e=new sl({container:this.get("container"),width:200,height:200});var n=e.addGroup({name:"root"}),r=n.addGroup({name:"node-group"}),i=n.addGroup({name:"edge-group"});this.set("legendCanvas",e);var o=this.get("itemsData"),a=[r,i];["nodes","edges"].forEach((function(e,n){o[e].forEach((function(r){var i,o,s=a[n].addGroup({id:r.id,name:"node-container"}),u=r.type,c=t.getShapeSize(r),l=c.width,f=c.height,d=c.r,h=t.getStyle(e.substr(0,4),r);switch(r.type){case"circle":default:o={r:d,x:0,y:0};break;case"rect":o={width:l,height:f,x:-l/2,y:-f/2};break;case"ellipse":o={rx:l,ry:f,x:0,y:0},u="ellipse";break;case"line":o={x1:-l/2,y1:0,x2:l/2,y2:0},u="line";break;case"quadratic":o={path:[["M",-l/2,0],["Q",0,l/2,l/2,0]]},u="path";break;case"cubic":o={path:[["M",-l/2,0],["C",-l/6,l/2,l/6,-l/2,l/2,0]]},u="path";break;case"diamond":o={path:[["M",0,-f],["L",l,0],["L",0,f],["L",-l,0],["Z"]]},u="path";break;case"triangle":o={path:[["M",-l,f],["L",0,-f],["L",l,f],["Z"]]},u="path";break;case"star":o={path:Au.getStarPath(3*d,1.2*d)},u="path"}var p=s.addShape(u,{attrs:Xv(Xv({},o),h),name:"".concat(r.type,"-node-keyShape"),oriAttrs:Xv({opacity:1},h)});if(r.label){var g=p.getBBox(),v=(null===(i=r.labelCfg)||void 0===i?void 0:i.style)||{},m=Xv({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},v);s.addShape("text",{attrs:Xv({x:g.maxX+4,y:0,text:r.label},m),className:"legend-label",name:"".concat(r.type,"-node-text"),oriAttrs:m})}}))}));var s,u=this.get("padding"),c=n.find((function(t){return"title-container"===t.get("name")})),l={height:0,maxY:0,width:0};if(this.get("title")){c||(c=n.addGroup({name:"title-container"}));var f={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:u[0]},d=this.get("titleConfig")||{},h=Object.assign(f,d.style||{});s=c.addShape("text",{attrs:Xv({text:this.get("title")},h)}),l=c.getCanvasBBox(),c.setMatrix([1,0,0,0,1,0,d.offsetX,d.offsetY,1])}this.layoutItems();var p=n.getCanvasBBox(),g=r.getCanvasBBox(),v=g.minX<0?Math.abs(g.minX)+u[3]:u[3],m=l.maxY<g.minY?Math.abs(l.maxY-g.minY)+u[0]:l.maxY+u[0],y=[1,0,0,0,1,0,v,m,1];r.setMatrix(y);var b=[(p=n.getCanvasBBox()).minX+p.width+u[1],p.minY+p.height+u[2]];if(s){d=Xv({position:"center",offsetX:0,offsetY:0},this.get("titleConfig")),l=c.getCanvasBBox();var x=c.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===d.position?x[6]=b[0]/2+d.offsetX:"right"===d.position?(x[6]=b[0]-u[3]+d.offsetX,s.attr({textAlign:"right"})):(x[6]=u[3]+d.offsetX,s.attr({textAlign:"left"})),c.setMatrix(x),l=c.getCanvasBBox(),y=[1,0,0,0,1,0,v=g.minX<0?Math.abs(g.minX)+u[3]:u[3],m=g.minY<l.maxY?Math.abs(l.maxY-g.minY)+u[0]:l.maxY+u[0],1],r.setMatrix(y);var w=[1,0,0,0,1,0,v,m,1];"vertical"===this.get("layout")?w[6]+=g.maxX+this.get("horiSep"):w[7]+=g.maxY+this.get("vertiSep"),i.setMatrix(w)}else{g=r.getCanvasBBox();var _=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?_[6]+=y[6]+g.maxX+this.get("horiSep"):_[7]+=y[7]+g.maxY+this.get("vertiSep"),i.setMatrix(_)}p=n.getCanvasBBox(),g=r.getCanvasBBox(),y=r.getMatrix()||[1,0,0,0,1,0,0,0,1];var E=i.getMatrix()||[1,0,0,0,1,0,0,0,1],S=i.getCanvasBBox();b=[Math.max(g.width+y[6],S.width+E[6])+u[1],Math.max(g.height+y[7],S.height+E[7])+u[2]],e.changeSize(b[0],b[1]);var C=this.get("containerStyle"),k=n.getMatrix()||[1,0,0,0,1,0,0,0,1],M=Au.invertMatrix({x:0,y:0},k);return n.addShape("rect",{attrs:Xv({x:M.x+(C.lineWidth||1),y:M.y+(C.lineWidth||1),width:b[0]-2*(C.lineWidth||1),height:b[1]-2*(C.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},C),name:"legend-back-rect",capture:!1}).toBack(),b},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),e=this.get("horiSep"),n=this.get("vertiSep"),r=this.get("layout"),i=this.get("align"),o=[0,0],a=t.find((function(t){return"root"===t.get("name")})),s=a.find((function(t){return"node-group"===t.get("name")})),u=a.find((function(t){return"edge-group"===t.get("name")})),c={min:0,max:-1/0},l=-1/0;s.get("children").forEach((function(t,i){0===i&&(c.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),u=a.getBBox(),f=u.width,d=u.height,h=0,p=0,g=0;"vertical"===r?(p=o[1],g=o[0]+f/2,o[0]=g+s.height+n,h=s.maxX+p+f/2):(p=o[0]+f/2,g=o[1],o[0]=p+s.width+e,h=s.maxY+g+d/2),o[0]>c.max&&(c.max=o[0]),h>l&&(l=h),t.setMatrix([1,0,0,0,1,0,p,g,1])}));var f=c.max-c.min,d={min:0,max:-1/0},h=s.getCanvasBBox();o[0]=0,o[1]="vertical"===r?h.maxX+e:h.maxY+n,u.get("children").forEach((function(t,i){0===i&&(d.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),u=a.getBBox(),c=u.width,l=u.height,f=0,h=0;"vertical"===r?(f=o[1],h=o[0],o[0]=h+s.height+n,t.setMatrix([1,0,0,0,1,0,0,h+l/2,1])):(f=o[0],h=o[1],o[0]=f+s.width+e,t.setMatrix([1,0,0,0,1,0,f+c/2,0,1])),o[0]>d.max&&(d.max=o[0])}));var p=d.max-d.min;if(i&&""!==i&&"left"!==i){var g=f-p,v="center"===i?Math.abs(g)/2:Math.abs(g);(g<0?s:u).get("children").forEach((function(t){var e=t.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===r?e[7]+=v:e[6]+=v,t.setMatrix(e)}))}},e.prototype.processData=function(){var t=this.get("data"),e={nodes:[],edges:[]};t.nodes&&(t.nodes.sort((function(t,e){return t.order-e.order})),t.nodes.forEach((function(t){var n,r,i,o,a,s=t.size||[(null===(n=t.style)||void 0===n?void 0:n.width)||(null===(r=t.style)||void 0===r?void 0:r.r)||8,(null===(i=t.style)||void 0===i?void 0:i.height)||(null===(o=t.style)||void 0===o?void 0:o.r)||8],u=(null===(a=t.labelCfg)||void 0===a?void 0:a.style)||{};e.nodes.push({id:t.id||(0,b.uniqueId)(),type:t.type||"circle",style:Xv({},t.style),order:t.order,label:t.label,itemType:"node",size:s,labelCfg:{position:"right",style:Xv({fontFamily:"Arial"},u)}})}))),t.edges&&(t.edges.sort((function(t,e){return t.order-e.order})),t.edges.forEach((function(t){var n,r,i=t.type||"line";"cubic-horizontal"===t.type&&(i="cubic");var o=(null===(n=t.labelCfg)||void 0===n?void 0:n.style)||{},a=t.size||[(null===(r=t.style)||void 0===r?void 0:r.width)||8,1];e.edges.push({id:t.id||(0,b.uniqueId)(),type:i,size:a,style:Xv({lineWidth:(0,b.isArray)(a)?a[1]:1},t.style),order:t.order,label:t.label,itemType:"edge",labelCfg:{position:"right",style:Xv({fontFamily:"Arial"},o)}})}))),this.set("itemsData",e)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var e=this.get(t);if((0,b.isNumber)(e))this.set(t,[e,e,e,e]);else if((0,b.isArray)(e))switch(e.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[e[0],e[0],e[0],e[0]]);break;case 2:this.set(t,[e[0],e[1],e[0],e[1]]);break;case 3:this.set(t,[e[0],e[1],e[2],e[1]])}return this.get(t)},e.prototype.getShapeSize=function(t){var e,n,r;return t.size&&((0,b.isArray)(t.size)?(e=t.size[0],n=t.size[1]||t.size[0],r=t.size[0]/2):(0,b.isNumber)(t.size)&&(e=t.size,n=t.size,r=t.size/2)),t.style&&(t.style.width&&(e=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(r=t.style.r)),r||(r=5),e||(e=r),n||(n=r),{width:e,height:n,r:r}},e.prototype.getStyle=function(t,e){return Xv(Xv({},"node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),e.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");null==t||t.destroy();var e=this.get("graph").get("container"),n=this.get("container");e.removeChild(n)},e}(dh),Kv=Zv,Jv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qv=function(){return Qv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Qv.apply(this,arguments)},tm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};"undefined"!=typeof document&&yh()("\n  .g6-annotation-container {\n    background-color: rgba(255, 255, 255, 0.3);\n    padding: 8px;\n  }\n  .g6-annotation-wrapper {\n    background-color: #fff;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\n  }\n  .g6-annotation-header-wapper {\n    height: fit-content;\n    width: 100%;\n    background-color: #5B8FF9;\n    display: inline-flex;\n    cursor: move;\n  }\n  .g6-annotation-title {\n    margin: 4px 40px 4px 8px;\n    cursor: text;\n    min-width: 32px;\n  }\n  .g6-annotation-collapse {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-expand {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-close {\n    margin: 4px 8px 4px 0;\n    cursor: pointer;\n  }\n  .g6-annotation-content {\n    padding: 8px;\n    width: fit-content;\n    cursor: text;\n    word-break: break-all;\n    min-width: 32px;\n  }\n  .g6-annotation-title-input-wrapper {\n    margin: 4px 40px 4px 8px;\n  }\n  .g6-annotation-content-input {\n    height: 100%;\n    word-break: break-all;\n  }\n  .g6-annotation-content-input-wrapper {\n    margin: 8px;\n    height: 100%;\n  }\n");var em="canvas-annotation",nm=function(t){function e(e){return t.call(this,e)||this}return Jv(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};return"click"===this.get("trigger")&&(t=Qv(Qv({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})),t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var e=t.collapsed,n=t.maxWidth,r=t.title,i=void 0===r?"":r,o=t.content,a=void 0===o?"":o,s=t.borderRadius,u=void 0===s?5:s,c=e?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",l=e?"":" <p class='g6-annotation-content'>".concat(a,"</p>"),f=e?"".concat(u,"px"):"".concat(u,"px ").concat(u,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(u,"px; max-width: ").concat(n,'px">\n        <div\n          class="g6-annotation-header-wapper"\n          style="border-radius: ').concat(f,";\"\n        >\n          <h4 class='g6-annotation-title'>").concat(i,"</h4>\n          ").concat(c,"\n          ").concat("<p class='g6-annotation-close'>x</p>","\n        </div>\n        ").concat(l,"\n      </div>")}},e.prototype.init=function(){var t=this;if(!t.destroyed){var e=t.get("graph").getContainer(),n=t.get("container");this.get("containerCfg")?(n=this.createContainer(),e.appendChild(n)):n=e,this.set("container",n);var r=e.getBoundingClientRect(),i=new sl({container:e,width:r.right-r.left,height:r.bottom-r.top});ch(i.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,b.debounce)((function(){return t.resizeCanvas(t)}),100));var o=i.addGroup({id:"annotation-link-group"});t.set("linkGroup",o),t.set("canvas",i),t.get("getTitle")||t.set("getTitle",(function(t){var e,n=(null===(e=null==t?void 0:t.getModel)||void 0===e?void 0:e.call(t))||{},r=n.label,i=n.id;return r||i||"-"})),t.get("getContent")||t.set("getContent",(function(t){var e,n;if(!t)return"-";var r=(null===(e=t.getModel)||void 0===e?void 0:e.call(t))||{},i=r.label,o=r.id,a=null===(n=t.getType)||void 0===n?void 0:n.call(t),s=a?"".concat(a,": "):"";return"".concat(s).concat(i||o||"")}));var a=t.get("defaultData");a&&this.readData(a)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var e=this.get("containerCfg"),n=this.get("graph"),r=n.getContainer(),i=r.getBoundingClientRect(),o=i.left,a=i.right,s=i.top,u=i.bottom-s,c=a-o,l=e.position,f=void 0===l?"top":l,d=e.offsetX,h=void 0===d?0:d,p=e.offsetY,g=void 0===p?0:p,v=tm(e,["position","offsetX","offsetY"]),m=e.height,y=void 0===m?"fit-content":m,x=e.width,w=void 0===x?n.getWidth():x;"100%"===y&&(y=u),"100%"===w&&(w=c);var _="unset",E="unset",S={};switch(f){case"right":_="".concat(u,"px"),(S={top:0,right:0}).right+=o+h,S.top+=s+g;break;case"bottom":E="".concat(c,"px"),(S={bottom:0,left:0}).left+=o+h,S.bottom+=s+g;break;case"top":E="".concat(c,"px");case"left":_="".concat(u,"px");default:(S={top:0,left:0}).left+=o+h,S.top+=s+g}Object.keys(S).forEach((function(t){S[t]="".concat(S[t],"px")}));var C=th("<div class='".concat(e.className," g6-annotation-container'></div>"));return ch(C,Qv(Qv({position:"absolute",display:"top"===f||"bottom"===f?"inline-flex":"unset",width:(0,b.isNumber)(w)?"".concat(w,"px"):w,height:(0,b.isNumber)(y)?"".concat(y,"px"):y,maxHeight:_,maxWidth:E,overflow:"scroll"},S),v)),r.appendChild(C),C.addEventListener("scroll",(function(e){t.updateLinks()})),C}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout((function(){if(t&&!t.destroyed){var e=t.get("container").getBoundingClientRect(),n=e.right-e.left,r=e.bottom-e.top;t.get("canvas").changeSize(n,r),t.updateOutsideCards(t)}}),250)},e.prototype.updateOutsideCards=function(t){var e=t||this,n=e.get("cardInfoMap")||{},r=e.get("graph"),i=r.getPointByCanvas(0,0),o=r.getPointByCanvas(r.getWidth(),r.getHeight()),a=r.getClientByPoint(i.x,i.y),s=a.x,u=a.y,c=r.getClientByPoint(o.x,o.y),l=c.x,f=c.y;Object.values(n).forEach((function(t){var e=t.card;if(e){var n=e.style,r=im(n.left),i=im(n.top),o=e.getBoundingClientRect(),a=o.width,c=o.height,d=r,h=i;r+a>l-s&&(d=l-s-a),r<0&&(d=0),i+c>f-u&&(h=f-u-c),i<0&&(h=0),ch(e,{left:"".concat(d,"px"),top:"".concat(h,"px")})}})),e.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var e=t.item;this.toggleAnnotation(e)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var e=t.get("cardInfoMap")||{};Object.keys(e).forEach((function(e){t.hideCard(e)}))}},e.prototype.toggleAnnotation=function(t,e){var n,r;void 0===e&&(e={});var i=this;if(!i.destroyed){var o=i.get("cardInfoMap")||{},a=i.get("graph"),s=i.get("container"),u=i.get("containerCfg"),c=Object.assign({},i.get("cardCfg")||{},e),l=c.minHeight,f=c.minWidth,d=c.width,h=c.height,p=c.collapsed,g=void 0!==p&&p,v=c.x,m=c.y,y=c.title,x=c.content,w=c.maxTitleLength,_=c.defaultBegin,E=tm(c,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),S=i.get("linkGroup"),C=this.get("rows")||[[]],k=null===(n=t.isCanvas)||void 0===n?void 0:n.call(t),M=k?em:t.getID(),O=o[M]||{},T=O.card,A=O.link,N=O.x,I=O.y,P=O.title,D=O.content,L=this.get("getTitle"),R=this.get("getContent"),j=this.get("getContentPlaceholder")||function(){return""},B=this.get("getTitlePlaceHolder")||function(){return""},F=j(t),z=B(t),$=th(this.getDOMContent(Qv({itemId:M,collapsed:g,title:(null===(r=P||y||(null==L?void 0:L(t)))||void 0===r?void 0:r.substr(0,w))||z,content:D||x||(null==R?void 0:R(t))||F},E))),G=(0,b.isNumber)(l)?"".concat(l,"px"):l;ch($,{minHeight:g?"unset":G,minWidth:(0,b.isNumber)(f)?"".concat(f,"px"):f,height:h,width:d});var V,U=!!T;if(U?(null==A||A.remove(!0),s.replaceChild($,T)):s.appendChild($),!u){if(V=s.getBoundingClientRect()||{},void 0!==v&&void 0!==m)N=v,I=m;else if(!U&&!k){var W=V.top,H=_||{},Y=H.left,X=H.right,q=void 0===X?16:X,Z=H.top,K=void 0===Z?8:Z,J=H.bottom,Q=q,tt=K;isNaN(Y)||(Q=s.scrollWidth-Y),isNaN(J)||(tt=s.scrollHeight-J);var et=(0,b.isNumber)(f)?f:100;N=s.scrollWidth-$.scrollWidth-(C.length-1)*et-Q;var nt=C[C.length-1],rt=(nt[nt.length-1]||{}).bbox;I=(null==rt?void 0:rt.bottom)-W||tt}ch($,{position:"absolute",left:"".concat(N,"px"),top:"".concat(I,"px"),cusor:u?"unset":"move"})}this.bindListener($,M);var it=$.getBoundingClientRect();if(!k){var ot=rm(t,it,a,this.get("canvas")),at=this.get("linkStyle");A=S.addShape("path",{attrs:Qv({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:ot},at)})}if(o[M]=Qv(Qv({},o[M]||{}),{id:M,collapsed:g,card:$,link:A,x:N,y:I,cardBBox:it,content:D||x,title:P||y,contentPlaceholder:F,titlePlaceholder:z,isCanvas:k}),i.set("cardInfoMap",o),u)this.updateCardPositionsInConatainer(),this.updateLinks();else{var st=!isNaN(v)&&!isNaN(m);if(!U&&!k&&!st){var ut=V.bottom,ct=void 0===ut?0:ut;W=V.top,C[C.length-1].push({id:M,bbox:it}),it.top>ct-W-it.height-16&&C.push([]),this.set("rows",C)}}this.updateCardSize(M);var lt=this.get("onAnnotationChange");null==lt||lt(o[M],U?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var e=this.get("container"),n=this.get("containerCfg").position,r=e.getBoundingClientRect().width,i=getComputedStyle(e),o=im(i.paddingLeft)+im(i.paddingRight);r-=o,Object.values(t).forEach((function(t){var e=t.card,i=e.getBoundingClientRect().width;switch(n){case"right":ch(e,{marginLeft:r?"".concat(r-i,"px"):"0px"});break;case"top":case"bottom":ch(e,{marginLeft:"8px"})}}))}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var e=this.get("graph"),n=this.get("cardInfoMap");if(n){var r=n[t].collapsed,i=e.findById(t);i&&("hide"!==this.get("cardCfg").collapseType||r?this.toggleAnnotation(i,{collapsed:!r}):this.hideCard(t),n[t]=Qv(Qv({},n[t]),{collapsed:!r}))}}},e.prototype.hideCard=function(t){if(!this.destroyed){var e=this.get("cardInfoMap");if(e&&e[t]){var n=e[t],r=n.card,i=n.link;ch(r,{display:"none"}),null==i||i.hide(),this.get("onAnnotationChange")(e[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var n=e[t],r=n.card,i=n.link;this.get("container").removeChild(r),null==i||i.remove(!0),delete e[t],this.get("onAnnotationChange")(n,"remove")}}},e.prototype.bindListener=function(t,e){var n=this;if(!this.destroyed){t.addEventListener("mousemove",(function(t){var r;if("g6-annotation-collapse"===t.target.className?r="collapse":"g6-annotation-expand"===t.target.className?r="expand":"g6-annotation-close"===t.target.className&&(r="close"),r){var i=n.get("cardCfg").onMouseEnterIcon;(void 0===i?function(){}:i)(t,e,r)}})),t.addEventListener("mouseout",(function(t){var r;if("g6-annotation-collapse"===t.target.className?r="collapse":"g6-annotation-expand"===t.target.className?r="expand":"g6-annotation-close"===t.target.className&&(r="close"),r){var i=n.get("cardCfg").onMouseLeaveIcon;(void 0===i?function(){}:i)(t,e,r)}})),t.addEventListener("mouseenter",(function(t){var r=n.get("cardInfoMap");if(r){var i=n.get("graph"),o=i.findById(e);if(o){var a=n.get("itemHighlightState");i.setItemState(o,a,!0)}var s=r[e].link;if(s){var u=n.get("linkHighlightStyle")||{};s.attr(u)}}})),t.addEventListener("mouseleave",(function(t){var r=n.get("cardInfoMap");if(r){var i=n.get("graph"),o=i.findById(e);if(o){var a=n.get("itemHighlightState");i.setItemState(o,a,!1)}var s=r[e].link;if(s){var u=n.get("linkHighlightStyle")||{};Object.keys(u).forEach((function(t){s.attr(t,void 0),s.attr(t,void 0)}));var c=n.get("linkStyle");s.attr(c)}}})),t.addEventListener("click",(function(t){var r=(n.get("cardCfg")||{}).onClickIcon;"g6-annotation-collapse"===t.target.className||"g6-annotation-expand"===t.target.className?("hide"===n.get("cardCfg").collapseType?n.hideCard(e):n.handleExpandCollapseCard(e),null==r||r(t,e,"g6-annotation-collapse"===t.target.className?"collapse":"expand")):"g6-annotation-close"===t.target.className&&("remove"===n.get("cardCfg").closeType?n.removeCard(e):n.hideCard(e),null==r||r(t,e,"close"))})),this.get("editable")&&t.addEventListener("dblclick",(function(t){var r=n.get("cardInfoMap"),i=(n.get("cardCfg")||{}).maxTitleLength,o=void 0===i?20:i;if(r){var a=t.target,s=a.className;if("g6-annotation-title"===s||"g6-annotation-content"===s){var u="g6-annotation-title"===s?a.getBoundingClientRect():a.parentNode.getBoundingClientRect(),c=u.width,l=u.height,f=getComputedStyle(a),d=th("<".concat("g6-annotation-title"===s?"input":"textarea",' class="').concat(s,'-input" type="textarea" style="width:').concat(c,"px; height: ").concat(l,'px; min-width: 16px;"/>')),h=th('<div class="'.concat(s,'-input-wrapper" style="width: ').concat(c,"px; height: ").concat(l,"px; min-width: 16px; margin-right: ").concat(f.marginRight,'" />'));h.appendChild(d),a.parentNode.replaceChild(h,a);var p=r[e],g=p.contentPlaceholder,v=p.titlePlaceholder,m=p.content,y=p.title,b=m;"g6-annotation-title"===s?(d.name="title",d.maxLength=o,b=y):d.name="content",b?(d.innerHTML=a.innerHTML,d.value=a.innerHTML):d.placeholder="g6-annotation-title"===s?v:g,d.focus(),d.addEventListener("blur",(function(t){d.value&&(a.innerHTML=d.value,p[d.name||"title"]=d.value),h.parentNode.replaceChild(a,h),n.updateCardSize(e);var r=n.get("onAnnotationChange");null==r||r(p,"update")}))}}}));var r=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",(function(e){var i=e.target.className;if(!r.includes(i)){var o=t.style;n.set("dragging",{card:t,x:e.clientX,y:e.clientY,left:im(o.left),top:im(o.top)})}})),t.addEventListener("drag",(function(t){t.preventDefault();var r=n.get("cardInfoMap");if(r){var i=t.clientX,o=t.clientY,a=n.get("dragging");if(!isNaN(i)&&!isNaN(o)&&a){var s=a.x,u=a.y,c=a.left,l=a.top,f=a.card,d=i-s,h=o-u;c+=d,l+=h;var p=n.get("graph"),g=p.getPointByCanvas(0,0),v=p.getPointByCanvas(p.getWidth(),p.getHeight()),m=p.getClientByPoint(g.x,g.y),y=m.x,b=m.y,x=p.getClientByPoint(v.x,v.y),w=x.x,_=x.y,E=f.getBoundingClientRect();(c>w-y-(E.right-E.left)&&d>0||c<0&&d<0)&&(c-=d),(l>_-b-(E.bottom-E.top)&&h>0||l<0&&h<0)&&(l-=h),ch(f,{left:"".concat(c,"px"),top:"".concat(l,"px"),visibility:"hidden"}),s=i,u=o;var S=(r[e]||{}).link;if(S){var C=p.findById(e);S.attr("path",rm(C,E,p,n.get("canvas")))}n.set("dragging",{x:s,y:u,left:c,top:l,card:f})}}})),t.addEventListener("dragend",(function(t){var r=n.get("cardInfoMap");if(r){var i=n.get("dragging");if(i){var o=i.left,a=i.top,s=i.card;r[e].x=o,r[e].y=a,ch(s,{visibility:"visible"}),n.set("dragging",!1);var u=n.get("rows");null==u||u.forEach((function(t){for(var n=t.length-1;n>=0;n--)t[n].id===e&&t.splice(n,1)}));var c=n.get("onAnnotationChange");null==c||c(r[e],"update")}}}))}},e.prototype.updateCardSize=function(t){var e=this.get("cardInfoMap");if(e){var n=e[t].card,r=n.getBoundingClientRect().width,i=n.getElementsByClassName("g6-annotation-title")[0];if(i){var o=getComputedStyle(i),a=im(o.marginLeft),s=i.getBoundingClientRect().width;ch(i,{marginRight:"".concat(r-a-24-16-s,"px")})}}},e.prototype.updateLink=function(t){var e=t.item;if(e){var n=this.get("cardInfoMap");if(n){var r=this.get("canvas"),i=this.get("graph"),o=n[e.getID()]||{},a=o.link,s=o.card;if(a){var u=rm(e,s.getBoundingClientRect(),i,r);a.attr("path",u)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var n=this.get("graph");Object.values(e).forEach((function(e){var r=e.id,i=n.findById(r);t.updateLink({item:i})}))}}},e.prototype.onGraphDataChange=function(){var t=this,e=this.get("cardInfoMap");if(e){var n=this.get("graph");Object.values(e).forEach((function(e){var r=e.id,i=e.card,o=e.isCanvas;if(i&&!o&&"none"!==i.style.display){var a=n.findById(r);a&&a.isVisible()?t.toggleAnnotation(a):t.hideCard(r)}}))}},e.prototype.onGraphItemVisibilityChange=function(t){var e=t.item,n=t.visible;if(e&&!e.destroyed){var r=this.get("cardInfoMap");if(r){var i=e.getID();r[i]&&(n||this.hideCard(i))}}},e.prototype.saveData=function(t){void 0===t&&(t=!1);var e=this.get("cardInfoMap");if(e){var n=this.get("graph"),r=this.get("getTitle"),i=this.get("getContent"),o=[];return Object.values(e).forEach((function(e){var a=e.title,s=e.content,u=e.x,c=e.y,l=e.id,f=e.collapsed,d=e.card;if(!d||"none"!==d.style.display||t){var h=n.findById(l)||n.get("canvas");o.push({id:l,x:u,y:c,collapsed:f,title:a||(null==r?void 0:r(h)),content:s||(null==i?void 0:i(h)),visible:d&&"none"!==d.style.display})}})),o}},e.prototype.readData=function(t){var e=this,n=this.get("graph");t.forEach((function(t){var r=t.id,i=t.x,o=t.y,a=t.title,s=t.content,u=t.collapsed,c=t.visible,l=n.findById(r);if(l||r!==em||(l=n.get("canvas")),!l){var f=e.get("cardInfoMap")||{};return f[r]=t,void e.set("cardInfoMap",f)}e.toggleAnnotation(l,{x:i,y:o,title:a,content:s,collapsed:u}),c||e.hideCard(r)}))},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var e=this.get("container");Object.values(t).forEach((function(t){var n=t.card,r=t.link;e.removeChild(n),null==r||r.remove(!0)})),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),null===(t=this.get("canvas"))||void 0===t||t.destroy();var e=this.get("graph");e&&!e.destroyed&&(this.get("containerCfg")&&e.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(dh),rm=function(t,e,n,r){var i,o;if("edge"===t.getType())o=[t.getKeyShape().getPoint(.5)];else{var a=null===(i=t.getKeyShape)||void 0===i?void 0:i.call(t).getBBox(),s=a.minX,u=a.minY,c=a.maxX,l=a.maxY,f=t.getModel(),d=f.x,h=f.y;o={left:{x:s+=d,y:((u+=h)+(l+=h))/2},right:{x:c+=d,y:(u+l)/2},top:{x:(s+c)/2,y:u},bottom:{x:(s+c)/2,y:l}}}Object.keys(o).forEach((function(t){var e=o[t],i=e.x,a=e.y,s=n.getClientByPoint(i,a);o[t]=r.getPointByClient(s.x,s.y)}));var p=e.top,g=void 0===p?0:p,v=e.left,m=void 0===v?0:v,y=e.right,b=void 0===y?0:y,x=e.bottom,w=void 0===x?0:x,_={left:r.getPointByClient(m,(g+w)/2),right:r.getPointByClient(b,(g+w)/2),top:r.getPointByClient((m+b)/2,g),bottom:r.getPointByClient((m+b)/2,w)};return function(t,e){var n,r,i=1/0;Object.keys(t).forEach((function(o){var a=t[o];Object.keys(e).forEach((function(t){var o=e[t],s=a.x-o.x,u=a.y-o.y,c=s*s+u*u;i>c&&(i=c,n=a,r=o)}))}));var o=Au.getControlPoint(n,r,.5,20);return[["M",n.x,n.y],["Q",o.x,o.y,r.x,r.y]]}(o,_)},im=function(t){return Number(t.replace(/\s+|px/gi,""))||0},om={PluginBase:dh,Menu:wh,Grid:vh,Minimap:Mh,Bundling:Ih,ToolBar:zh,Tooltip:Vh,Fisheye:jh,TimeBar:Nv,ImageMinimap:Lv,EdgeFilterLens:$v,SnapLine:Hv,Legend:Kv,Annotation:nm};Du("circle",{options:{size:Bu.defaultNode.size,style:{x:0,y:0,stroke:Bu.defaultNode.style.stroke,fill:Bu.defaultNode.style.fill,lineWidth:Bu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bu.nodeLabel.style.fill,fontSize:Bu.nodeLabel.style.fontSize,fontFamily:Bu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Bu.defaultNode.linkPoints.size,lineWidth:Bu.defaultNode.linkPoints.lineWidth,fill:Bu.defaultNode.linkPoints.fill,stroke:Bu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Bu.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=(0,b.deepMix)({},r,t.icon),a="".concat(this.type,"-keyShape"),s=e.addShape("circle",{attrs:i,className:a,name:a,draggable:!0});e.shapeMap[a]=s;var u=o.width,c=o.height,l=o.show,f=o.text;if(l){var d="".concat(this.type,"-icon");e.shapeMap[d]=f?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d,draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-u/2,y:-c/2},o),className:d,name:d,draggable:!0})}return this.drawLinkPoints(t,e),s},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints;if(n){var r=n||{},i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),f=this.getSize(t)[0]/2;if(o){var d="link-point-left";e.shapeMap[d]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-f,y:0,r:u/2||c||5}),className:d,name:d,isAnchorPoint:!0})}if(a){var h="link-point-right";e.shapeMap[h]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:f,y:0,r:u/2||c||5}),className:h,name:h,isAnchorPoint:!0})}if(i){var p="link-point-top";e.shapeMap[p]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-f,r:u/2||c||5}),className:p,name:p,isAnchorPoint:!0})}if(s){var g="link-point-bottom";e.shapeMap[g]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:f,r:u/2||c||5}),className:g,name:g,isAnchorPoint:!0})}}},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,b.deepMix)({},e,n),i=this.getSize(t)[0]/2;return(0,y.__assign)({x:0,y:0,r:i},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getSize(t),o=(0,y.__assign)({},t.style);void 0===t.style.stroke&&t.color&&(o.stroke=t.color),void 0!==t.style.r||isNaN(i[0])||(o.r=i[0]/2),this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,r)}},"single-node"),Du("rect",{options:{size:[100,30],style:{radius:0,stroke:Bu.defaultNode.style.stroke,fill:Bu.defaultNode.style.fill,lineWidth:Bu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bu.nodeLabel.style.fill,fontSize:Bu.nodeLabel.style.fontSize,fontFamily:Bu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Bu.defaultNode.linkPoints.size,lineWidth:Bu.defaultNode.linkPoints.lineWidth,fill:Bu.defaultNode.linkPoints.fill,stroke:Bu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Bu.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),r=e.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return e.shapeMap["".concat(this.type,"-keyShape")]=r,this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),f=this.getSize(t),d=f[0],h=f[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-h/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:h/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,b.mix)({},e,n),i=this.getSize(t),o=r.width||i[0],a=r.height||i[1];return(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getSize(t),a=e.get("keyShape");t.size||(o[0]=a.attr("width")||i.width,o[1]=a.attr("height")||i.height);var s={stroke:t.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=(0,b.mix)({},i,a.attr(),s);u=(0,b.mix)(u,t.style),this.updateShape(t,e,u,!1,n),this.updateLinkPoints(t,r)}},"single-node"),Du("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Bu.defaultNode.style.stroke,fill:Bu.defaultNode.style.fill,lineWidth:Bu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bu.nodeLabel.style.fill,fontSize:Bu.nodeLabel.style.fontSize,fontFamily:Bu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Bu.defaultNode.linkPoints.size,lineWidth:Bu.defaultNode.linkPoints.lineWidth,fill:Bu.defaultNode.linkPoints.fill,stroke:Bu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Bu.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});e.shapeMap["ellipse-keyShape"]=o;var a=r.width,s=r.height,u=r.show,c=r.text;return u&&(e.shapeMap["".concat(this.type,"-icon")]=c?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),f=this.getSize(t),d=f[0]/2,h=f[1]/2;o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-d,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:d,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-h,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:h,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,b.mix)({},e,n),i=this.getSize(t),o=i[0]/2,a=i[1]/2;return(0,y.__assign)({x:0,y:0,rx:o,ry:a},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getSize(t),a={stroke:t.color,rx:o[0]/2,ry:o[1]/2},s=e.get("keyShape"),u=(0,b.mix)({},i,s.attr(),a);u=(0,b.mix)(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,r)}},"single-node"),Du("diamond",{options:{size:[80,80],style:{stroke:Bu.defaultNode.style.stroke,fill:Bu.defaultNode.style.fill,lineWidth:Bu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bu.nodeLabel.style.fill,fontSize:Bu.nodeLabel.style.fontSize,fontFamily:Bu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Bu.defaultNode.linkPoints.size,lineWidth:Bu.defaultNode.linkPoints.lineWidth,fill:Bu.defaultNode.linkPoints.fill,stroke:Bu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Bu.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,u=r.show,c=r.text;return u&&(e.shapeMap["".concat(this.type,"-icon")]=c?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),f=this.getSize(t),d=f[0],h=f[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-h/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:h/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(t){var e=this.getSize(t),n=e[0],r=e[1];return[["M",0,-r/2],["L",n/2,0],["L",0,r/2],["L",-n/2,0],["Z"]]},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,b.mix)({},e,n),i=this.getPath(t);return(0,y.__assign)({path:i},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a={stroke:t.color,path:o},s=e.get("keyShape"),u=(0,b.mix)({},i,s.attr(),a);u=(0,b.mix)(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,r)}},"single-node"),Du("triangle",{options:{size:40,direction:"up",style:{stroke:Bu.defaultNode.style.stroke,fill:Bu.defaultNode.style.fill,lineWidth:Bu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bu.nodeLabel.style.fill,fontSize:Bu.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Bu.defaultNode.linkPoints.size,lineWidth:Bu.defaultNode.linkPoints.lineWidth,fill:Bu.defaultNode.linkPoints.fill,stroke:Bu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,y.__assign)({},Bu.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.icon,i=void 0===r?{}:r,o=n.direction,a=this.getShapeStyle(t),s=t.direction||o,u=e.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=u;var c=i.width,l=i.height,f=i.show,d=i.offset,h=i.text;if(f)if(h)e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var p=-c/2,g=-l/2;"up"!==s&&"down"!==s||(g+=d),"left"!==s&&"right"!==s||(p+=d),e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:(0,y.__assign)({x:p,y:g},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(t,e),u},drawLinkPoints:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.linkPoints,i=void 0===r?{}:r,o=n.direction,a=t.direction||o,s=i.top,u=i.left,c=i.right,l=i.bottom,f=i.size,d=i.r,h=(0,y.__rest)(i,["top","left","right","bottom","size","r"]),p=this.getSize(t)[0];if(u){var g=null,v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI);"up"===a?g=[-m,v]:"down"===a?g=[-m,-v]:"left"===a&&(g=[-m,m-v]),g&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:g[0],y:g[1],r:f/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var b=null;v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI),"up"===a?b=[m,v]:"down"===a?b=[m,-v]:"right"===a&&(b=[m,m-v]),b&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:b[0],y:b[1],r:f/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(s){var x=null;v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI),"up"===a?x=[m-v,-v]:"left"===a?x=[m,-v]:"right"===a&&(x=[-m,-v]),x&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:x[0],y:x[1],r:f/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var w=null;v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI),"down"===a?w=[-m+v,v]:"left"===a?w=[m,v]:"right"===a&&(w=[-m,v]),w&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:w[0],y:w[1],r:f/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(t){var e=(this.mergeStyle||this.getOptions(t)).direction,n=t.direction||e,r=this.getSize(t)[0],i=r*Math.sin(1/3*Math.PI),o=r*Math.sin(1/3*Math.PI),a=[["M",-o,i],["L",0,-i],["L",o,i],["Z"]];return"down"===n?a=[["M",-o,-i],["L",o,-i],["L",0,i],["Z"]]:"left"===n?a=[["M",-o,o-i],["L",o,-o],["L",o,o],["Z"]]:"right"===n&&(a=[["M",o,o-i],["L",-o,o],["L",-o,-o],["Z"]]),a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,b.mix)({},e,n),i=this.getPath(t);return(0,y.__assign)({path:i},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a={stroke:t.color,path:o},s=e.get("keyShape"),u=(0,b.mix)({},i,s.attr(),a);u=(0,b.mix)(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}),r=n.linkPoints,i=n.direction,o=t.direction||i,a=e.shapeMap["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),s=e.shapeMap["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),u=e.shapeMap["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),c=e.shapeMap["link-point-bottom"]||e.find((function(t){return"link-point-bottom"===t.get("className")})),l=r,f=a||s||u||c;f&&(l=f.attr());var d=(0,b.mix)({},l,t.linkPoints),h=d.fill,p=d.stroke,g=d.lineWidth,v=d.size/2;v||(v=d.r);var m=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},x=m.left,w=m.right,_=m.top,E=m.bottom,S=this.getSize(t)[0],C={r:v,fill:h,stroke:p,lineWidth:g},k=null,M=S*Math.sin(1/3*Math.PI),O=S*Math.sin(1/3*Math.PI);"up"===o?k=[-O,M]:"down"===o?k=[-O,-M]:"left"===o&&(k=[-O,O-M]),k&&(a?x||void 0===x?a.attr((0,y.__assign)((0,y.__assign)({},C),{x:k[0],y:k[1]})):(a.remove(),delete e.shapeMap["link-point-left"]):x&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},C),{x:k[0],y:k[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var T=null;"up"===o?T=[O,M]:"down"===o?T=[O,-M]:"right"===o&&(T=[O,O-M]),T&&(s?w||void 0===w?s.attr((0,y.__assign)((0,y.__assign)({},C),{x:T[0],y:T[1]})):(s.remove(),delete e.shapeMap["link-point-right"]):w&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},C),{x:T[0],y:T[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var A=null;"up"===o?A=[O-M,-M]:"left"===o?A=[O,-M]:"right"===o&&(A=[-O,-M]),A&&(u?_||void 0===_?u.attr((0,y.__assign)((0,y.__assign)({},C),{x:A[0],y:A[1]})):(u.remove(),delete e.shapeMap["link-point-top"]):_&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},C),{x:A[0],y:A[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var N=null;"down"===o?N=[-O+M,M]:"left"===o?N=[O,M]:"right"===o&&(N=[-O,M]),N&&(c?E||void 0===E?c.attr((0,y.__assign)((0,y.__assign)({},C),{x:N[0],y:N[1]})):(c.remove(),delete e.shapeMap["link-point-bottom"]):E&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},C),{x:N[0],y:N[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),Du("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Bu.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Bu.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Bu.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).preRect,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=this.getSize(t),a=o[0],s=o[1],u=e.addShape("rect",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=u;var c=r.show,l=(0,y.__rest)(r,["show"]);return c&&(e.shapeMap["pre-rect"]=e.addShape("rect",{attrs:(0,y.__assign)({x:-a/2,y:-s/2,height:s},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),u},drawLogoIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).logoIcon,r=void 0===n?{}:n,i=this.getSize(t)[0];if(r.show){var o=r.width,a=r.height,s=r.x,u=r.y,c=r.offset,l=r.text,f=(0,y.__rest)(r,["width","height","x","y","offset","text"]);e.shapeMap["rect-logo-icon"]=l?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},f),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:s||-i/2+o+c,y:u||-a/2,width:o,height:a}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).stateIcon,r=void 0===n?{}:n,i=this.getSize(t)[0];if(r.show){var o=r.width,a=r.height,s=r.x,u=r.y,c=r.offset,l=r.text,f=(0,y.__rest)(r,["width","height","x","y","offset","text"]);e.shapeMap["rect-state-icon"]=l?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},f),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:s||i/2-o+c,y:u||-a/2,width:o,height:a}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),f=this.getSize(t),d=f[0],h=f[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-h/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:h/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(t,e){var n=this.getOptions(t),r=n.labelCfg,i=void 0===r?{}:r,o=n.logoIcon,a=void 0===o?{}:o,s=n.descriptionCfg,u=void 0===s?{}:s,c=this.getSize(t)[0],l=null,f=a.show,d=a.width,h=-c/2+i.offset;f&&(h=-c/2+d+i.offset);var p=i.style,g=u.style,v=u.paddingTop;return(0,b.isString)(t.description)?(l=e.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},p),{x:h,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=l,e.shapeMap["rect-description"]=e.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},g),{x:h,y:17+(v||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(l=e.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},p),{x:h,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=l),l},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,b.mix)({},e,n),i=this.getSize(t),o=r.width||i[0],a=r.height||i[1];return(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a},r)},update:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.style,i=void 0===r?{}:r,o=n.labelCfg,a=void 0===o?{}:o,s=n.descriptionCfg,u=void 0===s?{}:s,c=this.getSize(t),l=c[0],f=c[1];e.get("keyShape").attr((0,y.__assign)((0,y.__assign)({},i),{x:-l/2,y:-f/2,width:l,height:f}));var d=e.getContainer(),h=d.shapeMap["rect-logo-icon"]||d.find((function(t){return"rect-logo-icon"===t.get("className")})),p=h?h.attr():{},g=(0,b.mix)({},p,t.logoIcon),v=g.width;void 0===v&&(v=this.options.logoIcon.width);var m=t.logoIcon?t.logoIcon.show:void 0,x=a.offset,w=-l/2+v+x;m||void 0===m||(w=-l/2+x);var _=d.shapeMap["node-label"]||d.find((function(t){return"node-label"===t.get("className")})),E=d.shapeMap["rect-description"]||d.find((function(t){return"rect-description"===t.get("className")}));if(t.label)if(_){var S=t.labelCfg?t.labelCfg.style:{},C=(0,b.mix)({},_.attr(),S);t.label&&(C.text=t.label),C.x=w,(0,b.isString)(t.description)&&(C.y=-5),E&&(E.resetMatrix(),E.attr({x:w})),_.resetMatrix(),_.attr(C)}else d.shapeMap["node-label"]=d.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},a.style),{x:w,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});if((0,b.isString)(t.description)){var k=u.paddingTop;if(E){S=t.descriptionCfg?t.descriptionCfg.style:{};var M=(0,b.mix)({},E.attr(),S);(0,b.isString)(t.description)&&(M.text=t.description),M.x=w,E.resetMatrix(),E.attr((0,y.__assign)((0,y.__assign)({},M),{y:17+(k||0)}))}else d.shapeMap["rect-description"]=d.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},u.style),{x:w,y:17+(k||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})}var O=d.shapeMap["pre-rect"]||d.find((function(t){return"pre-rect"===t.get("className")}));if(O&&!O.destroyed){var T=(0,b.mix)({},O.attr(),t.preRect);O.attr((0,y.__assign)((0,y.__assign)({},T),{x:-l/2,y:-f/2,height:f}))}if(h&&!h.destroyed)if(m||void 0===m){var A=g.width,N=g.height,I=g.x,P=g.y,D=g.offset,L=(0,y.__rest)(g,["width","height","x","y","offset"]);h.attr((0,y.__assign)((0,y.__assign)({},L),{x:I||-l/2+A+D,y:P||-N/2,width:A,height:N}))}else h.remove(),delete d.shapeMap["pre-rect"];else m&&this.drawLogoIcon(t,d);var R=d.shapeMap["rect-state-icon"]||d.find((function(t){return"rect-state-icon"===t.get("className")})),j=R?R.attr():{},B=(0,b.mix)({},j,t.stateIcon);if(R){B.show||void 0===B.show||(R.remove(),delete d.shapeMap["rect-state-icon"]);var F=B.width,z=(N=B.height,I=B.x,P=B.y,B.offset),$=(0,y.__rest)(B,["width","height","x","y","offset"]);R.attr((0,y.__assign)((0,y.__assign)({},$),{x:I||l/2-F+z,y:P||-N/2,width:F,height:N}))}else B.show&&this.drawStateIcon(t,d);this.updateLinkPoints(t,d)},getOptions:function(t,e){return"move"===e?t:(0,b.deepMix)({},this.options,this.getCustomConfig(t)||{},t)}},"single-node"),Du("star",{options:{size:60,style:{stroke:Bu.defaultNode.style.stroke,fill:Bu.defaultNode.style.fill,lineWidth:Bu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bu.nodeLabel.style.fill,fontSize:Bu.nodeLabel.style.fontSize,fontFamily:Bu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Bu.defaultNode.linkPoints.size,lineWidth:Bu.defaultNode.linkPoints.lineWidth,fill:Bu.defaultNode.linkPoints.fill,stroke:Bu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Bu.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,u=r.show,c=r.text;return u&&(e.shapeMap["".concat(this.type,"-icon")]=c?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.leftBottom,u=r.rightBottom,c=r.size,l=r.r,f=(0,y.__rest)(r,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(t)[0];if(a){var h=Math.cos(.1*Math.PI)*d,p=Math.sin(.1*Math.PI)*d;e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:h,y:-p,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}i&&(h=Math.cos(.5*Math.PI)*d,p=Math.sin(.5*Math.PI)*d,e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:h,y:-p,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})),o&&(h=Math.cos(.9*Math.PI)*d,p=Math.sin(.9*Math.PI)*d,e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:h,y:-p,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})),s&&(h=Math.cos(1.3*Math.PI)*d,p=Math.sin(1.3*Math.PI)*d,e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:h,y:-p,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),u&&(h=Math.cos(1.7*Math.PI)*d,p=Math.sin(1.7*Math.PI)*d,e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:h,y:-p,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(t){var e=this.getSize(t)[0],n=3*e/8,r=t.innerR||n;return Au.getStarPath(e,r)},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,b.mix)({},e,n),i=this.getPath(t);return(0,y.__assign)({path:i},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a={stroke:t.color,path:o},s=e.get("keyShape"),u=(0,b.mix)({},i,s.attr(),a);u=(0,b.mix)(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,r=e.shapeMap["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),i=e.shapeMap["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),o=e.shapeMap["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),a=e.shapeMap["link-point-left-bottom"]||e.find((function(t){return"link-point-left-bottom"===t.get("className")})),s=e.shapeMap["link-point-left-bottom"]||e.find((function(t){return"link-point-right-bottom"===t.get("className")})),u=n,c=r||i||o||a||s;c&&(u=c.attr());var l=(0,b.mix)({},u,t.linkPoints),f=l.fill,d=l.stroke,h=l.lineWidth,p=l.size/2;p||(p=l.r);var g=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},v=g.left,m=g.right,x=g.top,w=g.leftBottom,_=g.rightBottom,E=this.getSize(t)[0],S={r:p,fill:f,stroke:d,lineWidth:h},C=Math.cos(.1*Math.PI)*E,k=Math.sin(.1*Math.PI)*E;i?m||void 0===m?i.attr((0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k})):(i.remove(),delete e.shapeMap["link-point-right"]):m&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),C=Math.cos(.5*Math.PI)*E,k=Math.sin(.5*Math.PI)*E,o?x||void 0===x?o.attr((0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k})):(o.remove(),delete e.shapeMap["link-point-top"]):x&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),C=Math.cos(.9*Math.PI)*E,k=Math.sin(.9*Math.PI)*E,r?v||void 0===v?r.attr((0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k})):(r.remove(),delete e.shapeMap["link-point-left"]):v&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),C=Math.cos(1.3*Math.PI)*E,k=Math.sin(1.3*Math.PI)*E,a?w||void 0===w?a.attr((0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k})):(a.remove(),delete e.shapeMap["link-point-left-bottom"]):w&&(e.shapeMap["link-point-left-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),C=Math.cos(1.7*Math.PI)*E,k=Math.sin(1.7*Math.PI)*E,s?_||void 0===_?s.attr((0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k})):(s.remove(),delete e.shapeMap["link-point-right-bottom"]):_&&(e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:C,y:-k}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var am=Au.defaultSubjectColors,sm="fan-shape-";Du("donut",{options:{size:Bu.defaultNode.size,style:{x:0,y:0,stroke:Bu.defaultNode.style.stroke,fill:Bu.defaultNode.style.fill,lineWidth:Bu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bu.nodeLabel.style.fill,fontSize:Bu.nodeLabel.style.fontSize,fontFamily:Bu.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Bu.defaultNode.linkPoints.size,lineWidth:Bu.defaultNode.linkPoints.lineWidth,fill:Bu.defaultNode.linkPoints.fill,stroke:Bu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Bu.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=(0,b.deepMix)({},r,t.icon),a=e.addShape("circle",{attrs:i,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});e.shapeMap["".concat(this.type,"-keyShape")]=a;var s=o.width,u=o.height,c=o.show,l=o.text;return c&&(e.shapeMap["".concat(this.type,"-icon")]=l?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),um(t,e,a),this.drawLinkPoints(t,e),a},updateShape:function(t,e,n,r,i){var o=e.get("keyShape");o.attr((0,y.__assign)({},n)),lm(t,e,o),this.updateLabel(t,e,i),r&&this.updateIcon(t,e)}},"circle");var um=function(t,e,n){var r=t.donutAttrs,i=void 0===r?{}:r,o=t.donutColorMap,a=void 0===o?{}:o,s=Object.keys(i).length;if(i&&s>1){var u=fm(i,a),c=u.configs,l=u.totalValue;if(l){var f=dm(n),d=f.lineWidth,h=f.arcR,p=[h,0],g=0;if(1===s)return void cm(e,{arcR:h,arcBegin:p,beginAngle:g,config:c[0],fanIndex:0,lineWidth:d,totalValue:l,drawWhole:!0});for(var v=0;v<c.length;v++){var m=cm(e,{arcR:h,arcBegin:p,beginAngle:g,config:c[v],fanIndex:v,lineWidth:d,totalValue:l});if(m.shouldEnd)return;p=m.arcBegin,g=m.beginAngle}}}},cm=function(t,e){var n,r,i,o=e.arcR,a=e.arcBegin,s=e.beginAngle,u=e.config,c=e.fanIndex,l=e.lineWidth,f=e.totalValue,d=e.drawWhole,h=void 0!==d&&d,p=e.updateShape,g=void 0===p?void 0:p,v=u.value/f;if(v<.001)return{beginAngle:s,arcBegin:a,shape:void 0,shouldEnd:!1};if(h||v>.999)n=[o,1e-4],i=!0;else{var m=v*Math.PI*2;r=s+m,n=[o*Math.cos(r),-o*Math.sin(r)],i=m>Math.PI?1:0}var y={path:[["M",a[0],a[1]],["A",o,o,0,i,0,n[0],n[1]],["L",n[0],n[1]]],stroke:u.color||(null==g?void 0:g.attr("stroke"))||am[c%am.length],lineWidth:l};return g?g.attr(y):t.shapeMap["".concat(sm).concat(c)]=t.addShape("path",{attrs:y,name:"".concat(sm).concat(c),draggable:!0}),{beginAngle:r,arcBegin:n,shape:t.shapeMap["".concat(sm).concat(c)],shouldEnd:h||v>.999}},lm=function(t,e,n){var r=t.donutAttrs,i=t.donutColorMap,o=void 0===i?{}:i,a={},s=e.getContainer();if(r){var u=fm(r,o),c=u.configs,l=u.totalValue;if(l)for(var f=dm(n),d=f.lineWidth,h=f.arcR,p=[h,0],g=0,v=0;v<c.length;v++){var m="".concat(sm).concat(v),y=cm(s,{arcR:h,arcBegin:p,beginAngle:g,config:c[v],fanIndex:v,lineWidth:d,totalValue:l,drawWhole:1===c.length,updateShape:s.shapeMap[m]});if(y.shape&&(a[m]=!0),y.shouldEnd)break;p=y.arcBegin,g=y.beginAngle}}Object.keys(s.shapeMap).filter((function(t){return t.includes(sm)})).forEach((function(t){a[t]||(s.shapeMap[t].remove(!0),delete s.shapeMap[t])}))},fm=function(t,e){var n=0,r=[];return Object.keys(t).forEach((function(i){var o=+t[i];isNaN(o)||(r.push({key:i,value:o,color:e[i]}),n+=o)})),{totalValue:n,configs:r}},dm=function(t){var e=t.attr("r"),n=.6*e;return{lineWidth:e-n,arcR:(e+n)/2}},hm=function(t){var e=t.x,n=t.y;return{x:e,y:n,centerX:e,centerY:n,minX:e,minY:n,maxX:e,maxY:n,height:0,width:0}},pm=function(t){for(var e=[],n={},r=t.length-1;r>=0;r--){var i=t[r];i.id="".concat(i.x,"|||").concat(i.y),n[i.id]||(n[i.id]=i,e.push(i))}return e},gm=function(t){return pm(t)},vm=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},mm=function(t,e,n){var r=function(t,e){var n=Math.abs(t.x-e.centerX),r=Math.abs(t.y-e.centerY);return 0===n&&0===r?0:n/e.width>r/e.height}(e,t);if(0===r){var i=t.centerX,o=t.centerY;return n.y<e.y?o=t.minY:n.x>e.x?i=t.maxX:n.x<e.x?i=t.minX:n.x===e.x&&(o=t.maxY),{x:i,y:o}}return r?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},ym=function(t,e){var n=Math.min(t.minX,e.minX),r=Math.min(t.minY,e.minY),i=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{centerX:(n+i)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:i,maxY:o,height:o-r,width:i-n}},bm=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},xm=function(t,e){var n=t.x,r=t.y;return n<e.minX||n>e.maxX||r<e.minY||r>e.maxY},wm=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},_m=function(t,e,n,r,i){return wm(t,e)+wm(t,n)+function(t,e){var n=0;return e.forEach((function(e){e&&(t.x===e.x&&(n+=-2),t.y===e.y&&(n+=-2))})),n}(t,[e,n,r,i])},Em=function t(e,n,r,i,o){void 0===o&&(o=0),e.unshift(n[i]),r[i]&&r[i]!==i&&o<=100&&t(e,n,r,r[i],o+1)},Sm=function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=r.x-t.x,s=r.y-t.y,u=n.x-e.x,c=n.y-e.y,l=r.x-e.x,f=r.y-e.y;return(i*s-o*a)*(u*f-c*l)<=0&&(i*c-o*u)*(a*f-s*l)<=0},Cm=function(t,e,n){if(n.width||n.height){var r=bm(n),i=r[0],o=r[1],a=r[2],s=r[3];return Sm(t,e,i,o)||Sm(t,e,i,s)||Sm(t,e,o,a)||Sm(t,e,a,s)}return!1},km=function(t,e,n,r){var i=[];return t.forEach((function(t){if(t!==e&&(t.x===e.x||t.y===e.y)){if(Cm(t,e,n)||Cm(t,e,r))return;i.push(t)}})),pm(i)},Mm=function(t,e){var n=[],r=t[0];return n.push("M".concat(r.x," ").concat(r.y)),t.forEach((function(r,i){var o=t[i+1],a=t[i+2];if(o&&a)if(function(t,e,n){return!(t.x===e.x&&e.x===n.x||t.y===e.y&&e.y===n.y)}(r,o,a)){var s=function(t,e,n,r){var i=wm(t,e),o=wm(n,e);return i<r&&(r=i),o<r&&(r=o),[{x:e.x-r/i*(e.x-t.x),y:e.y-r/i*(e.y-t.y)},{x:e.x-r/o*(e.x-n.x),y:e.y-r/o*(e.y-n.y)}]}(r,o,a,e),u=s[0],c=s[1];n.push("L".concat(u.x," ").concat(u.y)),n.push("Q".concat(o.x," ").concat(o.y," ").concat(c.x," ").concat(c.y)),n.push("L".concat(c.x," ").concat(c.y))}else n.push("L".concat(o.x," ").concat(o.y));else o&&n.push("L".concat(o.x," ").concat(o.y))})),n.join("")},Om=function(t,e,n,r,i){var o,a;if(n&&n.getType())if("combo"===n.getType()){var s=n.getKeyShape().getBBox();if(s){var u=n.getModel(),c=u.x,l=u.y;(o={x:c,y:l,width:s.width,height:s.height,minX:s.minX+c,maxX:s.maxX+c,minY:s.minY+l,maxY:s.maxY+l}).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=hm(t)}else o=n&&n.getBBox();else o=hm(t);if(r&&r.getType())if("combo"===r.getType()){var f=r.getKeyShape().getBBox();if(f){var d=r.getModel(),h=d.x,p=d.y;(a={x:h,y:p,width:f.width,height:f.height,minX:f.minX+h,maxX:f.maxX+h,minY:f.minY+p,maxY:f.maxY+p}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=hm(e)}else a=r&&r.getBBox();else a=hm(e);var g=vm(o,i),v=vm(a,i),m=mm(g,t,e),y=mm(v,e,t),b=function(t){void 0===t&&(t=[]);var e=[],n=[];t.forEach((function(t){e.push(t.x),n.push(t.y)}));var r=Math.min.apply(Math,e),i=Math.max.apply(Math,e),o=Math.min.apply(Math,n),a=Math.max.apply(Math,n);return{centerX:(r+i)/2,centerY:(o+a)/2,maxX:i,maxY:a,minX:r,minY:o,height:a-o,width:i-r}}([m,y]),x=ym(g,b),w=ym(v,b),_=[];_=_.concat(bm(x)).concat(bm(w));var E={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[b,x,w].forEach((function(t){_=_.concat(function(t,e){return function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]}(t,e.x).concat(function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]}(t,e.y))}(t,E).filter((function(t){return xm(t,g)&&xm(t,v)})))})),[{x:m.x,y:y.y},{x:y.x,y:m.y}].forEach((function(t){xm(t,g)&&xm(t,v)&&_.push(t)})),_.unshift(m),_.push(y);var S=function(t,e,n,r,i,o,a){var s,u=[],c=((s={})[e.id]=e,s),l={},f={},d={};f[e.id]=0,d[e.id]=_m(e,n,e);var h=new Tm;h.add({id:e.id,value:d[e.id]});var p,g={};for(t.forEach((function(t){g[t.id]=t}));Object.keys(c).length;){var v=h.minId(!1);if(!v)break;if((p=c[v])===n){var m=[];return Em(m,g,l,n.id),m}delete c[p.id],h.remove(p.id),u.push(p),km(t,p,r,i).forEach((function(t){if(-1===u.indexOf(t)){var r=t.id;c[r]||(c[r]=t);var i=d[p.id]+wm(p,t);f[r]&&i>=f[r]||(l[r]=p.id,f[r]=i,d[r]=f[r]+_m(t,n,e,o,a)),h.add({id:r,value:d[r]})}}))}return[e,n]}(_=pm(_),m,y,o,a,t,e);return S.unshift(t),S.push(e),gm(S)},Tm=function(){function t(){this.arr=[],this.map={},this.arr=[],this.map={}}return t.prototype._innerAdd=function(t,e){for(var n=[0,e-1];n[1]-n[0]>1;){var r=Math.floor((n[0]+n[1])/2);if(this.arr[r].value>t.value)n[1]=r;else{if(!(this.arr[r].value<t.value))return this.arr.splice(r,0,t),void(this.map[t.id]=!0);n[0]=r}}this.arr.splice(n[1],0,t),this.map[t.id]=!0},t.prototype.add=function(t){delete this.map[t.id];var e=this.arr.length;return e?this.arr[e-1].value<t.value?(this.arr.push(t),void(this.map[t.id]=!0)):void this._innerAdd(t,e):(this.arr.push(t),void(this.map[t.id]=!0))},t.prototype.remove=function(t){this.map[t]&&delete this.map[t]},t.prototype._clearAndGetMinId=function(){for(var t,e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t},t.prototype._findFirstId=function(){for(;this.arr.length;){var t=this.arr.shift();if(this.map[t.id])return t.id}},t.prototype.minId=function(t){return t?this._clearAndGetMinId():this._findFirstId()},t}(),Am={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},fallbackRoute:function(t,e,n,r,i){return gm(Om(t,e,n,r,i.offset))}},Nm=(Math.PI,function(t,e){var n=Math.round(Math.abs(t/e));return n<0?0:(t<0?-1:1)*n}),Im=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n||r?Math.atan2(r,n):0},Pm=function(t,e){var n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n},Dm=function(t,e,n){for(var r=1/0,i=0,o=e.length;i<o;i++){var a=n(t,e[i]);a<r&&(r=a)}return r},Lm=function(t,e,n,r,i){var o=[];if(!n)return[t];var a=i.directions,s=i.offset,u=n.getBBox(),c=e.x>u.minX&&e.x<u.maxX&&e.y>u.minY&&e.y<u.maxY,l=vm(u,s);for(var f in l)l[f]=Nm(l[f],i.gridSize);if(c){for(var d=0,h=a;d<h.length;d++){var p=h[d],g=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]];for(f=0;f<4;f++){var v=g[f],m=Au.getLineIntersect(t,{x:t.x+p.stepX*l.width,y:t.y+p.stepY*l.height},v[0],v[1]);m&&!Cm(t,m,u)&&(m.id="".concat(m.x,"|||").concat(m.y),o.push(m))}}return o}var y=mm(l,t,r);return y.id="".concat(y.x,"|||").concat(y.y),[y]},Rm=function(t,e,n,r){var i=Im(t,e),o=n[t.id];if(!o){var a=Im(r,t);return Pm(a,i)}var s=Im({x:o.x,y:o.y},t);return Pm(s,i)},jm=function(t,e,n,r,i,o,a){var s=[r],u=r,c=t.id,l=t.x,f=t.y,d={x:l,y:f,id:c};Rm(d,o,e,n)&&(u={x:o.x===r.x?r.x:d.x*a,y:o.y===r.y?r.y:d.y*a},s.unshift(u));for(var h=e[c];h&&h.id!==c;){var p={x:l,y:f,id:c},g={x:h.x,y:h.y,id:h.id};Rm(g,p,e,n)&&(u={x:g.x===p.x?u.x:g.x*a,y:g.y===p.y?u.y:g.y*a},s.unshift(u)),l=g.x,f=g.y,h=e[c=g.id]}return s[0].x=l===n.x?i.x:u.x,s[0].y=f===n.y?i.y:u.y,s.unshift(i),s};Lu("polyline",{options:{color:Bu.defaultEdge.color,size:Bu.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Bu.defaultEdge.style.stroke,lineAppendWidth:Bu.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Bu.edgeLabel.style.fill,fontSize:Bu.edgeLabel.style.fontSize,fontFamily:Bu.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,y.__assign)({},Bu.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);0===n.radius&&delete n.radius;var r=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return e.shapeMap["edge-shape"]=r,r},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},r=(0,b.mix)({},e,n,t.style);t=this.getPathPoints(t),this.radius=r.radius,this.offset=r.offset;var i=t.startPoint,o=t.endPoint,a=this.getControlPoints(t),s=[i];a&&(s=s.concat(a)),s.push(o);var u=t.sourceNode,c=t.targetNode,l=r.radius,f=this.options.routeCfg,d=(0,b.mix)({},f,t.routeCfg);d.offset=r.offset;var h=this.getPath(s,u,c,l,d,!Boolean(a));return((0,b.isArray)(h)&&h.length<=1||(0,b.isString)(h)&&-1===h.indexOf("L"))&&(h="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(o.x)||isNaN(o.y))&&(h="M0 0, L0 0"),(0,b.mix)({},Bu.defaultEdge.style,r,{lineWidth:t.size,path:h})},updateShapeStyle:function(t,e){var n=e.getContainer();if(e.isVisible()){var r={stroke:t.color},i=n.shapeMap["edge-shape"]||n.find((function(t){return"edge-shape"===t.get("className")}))||e.getKeyShape(),o=t.size,a=(t=this.getPathPoints(t)).startPoint,s=t.endPoint,u=this.getControlPoints(t),c=[a];u&&(c=c.concat(u)),c.push(s);var l=i.attr(),f=(0,b.mix)({},r,l,t.style),d=t.sourceNode,h=t.targetNode,p=f.radius,g=this.options.routeCfg,v=(0,b.mix)({},g,t.routeCfg);v.offset=f.offset;var m=this.getPath(c,d,h,p,v,!Boolean(u));((0,b.isArray)(m)&&m.length<=1||(0,b.isString)(m)&&-1===m.indexOf("L"))&&(m="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(m="M0 0, L0 0"),l.endArrow&&!1===f.endArrow&&(t.style.endArrow={path:""}),l.startArrow&&!1===f.startArrow&&(t.style.startArrow={path:""});var y=(0,b.mix)(r,i.attr(),{lineWidth:o,path:m},t.style);i&&i.attr(y)}},getPath:function(t,e,n,r,i,o){var a=i.offset,s=i.obstacles,u=i.simple;if(!a||t.length>2||!1===o){if(r)return Mm(t,r);var c=[];return(0,b.each)(t,(function(t,e){0===e?c.push(["M",t.x,t.y]):c.push(["L",t.x,t.y])})),c}!1===u||(null==s?void 0:s.length)||(u=!0);var l=u?Om(t[t.length-1],t[0],n,e,a):function(t,e,n,r,i){if(isNaN(t.x)||isNaN(e.x))return[];var o=(0,b.deepMix)(Am,i);o.obstacles=o.obstacles||[];var a=o.penalties,s=o.gridSize,u=function(t,e,n){var r={};return t.forEach((function(t){if(t)for(var i=vm(t.getBBox(),n),o=Nm(i.minX,e);o<=Nm(i.maxX,e);o+=1)for(var a=Nm(i.minY,e);a<=Nm(i.maxY,e);a+=1)r["".concat(o,"|||").concat(a)]=!0})),r}(o.obstacles.concat([n,r]),s,o.offset),c={x:Nm(t.x,s),y:Nm(t.y,s)},l={x:Nm(e.x,s),y:Nm(e.y,s)};t.id="".concat(c.x,"|||").concat(c.y),e.id="".concat(l.x,"|||").concat(l.y);var f=Lm(c,t,n,l,o),d=Lm(l,e,r,c,o);f.forEach((function(t){delete u[t.id]})),d.forEach((function(t){delete u[t.id]}));for(var h={},p={},g={},v={},m={},y=new Tm,x=0;x<f.length;x++){var w=f[x];h[w.id]=w,v[w.id]=0,m[w.id]=Dm(w,d,o.distFunc),y.add({id:w.id,value:m[w.id]})}var _,E,S,C,k,M,O=o.maximumLoops,T=1/0,A={};for(d.forEach((function(t){A["".concat(t.x,"|||").concat(t.y)]=!0})),Object.keys(h).forEach((function(t){var e=h[t].id;m[e]<=T&&(T=m[e],_=h[e])}));Object.keys(h).length>0&&O>0;){var N=y.minId((O+1)%30==0);if(!N)break;if(_=h[N],A["".concat(_.x,"|||").concat(_.y)])return jm(_,g,c,e,t,l,s);for(delete h[_.id],y.remove(_.id),p[_.id]=!0,x=0;x<o.directions.length;x++){E=o.directions[x];var I="".concat(Math.round(_.x)+E.stepX,"|||").concat(Math.round(_.y)+E.stepY);if(S={x:_.x+E.stepX,y:_.y+E.stepY,id:I},!p[I]&&!((M=Rm(_,S,g,c))>o.maxAllowedDirectionChange||u[I])){h[I]||(h[I]=S);var P=a[M];C=o.distFunc(_,S)+(isNaN(P)?s:P),k=v[_.id]+C;var D=v[I];D&&k>=D||(g[I]=_,v[I]=k,m[I]=k+Dm(S,d,o.distFunc),y.add({id:I,value:m[I]}))}}O-=1}return o.fallbackRoute(t,e,n,r,o)}(t[0],t[t.length-1],e,n,i);return l&&l.length?r?Mm(l,r):(l=function(t){if(!(null==t?void 0:t.length))return t;for(var e=t[t.length-1],n={x:e.x,y:e.y},r=[e],i=[e],o=t.length-2;o>=0;o--){var a,s=t[o];s.x===n.x?r.push(s):(r=[s],n.x=s.x),s.y===n.y?i.push(s):(i=[s],n.y=s.y),r.length>2?(a=t.indexOf(r[1]))>-1&&t.splice(a,1):i.length>2&&(a=t.indexOf(i[1]))>-1&&t.splice(a,1)}return t}(l),Au.pointsToPolygon(l)):"M0 0, L0 0"}},"single-edge");var Bm=Ld.cloneEvent,Fm=Ld.isNaN,zm=Math.abs,$m=["shift","ctrl","alt","control"],Gm={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,n=+t.clientX,r=+t.clientY;if(!Fm(n)&&!Fm(r)){var i=n-e.x,o=r-e.y;"x"===this.get("direction")?o=0:"y"===this.get("direction")&&(i=0),this.origin={x:n,y:r};var a=this.graph.get("width"),s=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c*=a,l*=s),(u.minX<=a+c&&u.minX+i>a+c||u.maxX+c>=0&&u.maxX+c+i<0)&&(i=0),(u.minY<=s+l&&u.minY+o>s+l||u.maxY+l>=0&&u.maxY+l+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];n&&r||(t.preventDefault(),this.mousedown=!0,this.onDragStart(t))},onMouseDown:function(t){this.mousedown=!0},onDragMove:function(t){this.mousedown&&(this.dragstart?this.onDrag(t):(this.dragstart=!0,this.onDragStart(t)))},onDragStart:function(t){var e=this,n=t.originalEvent;if((!n||"touchstart"===t.name||0===n.button)&&("touchstart"===t.name||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin(t,this)&&!e.keydown&&this.allowDrag(t)){if(e.origin={x:t.clientX,y:t.clientY},e.dragging=!1,this.enableOptimize){for(var r=this.graph,i=r.getEdges(),o=0,a=i.length;o<a;o++){var s=i[o].get("group").get("children");s&&s.forEach((function(t){t.set("ori-visibility",t.get("ori-visibility")||t.get("visible")),t.hide()}))}for(var u=r.getNodes(),c=0,l=u.length;c<l;c++)for(var f=0,d=u[c].getContainer().get("children");f<d.length;f++){var h=d[f];h.get("isKeyShape")||(h.set("ori-visibility",h.get("ori-visibility")||h.get("visible")),h.hide())}}if("undefined"!=typeof window){var p=this;this.handleDOMContextMenu=function(t){return p.onMouseUp(t)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];n&&r?this.onMouseUp(t):(t.preventDefault(),this.onDrag(t))},onDrag:function(t){if(this.mousedown){var e=this.graph;if(!this.keydown&&this.allowDrag(t)&&(t=Bm(t),this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(zm(this.origin.x-t.clientX)+zm(this.origin.y-t.clientY)<10)return;this.shouldBegin(t,this)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.originPosition={x:t.clientX,y:t.clientY},this.dragging=!0)}this.shouldUpdate(t,this)&&this.updateViewport(t)}}},onMouseUp:function(t){var e,n;this.mousedown=!1,this.dragstart=!1;var r=this.graph;if(!this.keydown){var i=r.getZoom(),o=r.get("modeController"),a=null===(n=null===(e=null==o?void 0:o.modes[o.mode])||void 0===e?void 0:e.filter((function(t){return"zoom-canvas"===t.type})))||void 0===n?void 0:n[0],s=a?a.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=r.getEdges(),c=0,l=u.length;c<l;c++){var f=u[c].get("group").get("children");f&&f.forEach((function(t){var e=t.get("ori-visibility");t.set("ori-visibility",void 0),e&&t.show()}))}if(i>s)for(var d=r.getNodes(),h=0,p=d.length;h<p;h++)for(var g=0,v=d[h].getContainer().get("children");g<v.length;g++){var m=v[g];if(!m.get("isKeyShape")){var y=m.get("ori-visibility");m.set("ori-visibility",void 0),y&&m.show()}}}this.dragging?(t=Bm(t),this.shouldEnd(t,this)&&this.updateViewport(t),t.type="dragend",t.dx=t.clientX-this.originPosition.x,t.dy=t.clientY-this.originPosition.y,r.emit("canvas:dragend",t),this.endDrag(),"undefined"!=typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(t){var e=t.key;e&&($m.indexOf(e.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(t){var e,n,r=t.target,i=r&&r.isCanvas&&r.isCanvas();if((0,b.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,b.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,a=o.node,s=o.edge,u=o.combo,c=null===(n=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===n?void 0:n.call(e);if(!a&&"node"===c)return!1;if(!s&&"edge"===c)return!1;if(!u&&"combo"===c)return!1}return!0}},Vm={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd"}},validationCombo:function(t){return!(!this.origin||!t||t.destroyed)&&"combo"===t.getType()},onTouchStart:function(t){if(t.item){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.mousedown={item:t.item,target:t.target},this.dragstart=!0,this.onDragStart(t)}},onTouchMove:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return void this.onDragEnd(t);t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.onDrag(t)},onMouseDown:function(t){this.mousedown={item:t.item,target:t.target}},onDragMove:function(t){var e,n;"node"===(null===(n=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===n?void 0:n.call(e))?this.mousedown&&(this.dragstart?this.onDrag((0,y.__assign)((0,y.__assign)({},t),this.mousedown)):(this.dragstart=!0,this.onDragStart(t))):this.onDragEnd()},onDragStart:function(t){var e=this;if(this.currentShouldEnd=!0,this.shouldBegin((0,y.__assign)((0,y.__assign)({},t),this.mousedown),this)){var n=this.mousedown,r=n.item,i=n.target;if(r&&!r.destroyed&&!r.hasLocked()){if(r.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(r),i&&i.get("isAnchorPoint"))return;var o=this.graph;this.targets=[],this.targetCombo=null;var a=o.findAllByState("node",this.selectedState),s=r.get("id"),u=a.filter((function(t){var e=t.get("id");return s===e}));if(0===u.length?this.targets.push(r):a.length>1?a.forEach((function(t){t.hasLocked()||e.targets.push(t)})):this.targets.push(r),this.graph.get("enabledStack")&&this.enableStack){var c=[];this.targets.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y,i=e.id;c.push({x:n,y:r,id:i})})),this.set("beforeDragNodes",c)}if(this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){t.isVisible()&&(e.hidenEdge[t.getID()]=!0,t.hide())}))})),this.origin={x:t.x,y:t.y},this.point={},this.originPoint={},"undefined"!=typeof window){var l=this;this.handleDOMContextMenu=function(){return l.onDragEnd()},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}}},onDrag:function(t){var e=this;if(this.mousedown&&this.origin&&this.shouldUpdate(t,this))if(this.get("enableDelegate"))this.updateDelegate(t);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var n={};this.targets.map((function(r){e.update(r,t);var i=r.getModel().comboId;i&&(n[i]=e.graph.findById(i))})),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(t){var e,n=this;if(this.mousedown=!1,this.dragstart=!1,this.origin){null===(e=this.cachedCaptureItems)||void 0===e||e.forEach((function(t){t.getContainer().set("capture",!0)})),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){n.hidenEdge[t.getID()]&&t.show(),t.refresh()}))})),this.hidenEdge={};var r=this.graph;if(r.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach((function(t){i.before.nodes.push(t)})),this.targets.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y,o=e.id;i.after.nodes.push({x:n,y:r,id:o})})),r.pushStack("update",(0,b.clone)(i))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null,"undefined"!=typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},onDropCombo:function(t){var e=t.item;if(this.currentShouldEnd=this.shouldEnd(t,e,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(e)){var n=this.graph;if(this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)n.updateCombos();else{var r=e.getModel();this.targets.map((function(t){t.getModel().comboId!==r.id&&n.updateComboTree(t,r.id)})),n.updateCombo(e)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd(t,void 0,this),this.updatePositions(t,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map((function(t){t.getModel().comboId&&e.updateComboTree(t)})))},onDropNode:function(t){if(this.targets&&0!==this.targets.length){var e=this,n=t.item,r=e.graph,i=n.getModel().comboId,o=i?r.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(t,o,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(i){var a=r.findById(i);e.comboActiveState&&r.setItemState(a,e.comboActiveState,!1),this.targets.map((function(t){var e=t.getModel();i!==e.comboId&&r.updateComboTree(t,i)})),r.updateCombo(a)}else this.targets.map((function(t){t.getModel().comboId&&r.updateComboTree(t)}));r.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t,e){var n=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):e||this.targets.map((function(e){return n.update(e,t)})):this.targets.map((function(r){return n.update(r,t,e)})))},update:function(t,e,n){var r=this.origin,i=t.get("model"),o=t.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0});var a=e.x-r.x+this.point[o].x,s=e.y-r.y+this.point[o].y;n&&(a+=r.x-e.x,s+=r.y-e.y);var u={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(t,u,!1):t.updatePosition(u)},debounceUpdate:(0,b.debounce)((function(t){var e=t.targets,n=t.graph,r=t.point,i=t.origin,o=t.evt,a=t.updateEdge,s=t.onlyChangeComboSize,u=t.updateParentCombos;e.map((function(t){var e=t.get("model"),s=t.get("id");r[s]||(r[s]={x:e.x||0,y:e.y||0});var u={x:o.x-i.x+r[s].x,y:o.y-i.y+r[s].y};a?n.updateItem(t,u,!1):t.updatePosition(u)})),s&&u(n,e)}),50,!0),updateDelegate:function(t){var e=this.graph;if(this.delegateRect){var n=t.x-this.origin.x+this.originPoint.minX,r=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:n,y:r})}else{var i=e.get("group"),o=(0,b.deepMix)({},md.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(t),s=a.x,u=a.y,c=a.width,l=a.height,f=a.minX,d=a.minY;this.originPoint={x:s,y:u,width:c,height:l,minX:f,minY:d},this.delegateRect=i.addShape("rect",{attrs:(0,y.__assign)({width:c,height:l,x:s,y:u},o),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.targets;0===e.length&&e.push(t.item);for(var n=1/0,r=-1/0,i=1/0,o=-1/0,a=0;a<e.length;a++){var s=e[a].getBBox(),u=s.minX,c=s.minY,l=s.maxX,f=s.maxY;u<n&&(n=u),c<i&&(i=c),l>r&&(r=l),f>o&&(o=f)}return{x:Math.floor(n),y:Math.floor(i),width:Math.ceil(r)-Math.floor(n),height:Math.ceil(o)-Math.floor(i),minX:n,minY:i}},updateParentCombos:function(t,e){var n=t||this.graph,r=e||this.targets,i={};null==r||r.forEach((function(t){var e=t.getModel().comboId;e&&(i[e]=n.findById(e))})),Object.values(i).forEach((function(t){t&&n.updateCombo(t)}))}},Um={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.setAllItemStates(t)},clearOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.clearActiveState(t)},setAllItemStates:function(t){clearTimeout(this.timer),this.throttleSetAllItemStates(t,this)},clearActiveState:function(t){var e=this;this.timer=setTimeout((function(){e.throttleClearActiveState(t,e)}),50)},throttleSetAllItemStates:(0,b.throttle)((function(t,e){var n=t.item,r=e.graph;if(r&&!r.destroyed&&(e.item=n,e.shouldUpdate(t.item,{event:t,action:"activate"},e))){for(var i=e.activeState,o=e.inactiveState,a=r.getNodes(),s=r.getCombos(),u=r.getEdges(),c=r.get("vedges"),l=a.length,f=s.length,d=u.length,h=c.length,p=e.inactiveItems||{},g=e.activeItems||{},v=0;v<l;v++){var m=a[v],y=m.getID(),b=m.hasState("selected");e.resetSelected&&b&&r.setItemState(m,"selected",!1),g[y]&&(r.setItemState(m,i,!1),delete g[y]),o&&!p[y]&&(r.setItemState(m,o,!0),p[y]=m)}for(v=0;v<f;v++){var x=s[v],w=x.getID();b=x.hasState("selected"),e.resetSelected&&b&&r.setItemState(x,"selected",!1),g[w]&&(r.setItemState(x,i,!1),delete g[w]),o&&!p[w]&&(r.setItemState(x,o,!0),p[w]=x)}for(v=0;v<d;v++)g[M=(k=u[v]).getID()]&&(r.setItemState(k,i,!1),delete g[M]),o&&!p[M]&&(r.setItemState(k,o,!0),p[M]=k);for(v=0;v<h;v++){var _=c[v],E=_.getID();g[E]&&(r.setItemState(_,i,!1),delete g[E]),o&&!p[E]&&(r.setItemState(_,o,!0),p[E]=_)}if(n&&!n.destroyed){o&&(r.setItemState(n,o,!1),delete p[n.getID()]),g[n.getID()]||(r.setItemState(n,i,!0),g[n.getID()]=n);var S=n.getEdges(),C=S.length;for(v=0;v<C;v++){var k,M=(k=S[v]).getID(),O=void 0,T=(O=k.getSource()===n?k.getTarget():k.getSource()).getID();o&&p[T]&&(r.setItemState(O,o,!1),delete p[T]),g[T]||(r.setItemState(O,i,!0),g[T]=O),p[M]&&(r.setItemState(k,o,!1),delete p[M]),g[M]||(r.setItemState(k,i,!0),g[M]=k),k.toFront()}}e.activeItems=g,e.inactiveItems=p,r.emit("afteractivaterelations",{item:t.item,action:"activate"})}}),50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,b.throttle)((function(t,e){var n=e.get("graph");if(n&&!n.destroyed&&e.shouldUpdate(t.item,{event:t,action:"deactivate"},e)){var r=e.activeState,i=e.inactiveState,o=e.activeItems||{},a=e.inactiveItems||{};Object.values(o).filter((function(t){return!t.destroyed})).forEach((function(t){n.clearItemStates(t,r)})),Object.values(a).filter((function(t){return!t.destroyed})).forEach((function(t){n.clearItemStates(t,i)})),e.activeItems={},e.inactiveItems={},n.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}}),50,{trailing:!0,leading:!0})},Wm=Math.min,Hm=Math.max,Ym=Math.abs,Xm="shift",qm=["drag","shift","ctrl","alt","control"],Zm={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Xm,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return qm.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Xm,console.warn("Behavior brush-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,n=this.brush;e||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(t)},onMouseUp:function(t){this.graph,(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var t=this.graph,e=this.selectedState,n=t.findAllByState("node",e),r=t.findAllByState("edge",e),i=t.findAllByState("combo",e);n.forEach((function(n){return t.setItemState(n,e,!1)})),r.forEach((function(n){return t.setItemState(n,e,!1)})),i.forEach((function(n){return t.setItemState(n,e,!1)})),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(t,e,n,r,i){var o=t.getBBox();return o.centerX>=e&&o.centerX<=n&&o.centerY>=r&&o.centerY<=i},getSelectedNodes:function(t){var e=this,n=this,r=n.graph,i=n.originPoint,o=n.shouldUpdate,a=n.isBBoxCenterInRect,s=this.selectedState,u={x:t.x,y:t.y},c=r.getPointByCanvas(i.x,i.y),l=Wm(u.x,c.x),f=Hm(u.x,c.x),d=Wm(u.y,c.y),h=Hm(u.y,c.y),p=[],g=[];r.getNodes().forEach((function(t){if(t.isVisible()&&a(t,l,f,d,h)&&o(t,"select",e)){p.push(t);var n=t.getModel();g.push(n.id),r.setItemState(t,s,!0)}}));var v=[];this.includeEdges&&p.forEach((function(t){t.getOutEdges().forEach((function(t){if(t.isVisible()){var n=t.getModel(),i=n.source,a=n.target;g.includes(i)&&g.includes(a)&&o(t,"select",e)&&(v.push(t),r.setItemState(t,e.selectedState,!0))}}))}));var m=[];this.includeCombos&&r.getCombos().forEach((function(t){if(t.isVisible()&&a(t,l,f,d,h)&&o(t,"select",e)){m.push(t);var n=t.getModel();g.push(n.id),r.setItemState(t,s,!0)}})),this.selectedEdges=v,this.selectedNodes=p,this.selectedCombos=m,this.onSelect&&this.onSelect(p,v,m),r.emit("nodeselectchange",{selectedItems:{nodes:p,edges:v,combos:m},select:!0})},createBrush:function(){var t=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:Ym(t.canvasX-e.x),height:Ym(t.canvasY-e.y),x:Wm(t.canvasX,e.x),y:Wm(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),r=e.toLowerCase();this.keydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Km="shift",Jm=["shift","ctrl","alt","control"],Qm={getDefaultCfg:function(){return{multiple:!0,trigger:Km,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var t=this;return Jm.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=Km,console.warn("Behavior click-select  trigger  'drag''shift''ctrl'  'alt'")),t.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,n=t.item;if(n&&!n.destroyed){var r=n.getType(),i=e.graph,o=e.keydown,a=e.multiple,s=e.shouldUpdate;if((0,e.shouldBegin)(t,e)){if(!o||!a){var u=i.findAllByState("node",e.selectedState).concat(i.findAllByState("edge",e.selectedState)).concat(i.findAllByState("combo",e.selectedState));(0,b.each)(u,(function(t){t!==n&&i.setItemState(t,e.selectedState,!1)}))}if(function(){switch(r){case"node":return e.selectNode;case"edge":return e.selectEdge;case"combo":return e.selectCombo;default:return!1}}())n.hasState(e.selectedState)?(s(t,e)&&i.setItemState(n,e.selectedState,!1),c=i.findAllByState("node",e.selectedState),l=i.findAllByState("edge",e.selectedState),f=i.findAllByState("combo",e.selectedState),i.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,edges:l,combos:f},select:!1})):(s(t,e)&&i.setItemState(n,e.selectedState,!0),c=i.findAllByState("node",e.selectedState),l=i.findAllByState("edge",e.selectedState),f=i.findAllByState("combo",e.selectedState),i.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,edges:l,combos:f},select:!0}));else{var c=i.findAllByState("node",e.selectedState),l=i.findAllByState("edge",e.selectedState),f=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{selectedItems:{nodes:c,edges:l,combos:f},select:!1})}}}},onCanvasClick:function(t){var e=this,n=this.graph;if((0,this.shouldBegin)(t,this)){var r=n.findAllByState("node",this.selectedState);(0,b.each)(r,(function(t){n.setItemState(t,e.selectedState,!1)}));var i=n.findAllByState("edge",this.selectedState);(0,b.each)(i,(function(t){n.setItemState(t,e.selectedState,!1)}));var o=n.findAllByState("combo",this.selectedState);(0,b.each)(o,(function(t){n.setItemState(t,e.selectedState,!1)})),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()||"control"===e.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},ty=N,ey={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];t.preventDefault(),r&&(this.shouldBegin&&!this.shouldBegin(t,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,r&&(this.endPoint={pageX:r.pageX,pageY:r.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(t){if(this.moveable){t.preventDefault();var e=t.originalEvent.touches,n=e[0],r=e[1];if(r){this.endPoint||(this.endPoint={pageX:r.pageX,pageY:r.pageY});var i=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},o=i({x:n.pageX,y:n.pageY},{x:r.pageX,y:r.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*o;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var u=this.get("animate"),c=this.get("animateCfg"),l=this.graph.get("canvas").getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(a,{x:l.x,y:l.y},u,c),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,n=this.graph,r=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(t,this))&&this.shouldUpdate(t,this)){t.preventDefault();var i=n.get("canvas").getPointByClient(t.clientX,t.clientY),o=this.get("sensitivity"),a=n.getZoom(),s=a;s=a*(t.wheelDelta<0?1-.05*o:1/(1-.05*o));var u=this.get("minZoom")||n.get("minZoom"),c=this.get("maxZoom")||n.get("maxZoom");if(s>c?s=c:s<u&&(s=u),this.get("enableOptimize")){var l=this.get("optimizeZoom"),f=this.get("optimized"),d=n.getNodes(),h=n.getEdges(),p=d.length,g=h.length;if(!f){for(var v=0;v<p;v++)if(!(M=d[v]).destroyed)for(var m=(q=M.get("group").get("children")).length,y=0;y<m;y++)(j=q[y]).destoryed||j.get("isKeyShape")||(j.set("ori-visibility",j.get("ori-visibility")||j.get("visible")),j.hide());for(var x=0;x<g;x++)for(m=(q=(X=h[x]).get("group").get("children")).length,y=0;y<m;y++)(j=q[y]).set("ori-visibility",j.get("ori-visibility")||j.get("visible")),j.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var w=setTimeout((function(){var t=n.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var r=0;r<p;r++){var i=d[r],o=(c=i.get("group").get("children")).length;if(t<l){var a=(f=i.getKeyShape()).get("ori-visibility");f.set("ori-visibility",void 0),a&&f.show()}else for(var s=0;s<o;s++)a=(m=c[s]).get("ori-visibility"),m.set("ori-visibility",void 0),!m.get("visible")&&a&&a&&m.show()}for(var u=0;u<g;u++){var c,f,v=h[u];if(o=(c=v.get("group").get("children")).length,t<l)a=(f=v.getKeyShape()).get("ori-visibility"),f.set("ori-visibility",void 0),a&&f.show();else for(s=0;s<o;s++){var m;(m=c[s]).get("visible")||(a=m.get("ori-visibility"),m.set("ori-visibility",void 0),a&&m.show())}}}}),100);this.set("timeout",w)}if(a<=1){var _=void 0,E=void 0;if(r.fixAll||r.fixLineWidth||r.fixLabel){_=n.findAllByState("node",r.fixState),E=n.findAllByState("edge",r.fixState);for(var S=a/s,C=_.length,k=0;k<C;k++){var M,O=(M=_[k]).getContainer(),T=M.getModel(),A=M.getOriginStyle(),N=M.getStateStyle(r.fixState),I=M.get("shapeFactory").getShape(T.type).getStateStyle(r.fixState,M)[r.fixState];if(r.fixAll){if(s<=1){var P=(0,b.clone)(O.getMatrix());P||(P=[1,0,0,0,1,0,0,0,1]);var D=M.getModel(),L=D.x,R=D.y;P=ty(P,[["t",-L,-R],["s",S,S],["t",L,R]]),O.setMatrix(P)}}else for(m=(q=O.get("children")).length,y=0;y<m;y++){var j=q[y],B=void 0,F=void 0;if(r.fixLabel&&"text"===j.get("type")){B=j.attr("fontSize")||12;var z=N[j.get("name")],$=I[j.get("name")],G=z?z.fontSize:12,V=$?$.fontSize:12,U=G||V||12;if(s<=1&&j.attr("fontSize",U/s),F)break}if(r.fixLineWidth&&j.get("isKeyShape")){F=j.attr("lineWidth")||0;var W=N.lineWidth||I.lineWidth||A.lineWidth||0;if(s<=1&&j.attr("lineWidth",W/s),B)break}}}for(var H=E.length,Y=0;Y<H;Y++){var X,q=(O=(X=E[Y]).getContainer()).get("children");for(T=X.getModel(),N=X.getStateStyle(r.fixState),I=X.get("shapeFactory").getShape(T.type).getStateStyle(r.fixState,X)[r.fixState],m=q.length,y=0;y<m&&(j=q[y],B=void 0,F=void 0,!r.fixLabel&&!r.fixAll||"text"!==j.get("type")||(B=j.attr("fontSize")||12,z=N[j.get("name")],$=I[j.get("name")],G=z?z.fontSize:12,V=$?$.fontSize:12,U=G||V||12,s<=1&&j.attr("fontSize",U/s),!F))&&(!r.fixLineWidth&&!r.fixAll||!j.get("isKeyShape")||(F=j.attr("lineWidth")||0,W=N.lineWidth||I.lineWidth||1,s<=1&&j.attr("lineWidth",W/s),!B));y++);}}}var Z=this.get("animate"),K=this.get("animateCfg");n.zoomTo(s,{x:i.x,y:i.y},Z,K),n.emit("wheelzoom",t)}}},ny={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){this.shouldUpdate(t,this)?this.currentTarget&&t.item===this.currentTarget&&this.updatePosition(t):this.hideTooltip()},onMouseLeave:function(t){this.shouldEnd(t,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(t.item&&!t.item.destroyed){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var n=this.formatText(t.item.get("model"),t);e.innerHTML=n,ch(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){ch(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),n=this,r=n.width,i=n.height,o=n.container,a=n.graph;if(e(t,this)){var s=a.getPointByClient(t.clientX,t.clientY),u=a.getCanvasByPoint(s.x,s.y),c=u.x,l=u.y,f=o.getBoundingClientRect();c>r/2?c-=f.width:c+=this.offset,l>i/2?l-=f.height:l+=this.offset;var d="".concat(c,"px"),h="".concat(l,"px");ch(this.container,{left:d,top:h,visibility:"visible"})}else ch(o,{visibility:"hidden"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var n=th('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return e.parentNode.appendChild(n),ch(n,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},ry=(0,y.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},ny),iy=(0,y.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},ny),oy="click",ay=["click","dblclick"],sy={getDefaultCfg:function(){return{trigger:oy,onChange:function(){}}},getEvents:function(){var t,e;return ay.includes(this.trigger)?e=this.trigger:(e=oy,console.warn("Behavior collapse-expand  trigger  'click'  'dblclick'")),(t={})["node:".concat(e)]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=t.item;if(e){var n=this.graph.findDataById(e.get("id"));if(n){var r=n.children;if(r&&0!==r.length){var i=!n.collapsed;this.shouldBegin(t,i,this)&&(n.collapsed=i,e.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:t.item,collapsed:i}),this.shouldUpdate(t,i,this)&&(this.onChange(e,i,this),this.graph.layout()))}}}}},uy=Ld.calculationItemsBBox,cy=function t(e,n){if(!1!==n(e)&&e){var r=e.get("combos");if(0===r.length)return!1;(0,b.each)(r,(function(e){t(e,n)}))}},ly={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;return!(!e||e.destroyed||!this.shouldUpdate(t,this)||"combo"!==e.getType())},onDragStart:function(t){var e=this,n=this.graph,r=t.item;if(this.currentShouldEnd=!0,this.validationCombo(t)){this.targets=[];var i=n.findAllByState("combo",this.selectedState),o=r.get("id"),a=i.filter((function(t){var e=t.get("id");return o===e}));0===a.length?this.targets.push(r):this.targets=i;var s=[];this.targets.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y,i=e.id;s.push({x:n,y:r,id:i})})),this.set("beforeDragItems",s),this.activeState&&this.targets.map((function(t){var r=t.getModel();if(r.parentId){var i=n.findById(r.parentId);i&&n.setItemState(i,e.activeState,!0)}})),this.point={},this.originPoint={},this.origin={x:t.x,y:t.y},this.currentItemChildCombos=[],cy(r,(function(t){if(t.destroyed)return!1;var n=t.getModel();return e.currentItemChildCombos.push(n.id),!0}))}},onDrag:function(t){var e=this;if(this.origin&&this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var n=this.graph,r=t.item,i=r.getModel(),o=n.getCombos(),a=r.getBBox(),s=a.centerX,u=a.centerY,c=a.width,l=o.filter((function(t){var n=t.getModel();return i.parentId,n.id!==i.id&&!e.currentItemChildCombos.includes(n.id)}));l.map((function(t){var r=t.getBBox(),i=r.centerX,o=r.centerY,a=r.width,l=s-i,f=u-o,d=2*Math.sqrt(l*l+f*f);c+a-d>.8*c?n.setItemState(t,e.activeState,!0):n.setItemState(t,e.activeState,!1)}))}(0,b.each)(this.targets,(function(n){e.updateCombo(n,t)})),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(t,e){var n=this;(this.enableDelegate||e)&&(0,b.each)(this.targets,(function(r){n.updateCombo(r,t,e)}))},onDrop:function(t){var e=this,n=t.item;if(this.currentShouldEnd=this.shouldEnd(t,n,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&n&&this.targets&&!n.destroyed){var r=this.graph,i=n.getModel();this.targets.map((function(t){t.getModel().parentId!==i.id?(e.activeState&&r.setItemState(n,e.activeState,!1),e.onlyChangeComboSize?r.updateCombo(t):r.updateComboTree(t,i.id,!1)):r.updateCombo(n)})),this.end(n,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(this.targets&&0!==this.targets.length){var n=this.graph,r=t.item.getModel().comboId,i=r?n.findById(r):void 0;if(this.currentShouldEnd=this.shouldEnd(t,i,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){var o;if(r){if(this.activeState){var a=n.findById(r);n.setItemState(a,this.activeState,!1)}this.targets.map((function(t){e.onlyChangeComboSize?n.updateCombo(t):r!==t.getID()&&(o=n.findById(r),r!==t.getModel().parentId&&n.updateComboTree(t,r,!1))}))}else this.targets.map((function(t){e.onlyChangeComboSize?n.updateCombo(t):t.getModel().comboId&&n.updateComboTree(t,void 0,!1)}));this.endComparison=!0,this.end(o,t)}}},onDragEnter:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(this.targets&&0!==this.targets.length){var e=t.item;this.currentShouldEnd&&this.updatePositions(t);var n=this.getParentCombo(e.getModel().parentId),r=this.graph;n&&this.activeState&&r.setItemState(n,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var n=this;if(this.origin){var r=this.graph;if(this.delegateShape&&(r.get("delegateGroup").clear(),this.delegateShape=null),t&&this.activeState&&r.setItemState(t,this.activeState,!1),!t){var i=r.get("enabledStack")&&this.enableStack,o={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map((function(t){if(n.onlyChangeComboSize){r.updateCombo(t);var e=t.getModel(),a=e.x,s=e.y,u=e.id;o.after.combos.push({x:a,y:s,id:u}),r.pushStack("update",o)}else r.updateComboTree(t,void 0,i)}))}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e,n){var r=this;if(void 0===n&&(n={}),!1!==e(t,n)&&t){var i=t.get("combos");(0,b.each)(i,(function(t){r.traverse(t,e,n)}));var o=t.get("nodes");(0,b.each)(o,(function(t){r.traverse(t,e,n)}))}},updateCombo:function(t,e,n){this.updateSingleItem(t,e,n);var r={};this.traverse(t,(function(t,e){return!t.destroyed&&(t.getEdges().forEach((function(t){return e[t.getID()]=t})),!0)}),r),Object.values(r).forEach((function(t){return t.refresh()}))},updateSingleItem:function(t,e,n){var r=this.origin,i=this.graph,o=t.getModel(),a=t.get("id");this.point[a]||(this.point[a]={x:o.x,y:o.y});var s=e.x-r.x+this.point[a].x,u=e.y-r.y+this.point[a].y;n&&(s+=r.x-e.x,u+=r.y-e.y),i.updateItem(t,{x:s,y:u},!1)},getParentCombo:function(t){var e=this.graph;if(t){var n=e.findById(t);if(n)return n}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var n=t.x-this.origin.x+this.originPoint.minX,r=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:n,y:r})}else{var i,o=e.get("delegateGroup"),a=(i=this.targets.length>1?uy(this.targets):this.targets[0].getBBox()).x,s=i.y,u=i.width,c=i.height,l=i.minX,f=i.minY;this.originPoint={x:a,y:s,width:u,height:c,minX:l,minY:f};var d=(0,y.__assign)((0,y.__assign)({},md.delegateStyle),this.delegateStyle);this.delegateShape=o.addShape("rect",{attrs:(0,y.__assign)({width:i.width,height:i.height,x:i.x,y:i.y},d),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var t=this.graph,e=this.targets,n={};null==e||e.forEach((function(e){var r=e.getModel().parentId;r&&(n[r]=t.findById(r))})),Object.values(n).forEach((function(e){e&&t.updateCombo(e)}))}},fy="dblclick",dy=["click","dblclick"],hy={getDefaultCfg:function(){return{trigger:fy,relayout:!0}},getEvents:function(){var t,e;return dy.includes(this.trigger)?e=this.trigger:(e=fy,console.warn("Behavior collapse-expand-group  trigger  'click'  'dblclick'")),(t={})["combo:".concat(e)]="onComboClick",t},onComboClick:function(t){var e=t.item,n=this.graph,r=this.relayout;if(e&&!e.destroyed&&"combo"===e.getType()){var i=e.getModel().id;i&&(n.collapseExpandCombo(i),r&&n.get("layout")?n.layout():n.refreshPositions())}}},py=Ld.isPolygonsIntersect,gy=Ld.pathToPoints,vy="shift",my=["drag","shift","ctrl","alt","control"],yy={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:vy,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return my.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=vy,console.warn("Behavior lasso-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso;t.item||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach((function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(t){void 0===t&&(t="canvas:click");var e=this,n=e.graph,r=e.selectedState,i=e.shouldDeselect,o=n.findAllByState("node",r),a=n.findAllByState("edge",r);i&&!i({action:t,nodes:o,edges:a})||(o.forEach((function(t){return n.setItemState(t,r,!1)})),a.forEach((function(t){return n.setItemState(t,r,!1)}))),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this.graph,n=this.shouldUpdate,r=this.points.map((function(t){return[e.getCanvasByPoint(t.x,t.y).x,e.getCanvasByPoint(t.x,t.y).y]})),i=this.selectedState,o=[],a=[];e.getNodes().forEach((function(s){if(s.isVisible()&&function(t,e){var n,r=t.getKeyShape();if("path"===t.get("type"))n=gy(r.attr("path"));else{var i=r.getCanvasBBox();n=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return py(e,n)}(s,r)&&n(s,"select",t)){o.push(s);var u=s.getModel();a.push(u.id),e.setItemState(s,i,!0)}}));var s=[];this.includeEdges&&o.forEach((function(r){r.getOutEdges().forEach((function(r){if(r.isVisible()){var i=r.getModel(),o=i.source,u=i.target;a.includes(o)&&a.includes(u)&&n(r,"select",t)&&(s.push(r),e.setItemState(r,t.selectedState,!0))}}))})),this.selectedEdges=s,this.selectedNodes=o,this.onSelect&&this.onSelect(o,s),e.emit("nodeselectchange",{selectedItems:{nodes:o,edges:s},select:!0})},createLasso:function(){var t=this.graph.get("delegateGroup").addShape("path",{attrs:(0,y.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(t){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},by="click",xy=["click","drag"],wy=void 0,_y=["shift","ctrl","control","alt","meta",void 0],Ey={getDefaultCfg:function(){return{trigger:by,key:wy,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t,e=this;return xy.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=by,console.warn("Behavior create-edge  trigger  'click''drag'")),e.key&&-1===_y.indexOf(e.key.toLowerCase())&&(e.trigger=wy,console.warn("Behavior create-edge  key  'shift''ctrl''alt''control' undefined")),"drag"===e.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===e.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(t){var e=this;if(!e.key||e.keydown){var n=t.item;n&&n.getID()!==e.source&&"node"===n.getType()||e.cancelCreating({item:e.edge,x:t.x,y:t.y})}},onClick:function(t){var e=this;if(!e.key||e.keydown){var n=t.item,r=e.graph,i=n.getModel(),o=e.getEdgeConfig;if(e.addingEdge&&e.edge){if(!e.shouldEnd(t,e))return;var a=void 0;a=o&&(0,b.isFunction)(o)?o({source:e.source,target:i.id},e):e.edgeConfig;var s=(0,y.__assign)({target:i.id},a);if(e.source===i.id&&(s.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(e.edge,s,!1),r.get("enabledStack")){var u=(0,y.__assign)((0,y.__assign)({},e.edge.getModel()),{itemType:"edge"}),c={};c.edges=[u],r.pushStack("add",{before:{},after:c})}r.emit("aftercreateedge",{edge:e.edge}),e.edge.getKeyShape().set("capture",!0),e.edge=null,e.addingEdge=!1}else{if(!e.shouldBegin(t,e))return;a=void 0,a=o&&(0,b.isFunction)(o)?o({source:i.id,target:i.id},e):e.edgeConfig,e.edge=r.addItem("edge",(0,y.__assign)({source:i.id,target:i.id},a),!1),e.source=i.id,e.addingEdge=!0,e.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){var e=this;if(!e.key||e.keydown){e.edge&&e.edge.destroyed&&e.cancelCreating({item:e.edge});var n={x:t.x,y:t.y};e.graph.findById(e.source)?e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:n},!1):e.addingEdge=!1}},cancelCreating:function(t){var e,n,r=this;if(!r.key||r.keydown){var i=r.graph,o=t.item;return r.addingEdge&&(r.edge===o||(null===(n=null===(e=t.target)||void 0===e?void 0:e.isCanvas)||void 0===n?void 0:n.call(e)))?(r.edge&&!r.edge.destroyed&&i.removeItem(r.edge,!1),r.edge=null,void(r.addingEdge=!1)):void 0}},onKeyDown:function(t){var e=this,n=t.key;n&&(n.toLowerCase()===e.key.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.addingEdge&&t.edge&&(t.graph.removeItem(t.edge,!1),t.addingEdge=!1,t.edge=null),this.keydown=!1}},Sy="ctrl",Cy=["shift","ctrl","alt","control"],ky={getDefaultCfg:function(){return{trigger:Sy,combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return Cy.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Sy,console.warn("Behavior shortcuts-fit-view  trigger  '".concat(this.trigger,"'  'drag''shift''ctrl'  'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),r=e.toLowerCase();this.triggerKeydown||(this.triggerKeydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n);var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view  functionName  '".concat(this.functionName,"'  Graph ")),{};if(!this.triggerKeydown||this.combinedKey){var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(r===o||"control"===r&&"ctrl"===o||"ctrl"===r&&"control"===o)&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},My=["shift","ctrl","alt","control","meta"],Oy={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return this.zoomKey&&-1!==My.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e=this;if(this.allowDrag(t)){var n=this.graph,r=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(r.includes("control")&&r.push("ctrl"),r.some((function(e){return t["".concat(e,"Key")]}))){var i=n.get("canvas").getPointByClient(t.clientX,t.clientY),o=n.getZoom();t.wheelDelta>0?o+=.05*o:o-=.05*o,n.zoomTo(o,{x:i.x,y:i.y})}else{var a=t.deltaX||t.movementX,s=t.deltaY||t.movementY;!s&&navigator.userAgent.indexOf("Firefox")>-1&&(s=125*-t.wheelDelta/3);var u=this.graph.get("width"),c=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),f=this.scalableRange,d=this.scalableRange;f<1&&f>-1&&(f*=u,d*=c);var h=l.minX,p=l.maxX,g=l.minY,v=l.maxY;a>0?p<-f?a=0:p-a<-f&&(a=p+f):a<0&&(h>u+f?a=0:h-a>u+f&&(a=h-(u+f))),s>0?v<-d?s=0:v-s<-d&&(s=v+d):s<0&&(g>c+d?s=0:g-s>c+d&&(s=g-(c+d))),"x"===this.get("direction")?s=0:"y"===this.get("direction")&&(a=0),n.translate(-a,-s)}if(t.preventDefault(),this.get("enableOptimize")){var m=this.get("optimizeZoom"),y=this.get("optimized"),b=n.getNodes(),x=n.getEdges(),w=b.length,_=x.length;if(!y){for(var E=0;E<w;E++){var S=b[E];if(!S.destroyed)for(var C=(O=S.get("group").get("children")).length,k=0;k<C;k++)(T=O[k]).destoryed||T.get("isKeyShape")||(T.set("ori-visibility",T.get("ori-visibility")||T.get("visible")),T.hide())}for(var M=0;M<_;M++){var O;for(C=(O=x[M].get("group").get("children")).length,k=0;k<C;k++){var T;(T=O[k]).set("ori-visibility",T.get("ori-visibility")||T.get("visible")),T.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var A=setTimeout((function(){var t=n.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var r=0;r<w;r++){var i=b[r],o=(c=i.get("group").get("children")).length;if(t<m)(s=(l=i.getKeyShape()).get("ori-visibility"))&&l.show();else for(var a=0;a<o;a++){var s=(d=c[a]).get("ori-visibility");!d.get("visible")&&s&&s&&d.show()}}for(var u=0;u<_;u++){var c,l,f=x[u];if(o=(c=f.get("group").get("children")).length,t<m)(s=(l=f.getKeyShape()).get("ori-visibility"))&&l.show();else for(a=0;a<o;a++){var d;(d=c[a]).get("visible")||(s=d.get("ori-visibility"))&&d.show()}}}}),100);this.set("timeout",A)}}},allowDrag:function(t){var e,n,r=t.target,i=r&&r.isCanvas&&r.isCanvas();if((0,b.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,b.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,a=o.node,s=o.edge,u=o.combo,c=null===(n=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===n?void 0:n.call(e);if(!a&&"node"===c)return!1;if(!s&&"edge"===c)return!1;if(!u&&"combo"===c)return!1}return!0}},Ty={"drag-canvas":Gm,"zoom-canvas":ey,"drag-node":Vm,"activate-relations":Um,"brush-select":Zm,"click-select":Qm,"lasso-select":yy,tooltip:ry,"edge-tooltip":iy,"collapse-expand":sy,"drag-combo":ly,"collapse-expand-combo":hy,"create-edge":Ey,"shortcuts-call":ky,"scroll-canvas":Oy};(0,b.each)(Ty,(function(t,e){ju(e,t)}));var Ay=(0,y.__assign)((0,y.__assign)({},r),Fu),Ny=om.Grid,Iy=om.Minimap,Py=om.Bundling,Dy=om.Menu,Ly=om.Fisheye,Ry=om.ToolBar,jy=om.Tooltip,By=om.TimeBar,Fy=om.ImageMinimap,zy=om.EdgeFilterLens,$y=om.SnapLine,Gy=om.Legend,Vy=om.Annotation,Uy={version:md.version,Graph:ih,TreeGraph:uh,Util:Ld,Layout:Ed.Layouts,TreeLayout:jd,registerLayout:Bd,Global:md,registerBehavior:ju,registerCombo:Ru,registerEdge:Lu,registerNode:Du,Minimap:om.Minimap,Grid:om.Grid,Bundling:om.Bundling,Menu:om.Menu,ToolBar:om.ToolBar,Tooltip:om.Tooltip,Legend:om.Legend,TimeBar:By,SnapLine:$y,Fisheye:Ly,ImageMinimap:Fy,EdgeFilterLens:zy,Annotation:Vy,Algorithm:Ay,Arrow:Su,Marker:Cu,Shape:ku};Uy.version="4.8.5";var Wy=Uy,Hy="4.8.5"},9787:function(t,e,n){"use strict";n.r(e),n.d(e,{Graph:function(){return _},GraphWithEvent:function(){return O},algorithm:function(){return r},comparision:function(){return o},essence:function(){return i},generate:function(){return s}});var r={};n.r(r),n.d(r,{components:function(){return P},dfs:function(){return L},dijkstra:function(){return F},dijkstraAll:function(){return z},findCycles:function(){return G},floydWarshall:function(){return et},isAcyclic:function(){return K},postorder:function(){return J},preorder:function(){return Q},prim:function(){return I},tarjan:function(){return $},topsort:function(){return Z}});var i={};n.r(i),n.d(i,{hasSelfLoop:function(){return vt},isGraph:function(){return ht},isNullGraph:function(){return gt},isSimpleGraph:function(){return pt}});var o={};n.r(o),n.d(o,{containAllSameEdges:function(){return ut},containAllSameNodes:function(){return st},containSameEdges:function(){return rt},containSameNodes:function(){return nt},getSameEdges:function(){return ot},getSameNodes:function(){return it},isGraphComplement:function(){return mt},isGraphContainsAnother:function(){return lt},isGraphOptionSame:function(){return at},isGraphSame:function(){return ct}});var a,s={};function u(t,e){var n=t.get(e)||0;t.set(e,n+1)}function c(t,e){var n=t.get(e);void 0!==n&&((n-=1)>0?t.set(e,n):t.delete(e))}function l(t,e,n,r){var i=String(e),o=String(n);if(!t&&i>o){var s=i;i=o,o=s}return i+a.EDGE_KEY_DELIM+o+a.EDGE_KEY_DELIM+(void 0===r?a.DEFAULT_EDGE_NAME:r)}function f(t,e,n,r){var i=String(e),o=String(n),a={v:e,w:n};if(!t&&i>o){var s=a.v;a.v=a.w,a.w=s}return void 0!==r&&(a.name=r),a}function d(t,e){return l(t,e.v,e.w,e.name)}function h(t){return"function"==typeof t}n.r(s),n.d(s,{getGraphComplement:function(){return yt}}),function(t){t.DEFAULT_EDGE_NAME="\0",t.GRAPH_NODE="\0",t.EDGE_KEY_DELIM=""}(a||(a={}));var p=function(t){return t.nodes().map((function(e){var n={id:e,value:t.node(e),parent:t.parent(e)};return void 0===n.value&&delete n.value,void 0===n.parent&&delete n.parent,n}))},g=function(t){return t.edges().map((function(e){var n=t.edge(e),r={v:e.v,w:e.w,value:n,name:e.name};return void 0===r.name&&delete r.name,void 0===r.value&&delete r.value,r}))},v=function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:p(t),edges:g(t),value:t.graph()};return void 0===e.value&&delete e.value,e};function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var w={compound:!1,multigraph:!1,directed:!0},_=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=a.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(t){return e.label=t,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(t){return h(t)?e.defaultNodeLabelFn=t:e.defaultNodeLabelFn=function(){return t},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(t){return e.nodesLabelMap.get(t)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter((function(t){var n;return!(null===(n=e.inEdgesMap.get(t))||void 0===n?void 0:n.size)}))},this.sinks=function(){return e.nodes().filter((function(t){var n;return!(null===(n=e.outEdgesMap.get(t))||void 0===n?void 0:n.size)}))},this.setNodes=function(t,n){return t.map((function(t){return e.setNode(t,n)})),e},this.hasNode=function(t){return e.nodesLabelMap.has(t)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(t){if(e.isCompound()){var n,r=null===(n=e.parentMap)||void 0===n?void 0:n.get(t);if(r!==e.GRAPH_NODE)return r}},this.removeFromParentsChildList=function(t){var n=e.parentMap.get(t);e.childrenMap.get(n).delete(t)},this.setParent=function(t,n){var r,i;e.checkCompound();for(var o=void 0===n?e.GRAPH_NODE:n,a=e.parent(o);a;){if(t===a)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");a=e.parent(a)}n&&e.setNode(n),e.setNode(t),e.removeFromParentsChildList(t),null===(r=e.parentMap)||void 0===r||r.set(t,o);var s=e.childrenMap.get(o);return s.set(t,!0),null===(i=e.childrenMap)||void 0===i||i.set(o,s),e},this.children=function(t){var n=void 0===t?e.GRAPH_NODE:t;if(e.isCompound()){var r,i=null===(r=e.childrenMap)||void 0===r?void 0:r.get(n);return i?Array.from(i.keys()):void 0}return n===e.GRAPH_NODE?e.nodes():t&&e.hasNode(t)?[]:void 0},this.predecessors=function(t){var n=e.predecessorsMap.get(t);return n?Array.from(n.keys()):void 0},this.successors=function(t){var n=e.successorsMap.get(t);return n?Array.from(n.keys()):void 0},this.neighbors=function(t){var n;if(e.hasNode(t))return Array.from(new Set(null===(n=e.predecessors(t))||void 0===n?void 0:n.concat(e.successors(t))))},this.isLeaf=function(t){var n,r;return e.isDirected()?!(null===(r=e.successors(t))||void 0===r?void 0:r.length):!(null===(n=e.neighbors(t))||void 0===n?void 0:n.length)},this.filterNodes=function(n){var r=e.directed,i=e.multigraph,o=e.compound,a=new t({directed:r,multigraph:i,compound:o});return a.setGraph(e.graph()),e.nodes().forEach((function(t){n(t)&&a.setNode(t,e.node(t))})),e.edges().forEach((function(t){a.hasNode(t.v)&&a.hasNode(t.w)&&a.setEdgeObj(t,e.edge(t))})),o&&a.nodes().forEach((function(t){a.setParent(t,function(t){for(var n=e.parent(t);void 0!==n&&!a.hasNode(n);)n=e.parent(n);return n}(t))})),a},this.setDefaultEdgeLabel=function(t){return h(t)?e.defaultEdgeLabelFn=t:e.defaultEdgeLabelFn=function(){return t},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(t,n){return e.setEdge(t.v,t.w,n,t.name)},this.setPath=function(t,n){return t.reduce((function(t,r){return e.setEdge(t,r,n),r})),e},this.edgeFromArgs=function(t,n,r){return e.edge({v:t,w:n,name:r})},this.edge=function(t){return e.edgesLabelsMap.get(d(e.isDirected(),t))},this.hasEdge=function(t,n,r){return e.edgesLabelsMap.has(d(e.isDirected(),{v:t,w:n,name:r}))},this.removeEdgeObj=function(t){var n=t.v,r=t.w,i=t.name;return e.removeEdge(n,r,i)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(t,n){var r=e.inEdgesMap.get(t);if(r)return Array.from(r.values()).filter((function(t){return!n||t.v===n}))},this.outEdges=function(t,n){var r=e.outEdgesMap.get(t);if(r)return Array.from(r.values()).filter((function(t){return!n||t.w===n}))},this.nodeEdges=function(t,n){var r;if(e.hasNode(t))return null===(r=e.inEdges(t,n))||void 0===r?void 0:r.concat(e.outEdges(t,n))},this.toJSON=function(){return v(e)},this.nodeInDegree=function(t){var n=e.inEdgesMap.get(t);return n?n.size:0},this.nodeOutDegree=function(t){var n=e.outEdgesMap.get(t);return n?n.size:0},this.nodeDegree=function(t){return e.nodeInDegree(t)+e.nodeOutDegree(t)},this.source=function(t){return t.v},this.target=function(t){return t.w};var r=y(y({},w),n);this.compound=r.compound,this.directed=r.directed,this.multigraph=r.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}var e,n;return e=t,(n=[{key:"setNode",value:function(t,e){var n,r=this.nodesLabelMap,i=this.defaultNodeLabelFn,o=this.isCompound,a=this.parentMap,s=this.childrenMap,u=this.inEdgesMap,c=this.outEdgesMap,l=this.predecessorsMap,f=this.successorsMap;return r.has(t)?(void 0!==e&&r.set(t,e),this):(r.set(t,e||i(t)),o()&&(null==a||a.set(t,this.GRAPH_NODE),null==s||s.set(t,new Map),(null==s?void 0:s.has(this.GRAPH_NODE))||null==s||s.set(this.GRAPH_NODE,new Map),null==s||null===(n=s.get(this.GRAPH_NODE))||void 0===n||n.set(t,!0)),[u,c,l,f].forEach((function(e){return e.set(t,new Map)})),this.nodeCountNum+=1,this)}},{key:"removeNode",value:function(t){var e=this;if(this.hasNode(t)){var n,r,i,o=function(t){e.removeEdge(t.v,t.w,t.name)},a=this.inEdgesMap,s=this.outEdgesMap,u=this.predecessorsMap,c=this.successorsMap,l=this.nodesLabelMap;this.isCompound()&&(this.removeFromParentsChildList(t),null===(n=this.parentMap)||void 0===n||n.delete(t),null===(r=this.children(t))||void 0===r||r.forEach((function(t){return e.setParent(t)})),null===(i=this.childrenMap)||void 0===i||i.delete(t));var f=a.get(t),d=s.get(t);Array.from(f.values()).forEach((function(t){return o(t)})),Array.from(d.values()).forEach((function(t){return o(t)})),l.delete(t),a.delete(t),s.delete(t),u.delete(t),c.delete(t),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(t,e,n,r){var i,o,a=f(this.isDirected(),t,e,r),s=d(this.isDirected(),a),c=a.v,l=a.w;if(this.edgesLabelsMap.has(s))return this.edgesLabelsMap.set(s,n),this;if(void 0!==r&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(l),this.edgesLabelsMap.set(s,n||this.defaultEdgeLabelFn(c,l,r)),Object.freeze(a),this.edgesMap.set(s,a);var h=this.predecessorsMap.get(l),p=this.successorsMap.get(c);return u(h,c),u(p,l),null===(i=this.inEdgesMap.get(l))||void 0===i||i.set(s,a),null===(o=this.outEdgesMap.get(c))||void 0===o||o.set(s,a),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(t,e,n){var r=l(this.isDirected(),t,e,n);if(this.edgesMap.get(r)){var i=f(this.isDirected(),t,e,n),o=i.v,a=i.w;this.edgesLabelsMap.delete(r),this.edgesMap.delete(r);var s=this.predecessorsMap.get(a),u=this.successorsMap.get(o);c(s,o),c(u,a),this.inEdgesMap.get(a).delete(r),this.outEdgesMap.get(o).delete(r),this.edgeCountNum-=1}return this}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},C.apply(this,arguments)}function k(t,e){return k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},k(t,e)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}_.fromJSON=function(t){var e=new _(t.options);return void 0!==t.value&&e.setGraph(t.value),t.nodes.forEach((function(t){e.setNode(t.id,t.value),t.parent&&e.setParent(t.id,t.parent)})),t.edges.forEach((function(t){e.setEdge(t.v,t.w,t.value,t.name)})),e};var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(i){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).eventPool={},t}return e=a,n=[{key:"appendEvent",value:function(t,e){this.eventPool[t]||(this.eventPool[t]=[]),this.eventPool[t].push(e)}},{key:"removeEvent",value:function(t,e){if(this.eventPool[t]){var n=this.eventPool[t].indexOf(e);n>-1&&this.eventPool[t].splice(n,1)}}},{key:"emitEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.eventPool[t]&&this.eventPool[t].forEach((function(t){t.apply(void 0,n)}))}},{key:"setNode",value:function(t,e){return C(M(a.prototype),"setNode",this).call(this,t,e),this.emitEvent("nodeAdd",t,e),this}},{key:"removeNode",value:function(t){return C(M(a.prototype),"removeNode",this).call(this,t),this.emitEvent("nodeRemove",t),this}},{key:"setEdge",value:function(t,e,n,r){return C(M(a.prototype),"setEdge",this).call(this,t,e,n,r),this.emitEvent("edgeAdd",t,e,n,r),this}},{key:"removeEdge",value:function(t,e,n){return C(M(a.prototype),"removeEdge",this).call(this,t,e,n),this.emitEvent("edgeRemove",t,e,n),this}}],n&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(_);function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var N=A((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map((function(t){return t.key}))},this.has=function(t){return e.keyIndice.has(t)},this.priority=function(t){var n=e.keyIndice.get(t);if(void 0!==n)return e.arr[n].priority},this.swap=function(t,n){var r=e.arr,i=e.keyIndice,o=[r[t],r[n]],a=o[0],s=o[1];r[t]=s,r[n]=a,i.set(a.key,n),i.set(s.key,t)},this.innerDecrease=function(t){for(var n,r=e.arr,i=r[t].priority,o=t;0!==o;){var a;if((null===(a=r[n=o>>1])||void 0===a?void 0:a.priority)<i)break;e.swap(o,n),o=n}},this.heapify=function(t){var n=e.arr,r=t<<1,i=r+1,o=t;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==t&&(e.swap(t,o),e.heapify(o)))},this.min=function(){if(0===e.size())throw new Error("Queue underflow");return e.arr[0].key},this.add=function(t,n){var r=e.keyIndice,i=e.arr;if(!r.has(t)){var o=i.length;return r.set(t,o),i.push({key:t,priority:n}),e.innerDecrease(o),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var t=e.arr.pop();return e.keyIndice.delete(t.key),e.heapify(0),t.key},this.decrease=function(t,n){if(!e.has(t))throw new Error("There's no key named ".concat(t));var r=e.keyIndice.get(t);if(n>e.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(e.arr[r].priority," New: ").concat(n));e.arr[r].priority=n,e.innerDecrease(r)}})),I=function(t,e){var n,r=new _,i=new Map,o=new N;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var s=e(t);s<a&&(i.set(r,n),o.decrease(r,s))}}if(0===t.nodeCount())return r;t.nodes().forEach((function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);for(var s=!1;o.size()>0;){var u;if(n=o.removeMin(),i.has(n))r.setEdge(n,i.get(n));else{if(s)throw new Error("Input graph is not connected: "+t.graph());s=!0}null===(u=t.nodeEdges(n))||void 0===u||u.forEach(a)}return r},P=function(t){var e=new Set,n=[];return t.nodes().forEach((function(r){for(var i=[],o=[r];o.length>0;){var a,s,u=o.pop();e.has(u)||(e.add(u),i.push(u),null===(a=t.successors(u))||void 0===a||a.forEach((function(t){return o.push(t)})),null===(s=t.predecessors(u))||void 0===s||s.forEach((function(t){return o.push(t)})))}i.length&&n.push(i)})),n},D=function t(e,n,r,i,o,a){i.includes(n)||(i.push(n),r||a.push(n),o(n).forEach((function(n){return t(e,n,r,i,o,a)})),r&&a.push(n))},L=function(t,e,n){var r=Array.isArray(e)?e:[e],i=function(e){return t.isDirected()?t.successors(e):t.neighbors(e)},o=[],a=[];return r.forEach((function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);D(t,e,"post"===n,a,i,o)})),o};function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var j=function(){return 1},B=function(t,e,n,r){var i,o,a=new Map,s=new N,u=function(t){var e=t.v!==i?t.v:t.w,r=a.get(e),u=n(t),c=o.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+u);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(e,c))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a.set(t,{distance:n}),s.add(t,n)}));s.size()>0&&(i=s.removeMin(),!(o=a.get(i))||o.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(u);var c={};return Array.from(a.entries()).forEach((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,n)||function(t,e){if(t){if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1];return c[String(i)]=o,c})),c},F=function(t,e,n,r){return B(t,e,n||j,r||function(e){return t.outEdges(e)})},z=function(t,e,n){var r={};return t.nodes().forEach((function(i){return r[String(i)]=F(t,i,e,n),r})),r},$=function(t){var e=0,n=[],r=new Map,i=[];function o(a){var s,u={onStack:!0,lowlink:e,index:e};if(r.set(a,u),e+=1,n.push(a),null===(s=t.successors(a))||void 0===s||s.forEach((function(t){var e;if(r.has(t)){if(null===(e=r.get(t))||void 0===e?void 0:e.onStack){var n=r.get(t);u.lowlink=Math.min(u.lowlink,n.index)}}else{o(t);var i=r.get(t);u.lowlink=Math.min(u.lowlink,i.lowlink)}})),u.lowlink===u.index){var c,l=[];do{c=n.pop(),r.get(c).onStack=!1,l.push(c)}while(a!==c);i.push(l)}}return t.nodes().forEach((function(t){r.has(t)||o(t)})),i},G=function(t){return $(t).filter((function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))};function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function U(t){var e="function"==typeof Map?new Map:void 0;return U=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return W(t,arguments,X(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Y(r,t)},U(t)}function W(t,e,n){return W=H()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Y(i,n.prototype),i},W.apply(null,arguments)}function H(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Y(t,e){return Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Y(t,e)}function X(t){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},X(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(o,t);var e,n,r,i=(n=o,r=H(),function(){var t,e=X(n);if(r){var i=X(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return e=o,Object.defineProperty(e,"prototype",{writable:!1}),e}(U(Error)),Z=function(t){var e=new Set,n=new Set,r=[];if(t.sinks().forEach((function i(o){if(n.has(o))throw new q;var a;e.has(o)||(n.add(o),e.add(o),null===(a=t.predecessors(o))||void 0===a||a.forEach(i),n.delete(o),r.push(o))})),e.size!==t.nodeCount())throw new q;return r},K=function(t){try{Z(t)}catch(t){if(t instanceof q)return!1;throw t}return!0},J=function(t,e){return L(t,e,"post")},Q=function(t,e){return L(t,e,"pre")},tt=function(){return 1},et=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){var o=String(t);r[o]={},r[o][o]={distance:0},i.forEach((function(e){t!==e&&(r[o][String(e)]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,a=e(n);r[o][String(i)]={distance:a,predecessor:t}}))})),i.forEach((function(t){var e=String(t),n=r[e];i.forEach((function(t){var o=String(t),a=r[o];i.forEach((function(t){var r=String(t),i=a[e],o=n[r],s=a[r],u=i.distance+o.distance;u<s.distance&&(s.distance=u,s.predecessor=o.predecessor)}))}))})),r}(t,e||tt,n||function(e){return t.outEdges(e)})},nt=function(t,e){for(var n=t.nodes(),r=0;r<n.length;r++){var i=n[r];if(e.hasNode(i))return!0}return!1},rt=function(t,e){for(var n=t.edges(),r=0;r<n.length;r++){var i=n[r];if(e.hasEdge(i.v,i.w,i.name))return!0}return!1},it=function(t,e){return t.nodes().filter((function(t){return e.hasNode(t)}))},ot=function(t,e){return t.edges().filter((function(t){return e.hasEdge(t.v,t.w,t.name)}))},at=function(t,e){return t.isCompound()===e.isCompound()&&t.isDirected()===e.isDirected()&&t.isMultigraph()===e.isMultigraph()},st=function(t,e){return it(t,e).length===t.nodes().length},ut=function(t,e){return ot(t,e).length===t.edges().length},ct=function(t,e){return at(t,e)&&t.nodeCount()===e.nodeCount()&&st(t,e)&&t.edgeCount()===e.edgeCount()&&ut(t,e)},lt=function(t,e){return st(t,e)&&ut(t,e)};function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ht(t){return t instanceof _}function pt(t){if(t.isMultigraph())return!1;for(var e=t.edges(),n=new Map,r=0;r<e.length;r++){var i=e[r];if(i.v===i.w)return!1;var o=ft([i.v,i.w].sort(),2),a=o[0],s=o[1],u="".concat(a,"-").concat(s);if(n.has(u))return!1;n.set(u,!0)}return!0}function gt(t){return 0===t.nodes().length}function vt(t){for(var e=t.edges(),n=0;n<e.length;n++){var r=e[n];if(r.v===r.w)return!0}return!1}var mt=function(t,e){if(!pt(t)||!pt(e))return!1;if(!st(t,e))return!1;if(rt(t,e))return!1;var n=t.nodeCount();return t.edgeCount()+e.edgeCount()===n*(n-1)/2},yt=function(t){if(!pt(t))return null;for(var e=t.nodeCount(),n=new _({compound:t.isCompound(),directed:t.isDirected(),multigraph:t.isMultigraph()}),r=t.nodes(),i=0;i<e;i++){var o=r[i];n.setNode(o,t.node(o));for(var a=i+1;a<e;a++){var s=r[a];t.hasEdge(o,s)||n.setEdge(o,s)}}return n}},1746:function(t){var e;"undefined"!=typeof self&&self,e=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=36)}([function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Array.isArray?Array.isArray(t):Object(r.a)(t,"Array")}},function(t,e,n){"use strict";e.a=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Function")}},function(t,e,n){"use strict";var r={}.toString;e.a=function(t,e){return r.call(t)==="[object "+e+"]"}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"String")}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Number")}},function(t,e,n){var r=n(38).mix;t.exports={assign:r,getHeight:function(t,e,n,r){return void 0===r&&(r="height"),"center"===n?(t[r]+e[r])/2:t.height}}},function(t,e,n){"use strict";e.a=function(t){return null==t}},function(t,e,n){"use strict";var r=n(0),i=n(12);e.a=function(t,e){if(t)if(Object(r.a)(t))for(var n=0,o=t.length;n<o&&!1!==e(t[n],n);n++);else if(Object(i.a)(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===e(t[a],a))break}},function(t,e,n){"use strict";var r=n(7);e.a=function(t){return Object(r.a)(t)?"":t.toString()}},function(t,e,n){"use strict";var r=n(14),i=n(3);e.a=function(t){if(!Object(r.a)(t)||!Object(i.a)(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},function(t,e,n){var r=n(18),i=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.rootNode=r(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=i},function(t,e,n){"use strict";e.a=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){return!!Object(r.a)(t)&&t.indexOf(e)>-1}},function(t,e,n){"use strict";e.a=function(t){return"object"==typeof t&&null!==t}},function(t,e,n){"use strict";var r=n(8),i=n(2),o=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Object(r.a)(t,(function(n,r){Object(i.a)(t)&&"prototype"===r||e.push(n)})),e};e.a=o},function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}e.a=function(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}},function(t,e,n){var r=n(35),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=i[0];t.exports=function(t,e,n){var s=e.direction||a;if(e.isHorizontal=function(t){return o.indexOf(t)>-1}(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])n(t,e);else if(s===i[1])n(t,e),t.right2left();else if(s===i[2])n(t,e);else if(s===i[3])n(t,e),t.bottom2top();else if(s===i[4]||s===i[5]){var u=r(t,e),c=u.left,l=u.right;n(c,e),n(l,e),e.isHorizontal?c.right2left():c.bottom2top(),l.translate(c.x-l.x,c.y-l.y),t.x=c.x,t.y=l.y;var f=t.getBoundingBox();e.isHorizontal?f.top<0&&t.translate(0,-f.top):f.left<0&&t.translate(-f.left,0)}var d=e.fixedRoot;return void 0===d&&(d=!0),d&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){var r=n(6),i={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function o(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof o)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.preH=e.getPreH(t),n.preV=e.getPreV(t),n.width=e.getWidth(t),n.height=e.getHeight(t),n.width+=n.preH,n.height+=n.preV,n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}r.assign(o.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.shift();)t(e),n=e.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)})),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode((function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.x=t.x-2*(t.x-e.left)-t.width})),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.y=t.y-2*(t.y-e.top)-t.height})),t.translate(0,e.height)}}),t.exports=function(t,e,n){void 0===e&&(e={});var a,s=new o(t,e=r.assign({},i,e)),u=[s];if(!n&&!t.collapsed)for(;a=u.shift();)if(!a.data.collapsed){var c=e.getChildren(a.data),l=c?c.length:0;if(a.children=new Array(l),c&&l)for(var f=0;f<l;f++){var d=new o(c[f],e);a.children[f]=d,u.push(d),d.parent=a,d.depth=a.depth+1}}return s}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){if(!Object(r.a)(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];e(o,i)&&n.push(o)}return n}},function(t,e,n){"use strict";var r=n(7),i=n(21);e.a=function(t,e){var n=Object(i.a)(e),o=n.length;if(Object(r.a)(t))return!o;for(var a=0;a<o;a+=1){var s=n[a];if(e[s]!==t[s]||!(s in t))return!1}return!0}},function(t,e,n){"use strict";var r=n(8),i=n(2),o=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Object(r.a)(t,(function(n,r){Object(i.a)(t)&&"prototype"===r||e.push(r)})),e};e.a=o},function(t,e,n){"use strict";var r=n(0);e.a=function(t){if(Object(r.a)(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])}},function(t,e,n){"use strict";var r=n(0);e.a=function(t){if(Object(r.a)(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])}},function(t,e,n){"use strict";var r=n(1),i=Array.prototype.splice;e.a=function(t,e){if(!Object(r.a)(t))return[];for(var n=t?e.length:0,o=n-1;n--;){var a=void 0,s=e[n];n!==o&&s===a||(a=s,i.call(t,s,1))}return t}},function(t,e,n){"use strict";var r=n(8),i=n(0),o=n(10);e.a=function(t,e,n){if(!Object(i.a)(t)&&!Object(o.a)(t))return t;var a=n;return Object(r.a)(t,(function(t,n){a=e(a,t,n)})),a}},function(t,e,n){"use strict";e.a=function(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}},function(t,e,n){"use strict";e.a=function(t,e){if(!e)return{0:t};if(!Object(i.a)(e)){var n=Object(r.a)(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return Object(o.a)(t,e)};var r=n(0),i=n(2),o=n(28)},function(t,e,n){"use strict";var r=n(0),i=n(2),o=Object.prototype.hasOwnProperty;e.a=function(t,e){if(!e||!Object(r.a)(t))return{};for(var n,a={},s=Object(i.a)(e)?e:function(t){return t[e]},u=0;u<t.length;u++){var c=t[u];n=s(c),o.call(a,n)?a[n].push(c):a[n]=[c]}return a}},function(t,e,n){"use strict";e.a=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){"use strict";var r={}.toString;e.a=function(t){return r.call(t).replace(/^\[object /,"").replace(/]$/,"")}},function(t,e,n){"use strict";var r=Object.prototype;e.a=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,n){"use strict";var r=n(2);e.a=function(t,e){if(!Object(r.a)(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n}},function(t,e,n){"use strict";var r=n(14),i=n(1),o=n(4),a=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Object(o.a)(t)||Object(o.a)(e))return!1;if(Object(i.a)(t)||Object(i.a)(e)){if(t.length!==e.length)return!1;for(var n=!0,s=0;s<t.length&&(n=a(t[s],e[s]));s++);return n}if(Object(r.a)(t)||Object(r.a)(e)){var u=Object.keys(t),c=Object.keys(e);if(u.length!==c.length)return!1;for(n=!0,s=0;s<u.length&&(n=a(t[u[s]],e[u[s]]));s++);return n}return!1};e.a=a},function(t,e,n){"use strict";var r,i=n(116),o=n(15),a=n(32),s=n(4);e.a=Object(a.a)((function(t,e){void 0===e&&(e={});var n=e.fontSize,i=e.fontFamily,o=e.fontWeight,a=e.fontStyle,u=e.fontVariant;return r||(r=document.createElement("canvas").getContext("2d")),r.font=[a,u,o,n+"px",i].join(" "),r.measureText(Object(s.a)(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),Object(i.a)([t],Object(o.a)(e)).join("")}))},function(t,e,n){var r=n(18);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},u=0;u<o;u++){var c=t.children[u];"right"===s(c,u)?i.children.push(c):n.children.push(c)}return n.eachNode((function(t){t.isRoot()||(t.side="left")})),i.eachNode((function(t){t.isRoot()||(t.side="right")})),{left:n,right:i}}},function(t,e,n){var r={compactBox:n(37),dendrogram:n(120),indented:n(122),mindmap:n(124)};t.exports=r},function(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(11),o=n(119),a=n(17),s=n(6),u=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.execute=function(){return a(this.rootNode,this.options,o)},i}(i),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13);n.d(e,"contains",(function(){return r.a})),n.d(e,"includes",(function(){return r.a}));var i=n(39);n.d(e,"difference",(function(){return i.a}));var o=n(40);n.d(e,"find",(function(){return o.a}));var a=n(41);n.d(e,"findIndex",(function(){return a.a}));var s=n(42);n.d(e,"firstValue",(function(){return s.a}));var u=n(43);n.d(e,"flatten",(function(){return u.a}));var c=n(44);n.d(e,"flattenDeep",(function(){return c.a}));var l=n(45);n.d(e,"getRange",(function(){return l.a}));var f=n(46);n.d(e,"pull",(function(){return f.a}));var d=n(24);n.d(e,"pullAt",(function(){return d.a}));var h=n(25);n.d(e,"reduce",(function(){return h.a}));var p=n(47);n.d(e,"remove",(function(){return p.a}));var g=n(48);n.d(e,"sortBy",(function(){return g.a}));var v=n(49);n.d(e,"union",(function(){return v.a}));var m=n(26);n.d(e,"uniq",(function(){return m.a}));var y=n(50);n.d(e,"valuesOfKey",(function(){return y.a}));var b=n(51);n.d(e,"head",(function(){return b.a}));var x=n(52);n.d(e,"last",(function(){return x.a}));var w=n(53);n.d(e,"startsWith",(function(){return w.a}));var _=n(54);n.d(e,"endsWith",(function(){return _.a}));var E=n(19);n.d(e,"filter",(function(){return E.a}));var S=n(55);n.d(e,"every",(function(){return S.a}));var C=n(56);n.d(e,"some",(function(){return C.a}));var k=n(57);n.d(e,"group",(function(){return k.a}));var M=n(28);n.d(e,"groupBy",(function(){return M.a}));var O=n(27);n.d(e,"groupToMap",(function(){return O.a}));var T=n(58);n.d(e,"getWrapBehavior",(function(){return T.a}));var A=n(59);n.d(e,"wrapBehavior",(function(){return A.a}));var N=n(60);n.d(e,"number2color",(function(){return N.a}));var I=n(61);n.d(e,"parseRadius",(function(){return I.a}));var P=n(62);n.d(e,"clamp",(function(){return P.a}));var D=n(63);n.d(e,"fixedBase",(function(){return D.a}));var L=n(64);n.d(e,"isDecimal",(function(){return L.a}));var R=n(65);n.d(e,"isEven",(function(){return R.a}));var j=n(66);n.d(e,"isInteger",(function(){return j.a}));var B=n(67);n.d(e,"isNegative",(function(){return B.a}));var F=n(68);n.d(e,"isNumberEqual",(function(){return F.a}));var z=n(69);n.d(e,"isOdd",(function(){return z.a}));var $=n(70);n.d(e,"isPositive",(function(){return $.a}));var G=n(22);n.d(e,"max",(function(){return G.a}));var V=n(71);n.d(e,"maxBy",(function(){return V.a}));var U=n(23);n.d(e,"min",(function(){return U.a}));var W=n(72);n.d(e,"minBy",(function(){return W.a}));var H=n(73);n.d(e,"mod",(function(){return H.a}));var Y=n(74);n.d(e,"toDegree",(function(){return Y.a}));var X=n(75);n.d(e,"toInteger",(function(){return X.a}));var q=n(76);n.d(e,"toRadian",(function(){return q.a}));var Z=n(77);n.d(e,"forIn",(function(){return Z.a}));var K=n(29);n.d(e,"has",(function(){return K.a}));var J=n(78);n.d(e,"hasKey",(function(){return J.a}));var Q=n(79);n.d(e,"hasValue",(function(){return Q.a}));var tt=n(21);n.d(e,"keys",(function(){return tt.a}));var et=n(20);n.d(e,"isMatch",(function(){return et.a}));var nt=n(15);n.d(e,"values",(function(){return nt.a}));var rt=n(80);n.d(e,"lowerCase",(function(){return rt.a}));var it=n(81);n.d(e,"lowerFirst",(function(){return it.a}));var ot=n(82);n.d(e,"substitute",(function(){return ot.a}));var at=n(83);n.d(e,"upperCase",(function(){return at.a}));var st=n(84);n.d(e,"upperFirst",(function(){return st.a}));var ut=n(30);n.d(e,"getType",(function(){return ut.a}));var ct=n(85);n.d(e,"isArguments",(function(){return ct.a}));var lt=n(0);n.d(e,"isArray",(function(){return lt.a}));var ft=n(1);n.d(e,"isArrayLike",(function(){return ft.a}));var dt=n(86);n.d(e,"isBoolean",(function(){return dt.a}));var ht=n(87);n.d(e,"isDate",(function(){return ht.a}));var pt=n(88);n.d(e,"isError",(function(){return pt.a}));var gt=n(2);n.d(e,"isFunction",(function(){return gt.a}));var vt=n(89);n.d(e,"isFinite",(function(){return vt.a}));var mt=n(7);n.d(e,"isNil",(function(){return mt.a}));var yt=n(90);n.d(e,"isNull",(function(){return yt.a}));var bt=n(5);n.d(e,"isNumber",(function(){return bt.a}));var xt=n(12);n.d(e,"isObject",(function(){return xt.a}));var wt=n(14);n.d(e,"isObjectLike",(function(){return wt.a}));var _t=n(10);n.d(e,"isPlainObject",(function(){return _t.a}));var Et=n(31);n.d(e,"isPrototype",(function(){return Et.a}));var St=n(91);n.d(e,"isRegExp",(function(){return St.a}));var Ct=n(4);n.d(e,"isString",(function(){return Ct.a}));var kt=n(3);n.d(e,"isType",(function(){return kt.a}));var Mt=n(92);n.d(e,"isUndefined",(function(){return Mt.a}));var Ot=n(93);n.d(e,"isElement",(function(){return Ot.a}));var Tt=n(94);n.d(e,"requestAnimationFrame",(function(){return Tt.a}));var At=n(95);n.d(e,"clearAnimationFrame",(function(){return At.a}));var Nt=n(96);n.d(e,"augment",(function(){return Nt.a}));var It=n(97);n.d(e,"clone",(function(){return It.a}));var Pt=n(98);n.d(e,"debounce",(function(){return Pt.a}));var Dt=n(32);n.d(e,"memoize",(function(){return Dt.a}));var Lt=n(99);n.d(e,"deepMix",(function(){return Lt.a}));var Rt=n(8);n.d(e,"each",(function(){return Rt.a}));var jt=n(100);n.d(e,"extend",(function(){return jt.a}));var Bt=n(101);n.d(e,"indexOf",(function(){return Bt.a}));var Ft=n(102);n.d(e,"isEmpty",(function(){return Ft.a}));var zt=n(33);n.d(e,"isEqual",(function(){return zt.a}));var $t=n(103);n.d(e,"isEqualWith",(function(){return $t.a}));var Gt=n(104);n.d(e,"map",(function(){return Gt.a}));var Vt=n(105);n.d(e,"mapValues",(function(){return Vt.a}));var Ut=n(16);n.d(e,"mix",(function(){return Ut.a})),n.d(e,"assign",(function(){return Ut.a}));var Wt=n(106);n.d(e,"get",(function(){return Wt.a}));var Ht=n(107);n.d(e,"set",(function(){return Ht.a}));var Yt=n(108);n.d(e,"pick",(function(){return Yt.a}));var Xt=n(109);n.d(e,"omit",(function(){return Xt.a}));var qt=n(110);n.d(e,"throttle",(function(){return qt.a}));var Zt=n(111);n.d(e,"toArray",(function(){return Zt.a}));var Kt=n(9);n.d(e,"toString",(function(){return Kt.a}));var Jt=n(112);n.d(e,"uniqueId",(function(){return Jt.a}));var Qt=n(113);n.d(e,"noop",(function(){return Qt.a}));var te=n(114);n.d(e,"identity",(function(){return te.a}));var ee=n(115);n.d(e,"size",(function(){return ee.a}));var ne=n(34);n.d(e,"measureTextWidth",(function(){return ne.a}));var re=n(117);n.d(e,"getEllipsisText",(function(){return re.a}));var ie=n(118);n.d(e,"Cache",(function(){return ie.a}))},function(t,e,n){"use strict";var r=n(19),i=n(13);e.a=function(t,e){return void 0===e&&(e=[]),Object(r.a)(t,(function(t){return!Object(i.a)(e,t)}))}},function(t,e,n){"use strict";var r=n(2),i=n(20),o=n(0),a=n(10);e.a=function(t,e){if(!Object(o.a)(t))return null;var n;if(Object(r.a)(e)&&(n=e),Object(a.a)(e)&&(n=function(t){return Object(i.a)(t,e)}),n)for(var s=0;s<t.length;s+=1)if(n(t[s]))return t[s];return null}},function(t,e,n){"use strict";e.a=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}},function(t,e,n){"use strict";var r=n(7),i=n(0);e.a=function(t,e){for(var n=null,o=0;o<t.length;o++){var a=t[o][e];if(!Object(r.a)(a)){n=Object(i.a)(a)?a[0]:a;break}}return n}},function(t,e,n){"use strict";var r=n(0);e.a=function(t){if(!Object(r.a)(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}},function(t,e,n){"use strict";var r=n(0),i=function(t,e){if(void 0===e&&(e=[]),Object(r.a)(t))for(var n=0;n<t.length;n+=1)i(t[n],e);else e.push(t);return e};e.a=i},function(t,e,n){"use strict";var r=n(0),i=n(22),o=n(23);e.a=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(Object(r.a)(t[0])){for(var n=[],a=0;a<t.length;a++)n=n.concat(t[a]);e=n}var s=Object(i.a)(e);return{min:Object(o.a)(e),max:s}}},function(t,e,n){"use strict";var r=Array.prototype,i=r.splice,o=r.indexOf;e.a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var a=e[r],s=-1;(s=o.call(t,a))>-1;)i.call(t,s,1);return t}},function(t,e,n){"use strict";var r=n(1),i=n(24);e.a=function(t,e){var n=[];if(!Object(r.a)(t))return n;for(var o=-1,a=[],s=t.length;++o<s;){var u=t[o];e(u,o,t)&&(n.push(u),a.push(o))}return Object(i.a)(t,a),n}},function(t,e,n){"use strict";var r=n(0),i=n(4),o=n(2);e.a=function(t,e){var n;if(Object(o.a)(e))n=function(t,n){return e(t)-e(n)};else{var a=[];Object(i.a)(e)?a.push(e):Object(r.a)(e)&&(a=e),n=function(t,e){for(var n=0;n<a.length;n+=1){var r=a[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}}return t.sort(n),t}},function(t,e,n){"use strict";var r=n(26);e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(r.a)([].concat.apply([],t))}},function(t,e,n){"use strict";var r=n(0),i=n(7);e.a=function(t,e){for(var n=[],o={},a=0;a<t.length;a++){var s=t[a][e];if(!Object(i.a)(s)){Object(r.a)(s)||(s=[s]);for(var u=0;u<s.length;u++){var c=s[u];o[c]||(n.push(c),o[c]=!0)}}}return n}},function(t,e,n){"use strict";e.a=function(t){if(Object(r.a)(t))return t[0]};var r=n(1)},function(t,e,n){"use strict";e.a=function(t){if(Object(r.a)(t))return t[t.length-1]};var r=n(1)},function(t,e,n){"use strict";var r=n(0),i=n(4);e.a=function(t,e){return!(!Object(r.a)(t)&&!Object(i.a)(t))&&t[0]===e}},function(t,e,n){"use strict";var r=n(0),i=n(4);e.a=function(t,e){return!(!Object(r.a)(t)&&!Object(i.a)(t))&&t[t.length-1]===e}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1}},function(t,e,n){"use strict";var r=n(27);e.a=function(t,e){if(!e)return[t];var n=Object(r.a)(t,e),i=[];for(var o in n)i.push(n[o]);return i}},function(t,e,n){"use strict";e.a=function(t,e){return t["_wrap_"+e]}},function(t,e,n){"use strict";e.a=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}},function(t,e,n){"use strict";var r={};e.a=function(t){var e=r[t];if(!e){for(var n=t.toString(16),i=n.length;i<6;i++)n="0"+n;e="#"+n,r[t]=e}return e}},function(t,e,n){"use strict";var r=n(0);e.a=function(t){var e=0,n=0,i=0,o=0;return Object(r.a)(t)?1===t.length?e=n=i=o=t[0]:2===t.length?(e=i=t[0],n=o=t[1]):3===t.length?(e=t[0],n=o=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],o=t[3]):e=n=i=o=t,{r1:e,r2:n,r3:i,r4:o}}},function(t,e,n){"use strict";e.a=function(t,e,n){return t<e?e:t>n?n:t}},function(t,e,n){"use strict";e.a=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t%1!=0}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t%2==0}},function(t,e,n){"use strict";var r=n(5),i=Number.isInteger?Number.isInteger:function(t){return Object(r.a)(t)&&t%1==0};e.a=i},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t<0}},function(t,e,n){"use strict";e.a=function(t,e,n){return void 0===n&&(n=r),Math.abs(t-e)<n};var r=1e-5},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t%2!=0}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t>0}},function(t,e,n){"use strict";var r=n(0),i=n(2);e.a=function(t,e){if(Object(r.a)(t)){for(var n,o=-1/0,a=0;a<t.length;a++){var s=t[a],u=Object(i.a)(e)?e(s):s[e];u>o&&(n=s,o=u)}return n}}},function(t,e,n){"use strict";var r=n(0),i=n(2);e.a=function(t,e){if(Object(r.a)(t)){for(var n,o=1/0,a=0;a<t.length;a++){var s=t[a],u=Object(i.a)(e)?e(s):s[e];u<o&&(n=s,o=u)}return n}}},function(t,e,n){"use strict";e.a=function(t,e){return(t%e+e)%e}},function(t,e,n){"use strict";var r=180/Math.PI;e.a=function(t){return r*t}},function(t,e,n){"use strict";e.a=parseInt},function(t,e,n){"use strict";var r=Math.PI/180;e.a=function(t){return r*t}},function(t,e,n){"use strict";var r=n(8);e.a=r.a},function(t,e,n){"use strict";var r=n(29);e.a=r.a},function(t,e,n){"use strict";var r=n(13),i=n(15);e.a=function(t,e){return Object(r.a)(Object(i.a)(t),e)}},function(t,e,n){"use strict";var r=n(9);e.a=function(t){return Object(r.a)(t).toLowerCase()}},function(t,e,n){"use strict";var r=n(9);e.a=function(t){var e=Object(r.a)(t);return e.charAt(0).toLowerCase()+e.substring(1)}},function(t,e,n){"use strict";e.a=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t}},function(t,e,n){"use strict";var r=n(9);e.a=function(t){return Object(r.a)(t).toUpperCase()}},function(t,e,n){"use strict";var r=n(9);e.a=function(t){var e=Object(r.a)(t);return e.charAt(0).toUpperCase()+e.substring(1)}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Arguments")}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Boolean")}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Date")}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Error")}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&isFinite(t)}},function(t,e,n){"use strict";e.a=function(t){return null===t}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"RegExp")}},function(t,e,n){"use strict";e.a=function(t){return void 0===t}},function(t,e,n){"use strict";e.a=function(t){return t instanceof Element||t instanceof HTMLDocument}},function(t,e,n){"use strict";e.a=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}},function(t,e,n){"use strict";e.a=function(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}},function(t,e,n){"use strict";var r=n(16),i=n(2);e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],o=1;o<t.length;o++){var a=t[o];Object(i.a)(a)&&(a=a.prototype),Object(r.a)(n.prototype,a)}}},function(t,e,n){"use strict";var r=n(0),i=function(t){if("object"!=typeof t||null===t)return t;var e;if(Object(r.a)(t)){e=[];for(var n=0,o=t.length;n<o;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=i(t[n]):e[n]=t[n]}else for(var a in e={},t)"object"==typeof t[a]&&null!=t[a]?e[a]=i(t[a]):e[a]=t[a];return e};e.a=i},function(t,e,n){"use strict";e.a=function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,o)}),e),a&&t.apply(i,o)}}},function(t,e,n){"use strict";var r=n(0),i=n(10),o=5;function a(t,e,n,s){for(var u in n=n||0,s=s||o,e)if(e.hasOwnProperty(u)){var c=e[u];null!==c&&Object(i.a)(c)?(Object(i.a)(t[u])||(t[u]={}),n<s?a(t[u],c,n+1,s):t[u]=e[u]):Object(r.a)(c)?(t[u]=[],t[u]=t[u].concat(c)):void 0!==c&&(t[u]=c)}}e.a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)a(t,e[r]);return t}},function(t,e,n){"use strict";var r=n(16),i=n(2);e.a=function(t,e,n,o){Object(i.a)(e)||(n=e,e=t,t=function(){});var a=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},s=a(e.prototype,t);return t.prototype=Object(r.a)(s,t.prototype),t.superclass=a(e.prototype,e),Object(r.a)(s,n),Object(r.a)(t,o),t}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){if(!Object(r.a)(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i}},function(t,e,n){"use strict";var r=n(7),i=n(1),o=n(30),a=n(31),s=Object.prototype.hasOwnProperty;e.a=function(t){if(Object(r.a)(t))return!0;if(Object(i.a)(t))return!t.length;var e=Object(o.a)(t);if("Map"===e||"Set"===e)return!t.size;if(Object(a.a)(t))return!Object.keys(t).length;for(var n in t)if(s.call(t,n))return!1;return!0}},function(t,e,n){"use strict";var r=n(2),i=n(33);e.a=function(t,e,n){return Object(r.a)(n)?!!n(t,e):Object(i.a)(t,e)}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){if(!Object(r.a)(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];n.push(e(o,i))}return n}},function(t,e,n){"use strict";var r=n(7),i=n(12),o=function(t){return t};e.a=function(t,e){void 0===e&&(e=o);var n={};return Object(i.a)(t)&&!Object(r.a)(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n}},function(t,e,n){"use strict";var r=n(4);e.a=function(t,e,n){for(var i=0,o=Object(r.a)(e)?e.split("."):e;t&&i<o.length;)t=t[o[i++]];return void 0===t||i<o.length?n:t}},function(t,e,n){"use strict";var r=n(12),i=n(4),o=n(5);e.a=function(t,e,n){var a=t,s=Object(i.a)(e)?e.split("."):e;return s.forEach((function(t,e){e<s.length-1?(Object(r.a)(a[t])||(a[t]=Object(o.a)(s[e+1])?[]:{}),a=a[t]):a[t]=n})),t}},function(t,e,n){"use strict";var r=n(8),i=n(10),o=Object.prototype.hasOwnProperty;e.a=function(t,e){if(null===t||!Object(i.a)(t))return{};var n={};return Object(r.a)(e,(function(e){o.call(t,e)&&(n[e]=t[e])})),n}},function(t,e,n){"use strict";var r=n(25);e.a=function(t,e){return Object(r.a)(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})}},function(t,e,n){"use strict";e.a=function(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return i=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),s=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,l)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c}},function(t,e,n){"use strict";var r=n(1);e.a=function(t){return Object(r.a)(t)?Array.prototype.slice.call(t):[]}},function(t,e,n){"use strict";var r={};e.a=function(t){return r[t=t||"g"]?r[t]+=1:r[t]=1,t+r[t]}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";e.a=function(t){return Object(r.a)(t)?0:Object(i.a)(t)?t.length:Object.keys(t).length};var r=n(7),i=n(1)},function(t,e,n){"use strict";e.a=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},Object.create,Object.create},function(t,e,n){"use strict";var r=n(4),i=n(9),o=n(34);e.a=function(t,e,n,a){void 0===a&&(a="...");var s,u,c=Object(o.a)(a,n),l=Object(r.a)(t)?t:Object(i.a)(t),f=e,d=[];if(Object(o.a)(t,n)<=e)return t;for(;s=l.substr(0,16),!((u=Object(o.a)(s,n))+c>f&&u>f);)if(d.push(s),f-=u,!(l=l.substr(16)))return d.join("");for(;s=l.substr(0,1),!((u=Object(o.a)(s,n))+c>f);)if(d.push(s),f-=u,!(l=l.substr(1)))return d.join("");return""+d.join("")+a}},function(t,e,n){"use strict";var r=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}();e.a=r},function(t,e){function n(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(t,e,n){n?t.y+=e:t.x+=e,t.children.forEach((function(t){r(t,e,n)}))}function i(t,e){var n=e?t.y:t.x;return t.children.forEach((function(t){n=Math.min(i(t,e),n)})),n}function o(t,e){r(t,-i(t,e),e)}function a(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach((function(t,r){a(t,e.children[r],n)}))}function s(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach((function(t){s(t,e,n)}))}n.fromNode=function(t,e){if(!t)return null;var r=[];return t.children.forEach((function(t){r.push(n.fromNode(t,e))})),e?new n(t.height,t.width,t.x,r):new n(t.width,t.height,t.y,r)},t.exports=function(t,e){void 0===e&&(e={});var r=e.isHorizontal;function i(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function u(t,e,n){for(var r=t.c[e-1],i=r.mod,o=t.c[e],a=o.mod;null!==r&&null!==o;){d(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(a+o.prelim);s>0&&(a+=s,c(t,e,n.index,s));var u=d(r),h=d(o);u<=h&&null!==(r=f(r))&&(i+=r.mod),u>=h&&null!==(o=l(o))&&(a+=o.mod)}!r&&o?function(t,e,n,r){var i=t.c[0].el;i.tl=n;var o=r-n.mod-t.c[0].msel;i.mod+=o,i.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,o,a):r&&!o&&function(t,e,n,r){var i=t.c[e].er;i.tr=n;var o=r-n.mod-t.c[e].mser;i.mod+=o,i.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,r,i)}function c(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,function(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}(t,e,n,r)}function l(t){return 0===t.cs?t.tl:t.c[0]}function f(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function d(t){return t.y+t.h}function h(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}s(t,r);var p=n.fromNode(t,r);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=h(d(e.c[0].el),0,null),r=1;r<e.cs;++r){t(e.c[r]);var o=d(e.c[r].er);u(e,r,n),n=h(o,r,n)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),i(e)}else i(e)}(p),function t(e,n){n+=e.mod,e.x=e.prelim+n,function(t){for(var e=0,n=0,r=0;r<t.cs;r++)n+=(e+=t.c[r].shift)+t.c[r].change,t.c[r].mod+=n}(e);for(var r=0;r<e.cs;r++)t(e.c[r],n)}(p,0),a(p,t,r),o(t,r),t}},function(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(11),o=n(121),a=n(17),s=n(6),u=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.execute=function(){var t=this;return t.rootNode.width=0,a(t.rootNode,t.options,o)},i}(i),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},function(t,e,n){var r=n(6);function i(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function a(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach((function(t,r){a(t,e.children[r],n)}))}t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},o,e);var n,s=0,u=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>s&&(s=e.depth);var n=e.children,r=n.length,o=new i(e.height,[]);return n.forEach((function(e,n){var i=t(e);o.children.push(i),0===n&&(o.leftChild=i),n===r-1&&(o.rightChild=i)})),o.originNode=e,o.isLeaf=e.isLeaf(),o}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=s;else{var n=e.children.map((function(e){return t(e)})),r=Math.min.apply(null,n);e.drawingDepth=r-1}return e.drawingDepth}(u),function t(r){r.x=r.drawingDepth*e.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+e.nodeSep,r.originNode.parent!==n.originNode.parent&&(r.y+=e.subTreeSep)),n=r):(r.children.forEach((function(e){t(e)})),r.y=(r.leftChild.y+r.rightChild.y)/2)}(u),a(u,t,e.isHorizontal),t}},function(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(11),o=n(123),a=n(35),s=n(6),u=["LR","RL","H"],c=u[0],l=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,r=void 0===n?20:n,i=t.dropCap,s=void 0===i||i,l=t.direction,f=void 0===l?c:l,d=t.align;if(f&&-1===u.indexOf(f))throw new TypeError("Invalid direction: "+f);if(f===u[0])o(e,r,s,d);else if(f===u[1])o(e,r,s,d),e.right2left();else if(f===u[2]){var h=a(e,t),p=h.left,g=h.right;o(p,r,s,d),p.right2left(),o(g,r,s,d);var v=p.getBoundingBox();g.translate(v.width,0),e.x=g.x-e.width/2}return e},i}(i),f={};t.exports=function(t,e){return e=s.assign({},f,e),new l(t,e).execute()}},function(t,e,n){var r=n(6);t.exports=function(t,e,n,i){var o=null;t.eachNode((function(t){!function(t,e,n,i,o){var a,s="function"==typeof n?n(t):n*t.depth;if(!i)try{if(t.id===t.parent.children[0].id)return t.x+=s,void(t.y=e?e.y:0)}catch(t){}if(t.x+=s,e){if(t.y=e.y+r.getHeight(e,t,o),t.parent.id!==(null==(a=e.parent)?void 0:a.id)){var u=t.parent.children.findIndex((function(e){return e.id===t.id})),c=t.parent.children[u-1];if(c){var l=c.y+r.getHeight(c,t,o);t.y=l>t.y?l:t.y}}}else t.y=0}(t,o,e,n,i),o=t}))}},function(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(11),o=n(125),a=n(17),s=n(6),u=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.execute=function(){return a(this.rootNode,this.options,o)},i}(i),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},function(t,e,n){var r=n(6);function i(t,e){var n=0;return t.children.length?t.children.forEach((function(t){n+=i(t,e)})):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function o(t){var e=t.children,n=e.length;if(n){e.forEach((function(t){o(t)}));var r=e[0],i=e[n-1],a=i.y-r.y+i.height,s=0;if(e.forEach((function(t){s+=t.totalHeight})),a>t.height)t.y=r.y+a/2-t.height/2;else if(1!==e.length||t.height>s){var u=t.y+(t.height-a)/2-r.y;e.forEach((function(t){t.translate(0,u)}))}else t.y=(r.y+r.height/2+i.y+i.height/2)/2-t.height/2}}var a={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},a,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse((function(t){t.x=t.parent.x+t.parent.width})),t.parent=null,i(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode((function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),o(t)}}])},t.exports=e()},3360:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var o=n(5326);Object.defineProperty(e,"registerLayout",{enumerable:!0,get:function(){return o.registerLayout}}),Object.defineProperty(e,"unRegisterLayout",{enumerable:!0,get:function(){return o.unRegisterLayout}}),Object.defineProperty(e,"getLayoutByName",{enumerable:!0,get:function(){return o.getLayoutByName}}),i(n(2584),e)},2329:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;var n=function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return t.prototype.layout=function(t){return this.init(t),this.execute(!0)},t.prototype.init=function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]},t.prototype.execute=function(t){},t.prototype.executeWithWorker=function(){},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(t){t&&Object.assign(this,t)},t.prototype.getType=function(){return"base"},t.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},t}();e.Base=n},4885:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CircularLayout=void 0;var o=n(2329),a=n(9784);function s(t,e){var n=t.degree,r=e.degree;return n<r?-1:n>r?1:0}var u=function(t){function e(e){var n=t.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var t,e=this,n=e.nodes,r=e.edges,i=n.length;if(0!==i){e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var o=e.center;if(1===i)return n[0].x=o[0],n[0].y=o[1],void(e.onLayoutEnd&&e.onLayoutEnd());var s=e.radius,u=e.startRadius,c=e.endRadius,l=e.divisions,f=e.startAngle,d=e.endAngle,h=e.angleRatio,p=e.ordering,g=e.clockwise,v=e.nodeSpacing,m=e.nodeSize,y=(d-f)/i,b={};n.forEach((function(t,e){b[t.id]=e})),e.nodeMap=b;var x=(0,a.getDegree)(n.length,b,r);if(e.degrees=x,v){var w=(0,a.getFuncByUnknownType)(10,v),_=(0,a.getFuncByUnknownType)(10,m),E=-1/0;n.forEach((function(t){var e=_(t);E<e&&(E=e)}));var S=0;n.forEach((function(t,e){S+=0===e?E||10:(w(t)||0)+(E||10)})),s=S/(2*Math.PI)}else s||u||c?!u&&c?u=c:u&&!c&&(c=u):s=e.height>e.width?e.width/2:e.height/2;var C=y*h,k=[];k="topology"===p?e.topologyOrdering():"topology-directed"===p?e.topologyOrdering(!0):"degree"===p?e.degreeOrdering():n;for(var M=Math.ceil(i/l),O=0;O<i;++O){var T=s;T||null===u||null===c||(T=u+O*(c-u)/(i-1)),T||(T=10+100*O/(i-1));var A=f+O%M*C+2*Math.PI/l*Math.floor(O/M);g||(A=d-O%M*C-2*Math.PI/l*Math.floor(O/M)),k[O].x=o[0]+Math.cos(A)*T,k[O].y=o[1]+Math.sin(A)*T,k[O].weight=x[O].all}return null===(t=e.onLayoutEnd)||void 0===t||t.call(e),{nodes:k,edges:this.edges}}e.onLayoutEnd&&e.onLayoutEnd()},e.prototype.topologyOrdering=function(t){void 0===t&&(t=!1);var e=this,n=e.degrees,r=e.edges,i=e.nodes,o=(0,a.clone)(i),s=e.nodeMap,u=[o[0]],c=[i[0]],l=[],f=i.length;l[0]=!0,function(t,e,n,r){t.forEach((function(e,n){t[n].children=[],t[n].parent=[]})),r?e.forEach((function(e){var r=(0,a.getEdgeTerminal)(e,"source"),i=(0,a.getEdgeTerminal)(e,"target"),o=0;r&&(o=n[r]);var s=0;i&&(s=n[i]);var u=t[o].children,c=t[s].parent;u.push(t[s].id),c.push(t[o].id)})):e.forEach((function(e){var r=(0,a.getEdgeTerminal)(e,"source"),i=(0,a.getEdgeTerminal)(e,"target"),o=0;r&&(o=n[r]);var s=0;i&&(s=n[i]);var u=t[o].children,c=t[s].children;u.push(t[s].id),c.push(t[o].id)}))}(o,r,s,t);var d=0;return o.forEach((function(t,e){if(0!==e)if(e!==f-1&&n[e].all===n[e+1].all&&!function(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=(0,a.getEdgeTerminal)(n[i],"source"),s=(0,a.getEdgeTerminal)(n[i],"target");if(t.id===o&&e.id===s||e.id===o&&t.id===s)return!0}return!1}(u[d],t,r)||l[e]){for(var h=u[d].children,p=!1,g=0;g<h.length;g++){var v=s[h[g]];if(n[v].all===n[e].all&&!l[v]){u.push(o[v]),c.push(i[s[o[v].id]]),l[v]=!0,p=!0;break}}for(var m=0;!p&&(l[m]||(u.push(o[m]),c.push(i[s[o[m].id]]),l[m]=!0,p=!0),++m!==f););}else u.push(t),c.push(i[s[t.id]]),l[e]=!0,d++})),c},e.prototype.degreeOrdering=function(){var t=this.nodes,e=[],n=this.degrees;return t.forEach((function(t,r){t.degree=n[r].all,e.push(t)})),e.sort(s),e},e.prototype.getType=function(){return"circular"},e}(o.Base);e.CircularLayout=u},3861:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ComboCombinedLayout=void 0;var a=n(6470),s=n(2329),u=n(9784),c=n(2584),l=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.nodes=[],n.edges=[],n.combos=[],n.comboEdges=[],n.comboPadding=10,n.comboTrees=[],n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}else t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){var t,e=this,n=e.nodes,r=e.edges,i=e.combos,s=e.comboEdges,l=e.center,f={};n.forEach((function(t){f[t.id]=t}));var d={};i.forEach((function(t){d[t.id]=t}));var h=e.getInnerGraphs(f),p=[],g=[],v={},m=!0;this.comboTrees.forEach((function(t){var e=h[t.id],n=o(o({},t),{x:e.x||d[t.id].x,y:e.y||d[t.id].y,fx:e.fx||d[t.id].fx,fy:e.fy||d[t.id].fy,mass:e.mass||d[t.id].mass,size:e.size});g.push(n),isNaN(n.x)||0===n.x||isNaN(n.y)||0===n.y?(n.x=100*Math.random(),n.y=100*Math.random()):m=!1,p.push(t.id),(0,u.traverseTreeUp)(t,(function(e){return e.id!==t.id&&(v[e.id]=t.id),!0}))})),n.forEach((function(t){if(!t.comboId||!d[t.comboId]){var e=o({},t);g.push(e),isNaN(e.x)||0===e.x||isNaN(e.y)||0===e.y?(e.x=100*Math.random(),e.y=100*Math.random()):m=!1,p.push(t.id)}}));var y=[];if(r.concat(s).forEach((function(t){var e=v[t.source]||t.source,n=v[t.target]||t.target;e!==n&&p.includes(e)&&p.includes(n)&&y.push({source:e,target:n})})),null==g?void 0:g.length){if(1===g.length)g[0].x=l[0],g[0].y=l[1];else{var b={nodes:g,edges:y},x=this.outerLayout||new c.GForceLayout({gravity:1,factor:4,linkDistance:function(t,e,n){var r,i,o=(((null===(r=e.size)||void 0===r?void 0:r[0])||30)+((null===(i=n.size)||void 0===i?void 0:i[0])||30))/2;return Math.min(1.5*o,700)}}),w=null===(t=x.getType)||void 0===t?void 0:t.call(x);x.updateCfg({center:l,kg:5,preventOverlap:!0,animate:!1}),m&&a.FORCE_LAYOUT_TYPE_MAP[w]&&(g.length<100?new c.MDSLayout:new c.GridLayout).layout(b),x.layout(b)}g.forEach((function(t){var e=h[t.id];if(e)e.visited=!0,e.x=t.x,e.y=t.y,e.nodes.forEach((function(e){e.x+=t.x,e.y+=t.y}));else{var n=f[t.id];n&&(n.x=t.x,n.y=t.y)}}))}for(var _=Object.keys(h),E=function(t){var e=_[t],n=h[e];if(!n)return"continue";n.nodes.forEach((function(t){n.visited||(t.x+=n.x||0,t.y+=n.y||0),f[t.id]&&(f[t.id].x=t.x,f[t.id].y=t.y)})),d[e]&&(d[e].x=n.x,d[e].y=n.y)},S=_.length-1;S>=0;S--)E(S);return{nodes:n,edges:r,combos:i,comboEdges:s}},e.prototype.getInnerGraphs=function(t){var e=this,n=e.comboTrees,r=e.nodeSize,i=e.edges,a=e.comboPadding,s=e.spacing,l={},f=this.innerLayout||new c.ConcentricLayout({sortBy:"id"});return f.center=[0,0],f.preventOverlap=!0,f.nodeSpacing=s,(n||[]).forEach((function(e){(0,u.traverseTreeUp)(e,(function(e){var n,s=(null==a?void 0:a(e))||10;if((0,u.isArray)(s)&&(s=Math.max.apply(Math,s)),null===(n=e.children)||void 0===n?void 0:n.length){var c=e.children.map((function(e){if("combo"===e.itemType)return l[e.id];var n=t[e.id]||{};return o(o({},n),e)})),d=c.map((function(t){return t.id})),h={nodes:c,edges:i.filter((function(t){return d.includes(t.source)&&d.includes(t.target)}))},p=1/0;c.forEach((function(t){var e;t.size||(t.size=(null===(e=l[t.id])||void 0===e?void 0:e.size)||(null==r?void 0:r(t))||[30,30]),(0,u.isNumber)(t.size)&&(t.size=[t.size,t.size]),p>t.size[0]&&(p=t.size[0]),p>t.size[1]&&(p=t.size[1])})),f.layout(h);var g=(0,u.getLayoutBBox)(c),v=g.minX,m=g.minY,y=g.maxX,b=g.maxY,x={x:(y+v)/2,y:(b+m)/2};h.nodes.forEach((function(t){t.x-=x.x,t.y-=x.y}));var w=Math.max(y-v,b-m,p)+2*s;l[e.id]={id:e.id,nodes:c,size:[w,w]}}else if("combo"===e.itemType){var _=s?[2*s,2*s]:[30,30];l[e.id]={id:e.id,nodes:[],size:_}}return!0}))})),l},e.prototype.initVals=function(){var t,e,n=this,r=n.nodeSize,i=n.spacing;if(e=(0,u.isNumber)(i)?function(){return i}:(0,u.isFunction)(i)?i:function(){return 0},this.spacing=e,r)if((0,u.isFunction)(r))t=function(t){var n=r(t),i=e(t);return(0,u.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+i)/2:((n||10)+i)/2};else if((0,u.isArray)(r)){var o=(r[0]>r[1]?r[0]:r[1])/2;t=function(t){return o+e(t)/2}}else{var a=r/2;t=function(t){return a+e(t)/2}}else t=function(t){var n=e(t);return t.size?(0,u.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+n)/2:(0,u.isObject)(t.size)?((t.size.width>t.size.height?t.size.width:t.size.height)+n)/2:(t.size+n)/2:10+n/2};this.nodeSize=t;var s,c=n.comboPadding;s=(0,u.isNumber)(c)?function(){return c}:(0,u.isArray)(c)?function(){return Math.max.apply(null,c)}:(0,u.isFunction)(c)?c:function(){return 0},this.comboPadding=s},e.prototype.getType=function(){return"comboCombined"},e}(s.Base);e.ComboCombinedLayout=l},6590:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ComboForceLayout=void 0;var o=n(2329),a=n(9784),s=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},e&&0!==e.length){if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}else t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var r=t.center,i=t.velocityDecay,o=t.comboMap;t.previousLayouted||t.initPos(o);for(var s=function(n){var r=[];e.forEach((function(t,e){r[e]={x:0,y:0}})),t.applyCalculate(r),t.applyComboCenterForce(r),e.forEach((function(t,e){(0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)&&(t.x+=r[e].x*i,t.y+=r[e].y*i)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<n;u++)s();var c=[0,0];e.forEach((function(t){(0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)&&(c[0]+=t.x,c[1]+=t.y)})),c[0]/=e.length,c[1]/=e.length;var l=[r[0]-c[0],r[1]-c[1]];e.forEach((function(t,e){(0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)&&(t.x+=l[0],t.y+=l[1])})),t.combos.forEach((function(t){var e=o[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0},e.prototype.initVals=function(){var t=this,e=t.edges,n=t.nodes,r=t.combos,i={},o={},s={};n.forEach((function(t,e){o[t.id]=t,s[t.id]=e})),t.nodeMap=o,t.indexMap=s;var u={};r.forEach((function(t){u[t.id]=t})),t.oriComboMap=u,t.comboMap=t.getComboMap();var c=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||c,t.preventNodeOverlap=t.preventNodeOverlap||c;var l=t.collideStrength;l&&(t.comboCollideStrength=l,t.nodeCollideStrength=l),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(var f=0;f<e.length;++f){var d=(0,a.getEdgeTerminal)(e[f],"source"),h=(0,a.getEdgeTerminal)(e[f],"target");i[d]?i[d]++:i[d]=1,i[h]?i[h]++:i[h]=1}var p=[];for(f=0;f<e.length;++f)d=(0,a.getEdgeTerminal)(e[f],"source"),h=(0,a.getEdgeTerminal)(e[f],"target"),p[f]=i[d]/(i[d]+i[h]);this.bias=p;var g,v,m=t.nodeSize,y=t.nodeSpacing;if(v=(0,a.isNumber)(y)?function(){return y}:(0,a.isFunction)(y)?y:function(){return 0},this.nodeSpacing=v,m)if((0,a.isFunction)(m))g=function(t){return m(t)};else if((0,a.isArray)(m)){var b=(m[0]>m[1]?m[0]:m[1])/2;g=function(t){return b}}else{var x=m/2;g=function(t){return x}}else g=function(t){return t.size?(0,a.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:(0,a.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2:t.size/2:10};this.nodeSize=g;var w,_=t.comboSpacing;w=(0,a.isNumber)(_)?function(){return _}:(0,a.isFunction)(_)?_:function(){return 0},this.comboSpacing=w;var E,S=t.comboPadding;E=(0,a.isNumber)(S)?function(){return S}:(0,a.isArray)(S)?function(){return Math.max.apply(null,S)}:(0,a.isFunction)(S)?S:function(){return 0},this.comboPadding=E;var C,k=this.linkDistance;k||(k=10),C=(0,a.isNumber)(k)?function(t){return k}:k,this.linkDistance=C;var M,O=this.edgeStrength;O||(O=1),M=(0,a.isNumber)(O)?function(t){return O}:O,this.edgeStrength=M;var T,A=this.nodeStrength;A||(A=30),T=(0,a.isNumber)(A)?function(t){return A}:A,this.nodeStrength=T},e.prototype.initPos=function(t){this.nodes.forEach((function(e,n){var r=e.comboId,i=t[r];r&&i?(e.x=i.cx+100/(n+1),e.y=i.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))},e.prototype.getComboMap=function(){var t=this,e=t.nodeMap,n=t.comboTrees,r=t.oriComboMap,i={};return(n||[]).forEach((function(n){var o=[];(0,a.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;if(!r[n.id])return!0;if(void 0===i[n.id]){var s={id:n.id,name:n.id,cx:0,cy:0,count:0,depth:t.oriComboMap[n.id].depth||0,children:[]};i[n.id]=s}var u=n.children;u&&u.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;o.push(t)}));var c=i[n.id];if(c.cx=0,c.cy=0,0===o.length){c.empty=!0;var l=r[n.id];c.cx=l.x,c.cy=l.y}return o.forEach((function(t){if(c.count++,"node"!==t.itemType){var n=i[t.id];return(0,a.isNumber)(n.cx)&&(c.cx+=n.cx),void((0,a.isNumber)(n.cy)&&(c.cy+=n.cy))}var r=e[t.id];r&&((0,a.isNumber)(r.x)&&(c.cx+=r.x),(0,a.isNumber)(r.y)&&(c.cy+=r.y))})),c.cx/=c.count||1,c.cy/=c.count||1,c.children=o,!0}))})),i},e.prototype.applyComboCenterForce=function(t){var e=this,n=e.gravity,r=e.comboGravity||n,i=this.alpha,o=e.comboTrees,s=e.indexMap,u=e.nodeMap,c=e.comboMap;(o||[]).forEach((function(e){(0,a.traverseTreeUp)(e,(function(e){if("node"===e.itemType)return!0;if(!c[e.id])return!0;var n=c[e.id],o=(n.depth+1)/10*.5,l=n.cx,f=n.cy;return n.cx=0,n.cy=0,n.children.forEach((function(e){if("node"!==e.itemType){var d=c[e.id];return d&&(0,a.isNumber)(d.cx)&&(n.cx+=d.cx),void(d&&(0,a.isNumber)(d.cy)&&(n.cy+=d.cy))}var h=u[e.id],p=h.x-l||.005,g=h.y-f||.005,v=Math.sqrt(p*p+g*g),m=s[h.id],y=r*i/v*o;t[m].x-=p*y,t[m].y-=g*y,(0,a.isNumber)(h.x)&&(n.cx+=h.x),(0,a.isNumber)(h.y)&&(n.cy+=h.y)})),n.cx/=n.count||1,n.cy/=n.count||1,!0}))}))},e.prototype.applyCalculate=function(t){var e=this,n=e.comboMap,r=e.nodes,i={};r.forEach((function(t,e){r.forEach((function(n,r){if(!(e<r)){var o=t.x-n.x||.005,a=t.y-n.y||.005,s=o*o+a*a,u=Math.sqrt(s);s<1&&(s=u),i["".concat(t.id,"-").concat(n.id)]={vx:o,vy:a,vl2:s,vl:u},i["".concat(n.id,"-").concat(t.id)]={vl2:s,vl:u,vx:-o,vy:-a}}}))})),e.updateComboSizes(n),e.calRepulsive(t,i),e.calAttractive(t,i),e.preventComboOverlap&&e.comboNonOverlapping(t,n)},e.prototype.updateComboSizes=function(t){var e=this,n=e.comboTrees,r=e.nodeMap,i=e.nodeSize,o=e.comboSpacing,s=e.comboPadding;(n||[]).forEach((function(n){var u=[];(0,a.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;var c=t[n.id];if(!c)return!1;var l=n.children;l&&l.forEach((function(e){(t[e.id]||r[e.id])&&u.push(e)})),c.minX=1/0,c.minY=1/0,c.maxX=-1/0,c.maxY=-1/0,u.forEach((function(t){if("node"!==t.itemType)return!0;var e=r[t.id];if(!e)return!0;var n=i(e),o=e.x-n,a=e.y-n,s=e.x+n,u=e.y+n;c.minX>o&&(c.minX=o),c.minY>a&&(c.minY=a),c.maxX<s&&(c.maxX=s),c.maxY<u&&(c.maxY=u)}));var f=e.oriComboMap[n.id].size||10;(0,a.isArray)(f)&&(f=f[0]);var d=Math.max(c.maxX-c.minX,c.maxY-c.minY,f);return c.r=d/2+o(c)/2+s(c),!0}))}))},e.prototype.comboNonOverlapping=function(t,e){var n=this,r=n.comboTree,i=n.comboCollideStrength,o=n.indexMap,s=n.nodeMap;(0,a.traverseTreeUp)(r,(function(n){if(!e[n.id]&&!s[n.id]&&"comboTreeRoot"!==n.id)return!1;var r=n.children;return r&&r.length>1&&r.forEach((function(n,a){if("node"===n.itemType)return!1;var u=e[n.id];u&&r.forEach((function(r,c){if(a<=c)return!1;if("node"===r.itemType)return!1;var l=e[r.id];if(!l)return!1;var f=u.cx-l.cx||.005,d=u.cy-l.cy||.005,h=f*f+d*d,p=u.r||1,g=l.r||1,v=p+g,m=g*g,y=p*p;if(h<v*v){var b=n.children;if(!b||0===b.length)return!1;var x=r.children;if(!x||0===x.length)return!1;var w=Math.sqrt(h),_=(v-w)/w*i,E=f*_,S=d*_,C=m/(y+m),k=1-C;b.forEach((function(e){if("node"!==e.itemType)return!1;if(s[e.id]){var n=o[e.id];x.forEach((function(e){if("node"!==e.itemType)return!1;if(!s[e.id])return!1;var r=o[e.id];t[n].x+=E*C,t[n].y+=S*C,t[r].x-=E*k,t[r].y-=S*k}))}}))}}))})),!0}))},e.prototype.calRepulsive=function(t,e){var n=this,r=n.nodes,i=n.width*n.optimizeRangeFactor,o=n.nodeStrength,a=n.alpha,s=n.nodeCollideStrength,u=n.preventNodeOverlap,c=n.nodeSize,l=n.nodeSpacing,f=n.depthRepulsiveForceScale,d=n.center;r.forEach((function(h,p){if(h.x&&h.y){if(d){var g=n.gravity,v=h.x-d[0]||.005,m=h.y-d[1]||.005,y=Math.sqrt(v*v+m*m);t[p].x-=v*g*a/y,t[p].y-=m*g*a/y}r.forEach((function(n,r){if(p!==r&&n.x&&n.y){var d=e["".concat(h.id,"-").concat(n.id)],g=d.vl2,v=d.vl;if(!(v>i)){var m=e["".concat(h.id,"-").concat(n.id)],y=m.vx,b=m.vy,x=Math.log(Math.abs(n.depth-h.depth)/10)+1||1;x=x<1?1:x,n.comboId!==h.comboId&&(x+=1);var w=x?Math.pow(f,x):1,_=o(n)*a/g*w;if(t[p].x+=y*_,t[p].y+=b*_,p<r&&u){var E=c(h)+l(h)||1,S=c(n)+l(n)||1,C=E+S;if(g<C*C){var k=(C-v)/v*s,M=S*S,O=M/(E*E+M),T=y*k,A=b*k;t[p].x+=T*O,t[p].y+=A*O,O=1-O,t[r].x-=T*O,t[r].y-=A*O}}}}}))}}))},e.prototype.calAttractive=function(t,e){var n=this,r=n.edges,i=n.linkDistance,o=n.alpha,s=n.edgeStrength,u=n.bias,c=n.depthAttractiveForceScale;r.forEach((function(r,l){var f=(0,a.getEdgeTerminal)(r,"source"),d=(0,a.getEdgeTerminal)(r,"target");if(f&&d&&f!==d){var h=n.indexMap[f],p=n.indexMap[d],g=n.nodeMap[f],v=n.nodeMap[d];if(g&&v){var m=g.depth===v.depth?0:Math.log(Math.abs(g.depth-v.depth)/10);g.comboId===v.comboId&&(m/=2);var y=m?Math.pow(c,m):1;if(g.comboId!==v.comboId&&1===y?y=c/2:g.comboId===v.comboId&&(y=2),(0,a.isNumber)(v.x)&&(0,a.isNumber)(g.x)&&(0,a.isNumber)(v.y)&&(0,a.isNumber)(g.y)){var b=e["".concat(d,"-").concat(f)],x=b.vl,w=b.vx,_=b.vy,E=(x-i(r))/x*o*s(r)*y,S=w*E,C=_*E,k=u[l];t[p].x-=S*k,t[p].y-=C*k,t[h].x+=S*(1-k),t[h].y+=C*(1-k)}}}}))},e.prototype.getType=function(){return"comboForce"},e}(o.Base);e.ComboForceLayout=s},3281:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ConcentricLayout=void 0;var o=n(9784),a=function(t){function e(e){var n=t.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=1.5*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var t,e,n=this,r=n.nodes,i=n.edges,a=r.length;if(0!==a){n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var s=n.center;if(1===a)return r[0].x=s[0],r[0].y=s[1],void(null===(e=n.onLayoutEnd)||void 0===e||e.call(n));var u,c=n.nodeSize,l=n.nodeSpacing,f=[],d=0;u=(0,o.isArray)(c)?Math.max(c[0],c[1]):c,(0,o.isArray)(l)?d=Math.max(l[0],l[1]):(0,o.isNumber)(l)&&(d=l),r.forEach((function(t){f.push(t);var e=u;(0,o.isArray)(t.size)?e=Math.max(t.size[0],t.size[1]):(0,o.isNumber)(t.size)?e=t.size:(0,o.isObject)(t.size)&&(e=Math.max(t.size.width,t.size.height)),u=Math.max(u,e),(0,o.isFunction)(l)&&(d=Math.max(l(t),d))})),n.clockwise=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise;var h={},p={};if(f.forEach((function(t,e){h[t.id]=t,p[t.id]=e})),!("degree"!==n.sortBy&&(0,o.isString)(n.sortBy)&&void 0!==f[0][n.sortBy]||(n.sortBy="degree",(0,o.isNumber)(r[0].degree)))){var g=(0,o.getDegree)(r.length,p,i);f.forEach((function(t,e){t.degree=g[e].all}))}f.sort((function(t,e){return e[n.sortBy]-t[n.sortBy]})),n.maxValueNode=f[0],n.maxLevelDiff=n.maxLevelDiff||n.maxValueNode[n.sortBy]/4;var v=[[]],m=v[0];f.forEach((function(t){if(m.length>0){var e=Math.abs(m[0][n.sortBy]-t[n.sortBy]);n.maxLevelDiff&&e>=n.maxLevelDiff&&(m=[],v.push(m))}m.push(t)}));var y=u+(d||n.minNodeSpacing);if(!n.preventOverlap){var b=v.length>0&&v[0].length>1,x=(Math.min(n.width,n.height)/2-y)/(v.length+(b?1:0));y=Math.min(y,x)}var w=0;if(v.forEach((function(t){var e=n.sweep;void 0===e&&(e=2*Math.PI-2*Math.PI/t.length);var r=t.dTheta=e/Math.max(1,t.length-1);if(t.length>1&&n.preventOverlap){var i=Math.cos(r)-Math.cos(0),o=Math.sin(r)-Math.sin(0),a=Math.sqrt(y*y/(i*i+o*o));w=Math.max(a,w)}t.r=w,w+=y})),n.equidistant){for(var _=0,E=0,S=0;S<v.length;S++){var C=v[S].r-E;_=Math.max(_,C)}E=0,v.forEach((function(t,e){0===e&&(E=t.r),t.r=E,E+=_}))}return v.forEach((function(t){var e=t.dTheta,r=t.r;t.forEach((function(t,i){var o=n.startAngle+(n.clockwise?1:-1)*e*i;t.x=s[0]+r*Math.cos(o),t.y=s[1]+r*Math.sin(o)}))})),n.onLayoutEnd&&n.onLayoutEnd(),{nodes:r,edges:i}}null===(t=n.onLayoutEnd)||void 0===t||t.call(n)},e.prototype.getType=function(){return"concentric"},e}(n(2329).Base);e.ConcentricLayout=a},6470:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FORCE_LAYOUT_TYPE_MAP=e.LAYOUT_MESSAGE=void 0,e.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},e.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},171:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DagreLayout=void 0;var a=o(n(1106)),s=n(9784),u=n(2329),c=n(7652),l=function(t){function e(e){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(t){var e=n.nodes.find((function(e){return e.id===t}));return!e||!1!==e.layout},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},e.prototype.execute=function(){var t,e,n,r=this,i=this,o=i.nodes,u=i.nodeSize,l=i.rankdir,f=i.combos,d=i.begin,h=i.radial,p=i.comboEdges,g=void 0===p?[]:p,v=i.vedges,m=void 0===v?[]:v;if(o){var y,b=i.edges||[],x=new c.Graph({multigraph:!0,compound:!0}),w={};o.forEach((function(t){t.comboId&&(w[t.comboId]=w[t.comboId]||[],w[t.comboId].push(t.id))})),y=u?(0,s.isArray)(u)?function(){return u}:function(){return[u,u]}:function(t){return t.size?(0,s.isArray)(t.size)?t.size:(0,s.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]};var _=(0,s.getFunc)(i.ranksep,50,i.ranksepFunc),E=(0,s.getFunc)(i.nodesep,50,i.nodesepFunc),S=E,C=_;"LR"!==l&&"RL"!==l||(S=_,C=E),x.setDefaultEdgeLabel((function(){return{}})),x.setGraph(i);var k={};this.sortByCombo&&f&&f.forEach((function(t){if(k[t.id]=t,t.collapsed){var e=y(t),n=C(t),r=S(t),i=e[0]+2*r,o=e[1]+2*n;x.setNode(t.id,{width:i,height:o})}t.parentId&&(k[t.parentId]||x.setNode(t.parentId,{}),x.setParent(t.id,t.parentId))})),o.filter((function(t){return!1!==t.layout})).forEach((function(t){var e=y(t),n=C(t),i=S(t),o=e[0]+2*i,a=e[1]+2*n,u=t.layer;(0,s.isNumber)(u)?x.setNode(t.id,{width:o,height:a,layer:u}):x.setNode(t.id,{width:o,height:a}),r.sortByCombo&&t.comboId&&(k[t.comboId]||(k[t.comboId]={id:t.comboId},x.setNode(t.comboId,{})),x.setParent(t.id,t.comboId))})),b.forEach((function(t){var e=(0,s.getEdgeTerminal)(t,"source"),n=(0,s.getEdgeTerminal)(t,"target");r.layoutNode(e)&&r.layoutNode(n)&&x.setEdge(e,n,{weight:t.weight||1})})),null===(t=null==g?void 0:g.concat(m||[]))||void 0===t||t.forEach((function(t){var e,n,r=t.source,i=t.target,o=(null===(e=k[r])||void 0===e?void 0:e.collapsed)?[r]:w[r]||[r],a=(null===(n=k[i])||void 0===n?void 0:n.collapsed)?[i]:w[i]||[i];o.forEach((function(e){a.forEach((function(n){x.setEdge(e,n,{weight:t.weight||1})}))}))}));var M=void 0;(null===(e=i.preset)||void 0===e?void 0:e.nodes)&&(M=new c.Graph({multigraph:!0,compound:!0}),i.preset.nodes.forEach((function(t){null==M||M.setNode(t.id,t)}))),a.default.layout(x,{prevGraph:M,edgeLabelSpace:i.edgeLabelSpace,keepNodeOrder:Boolean(!!i.nodeOrder),nodeOrder:i.nodeOrder});var O=[0,0];if(d){var T=1/0,A=1/0;x.nodes().forEach((function(t){var e=x.node(t);T>e.x&&(T=e.x),A>e.y&&(A=e.y)})),x.edges().forEach((function(t){var e;null===(e=x.edge(t).points)||void 0===e||e.forEach((function(t){T>t.x&&(T=t.x),A>t.y&&(A=t.y)}))})),O[0]=d[0]-T,O[1]=d[1]-A}if(h){var N=this,I=N.focusNode,P=N.ranksep,D=N.getRadialPos,L=(0,s.isString)(I)?I:null==I?void 0:I.id,R=L?null===(n=x.node(L))||void 0===n?void 0:n._rank:0,j=[],B="LR"===l||"RL"===l,F=B?"y":"x",z=B?"height":"width",$=1/0,G=-1/0;x.nodes().forEach((function(t){var e=x.node(t),n=o.findIndex((function(e){return e.id===t}));if(o[n]){var r=E(o[n]);if(0===R)j[e._rank]||(j[e._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),j[e._rank].nodes.push(t),j[e._rank].totalWidth+=2*r+e[z],j[e._rank].maxSize<Math.max(e.width,e.height)&&(j[e._rank].maxSize=Math.max(e.width,e.height));else{var i=e._rank-R;if(0===i)j[i]||(j[i]={nodes:[],totalWidth:0,maxSize:-1/0}),j[i].nodes.push(t),j[i].totalWidth+=2*r+e[z],j[i].maxSize<Math.max(e.width,e.height)&&(j[i].maxSize=Math.max(e.width,e.height));else{var a=Math.abs(i);j[a]||(j[a]={left:[],right:[],totalWidth:0,maxSize:-1/0}),j[a].totalWidth+=2*r+e[z],j[a].maxSize<Math.max(e.width,e.height)&&(j[a].maxSize=Math.max(e.width,e.height)),i<0?j[a].left.push(t):j[a].right.push(t)}}var s=e[F]-e[z]/2-r,u=e[F]+e[z]/2+r;s<$&&($=s),u>G&&(G=u)}}));var V=P||50,U={},W=(G-$)/.9,H=[.5*($+G-W),.5*($+G+W)],Y=function(t,e,n,r){void 0===n&&(n=-1/0),void 0===r&&(r=[0,1]);var i=n;return t.forEach((function(t){var n=x.node(t);U[t]=e;var a=D(n[F],H,W,e,r),s=a.x,u=a.y,c=o.findIndex((function(e){return e.id===t}));if(o[c]){o[c].x=s+O[0],o[c].y=u+O[1],o[c]._order=n._order;var l=_(o[c]);i<l&&(i=l)}})),i},X=!0;j.forEach((function(t){var e,n,r,i,a,s,u;if((null===(e=null==t?void 0:t.nodes)||void 0===e?void 0:e.length)||(null===(n=null==t?void 0:t.left)||void 0===n?void 0:n.length)||(null===(r=null==t?void 0:t.right)||void 0===r?void 0:r.length)){if(X&&1===t.nodes.length){var c=o.findIndex((function(e){return e.id===t.nodes[0]}));if(c<=-1)return;return o[c].x=O[0],o[c].y=O[1],U[t.nodes[0]]=0,V=_(o[c]),void(X=!1)}V=Math.max(V,t.totalWidth/(2*Math.PI));var l=-1/0;if(0===R||(null===(i=t.nodes)||void 0===i?void 0:i.length))l=Y(t.nodes,V,l,[0,1]);else{var f=(null===(a=t.left)||void 0===a?void 0:a.length)/((null===(s=t.left)||void 0===s?void 0:s.length)+(null===(u=t.right)||void 0===u?void 0:u.length));l=Y(t.left,V,l,[0,f]),l=Y(t.right,V,l,[f+.05,1])}V+=l,X=!1,t.maxSize}})),x.edges().forEach((function(t){var e,n,r,o=x.edge(t),a=b.findIndex((function(e){var n=(0,s.getEdgeTerminal)(e,"source"),r=(0,s.getEdgeTerminal)(e,"target");return n===t.v&&r===t.w}));if(!(a<=-1)&&i.edgeLabelSpace&&i.controlPoints&&"loop"!==b[a].type){var u="x"===F?"y":"x",c=null===(e=null==o?void 0:o.points)||void 0===e?void 0:e.slice(1,o.points.length-1),l=[],f=null===(n=x.node(t.v))||void 0===n?void 0:n[u],d=f-(null===(r=x.node(t.w))||void 0===r?void 0:r[u]),h=U[t.v],p=h-U[t.w];null==c||c.forEach((function(t){var e=(t[u]-f)/d*p+h,n=D(t[F],H,W,e);l.push({x:n.x+O[0],y:n.y+O[1]})})),b[a].controlPoints=l}}))}else x.nodes().forEach((function(t){var e=x.node(t);if(e){var n=o.find((function(e){return e.id===t}));n||(n=null==f?void 0:f.find((function(e){return e.id===t}))),n&&(n.x=e.x+O[0],n.y=e.y+O[1],n._order=e._order)}})),x.edges().forEach((function(t){var e,n=x.edge(t),r=b.findIndex((function(e){var n=(0,s.getEdgeTerminal)(e,"source"),r=(0,s.getEdgeTerminal)(e,"target");return n===t.v&&r===t.w}));r<=-1||i.edgeLabelSpace&&i.controlPoints&&"loop"!==b[r].type&&(b[r].controlPoints=null===(e=null==n?void 0:n.points)||void 0===e?void 0:e.slice(1,n.points.length-1),b[r].controlPoints.forEach((function(t){t.x+=O[0],t.y+=O[1]})))}));return i.onLayoutEnd&&i.onLayoutEnd(),{nodes:o,edges:b}}},e.prototype.getRadialPos=function(t,e,n,r,i){void 0===i&&(i=[0,1]);var o=(t-e[0])/n,a=2*(o=o*(i[1]-i[0])+i[0])*Math.PI;return{x:Math.cos(a)*r,y:Math.sin(a)*r}},e.prototype.getType=function(){return"dagre"},e}(u.Base);e.DagreLayout=l},7057:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.DagreCompoundLayout=void 0;var s=n(2329),u=n(1969),c=n(9784),l=function(t){function e(e){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.edgesep=5,n.ranksep=50,n.controlPoints=!0,n.anchorPoint=!0,n.nodes=[],n.edges=[],n.combos=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},e.prototype.init=function(t){var e=t.hiddenNodes||[],n=t.hiddenEdges||[],r=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(e)),this.edges=this.getDataByOrder((t.edges||[]).concat(n)),this.combos=(t.combos||[]).concat(r.map((function(t){return o(o({},t),{collapsed:!0})})))},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges;if(e){var r=t.getLayoutConfig(),i=r.graphDef,o=r.graphOption,a=r.graphSettings,s=(0,u.buildGraph)(i,o,a),c=(0,u.flatGraph)(s,!0);return this.updatePosition(c),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}},e.prototype.getNodePath=function(t){var e=this.nodes,n=this.combos,r=e.find((function(e){return e.id===t})),i=function(t,e){void 0===e&&(e=[]);var r=n.find((function(e){return e.id===t}));return r?(e.unshift(t),r.parentId?i(r.parentId,e):e):e};return r&&r.comboId?i(r.comboId,[t]):[t]},e.prototype.getLayoutConfig=function(){var t,e,n,r,i=this,s=i.nodes,l=i.edges,f=i.combos,d=i.nodeSize,h=i.rankdir,p=i.align,g=i.edgesep,v=i.nodesep,m=i.ranksep,y=i.settings,b=(f||[]).reduce((function(t,e){var n=s.filter((function(t){return t.comboId===e.id})).map((function(t){return t.id})),r=(f||[]).filter((function(t){return t.parentId===e.id})).map((function(t){return t.id}));return(n.length||r.length)&&(t[e.id]=a(a([],n,!0),r,!0)),t}),{});r=d?(0,c.isArray)(d)?function(){return d}:function(){return[d,d]}:function(t){return t&&t.size?(0,c.isArray)(t.size)?t.size:(0,c.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]};var x,w=(x=null==f?void 0:f[0])&&x.size?(0,c.isArray)(x.size)?x.size:[x.size,x.size]:[80,40],_=w[0],E=w[1],S=null===(e=null===(t=i.graphSettings)||void 0===t?void 0:t.subScene)||void 0===e?void 0:e.meta,C=(null===(n=f.find((function(t){return!t.collapsed})))||void 0===n?void 0:n.padding)||[20,20,20,20],k=C[0],M=C[1],O=C[2],T=C[3],A={compound:b,nodes:a([],(s||[]).map((function(t){var e=r(t),n=e[0],i=e[1];return o(o({},t),{width:n,height:i})})),!0),edges:a([],(l||[]).map((function(t){return o(o({},t),{v:t.source,w:t.target})})),!0)},N={expanded:(f||[]).filter((function(t){return!t.collapsed})).map((function(t){return t.id}))},I={graph:{meta:{align:p,rankDir:h,nodeSep:v,edgeSep:g,rankSep:m}},subScene:{meta:{paddingTop:k||(null==S?void 0:S.paddingTop)||20,paddingRight:M||(null==S?void 0:S.paddingRight)||20,paddingBottom:O||(null==S?void 0:S.paddingBottom)||20,paddingLeft:T||(null==S?void 0:S.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:_,height:E}}},P=(0,u.mergeConfig)(y,o({},(0,u.mergeConfig)(I,u.LAYOUT_CONFIG)));return i.graphSettings=P,{graphDef:A,graphOption:N,graphSettings:P}},e.prototype.updatePosition=function(t){var e=t.nodes,n=t.edges;this.updateNodePosition(e,n),this.updateEdgePosition(e,n)},e.prototype.getBegin=function(t,e){var n=this.begin,r=[0,0];if(n){var i=1/0,o=1/0;t.forEach((function(t){i>t.x&&(i=t.x),o>t.y&&(o=t.y)})),e.forEach((function(t){t.points.forEach((function(t){i>t.x&&(i=t.x),o>t.y&&(o=t.y)}))})),r[0]=n[0]-i,r[1]=n[1]-o}return r},e.prototype.updateNodePosition=function(t,e){var n=this,r=n.combos,i=n.nodes,o=n.edges,a=n.anchorPoint,s=n.graphSettings,c=this.getBegin(t,e);t.forEach((function(t){var n,l=t.x,f=t.y,d=t.id,h=t.type,p=t.coreBox;if(h===u.HierarchyNodeType.META&&d!==u.ROOT_NAME){var g=r.findIndex((function(t){return t.id===d})),v=null===(n=null==s?void 0:s.subScene)||void 0===n?void 0:n.meta;r[g].offsetX=l+c[0],r[g].offsetY=f+c[1],r[g].fixSize=[p.width,p.height],r[g].fixCollapseSize=[p.width,p.height],t.expanded?r[g].padding=[null==v?void 0:v.paddingTop,null==v?void 0:v.paddingRight,null==v?void 0:v.paddingBottom,null==v?void 0:v.paddingLeft]:r[g].padding=[0,0,0,0]}else if(h===u.HierarchyNodeType.OP&&(g=i.findIndex((function(t){return t.id===d})),i[g].x=l+c[0],i[g].y=f+c[1],a)){var m=[],y=e.filter((function(t){return t.v===d})),b=e.filter((function(t){return t.w===d}));y.length>0&&y.forEach((function(e){var n=e.points[0],r=(n.x-l)/t.width+.5,i=(n.y-f)/t.height+.5;m.push([r,i]),e.baseEdgeList.forEach((function(t){var e=o.find((function(e){return e.source===t.v&&e.target===t.w}));e&&(e.sourceAnchor=m.length-1)}))})),b.length>0&&b.forEach((function(e){var n=e.points[e.points.length-1],r=(n.x-l)/t.width+.5,i=(n.y-f)/t.height+.5;m.push([r,i]),e.baseEdgeList.forEach((function(t){var e=o.find((function(e){return e.source===t.v&&e.target===t.w}));e&&(e.targetAnchor=m.length-1)}))})),i[g].anchorPoints=m.length>0?m:i[g].anchorPoints||[]}}))},e.prototype.updateEdgePosition=function(t,e){var n=this,r=n.combos,i=n.edges,s=n.controlPoints,c=this.getBegin(t,e);s&&(r.forEach((function(t){t.inEdges=[],t.outEdges=[]})),i.forEach((function(e){var i,s,l,f,d=t.find((function(t){return t.id===e.source})),h=t.find((function(t){return t.id===e.target})),p=[],g=[];if(d&&h)g=(0,u.getEdges)(null==d?void 0:d.id,null==h?void 0:h.id,t);else if(!d||!h){var v=n.getNodePath(e.source),m=n.getNodePath(e.target),y=v.reverse().slice(d?0:1).find((function(e){return t.find((function(t){return t.id===e}))})),b=m.reverse().slice(h?0:1).find((function(e){return t.find((function(t){return t.id===e}))}));d=t.find((function(t){return t.id===y})),h=t.find((function(t){return t.id===b})),g=(0,u.getEdges)(null==d?void 0:d.id,null==h?void 0:h.id,t,{v:e.source,w:e.target})}if(p=(p=g.reduce((function(t,e){return a(a([],t,!0),e.points.map((function(t){return o(o({},t),{x:t.x+c[0],y:t.y+c[1]})})),!0)}),[])).slice(1,-1),e.controlPoints=p,(null==h?void 0:h.type)===u.NodeType.META){var x=r.findIndex((function(t){return t.id===(null==h?void 0:h.id)}));if(!r[x]||(null===(i=r[x].inEdges)||void 0===i?void 0:i.some((function(t){return t.source===d.id&&t.target===h.id}))))return;null===(s=r[x].inEdges)||void 0===s||s.push({source:d.id,target:h.id,controlPoints:p})}if((null==d?void 0:d.type)===u.NodeType.META){if(x=r.findIndex((function(t){return t.id===(null==d?void 0:d.id)})),!r[x]||(null===(l=r[x].outEdges)||void 0===l?void 0:l.some((function(t){return t.source===d.id&&t.target===h.id}))))return;null===(f=r[x].outEdges)||void 0===f||f.push({source:d.id,target:h.id,controlPoints:p})}})))},e.prototype.getType=function(){return"dagreCompound"},e.prototype.getDataByOrder=function(t){return t.every((function(t){return void 0!==t.layoutOrder}))||t.forEach((function(t,e){t.layoutOrder=e})),t.sort((function(t,e){return t.layoutOrder-e.layoutOrder}))},e}(s.Base);e.DagreCompoundLayout=l},7652:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(n(9787).Graph);e.Graph=o},1106:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(5236)),o=n(9209);e.default={layout:i.default,util:{time:o.time,notime:o.notime}}},8029:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(773));e.default={run:function(t){var e="greedy"===t.graph().acyclicer?(0,i.default)(t,function(t){return function(e){var n;return(null===(n=t.edge(e))||void 0===n?void 0:n.weight)||1}}(t)):function(t){var e=[],n={},r={},i=function(o){var a;r[o]||(r[o]=!0,n[o]=!0,null===(a=t.outEdges(o))||void 0===a||a.forEach((function(t){n[t.w]?e.push(t):i(t.w)})),delete n[o])};return t.nodes().forEach(i),e}(t);null==e||e.forEach((function(e){var n=t.edge(e);t.removeEdgeObj(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,"rev-".concat(Math.random()))}))},undo:function(t){t.edges().forEach((function(e){var n=t.edge(e);if(n.reversed){t.removeEdgeObj(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},1500:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9209),i=function(t,e,n,i,o,a){var s={rank:a,borderType:e,width:0,height:0},u=o[e][a-1],c=(0,r.addDummyNode)(t,"border",s,n);o[e][a]=c,t.setParent(c,i),u&&t.setEdge(u,c,{weight:1})};e.default=function(t){var e,n=function(e){var r=t.children(e),o=t.node(e);if((null==r?void 0:r.length)&&r.forEach((function(t){return n(t)})),o.hasOwnProperty("minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,s=o.maxRank+1;a<s;a+=1)i(t,"borderLeft","_bl",e,o,a),i(t,"borderRight","_br",e,o,a)}};null===(e=t.children())||void 0===e||e.forEach((function(t){return n(t)}))}},5279:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.nodes().forEach((function(e){r(t.node(e))})),t.edges().forEach((function(e){r(t.edge(e))}))},r=function(t){var e=t.width;t.width=t.height,t.height=e},i=function(t){(null==t?void 0:t.y)&&(t.y=-t.y)},o=function(t){var e=t.x;t.x=t.y,t.y=e};e.default={adjust:function(t){var e,r=null===(e=t.graph().rankdir)||void 0===e?void 0:e.toLowerCase();"lr"!==r&&"rl"!==r||n(t)},undo:function(t){var e,r=null===(e=t.graph().rankdir)||void 0===e?void 0:e.toLowerCase();"bt"!==r&&"rl"!==r||function(t){t.nodes().forEach((function(e){i(t.node(e))})),t.edges().forEach((function(e){var n,r=t.edge(e);null===(n=r.points)||void 0===n||n.forEach((function(t){return i(t)})),r.hasOwnProperty("y")&&i(r)}))}(t),"lr"!==r&&"rl"!==r||(function(t){t.nodes().forEach((function(e){o(t.node(e))})),t.edges().forEach((function(e){var n,r=t.edge(e);null===(n=r.points)||void 0===n||n.forEach((function(t){return o(t)})),r.hasOwnProperty("x")&&o(r)}))}(t),n(t))}}},5532:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if("next"!==t&&"prev"!==t)return e},r=function(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev},i=function(){function t(){var t={};t.prev=t,t.next=t.prev,this.shortcut=t}return t.prototype.dequeue=function(){var t=this.shortcut,e=t.prev;if(e&&e!==t)return r(e),e},t.prototype.enqueue=function(t){var e=this.shortcut;t.prev&&t.next&&r(t),t.next=e.next,e.next.prev=t,e.next=t,t.prev=e},t.prototype.toString=function(){for(var t=[],e=this.shortcut,r=e.prev;r!==e;)t.push(JSON.stringify(r,n)),r=null==r?void 0:r.prev;return"[".concat(t.join(", "),"]")},t}();e.default=i},773:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(5532)),s=n(9787),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.default),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.Graph),l=function(){return 1},f=function(t,e,n,r,i){var o,a,s=[];return null===(o=t.inEdges(r.v))||void 0===o||o.forEach((function(r){var o=t.edge(r),a=t.node(r.v);i&&s.push({v:r.v,w:r.w,in:0,out:0}),void 0===a.out&&(a.out=0),a.out-=o,d(e,n,a)})),null===(a=t.outEdges(r.v))||void 0===a||a.forEach((function(r){var i=t.edge(r),o=r.w,a=t.node(o);void 0===a.in&&(a.in=0),a.in-=i,d(e,n,a)})),t.removeNode(r.v),i?s:void 0},d=function(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)};e.default=function(t,e){var n;if(t.nodeCount()<=1)return[];var r=function(t,e){var n=new c,r=0,i=0;t.nodes().forEach((function(t){n.setNode(t,{v:t,in:0,out:0})})),t.edges().forEach((function(t){var o=n.edge(t)||0,a=(null==e?void 0:e(t))||1,s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)}));for(var o=[],a=i+r+3,s=0;s<a;s++)o.push(new u);var l=r+1;return n.nodes().forEach((function(t){d(o,l,n.node(t))})),{buckets:o,zeroIdx:l,graph:n}}(t,e||l);return null===(n=function(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)f(t,e,n,r);for(;r=o.dequeue();)f(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(f(t,e,n,r,!0));break}}return i}(r.graph,r.buckets,r.zeroIdx).map((function(e){return t.outEdges(e.v,e.w)})))||void 0===n?void 0:n.flat()}},5236:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(8029)),a=i(n(6171)),s=i(n(6827)),u=n(9209),c=i(n(3562)),l=i(n(9596)),f=i(n(1500)),d=i(n(5279)),h=i(n(9597)),p=i(n(95)),g=i(n(4956)),v=n(7652),m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],x=["width","height","layer","fixorder"],w={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"],C=function(t){t.edges().forEach((function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={e:e,rank:(t.node(e.w).rank-r.rank)/2+r.rank};(0,u.addDummyNode)(t,"edge-proxy",i,"_ep")}}))},k=function(t){var e=0;t.nodes().forEach((function(n){var r,i,o=t.node(n);o.borderTop&&(o.minRank=null===(r=t.node(o.borderTop))||void 0===r?void 0:r.rank,o.maxRank=null===(i=t.node(o.borderBottom))||void 0===i?void 0:i.rank,e=Math.max(e,o.maxRank||-1/0))})),t.graph().maxRank=e},M=function(t){t.nodes().forEach((function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))},O=function(t){var e,n,r=0,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0,u=function(t){if(t){var o=t.x,a=t.y,s=t.width,u=t.height;isNaN(o)||isNaN(s)||(void 0===e&&(e=o-s/2),e=Math.min(e,o-s/2),r=Math.max(r,o+s/2)),isNaN(a)||isNaN(u)||(void 0===n&&(n=a-u/2),n=Math.min(n,a-u/2),i=Math.max(i,a+u/2))}};t.nodes().forEach((function(e){u(t.node(e))})),t.edges().forEach((function(e){var n=t.edge(e);(null==n?void 0:n.hasOwnProperty("x"))&&u(n)})),e-=a,n-=s,t.nodes().forEach((function(r){var i=t.node(r);i&&(i.x-=e,i.y-=n)})),t.edges().forEach((function(r){var i,o=t.edge(r);null===(i=o.points)||void 0===i||i.forEach((function(t){t.x-=e,t.y-=n})),o.hasOwnProperty("x")&&(o.x-=e),o.hasOwnProperty("y")&&(o.y-=n)})),o.width=r-e+a,o.height=i-n+s},T=function(t){t.edges().forEach((function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift((0,u.intersectRect)(o,n)),i.points.push((0,u.intersectRect)(a,r))}))},A=function(t){t.edges().forEach((function(e){var n=t.edge(e);if(null==n?void 0:n.hasOwnProperty("x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))},N=function(t){t.edges().forEach((function(e){var n,r=t.edge(e);r.reversed&&(null===(n=r.points)||void 0===n||n.reverse())}))},I=function(t){t.nodes().forEach((function(e){var n,r,i;if(null===(n=t.children(e))||void 0===n?void 0:n.length){var o=t.node(e),a=t.node(o.borderTop),s=t.node(o.borderBottom),u=t.node(o.borderLeft[(null===(r=o.borderLeft)||void 0===r?void 0:r.length)-1]),c=t.node(o.borderRight[(null===(i=o.borderRight)||void 0===i?void 0:i.length)-1]);o.width=Math.abs((null==c?void 0:c.x)-(null==u?void 0:u.x))||10,o.height=Math.abs((null==s?void 0:s.y)-(null==a?void 0:a.y))||10,o.x=((null==u?void 0:u.x)||0)+o.width/2,o.y=((null==a?void 0:a.y)||0)+o.height/2}})),t.nodes().forEach((function(e){var n;"border"===(null===(n=t.node(e))||void 0===n?void 0:n.dummy)&&t.removeNode(e)}))},P=function(t){t.edges().forEach((function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdgeObj(e)}}))},D=function(t){var e=(0,u.buildLayerMatrix)(t);null==e||e.forEach((function(e){var n=0;null==e||e.forEach((function(e,r){var i,o=t.node(e);o.order=r+n,null===(i=o.selfEdges)||void 0===i||i.forEach((function(e){(0,u.addDummyNode)(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))},L=function(t){t.nodes().forEach((function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdgeObj(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{y:o,x:i+a},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))},R=function(t,e){var n={};return null==e||e.forEach((function(e){void 0!==t[e]&&(n[e]=+t[e])})),n},j=function(t){void 0===t&&(t={});var e={};return Object.keys(t).forEach((function(n){e[n.toLowerCase()]=t[n]})),e};e.default=function(t,e){var n=e&&e.debugTiming?u.time:u.notime;n("layout",(function(){e&&!e.keepNodeOrder&&e.prevGraph&&n("  inheritOrder",(function(){var n,r;n=t,r=e.prevGraph,n.nodes().forEach((function(t){var e=n.node(t),i=r.node(t);void 0!==i?(e.fixorder=i._order,delete i._order):delete e.fixorder}))}));var i=n("  buildLayoutGraph",(function(){return function(t){var e=new v.Graph({multigraph:!0,compound:!0}),n=j(t.graph()),i={};return null==b||b.forEach((function(t){void 0!==n[t]&&(i[t]=n[t])})),e.setGraph(Object.assign({},y,R(n,m),i)),t.nodes().forEach((function(n){var i=j(t.node(n)),o=r(r({},w),i),a=R(o,x);e.setNode(n,a),e.setParent(n,t.parent(n))})),t.edges().forEach((function(n){var r=j(t.edge(n)),i={};null==S||S.forEach((function(t){void 0!==r[t]&&(i[t]=r[t])})),e.setEdgeObj(n,Object.assign({},E,R(r,_),i))})),e}(t)}));e&&!1===e.edgeLabelSpace||n("  makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,t.nodes().forEach((function(e){var n=t.node(e);isNaN(n.layer)||n.layer||(n.layer=0)})),t.edges().forEach((function(n){var r,i=t.edge(n);i.minlen*=2,"c"!==(null===(r=i.labelpos)||void 0===r?void 0:r.toLowerCase())&&("TB"===e.rankdir||"BT"===e.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)}))}(i)}));try{n("  runLayout",(function(){!function(t,e,n){e("    removeSelfEdges",(function(){P(t)})),e("    acyclic",(function(){o.default.run(t)})),e("    nestingGraph.run",(function(){l.default.run(t)})),e("    rank",(function(){(0,s.default)((0,u.asNonCompoundGraph)(t))})),e("    injectEdgeLabelProxies",(function(){C(t)})),e("    removeEmptyRanks",(function(){(0,u.removeEmptyRanks)(t)})),e("    nestingGraph.cleanup",(function(){l.default.cleanup(t)})),e("    normalizeRanks",(function(){(0,u.normalizeRanks)(t)})),e("    assignRankMinMax",(function(){k(t)})),e("    removeEdgeLabelProxies",(function(){M(t)})),e("    normalize.run",(function(){a.default.run(t)})),e("    parentDummyChains",(function(){(0,c.default)(t)})),e("    addBorderSegments",(function(){(0,f.default)(t)})),n&&n.keepNodeOrder&&e("    initDataOrder",(function(){(0,g.default)(t,n.nodeOrder)})),e("    order",(function(){(0,h.default)(t)})),e("    insertSelfEdges",(function(){D(t)})),e("    adjustCoordinateSystem",(function(){d.default.adjust(t)})),e("    position",(function(){(0,p.default)(t)})),e("    positionSelfEdges",(function(){L(t)})),e("    removeBorderNodes",(function(){I(t)})),e("    normalize.undo",(function(){a.default.undo(t)})),e("    fixupEdgeLabelCoords",(function(){A(t)})),e("    undoCoordinateSystem",(function(){d.default.undo(t)})),e("    translateGraph",(function(){O(t)})),e("    assignNodeIntersects",(function(){T(t)})),e("    reversePoints",(function(){N(t)})),e("    acyclic.undo",(function(){o.default.undo(t)}))}(i,n,e)}))}catch(t){if("Not possible to find intersection inside of the rectangle"===t.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",t);throw t}n("  updateInputGraph",(function(){!function(t,e){t.nodes().forEach((function(n){var r,i=t.node(n);if(i){var o=e.node(n);i.x=o.x,i.y=o.y,i._order=o.order,i._rank=o.rank,(null===(r=e.children(n))||void 0===r?void 0:r.length)&&(i.width=o.width,i.height=o.height)}})),t.edges().forEach((function(n){var r=t.edge(n),i=e.edge(n);r.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,i)}))}))}},9596:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9209),i=function(t,e,n,o,a,s,u){var c=t.children(u);if(null==c?void 0:c.length){var l=(0,r.addBorderNode)(t,"_bt"),f=(0,r.addBorderNode)(t,"_bb"),d=t.node(u);t.setParent(l,u),d.borderTop=l,t.setParent(f,u),d.borderBottom=f,null==c||c.forEach((function(r){i(t,e,n,o,a,s,r);var c=t.node(r),d=c.borderTop?c.borderTop:r,h=c.borderBottom?c.borderBottom:r,p=c.borderTop?o:2*o,g=d!==h?1:a-s[u]+1;t.setEdge(l,d,{minlen:g,weight:p,nestingEdge:!0}),t.setEdge(h,f,{minlen:g,weight:p,nestingEdge:!0})})),t.parent(u)||t.setEdge(e,l,{weight:0,minlen:a+s[u]})}else u!==e&&t.setEdge(e,u,{weight:0,minlen:n})};e.default={run:function(t){var e,n=(0,r.addDummyNode)(t,"root",{},"_root"),o=function(t){var e,n={},r=function(e,i){var o=t.children(e);null==o||o.forEach((function(t){return r(t,i+1)})),n[e]=i};return null===(e=t.children())||void 0===e||e.forEach((function(t){return r(t,1)})),n}(t),a=Math.max.apply(Math,Object.values(o));Math.abs(a)===1/0&&(a=1);var s=a-1,u=2*s+1;t.graph().nestingRoot=n,t.edges().forEach((function(e){t.edge(e).minlen*=u}));var c=function(t){var e=0;return t.edges().forEach((function(n){e+=t.edge(n).weight})),e}(t)+1;null===(e=t.children())||void 0===e||e.forEach((function(e){i(t,n,u,c,s,o,e)})),t.graph().nodeRankFactor=u},cleanup:function(t){var e=t.graph();e.nestingRoot&&t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach((function(e){t.edge(e).nestingEdge&&t.removeEdgeObj(e)}))}}},6171:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9209);e.default={run:function(t){t.graph().dummyChains=[],t.edges().forEach((function(e){return function(t,e){var n=e.v,i=t.node(n).rank,o=e.w,a=t.node(o).rank,s=e.name,u=t.edge(e),c=u.labelRank;if(a!==i+1){t.removeEdgeObj(e);var l,f,d,h=t.graph();for(d=0,++i;i<a;++d,++i)u.points=[],f={edgeLabel:u,width:0,height:0,edgeObj:e,rank:i},l=(0,r.addDummyNode)(t,"edge",f,"_d"),i===c&&(f.width=u.width,f.height=u.height,f.dummy="edge-label",f.labelpos=u.labelpos),t.setEdge(n,l,{weight:u.weight},s),0===d&&(h.dummyChains||(h.dummyChains=[]),h.dummyChains.push(l)),n=l;t.setEdge(n,o,{weight:u.weight},s)}}(t,e)}))},undo:function(t){var e;null===(e=t.graph().dummyChains)||void 0===e||e.forEach((function(e){var n,r=t.node(e),i=r.edgeLabel;r.edgeObj&&t.setEdgeObj(r.edgeObj,i);for(var o=e;r.dummy;)n=t.successors(o)[0],t.removeNode(o),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),o=n,r=t.node(o)}))}}},314:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r,i={};null==n||n.forEach((function(n){for(var o,a,s=t.parent(n);s;){if((o=t.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}}))}},9921:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return e.map((function(e){var n=t.inEdges(e);if(!(null==n?void 0:n.length))return{v:e};var r={sum:0,weight:0};return null==n||n.forEach((function(e){var n=t.edge(e),i=t.node(e.v);r.sum+=n.weight*i.order,r.weight+=n.weight})),{v:e,barycenter:r.sum/r.weight,weight:r.weight}}))}},7006:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7652);e.default=function(t,e,n){var i=function(t){for(var e;t.hasNode(e="_root".concat(Math.random())););return e}(t),o=new r.Graph({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return t.nodes().forEach((function(r){var a,s=t.node(r),u=t.parent(r);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(o.setNode(r),o.setParent(r,u||i),null===(a=t[n](r))||void 0===a||a.forEach((function(e){var n=e.v===r?e.w:e.v,i=o.edgeFromArgs(n,r),a=void 0!==i?i.weight:0;o.setEdge(n,r,{weight:t.edge(e).weight+a})})),s.hasOwnProperty("minRank")&&o.setNode(r,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),o}},2957:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9209),i=function(t,e,n){for(var i=(0,r.zipObject)(n,n.map((function(t,e){return e}))),o=e.map((function(e){var n,r=null===(n=t.outEdges(e))||void 0===n?void 0:n.map((function(e){return{pos:i[e.w]||0,weight:t.edge(e).weight}}));return null==r?void 0:r.sort((function(t,e){return t.pos-e.pos}))})).flat().filter((function(t){return void 0!==t})),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=Array(s).fill(0,0,s),c=0;return null==o||o.forEach((function(t){if(t){var e=t.pos+a;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*n}})),c};e.default=function(t,e){for(var n=0,r=1;r<(null==e?void 0:e.length);r+=1)n+=i(t,e[r-1],e[r]);return n}},9597:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(5697)),o=r(n(2957)),a=r(n(7006)),s=r(n(314)),u=r(n(9455)),c=n(9784),l=n(7652),f=n(9209),d=function(t,e,n){return e.map((function(e){return(0,a.default)(t,e,n)}))},h=function(t,e,n){var r=new l.Graph;null==t||t.forEach((function(t){for(var i,o=t.graph().root,a=(0,u.default)(t,o,r,e,n),c=0;c<(null===(i=a.vs)||void 0===i?void 0:i.length);c++){var l=t.node(a.vs[c]);l&&(l.order=c)}(0,s.default)(t,r,a.vs)}))},p=function(t,e){null==e||e.forEach((function(e){null==e||e.forEach((function(e,n){t.node(e).order=n}))}))};e.default=function(t){for(var e=(0,f.maxRank)(t),n=[],r=[],a=1;a<e+1;a++)n.push(a);for(a=e-1;a>-1;a--)r.push(a);var s=d(t,n,"inEdges"),u=d(t,r,"outEdges"),l=(0,i.default)(t);p(t,l);for(var g,v=Number.POSITIVE_INFINITY,m=(a=0,0);m<4;++a,++m)h(a%2?s:u,a%4>=2),l=(0,f.buildLayerMatrix)(t),(y=(0,o.default)(t,l))<v&&(m=0,g=(0,c.clone)(l),v=y);for(l=(0,i.default)(t),p(t,l),a=0,m=0;m<4;++a,++m){var y;h(a%2?s:u,a%4>=2,!0),l=(0,f.buildLayerMatrix)(t),(y=(0,o.default)(t,l))<v&&(m=0,g=(0,c.clone)(l),v=y)}p(t,g)}},4956:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.nodes().filter((function(e){var n;return!(null===(n=t.children(e))||void 0===n?void 0:n.length)})).map((function(e){return t.node(e).rank})),r=Math.max.apply(Math,n),i=Array(r+1).fill([]);null==e||e.forEach((function(e){var n=t.node(e);n&&!(null==n?void 0:n.dummy)&&(isNaN(n.rank)||(n.fixorder=i[n.rank].length,i[n.rank].push(e)))}))}},5697:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e={},n=t.nodes().filter((function(e){var n;return!(null===(n=t.children(e))||void 0===n?void 0:n.length)})),r=n.map((function(e){return t.node(e).rank})),i=Math.max.apply(Math,r),o=[],a=0;a<i+1;a++)o.push([]);var s=function(n){var r;if(!e.hasOwnProperty(n)){e[n]=!0;var i=t.node(n);isNaN(i.rank)||o[i.rank].push(n),null===(r=t.successors(n))||void 0===r||r.forEach((function(t){return s(t)}))}},u=n.sort((function(e,n){return t.node(e).rank-t.node(n).rank})),c=u.filter((function(e){return void 0!==t.node(e).fixorder})).sort((function(e,n){return t.node(e).fixorder-t.node(n).fixorder}));return null==c||c.forEach((function(n){isNaN(t.node(n).rank)||o[t.node(n).rank].push(n),e[n]=!0})),null==u||u.forEach(s),o}},7043:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){var n,r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=null===(n=e.vs)||void 0===n?void 0:n.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0};e.default=function(t,e){var r,i,o,a={};return null==t||t.forEach((function(t,e){a[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};var n=a[t.v];void 0!==t.barycenter&&(n.barycenter=t.barycenter,n.weight=t.weight)})),null===(r=e.edges())||void 0===r||r.forEach((function(t){var e=a[t.v],n=a[t.w];void 0!==e&&void 0!==n&&(n.indegree++,e.out.push(a[t.w]))})),function(t){for(var e,r,i=[],o=function(){var o=t.pop();i.push(o),null===(e=o.in.reverse())||void 0===e||e.forEach((function(t){return(e=o,function(t){t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&n(e,t)})(t);var e})),null===(r=o.out)||void 0===r||r.forEach((function(e){return(n=o,function(e){e.in.push(n),0==--e.indegree&&t.push(e)})(e);var n}))};null==t?void 0:t.length;)o();var a=i.filter((function(t){return!t.merged})),s=["vs","i","barycenter","weight"];return a.map((function(t){var e={};return null==s||s.forEach((function(n){void 0!==t[n]&&(e[n]=t[n])})),e}))}(null===(o=(i=Object.values(a)).filter)||void 0===o?void 0:o.call(i,(function(t){return!t.indegree})))}},9455:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(9921)),o=r(n(7043)),a=r(n(1498)),s=function(t,e,n,r,l){var f,d,h,p,g=t.children(e),v=t.node(e),m=v?v.borderLeft:void 0,y=v?v.borderRight:void 0,b={};m&&(g=null==g?void 0:g.filter((function(t){return t!==m&&t!==y})));var x=(0,i.default)(t,g||[]);null==x||x.forEach((function(e){var i;if(null===(i=t.children(e.v))||void 0===i?void 0:i.length){var o=s(t,e.v,n,r);b[e.v]=o,o.hasOwnProperty("barycenter")&&c(e,o)}}));var w=(0,o.default)(x,n);u(w,b),null===(f=w.filter((function(t){return t.vs.length>0})))||void 0===f||f.forEach((function(e){var n=t.node(e.vs[0]);n&&(e.fixorder=n.fixorder,e.order=n.order)}));var _=(0,a.default)(w,r,l);if(m&&(_.vs=[m,_.vs,y].flat(),null===(d=t.predecessors(m))||void 0===d?void 0:d.length)){var E=t.node((null===(h=t.predecessors(m))||void 0===h?void 0:h[0])||""),S=t.node((null===(p=t.predecessors(y))||void 0===p?void 0:p[0])||"");_.hasOwnProperty("barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+E.order+S.order)/(_.weight+2),_.weight+=2}return _},u=function(t,e){null==t||t.forEach((function(t){var n,r=null===(n=t.vs)||void 0===n?void 0:n.map((function(t){return e[t]?e[t].vs:t}));t.vs=r.flat()}))},c=function(t,e){void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)};e.default=s},1498:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9209),i=function(t,e,n){for(var r,i=n;e.length&&(r=e[e.length-1]).i<=i;)e.pop(),null==t||t.push(r.vs),i++;return i};e.default=function(t,e,n){var o=(0,r.partition)(t,(function(t){return t.hasOwnProperty("fixorder")&&!isNaN(t.fixorder)||t.hasOwnProperty("barycenter")})),a=o.lhs,s=o.rhs.sort((function(t,e){return-t.i- -e.i})),u=[],c=0,l=0,f=0;null==a||a.sort(function(t,e){return function(n,r){if(void 0!==n.fixorder&&void 0!==r.fixorder)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(e&&void 0!==n.order&&void 0!==r.order){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return t?r.i-n.i:n.i-r.i}}(!!e,!!n)),f=i(u,s,f),null==a||a.forEach((function(t){var e;f+=null===(e=t.vs)||void 0===e?void 0:e.length,u.push(t.vs),c+=t.barycenter*t.weight,l+=t.weight,f=i(u,s,f)}));var d={vs:u.flat()};return l&&(d.barycenter=c/l,d.weight=l),d}},3562:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n=function(t){var e,n={},r=0,i=function(e){var o,a=r;null===(o=t.children(e))||void 0===o||o.forEach(i),n[e]={low:a,lim:r++}};return null===(e=t.children())||void 0===e||e.forEach(i),n}(t);null===(e=t.graph().dummyChains)||void 0===e||e.forEach((function(e){var r,i,o=e,a=t.node(o),s=a.edgeObj;if(s)for(var u=function(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(o=i,i=r;i&&i!==o;)s.push(i),i=t.parent(i);return{lca:o,path:a.concat(s.reverse())}}(t,n,s.v,s.w),c=u.path,l=u.lca,f=0,d=c[f],h=!0;o!==s.w;){if(a=t.node(o),h){for(;d!==l&&(null===(r=t.node(d))||void 0===r?void 0:r.maxRank)<a.rank;)d=c[++f];d===l&&(h=!1)}if(!h){for(;f<c.length-1&&(null===(i=t.node(c[f+1]))||void 0===i?void 0:i.minRank)<=a.rank;)f++;d=c[f]}t.setParent(o,d),o=t.successors(o)[0]}}))}},1963:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.width=e.sep=e.positionX=e.balance=e.alignCoordinates=e.findSmallestWidthAlignment=e.buildBlockGraph=e.horizontalCompaction=e.verticalAlignment=e.hasConflict=e.addConflict=e.findOtherInnerSegmentNode=e.findType2Conflicts=e.findType1Conflicts=void 0;var o=n(9787),a=n(9209),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o.Graph);function u(t,e){var n=Object.values(e),r=Math.min.apply(Math,n),i=Math.max.apply(Math,n);["u","d"].forEach((function(n){["l","r"].forEach((function(o){var a,s=n+o,u=t[s];if(u!==e){var c=Object.values(u);(a="l"===o?r-Math.min.apply(Math,c):i-Math.max.apply(Math,c))&&(t[s]={},Object.keys(u).forEach((function(e){t[s][e]=u[e]+a})))}}))}))}e.findType1Conflicts=function(t,n){var r={};return(null==n?void 0:n.length)&&n.reduce((function(n,i){var o=0,a=0,s=n.length,u=null==i?void 0:i[(null==i?void 0:i.length)-1];return null==i||i.forEach((function(n,c){var l,f=(0,e.findOtherInnerSegmentNode)(t,n),d=f?t.node(f).order:s;(f||n===u)&&(null===(l=i.slice(a,c+1))||void 0===l||l.forEach((function(n){var i;null===(i=t.predecessors(n))||void 0===i||i.forEach((function(i){var a,s=t.node(i),u=s.order;!(u<o||d<u)||s.dummy&&(null===(a=t.node(n))||void 0===a?void 0:a.dummy)||(0,e.addConflict)(r,i,n)}))})),a=c+1,o=d)})),i})),r},e.findType2Conflicts=function(t,n){var r={},i=function(n,i,o,a,s){for(var u,c=[],l=i;l<o;l++)c.push(l);c.forEach((function(i){var o,c;u=n[i],(null===(o=t.node(u))||void 0===o?void 0:o.dummy)&&(null===(c=t.predecessors(u))||void 0===c||c.forEach((function(n){var i=t.node(n);i.dummy&&(i.order<a||i.order>s)&&(0,e.addConflict)(r,n,u)})))}))};return(null==n?void 0:n.length)&&n.reduce((function(e,n){var r,o=-1,a=0;return null==n||n.forEach((function(s,u){var c;if("border"===(null===(c=t.node(s))||void 0===c?void 0:c.dummy)){var l=t.predecessors(s)||[];l.length&&(r=t.node(l[0]).order,i(n,a,u,o,r),a=u,o=r)}i(n,a,n.length,r,e.length)})),n})),r},e.findOtherInnerSegmentNode=function(t,e){var n,r;if(null===(n=t.node(e))||void 0===n?void 0:n.dummy)return null===(r=t.predecessors(e))||void 0===r?void 0:r.find((function(e){return t.node(e).dummy}))},e.addConflict=function(t,e,n){var r=e,i=n;if(r>i){var o=r;r=i,i=o}var a=t[r];a||(t[r]=a={}),a[i]=!0},e.hasConflict=function(t,e,n){var r=e;return r>n&&(r=n),!!t[r]},e.verticalAlignment=function(t,n,r,i){var o={},a={},s={};return null==n||n.forEach((function(t){null==t||t.forEach((function(t,e){o[t]=t,a[t]=t,s[t]=e}))})),null==n||n.forEach((function(t){var n=-1;null==t||t.forEach((function(t){var u=i(t);if(u.length)for(var c=((u=u.sort((function(t,e){return s[t]-s[e]}))).length-1)/2,l=Math.floor(c),f=Math.ceil(c);l<=f;++l){var d=u[l];a[t]===t&&n<s[d]&&!(0,e.hasConflict)(r,t,d)&&(a[d]=t,a[t]=o[t]=o[d],n=s[d])}}))})),{root:o,align:a}},e.horizontalCompaction=function(t,n,r,i,o){var a,s={},u=(0,e.buildBlockGraph)(t,n,r,o),c=o?"borderLeft":"borderRight",l=function(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()};return l((function(t){s[t]=(u.inEdges(t)||[]).reduce((function(t,e){return Math.max(t,(s[e.v]||0)+u.edge(e))}),0)}),u.predecessors.bind(u)),l((function(e){var n=(u.outEdges(e)||[]).reduce((function(t,e){return Math.min(t,(s[e.w]||0)-u.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(s[e]=Math.max(s[e],n))}),u.successors.bind(u)),null===(a=Object.values(i))||void 0===a||a.forEach((function(t){s[t]=s[r[t]]})),s},e.buildBlockGraph=function(t,n,r,i){var o=new s,a=t.graph(),u=(0,e.sep)(a.nodesep,a.edgesep,i);return null==n||n.forEach((function(e){var n;null==e||e.forEach((function(e){var i=r[e];if(o.setNode(i),n){var a=r[n],s=o.edgeFromArgs(a,i);o.setEdge(a,i,Math.max(u(t,e,n),s||0))}n=e}))})),o},e.findSmallestWidthAlignment=function(t,n){return(0,a.minBy)(Object.values(n),(function(n){var r,i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return null===(r=Object.keys(n))||void 0===r||r.forEach((function(r){var a=n[r],s=(0,e.width)(t,r)/2;i=Math.max(a+s,i),o=Math.min(a-s,o)})),i-o}))},e.alignCoordinates=u,e.balance=function(t,e){var n={};return Object.keys(t.ul).forEach((function(r){if(e)n[r]=t[e.toLowerCase()][r];else{var i=Object.values(t).map((function(t){return t[r]}));n[r]=(i[0]+i[1])/2}})),n},e.positionX=function(t){var n,r=(0,a.buildLayerMatrix)(t),i=Object.assign((0,e.findType1Conflicts)(t,r),(0,e.findType2Conflicts)(t,r)),o={};["u","d"].forEach((function(a){n="u"===a?r:Object.values(r).reverse(),["l","r"].forEach((function(r){"r"===r&&(n=n.map((function(t){return Object.values(t).reverse()})));var s=("u"===a?t.predecessors:t.successors).bind(t),u=(0,e.verticalAlignment)(t,n,i,s),c=(0,e.horizontalCompaction)(t,n,u.root,u.align,"r"===r);"r"===r&&Object.keys(c).forEach((function(t){c[t]=-c[t]})),o[a+r]=c}))}));var s=(0,e.findSmallestWidthAlignment)(t,o);return u(o,s),(0,e.balance)(o,t.graph().align)},e.sep=function(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),c=0;if(c+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(c+=n?a:-a),a=0,c+=(s.dummy?e:t)/2,c+=(u.dummy?e:t)/2,c+=u.width/2,u.labelpos)switch((u.labelpos||"").toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(c+=n?a:-a),a=0,c}},e.width=function(t,e){return t.node(e).width||0}},95:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9209),o=n(1963);e.default=function(t){var e,n=(0,i.asNonCompoundGraph)(t);!function(t){var e=(0,i.buildLayerMatrix)(t),n=t.graph().ranksep,o=0;null==e||e.forEach((function(e){var i=e.map((function(e){return t.node(e).height})),a=Math.max.apply(Math,r(r([],i,!1),[0],!1));null==e||e.forEach((function(e){t.node(e).y=o+a/2})),o+=a+n}))}(n);var a=function(t){var e=(0,i.buildLayerMatrix)(t),n=Object.assign((0,o.findType1Conflicts)(t,e),(0,o.findType2Conflicts)(t,e)),r={},a=[];["u","d"].forEach((function(i){a="u"===i?e:Object.values(e).reverse(),["l","r"].forEach((function(e){"r"===e&&(a=a.map((function(t){return Object.values(t).reverse()})));var s=("u"===i?t.predecessors:t.successors).bind(t),u=(0,o.verticalAlignment)(t,a,n,s),c=(0,o.horizontalCompaction)(t,a,u.root,u.align,"r"===e);"r"===e&&Object.keys(c).forEach((function(t){return c[t]=-c[t]})),r[i+e]=c}))}));var s=(0,o.findSmallestWidthAlignment)(t,r);return s&&(0,o.alignCoordinates)(r,s),(0,o.balance)(r,t.graph().align)}(n);null===(e=Object.keys(a))||void 0===e||e.forEach((function(t){n.node(t).x=a[t]}))}},3614:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.feasibleTreeWithLayer=e.feasibleTree=void 0;var r=n(7323),i=n(9209),o=n(7652),a=function(t){var e,n,i=new o.Graph({directed:!1}),a=t.nodes()[0],u=t.nodeCount();for(i.setNode(a,{});s(i,t)<u;)e=l(i,t),n=i.hasNode(e.v)?(0,r.slack)(t,e):-(0,r.slack)(t,e),f(i,t,n);return i};e.feasibleTree=a;var s=function(t,e){var n=function(i){e.nodeEdges(i).forEach((function(o){var a=o.v,s=i===a?o.w:a;t.hasNode(s)||(0,r.slack)(e,o)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))}))};return t.nodes().forEach(n),t.nodeCount()},u=function(t){var e,n,i=new o.Graph({directed:!1}),a=t.nodes()[0],s=t.nodes().filter((function(e){return!!t.node(e)})).length;for(i.setNode(a,{});c(i,t)<s;)e=l(i,t),n=i.hasNode(e.v)?(0,r.slack)(t,e):-(0,r.slack)(t,e),f(i,t,n);return i};e.feasibleTreeWithLayer=u;var c=function(t,e){var n=function(i){var o;null===(o=e.nodeEdges(i))||void 0===o||o.forEach((function(o){var a=o.v,s=i===a?o.w:a;t.hasNode(s)||void 0===e.node(s).layer&&(0,r.slack)(e,o)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))}))};return t.nodes().forEach(n),t.nodeCount()},l=function(t,e){return(0,i.minBy)(e.edges(),(function(n){return t.hasNode(n.v)!==t.hasNode(n.w)?(0,r.slack)(e,n):1/0}))},f=function(t,e,n){t.nodes().forEach((function(t){e.node(t).rank||(e.node(t).rank=0),e.node(t).rank+=n}))};e.default={feasibleTree:a,feasibleTreeWithLayer:u}},6827:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(7323),o=n(3614),a=r(n(2253)),s=i.longestPath;e.default=function(t){switch(t.graph().ranker){case"network-simplex":!function(t){(0,a.default)(t)}(t);break;case"tight-tree":default:!function(t){(0,i.longestPathWithLayer)(t),(0,o.feasibleTreeWithLayer)(t)}(t);break;case"longest-path":s(t)}}},2253:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exchangeEdges=e.enterEdge=e.leaveEdge=e.initLowLimValues=e.calcCutValue=e.initCutValues=void 0;var r=n(3614),i=n(7323),o=n(9209),a=n(9787),s=a.algorithm.preorder,u=a.algorithm.postorder;e.initCutValues=function(t,e){var n=u(t,t.nodes());null==(n=null==n?void 0:n.slice(0,(null==n?void 0:n.length)-1))||n.forEach((function(n){c(t,e,n)}))};var c=function(t,n,r){var i=t.node(r).parent;t.edgeFromArgs(r,i).cutvalue=(0,e.calcCutValue)(t,n,r)};e.calcCutValue=function(t,e,n){var r,i=t.node(n).parent,o=!0,a=e.edgeFromArgs(n,i),s=0;return a||(o=!1,a=e.edgeFromArgs(i,n)),s=a.weight,null===(r=e.nodeEdges(n))||void 0===r||r.forEach((function(r){var a=r.v===n,u=a?r.w:r.v;if(u!==i){var c=a===o,l=e.edge(r).weight;if(s+=c?l:-l,d(t,n,u)){var f=t.edgeFromArgs(n,u).cutvalue;s+=c?-f:f}}})),s},e.initLowLimValues=function(t,e){void 0===e&&(e=t.nodes()[0]),l(t,{},1,e)};var l=function(t,e,n,r,i){var o,a=n,s=n,u=t.node(r);return e[r]=!0,null===(o=t.neighbors(r))||void 0===o||o.forEach((function(n){e[n]||(s=l(t,e,s,n,r))})),u.low=a,u.lim=s++,i?u.parent=i:delete u.parent,s};e.leaveEdge=function(t){return t.edges().find((function(e){return t.edge(e).cutvalue<0}))},e.enterEdge=function(t,e,n){var r=n.v,a=n.w;e.hasEdge(r,a)||(r=n.w,a=n.v);var s=t.node(r),u=t.node(a),c=s,l=!1;s.lim>u.lim&&(c=u,l=!0);var f=e.edges().filter((function(e){return l===h(t,t.node(e.v),c)&&l!==h(t,t.node(e.w),c)}));return(0,o.minBy)(f,(function(t){return(0,i.slack)(e,t)}))},e.exchangeEdges=function(t,n,r,i){var o=r.v,a=r.w;t.removeEdge(o,a),t.setEdge(i.v,i.w,{}),(0,e.initLowLimValues)(t),(0,e.initCutValues)(t,n),f(t,n)};var f=function(t,e){var n=t.nodes().find((function(t){var n;return!(null===(n=e.node(t))||void 0===n?void 0:n.parent)})),r=s(t,n);null==(r=null==r?void 0:r.slice(1))||r.forEach((function(n){var r=t.node(n).parent,i=e.edgeFromArgs(n,r),o=!1;i||(i=e.edgeFromArgs(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))},d=function(t,e,n){return t.hasEdge(e,n)},h=function(t,e,n){return n.low<=e.lim&&e.lim<=n.lim};e.default=function(t){var n=(0,o.simplify)(t);(0,i.longestPath)(n);var a,s,u=(0,r.feasibleTree)(n);for((0,e.initLowLimValues)(u),(0,e.initCutValues)(u,n);a=(0,e.leaveEdge)(u);)s=(0,e.enterEdge)(u,n,a),(0,e.exchangeEdges)(u,n,a,s)}},7323:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.slack=e.longestPathWithLayer=e.longestPath=void 0;var n=function(t){var e,n={},r=function(e){var i,o,a=t.node(e);return a?n[e]?a.rank:(n[e]=!0,null===(i=t.outEdges(e))||void 0===i||i.forEach((function(e){var n=r(e.w)-t.edge(e).minlen;n&&(void 0===o||n<o)&&(o=n)})),o||(o=0),a.rank=o,o):0};null===(e=t.sources())||void 0===e||e.forEach((function(t){return r(t)}))};e.longestPath=n;var r=function(t){var e,n,r={},i=function(e){var o,a,s=t.node(e);return s?r[e]?s.rank:(r[e]=!0,null===(o=t.outEdges(e))||void 0===o||o.forEach((function(e){var n=i(e.w)-t.edge(e).minlen;n&&(void 0===a||n<a)&&(a=n)})),a||(a=0),(void 0===n||a<n)&&(n=a),s.rank=a,a):0};null===(e=t.sources())||void 0===e||e.forEach((function(e){t.node(e)&&i(e)})),void 0===n&&(n=0);var o={},a=function(e,n){var r,i=t.node(e),s=isNaN(i.layer)?n:i.layer;(void 0===i.rank||i.rank<s)&&(i.rank=s),o[e]||(o[e]=!0,null===(r=t.outEdges(e))||void 0===r||r.map((function(e){a(e.w,s+t.edge(e).minlen)})))};t.nodes().forEach((function(e){var r=t.node(e);r&&(isNaN(r.layer)?r.rank-=n:a(e,r.layer))}))};e.longestPathWithLayer=r;var i=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};e.slack=i,e.default={longestPath:n,longestPathWithLayer:r,slack:i}},9209:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.minBy=e.notime=e.time=e.partition=e.maxRank=e.addBorderNode=e.removeEmptyRanks=e.normalizeRanks=e.buildLayerMatrix=e.intersectRect=e.predecessorWeights=e.successorWeights=e.zipObject=e.asNonCompoundGraph=e.simplify=e.addDummyNode=void 0;var r=n(9784),i=n(7652);e.addDummyNode=function(t,e,n,r){var i;do{i="".concat(r).concat(Math.random())}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i},e.simplify=function(t){var e=(new i.Graph).setGraph(t.graph());return t.nodes().forEach((function(n){e.setNode(n,t.node(n))})),t.edges().forEach((function(n){var r=e.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},e.asNonCompoundGraph=function(t){var e=new i.Graph({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach((function(n){var r;(null===(r=t.children(n))||void 0===r?void 0:r.length)||e.setNode(n,t.node(n))})),t.edges().forEach((function(n){e.setEdgeObj(n,t.edge(n))})),e},e.zipObject=function(t,e){return null==t?void 0:t.reduce((function(t,n,r){return t[n]=e[r],t}),{})},e.successorWeights=function(t){var e={};return t.nodes().forEach((function(n){var r,i={};null===(r=t.outEdges(n))||void 0===r||r.forEach((function(e){var n;i[e.w]=(i[e.w]||0)+((null===(n=t.edge(e))||void 0===n?void 0:n.weight)||0)})),e[n]=i})),e},e.predecessorWeights=function(t){var n=t.nodes(),r=n.map((function(e){var n,r={};return null===(n=t.inEdges(e))||void 0===n||n.forEach((function(e){r[e.v]=(r[e.v]||0)+t.edge(e).weight})),r}));return(0,e.zipObject)(n,r)},e.intersectRect=function(t,e){var n,r,i=Number(t.x),o=Number(t.y),a=Number(e.x)-i,s=Number(e.y)-o,u=Number(t.width)/2,c=Number(t.height)/2;return a||s?(Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a),{x:i+n,y:o+r}):{x:0,y:0}},e.buildLayerMatrix=function(t){for(var n=[],r=(0,e.maxRank)(t)+1,i=0;i<r;i++)n.push([]);for(t.nodes().forEach((function(e){var r=t.node(e);if(r){var i=r.rank;void 0!==i&&n[i]&&n[i].push(e)}})),i=0;i<r;i++)n[i]=n[i].sort((function(e,n){var r,i,o,a;return o=null===(r=t.node(e))||void 0===r?void 0:r.order,a=null===(i=t.node(n))||void 0===i?void 0:i.order,Number(o)-Number(a)}));return n},e.normalizeRanks=function(t){var e=t.nodes().filter((function(e){var n;return void 0!==(null===(n=t.node(e))||void 0===n?void 0:n.rank)})).map((function(e){return t.node(e).rank})),n=Math.min.apply(Math,e);t.nodes().forEach((function(e){var r=t.node(e);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)}))},e.removeEmptyRanks=function(t){var e=t.nodes(),n=e.filter((function(e){var n;return void 0!==(null===(n=t.node(e))||void 0===n?void 0:n.rank)})).map((function(e){return t.node(e).rank})),r=Math.min.apply(Math,n),i=[];e.forEach((function(e){var n,o=((null===(n=t.node(e))||void 0===n?void 0:n.rank)||0)-r;i[o]||(i[o]=[]),i[o].push(e)}));for(var o=0,a=t.graph().nodeRankFactor||0,s=0;s<i.length;s++){var u=i[s];void 0===u?s%a!=0&&(o-=1):o&&(null==u||u.forEach((function(e){var n=t.node(e);n&&(n.rank=n.rank||0,n.rank+=o)})))}},e.addBorderNode=function(t,n,i,o){var a={width:0,height:0};return(0,r.isNumber)(i)&&(0,r.isNumber)(o)&&(a.rank=i,a.order=o),(0,e.addDummyNode)(t,"border",a,n)},e.maxRank=function(t){var e;return t.nodes().forEach((function(n){var r,i=null===(r=t.node(n))||void 0===r?void 0:r.rank;void 0!==i&&(void 0===e||i>e)&&(e=i)})),e||(e=0),e},e.partition=function(t,e){var n={lhs:[],rhs:[]};return null==t||t.forEach((function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},e.time=function(t,e){var n=Date.now();try{return e()}finally{console.log("".concat(t," time: ").concat(Date.now()-n,"ms"))}},e.notime=function(t,e){return e()},e.minBy=function(t,e){return t.reduce((function(t,n){return e(t)>e(n)?n:t}))}},4015:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(9013)),c=s(n(8221)),l=s(n(7064)),f=n(171);e.default=function(t,e){var n=t.nodes,i=t.edges,o=e.width,a=e.height;if(!(null==n?void 0:n.length))return Promise.resolve();var s=[];n.forEach((function(t){if(i.filter((function(e){return e.source===t.id||e.target===t.id})).length>1){var e=r({},t);delete e.size,s.push(e)}}));var d=[];i.forEach((function(t){var e=s.find((function(e){return e.id===t.source})),n=s.find((function(e){return e.id===t.target}));e&&n&&d.push(t)}));var h=new f.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}).layout({nodes:s,edges:d}).nodes;n.forEach((function(t){var e=(h||[]).find((function(e){return e.id===t.id}));t.x=(null==e?void 0:e.x)||o/2,t.y=(null==e?void 0:e.y)||a/2}));var p=JSON.parse(JSON.stringify(n)),g=JSON.parse(JSON.stringify(i)),v=u.forceSimulation().nodes(p).force("link",u.forceLink(g).id((function(t){return t.id})).distance((function(t){return d.find((function(e){return e.source===t.source&&e.target===t.target}))?30:20}))).force("charge",u.forceManyBody()).force("center",u.forceCenter(o/2,a/2)).force("x",u.forceX(o/2)).force("y",u.forceY(a/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise((function(t){v.on("end",(function(){n.forEach((function(t){var e=p.find((function(e){return e.id===t.id}));e&&(t.x=e.x,t.y=e.y)}));var r=Math.min.apply(Math,n.map((function(t){return t.x}))),s=Math.max.apply(Math,n.map((function(t){return t.x}))),u=Math.min.apply(Math,n.map((function(t){return t.y}))),f=Math.max.apply(Math,n.map((function(t){return t.y}))),d=o/(s-r),h=a/(f-u);n.forEach((function(t){void 0!==t.x&&d<1&&(t.x=(t.x-r)*d),void 0!==t.y&&h<1&&(t.y=(t.y-u)*h)})),n.forEach((function(t){t.sizeTemp=t.size,t.size=[10,10]})),(0,l.default)(n,i),n.forEach((function(t){t.size=t.sizeTemp||[],delete t.sizeTemp})),(0,c.default)({nodes:n,edges:i},e),t()}))}))}},8221:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(8611));e.default=function(t,e){if(!t.nodes||0===t.nodes.length)return t;var n=e.width,r=e.height,o=e.nodeMinGap,a=1e4,s=1e4;t.nodes.forEach((function(t){var e=t.size[0]||50,n=t.size[1]||50;a=Math.min(e,a),s=Math.min(n,s)}));var u=new i.default;u.init(n,r,{CELL_H:s,CELL_W:a}),t.nodes.forEach((function(t){var e=u.occupyNearest(t);e&&(e.node={id:t.id,size:t.size},t.x=e.x,t.y=e.y,t.dx=e.dx,t.dy=e.dy)}));for(var c=0;c<t.nodes.length;c++){var l=t.nodes[c],f=u.findGridByNodeId(l.id);if(!f)throw new Error("can not find node cell");var d=f.column,h=f.row;if(l.size[0]+o>a){for(var p=v=Math.ceil((l.size[0]+o)/a)-1,g=0;g<v&&(u.additionColumn.indexOf(d+g+1)>-1&&!u.cells[d+g+1][h].node);g++)p--;u.insertColumn(d,p)}if(l.size[1]+o>s){var v;for(p=v=Math.ceil((l.size[1]+o)/s)-1,g=0;g<v&&(u.additionRow.indexOf(h+g+1)>-1&&!u.cells[d][h+g+1].node);g++)p--;u.insertRow(h,p)}}for(c=0;c<u.columnNum;c++){var m=function(e){var n=u.cells[c][e];if(n.node){var r=t.nodes.find((function(t){var e;return t.id===(null===(e=null==n?void 0:n.node)||void 0===e?void 0:e.id)}));r&&(r.x=n.x+r.size[0]/2,r.y=n.y+r.size[1]/2)}};for(g=0;g<u.rowNum;g++)m(g)}}},8611:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return t.prototype.init=function(e,n,r){this.cells=[],this.CELL_W=r.CELL_W||t.DEFAULT_CELL_W,this.CELL_H=r.CELL_H||t.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),t.MIN_DIST=Math.pow(e,2)+Math.pow(n,2);for(var i=0;i<this.columnNum;i++){for(var o=[],a=0;a<this.rowNum;a++){var s={dx:i,dy:a,x:i*this.CELL_W,y:a*this.CELL_H,occupied:!1};o.push(s)}this.cells.push(o)}},t.prototype.findGridByNodeId=function(t){for(var e,n,r=0;r<this.columnNum;r++)for(var i=0;i<this.rowNum;i++)if(this.cells[r][i].node&&(null===(n=null===(e=this.cells[r][i])||void 0===e?void 0:e.node)||void 0===n?void 0:n.id)===t)return{column:r,row:i};return null},t.prototype.sqdist=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},t.prototype.occupyNearest=function(e){for(var n,r=t.MIN_DIST,i=null,o=0;o<this.columnNum;o++)for(var a=0;a<this.rowNum;a++)!this.cells[o][a].occupied&&(n=this.sqdist(e,this.cells[o][a]))<r&&(r=n,i=this.cells[o][a]);return i&&(i.occupied=!0),i},t.prototype.insertColumn=function(t,e){if(!(e<=0)){for(var r=0;r<e;r++){this.cells[r+this.columnNum]=[];for(var i=0;i<this.rowNum;i++)this.cells[r+this.columnNum][i]={dx:r,dy:i,x:r*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null}}for(r=this.columnNum-1;r>t;r--)for(i=0;i<this.rowNum;i++)this.cells[r+e][i]=n(n({},this.cells[r][i]),{x:(r+e)*this.CELL_W,y:i*this.CELL_H}),this.cells[r][i]={x:r*this.CELL_W,y:i*this.CELL_H,occupied:!0,node:null};for(i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=t&&(this.additionColumn[i]+=e);for(r=0;r<e;r++)this.additionColumn.push(t+r+1);this.columnNum+=e}},t.prototype.insertRow=function(t,e){if(!(e<=0)){for(var r=0;r<e;r++)for(var i=0;i<this.columnNum;i++)this.cells[i][r+this.rowNum]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(i=0;i<this.columnNum;i++)for(r=this.rowNum-1;r>t;r--)this.cells[i][r+e]=n(n({},this.cells[i][r]),{dx:i,dy:r+e,x:i*this.CELL_W,y:(r+e)*this.CELL_H}),this.cells[i][r]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(r=0;r<this.additionRow.length;r++)this.additionRow[r]>=t&&(this.additionRow[r]+=e);for(i=0;i<e;i++)this.additionRow.push(t+i+1);this.rowNum+=e}},t.prototype.getNodes=function(){for(var t=[],e=0;e<this.columnNum;e++)for(var n=0;n<this.rowNum;n++)this.cells[e][n].node&&t.push(this.cells[e][n]);return t},t.MIN_DIST=50,t.DEFAULT_CELL_W=80,t.DEFAULT_CELL_H=80,t}();e.default=r},441:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=void 0;var a=n(2329),s=o(n(4015)),u=function(t){function e(e){var n=t.call(this)||this;return n.width=300,n.height=300,n.nodeMinGap=50,n.onLayoutEnd=function(){},e&&n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges;return null==e||e.forEach((function(t){t.size||(t.size=[50,50])})),(0,s.default)({nodes:e,edges:n},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then((function(){t.onLayoutEnd&&t.onLayoutEnd()}))},e.prototype.getType=function(){return"er"},e}(a.Base);e.ERLayout=u},7064:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=1200,r=800,i=1e7,o=10,a=3.141592653589793,s=1.5707963267948966,u=.375*a,c=.625*a,l=new Map,f=10,d=10,h=.8,p=.1,g=.5;function v(t,e){var n=(l.get(t.id)||[]).find((function(t){return t.source===e.id||t.target===e.id})),r=t.size[0]*t.size[1],a=e.size[0]*e.size[1],f=r>a?e:t,d=r>a?t:e,h=f.x-f.size[0]/2,p=f.y-f.size[1]/2,g=f.x+f.size[0]/2,v=f.y+f.size[1]/2,m=d.x-d.size[0]/2,y=d.y-d.size[1]/2,b=d.x+d.size[0]/2,x=d.y+d.size[1]/2,w=f.x,_=f.y,E=d.x,S=d.y,C=0,k=0;if(g>=m&&b>=h&&v>=y&&x>=p)0===(k=Math.sqrt(Math.pow(E-w,2)+Math.pow(S-_,2)))&&(k=1e-7),C=1*o/k*100+((g<b?g:b)-(h>m?h:m))*((v<x?v:x)-(p>y?p:y)),C*=i;else{var M=!1,O=function(t,e,n){var r=t.x-t.size[0]/2,i=t.y-t.size[1]/2,o=t.x+t.size[0]/2,a=t.y+t.size[1]/2,l=e.x-e.size[0]/2,f=e.y-e.size[1]/2,d=e.x+e.size[0]/2,h=e.y+e.size[1]/2,p=t.x,g=t.y,v=e.x,m=e.y,y=v-p,b=Math.atan2(y,m-g),x=0,w=0,_=0,E=0;b>s?(w=i-h,x=l-o,_=parseFloat(w?(w/Math.cos(b)).toFixed(2):x.toFixed(2)),E=parseFloat(x?(x/Math.sin(b)).toFixed(2):w.toFixed(2))):_=E=0<b&&b<=s?(w=f-a)>(x=l-o)?parseFloat(w?(w/Math.cos(b)).toFixed(2):x.toFixed(2)):parseFloat(x?(x/Math.sin(b)).toFixed(2):w.toFixed(2)):b<-s?(w=i-h)>(x=-(d-r))?parseFloat(w?(w/Math.cos(b)).toFixed(2):x.toFixed(2)):parseFloat(x?(x/Math.sin(b)).toFixed(2):w.toFixed(2)):(w=f-a)>(x=Math.abs(y)>(o-r)/2?r-d:y)?parseFloat(w?(w/Math.cos(b)).toFixed(2):x.toFixed(2)):parseFloat(x&&0!==b?(x/Math.sin(b)).toFixed(2):w.toFixed(2));var S=parseFloat(b.toFixed(2)),C=n;return n&&(C=u<S&&S<c),{distance:Math.abs(_<E?_:E),isHoriz:C}}(f,d,M);k=O.distance,M=O.isHoriz,k<=o?C+=0!==k?n?o+1*i/k:o+i*o/k:i:(C+=k,n&&(C+=k*k))}return C}function m(t){for(var e=0,i=0;i<t.length;i++){var o=t[i];(o.x<0||o.y<0||o.x>n||o.y>r)&&(e+=1e12);for(var a=i+1;a<t.length;a++)e+=v(o,t[a])}return e}function y(t,e,n,r){var i=new Map;n.forEach((function(t,e){i.set(t.id,t)}));var o=r.filter((function(e){return e.source===t.id||e.target===t.id}))||[],a=[];o.forEach((function(e){var n=e.source===t.id?e.target:e.source,r=i.get(n);r&&a.push(r)}));for(var s=!0,u=0;u<a.length;u++){var c=a[u],l=180*Math.atan((t.y-c.y)/(c.x-t.y)),f=180*Math.atan((e.y-c.y)/(c.x-e.y)),d=l>70&&l<110,h=f>70&&f<110;if((l<30||l>150)&&!(f<30||f>150)||l*f<0){s=!1;break}if(d&&!h||l*f<0){s=!1;break}if((c.x-t.x)*(c.x-e.x)<0){s=!1;break}if((c.y-t.y)*(c.y-e.y)<0){s=!1;break}}return s}function b(t,e){for(var n=!1,r=1*f,i=1*d,o=[r,-r,0,0],a=[0,0,i,-i],s=0;s<t.length;++s)for(var u=t[s],c=x(u,t),l=0;l<o.length;l++)if(y(u,{x:u.x+o[l],y:u.y+a[l]},t,e)){u.x+=o[l],u.y+=a[l];var v=x(u,t),b=Math.random();v<c||b<h&&b>p?(c=v,n=!0):(u.x-=o[l],u.y-=a[l])}return h>p&&(h*=g),n?m(t):0}function x(t,e){var i=0;(t.x<0||t.y<0||t.x+t.size[0]+20>n||t.y+t.size[1]+20>r)&&(i+=1e12);for(var o=0;o<e.length;++o)t.id!==e[o].id&&(i+=v(t,e[o]));return i}e.default=function(t,e){if(0===t.length)return{nodes:t,edges:e};t.forEach((function(t){var n=e.filter((function(e){return e.source===t.id||e.target===t.id}));l.set(t,n)})),t.sort((function(t,e){var n,r;return(null===(n=l.get(t.id))||void 0===n?void 0:n.length)-(null===(r=l.get(e.id))||void 0===r?void 0:r.length)}));for(var n=m(t),r=20,i=1,o=0,a=0;r>0&&!(++a>=50);){var s=b(t,e);0!==s&&(o=s),i=o-n,n=o,0===i?--r:r=20}return t.forEach((function(t){t.x=t.x-t.size[0]/2,t.y=t.y-t.size[1]/2})),{nodes:t,edges:e}}},1019:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forceNBody=void 0;var r=n(4307);function i(t){var e=0,n=0,r=0;if(t.length){for(var i=0;i<4;i++)(o=t[i])&&o.weight&&(e+=o.weight,n+=o.x*o.weight,r+=o.y*o.weight);t.x=n/e,t.y=r/e,t.weight=e}else{var o=t;t.x=o.data.x,t.y=o.data.y,t.weight=o.data.weight}}e.forceNBody=function(t,e,n,a,s){var u=n/a,c=t.map((function(t,n){var r=e[t.id],i=r.data,o=r.x,a=r.y,s=r.size,c=i.layout.force.nodeStrength;return{x:o,y:a,size:s,index:n,vx:0,vy:0,weight:u*c}})),l=(0,r.quadtree)(c,(function(t){return t.x}),(function(t){return t.y})).visitAfter(i);return c.forEach((function(t){!function(t,e){e.visit((function(e,n,r,i,a){return o(e,n,r,i,a,t)}))}(t,l)})),c.map((function(n,r){var i=e[t[r].id].data.layout.force.mass,o=void 0===i?1:i;s[2*r]=n.vx/o,s[2*r+1]=n.vy/o})),s};var o=function(t,e,n,r,i,o){var a=o.x-t.x||.1,s=o.y-t.y||.1,u=r-e,c=a*a+s*s,l=Math.sqrt(c)*c;if(u*u*.81<c){var f=t.weight/l;return o.vx+=a*f,o.vy+=s*f,!0}if(t.length)return!1;t.data!==o&&(f=t.data.weight/l,o.vx+=a*f,o.vy+=s*f)}},6740:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Force2Layout=void 0;var a=n(2329),s=n(9784),u=n(1019),c=function(t,e){return t?(0,s.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},l=function(t){function e(e){var n=t.call(this)||this;n.maxIteration=1e3,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=500,n.minMovement=.4,n.interval=.02,n.factor=1,n.linkDistance=200,n.gravity=0,n.clusterNodeStrength=20,n.preventOverlap=!0,n.distanceThresholdMode="mean",n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.judgingDistance=0,n.centripetalOptions={leaf:2,single:2,others:1,center:function(t){return{x:n.width/2,y:n.height/2}}};var r=e.getMass;return n.propsGetMass=r,n.updateCfg(e),n}return i(e,t),e.prototype.getCentripetalOptions=function(){var t,e=this,n=e.leafCluster,r=e.clustering,i=e.nodeClusterBy,a=e.nodes,u=e.nodeMap,c=e.clusterNodeStrength,l=function(t){return"function"==typeof c?c(t):c},f={};if(n){t=this.getSameTypeLeafMap()||{};var d=Array.from(new Set(null==a?void 0:a.map((function(t){return t[i]}))))||[];f={single:100,leaf:function(e,n,r){var i=t[e.id]||{},o=i.relativeLeafNodes,a=i.sameTypeLeafNodes;return(null==a?void 0:a.length)===(null==o?void 0:o.length)||1===(null==d?void 0:d.length)?1:l(e)},others:1,center:function(e,n,r){var i,o,a=((null===(i=e.data)||void 0===i?void 0:i.layout)||{}).degree;if(!a)return{x:100,y:100};if(1===a){var u=(t[e.id]||{}).sameTypeLeafNodes,c=void 0===u?[]:u;1===c.length?o=void 0:c.length>1&&(o=(0,s.getAvgNodePosition)(c))}else o=void 0;return{x:null==o?void 0:o.x,y:null==o?void 0:o.y}}}}if(r){t||(t=this.getSameTypeLeafMap());var h=Array.from(new Set(a.map((function(t,e){return t[i]})))).filter((function(t){return void 0!==t})),p={};h.forEach((function(t){var e=a.filter((function(e){return e[i]===t})).map((function(t){return u[t.id]}));p[t]=(0,s.getAvgNodePosition)(e)})),f={single:function(t){return l(t)},leaf:function(t){return l(t)},others:function(t){return l(t)},center:function(t,e,n){var r=p[t[i]];return{x:null==r?void 0:r.x,y:null==r?void 0:r.y}}}}this.centripetalOptions=o(o({},this.centripetalOptions),f);var g=this.centripetalOptions,v=g.leaf,m=g.single,y=g.others;v&&"function"!=typeof v&&(this.centripetalOptions.leaf=function(){return v}),m&&"function"!=typeof m&&(this.centripetalOptions.single=function(){return m}),y&&"function"!=typeof y&&(this.centripetalOptions.others=function(){return y})},e.prototype.updateCfg=function(t){t&&Object.assign(this,t)},e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t=this;t.stop();var e=t.nodes,n=t.edges,r=t.defSpringLen;if(t.judgingDistance=0,e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var i=t.center;if(1===e.length)return e[0].x=i[0],e[0].y=i[1],void t.onLayoutEnd([o({},e[0])]);t.degreesMap=(0,s.getDegreeMap)(e,n),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=function(e){var n=1;(0,s.isNumber)(e.mass)&&(n=e.mass);var r=t.degreesMap[e.id].all;return!r||r<5?n:5*r*n};var a,u=t.nodeSize;if(t.preventOverlap){var l,f=t.nodeSpacing;l=(0,s.isNumber)(f)?function(){return f}:(0,s.isFunction)(f)?f:function(){return 0},a=u?(0,s.isArray)(u)?function(t){return Math.max(u[0],u[1])+l(t)}:function(t){return u+l(t)}:function(t){return t.size?(0,s.isArray)(t.size)?Math.max(t.size[0],t.size[1])+l(t):(0,s.isObject)(t.size)?Math.max(t.size.width,t.size.height)+l(t):t.size+l(t):10+l(t)}}t.nodeSize=a,t.linkDistance=c(t.linkDistance,1),t.nodeStrength=c(t.nodeStrength,1),t.edgeStrength=c(t.edgeStrength,1);var d={},h={};e.forEach((function(e,n){(0,s.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,s.isNumber)(e.y)||(e.y=Math.random()*t.height);var r=t.degreesMap[e.id];d[e.id]=o(o({},e),{data:o(o({},e.data),{size:t.nodeSize(e)||30,layout:{inDegree:r.in,outDegree:r.out,degree:r.all,tDegree:r.in,sDegree:r.out,force:{mass:t.getMass(e),nodeStrength:t.nodeStrength(e)}}})}),h[e.id]=n})),t.nodeMap=d,t.nodeIdxMap=h,t.edgeInfos=[],null==n||n.forEach((function(e){var n=d[e.source],i=d[e.target];n&&i?t.edgeInfos.push({edgeStrength:t.edgeStrength(e),linkDistance:r?r(o(o({},e),{source:n,target:i}),n,i):t.linkDistance(e,n,i)||1+(u(n)+u(n)||0)/2}):elf.edgeInfos.push({})})),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||function(){},t.run()}else t.onLayoutEnd([])},e.prototype.run=function(){var t=this,e=t.maxIteration,n=t.nodes,r=t.workerEnabled,i=t.minMovement,o=t.animate,a=t.nodeMap;if(n){var s=[];n.forEach((function(t,e){s[2*e]=0,s[2*e+1]=0}));var u=e;if(r||!o){for(var c=0;(t.judgingDistance>i||c<1)&&c<u;c++)t.runOneStep(c,s);t.onLayoutEnd(Object.values(a))}else{if("undefined"==typeof window)return;var l=0;this.timeInterval=window.setInterval((function(){n&&(t.runOneStep(l,s),(++l>=u||t.judgingDistance<i)&&(t.onLayoutEnd(Object.values(a)),window.clearInterval(t.timeInterval)))}),0)}}},e.prototype.runOneStep=function(t,e){var n,r=this,i=r.nodes,o=r.edges,a=(r.nodeMap,r.monitor),s=[];if(null==i?void 0:i.length){r.calRepulsive(s),o&&r.calAttractive(s),r.calGravity(s);var u=r.interval;r.updateVelocity(s,e,u),r.updatePosition(e,u),null===(n=r.tick)||void 0===n||n.call(r),a&&a({energy:this.calTotalEnergy(s),nodes:i,edges:o,iterations:t})}},e.prototype.calTotalEnergy=function(t){var e=this.nodes,n=this.nodeMap;if(!(null==e?void 0:e.length))return 0;var r=0;return e.forEach((function(e,i){var o=t[2*i],a=t[2*i+1],s=o*o+a*a,u=n[e.id].data.layout.force.mass;r+=(void 0===u?1:u)*s*.5})),r},e.prototype.calRepulsive=function(t){var e=this,n=e.nodes,r=e.nodeMap,i=e.factor,o=e.coulombDisScale;e.nodeSize,(0,u.forceNBody)(n,r,i,o*o,t)},e.prototype.calAttractive=function(t){var e=this,n=e.edges,r=e.nodeMap,i=e.nodeIdxMap,o=e.edgeInfos;e.nodeSize,n.forEach((function(e,n){var a=(0,s.getEdgeTerminal)(e,"source"),u=(0,s.getEdgeTerminal)(e,"target"),c=r[a],l=r[u];if(c&&l){var f=l.x-c.x,d=l.y-c.y;f||d||(f=.01*Math.random(),d=.01*Math.random());var h=Math.sqrt(f*f+d*d),p=f/h,g=d/h,v=o[n]||{},m=v.linkDistance,y=void 0===m?200:m,b=v.edgeStrength,x=(y-h)*(void 0===b?200:b),w=1/(c.data.layout.force.mass||1),_=1/(l.data.layout.force.mass||1),E=p*x,S=g*x,C=2*i[a],k=2*i[u];t[C]-=E*w,t[C+1]-=S*w,t[k]+=E*_,t[k+1]+=S*_}}))},e.prototype.calGravity=function(t){var e,n=this,r=n.nodes,i=n.edges,o=void 0===i?[]:i,a=n.nodeMap,u=n.width,c=n.height,l=n.center,f=n.gravity,d=n.degreesMap,h=n.centripetalOptions;if(r)for(var p=r.length,g=0;g<p;g++){var v=2*g,m=a[r[g].id],y=m.data.layout.force.mass,b=void 0===y?1:y,x=0,w=0,_=f,E=d[m.id],S=E.in,C=E.out,k=E.all,M=null===(e=n.getCenter)||void 0===e?void 0:e.call(n,m,k);if(M){var O=M[0],T=M[1],A=M[2];x=m.x-O,w=m.y-T,_=A}else x=m.x-l[0],w=m.y-l[1];if(_&&(t[v]-=_*x/b,t[v+1]-=_*w/b),h){var N=h.leaf,I=h.single,P=h.others,D=h.center,L=(null==D?void 0:D(m,r,o,u,c))||{x:0,y:0,centerStrength:0},R=L.x,j=L.y,B=L.centerStrength;if(!(0,s.isNumber)(R)||!(0,s.isNumber)(j))continue;var F=(m.x-R)/b,z=(m.y-j)/b;if(B&&(t[v]-=B*F,t[v+1]-=B*z),0===k){var $=I(m);if(!$)continue;t[v]-=$*F,t[v+1]-=$*z;continue}if(0===S||0===C){var G=N(m,r,o);if(!G)continue;t[v]-=G*F,t[v+1]-=G*z;continue}var V=P(m);if(!V)continue;t[v]-=V*F,t[v+1]-=V*z}}},e.prototype.updateVelocity=function(t,e,n){var r=this,i=r.nodes,o=r.damping,a=r.maxSpeed;(null==i?void 0:i.length)&&i.forEach((function(r,i){var s=(e[2*i]+t[2*i]*n)*o||.01,u=(e[2*i+1]+t[2*i+1]*n)*o||.01,c=Math.sqrt(s*s+u*u);if(c>a){var l=a/c;s*=l,u*=l}e[2*i]=s,e[2*i+1]=u}))},e.prototype.updatePosition=function(t,e){var n=this,r=n.nodes,i=n.distanceThresholdMode,o=n.nodeMap;if(null==r?void 0:r.length){var a=0;"max"===i?n.judgingDistance=-1/0:"min"===i&&(n.judgingDistance=1/0),r.forEach((function(r,u){var c=o[r.id];if((0,s.isNumber)(r.fx)&&(0,s.isNumber)(r.fy))return r.x=r.fx,r.y=r.fy,c.x=r.x,void(c.y=r.y);var l=t[2*u]*e,f=t[2*u+1]*e;r.x+=l,r.y+=f,c.x=r.x,c.y=r.y;var d=Math.sqrt(l*l+f*f);switch(i){case"max":n.judgingDistance<d&&(n.judgingDistance=d);break;case"min":n.judgingDistance>d&&(n.judgingDistance=d);break;default:a+=d}})),i&&"mean"!==i||(n.judgingDistance=a/r.length)}else this.judgingDistance=0},e.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"force2"},e.prototype.getSameTypeLeafMap=function(){var t=this,e=t.nodeClusterBy,n=t.nodes,r=t.edges,i=t.nodeMap,o=t.degreesMap;if(null==n?void 0:n.length){var a={};return n.forEach((function(t,n){1===o[t.id].all&&(a[t.id]=(0,s.getCoreNodeAndRelativeLeafNodes)("leaf",t,r,e,o,i))})),a}},e}(a.Base);e.Force2Layout=l},9712:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}return t.prototype.distanceTo=function(t){var e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)},t.prototype.setPos=function(t,e){this.rx=t,this.ry=e},t.prototype.resetForce=function(){this.fx=0,this.fy=0},t.prototype.addForce=function(t){var e=t.rx-this.rx,n=t.ry-this.ry,r=Math.hypot(e,n);r=r<1e-4?1e-4:r;var i=this.g*(this.degree+1)*(t.degree+1)/r;this.fx+=i*e/r,this.fy+=i*n/r},t.prototype.in=function(t){return t.contains(this.rx,this.ry)},t.prototype.add=function(e){var n=this.mass+e.mass;return new t({rx:(this.rx*this.mass+e.rx*e.mass)/n,ry:(this.ry*this.mass+e.ry*e.mass)/n,mass:n,degree:this.degree+e.degree})},t}();e.default=n},8564:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForceAtlas2Layout=void 0;var a=n(2329),s=n(9784),u=o(n(9712)),c=o(n(1638)),l=o(n(2732)),f=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.kr=5,n.kg=1,n.mode="normal",n.preventOverlap=!1,n.dissuadeHubs=!1,n.barnesHut=void 0,n.maxIteration=0,n.ks=.1,n.ksmax=10,n.tao=.1,n.onLayoutEnd=function(){},n.prune=void 0,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.onLayoutEnd,r=t.prune,i=t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);for(var o=[],a=e.length,u=0;u<a;u+=1){var c=e[u],l=10,f=10;(0,s.isNumber)(c.size)&&(l=c.size,f=c.size),(0,s.isArray)(c.size)?(isNaN(c.size[0])||(l=c.size[0]),isNaN(c.size[1])||(f=c.size[1])):(0,s.isObject)(c.size)&&(l=c.size.width,f=c.size.height),t.getWidth&&!isNaN(t.getWidth(c))&&(f=t.getWidth(c)),t.getHeight&&!isNaN(t.getHeight(c))&&(l=t.getHeight(c));var d=Math.max(l,f);o.push(d)}void 0===t.barnesHut&&a>250&&(t.barnesHut=!0),void 0===t.prune&&a>100&&(t.prune=!0),0!==this.maxIteration||t.prune?0===this.maxIteration&&r&&(i=100,a<=200&&a>100?i=500:a>200&&(i=950),this.maxIteration=i):(i=250,a<=200&&a>100?i=1e3:a>200&&(i=1200),this.maxIteration=i),t.kr||(t.kr=50,a>100&&a<=500?t.kr=20:a>500&&(t.kr=1)),t.kg||(t.kg=20,a>100&&a<=500?t.kg=10:a>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(o),n()},e.prototype.updateNodesByForces=function(t){for(var e=this,n=e.edges,r=e.maxIteration,i=e.nodes,o=n.filter((function(t){return(0,s.getEdgeTerminal)(t,"source")!==(0,s.getEdgeTerminal)(t,"target")})),a=i.length,u=o.length,c=[],l={},f={},d=[],h=0;h<a;h+=1)l[i[h].id]=h,c[h]=0,(void 0===i[h].x||isNaN(i[h].x))&&(i[h].x=1e3*Math.random()),(void 0===i[h].y||isNaN(i[h].y))&&(i[h].y=1e3*Math.random()),d.push({x:i[h].x,y:i[h].y});for(h=0;h<u;h+=1){for(var p=void 0,g=void 0,v=0,m=0,y=0;y<a;y+=1){var b=(0,s.getEdgeTerminal)(o[h],"source"),x=(0,s.getEdgeTerminal)(o[h],"target");i[y].id===b?(p=i[y],v=y):i[y].id===x&&(g=i[y],m=y),f[h]={sourceIdx:v,targetIdx:m}}p&&(c[l[p.id]]+=1),g&&(c[l[g.id]]+=1)}var w=r;if(i=this.iterate(w,l,f,u,c,t),e.prune){for(y=0;y<u;y+=1)c[f[y].sourceIdx]<=1?(i[f[y].sourceIdx].x=i[f[y].targetIdx].x,i[f[y].sourceIdx].y=i[f[y].targetIdx].y):c[f[y].targetIdx]<=1&&(i[f[y].targetIdx].x=i[f[y].sourceIdx].x,i[f[y].targetIdx].y=i[f[y].sourceIdx].y);e.prune=!1,e.barnesHut=!1,w=100,i=this.iterate(w,l,f,u,c,t)}return i},e.prototype.iterate=function(t,e,n,r,i,o){for(var a=this,s=a.nodes,c=a.kr,l=a.preventOverlap,f=a.barnesHut,d=s.length,h=0,p=t,g=[],v=[],m=[],y=0;y<d;y+=1)if(g[2*y]=0,g[2*y+1]=0,f){var b={id:y,rx:s[y].x,ry:s[y].y,mass:1,g:c,degree:i[y]};m[y]=new u.default(b)}for(;p>0;){for(y=0;y<d;y+=1)v[2*y]=g[2*y],v[2*y+1]=g[2*y+1],g[2*y]=0,g[2*y+1]=0;g=this.getAttrForces(p,50,r,e,n,i,o,g),g=f&&(l&&p>50||!l)?this.getOptRepGraForces(g,m,i):this.getRepGraForces(p,50,g,100,o,i);var x=this.updatePos(g,v,h,i);s=x.nodes,h=x.sg,p--,a.tick&&a.tick()}return s},e.prototype.getAttrForces=function(t,e,n,r,i,o,a,s){for(var u=this,c=u.nodes,l=u.preventOverlap,f=u.dissuadeHubs,d=u.mode,h=u.prune,p=0;p<n;p+=1){var g=c[i[p].sourceIdx],v=i[p].sourceIdx,m=c[i[p].targetIdx],y=i[p].targetIdx;if(!h||!(o[v]<=1||o[y]<=1)){var b=[m.x-g.x,m.y-g.y],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x,l&&t<e&&(x=x-a[v]-a[y]);var w=x,_=w;"linlog"===d&&(_=w=Math.log(1+x)),f&&(w=x/o[v],_=x/o[y]),l&&t<e&&x<=0?(w=0,_=0):l&&t<e&&x>0&&(w=x,_=x),s[2*r[g.id]]+=w*b[0],s[2*r[m.id]]-=_*b[0],s[2*r[g.id]+1]+=w*b[1],s[2*r[m.id]+1]-=_*b[1]}}return s},e.prototype.getRepGraForces=function(t,e,n,r,i,o){for(var a=this,s=a.nodes,u=a.preventOverlap,c=a.kr,l=a.kg,f=a.center,d=a.prune,h=s.length,p=0;p<h;p+=1){for(var g=p+1;g<h;g+=1)if(!d||!(o[p]<=1||o[g]<=1)){var v=[s[g].x-s[p].x,s[g].y-s[p].y],m=Math.hypot(v[0],v[1]);m=m<1e-4?1e-4:m,v[0]=v[0]/m,v[1]=v[1]/m,u&&t<e&&(m=m-i[p]-i[g]);var y=c*(o[p]+1)*(o[g]+1)/m;u&&t<e&&m<0?y=r*(o[p]+1)*(o[g]+1):u&&t<e&&0===m?y=0:u&&t<e&&m>0&&(y=c*(o[p]+1)*(o[g]+1)/m),n[2*p]-=y*v[0],n[2*g]+=y*v[0],n[2*p+1]-=y*v[1],n[2*g+1]+=y*v[1]}var b=[s[p].x-f[0],s[p].y-f[1]],x=Math.hypot(b[0],b[1]);b[0]=b[0]/x,b[1]=b[1]/x;var w=l*(o[p]+1);n[2*p]-=w*b[0],n[2*p+1]-=w*b[1]}return n},e.prototype.getOptRepGraForces=function(t,e,n){for(var r=this,i=r.nodes,o=r.kg,a=r.center,s=r.prune,u=i.length,f=9e10,d=-9e10,h=9e10,p=-9e10,g=0;g<u;g+=1)s&&n[g]<=1||(e[g].setPos(i[g].x,i[g].y),i[g].x>=d&&(d=i[g].x),i[g].x<=f&&(f=i[g].x),i[g].y>=p&&(p=i[g].y),i[g].y<=h&&(h=i[g].y));var v={xmid:(d+f)/2,ymid:(p+h)/2,length:Math.max(d-f,p-h),massCenter:a,mass:u},m=new c.default(v),y=new l.default(m);for(g=0;g<u;g+=1)s&&n[g]<=1||e[g].in(m)&&y.insert(e[g]);for(g=0;g<u;g+=1)if(!(s&&n[g]<=1)){e[g].resetForce(),y.updateForce(e[g]),t[2*g]-=e[g].fx,t[2*g+1]-=e[g].fy;var b=[i[g].x-a[0],i[g].y-a[1]],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x;var w=o*(n[g]+1);t[2*g]-=w*b[0],t[2*g+1]-=w*b[1]}return t},e.prototype.updatePos=function(t,e,n,r){for(var i=this,o=i.nodes,a=i.ks,u=i.tao,c=i.prune,l=i.ksmax,f=o.length,d=[],h=[],p=0,g=0,v=0;v<f;v+=1)if(!(c&&r[v]<=1)){var m=[t[2*v]-e[2*v],t[2*v+1]-e[2*v+1]],y=Math.hypot(m[0],m[1]),b=[t[2*v]+e[2*v],t[2*v+1]+e[2*v+1]],x=Math.hypot(b[0],b[1]);d[v]=y,h[v]=x/2,p+=(r[v]+1)*d[v],g+=(r[v]+1)*h[v]}var w=n;for(n=u*g/p,0!==w&&(n=n>1.5*w?1.5*w:n),v=0;v<f;v+=1)if(!(c&&r[v]<=1||(0,s.isNumber)(o[v].fx)&&(0,s.isNumber)(o[v].fy))){var _=a*n/(1+n*Math.sqrt(d[v])),E=Math.hypot(t[2*v],t[2*v+1]),S=l/(E=E<1e-4?1e-4:E),C=(_=_>S?S:_)*t[2*v],k=_*t[2*v+1];o[v].x+=C,o[v].y+=k}return{nodes:o,sg:n}},e}(a.Base);e.ForceAtlas2Layout=f},1638:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}return t.prototype.getLength=function(){return this.length},t.prototype.contains=function(t,e){var n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n},t.prototype.NW=function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},t.prototype.NE=function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},t.prototype.SW=function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},t.prototype.SE=function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},t}();e.default=n},2732:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}return t.prototype.insert=function(e){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new t(this.quad.NW()),this.NE=new t(this.quad.NE()),this.SW=new t(this.quad.SW()),this.SE=new t(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e)):this.body=e},t.prototype._putBody=function(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))},t.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},t.prototype.updateForce=function(t){null!=this.body&&t!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t)))},t}();e.default=n},9806:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(9013)),s=n(9784);e.default=function(){function t(t){return function(){return t}}var e,n=function(t){return t.cluster},r=t(1),i=t(-1),o=t(100),u=t(.1),c=[0,0],l=[],f={},d=[],h=100,p=100,g={none:{x:0,y:0}},v=[],m="force",y=!0,b=.1;function x(t){if(!y)return x;e.tick(),_();for(var r=0,i=l.length,o=void 0,a=t*b;r<i;++r)(o=l[r]).vx+=(g[n(o)].x-o.x)*a,o.vy+=(g[n(o)].y-o.y)*a}function w(){l&&function(){if(l&&l.length){if(void 0===n(l[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t,c,g,m,y,b=(t=[],c=[],g={},{},y=[],m=function(t){var e={};return t.forEach((function(t){var r=n(t);e[r]||(e[r]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var i=n(t),o=r(t),a=e[i];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(o*o)*1.3,e[i]=a})),e}(l),y=function(t){var e={},r=[];return t.forEach((function(t){var r=function(t){var e=(0,s.getEdgeTerminal)(t,"source"),r=(0,s.getEdgeTerminal)(t,"target"),i=n(f[e]),o=n(f[r]);return i<=o?"".concat(i,"~").concat(o):"".concat(o,"~").concat(i)}(t),i=0;void 0!==e[r]&&(i=e[r]),i+=1,e[r]=i})),Object.entries(e).forEach((function(t){var e=t[0],n=t[1],i=e.split("~")[0],o=e.split("~")[1];void 0!==i&&void 0!==o&&r.push({source:i,target:o,count:n})})),r}(d),Object.keys(m).forEach((function(e,n){var r=m[e];t.push({id:e,size:r.count,r:Math.sqrt(r.sumforceNodeSize/Math.PI)}),g[e]=n})),y.forEach((function(t){var e=(0,s.getEdgeTerminal)(t,"source"),n=(0,s.getEdgeTerminal)(t,"target"),r=g[e],i=g[n];void 0!==r&&void 0!==i&&c.push({source:r,target:i,count:t.count})})),{nodes:t,links:c});e=a.forceSimulation(b.nodes).force("x",a.forceX(h).strength(.1)).force("y",a.forceY(p).strength(.1)).force("collide",a.forceCollide((function(t){return t.r})).iterations(4)).force("charge",a.forceManyBody().strength(i)).force("links",a.forceLink(b.nodes.length?b.links:[]).distance(o).strength(u)),v=e.nodes(),_()}}()}function _(){return g={none:{x:0,y:0}},v.forEach((function(t){g[t.id]={x:t.x-c[0],y:t.y-c[1]}})),g}return x.initialize=function(t){l=t,w()},x.template=function(t){return arguments.length?(m=t,w(),x):m},x.groupBy=function(t){return arguments.length?"string"==typeof t?(n=function(e){return e[t]},x):(n=t,x):n},x.enableGrouping=function(t){return arguments.length?(y=t,x):y},x.strength=function(t){return arguments.length?(b=t,x):b},x.centerX=function(t){return arguments.length?(h=t,x):h},x.centerY=function(t){return arguments.length?(p=t,x):p},x.nodes=function(t){return arguments.length?(function(t){f={},t.forEach((function(t){f[t.id]=t}))}(t||[]),l=t||[],x):l},x.links=function(t){return arguments.length?(d=t||[],w(),x):d},x.forceNodeSize=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),w(),x):r},x.nodeSize=x.forceNodeSize,x.forceCharge=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),w(),x):i},x.forceLinkDistance=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),w(),x):o},x.forceLinkStrength=function(e){return arguments.length?(u="function"==typeof e?e:t(+e),w(),x):u},x.offset=function(t){return arguments.length?(c=t,x):c},x.getFocis=_,x}},8810:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForceLayout=void 0;var c=s(n(9013)),l=u(n(9806)),f=n(9784),d=n(2329),h=n(6470),p=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.nodeStrength=null,n.edgeStrength=null,n.preventOverlap=!1,n.clusterNodeStrength=null,n.clusterEdgeStrength=null,n.clusterEdgeDistance=null,n.clusterNodeSize=null,n.clusterFociStrength=null,n.linkDistance=50,n.alphaDecay=.028,n.alphaMin=.001,n.alpha=.3,n.collideStrength=1,n.workerEnabled=!1,n.tick=function(){},n.onLayoutEnd=function(){},n.ticking=void 0,e&&n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},e.prototype.init=function(t){var e=this;e.nodes=t.nodes||[];var n=t.edges||[];e.edges=n.map((function(t){var e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(r){n.indexOf(r)>-1||(e[r]=t[r])})),e})),e.ticking=!1},e.prototype.execute=function(t){var e=this,n=e.nodes,r=e.edges;if(!e.ticking){var i=e.forceSimulation,o=e.alphaMin,a=e.alphaDecay,s=e.alpha;if(i)t&&(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),i.nodes(n),r&&e.edgeForce?e.edgeForce.links(r):r&&!e.edgeForce&&(d=c.forceLink().id((function(t){return t.id})).links(r),e.edgeStrength&&d.strength(e.edgeStrength),e.linkDistance&&d.distance(e.linkDistance),e.edgeForce=d,i.force("link",d))),e.preventOverlap&&e.overlapProcess(i),i.alpha(s).restart(),this.ticking=!0;else try{var u=c.forceManyBody();if(e.nodeStrength&&u.strength(e.nodeStrength),i=c.forceSimulation().nodes(n),e.clustering){var f=(0,l.default)();f.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&f.links(r),n&&f.nodes(n),f.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=f,i.force("group",f)}if(i.force("center",c.forceCenter(e.center[0],e.center[1])).force("charge",u).alpha(s).alphaDecay(a).alphaMin(o),e.preventOverlap&&e.overlapProcess(i),r){var d=c.forceLink().id((function(t){return t.id})).links(r);e.edgeStrength&&d.strength(e.edgeStrength),e.linkDistance&&d.distance(e.linkDistance),e.edgeForce=d,i.force("link",d)}if(e.workerEnabled&&!g()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){i.stop();for(var p=function(t){var e=t.alphaMin(),n=t.alphaTarget(),r=t.alpha(),i=Math.log((e-n)/(r-n))/Math.log(1-t.alphaDecay());return Math.ceil(i)}(i),v=1;v<=p;v++)i.tick(),postMessage({nodes:n,currentTick:v,totalTicks:p,type:h.LAYOUT_MESSAGE.TICK},void 0);e.ticking=!1}else i.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=i,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}},e.prototype.overlapProcess=function(t){var e,n,r=this,i=r.nodeSize,o=r.nodeSpacing,a=r.collideStrength;if(n=(0,f.isNumber)(o)?function(){return o}:(0,f.isFunction)(o)?o:function(){return 0},i)if((0,f.isFunction)(i))e=function(t){return i(t)+n(t)};else if((0,f.isArray)(i)){var s=(i[0]>i[1]?i[0]:i[1])/2;e=function(t){return s+n(t)}}else if((0,f.isNumber)(i)){var u=i/2;e=function(t){return u+n(t)}}else e=function(){return 10};else e=function(t){return t.size?(0,f.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+n(t):(0,f.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2+n(t):t.size/2+n(t):10+n(t)};t.force("collisionForce",c.forceCollide(e).strength(a))},e.prototype.updateCfg=function(t){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,Object.assign(e,t)},e.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},e}(d.Base);function g(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}e.ForceLayout=p},5717:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(8810),e)},374:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanLayout=void 0;var o=n(2329),a=n(9784),s=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.workerEnabled=!1,n.gravity=10,n.speed=5,n.clustering=!1,n.clusterGravity=10,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.onLayoutEnd=function(){},n.tick=function(){},n.animate=!0,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},e.prototype.execute=function(){var t,e,n=this,r=this,i=r.nodes;if(void 0!==r.timeInterval&&"undefined"!=typeof window&&window.clearInterval(r.timeInterval),i&&0!==i.length){r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var o=r.center;if(1===i.length)return i[0].x=o[0],i[0].y=o[1],void(null===(e=r.onLayoutEnd)||void 0===e||e.call(r));var s={},u={};return i.forEach((function(t,e){(0,a.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,a.isNumber)(t.y)||(t.y=Math.random()*n.height),s[t.id]=t,u[t.id]=e})),r.nodeMap=s,r.nodeIdxMap=u,r.run()}null===(t=r.onLayoutEnd)||void 0===t||t.call(r)},e.prototype.run=function(){var t,e=this,n=e.nodes;if(n){var r=e.edges,i=e.maxIteration,o=e.workerEnabled,a=e.clustering,s=e.animate,u={};if(a&&n.forEach((function(t){void 0===u[t.cluster]&&(u[t.cluster]={name:t.cluster,cx:0,cy:0,count:0})})),o||!s){for(var c=0;c<i;c++)e.runOneStep(u);null===(t=e.onLayoutEnd)||void 0===t||t.call(e)}else{if("undefined"==typeof window)return;var l=0;this.timeInterval=window.setInterval((function(){var t;e.runOneStep(u),++l>=i&&(null===(t=e.onLayoutEnd)||void 0===t||t.call(e),window.clearInterval(e.timeInterval))}),0)}return{nodes:n,edges:r}}},e.prototype.runOneStep=function(t){var e,n=this,r=n.nodes;if(r){var i=n.edges,o=n.center,s=n.gravity,u=n.speed,c=n.clustering,l=n.height*n.width,f=Math.sqrt(l)/10,d=l/(r.length+1),h=Math.sqrt(d),p=[];if(r.forEach((function(t,e){p[e]={x:0,y:0}})),n.applyCalculate(r,i,p,h,d),c){for(var g in t)t[g].cx=0,t[g].cy=0,t[g].count=0;for(var g in r.forEach((function(e){var n=t[e.cluster];(0,a.isNumber)(e.x)&&(n.cx+=e.x),(0,a.isNumber)(e.y)&&(n.cy+=e.y),n.count++})),t)t[g].cx/=t[g].count,t[g].cy/=t[g].count;var v=n.clusterGravity||s;r.forEach((function(e,n){if((0,a.isNumber)(e.x)&&(0,a.isNumber)(e.y)){var r=t[e.cluster],i=Math.sqrt((e.x-r.cx)*(e.x-r.cx)+(e.y-r.cy)*(e.y-r.cy)),o=h*v;p[n].x-=o*(e.x-r.cx)/i,p[n].y-=o*(e.y-r.cy)/i}}))}r.forEach((function(t,e){if((0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)){var n=.01*h*s;p[e].x-=n*(t.x-o[0]),p[e].y-=n*(t.y-o[1])}})),r.forEach((function(t,e){if((0,a.isNumber)(t.fx)&&(0,a.isNumber)(t.fy))return t.x=t.fx,void(t.y=t.fy);if((0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)){var n=Math.sqrt(p[e].x*p[e].x+p[e].y*p[e].y);if(n>0){var r=Math.min(f*(u/800),n);t.x+=p[e].x/n*r,t.y+=p[e].y/n*r}}})),null===(e=n.tick)||void 0===e||e.call(n)}},e.prototype.applyCalculate=function(t,e,n,r,i){this.calRepulsive(t,n,i),e&&this.calAttractive(e,n,r)},e.prototype.calRepulsive=function(t,e,n){t.forEach((function(r,i){e[i]={x:0,y:0},t.forEach((function(t,o){if(i!==o&&(0,a.isNumber)(r.x)&&(0,a.isNumber)(t.x)&&(0,a.isNumber)(r.y)&&(0,a.isNumber)(t.y)){var s=r.x-t.x,u=r.y-t.y,c=s*s+u*u;if(0===c){c=1;var l=i>o?1:-1;s=.01*l,u=.01*l}var f=n/c;e[i].x+=s*f,e[i].y+=u*f}}))}))},e.prototype.calAttractive=function(t,e,n){var r=this;t.forEach((function(t){var i=(0,a.getEdgeTerminal)(t,"source"),o=(0,a.getEdgeTerminal)(t,"target");if(i&&o){var s=r.nodeIdxMap[i],u=r.nodeIdxMap[o];if(s!==u){var c=r.nodeMap[i],l=r.nodeMap[o];if((0,a.isNumber)(l.x)&&(0,a.isNumber)(c.x)&&(0,a.isNumber)(l.y)&&(0,a.isNumber)(c.y)){var f=l.x-c.x,d=l.y-c.y,h=Math.sqrt(f*f+d*d),p=h*h/n;e[u].x-=f/h*p,e[u].y-=d/h*p,e[s].x+=f/h*p,e[s].y+=d/h*p}}}}))},e.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(o.Base);e.FruchtermanLayout=s},3653:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GForceLayout=void 0;var o=n(2329),a=n(9784),s=function(t,e){return t?(0,a.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},u=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=500,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.preventOverlap=!0,n.collideStrength=1,n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.animate=!0,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t,e,n=this,r=n.nodes;if(void 0!==n.timeInterval&&"undefined"!=typeof window&&window.clearInterval(n.timeInterval),r&&0!==r.length){n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var i=n.center;if(1===r.length)return r[0].x=i[0],r[0].y=i[1],void(null===(e=n.onLayoutEnd)||void 0===e||e.call(n));var o={},u={};r.forEach((function(t,e){(0,a.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,a.isNumber)(t.y)||(t.y=Math.random()*n.height),o[t.id]=t,u[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=u,n.linkDistance=s(n.linkDistance,1),n.nodeStrength=s(n.nodeStrength,1),n.edgeStrength=s(n.edgeStrength,1);var c,l=n.nodeSize;if(n.preventOverlap){var f,d=n.nodeSpacing;f=(0,a.isNumber)(d)?function(){return d}:(0,a.isFunction)(d)?d:function(){return 0},c=l?(0,a.isArray)(l)?function(t){return Math.max(l[0],l[1])+f(t)}:function(t){return l+f(t)}:function(t){return t.size?(0,a.isArray)(t.size)?Math.max(t.size[0],t.size[1])+f(t):(0,a.isObject)(t.size)?Math.max(t.size.width,t.size.height)+f(t):t.size+f(t):10+f(t)}}n.nodeSize=c;var h=n.edges;n.degrees=(0,a.getDegree)(r.length,n.nodeIdxMap,h),n.getMass||(n.getMass=function(t){return t.mass||n.degrees[n.nodeIdxMap[t.id]].all||1}),n.run()}else null===(t=n.onLayoutEnd)||void 0===t||t.call(n)},e.prototype.run=function(){var t,e=this,n=e.maxIteration,r=e.nodes,i=e.workerEnabled,o=e.minMovement,a=e.animate;if(r)if(i||!a){for(var s=0;s<n;s++){var u=e.runOneStep(s);if(e.reachMoveThreshold(r,u,o))break}null===(t=e.onLayoutEnd)||void 0===t||t.call(e)}else{if("undefined"==typeof window)return;var c=0;this.timeInterval=window.setInterval((function(){var t,i;if(r){var a=e.runOneStep(c)||[];e.reachMoveThreshold(r,a,o)&&(null===(t=e.onLayoutEnd)||void 0===t||t.call(e),window.clearInterval(e.timeInterval)),++c>=n&&(null===(i=e.onLayoutEnd)||void 0===i||i.call(e),window.clearInterval(e.timeInterval))}}),0)}},e.prototype.reachMoveThreshold=function(t,e,n){var r=0;return t.forEach((function(t,n){var i=t.x-e[n].x,o=t.y-e[n].y;r+=Math.sqrt(i*i+o*o)})),(r/=t.length)<n},e.prototype.runOneStep=function(t){var e,n=this,r=n.nodes,i=n.edges,o=[],a=[];if(r){r.forEach((function(t,e){o[2*e]=0,o[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),n.calRepulsive(o,r),i&&n.calAttractive(o,i),n.calGravity(o,r);var s=Math.max(.02,n.interval-.002*t);n.updateVelocity(o,a,s,r);var u=[];return r.forEach((function(t){u.push({x:t.x,y:t.y})})),n.updatePosition(a,s,r),null===(e=n.tick)||void 0===e||e.call(n),u}},e.prototype.calRepulsive=function(t,e){var n=this,r=n.getMass,i=n.factor,o=n.coulombDisScale,a=n.preventOverlap,s=n.collideStrength,u=void 0===s?1:s,c=n.nodeStrength,l=n.nodeSize;e.forEach((function(n,s){var f=r?r(n):1;e.forEach((function(e,d){if(!(s>=d)){var h=n.x-e.x,p=n.y-e.y;0===h&&0===p&&(h=.01*Math.random(),p=.01*Math.random());var g=h*h+p*p,v=Math.sqrt(g),m=(v+.1)*o,y=h/v,b=p/v,x=.5*(c(n)+c(e))*i/(m*m),w=r?r(e):1;if(t[2*s]+=y*x,t[2*s+1]+=b*x,t[2*d]-=y*x,t[2*d+1]-=b*x,a&&(l(n)+l(e))/2>v){var _=u*(c(n)+c(e))*.5/g;t[2*s]+=y*_/f,t[2*s+1]+=b*_/f,t[2*d]-=y*_/w,t[2*d+1]-=b*_/w}}}))}))},e.prototype.calAttractive=function(t,e){var n=this,r=n.nodeMap,i=n.nodeIdxMap,o=n.linkDistance,s=n.edgeStrength,u=n.nodeSize,c=n.getMass;e.forEach((function(e,n){var l=(0,a.getEdgeTerminal)(e,"source"),f=(0,a.getEdgeTerminal)(e,"target"),d=r[l],h=r[f],p=h.x-d.x,g=h.y-d.y;0===p&&0===g&&(p=.01*Math.random(),g=.01*Math.random());var v=Math.sqrt(p*p+g*g),m=p/v,y=g/v,b=((o(e,d,h)||1+(u(d)+u(h)||0)/2)-v)*s(e),x=i[l],w=i[f],_=c?c(d):1,E=c?c(h):1;t[2*x]-=m*b/_,t[2*x+1]-=y*b/_,t[2*w]+=m*b/E,t[2*w+1]+=y*b/E}))},e.prototype.calGravity=function(t,e){for(var n=this,r=n.center,i=n.gravity,o=n.degrees,s=e.length,u=0;u<s;u++){var c=e[u],l=c.x-r[0],f=c.y-r[1],d=i;if(n.getCenter){var h=n.getCenter(c,o[u].all);h&&(0,a.isNumber)(h[0])&&(0,a.isNumber)(h[1])&&(0,a.isNumber)(h[2])&&(l=c.x-h[0],f=c.y-h[1],d=h[2])}d&&(t[2*u]-=d*l,t[2*u+1]-=d*f)}},e.prototype.updateVelocity=function(t,e,n,r){var i=this,o=n*i.damping;r.forEach((function(n,r){var a=t[2*r]*o||.01,s=t[2*r+1]*o||.01,u=Math.sqrt(a*a+s*s);if(u>i.maxSpeed){var c=i.maxSpeed/u;a*=c,s*=c}e[2*r]=a,e[2*r+1]=s}))},e.prototype.updatePosition=function(t,e,n){n.forEach((function(n,r){if((0,a.isNumber)(n.fx)&&(0,a.isNumber)(n.fy))return n.x=n.fx,void(n.y=n.fy);var i=t[2*r]*e,o=t[2*r+1]*e;n.x+=i,n.y+=o}))},e.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"gForce"},e}(o.Base);e.GForceLayout=u},7745:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanGPULayout=void 0;var s=n(2329),u=n(9784),c=n(462),l=n(8835),f=n(8574),d=n(6470),h=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.gravity=10,n.speed=1,n.clustering=!1,n.clusterField="cluster",n.clusterGravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i,o=this;return a(this,(function(a){switch(a.label){case 0:return(e=(t=this).nodes)&&0!==e.length?(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),n=t.center,1===e.length?(e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(r={},i={},e.forEach((function(t,e){(0,u.isNumber)(t.x)||(t.x=Math.random()*o.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*o.height),r[t.id]=t,i[t.id]=e})),t.nodeMap=r,t.nodeIdxMap=i,[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return a.sent(),[2]}}))}))},e.prototype.executeWithWorker=function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s,c=this;return a(this,(function(a){switch(a.label){case 0:return r=(n=this).nodes,i=n.center,r&&0!==r.length?1===r.length?(r[0].x=i[0],r[0].y=i[1],[2]):(o={},s={},r.forEach((function(t,e){(0,u.isNumber)(t.x)||(t.x=Math.random()*c.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*c.height),o[t.id]=t,s[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=s,[4,n.run(t,e)]):[2];case 1:return a.sent(),[2]}}))}))},e.prototype.run=function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,s,h,p,g,v,m,y,b,x,w,_,E,S,C,k,M,O,T,A,N,I,P,D,L=this;return a(this,(function(R){switch(R.label){case 0:for(r=(n=this).nodes,i=n.edges,s=n.maxIteration,h=n.center,p=n.height*n.width,g=Math.sqrt(p)/10,v=p/(r.length+1),m=Math.sqrt(v),y=n.speed,b=n.clustering,x=(0,l.attributesToTextureData)([n.clusterField],r),w=x.array,_=x.count,r.forEach((function(t,e){var n=0,r=0;(0,u.isNumber)(t.fx)&&(0,u.isNumber)(t.fy)&&(n=t.fx||.001,r=t.fy||.001),w[4*e+1]=n,w[4*e+2]=r})),E=r.length,S=(0,l.buildTextureData)(r,i),C=S.maxEdgePerVetex,k=S.array,M=n.workerEnabled,O=M?c.World.create({canvas:t,engineOptions:{supportCompute:!0}}):c.World.create({engineOptions:{supportCompute:!0}}),T=n.onLayoutEnd,A=[],N=0;N<_;N++)A.push(0,0,0,0);return I=O.createKernel(f.fruchtermanBundle).setDispatch([E,1,1]).setBinding({u_Data:k,u_K:m,u_K2:v,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:y,u_MaxDisplace:g,u_Clustering:b?1:0,u_Center:h,u_AttributeArray:w,u_ClusterCenters:A,MAX_EDGE_PER_VERTEX:C,VERTEX_COUNT:E}),b&&(P=O.createKernel(f.clusterBundle).setDispatch([_,1,1]).setBinding({u_Data:k,u_NodeAttributes:w,u_ClusterCenters:A,VERTEX_COUNT:E,CLUSTER_COUNT:_})),D=function(){return o(L,void 0,void 0,(function(){var n,i;return a(this,(function(o){switch(o.label){case 0:n=0,o.label=1;case 1:return n<s?[4,I.execute()]:[3,6];case 2:return o.sent(),b?(P.setBinding({u_Data:I}),[4,P.execute()]):[3,4];case 3:o.sent(),I.setBinding({u_ClusterCenters:P}),o.label=4;case 4:I.setBinding({u_MaxDisplace:g*=.99}),o.label=5;case 5:return n++,[3,1];case 6:return[4,I.getOutput()];case 7:return i=o.sent(),t?e.postMessage({type:d.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:i}):r.forEach((function(t,e){var n=i[4*e],r=i[4*e+1];t.x=n,t.y=r})),T&&T(),[2]}}))}))},[4,D()];case 1:return R.sent(),[2]}}))}))},e.prototype.getType=function(){return"fruchterman-gpu"},e}(s.Base);e.FruchtermanGPULayout=h},8574:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clusterBundle=e.clusterCode=e.fruchtermanBundle=e.fruchtermanCode=void 0,e.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",e.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",e.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},5194:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GForceGPULayout=void 0;var s=n(2329),u=n(9784),c=n(462),l=n(8835),f=n(628),d=n(9762),h=n(6470),p=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i;return a(this,(function(o){switch(o.label){case 0:return(e=(t=this).nodes)&&0!==e.length?(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),n=t.center,1===e.length?(e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(r={},i={},e.forEach((function(e,n){(0,u.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,u.isNumber)(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,i[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=i,t.nodeStrength=(0,l.proccessToFunc)(t.nodeStrength,1),t.edgeStrength=(0,l.proccessToFunc)(t.edgeStrength,1),[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return o.sent(),[2]}}))}))},e.prototype.executeWithWorker=function(t,e){var n=this,r=n.nodes,i=n.center;if(r&&0!==r.length){if(1===r.length)return r[0].x=i[0],void(r[0].y=i[1]);var o={},a={};r.forEach((function(t,e){(0,u.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*n.height),o[t.id]=t,a[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=a,n.nodeStrength=(0,l.proccessToFunc)(n.nodeStrength,1),n.edgeStrength=(0,l.proccessToFunc)(n.edgeStrength,1),n.run(t,e)}},e.prototype.run=function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,s,p,g,v,m,y,b,x,w,_,E,S,C,k,M,O,T,A,N,I,P,D,L,R,j=this;return a(this,(function(B){switch(B.label){case 0:for(r=(n=this).nodes,i=n.edges,s=n.maxIteration,n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),p=r.length,n.linkDistance=(0,l.proccessToFunc)(n.linkDistance),n.edgeStrength=(0,l.proccessToFunc)(n.edgeStrength),g=(0,l.buildTextureDataWithTwoEdgeAttr)(r,i,n.linkDistance,n.edgeStrength),v=g.maxEdgePerVetex,m=g.array,n.degrees=(0,f.getDegree)(r.length,n.nodeIdxMap,i).map((function(t){return t.all})),y=[],b=[],x=[],w=[],_=[],E=[],S=[],n.getMass||(n.getMass=function(t){return n.degrees[n.nodeIdxMap[t.id]]||1}),C=n.gravity,k=n.center,r.forEach((function(t,e){y.push(n.getMass(t)),b.push(n.nodeStrength(t)),n.degrees[e]||(n.degrees[e]=0);var r=[k[0],k[1],C];if(n.getCenter){var i=n.getCenter(t,n.degrees[e]);i&&(0,u.isNumber)(i[0])&&(0,u.isNumber)(i[1])&&(0,u.isNumber)(i[2])&&(r=i)}x.push(r[0]),w.push(r[1]),_.push(r[2]),(0,u.isNumber)(t.fx)&&(0,u.isNumber)(t.fy)?(E.push(t.fx||.001),S.push(t.fy||.001)):(E.push(0),S.push(0))})),M=(0,l.arrayToTextureData)([y,n.degrees,b,E]),O=(0,l.arrayToTextureData)([x,w,_,S]),T=n.workerEnabled,A=T?c.World.create({canvas:t,engineOptions:{supportCompute:!0}}):c.World.create({engineOptions:{supportCompute:!0}}),N=n.onLayoutEnd,I=[],m.forEach((function(t){I.push(t)})),P=0;P<4;P++)I.push(0);return D=A.createKernel(d.gForceBundle).setDispatch([p,1,1]).setBinding({u_Data:m,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:M,u_NodeAttributeArray2:O,MAX_EDGE_PER_VERTEX:v,VERTEX_COUNT:p,u_AveMovement:I,u_interval:n.interval}),L=A.createKernel(d.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:m,VERTEX_COUNT:p,u_AveMovement:[0,0,0,0]}),R=function(){return o(j,void 0,void 0,(function(){var i,o,u;return a(this,(function(a){switch(a.label){case 0:i=0,a.label=1;case 1:return i<s?[4,D.execute()]:[3,5];case 2:return a.sent(),L.setBinding({u_Data:D}),[4,L.execute()];case 3:a.sent(),o=Math.max(.02,n.interval-.002*i),D.setBinding({u_interval:o,u_AveMovement:L}),a.label=4;case 4:return i++,[3,1];case 5:return[4,D.getOutput()];case 6:return u=a.sent(),t?e.postMessage({type:h.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:u}):r.forEach((function(t,e){var n=u[4*e],r=u[4*e+1];t.x=n,t.y=r})),N&&N(),[2]}}))}))},[4,R()];case 1:return B.sent(),[2]}}))}))},e.prototype.getType=function(){return"gForce-gpu"},e}(s.Base);e.GForceGPULayout=p},9762:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.aveMovementBundle=e.aveMovementCode=e.gForceBundle=e.gForceCode=void 0,e.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i  p \n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // = / 4\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // \n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",e.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",e.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},4414:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GridLayout=void 0;var o=n(9784),a=function(t){function e(e){var n=t.call(this)||this;return n.begin=[0,0],n.preventOverlap=!0,n.preventOverlapPadding=10,n.condense=!1,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.row=0,n.col=0,n.cellWidth=0,n.cellHeight=0,n.cellUsed={},n.id2manPos={},n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,r=t.begin,i=e.length;if(0===i)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};if(1===i)return e[0].x=r[0],e[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};var a=t.sortBy,s=t.width,u=t.height,c=t.condense,l=t.preventOverlapPadding,f=t.preventOverlap,d=t.nodeSpacing,h=t.nodeSize,p=[];e.forEach((function(t){p.push(t)}));var g={};if(p.forEach((function(t,e){g[t.id]=e})),("degree"===a||!(0,o.isString)(a)||void 0===p[0][a])&&(a="degree",(0,o.isNaN)(e[0].degree))){var v=(0,o.getDegree)(p.length,g,n);p.forEach((function(t,e){t.degree=v[e].all}))}p.sort((function(t,e){return e[a]-t[a]})),s||"undefined"==typeof window||(s=window.innerWidth),u||"undefined"==typeof window||(u=window.innerHeight);var m=t.rows,y=null!=t.cols?t.cols:t.columns;if(t.cells=i,null!=m&&null!=y?(t.rows=m,t.cols=y):null!=m&&null==y?(t.rows=m,t.cols=Math.ceil(t.cells/t.rows)):null==m&&null!=y?(t.cols=y,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells)((x=t.small())-1)*(b=t.large())>=t.cells?t.small(x-1):(b-1)*x>=t.cells&&t.large(b-1);else for(;t.cols*t.rows<t.cells;){var b,x=t.small();((b=t.large())+1)*x>=t.cells?t.large(b+1):t.small(x+1)}if(t.cellWidth=s/t.cols,t.cellHeight=u/t.rows,c&&(t.cellWidth=0,t.cellHeight=0),f||d){var w=(0,o.getFuncByUnknownType)(10,d),_=(0,o.getFuncByUnknownType)(30,h,!1);p.forEach((function(e){e.x&&e.y||(e.x=0,e.y=0);var n,r,i=_(e)||30;(0,o.isArray)(i)?(n=i[0],r=i[1]):(n=i,r=i);var a=void 0!==w?w(e):l,s=n+a,u=r+a;t.cellWidth=Math.max(t.cellWidth,s),t.cellHeight=Math.max(t.cellHeight,u)}))}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var E=0;E<p.length;E++){var S=p[E],C=void 0;if(t.position&&(C=t.position(S)),C&&(void 0!==C.row||void 0!==C.col)){var k={row:C.row,col:C.col};if(void 0===k.col)for(k.col=0;t.used(k.row,k.col);)k.col++;else if(void 0===k.row)for(k.row=0;t.used(k.row,k.col);)k.row++;t.id2manPos[S.id]=k,t.use(k.row,k.col)}t.getPos(S)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:n,nodes:p}},e.prototype.small=function(t){var e,n=this,r=n.rows||5,i=n.cols||5;return null==t?e=Math.min(r,i):Math.min(r,i)===n.rows?n.rows=t:n.cols=t,e},e.prototype.large=function(t){var e,n=this,r=n.rows||5,i=n.cols||5;return null==t?e=Math.max(r,i):Math.max(r,i)===n.rows?n.rows=t:n.cols=t,e},e.prototype.used=function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1},e.prototype.use=function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0},e.prototype.moveToNextCell=function(){var t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)},e.prototype.getPos=function(t){var e,n,r=this,i=r.begin,o=r.cellWidth,a=r.cellHeight,s=r.id2manPos[t.id];if(s)e=s.col*o+o/2+i[0],n=s.row*a+a/2+i[1];else{for(;r.used(r.row,r.col);)r.moveToNextCell();e=r.col*o+o/2+i[0],n=r.row*a+a/2+i[1],r.use(r.row,r.col),r.moveToNextCell()}t.x=e,t.y=n},e.prototype.getType=function(){return"grid"},e}(n(2329).Base);e.GridLayout=a},2584:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=e.ForceAtlas2Layout=e.ComboCombinedLayout=e.ComboForceLayout=e.GForceGPULayout=e.FruchtermanGPULayout=e.FruchtermanLayout=e.MDSLayout=e.ConcentricLayout=e.RadialLayout=e.DagreCompoundLayout=e.DagreLayout=e.CircularLayout=e.ForceLayout=e.Force2Layout=e.GForceLayout=e.RandomLayout=e.GridLayout=e.Layouts=e.Layout=void 0;var o=n(4414);Object.defineProperty(e,"GridLayout",{enumerable:!0,get:function(){return o.GridLayout}});var a=n(9711);Object.defineProperty(e,"RandomLayout",{enumerable:!0,get:function(){return a.RandomLayout}});var s=n(3653);Object.defineProperty(e,"GForceLayout",{enumerable:!0,get:function(){return s.GForceLayout}});var u=n(6740);Object.defineProperty(e,"Force2Layout",{enumerable:!0,get:function(){return u.Force2Layout}});var c=n(5717);Object.defineProperty(e,"ForceLayout",{enumerable:!0,get:function(){return c.ForceLayout}});var l=n(4885);Object.defineProperty(e,"CircularLayout",{enumerable:!0,get:function(){return l.CircularLayout}});var f=n(171);Object.defineProperty(e,"DagreLayout",{enumerable:!0,get:function(){return f.DagreLayout}});var d=n(7057);Object.defineProperty(e,"DagreCompoundLayout",{enumerable:!0,get:function(){return d.DagreCompoundLayout}});var h=n(7944);Object.defineProperty(e,"RadialLayout",{enumerable:!0,get:function(){return h.RadialLayout}});var p=n(3281);Object.defineProperty(e,"ConcentricLayout",{enumerable:!0,get:function(){return p.ConcentricLayout}});var g=n(2899);Object.defineProperty(e,"MDSLayout",{enumerable:!0,get:function(){return g.MDSLayout}});var v=n(374);Object.defineProperty(e,"FruchtermanLayout",{enumerable:!0,get:function(){return v.FruchtermanLayout}});var m=n(7745);Object.defineProperty(e,"FruchtermanGPULayout",{enumerable:!0,get:function(){return m.FruchtermanGPULayout}});var y=n(5194);Object.defineProperty(e,"GForceGPULayout",{enumerable:!0,get:function(){return y.GForceGPULayout}});var b=n(6590);Object.defineProperty(e,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}});var x=n(3861);Object.defineProperty(e,"ComboCombinedLayout",{enumerable:!0,get:function(){return x.ComboCombinedLayout}});var w=n(8564);Object.defineProperty(e,"ForceAtlas2Layout",{enumerable:!0,get:function(){return w.ForceAtlas2Layout}});var _=n(441);Object.defineProperty(e,"ERLayout",{enumerable:!0,get:function(){return _.ERLayout}});var E=n(2875);Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return E.Layout}}),Object.defineProperty(e,"Layouts",{enumerable:!0,get:function(){return E.Layouts}}),i(n(2867),e)},2875:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layouts=e.Layout=void 0;var r=n(5326),i=n(4414),o=n(9711),a=n(6740),s=n(3653),u=n(5717),c=n(4885),l=n(171),f=n(7944),d=n(3281),h=n(2899),p=n(374),g=n(7745),v=n(5194),m=n(6590),y=n(3861),b=n(8564),x=n(441),w=n(7057),_=n(9784),E=function(){function t(t){var e=(0,r.getLayoutByName)(t.type);this.layoutInstance=new e(t)}return t.prototype.layout=function(t){return this.layoutInstance.layout(t)},t.prototype.updateCfg=function(t){this.layoutInstance.updateCfg(t)},t.prototype.init=function(t){this.correctLayers(t.nodes),this.layoutInstance.init(t)},t.prototype.correctLayers=function(t){if(null==t?void 0:t.length){var e=1/0,n=[];if(t.forEach((function(t){(0,_.isString)(t.layer)&&(t.layer=parseInt(t.layer,10)),void 0===t.layer||isNaN(t.layer)||(n.push(t),t.layer<e&&(e=t.layer))})),e<=0){var r=Math.abs(e)+1;n.forEach((function(t){return t.layer+=r}))}}},t.prototype.execute=function(){this.layoutInstance.execute()},t.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},t.prototype.destroy=function(){return this.layoutInstance.destroy()},t}();e.Layout=E,e.Layouts={force:u.ForceLayout,fruchterman:p.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:s.GForceLayout,force2:a.Force2Layout,dagre:l.DagreLayout,dagreCompound:w.DagreCompoundLayout,circular:c.CircularLayout,radial:f.RadialLayout,concentric:d.ConcentricLayout,grid:i.GridLayout,mds:h.MDSLayout,comboForce:m.ComboForceLayout,comboCombined:y.ComboCombinedLayout,random:o.RandomLayout,"gForce-gpu":v.GForceGPULayout,"fruchterman-gpu":g.FruchtermanGPULayout,er:x.ERLayout}},2899:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MDSLayout=void 0;var o=n(23),a=n(9784),s=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.linkDistance=50,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,r=void 0===n?[]:n,i=t.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=i[0],e[0].y=i[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.linkDistance,s=(0,a.getAdjMatrix)({nodes:e,edges:r},!1),u=(0,a.floydWarshall)(s);t.handleInfinity(u);var c=(0,a.scaleMatrix)(u,o);t.scaledDistances=c;var l=t.runMDS();return t.positions=l,l.forEach((function(t,n){e[n].x=t[0]+i[0],e[n].y=t[1]+i[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:r}}t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.runMDS=function(){var t=this.scaledDistances,e=o.Matrix.mul(o.Matrix.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),i=e.mean();e.add(i).subRowVector(n).subColumnVector(r);var a=new o.SingularValueDecomposition(e),s=o.Matrix.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map((function(t){return o.Matrix.mul([t],[s]).toJSON()[0].splice(0,2)}))},e.prototype.handleInfinity=function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,i){n===1/0&&(t[r][i]=e)}))}))},e.prototype.getType=function(){return"mds"},e}(n(2329).Base);e.MDSLayout=s},7944:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(5974),e)},6082:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),i=function(){function t(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}return t.prototype.layout=function(){var t=this,e=t.dimension,n=t.distances,i=t.linkDistance;try{var o=r.Matrix.mul(r.Matrix.pow(n,2),-.5),a=o.mean("row"),s=o.mean("column"),u=o.mean();o.add(u).subRowVector(a).subColumnVector(s);var c=new r.SingularValueDecomposition(o),l=r.Matrix.sqrt(c.diagonalMatrix).diagonal();return c.leftSingularVectors.toJSON().map((function(t){return r.Matrix.mul([t],[l]).toJSON()[0].splice(0,e)}))}catch(t){for(var f=[],d=0;d<n.length;d++){var h=Math.random()*i,p=Math.random()*i;f.push([h,p])}return f}},t}();e.default=i},5974:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RadialLayout=void 0;var a=n(9784),s=n(2329),u=o(n(6082)),c=o(n(6290));function l(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var f=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.focusNode=null,n.unitRadius=null,n.linkDistance=50,n.preventOverlap=!1,n.strictRadial=!0,n.maxPreventOverlapIteration=200,n.sortStrength=10,n.nodes=[],n.edges=[],n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges||[];if(e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var r=t.center;if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var i=t.linkDistance,o=null;if((0,a.isString)(t.focusNode)){for(var s=!1,l=0;l<e.length;l++)e[l].id===t.focusNode&&(o=e[l],t.focusNode=o,s=!0,l=e.length);s||(o=null)}else o=t.focusNode;o||(o=e[0],t.focusNode=o);var f,d,h,p=(f=e,d=o.id,h=-1,f.forEach((function(t,e){t.id===d&&(h=e)})),h);p<0&&(p=0),t.focusIndex=p;var g=(0,a.getAdjMatrix)({nodes:e,edges:n},!1),v=(0,a.floydWarshall)(g),m=t.maxToFocus(v,p);t.handleInfinity(v,p,m+1),t.distances=v;var y=v[p],b=t.width||500,x=t.height||500,w=b-r[0]>r[0]?r[0]:b-r[0],_=x-r[1]>r[1]?r[1]:x-r[1];0===w&&(w=b/2),0===_&&(_=x/2);var E=_>w?w:_,S=Math.max.apply(Math,y),C=[];y.forEach((function(e,n){t.unitRadius||(t.unitRadius=E/S),C[n]=e*t.unitRadius})),t.radii=C;var k=t.eIdealDisMatrix();t.eIdealDistances=k;var M=function(t){for(var e=t.length,n=t[0].length,r=[],i=0;i<e;i++){for(var o=[],a=0;a<n;a++)0!==t[i][a]?o.push(1/(t[i][a]*t[i][a])):o.push(0);r.push(o)}return r}(k);t.weights=M;var O=new u.default({linkDistance:i,distances:k}).layout();O.forEach((function(t){(0,a.isNaN)(t[0])&&(t[0]=Math.random()*i),(0,a.isNaN)(t[1])&&(t[1]=Math.random()*i)})),t.positions=O,O.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),O.forEach((function(t){t[0]-=O[p][0],t[1]-=O[p][1]})),t.run();var T,A=t.preventOverlap,N=t.nodeSize,I=t.strictRadial;if(A){var P,D=t.nodeSpacing;P=(0,a.isNumber)(D)?function(){return D}:(0,a.isFunction)(D)?D:function(){return 0},T=N?(0,a.isArray)(N)?function(t){return(N[0]>N[1]?N[0]:N[1])+P(t)}:function(t){return N+P(t)}:function(t){return t.size?(0,a.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+P(t):(0,a.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)+P(t):t.size+P(t):10+P(t)};var L={nodes:e,nodeSizeFunc:T,adjMatrix:g,positions:O,radii:C,height:x,width:b,strictRadial:I,focusID:p,iterations:t.maxPreventOverlapIteration||200,k:O.length/4.5},R=new c.default(L);O=R.layout()}return O.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){for(var t=this,e=t.maxIteration,n=t.positions||[],r=t.weights||[],i=t.eIdealDistances||[],o=t.radii||[],a=0;a<=e;a++){var s=a/e;t.oneIteration(s,n,o,i,r)}},e.prototype.oneIteration=function(t,e,n,r,i){var o=1-t,a=this.focusIndex;e.forEach((function(s,u){var c=l(s,[0,0]),f=0===c?0:1/c;if(u!==a){var d=0,h=0,p=0;e.forEach((function(t,e){if(u!==e){var n=l(s,t),o=0===n?0:1/n,a=r[e][u];p+=i[u][e],d+=i[u][e]*(t[0]+a*(s[0]-t[0])*o),h+=i[u][e]*(t[1]+a*(s[1]-t[1])*o)}}));var g=0===n[u]?0:1/n[u];p*=o,p+=t*g*g,d*=o,d+=t*g*s[0]*f,s[0]=d/p,h*=o,h+=t*g*s[1]*f,s[1]=h/p}}))},e.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,r=t.linkDistance,i=t.radii||[],o=t.unitRadius||50,s=[];return n&&n.forEach((function(n,u){var c=[];n.forEach((function(n,s){if(u===s)c.push(0);else if(i[u]===i[s])if("data"===t.sortBy)c.push(n*(Math.abs(u-s)*t.sortStrength)/(i[u]/o));else if(t.sortBy){var l=e[u][t.sortBy]||0,f=e[s][t.sortBy]||0;(0,a.isString)(l)&&(l=l.charCodeAt(0)),(0,a.isString)(f)&&(f=f.charCodeAt(0)),c.push(n*(Math.abs(l-f)*t.sortStrength)/(i[u]/o))}else c.push(n*r/(i[u]/o));else{var d=(r+o)/2;c.push(n*d)}})),s.push(c)})),s},e.prototype.handleInfinity=function(t,e,n){for(var r=t.length,i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(var o=0;o<r;o++)t[i][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[i][o],t[o][e]=n+t[i][o])}for(i=0;i<r;i++)if(i!==e)for(o=0;o<r;o++)if(t[i][o]===1/0){var a=Math.abs(t[e][i]-t[e][o]);a=0===a?1:a,t[i][o]=a}},e.prototype.maxToFocus=function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},e.prototype.getType=function(){return"radial"},e}(s.Base);e.RadialLayout=f},6290:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}return t.prototype.layout=function(){var t=this,e=t.positions,n=[],r=t.iterations,i=t.width/10;t.maxDisplace=i,t.disp=n;for(var o=0;o<r;o++)e.forEach((function(t,e){n[e]={x:0,y:0}})),t.getRepulsion(),t.updatePositions();return e},t.prototype.getRepulsion=function(){var t=this,e=t.positions,n=t.nodes,r=t.disp,i=t.k,o=t.radii||[];e.forEach((function(a,s){r[s]={x:0,y:0},e.forEach((function(e,u){if(s!==u&&o[s]===o[u]){var c=a[0]-e[0],l=a[1]-e[1],f=Math.sqrt(c*c+l*l);if(0===f){f=1;var d=s>u?1:-1;c=.01*d,l=.01*d}if(f<t.nodeSizeFunc(n[s])/2+t.nodeSizeFunc(n[u])/2){var h=i*i/f;r[s].x+=c/f*h,r[s].y+=l/f*h}}}))}))},t.prototype.updatePositions=function(){var t=this,e=t.positions,n=t.disp,r=t.speed,i=t.strictRadial,o=t.focusID,a=t.maxDisplace||t.width/10;i&&n.forEach((function(t,n){var r=e[n][0]-e[o][0],i=e[n][1]-e[o][1],a=Math.sqrt(r*r+i*i),s=i/a,u=-r/a,c=Math.sqrt(t.x*t.x+t.y*t.y),l=Math.acos((s*t.x+u*t.y)/c);l>Math.PI/2&&(l-=Math.PI/2,s*=-1,u*=-1);var f=Math.cos(l)*c;t.x=s*f,t.y=u*f}));var s=t.radii;e.forEach((function(t,u){if(u!==o){var c=Math.sqrt(n[u].x*n[u].x+n[u].y*n[u].y);if(c>0&&u!==o){var l=Math.min(a*(r/800),c);if(t[0]+=n[u].x/c*l,t[1]+=n[u].y/c*l,i){var f=t[0]-e[o][0],d=t[1]-e[o][1],h=Math.sqrt(f*f+d*d);f=f/h*s[u],d=d/h*s[u],t[0]=e[o][0]+f,t[1]=e[o][1]+d}}}}))},t}();e.default=n},9711:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RandomLayout=void 0;var o=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}},e.prototype.getType=function(){return"random"},e}(n(2329).Base);e.RandomLayout=o},2867:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5326:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var o=n(2329),a=n(9784),s=new Map;e.registerLayout=function(t,e){if(s.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),(0,a.isObject)(e)){var n=function(t){function n(n){var r=t.call(this)||this,i=r,o={},a=i.getDefaultCfg();return Object.assign(o,a,e,n),Object.keys(o).forEach((function(t){var e=o[t];i[t]=e})),r}return i(n,t),n}(o.Base);s.set(t,n)}else s.set(t,e);return s.get(t)},e.unRegisterLayout=function(t){s.has(t)&&s.delete(t)},e.getLayoutByName=function(t){return s.has(t)?s.get(t):null}},5087:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=Array.isArray},8732:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFuncByUnknownType=e.getFunc=e.isFunction=void 0;var r=n(9784),i=n(627);e.isFunction=function(t){return"function"==typeof t},e.getFunc=function(t,e,n){return n||((0,i.isNumber)(t)?function(){return t}:function(){return e})},e.getFuncByUnknownType=function(t,n,o){return void 0===o&&(o=!0),n||0===n?(0,e.isFunction)(n)?n:(0,i.isNumber)(n)?function(){return n}:(0,r.isArray)(n)?function(){if(o){var e=Math.max.apply(Math,n);return isNaN(e)?t:e}return n}:(0,r.isObject)(n)?function(){if(o){var e=Math.max(n.width,n.height);return isNaN(e)?t:e}return[n.width,n.height]}:function(){return t}:function(e){return e.size?(0,r.isArray)(e.size)?e.size[0]>e.size[1]?e.size[0]:e.size[1]:(0,r.isObject)(e.size)?e.size.width>e.size.height?e.size.width:e.size.height:e.size:t}}},8835:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayToTextureData=e.attributesToTextureData=e.buildTextureDataWithTwoEdgeAttr=e.buildTextureData=e.proccessToFunc=void 0;var r=n(9784),i=n(628);e.proccessToFunc=function(t,e){return t?(0,r.isNumber)(t)?function(){return t}:t:function(){return e||1}},e.buildTextureData=function(t,e){var n=[],r=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,n.push(s.x),n.push(s.y),n.push(0),n.push(0),r.push([])}for(a=0;a<e.length;a++){var u=e[a],c=(0,i.getEdgeTerminal)(u,"source"),l=(0,i.getEdgeTerminal)(u,"target");isNaN(o[c])||isNaN(o[l])||(r[o[c]].push(o[l]),r[o[l]].push(o[c]))}var f=0;for(a=0;a<t.length;a++){var d=n.length,h=r[a],p=h.length;n[4*a+2]=d,n[4*a+3]=p,f=Math.max(f,p);for(var g=0;g<p;++g){var v=h[g];n.push(+v)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:f,array:new Float32Array(n)}},e.buildTextureDataWithTwoEdgeAttr=function(t,e,n,r){var o=[],a=[],s={},u=0;for(u=0;u<t.length;u++){var c=t[u];s[c.id]=u,o.push(c.x),o.push(c.y),o.push(0),o.push(0),a.push([])}for(u=0;u<e.length;u++){var l=e[u],f=(0,i.getEdgeTerminal)(l,"source"),d=(0,i.getEdgeTerminal)(l,"target");a[s[f]].push(s[d]),a[s[f]].push(n(l)),a[s[f]].push(r(l)),a[s[f]].push(0),a[s[d]].push(s[f]),a[s[d]].push(n(l)),a[s[d]].push(r(l)),a[s[d]].push(0)}var h=0;for(u=0;u<t.length;u++){var p=o.length,g=a[u],v=g.length;o[4*u+2]=p+1048576*v/4,o[4*u+3]=0,h=Math.max(h,v/4);for(var m=0;m<v;++m){var y=g[m];o.push(+y)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:h,array:new Float32Array(o)}},e.attributesToTextureData=function(t,e){var n=[],r=t.length,i={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}},e.arrayToTextureData=function(t){for(var e=[],n=t.length,r=t[0].length,i=function(r){t.forEach((function(t,i){if(e.push(t[r]),i===n-1)for(;e.length%4!=0;)e.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(e)}},9784:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(8055),e),i(n(5087),e),i(n(627),e),i(n(628),e),i(n(8130),e),i(n(8732),e)},628:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCoreNodeAndRelativeLeafNodes=e.getAvgNodePosition=e.getLayoutBBox=e.traverseTreeUp=e.scaleMatrix=e.getAdjMatrix=e.floydWarshall=e.getDegreeMap=e.getDegree=e.getEdgeTerminal=void 0;var r=n(5087),i=n(627),o=n(8130);e.getEdgeTerminal=function(t,e){var n=t[e];return(0,o.isObject)(n)?n.cell:n},e.getDegree=function(t,n,r){for(var i=[],o=0;o<t;o++)i[o]={in:0,out:0,all:0};return r?(r.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source"),o=(0,e.getEdgeTerminal)(t,"target");r&&i[n[r]]&&(i[n[r]].out+=1,i[n[r]].all+=1),o&&i[n[o]]&&(i[n[o]].in+=1,i[n[o]].all+=1)})),i):i},e.getDegreeMap=function(t,n){var r={};return t.forEach((function(t){r[t.id]={in:0,out:0,all:0}})),n?(n.forEach((function(t){var n=(0,e.getEdgeTerminal)(t,"source"),i=(0,e.getEdgeTerminal)(t,"target");n&&(r[n].out+=1,r[n].all+=1),i&&(r[i].in+=1,r[i].all+=1)})),r):r},e.floydWarshall=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)e[r][i]>e[r][o]+e[o][i]&&(e[r][i]=e[r][o]+e[o][i]);return e},e.getAdjMatrix=function(t,n){var r=t.nodes,i=t.edges,o=[],a={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((function(t,e){a[t.id]=e,o.push([])})),null==i||i.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source"),i=(0,e.getEdgeTerminal)(t,"target"),s=a[r],u=a[i];void 0!==s&&void 0!==u&&(o[s][u]=1,n||(o[u][s]=1))})),o},e.scaleMatrix=function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n};var a=function(t,e){if(t&&t.children)for(var n=t.children.length-1;n>=0;n--)if(!a(t.children[n],e))return;return!!e(t)};e.traverseTreeUp=function(t,e){"function"==typeof e&&a(t,e)},e.getLayoutBBox=function(t){var e=1/0,n=1/0,o=-1/0,a=-1/0;return t.forEach((function(t){var s=t.size;(0,r.isArray)(s)?1===s.length&&(s=[s[0],s[0]]):(0,i.isNumber)(s)?s=[s,s]:(void 0===s||isNaN(s))&&(s=[30,30]);var u=[s[0]/2,s[1]/2],c=t.x-u[0],l=t.x+u[0],f=t.y-u[1],d=t.y+u[1];e>c&&(e=c),n>f&&(n=f),o<l&&(o=l),a<d&&(a=d)})),{minX:e,minY:n,maxX:o,maxY:a}},e.getAvgNodePosition=function(t){var e={x:0,y:0};t.forEach((function(t){e.x+=t.x||0,e.y+=t.y||0}));var n=t.length||1;return{x:e.x/n,y:e.y/n}};var s=function(t,e,n){var r,i;return"source"===t?(null===(r=null==n?void 0:n.find((function(t){return t.target===e.id})))||void 0===r?void 0:r.source)||{}:(null===(i=null==n?void 0:n.find((function(t){return t.source===e.id})))||void 0===i?void 0:i.target)||{}},u=function(t,e,n){var r=[];switch(t){case"source":r=null==n?void 0:n.filter((function(t){return t.source===e.id})).map((function(t){return t.target}));break;case"target":r=null==n?void 0:n.filter((function(t){return t.target===e.id})).map((function(t){return t.source}));break;case"both":r=null==n?void 0:n.filter((function(t){return t.source===e.id})).map((function(t){return t.target})).concat(null==n?void 0:n.filter((function(t){return t.target===e.id})).map((function(t){return t.source})))}var i=new Set(r);return Array.from(i)};e.getCoreNodeAndRelativeLeafNodes=function(t,e,n,r,i,o){var a=i[e.id],c=a.in,l=a.out,f=e,d=[];0===c?(f=s("source",e,n),d=u("both",f,n).map((function(t){return o[t]}))):0===l&&(f=s("target",e,n),d=u("both",f,n).map((function(t){return o[t]}))),d=d.filter((function(t){return i[t.id]&&(0===i[t.id].in||0===i[t.id].out)}));var h=function(t,e,n,r,i){var o=n[e]||"",a=(null==r?void 0:r.filter((function(t){return t[e]===o})))||[];return"leaf"===t&&(a=a.filter((function(t){var e,n;return 0===(null===(e=i[t.id])||void 0===e?void 0:e.in)||0===(null===(n=i[t.id])||void 0===n?void 0:n.out)}))),a}(t,r,e,d,i);return{coreNode:f,relativeLeafNodes:d,sameTypeLeafNodes:h}}},627:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toNumber=e.isNaN=e.isNumber=void 0,e.isNumber=function(t){return"number"==typeof t},e.isNaN=function(t){return Number.isNaN(Number(t))},e.toNumber=function(t){var n=parseFloat(t);return(0,e.isNaN)(n)?t:n}},8130:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.isObject=void 0,e.isObject=function(t){return null!==t&&"object"==typeof t},e.clone=function(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var r=[];return t.forEach((function(t){r.push(t)})),r.map((function(t){return(0,e.clone)(t)}))}if("object"==typeof t&&Object.keys(t).length){var i=n({},t);return Object.keys(i).forEach((function(t){i[t]=(0,e.clone)(i[t])})),i}return t}},8055:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.camelize=e.isString=void 0,e.isString=function(t){return"string"==typeof t};var n,r,i=/-(\w)/g;e.camelize=(n=function(t){return t.replace(i,(function(t,e){return e?e.toUpperCase():""}))},r=Object.create(null),function(t){return r[t]||(r[t]=n(t))})},4307:function(t,e,n){"use strict";function r(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,f,d,h=t._root,p={data:r},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((c=e>=(o=(g+m)/2))?g=o:m=o,(l=n>=(a=(v+y)/2))?v=a:y=a,i=h,!(h=h[f=l<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,h.data),u=+t._y.call(null,h.data),e===s&&n===u)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+m)/2))?g=o:m=o,(l=n>=(a=(v+y)/2))?v=a:y=a}while((f=l<<1|c)==(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,t}function i(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function o(t){return t[0]}function a(t){return t[1]}function s(t,e,n){var r=new u(null==e?o:e,null==n?a:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function u(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function c(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}n.r(e),n.d(e,{quadtree:function(){return s}});var l=s.prototype=u.prototype;l.copy=function(){var t,e,n=new u(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=c(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=c(e));return n},l.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return r(this.cover(e,n),e,n,t)},l.addAll=function(t){var e,n,i,o,a=t.length,s=new Array(a),u=new Array(a),c=1/0,l=1/0,f=-1/0,d=-1/0;for(n=0;n<a;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,u[n]=o,i<c&&(c=i),i>f&&(f=i),o<l&&(l=o),o>d&&(d=o));if(c>f||l>d)return this;for(this.cover(c,l).cover(f,d),n=0;n<a;++n)r(this,s[n],u[n],t[n]);return this},l.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},l.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},l.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},l.find=function(t,e,n){var r,o,a,s,u,c,l,f=this._x0,d=this._y0,h=this._x1,p=this._y1,g=[],v=this._root;for(v&&g.push(new i(v,f,d,h,p)),null==n?n=1/0:(f=t-n,d=e-n,h=t+n,p=e+n,n*=n);c=g.pop();)if(!(!(v=c.node)||(o=c.x0)>h||(a=c.y0)>p||(s=c.x1)<f||(u=c.y1)<d))if(v.length){var m=(o+s)/2,y=(a+u)/2;g.push(new i(v[3],m,y,s,u),new i(v[2],o,y,m,u),new i(v[1],m,a,s,y),new i(v[0],o,a,m,y)),(l=(e>=y)<<1|t>=m)&&(c=g[g.length-1],g[g.length-1]=g[g.length-1-l],g[g.length-1-l]=c)}else{var b=t-+this._x.call(null,v.data),x=e-+this._y.call(null,v.data),w=b*b+x*x;if(w<n){var _=Math.sqrt(n=w);f=t-_,d=e-_,h=t+_,p=e+_,r=v.data}}return r},l.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,f,d,h=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!h)return this;if(h.length)for(;;){if((c=o>=(s=(p+v)/2))?p=s:v=s,(l=a>=(u=(g+m)/2))?g=u:m=u,e=h,!(h=h[f=l<<1|c]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},l.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},l.root=function(){return this._root},l.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},l.visit=function(t){var e,n,r,o,a,s,u=[],c=this._root;for(c&&u.push(new i(c,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(c=e.node,r=e.x0,o=e.y0,a=e.x1,s=e.y1)&&c.length){var l=(r+a)/2,f=(o+s)/2;(n=c[3])&&u.push(new i(n,l,f,a,s)),(n=c[2])&&u.push(new i(n,r,f,l,s)),(n=c[1])&&u.push(new i(n,l,o,a,f)),(n=c[0])&&u.push(new i(n,r,o,l,f))}return this},l.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var a,s=e.x0,u=e.y0,c=e.x1,l=e.y1,f=(s+c)/2,d=(u+l)/2;(a=o[0])&&n.push(new i(a,s,u,f,d)),(a=o[1])&&n.push(new i(a,f,u,c,d)),(a=o[2])&&n.push(new i(a,s,d,f,l)),(a=o[3])&&n.push(new i(a,f,d,c,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},l.x=function(t){return arguments.length?(this._x=t,this):this._x},l.y=function(t){return arguments.length?(this._y=t,this):this._y}},1278:function(t,e,n){"use strict";var r=n(4530);function i(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromTranslation(i,n),r.mat3.multiply(t,i,e)}function o(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromRotation(i,n),r.mat3.multiply(t,i,e)}function a(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromScaling(i,n),r.mat3.multiply(t,i,e)}e.vs=function(t,e){for(var n,s,u,c=t?[].concat(t):[1,0,0,0,1,0,0,0,1],l=0,f=e.length;l<f;l++){var d=e[l];switch(d[0]){case"t":i(c,c,[d[1],d[2]]);break;case"s":a(c,c,[d[1],d[2]]);break;case"r":o(c,c,d[1]);break;case"m":n=c,s=c,u=d[1],r.mat3.multiply(n,u,s)}}return c}},9242:function(t,e,n){"use strict";n.r(e),n.d(e,{Cache:function(){return Oe},assign:function(){return Yt},augment:function(){return Xt},clamp:function(){return et},clearAnimationFrame:function(){return Wt},clone:function(){return Zt},contains:function(){return i},debounce:function(){return Kt},deepMix:function(){return ee},difference:function(){return a},each:function(){return h},endsWith:function(){return V},every:function(){return U},extend:function(){return ne},filter:function(){return o},find:function(){return y},findIndex:function(){return b},firstValue:function(){return x},fixedBase:function(){return nt},flatten:function(){return w},flattenDeep:function(){return E},forIn:function(){return xt},get:function(){return de},getEllipsisText:function(){return Me},getRange:function(){return k},getType:function(){return It},getWrapBehavior:function(){return Z},group:function(){return q},groupBy:function(){return Y},groupToMap:function(){return X},has:function(){return wt},hasKey:function(){return _t},hasValue:function(){return St},head:function(){return z},identity:function(){return _e},includes:function(){return i},indexOf:function(){return re},isArguments:function(){return Pt},isArray:function(){return f},isArrayLike:function(){return r},isBoolean:function(){return Dt},isDate:function(){return Lt},isDecimal:function(){return it},isElement:function(){return Vt},isEmpty:function(){return oe},isEqual:function(){return se},isEqualWith:function(){return ue},isError:function(){return Rt},isEven:function(){return ot},isFinite:function(){return jt},isFunction:function(){return c},isInteger:function(){return at},isMatch:function(){return g},isNegative:function(){return st},isNil:function(){return l},isNull:function(){return Bt},isNumber:function(){return rt},isNumberEqual:function(){return ct},isObject:function(){return d},isObjectLike:function(){return v},isOdd:function(){return lt},isPlainObject:function(){return m},isPositive:function(){return ft},isPrototype:function(){return zt},isRegExp:function(){return $t},isString:function(){return L},isType:function(){return u},isUndefined:function(){return Gt},keys:function(){return p},last:function(){return $},lowerCase:function(){return kt},lowerFirst:function(){return Mt},map:function(){return ce},mapValues:function(){return fe},max:function(){return S},maxBy:function(){return dt},measureTextWidth:function(){return ke},memoize:function(){return Jt},min:function(){return C},minBy:function(){return ht},mix:function(){return Yt},mod:function(){return pt},noop:function(){return we},number2color:function(){return Q},omit:function(){return ve},parseRadius:function(){return tt},pick:function(){return ge},pull:function(){return A},pullAt:function(){return I},reduce:function(){return P},remove:function(){return D},requestAnimationFrame:function(){return Ut},set:function(){return he},size:function(){return Ee},some:function(){return W},sortBy:function(){return R},startsWith:function(){return G},substitute:function(){return Ot},throttle:function(){return me},toArray:function(){return ye},toDegree:function(){return vt},toInteger:function(){return mt},toRadian:function(){return bt},toString:function(){return Ct},union:function(){return B},uniq:function(){return j},uniqueId:function(){return xe},upperCase:function(){return Tt},upperFirst:function(){return At},values:function(){return Et},valuesOfKey:function(){return F},wrapBehavior:function(){return K}});var r=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},i=function(t,e){return!!r(t)&&t.indexOf(e)>-1},o=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];e(o,i)&&n.push(o)}return n},a=function(t,e){return void 0===e&&(e=[]),o(t,(function(t){return!i(e,t)}))},s={}.toString,u=function(t,e){return s.call(t)==="[object "+e+"]"},c=function(t){return u(t,"Function")},l=function(t){return null==t},f=function(t){return Array.isArray?Array.isArray(t):u(t,"Array")},d=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e},h=function(t,e){if(t)if(f(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(d(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break},p=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return h(t,(function(n,r){c(t)&&"prototype"===r||e.push(r)})),e},g=function(t,e){var n=p(e),r=n.length;if(l(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0},v=function(t){return"object"==typeof t&&null!==t},m=function(t){if(!v(t)||!u(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},y=function(t,e){if(!f(t))return null;var n;if(c(e)&&(n=e),m(e)&&(n=function(t){return g(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null},b=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1},x=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r][e];if(!l(i)){n=f(i)?i[0]:i;break}}return n},w=function(t){if(!f(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},_=function(t,e){if(void 0===e&&(e=[]),f(t))for(var n=0;n<t.length;n+=1)_(t[n],e);else e.push(t);return e},E=_,S=function(t){if(f(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},C=function(t){if(f(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},k=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(f(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var i=S(e);return{min:C(e),max:i}},M=Array.prototype,O=M.splice,T=M.indexOf,A=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=-1;(o=T.call(t,i))>-1;)O.call(t,o,1);return t},N=Array.prototype.splice,I=function(t,e){if(!r(t))return[];for(var n=t?e.length:0,i=n-1;n--;){var o=void 0,a=e[n];n!==i&&a===o||(o=a,N.call(t,a,1))}return t},P=function(t,e,n){if(!f(t)&&!m(t))return t;var r=n;return h(t,(function(t,n){r=e(r,t,n)})),r},D=function(t,e){var n=[];if(!r(t))return n;for(var i=-1,o=[],a=t.length;++i<a;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}return I(t,o),n},L=function(t){return u(t,"String")},R=function(t,e){var n;if(c(e))n=function(t,n){return e(t)-e(n)};else{var r=[];L(e)?r.push(e):f(e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t};function j(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}var B=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return j([].concat.apply([],t))},F=function(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i][e];if(!l(o)){f(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(n.push(s),r[s]=!0)}}}return n};function z(t){if(r(t))return t[0]}function $(t){if(r(t))return t[t.length-1]}var G=function(t,e){return!(!f(t)&&!L(t))&&t[0]===e},V=function(t,e){return!(!f(t)&&!L(t))&&t[t.length-1]===e},U=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0},W=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1},H=Object.prototype.hasOwnProperty,Y=function(t,e){if(!e||!f(t))return{};for(var n,r={},i=c(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var a=t[o];n=i(a),H.call(r,n)?r[n].push(a):r[n]=[a]}return r};function X(t,e){if(!e)return{0:t};if(!c(e)){var n=f(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return Y(t,e)}var q=function(t,e){if(!e)return[t];var n=X(t,e),r=[];for(var i in n)r.push(n[i]);return r},Z=function(t,e){return t["_wrap_"+e]},K=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n},J={},Q=function(t){var e=J[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;e="#"+n,J[t]=e}return e},tt=function(t){var e=0,n=0,r=0,i=0;return f(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}},et=function(t,e,n){return t<e?e:t>n?n:t},nt=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},rt=function(t){return u(t,"Number")},it=function(t){return rt(t)&&t%1!=0},ot=function(t){return rt(t)&&t%2==0},at=Number.isInteger?Number.isInteger:function(t){return rt(t)&&t%1==0},st=function(t){return rt(t)&&t<0},ut=1e-5;function ct(t,e,n){return void 0===n&&(n=ut),Math.abs(t-e)<n}var lt=function(t){return rt(t)&&t%2!=0},ft=function(t){return rt(t)&&t>0},dt=function(t,e){if(f(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=c(e)?e(o):o[e];a>r&&(n=o,r=a)}return n}},ht=function(t,e){if(f(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=c(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},pt=function(t,e){return(t%e+e)%e},gt=180/Math.PI,vt=function(t){return gt*t},mt=parseInt,yt=Math.PI/180,bt=function(t){return yt*t},xt=h,wt=function(t,e){return t.hasOwnProperty(e)},_t=wt,Et=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return h(t,(function(n,r){c(t)&&"prototype"===r||e.push(n)})),e},St=function(t,e){return i(Et(t),e)},Ct=function(t){return l(t)?"":t.toString()},kt=function(t){return Ct(t).toLowerCase()},Mt=function(t){var e=Ct(t);return e.charAt(0).toLowerCase()+e.substring(1)},Ot=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t},Tt=function(t){return Ct(t).toUpperCase()},At=function(t){var e=Ct(t);return e.charAt(0).toUpperCase()+e.substring(1)},Nt={}.toString,It=function(t){return Nt.call(t).replace(/^\[object /,"").replace(/]$/,"")},Pt=function(t){return u(t,"Arguments")},Dt=function(t){return u(t,"Boolean")},Lt=function(t){return u(t,"Date")},Rt=function(t){return u(t,"Error")};function jt(t){return rt(t)&&isFinite(t)}var Bt=function(t){return null===t},Ft=Object.prototype,zt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ft)},$t=function(t){return u(t,"RegExp")},Gt=function(t){return void 0===t},Vt=function(t){return t instanceof Element||t instanceof HTMLDocument};function Ut(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function Wt(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function Ht(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function Yt(t,e,n,r){return e&&Ht(t,e),n&&Ht(t,n),r&&Ht(t,r),t}var Xt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],r=1;r<t.length;r++){var i=t[r];c(i)&&(i=i.prototype),Yt(n.prototype,i)}},qt=function(t){if("object"!=typeof t||null===t)return t;var e;if(f(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=qt(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=qt(t[i]):e[i]=t[i];return e},Zt=qt,Kt=function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,o)}),e),a&&t.apply(i,o)}},Jt=function(t,e){if(!c(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n},Qt=5;function te(t,e,n,r){for(var i in n=n||0,r=r||Qt,e)if(e.hasOwnProperty(i)){var o=e[i];null!==o&&m(o)?(m(t[i])||(t[i]={}),n<r?te(t[i],o,n+1,r):t[i]=e[i]):f(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}var ee=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)te(t,e[r]);return t},ne=function(t,e,n,r){c(e)||(n=e,e=t,t=function(){});var i=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},o=i(e.prototype,t);return t.prototype=Yt(o,t.prototype),t.superclass=i(e.prototype,e),Yt(o,n),Yt(t,r),t},re=function(t,e){if(!r(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i},ie=Object.prototype.hasOwnProperty,oe=function(t){if(l(t))return!0;if(r(t))return!t.length;var e=It(t);if("Map"===e||"Set"===e)return!t.size;if(zt(t))return!Object.keys(t).length;for(var n in t)if(ie.call(t,n))return!1;return!0},ae=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(L(t)||L(e))return!1;if(r(t)||r(e)){if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length&&(n=ae(t[i],e[i]));i++);return n}if(v(t)||v(e)){var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(n=!0,i=0;i<o.length&&(n=ae(t[o[i]],e[o[i]]));i++);return n}return!1},se=ae,ue=function(t,e,n){return c(n)?!!n(t,e):se(t,e)},ce=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];n.push(e(o,i))}return n},le=function(t){return t},fe=function(t,e){void 0===e&&(e=le);var n={};return d(t)&&!l(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n},de=function(t,e,n){for(var r=0,i=L(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t},he=function(t,e,n){var r=t,i=L(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(d(r[t])||(r[t]=rt(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t},pe=Object.prototype.hasOwnProperty,ge=function(t,e){if(null===t||!m(t))return{};var n={};return h(e,(function(e){pe.call(t,e)&&(n[e]=t[e])})),n},ve=function(t,e){return P(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})},me=function(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return i=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),s=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,l)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c},ye=function(t){return r(t)?Array.prototype.slice.call(t):[]},be={},xe=function(t){return be[t=t||"g"]?be[t]+=1:be[t]=1,t+be[t]},we=function(){},_e=function(t){return t};function Ee(t){return l(t)?0:r(t)?t.length:Object.keys(t).length}var Se,Ce=n(655),ke=Jt((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return Se||(Se=document.createElement("canvas").getContext("2d")),Se.font=[o,a,i,n+"px",r].join(" "),Se.measureText(L(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),(0,Ce.__spreadArrays)([t],Et(e)).join("")})),Me=function(t,e,n,r){void 0===r&&(r="...");var i,o,a=ke(r,n),s=L(t)?t:Ct(t),u=e,c=[];if(ke(t,n)<=e)return t;for(;i=s.substr(0,16),!((o=ke(i,n))+a>u&&o>u);)if(c.push(i),u-=o,!(s=s.substr(16)))return c.join("");for(;i=s.substr(0,1),!((o=ke(i,n))+a>u);)if(c.push(i),u-=o,!(s=s.substr(1)))return c.join("");return""+c.join("")+r},Oe=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}()},8168:function(t,e,n){var r=n(8874),i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var u=a[s].channels,c=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:u}),Object.defineProperty(a[s],"labels",{value:c})}a.rgb.hsl=function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;return s===a?e=0:r===s?e=(i-o)/u:i===s?e=2+(o-r)/u:o===s&&(e=4+(r-i)/u),(e=Math.min(60*e,360))<0&&(e+=360),n=(a+s)/2,[e,100*(s===a?0:n<=.5?u/(s+a):u/(2-s-a)),100*n]},a.rgb.hsv=function(t){var e,n,r,i,o,a=t[0]/255,s=t[1]/255,u=t[2]/255,c=Math.max(a,s,u),l=c-Math.min(a,s,u),f=function(t){return(c-t)/6/l+.5};return 0===l?i=o=0:(o=l/c,e=f(a),n=f(s),r=f(u),a===c?i=r-n:s===c?i=1/3+e-r:u===c&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},a.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[a.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(n,r))*100,100*(r=1-1/255*Math.max(e,Math.max(n,r)))]},a.rgb.cmyk=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},a.rgb.keyword=function(t){var e=i[t];if(e)return e;var n,o,a,s=1/0;for(var u in r)if(r.hasOwnProperty(u)){var c=(o=t,a=r[u],Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)+Math.pow(o[2]-a[2],2));c<s&&(s=c,n=u)}return n},a.keyword.rgb=function(t){return r[t]},a.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},a.rgb.lab=function(t){var e=a.rgb.xyz(t),n=e[0],r=e[1],i=e[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},a.hsl.rgb=function(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0===s)return[o=255*u,o,o];e=2*u-(n=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var c=0;c<3;c++)(r=a+1/3*-(c-1))<0&&r++,r>1&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[c]=255*o;return i},a.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[e,100*(0===r?2*i/(o+i):2*n/(r+n)),(r+n)/2*100]},a.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*r*(1-n),s=255*r*(1-n*o),u=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,u,a];case 1:return[s,r,a];case 2:return[a,r,u];case 3:return[a,s,r];case 4:return[u,a,r];case 5:return[r,a,s]}},a.hsv.hsl=function(t){var e,n,r,i=t[0],o=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return r=(2-o)*a,n=o*s,[i,100*(n=(n/=(e=(2-o)*s)<=1?e:2-e)||0),100*(r/=2)]},a.hwb.rgb=function(t){var e,n,r,i,o,a,s,u=t[0]/360,c=t[1]/100,l=t[2]/100,f=c+l;switch(f>1&&(c/=f,l/=f),r=6*u-(e=Math.floor(6*u)),0!=(1&e)&&(r=1-r),i=c+r*((n=1-l)-c),e){default:case 6:case 0:o=n,a=i,s=c;break;case 1:o=i,a=n,s=c;break;case 2:o=c,a=n,s=i;break;case 3:o=c,a=i,s=n;break;case 4:o=i,a=c,s=n;break;case 5:o=n,a=c,s=i}return[255*o,255*a,255*s]},a.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},a.xyz.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,e=(e=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var o=Math.pow(n,3),a=Math.pow(e,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},a.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},a.lch.lab=function(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]},a.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],i=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===i&&(o+=60),o},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,o=Math.max(Math.max(n,r),i),a=Math.min(Math.min(n,r),i),s=o-a;return e=s<=0?0:o===n?(r-i)/s%6:o===r?2+(i-n)/s:4+(n-r)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(t){var e,n=t[1]/100,r=t[2]/100,i=0;return(e=r<.5?2*n*r:2*n*(1-r))<1&&(i=(r-.5*e)/(1-e)),[t[0],100*e,100*i]},a.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},a.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],a=e%1*6,s=a%1,u=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},a.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},a.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},a.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},a.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},2085:function(t,e,n){var r=n(8168),i=n(4111),o={};Object.keys(r).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:r[t].channels}),Object.defineProperty(o[t],"labels",{value:r[t].labels});var e=i(t);Object.keys(e).forEach((function(n){var r=e[n];o[t][n]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(r),o[t][n].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))})),t.exports=o},4111:function(t,e,n){var r=n(8168);function i(t,e){return function(n){return e(t(n))}}function o(t,e){for(var n=[e[t].parent,t],o=r[e[t].parent][t],a=e[t].parent;e[a].parent;)n.unshift(e[a].parent),o=i(r[e[a].parent][a],o),a=e[a].parent;return o.conversion=n,o}t.exports=function(t){for(var e=function(t){var e=function(){for(var t={},e=Object.keys(r),n=e.length,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(r[i]),a=o.length,s=0;s<a;s++){var u=o[s],c=e[u];-1===c.distance&&(c.distance=e[i].distance+1,c.parent=i,n.unshift(u))}return e}(t),n={},i=Object.keys(e),a=i.length,s=0;s<a;s++){var u=i[s];null!==e[u].parent&&(n[u]=o(u,e))}return n}},8874:function(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},9818:function(t,e,n){var r=n(8874),i=n(6851),o=Object.hasOwnProperty,a=Object.create(null);for(var s in r)o.call(r,s)&&(a[r[s]]=s);var u=t.exports={to:{},get:{}};function c(t,e,n){return Math.min(Math.max(e,t),n)}function l(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}u.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=u.get.hsl(t),n="hsl";break;case"hwb":e=u.get.hwb(t),n="hwb";break;default:e=u.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},u.get.rgb=function(t){if(!t)return null;var e,n,i,a=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=e[2],e=e[1],n=0;n<3;n++){var s=2*n;a[n]=parseInt(e.slice(s,s+2),16)}i&&(a[3]=parseInt(i,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(i=(e=e[1])[3],n=0;n<3;n++)a[n]=parseInt(e[n]+e[n],16);i&&(a[3]=parseInt(i+i,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)a[n]=parseInt(e[n+1],0);e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:o.call(r,e[1])?((a=r[e[1]])[3]=1,a):null:null;for(n=0;n<3;n++)a[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}for(n=0;n<3;n++)a[n]=c(a[n],0,255);return a[3]=c(a[3],0,1),a},u.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},u.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},u.to.hex=function(){var t=i(arguments);return"#"+l(t[0])+l(t[1])+l(t[2])+(t[3]<1?l(Math.round(255*t[3])):"")},u.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},u.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},u.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},u.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},u.to.keyword=function(t){return a[t.slice(0,3)]}},6767:function(t,e,n){"use strict";var r=n(9818),i=n(2085),o=[].slice,a=["keyword","gray","hex"],s={};Object.keys(i).forEach((function(t){s[o.call(i[t].labels).sort().join("")]=t}));var u={};function c(t,e){if(!(this instanceof c))return new c(t,e);if(e&&e in a&&(e=null),e&&!(e in i))throw new Error("Unknown model: "+e);var n,l;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof c)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var f=r.get(t);if(null===f)throw new Error("Unable to parse color from string: "+t);this.model=f.model,l=i[this.model].channels,this.color=f.value.slice(0,l),this.valpha="number"==typeof f.value[l]?f.value[l]:1}else if(t.length){this.model=e||"rgb",l=i[this.model].channels;var h=o.call(t,0,l);this.color=d(h,l),this.valpha="number"==typeof t[l]?t[l]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var p=Object.keys(t);"alpha"in t&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var g=p.sort().join("");if(!(g in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[g];var v=i[this.model].labels,m=[];for(n=0;n<v.length;n++)m.push(t[v[n]]);this.color=d(m)}if(u[this.model])for(l=i[this.model].channels,n=0;n<l;n++){var y=u[this.model][n];y&&(this.color[n]=y(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function l(t,e,n){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(u[t]||(u[t]=[]))[e]=n})),t=t[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[t]()).color[e]=r,i):(i=this[t]().color[e],n&&(i=n(i)),i)}}function f(t){return function(e){return Math.max(0,Math.min(t,e))}}function d(t,e){for(var n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}c.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in r.to?this:this.rgb(),n=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return r.to[e.model](n)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),n=1===e.valpha?e.color:e.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=i[this.model].channels,n=i[this.model].labels,r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new c(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new c(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:l("rgb",0,f(255)),green:l("rgb",1,f(255)),blue:l("rgb",2,f(255)),hue:l(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:l("hsl",1,f(100)),lightness:l("hsl",2,f(100)),saturationv:l("hsv",1,f(100)),value:l("hsv",2,f(100)),chroma:l("hcg",1,f(100)),gray:l("hcg",2,f(100)),white:l("hwb",1,f(100)),wblack:l("hwb",2,f(100)),cyan:l("cmyk",0,f(100)),magenta:l("cmyk",1,f(100)),yellow:l("cmyk",2,f(100)),black:l("cmyk",3,f(100)),x:l("xyz",0,f(100)),y:l("xyz",1,f(100)),z:l("xyz",2,f(100)),l:l("lab",0,f(100)),a:l("lab",1),b:l("lab",2),keyword:function(t){return arguments.length?new c(t):i[this.model].keyword(this.color)},hex:function(t){return arguments.length?new c(t):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return c.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return n=(n=(n+t)%360)<0?360+n:n,e.color[0]=n,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var n=t.rgb(),r=this.rgb(),i=void 0===e?.5:e,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,u=1-s;return c.rgb(s*n.red()+u*r.red(),s*n.green()+u*r.green(),s*n.blue()+u*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(i).forEach((function(t){if(-1===a.indexOf(t)){var e=i[t].channels;c.prototype[t]=function(){if(this.model===t)return new c(this);if(arguments.length)return new c(arguments,t);var n,r="number"==typeof arguments[e]?e:this.valpha;return new c((n=i[this.model][t].raw(this.color),Array.isArray(n)?n:[n]).concat(r),t)},c[t]=function(n){return"number"==typeof n&&(n=d(o.call(arguments),e)),new c(n,t)}}})),t.exports=c},9013:function(t,e,n){"use strict";function r(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function i(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,f,d,h=t._root,p={data:r},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((c=e>=(o=(g+m)/2))?g=o:m=o,(l=n>=(a=(v+y)/2))?v=a:y=a,i=h,!(h=h[f=l<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,h.data),u=+t._y.call(null,h.data),e===s&&n===u)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+m)/2))?g=o:m=o,(l=n>=(a=(v+y)/2))?v=a:y=a}while((f=l<<1|c)==(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,t}function o(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function a(t){return t[0]}function s(t){return t[1]}function u(t,e,n){var r=new c(null==e?a:e,null==n?s:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function c(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function l(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}n.r(e),n.d(e,{forceCenter:function(){return r},forceCollide:function(){return v},forceLink:function(){return b},forceManyBody:function(){return L},forceRadial:function(){return R},forceSimulation:function(){return D},forceX:function(){return j},forceY:function(){return B}});var f=u.prototype=c.prototype;function d(t){return function(){return t}}function h(t){return 1e-6*(t()-.5)}function p(t){return t.x+t.vx}function g(t){return t.y+t.vy}function v(t){var e,n,r,i=1,o=1;function a(){for(var t,a,c,l,f,d,v,m=e.length,y=0;y<o;++y)for(a=u(e,p,g).visitAfter(s),t=0;t<m;++t)c=e[t],d=n[c.index],v=d*d,l=c.x+c.vx,f=c.y+c.vy,a.visit(b);function b(t,e,n,o,a){var s=t.data,u=t.r,p=d+u;if(!s)return e>l+p||o<l-p||n>f+p||a<f-p;if(s.index>c.index){var g=l-s.x-s.vx,m=f-s.y-s.vy,y=g*g+m*m;y<p*p&&(0===g&&(y+=(g=h(r))*g),0===m&&(y+=(m=h(r))*m),y=(p-(y=Math.sqrt(y)))/y*i,c.vx+=(g*=y)*(p=(u*=u)/(v+u)),c.vy+=(m*=y)*p,s.vx-=g*(p=1-p),s.vy-=m*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function c(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=d(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,c()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),c(),a):t},a}function m(t){return t.index}function y(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function b(t){var e,n,r,i,o,a,s=m,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=d(30),l=1;function f(r){for(var i=0,s=t.length;i<l;++i)for(var u,c,f,d,p,g,v,m=0;m<s;++m)c=(u=t[m]).source,d=(f=u.target).x+f.vx-c.x-c.vx||h(a),p=f.y+f.vy-c.y-c.vy||h(a),d*=g=((g=Math.sqrt(d*d+p*p))-n[m])/g*r*e[m],p*=g,f.vx-=d*(v=o[m]),f.vy-=p*v,c.vx+=d*(v=1-v),c.vy+=p*v}function p(){if(r){var a,u,c=r.length,l=t.length,f=new Map(r.map(((t,e)=>[s(t,e,r),t])));for(a=0,i=new Array(c);a<l;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=y(f,u.source)),"object"!=typeof u.target&&(u.target=y(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(l);a<l;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),g(),n=new Array(l),v()}}function g(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function v(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,e){r=t,a=e,p()},f.links=function(e){return arguments.length?(t=e,p(),f):t},f.id=function(t){return arguments.length?(s=t,f):s},f.iterations=function(t){return arguments.length?(l=+t,f):l},f.strength=function(t){return arguments.length?(u="function"==typeof t?t:d(+t),g(),f):u},f.distance=function(t){return arguments.length?(c="function"==typeof t?t:d(+t),v(),f):c},f}f.copy=function(){var t,e,n=new c(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=l(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=l(e));return n},f.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return i(this.cover(e,n),e,n,t)},f.addAll=function(t){var e,n,r,o,a=t.length,s=new Array(a),u=new Array(a),c=1/0,l=1/0,f=-1/0,d=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=r,u[n]=o,r<c&&(c=r),r>f&&(f=r),o<l&&(l=o),o>d&&(d=o));if(c>f||l>d)return this;for(this.cover(c,l).cover(f,d),n=0;n<a;++n)i(this,s[n],u[n],t[n]);return this},f.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},f.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},f.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},f.find=function(t,e,n){var r,i,a,s,u,c,l,f=this._x0,d=this._y0,h=this._x1,p=this._y1,g=[],v=this._root;for(v&&g.push(new o(v,f,d,h,p)),null==n?n=1/0:(f=t-n,d=e-n,h=t+n,p=e+n,n*=n);c=g.pop();)if(!(!(v=c.node)||(i=c.x0)>h||(a=c.y0)>p||(s=c.x1)<f||(u=c.y1)<d))if(v.length){var m=(i+s)/2,y=(a+u)/2;g.push(new o(v[3],m,y,s,u),new o(v[2],i,y,m,u),new o(v[1],m,a,s,y),new o(v[0],i,a,m,y)),(l=(e>=y)<<1|t>=m)&&(c=g[g.length-1],g[g.length-1]=g[g.length-1-l],g[g.length-1-l]=c)}else{var b=t-+this._x.call(null,v.data),x=e-+this._y.call(null,v.data),w=b*b+x*x;if(w<n){var _=Math.sqrt(n=w);f=t-_,d=e-_,h=t+_,p=e+_,r=v.data}}return r},f.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,f,d,h=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!h)return this;if(h.length)for(;;){if((c=o>=(s=(p+v)/2))?p=s:v=s,(l=a>=(u=(g+m)/2))?g=u:m=u,e=h,!(h=h[f=l<<1|c]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},f.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},f.root=function(){return this._root},f.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},f.visit=function(t){var e,n,r,i,a,s,u=[],c=this._root;for(c&&u.push(new o(c,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(c=e.node,r=e.x0,i=e.y0,a=e.x1,s=e.y1)&&c.length){var l=(r+a)/2,f=(i+s)/2;(n=c[3])&&u.push(new o(n,l,f,a,s)),(n=c[2])&&u.push(new o(n,r,f,l,s)),(n=c[1])&&u.push(new o(n,l,i,a,f)),(n=c[0])&&u.push(new o(n,r,i,l,f))}return this},f.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,s=e.x0,u=e.y0,c=e.x1,l=e.y1,f=(s+c)/2,d=(u+l)/2;(a=i[0])&&n.push(new o(a,s,u,f,d)),(a=i[1])&&n.push(new o(a,f,u,c,d)),(a=i[2])&&n.push(new o(a,s,d,f,l)),(a=i[3])&&n.push(new o(a,f,d,c,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},f.x=function(t){return arguments.length?(this._x=t,this):this._x},f.y=function(t){return arguments.length?(this._y=t,this):this._y};var x={value:()=>{}};function w(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new _(r)}function _(t){this._=t}function E(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function S(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=x,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}_.prototype=w.prototype={constructor:_,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=S(i[n],t.name,e);else if(null==e)for(n in i)i[n]=S(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=E(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var C=w,k=n(5374);const M=1664525,O=1013904223,T=4294967296;function A(t){return t.x}function N(t){return t.y}var I=10,P=Math.PI*(3-Math.sqrt(5));function D(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=(0,k.HT)(f),c=C("tick","end"),l=function(){let t=1;return()=>(t=(M*t+O)%T)/T}();function f(){d(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function d(r){var u,c,l=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=I*Math.sqrt(.5+n),o=n*P;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),h(),e={tick:d,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(l=t,s.forEach(p),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function L(){var t,e,n,r,i,o=d(-30),a=1,s=1/0,c=.81;function l(n){var i,o=t.length,a=u(t,A,N).visitAfter(p);for(r=n,i=0;i<o;++i)e=t[i],a.visit(g)}function f(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function p(t){var e,n,r,o,a,s=0,u=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function g(t,o,u,l){if(!t.value)return!0;var f=t.x-e.x,d=t.y-e.y,p=l-o,g=f*f+d*d;if(p*p/c<g)return g<s&&(0===f&&(g+=(f=h(n))*f),0===d&&(g+=(d=h(n))*d),g<a&&(g=Math.sqrt(a*g)),e.vx+=f*t.value*r/g,e.vy+=d*t.value*r/g),!0;if(!(t.length||g>=s)){(t.data!==e||t.next)&&(0===f&&(g+=(f=h(n))*f),0===d&&(g+=(d=h(n))*d),g<a&&(g=Math.sqrt(a*g)));do{t.data!==e&&(p=i[t.data.index]*r/g,e.vx+=f*p,e.vy+=d*p)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,f()},l.strength=function(t){return arguments.length?(o="function"==typeof t?t:d(+t),f(),l):o},l.distanceMin=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.distanceMax=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.theta=function(t){return arguments.length?(c=t*t,l):Math.sqrt(c)},l}function R(t,e,n){var r,i,o,a=d(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],c=u.x-e||1e-6,l=u.y-n||1e-6,f=Math.sqrt(c*c+l*l),d=(o[a]-f)*i[a]*t/f;u.vx+=c*d,u.vy+=l*d}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=d(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:d(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function j(t){var e,n,r,i=d(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=d(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:d(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),a(),o):t},o}function B(t){var e,n,r,i=d(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=d(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:d(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),a(),o):t},o}},5374:function(t,e,n){"use strict";n.d(e,{HT:function(){return m}});var r,i,o=0,a=0,s=0,u=1e3,c=0,l=0,f=0,d="object"==typeof performance&&performance.now?performance:Date,h="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function p(){return l||(h(g),l=d.now()+f)}function g(){l=0}function v(){this._call=this._time=this._next=null}function m(t,e,n){var r=new v;return r.restart(t,e,n),r}function y(){l=(c=d.now())+f,o=a=0;try{!function(){p(),++o;for(var t,e=r;e;)(t=l-e._time)>=0&&e._call.call(null,t),e=e._next;--o}()}finally{o=0,function(){for(var t,e,n=r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:r=e);i=t,x(o)}(),l=0}}function b(){var t=d.now(),e=t-c;e>u&&(f-=e,c=t)}function x(t){o||(a&&(a=clearTimeout(a)),t-l>24?(t<1/0&&(a=setTimeout(y,t-d.now()-f)),s&&(s=clearInterval(s))):(s||(c=d.now(),s=setInterval(b,u)),o=1,h(y)))}v.prototype=m.prototype={constructor:v,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?p():+n)+(null==e?0:+e),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=n,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}}},1969:function(t,e,n){"use strict";n.r(e),n.d(e,{BRIDGE_GRAPH_NAME:function(){return s},GraphType:function(){return l},HierarchyNodeType:function(){return f},InclusionType:function(){return c},LAYOUT_CONFIG:function(){return r},NodeType:function(){return u},ROOT_NAME:function(){return a},buildGraph:function(){return Ho},flatGraph:function(){return Yo},getEdges:function(){return Xo},mergeConfig:function(){return i}});const r={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function i(t={},e=r){var n,i,o,a;const s=JSON.parse(JSON.stringify(e)),u=(null===(n=null==t?void 0:t.graph)||void 0===n?void 0:n.meta)||{},c=(null===(i=null==t?void 0:t.subScene)||void 0===i?void 0:i.meta)||{},l=(null===(o=null==t?void 0:t.nodeSize)||void 0===o?void 0:o.meta)||{},f=(null===(a=null==t?void 0:t.nodeSize)||void 0===a?void 0:a.node)||{},d=s.nodeSize.bridge;return{graph:{meta:Object.assign(s.graph.meta,u)},subScene:{meta:Object.assign(s.subScene.meta,c)},nodeSize:{meta:Object.assign(s.nodeSize.meta,l),node:Object.assign(s.nodeSize.node,f),bridge:d}}}function o(t){return`${t}`}const a=o("ROOT"),s=o("BRIDGE_GRAPH");var u,c,l,f;!function(t){t[t.META=0]="META",t[t.NODE=1]="NODE",t[t.BRIDGE=2]="BRIDGE"}(u||(u={})),function(t){t[t.INCLUDE=0]="INCLUDE",t[t.EXCLUDE=1]="EXCLUDE",t[t.UNSPECIFIED=2]="UNSPECIFIED"}(c||(c={})),function(t){t[t.META=0]="META",t[t.CORE=1]="CORE",t[t.BRIDGE=2]="BRIDGE"}(l||(l={})),function(t){t[t.META=0]="META",t[t.OP=1]="OP",t[t.SERIES=2]="SERIES"}(f||(f={}));var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function h(t,e){return t(e={exports:{}},e.exports),e.exports}var p=function(t,e){return t===e||t!=t&&e!=e},g=function(t,e){for(var n=t.length;n--;)if(p(t[n][0],e))return n;return-1},v=Array.prototype.splice;function m(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}m.prototype.clear=function(){this.__data__=[],this.size=0},m.prototype.delete=function(t){var e=this.__data__,n=g(e,t);return!(n<0||(n==e.length-1?e.pop():v.call(e,n,1),--this.size,0))},m.prototype.get=function(t){var e=this.__data__,n=g(e,t);return n<0?void 0:e[n][1]},m.prototype.has=function(t){return g(this.__data__,t)>-1},m.prototype.set=function(t,e){var n=this.__data__,r=g(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var y,b=m,x="object"==typeof d&&d&&d.Object===Object&&d,w="object"==typeof self&&self&&self.Object===Object&&self,_=x||w||Function("return this")(),E=_.Symbol,S=Object.prototype,C=S.hasOwnProperty,k=S.toString,M=E?E.toStringTag:void 0,O=Object.prototype.toString,T=E?E.toStringTag:void 0,A=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":T&&T in Object(t)?function(t){var e=C.call(t,M),n=t[M];try{t[M]=void 0;var r=!0}catch(t){}var i=k.call(t);return r&&(e?t[M]=n:delete t[M]),i}(t):function(t){return O.call(t)}(t)},N=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},I=function(t){if(!N(t))return!1;var e=A(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},P=_["__core-js_shared__"],D=(y=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",L=Function.prototype.toString,R=function(t){if(null!=t){try{return L.call(t)}catch(t){}try{return t+""}catch(t){}}return""},j=/^\[object .+?Constructor\]$/,B=Function.prototype,F=Object.prototype,z=B.toString,$=F.hasOwnProperty,G=RegExp("^"+z.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!N(t)||function(t){return!!D&&D in t}(t))&&(I(t)?G:j).test(R(t))}(n)?n:void 0},U=V(_,"Map"),W=V(Object,"create"),H=Object.prototype.hasOwnProperty,Y=Object.prototype.hasOwnProperty;function X(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}X.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},X.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},X.prototype.get=function(t){var e=this.__data__;if(W){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return H.call(e,t)?e[t]:void 0},X.prototype.has=function(t){var e=this.__data__;return W?void 0!==e[t]:Y.call(e,t)},X.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=W&&void 0===e?"__lodash_hash_undefined__":e,this};var q=X,Z=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function K(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}K.prototype.clear=function(){this.size=0,this.__data__={hash:new q,map:new(U||b),string:new q}},K.prototype.delete=function(t){var e=Z(this,t).delete(t);return this.size-=e?1:0,e},K.prototype.get=function(t){return Z(this,t).get(t)},K.prototype.has=function(t){return Z(this,t).has(t)},K.prototype.set=function(t,e){var n=Z(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var J=K;function Q(t){var e=this.__data__=new b(t);this.size=e.size}Q.prototype.clear=function(){this.__data__=new b,this.size=0},Q.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Q.prototype.get=function(t){return this.__data__.get(t)},Q.prototype.has=function(t){return this.__data__.has(t)},Q.prototype.set=function(t,e){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!U||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new J(r)}return n.set(t,e),this.size=n.size,this};var tt=Q,et=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},nt=function(){try{var t=V(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),rt=function(t,e,n){"__proto__"==e&&nt?nt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},it=Object.prototype.hasOwnProperty,ot=function(t,e,n){var r=t[e];it.call(t,e)&&p(r,n)&&(void 0!==n||e in t)||rt(t,e,n)},at=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?rt(n,s,u):ot(n,s,u)}return n},st=function(t){return null!=t&&"object"==typeof t},ut=function(t){return st(t)&&"[object Arguments]"==A(t)},ct=Object.prototype,lt=ct.hasOwnProperty,ft=ct.propertyIsEnumerable,dt=ut(function(){return arguments}())?ut:function(t){return st(t)&&lt.call(t,"callee")&&!ft.call(t,"callee")},ht=Array.isArray,pt=function(){return!1},gt=h((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?_.Buffer:void 0,o=(i?i.isBuffer:void 0)||pt;t.exports=o})),vt=/^(?:0|[1-9]\d*)$/,mt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e},yt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},bt={};bt["[object Float32Array]"]=bt["[object Float64Array]"]=bt["[object Int8Array]"]=bt["[object Int16Array]"]=bt["[object Int32Array]"]=bt["[object Uint8Array]"]=bt["[object Uint8ClampedArray]"]=bt["[object Uint16Array]"]=bt["[object Uint32Array]"]=!0,bt["[object Arguments]"]=bt["[object Array]"]=bt["[object ArrayBuffer]"]=bt["[object Boolean]"]=bt["[object DataView]"]=bt["[object Date]"]=bt["[object Error]"]=bt["[object Function]"]=bt["[object Map]"]=bt["[object Number]"]=bt["[object Object]"]=bt["[object RegExp]"]=bt["[object Set]"]=bt["[object String]"]=bt["[object WeakMap]"]=!1;var xt=function(t){return function(e){return t(e)}},wt=h((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&x.process,o=function(){try{return r&&r.require&&r.require("util").types||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),_t=wt&&wt.isTypedArray,Et=_t?xt(_t):function(t){return st(t)&&yt(t.length)&&!!bt[A(t)]},St=Object.prototype.hasOwnProperty,Ct=function(t,e){var n=ht(t),r=!n&&dt(t),i=!n&&!r&&gt(t),o=!n&&!r&&!i&&Et(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var c in t)!e&&!St.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mt(c,u))||s.push(c);return s},kt=Object.prototype,Mt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||kt)},Ot=function(t,e){return function(n){return t(e(n))}},Tt=Ot(Object.keys,Object),At=Object.prototype.hasOwnProperty,Nt=function(t){if(!Mt(t))return Tt(t);var e=[];for(var n in Object(t))At.call(t,n)&&"constructor"!=n&&e.push(n);return e},It=function(t){return null!=t&&yt(t.length)&&!I(t)},Pt=function(t){return It(t)?Ct(t):Nt(t)},Dt=Object.prototype.hasOwnProperty,Lt=function(t){return It(t)?Ct(t,!0):function(t){if(!N(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Mt(t),n=[];for(var r in t)("constructor"!=r||!e&&Dt.call(t,r))&&n.push(r);return n}(t)},Rt=h((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?_.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}})),jt=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Bt=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o},Ft=function(){return[]},zt=Object.prototype.propertyIsEnumerable,$t=Object.getOwnPropertySymbols,Gt=$t?function(t){return null==t?[]:(t=Object(t),Bt($t(t),(function(e){return zt.call(t,e)})))}:Ft,Vt=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Ut=Ot(Object.getPrototypeOf,Object),Wt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Vt(e,Gt(t)),t=Ut(t);return e}:Ft,Ht=function(t,e,n){var r=e(t);return ht(t)?r:Vt(r,n(t))},Yt=function(t){return Ht(t,Pt,Gt)},Xt=function(t){return Ht(t,Lt,Wt)},qt=V(_,"DataView"),Zt=V(_,"Promise"),Kt=V(_,"Set"),Jt=V(_,"WeakMap"),Qt=R(qt),te=R(U),ee=R(Zt),ne=R(Kt),re=R(Jt),ie=A;(qt&&"[object DataView]"!=ie(new qt(new ArrayBuffer(1)))||U&&"[object Map]"!=ie(new U)||Zt&&"[object Promise]"!=ie(Zt.resolve())||Kt&&"[object Set]"!=ie(new Kt)||Jt&&"[object WeakMap]"!=ie(new Jt))&&(ie=function(t){var e=A(t),n="[object Object]"==e?t.constructor:void 0,r=n?R(n):"";if(r)switch(r){case Qt:return"[object DataView]";case te:return"[object Map]";case ee:return"[object Promise]";case ne:return"[object Set]";case re:return"[object WeakMap]"}return e});var oe=ie,ae=Object.prototype.hasOwnProperty,se=_.Uint8Array,ue=function(t){var e=new t.constructor(t.byteLength);return new se(e).set(new se(t)),e},ce=/\w*$/,le=E?E.prototype:void 0,fe=le?le.valueOf:void 0,de=function(t,e){var n=e?ue(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},he=Object.create,pe=function(){function t(){}return function(e){if(!N(e))return{};if(he)return he(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),ge=function(t){return"function"!=typeof t.constructor||Mt(t)?{}:pe(Ut(t))},ve=wt&&wt.isMap,me=ve?xt(ve):function(t){return st(t)&&"[object Map]"==oe(t)},ye=wt&&wt.isSet,be=ye?xt(ye):function(t){return st(t)&&"[object Set]"==oe(t)},xe={};xe["[object Arguments]"]=xe["[object Array]"]=xe["[object ArrayBuffer]"]=xe["[object DataView]"]=xe["[object Boolean]"]=xe["[object Date]"]=xe["[object Float32Array]"]=xe["[object Float64Array]"]=xe["[object Int8Array]"]=xe["[object Int16Array]"]=xe["[object Int32Array]"]=xe["[object Map]"]=xe["[object Number]"]=xe["[object Object]"]=xe["[object RegExp]"]=xe["[object Set]"]=xe["[object String]"]=xe["[object Symbol]"]=xe["[object Uint8Array]"]=xe["[object Uint8ClampedArray]"]=xe["[object Uint16Array]"]=xe["[object Uint32Array]"]=!0,xe["[object Error]"]=xe["[object Function]"]=xe["[object WeakMap]"]=!1;var we=function t(e,n,r,i,o,a){var s,u=1&n,c=2&n,l=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!N(e))return e;var f=ht(e);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ae.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!u)return jt(e,s)}else{var d=oe(e),h="[object Function]"==d||"[object GeneratorFunction]"==d;if(gt(e))return Rt(e,u);if("[object Object]"==d||"[object Arguments]"==d||h&&!o){if(s=c||h?{}:ge(e),!u)return c?function(t,e){return at(t,Wt(t),e)}(e,function(t,e){return t&&at(e,Lt(e),t)}(s,e)):function(t,e){return at(t,Gt(t),e)}(e,function(t,e){return t&&at(e,Pt(e),t)}(s,e))}else{if(!xe[d])return o?e:{};s=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return ue(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?ue(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return de(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,ce.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return function(t){return fe?Object(fe.call(t)):{}}(t)}}(e,d,u)}}a||(a=new tt);var p=a.get(e);if(p)return p;a.set(e,s),be(e)?e.forEach((function(i){s.add(t(i,n,r,i,e,a))})):me(e)&&e.forEach((function(i,o){s.set(o,t(i,n,r,o,e,a))}));var g=f?void 0:(l?c?Xt:Yt:c?Lt:Pt)(e);return et(g||e,(function(i,o){g&&(i=e[o=i]),ot(s,o,t(i,n,r,o,e,a))})),s},_e=function(t){return function(){return t}},Ee=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[++r];if(!1===e(i[s],s,i))break}return t},Se=function(t,e){return t&&Ee(t,e,Pt)},Ce=function(t,e){return function(e,n){if(null==e)return e;if(!It(e))return t(e,n);for(var r=e.length,i=-1,o=Object(e);++i<r&&!1!==n(o[i],i,o););return e}}(Se),ke=function(t){return t},Me=function(t){return"function"==typeof t?t:ke},Oe=function(t,e){return(ht(t)?et:Ce)(t,Me(e))},Te=Oe,Ae=function(t,e){var n=[];return Ce(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n};function Ne(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new J;++e<n;)this.add(t[e])}Ne.prototype.add=Ne.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ne.prototype.has=function(t){return this.__data__.has(t)};var Ie=Ne,Pe=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},De=function(t,e){return t.has(e)},Le=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t),l=o.get(e);if(c&&l)return c==e&&l==t;var f=-1,d=!0,h=2&n?new Ie:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var p=t[f],g=e[f];if(r)var v=a?r(g,p,f,e,t,o):r(p,g,f,t,e,o);if(void 0!==v){if(v)continue;d=!1;break}if(h){if(!Pe(e,(function(t,e){if(!De(h,e)&&(p===t||i(p,t,n,r,o)))return h.push(e)}))){d=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d},Re=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},je=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Be=E?E.prototype:void 0,Fe=Be?Be.valueOf:void 0,ze=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new se(t),new se(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Re;case"[object Set]":var u=1&r;if(s||(s=je),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=Le(s(t),s(e),r,i,o,a);return a.delete(t),l;case"[object Symbol]":if(Fe)return Fe.call(t)==Fe.call(e)}return!1},$e=Object.prototype.hasOwnProperty,Ge=Object.prototype.hasOwnProperty,Ve=function t(e,n,r,i,o){return e===n||(null==e||null==n||!st(e)&&!st(n)?e!=e&&n!=n:function(t,e,n,r,i,o){var a=ht(t),s=ht(e),u=a?"[object Array]":oe(t),c=s?"[object Array]":oe(e),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),f="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),d=u==c;if(d&&gt(t)){if(!gt(e))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new tt),a||Et(t)?Le(t,e,n,r,i,o):ze(t,e,u,n,r,i,o);if(!(1&n)){var h=l&&Ge.call(t,"__wrapped__"),p=f&&Ge.call(e,"__wrapped__");if(h||p){var g=h?t.value():t,v=p?e.value():e;return o||(o=new tt),i(g,v,n,r,o)}}return!!d&&(o||(o=new tt),function(t,e,n,r,i,o){var a=1&n,s=Yt(t),u=s.length;if(u!=Yt(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:$e.call(e,l)))return!1}var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var h=!0;o.set(t,e),o.set(e,t);for(var p=a;++c<u;){var g=t[l=s[c]],v=e[l];if(r)var m=a?r(v,g,l,e,t,o):r(g,v,l,t,e,o);if(!(void 0===m?g===v||i(g,v,n,r,o):m)){h=!1;break}p||(p="constructor"==l)}if(h&&!p){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(h=!1)}return o.delete(t),o.delete(e),h}(t,e,n,r,i,o))}(e,n,r,i,t,o))},Ue=function(t){return t==t&&!N(t)},We=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},He=function(t){return"symbol"==typeof t||st(t)&&"[object Symbol]"==A(t)},Ye=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xe=/^\w*$/,qe=function(t,e){if(ht(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!He(t))||Xe.test(t)||!Ye.test(t)||null!=e&&t in Object(e)};function Ze(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ze.Cache||J),n}Ze.Cache=J;var Ke,Je=Ze,Qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tn=/\\(\\)?/g,en=function(t){var e=Je((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Qe,(function(t,n,r,i){e.push(r?i.replace(tn,"$1"):n||t)})),e}),(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}(),nn=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},rn=E?E.prototype:void 0,on=rn?rn.toString:void 0,an=function t(e){if("string"==typeof e)return e;if(ht(e))return nn(e,t)+"";if(He(e))return on?on.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},sn=function(t){return null==t?"":an(t)},un=function(t,e){return ht(t)?t:qe(t,e)?[t]:en(sn(t))},cn=function(t){if("string"==typeof t||He(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},ln=function(t,e){for(var n=0,r=(e=un(e,t)).length;null!=t&&n<r;)t=t[cn(e[n++])];return n&&n==r?t:void 0},fn=function(t,e){return null!=t&&e in Object(t)},dn=function(t,e,n){for(var r=-1,i=(e=un(e,t)).length,o=!1;++r<i;){var a=cn(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&yt(i)&&mt(a,i)&&(ht(t)||dt(t))},hn=function(t,e){return null!=t&&dn(t,e,fn)},pn=function(t){return function(e){return null==e?void 0:e[t]}},gn=function(t){return"function"==typeof t?t:null==t?ke:"object"==typeof t?ht(t)?function(t,e){return qe(t)&&Ue(e)?We(cn(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:ln(t,e);return void 0===r?void 0:r}(n,t);return void 0===r&&r===e?hn(n,t):Ve(e,r,3)}}(t[0],t[1]):function(t){var e=function(t){for(var e=Pt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ue(i)]}return e}(t);return 1==e.length&&e[0][2]?We(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var s=(a=n[i])[0],u=t[s],c=a[1];if(a[2]){if(void 0===u&&!(s in t))return!1}else{var l,f=new tt;if(!(void 0===l?Ve(c,u,3,r,f):l))return!1}}return!0}(n,0,e)}}(t):function(t){return qe(t)?pn(cn(t)):function(t){return function(e){return ln(e,t)}}(t)}(t)},vn=function(t,e){return(ht(t)?Bt:Ae)(t,gn(e))},mn=Object.prototype.hasOwnProperty,yn=function(t,e){return null!=t&&mn.call(t,e)},bn=function(t,e){return null!=t&&dn(t,e,yn)},xn=Object.prototype.hasOwnProperty,wn=function(t){return void 0===t},_n=function(t,e){var n=-1,r=It(t)?Array(t.length):[];return Ce(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},En=function(t,e){return(ht(t)?nn:_n)(t,gn(e))},Sn=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},Cn=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n},kn=function(t,e,n){var r=ht(t)?Sn:Cn,i=arguments.length<3;return r(t,gn(e),n,i,Ce)},Mn=pn("length"),On=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Tn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",An="\\ud83c[\\udffb-\\udfff]",Nn="[^\\ud800-\\udfff]",In="(?:\\ud83c[\\udde6-\\uddff]){2}",Pn="[\\ud800-\\udbff][\\udc00-\\udfff]",Dn="(?:"+Tn+"|"+An+")?",Ln="[\\ufe0e\\ufe0f]?"+Dn+"(?:\\u200d(?:"+[Nn,In,Pn].join("|")+")[\\ufe0e\\ufe0f]?"+Dn+")*",Rn="(?:"+[Nn+Tn+"?",Tn,In,Pn,"[\\ud800-\\udfff]"].join("|")+")",jn=RegExp(An+"(?="+An+")|"+Rn+Ln,"g"),Bn=E?E.isConcatSpreadable:void 0,Fn=function(t){return ht(t)||dt(t)||!!(Bn&&t&&t[Bn])},zn=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=Fn),o||(o=[]);++a<s;){var u=e[a];n>0&&r(u)?n>1?t(u,n-1,r,i,o):Vt(o,u):i||(o[o.length]=u)}return o},$n=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Gn=Math.max,Vn=function(t,e,n){return e=Gn(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Gn(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),$n(t,this,s)}},Un=nt?function(t,e){return nt(t,"toString",{configurable:!0,enumerable:!1,value:_e(e),writable:!0})}:ke,Wn=Date.now,Hn=function(t){var e=0,n=0;return function(){var r=Wn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Un),Yn=function(t,e){return Hn(Vn(t,e,ke),t+"")},Xn=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1},qn=function(t){return t!=t},Zn=function(t,e){return!(null==t||!t.length)&&function(t,e,n){return e==e?function(t,e,n){for(var r=-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e):Xn(t,qn,0)}(t,e)>-1},Kn=Kt&&1/je(new Kt([,-0]))[1]==1/0?function(t){return new Kt(t)}:function(){},Jn=function(t){return st(t)&&It(t)},Qn=Yn((function(t){return function(t,e,n){var r=-1,i=Zn,o=t.length,a=!0,s=[],u=s;if(o>=200){var c=Kn(t);if(c)return je(c);a=!1,i=De,u=new Ie}else u=s;t:for(;++r<o;){var l=t[r],f=l;if(l=0!==l?l:0,a&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue t;s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}(zn(t,1,Jn,!0))})),tr=function(t){return null==t?[]:function(t,e){return nn(e,(function(e){return t[e]}))}(t,Pt(t))};try{Ke={clone:function(t){return we(t,4)},constant:_e,each:Te,filter:vn,has:bn,isArray:ht,isEmpty:function(t){if(null==t)return!0;if(It(t)&&(ht(t)||"string"==typeof t||"function"==typeof t.splice||gt(t)||Et(t)||dt(t)))return!t.length;var e=oe(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Mt(t))return!Nt(t).length;for(var n in t)if(xn.call(t,n))return!1;return!0},isFunction:I,isUndefined:wn,keys:Pt,map:En,reduce:kn,size:function(t){if(null==t)return 0;if(It(t))return function(t){return"string"==typeof t||!ht(t)&&st(t)&&"[object String]"==A(t)}(t)?function(t){return function(t){return On.test(t)}(t)?function(t){for(var e=jn.lastIndex=0;jn.test(t);)++e;return e}(t):Mn(t)}(t):t.length;var e=oe(t);return"[object Map]"==e||"[object Set]"==e?t.size:Nt(t).length},transform:function(t,e,n){var r=ht(t),i=r||gt(t)||Et(t);if(e=gn(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:N(t)&&I(o)?pe(Ut(t)):{}}return(i?et:Se)(t,(function(t,r,i){return e(n,t,r,i)})),n},union:Qn,values:tr}}catch(r){}Ke||(Ke=window._);var er=Ke,nr=rr;function rr(t){this._isDirected=!er.has(t,"directed")||t.directed,this._isMultigraph=!!er.has(t,"multigraph")&&t.multigraph,this._isCompound=!!er.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=er.constant(void 0),this._defaultEdgeLabelFn=er.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function ir(t,e){t[e]?t[e]++:t[e]=1}function or(t,e){--t[e]||delete t[e]}function ar(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+""+o+""+(er.isUndefined(r)?"\0":r)}function sr(t,e){return ar(t,e.v,e.w,e.name)}rr.prototype._nodeCount=0,rr.prototype._edgeCount=0,rr.prototype.isDirected=function(){return this._isDirected},rr.prototype.isMultigraph=function(){return this._isMultigraph},rr.prototype.isCompound=function(){return this._isCompound},rr.prototype.setGraph=function(t){return this._label=t,this},rr.prototype.graph=function(){return this._label},rr.prototype.setDefaultNodeLabel=function(t){return er.isFunction(t)||(t=er.constant(t)),this._defaultNodeLabelFn=t,this},rr.prototype.nodeCount=function(){return this._nodeCount},rr.prototype.nodes=function(){return er.keys(this._nodes)},rr.prototype.sources=function(){var t=this;return er.filter(this.nodes(),(function(e){return er.isEmpty(t._in[e])}))},rr.prototype.sinks=function(){var t=this;return er.filter(this.nodes(),(function(e){return er.isEmpty(t._out[e])}))},rr.prototype.setNodes=function(t,e){var n=arguments,r=this;return er.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},rr.prototype.setNode=function(t,e){return er.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},rr.prototype.node=function(t){return this._nodes[t]},rr.prototype.hasNode=function(t){return er.has(this._nodes,t)},rr.prototype.removeNode=function(t){var e=this;if(er.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],er.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),er.each(er.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],er.each(er.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},rr.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(er.isUndefined(e))e="\0";else{for(var n=e+="";!er.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},rr.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},rr.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}},rr.prototype.children=function(t){if(er.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return er.keys(e)}else{if("\0"===t)return this.nodes();if(this.hasNode(t))return[]}},rr.prototype.predecessors=function(t){var e=this._preds[t];if(e)return er.keys(e)},rr.prototype.successors=function(t){var e=this._sucs[t];if(e)return er.keys(e)},rr.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return er.union(e,this.successors(t))},rr.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},rr.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;er.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),er.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};function i(t){var o=n.parent(t);return void 0===o||e.hasNode(o)?(r[t]=o,o):o in r?r[o]:i(o)}return this._isCompound&&er.each(e.nodes(),(function(t){e.setParent(t,i(t))})),e},rr.prototype.setDefaultEdgeLabel=function(t){return er.isFunction(t)||(t=er.constant(t)),this._defaultEdgeLabelFn=t,this},rr.prototype.edgeCount=function(){return this._edgeCount},rr.prototype.edges=function(){return er.values(this._edgeObjs)},rr.prototype.setPath=function(t,e){var n=this,r=arguments;return er.reduce(t,(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i})),this},rr.prototype.setEdge=function(){var t,e,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(t=o.v,e=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=o,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,er.isUndefined(n)||(n=""+n);var a=ar(this._isDirected,t,e,n);if(er.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!er.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(t,e,n);var s=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}(this._isDirected,t,e,n);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[a]=s,ir(this._preds[e],t),ir(this._sucs[t],e),this._in[e][a]=s,this._out[t][a]=s,this._edgeCount++,this},rr.prototype.edge=function(t,e,n){var r=1===arguments.length?sr(this._isDirected,arguments[0]):ar(this._isDirected,t,e,n);return this._edgeLabels[r]},rr.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?sr(this._isDirected,arguments[0]):ar(this._isDirected,t,e,n);return er.has(this._edgeLabels,r)},rr.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?sr(this._isDirected,arguments[0]):ar(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],or(this._preds[e],t),or(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},rr.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=er.values(n);return e?er.filter(r,(function(t){return t.v===e})):r}},rr.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=er.values(n);return e?er.filter(r,(function(t){return t.w===e})):r}},rr.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};var ur={Graph:nr,version:"2.1.8"},cr={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:lr(t),edges:fr(t)};return er.isUndefined(t.graph())||(e.value=er.clone(t.graph())),e},read:function(t){var e=new nr(t.options).setGraph(t.value);return er.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),er.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}};function lr(t){return er.map(t.nodes(),(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return er.isUndefined(n)||(i.value=n),er.isUndefined(r)||(i.parent=r),i}))}function fr(t){return er.map(t.edges(),(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return er.isUndefined(e.name)||(r.name=e.name),er.isUndefined(n)||(r.value=n),r}))}var dr=hr;function hr(){this._arr=[],this._keyIndices={}}hr.prototype.size=function(){return this._arr.length},hr.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},hr.prototype.has=function(t){return er.has(this._keyIndices,t)},hr.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},hr.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},hr.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!er.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1},hr.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},hr.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},hr.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},hr.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},hr.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e};var pr=function(t,e,n,r){return function(t,e,n,r){var i,o,a={},s=new dr,u=function(t){var e=t.v!==i?t.v:t.w,r=a[e],u=n(t),c=o.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+u);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(e,c))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},s.add(t,n)}));s.size()>0&&(i=s.removeMin(),(o=a[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(u);return a}(t,String(e),n||gr,r||function(e){return t.outEdges(e)})},gr=er.constant(1),vr=function(t){var e=0,n=[],r={},i=[];function o(a){var s=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){er.has(r,t)?r[t].onStack&&(s.lowlink=Math.min(s.lowlink,r[t].index)):(o(t),s.lowlink=Math.min(s.lowlink,r[t].lowlink))})),s.lowlink===s.index){var u,c=[];do{u=n.pop(),r[u].onStack=!1,c.push(u)}while(a!==u);i.push(c)}}return t.nodes().forEach((function(t){er.has(r,t)||o(t)})),i},mr=er.constant(1),yr=br;function br(t){var e={},n={},r=[];if(er.each(t.sinks(),(function i(o){if(er.has(n,o))throw new xr;er.has(e,o)||(n[o]=!0,e[o]=!0,er.each(t.predecessors(o),i),delete n[o],r.push(o))})),er.size(e)!==t.nodeCount())throw new xr;return r}function xr(){}br.CycleException=xr,xr.prototype=new Error;var wr=function(t,e,n){er.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],o={};return er.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);_r(t,e,"post"===n,o,r,i)})),i};function _r(t,e,n,r,i,o){er.has(r,e)||(r[e]=!0,n||o.push(e),er.each(i(e),(function(e){_r(t,e,n,r,i,o)})),n&&o.push(e))}var Er,Sr={Graph:ur.Graph,json:cr,alg:{components:function(t){var e,n={},r=[];function i(r){er.has(n,r)||(n[r]=!0,e.push(r),er.each(t.successors(r),i),er.each(t.predecessors(r),i))}return er.each(t.nodes(),(function(t){e=[],i(t),e.length&&r.push(e)})),r},dijkstra:pr,dijkstraAll:function(t,e,n){return er.transform(t.nodes(),(function(r,i){r[i]=pr(t,i,e,n)}),{})},findCycles:function(t){return er.filter(vr(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))},floydWarshall:function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)}))}))})),r}(t,e||mr,n||function(e){return t.outEdges(e)})},isAcyclic:function(t){try{yr(t)}catch(t){if(t instanceof yr.CycleException)return!1;throw t}return!0},postorder:function(t,e){return wr(t,e,"post")},preorder:function(t,e){return wr(t,e,"pre")},prim:function(t,e){var n,r=new nr,i={},o=new dr;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var s=e(t);s<a&&(i[r]=n,o.decrease(r,s))}}if(0===t.nodeCount())return r;er.each(t.nodes(),(function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);for(var s=!1;o.size()>0;){if(n=o.removeMin(),er.has(i,n))r.setEdge(n,i[n]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(n).forEach(a)}return r},tarjan:vr,topsort:yr},version:ur.version};try{Er=Sr}catch(r){}Er||(Er=window.graphlib);var Cr,kr=Er,Mr=function(t,e,n){if(!N(n))return!1;var r=typeof e;return!!("number"==r?It(n)&&mt(e,n.length):"string"==r&&e in n)&&p(n[e],t)},Or=Object.prototype,Tr=Or.hasOwnProperty,Ar=Yn((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Mr(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=Lt(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(void 0===l||p(l,Or[c])&&!Tr.call(t,c))&&(t[c]=o[c])}return t})),Nr=/^\s+|\s+$/g,Ir=/^[-+]0x[0-9a-f]+$/i,Pr=/^0b[01]+$/i,Dr=/^0o[0-7]+$/i,Lr=parseInt,Rr=function(t){return t?1/0===(t=function(t){if("number"==typeof t)return t;if(He(t))return NaN;if(N(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=N(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Nr,"");var n=Pr.test(t);return n||Dr.test(t)?Lr(t.slice(2),n?2:8):Ir.test(t)?NaN:+t}(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},jr=Math.max,Br=function(t,e,n){var r=Object(t);if(!It(t)){var i=gn(e);t=Pt(t),e=function(t){return i(r[t],t,r)}}var o=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:function(t){var e=Rr(t),n=e%1;return e==e?n?e-n:e:0}(n);return i<0&&(i=jr(r+i,0)),Xn(t,gn(e),i)}(t,e,n);return o>-1?r[i?t[o]:o]:void 0},Fr=function(t){return null!=t&&t.length?zn(t,1):[]},zr=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!He(a):n(a,s)))var s=a,u=o}return u},$r=function(t,e){return t>e},Gr=function(t,e,n){(void 0!==n&&!p(t[e],n)||void 0===n&&!(e in t))&&rt(t,e,n)},Vr=Function.prototype,Ur=Object.prototype,Wr=Vr.toString,Hr=Ur.hasOwnProperty,Yr=Wr.call(Object),Xr=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},qr=function t(e,n,r,i,o){e!==n&&Ee(n,(function(a,s){if(o||(o=new tt),N(a))!function(t,e,n,r,i,o,a){var s=Xr(t,n),u=Xr(e,n),c=a.get(u);if(c)Gr(t,n,c);else{var l=o?o(s,u,n+"",t,e,a):void 0,f=void 0===l;if(f){var d=ht(u),h=!d&&gt(u),p=!d&&!h&&Et(u);l=u,d||h||p?ht(s)?l=s:Jn(s)?l=jt(s):h?(f=!1,l=Rt(u,!0)):p?(f=!1,l=de(u,!0)):l=[]:function(t){if(!st(t)||"[object Object]"!=A(t))return!1;var e=Ut(t);if(null===e)return!0;var n=Hr.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Wr.call(n)==Yr}(u)||dt(u)?(l=s,dt(s)?l=function(t){return at(t,Lt(t))}(s):N(s)&&!I(s)||(l=ge(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),Gr(t,n,l)}}(e,n,s,r,t,i,o);else{var u=i?i(Xr(e,s),a,s+"",e,n,o):void 0;void 0===u&&(u=a),Gr(e,s,u)}}),Lt)},Zr=function(t){return Yn((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&Mr(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r)}return e}))}((function(t,e,n){qr(t,e,n)})),Kr=function(t,e){return t<e},Jr=function(t,e,n,r){if(!N(t))return t;for(var i=-1,o=(e=un(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=cn(e[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=N(l)?l:mt(e[i+1])?[]:{})}ot(s,u,c),s=s[u]}return t},Qr=function(t){return Hn(Vn(t,void 0,Fr),t+"")}((function(t,e){return null==t?{}:function(t,e){return function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=ln(t,a);n(0,a)&&Jr(o,un(a,t),s)}return o}(t,e,(function(e,n){return hn(t,n)}))}(t,e)})),ti=Math.ceil,ei=Math.max,ni=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=He(t),a=void 0!==e,s=null===e,u=e==e,c=He(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0},ri=Yn((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Mr(t,e[0],e[1])?e=[]:n>2&&Mr(e[0],e[1],e[2])&&(e=[e[0]]),function(t,e,n){e=e.length?nn(e,(function(t){return ht(t)?function(e){return ln(e,1===t.length?t[0]:t)}:t})):[ke];var r=-1;e=nn(e,xt(gn));var i=_n(t,(function(t,n,i){return{criteria:nn(e,(function(e){return e(t)})),index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=ni(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}(t,zn(e,1),[])})),ii=0;try{Cr={cloneDeep:function(t){return we(t,5)},constant:_e,defaults:Ar,each:Te,filter:vn,find:Br,flatten:Fr,forEach:Oe,forIn:function(t,e){return null==t?t:Ee(t,Me(e),Lt)},has:bn,isUndefined:wn,last:function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},map:En,mapValues:function(t,e){var n={};return e=gn(e),Se(t,(function(t,r,i){rt(n,r,e(t,r,i))})),n},max:function(t){return t&&t.length?zr(t,ke,$r):void 0},merge:Zr,min:function(t){return t&&t.length?zr(t,ke,Kr):void 0},minBy:function(t,e){return t&&t.length?zr(t,gn(e),Kr):void 0},now:function(){return _.Date.now()},pick:Qr,range:function(t,e,n){return n&&"number"!=typeof n&&Mr(t,e,n)&&(e=n=void 0),t=Rr(t),void 0===e?(e=t,t=0):e=Rr(e),function(t,e,n,r){for(var i=-1,o=ei(ti((e-t)/(n||1)),0),a=Array(o);o--;)a[++i]=t,t+=n;return a}(t,e,n=void 0===n?t<e?1:-1:Rr(n))},reduce:kn,sortBy:ri,uniqueId:function(t){var e=++ii;return sn(t)+e},values:tr,zipObject:function(t,e){return function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}(t||[],e||[],ot)}}}catch(r){}Cr||(Cr=window._);var oi=Cr,ai=si;function si(){var t={};t._next=t._prev=t,this._sentinel=t}function ui(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function ci(t,e){if("_next"!==t&&"_prev"!==t)return e}si.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return ui(e),e},si.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&ui(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},si.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,ci)),n=n._prev;return"["+t.join(", ")+"]"};var li=kr.Graph,fi=oi.constant(1);function di(t,e,n,r,i){var o=i?[]:void 0;return oi.forEach(t.inEdges(r.v),(function(r){var a=t.edge(r),s=t.node(r.v);i&&o.push({v:r.v,w:r.w}),s.out-=a,hi(e,n,s)})),oi.forEach(t.outEdges(r.v),(function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,hi(e,n,a)})),t.removeNode(r.v),o}function hi(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var pi=kr.Graph,gi={addDummyNode:vi,simplify:function(t){var e=(new pi).setGraph(t.graph());return oi.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),oi.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new pi({multigraph:t.isMultigraph()}).setGraph(t.graph());return oi.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),oi.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=oi.map(t.nodes(),(function(e){var n={};return oi.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return oi.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=oi.map(t.nodes(),(function(e){var n={};return oi.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return oi.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=t.width/2,c=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a),{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=oi.map(oi.range(mi(t)+1),(function(){return[]}));return oi.forEach(t.nodes(),(function(n){var r=t.node(n),i=r.rank;oi.isUndefined(i)||(e[i][r.order]=n)})),e},normalizeRanks:function(t){var e=oi.min(oi.map(t.nodes(),(function(e){return t.node(e).rank})));oi.forEach(t.nodes(),(function(n){var r=t.node(n);oi.has(r,"rank")&&(r.rank-=e)}))},removeEmptyRanks:function(t){var e=oi.min(oi.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];oi.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var r=0,i=t.graph().nodeRankFactor;oi.forEach(n,(function(e,n){oi.isUndefined(e)&&n%i!=0?--r:r&&oi.forEach(e,(function(e){t.node(e).rank+=r}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),vi(t,"border",i,e)},maxRank:mi,partition:function(t,e){var n={lhs:[],rhs:[]};return oi.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=oi.now();try{return e()}finally{console.log(t+" time: "+(oi.now()-n)+"ms")}},notime:function(t,e){return e()}};function vi(t,e,n,r){var i;do{i=oi.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function mi(t){return oi.max(oi.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!oi.isUndefined(n))return n})))}var yi=function(t){var e={};oi.forEach(t.sources(),(function n(r){var i=t.node(r);if(oi.has(e,r))return i.rank;e[r]=!0;var o=oi.min(oi.map(t.outEdges(r),(function(e){return n(e.w)-t.edge(e).minlen})));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),i.rank=o}))},bi=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen},xi=kr.Graph,wi=bi,_i=function(t){var e,n,r=new xi({directed:!1}),i=t.nodes()[0],o=t.nodeCount();for(r.setNode(i,{});Ei(r,t)<o;)e=Si(r,t),n=r.hasNode(e.v)?wi(t,e):-wi(t,e),Ci(r,t,n);return r};function Ei(t,e){return oi.forEach(t.nodes(),(function n(r){oi.forEach(e.nodeEdges(r),(function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||wi(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))}))})),t.nodeCount()}function Si(t,e){return oi.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return wi(e,n)}))}function Ci(t,e,n){oi.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}var ki=bi,Mi=yi,Oi=kr.alg.preorder,Ti=kr.alg.postorder,Ai=gi.simplify,Ni=Ii;function Ii(t){t=Ai(t),Mi(t);var e,n=_i(t);for(Li(n),Pi(n,t);e=ji(n);)Fi(n,t,e,Bi(n,t,e))}function Pi(t,e){var n=Ti(t,t.nodes());n=n.slice(0,n.length-1),oi.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=Di(t,e,n)}(t,e,n)}))}function Di(t,e,n){var r=t.node(n).parent,i=!0,o=e.edge(n,r),a=0;return o||(i=!1,o=e.edge(r,n)),a=o.weight,oi.forEach(e.nodeEdges(n),(function(o){var s,u,c=o.v===n,l=c?o.w:o.v;if(l!==r){var f=c===i,d=e.edge(o).weight;if(a+=f?d:-d,s=n,u=l,t.hasEdge(s,u)){var h=t.edge(n,l).cutvalue;a+=f?-h:h}}})),a}function Li(t,e){arguments.length<2&&(e=t.nodes()[0]),Ri(t,{},1,e)}function Ri(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,oi.forEach(t.neighbors(r),(function(i){oi.has(e,i)||(n=Ri(t,e,n,i,r))})),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function ji(t){return oi.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function Bi(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var c=oi.filter(e.edges(),(function(e){return u===zi(0,t.node(e.v),s)&&u!==zi(0,t.node(e.w),s)}));return oi.minBy(c,(function(t){return ki(e,t)}))}function Fi(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),Li(t),Pi(t,e),function(t,e){var n=oi.find(t.nodes(),(function(t){return!e.node(t).parent})),r=Oi(t,n);r=r.slice(1),oi.forEach(r,(function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}(t,e)}function zi(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}Ii.initLowLimValues=Li,Ii.initCutValues=Pi,Ii.calcCutValue=Di,Ii.leaveEdge=ji,Ii.enterEdge=Bi,Ii.exchangeEdges=Fi;var $i=yi,Gi=$i;var Vi=function(t){var e=gi.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&oi.forEach(o,(function(t){n(t,i+1)})),e[r]=i}return oi.forEach(t.children(),(function(t){n(t,1)})),e}(t),r=oi.max(oi.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,oi.forEach(t.edges(),(function(e){t.edge(e).minlen*=i}));var o=function(t){return oi.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;oi.forEach(t.children(),(function(a){Ui(t,e,i,o,r,n,a)})),t.graph().nodeRankFactor=i};function Ui(t,e,n,r,i,o,a){var s=t.children(a);if(s.length){var u=gi.addBorderNode(t,"_bt"),c=gi.addBorderNode(t,"_bb"),l=t.node(a);t.setParent(u,a),l.borderTop=u,t.setParent(c,a),l.borderBottom=c,oi.forEach(s,(function(s){Ui(t,e,n,r,i,o,s);var l=t.node(s),f=l.borderTop?l.borderTop:s,d=l.borderBottom?l.borderBottom:s,h=l.borderTop?r:2*r,p=f!==d?1:i-o[a]+1;t.setEdge(u,f,{weight:h,minlen:p,nestingEdge:!0}),t.setEdge(d,c,{weight:h,minlen:p,nestingEdge:!0})})),t.parent(a)||t.setEdge(e,u,{weight:0,minlen:i+o[a]})}else a!==e&&t.setEdge(e,a,{weight:0,minlen:n})}function Wi(t,e,n,r,i,o){var a={width:0,height:0,rank:o,borderType:e},s=i[e][o-1],u=gi.addDummyNode(t,"border",a,n);i[e][o]=u,t.setParent(u,r),s&&t.setEdge(s,u,{weight:1})}function Hi(t){oi.forEach(t.nodes(),(function(e){Yi(t.node(e))})),oi.forEach(t.edges(),(function(e){Yi(t.edge(e))}))}function Yi(t){var e=t.width;t.width=t.height,t.height=e}function Xi(t){t.y=-t.y}function qi(t){var e=t.x;t.x=t.y,t.y=e}var Zi=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=Ki(t,e[r-1],e[r]);return n};function Ki(t,e,n){for(var r=oi.zipObject(n,oi.map(n,(function(t,e){return e}))),i=oi.flatten(oi.map(e,(function(e){return oi.sortBy(oi.map(t.outEdges(e),(function(e){return{pos:r[e.w],weight:t.edge(e).weight}})),"pos")})),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=oi.map(new Array(a),(function(){return 0})),u=0;return oi.forEach(i.forEach((function(t){var e=t.pos+o;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;u+=t.weight*n}))),u}function Ji(t,e,n){for(var r;e.length&&(r=oi.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}var Qi=function t(e,n,r,i){var o=e.children(n),a=e.node(n),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,c={};s&&(o=oi.filter(o,(function(t){return t!==s&&t!==u})));var l=function(t,e){return oi.map(e,(function(e){var n=t.inEdges(e);if(n.length){var r=oi.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}}))}(e,o);oi.forEach(l,(function(n){if(e.children(n.v).length){var o=t(e,n.v,r,i);c[n.v]=o,oi.has(o,"barycenter")&&(a=n,s=o,oi.isUndefined(a.barycenter)?(a.barycenter=s.barycenter,a.weight=s.weight):(a.barycenter=(a.barycenter*a.weight+s.barycenter*s.weight)/(a.weight+s.weight),a.weight+=s.weight))}var a,s}));var f=function(t,e){var n={};return oi.forEach(t,(function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};oi.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)})),oi.forEach(e.edges(),(function(t){var e=n[t.v],r=n[t.w];oi.isUndefined(e)||oi.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(oi.isUndefined(e.barycenter)||oi.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),oi.forEach(i.in.reverse(),n(i)),oi.forEach(i.out,r(i))}return oi.map(oi.filter(e,(function(t){return!t.merged})),(function(t){return oi.pick(t,["vs","i","barycenter","weight"])}))}(oi.filter(n,(function(t){return!t.indegree})))}(l,r);!function(t,e){oi.forEach(t,(function(t){t.vs=oi.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(f,c);var d=function(t,e){var n,r=gi.partition(t,(function(t){return oi.has(t,"barycenter")})),i=r.lhs,o=oi.sortBy(r.rhs,(function(t){return-t.i})),a=[],s=0,u=0,c=0;i.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),c=Ji(a,o,c),oi.forEach(i,(function(t){c+=t.vs.length,a.push(t.vs),s+=t.barycenter*t.weight,u+=t.weight,c=Ji(a,o,c)}));var l={vs:oi.flatten(a,!0)};return u&&(l.barycenter=s/u,l.weight=u),l}(f,i);if(s&&(d.vs=oi.flatten([s,d.vs,u],!0),e.predecessors(s).length)){var h=e.node(e.predecessors(s)[0]),p=e.node(e.predecessors(u)[0]);oi.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+p.order)/(d.weight+2),d.weight+=2}return d},to=kr.Graph,eo=function(t,e,n){var r=function(t){for(var e;t.hasNode(e=oi.uniqueId("_root")););return e}(t),i=new to({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(e){return t.node(e)}));return oi.forEach(t.nodes(),(function(o){var a=t.node(o),s=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),oi.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,r=i.edge(n,o),a=oi.isUndefined(r)?0:r.weight;i.setEdge(n,o,{weight:t.edge(e).weight+a})})),oi.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))})),i},no=function(t,e,n){var r,i={};oi.forEach(n,(function(n){for(var o,a,s=t.parent(n);s;){if((o=t.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}}))},ro=kr.Graph;function io(t,e,n){return oi.map(e,(function(e){return eo(t,e,n)}))}function oo(t,e){var n=new ro;oi.forEach(t,(function(t){var r=t.graph().root,i=Qi(t,r,n,e);oi.forEach(i.vs,(function(e,n){t.node(e).order=n})),no(t,n,i.vs)}))}function ao(t,e){oi.forEach(e,(function(e){oi.forEach(e,(function(e,n){t.node(e).order=n}))}))}var so=kr.Graph;function uo(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function co(t,e,n){if(e>n){var r=e;e=n,n=r}return oi.has(t[e],n)}var lo=gi.normalizeRanks,fo=gi.removeEmptyRanks,ho=gi,po=kr.Graph,go=["nodesep","edgesep","ranksep","marginx","marginy"],vo={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},mo=["acyclicer","ranker","rankdir","align"],yo=["width","height"],bo={width:0,height:0},xo=["minlen","weight","width","height","labeloffset"],wo={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_o=["labelpos"];function Eo(t,e){return oi.mapValues(oi.pick(t,e),Number)}function So(t){var e={};return oi.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}var Co=kr.Graph,ko={graphlib:kr,layout:function(t,e){var n=e&&e.debugTiming?ho.time:ho.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new po({multigraph:!0,compound:!0}),n=So(t.graph());return e.setGraph(oi.merge({},vo,Eo(n,go),oi.pick(n,mo))),oi.forEach(t.nodes(),(function(n){var r=So(t.node(n));e.setNode(n,oi.defaults(Eo(r,yo),bo)),e.setParent(n,t.parent(n))})),oi.forEach(t.edges(),(function(n){var r=So(t.edge(n));e.setEdge(n,oi.merge({},wo,Eo(r,xo),oi.pick(r,_o)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,oi.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){oi.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){!function(t){var e="greedy"===t.graph().acyclicer?function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new li,r=0,i=0;oi.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),oi.forEach(t.edges(),(function(t){var o=n.edge(t.v,t.w)||0,a=e(t),s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)}));var o=oi.range(i+r+3).map((function(){return new ai})),a=r+1;return oi.forEach(n.nodes(),(function(t){hi(o,a,n.node(t))})),{graph:n,buckets:o,zeroIdx:a}}(t,e||fi),r=function(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)di(t,e,n,r);for(;r=o.dequeue();)di(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(di(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return oi.flatten(oi.map(r,(function(e){return t.outEdges(e.v,e.w)})),!0)}(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},r={};return oi.forEach(t.nodes(),(function i(o){oi.has(r,o)||(r[o]=!0,n[o]=!0,oi.forEach(t.outEdges(o),(function(t){oi.has(n,t.w)?e.push(t):i(t.w)})),delete n[o])})),e}(t);oi.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,oi.uniqueId("rev"))}))}(t)})),e("    nestingGraph.run",(function(){Vi(t)})),e("    rank",(function(){!function(t){switch(t.graph().ranker){case"network-simplex":default:!function(t){Ni(t)}(t);break;case"tight-tree":!function(t){$i(t),_i(t)}(t);break;case"longest-path":Gi(t)}}(ho.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){oi.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};ho.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){fo(t)})),e("    nestingGraph.cleanup",(function(){!function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,oi.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}(t)})),e("    normalizeRanks",(function(){lo(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;oi.forEach(t.nodes(),(function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=oi.max(e,r.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){oi.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){!function(t){t.graph().dummyChains=[],oi.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,o=e.v,a=t.node(o).rank,s=e.w,u=t.node(s).rank,c=e.name,l=t.edge(e),f=l.labelRank;if(u!==a+1){for(t.removeEdge(e),i=0,++a;a<u;++i,++a)l.points=[],r={width:0,height:0,edgeLabel:l,edgeObj:e,rank:a},n=gi.addDummyNode(t,"edge",r,"_d"),a===f&&(r.width=l.width,r.height=l.height,r.dummy="edge-label",r.labelpos=l.labelpos),t.setEdge(o,n,{weight:l.weight},c),0===i&&t.graph().dummyChains.push(n),o=n;t.setEdge(o,s,{weight:l.weight},c)}}(t,e)}))}(t)})),e("    parentDummyChains",(function(){!function(t){var e=function(t){var e={},n=0;return oi.forEach(t.children(),(function r(i){var o=n;oi.forEach(t.children(i),r),e[i]={low:o,lim:n++}})),e}(t);oi.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,s=o.lca,u=0,c=a[u],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(c=a[u])!==s&&t.node(c).maxRank<r.rank;)u++;c===s&&(l=!1)}if(!l){for(;u<a.length-1&&t.node(c=a[u+1]).minRank<=r.rank;)u++;c=a[u]}t.setParent(n,c),n=t.successors(n)[0]}}))}(t)})),e("    addBorderSegments",(function(){!function(t){oi.forEach(t.children(),(function e(n){var r=t.children(n),i=t.node(n);if(r.length&&oi.forEach(r,e),oi.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)Wi(t,"borderLeft","_bl",n,i,o),Wi(t,"borderRight","_br",n,i,o)}}))}(t)})),e("    order",(function(){!function(t){var e=gi.maxRank(t),n=io(t,oi.range(1,e+1),"inEdges"),r=io(t,oi.range(e-1,-1,-1),"outEdges"),i=function(t){var e={},n=oi.filter(t.nodes(),(function(e){return!t.children(e).length})),r=oi.max(oi.map(n,(function(e){return t.node(e).rank}))),i=oi.map(oi.range(r+1),(function(){return[]})),o=oi.sortBy(n,(function(e){return t.node(e).rank}));return oi.forEach(o,(function n(r){if(!oi.has(e,r)){e[r]=!0;var o=t.node(r);i[o.rank].push(r),oi.forEach(t.successors(r),n)}})),i}(t);ao(t,i);for(var o,a=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){oo(s%2?n:r,s%4>=2),i=gi.buildLayerMatrix(t);var c=Zi(t,i);c<a&&(u=0,o=oi.cloneDeep(i),a=c)}ao(t,o)}(t)})),e("    insertSelfEdges",(function(){!function(t){var e=ho.buildLayerMatrix(t);oi.forEach(e,(function(e){var n=0;oi.forEach(e,(function(e,r){var i=t.node(e);i.order=r+n,oi.forEach(i.selfEdges,(function(e){ho.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){!function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||Hi(t)}(t)})),e("    position",(function(){!function(t){(function(t){var e=gi.buildLayerMatrix(t),n=t.graph().ranksep,r=0;oi.forEach(e,(function(e){var i=oi.max(oi.map(e,(function(e){return t.node(e).height})));oi.forEach(e,(function(e){t.node(e).y=r+i/2})),r+=i+n}))})(t=gi.asNonCompoundGraph(t)),oi.forEach(function(t){var e,n=gi.buildLayerMatrix(t),r=oi.merge(function(t,e){var n={};return oi.reduce(e,(function(e,r){var i=0,o=0,a=e.length,s=oi.last(r);return oi.forEach(r,(function(e,u){var c=function(t,e){if(t.node(e).dummy)return oi.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),l=c?t.node(c).order:a;(c||e===s)&&(oi.forEach(r.slice(o,u+1),(function(e){oi.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||l<a)||o.dummy&&t.node(e).dummy||uo(n,r,e)}))})),o=u+1,i=l)})),r})),n}(t,n),function(t,e){var n={};function r(e,r,i,o,a){var s;oi.forEach(oi.range(r,i),(function(r){s=e[r],t.node(s).dummy&&oi.forEach(t.predecessors(s),(function(e){var r=t.node(e);r.dummy&&(r.order<o||r.order>a)&&uo(n,e,s)}))}))}return oi.reduce(e,(function(e,n){var i,o=-1,a=0;return oi.forEach(n,(function(s,u){if("border"===t.node(s).dummy){var c=t.predecessors(s);c.length&&(i=t.node(c[0]).order,r(n,a,u,o,i),a=u,o=i)}r(n,a,n.length,i,e.length)})),n})),n}(t,n)),i={};oi.forEach(["u","d"],(function(o){e="u"===o?n:oi.values(n).reverse(),oi.forEach(["l","r"],(function(n){"r"===n&&(e=oi.map(e,(function(t){return oi.values(t).reverse()})));var a=("u"===o?t.predecessors:t.successors).bind(t),s=function(t,e,n,r){var i={},o={},a={};return oi.forEach(e,(function(t){oi.forEach(t,(function(t,e){i[t]=t,o[t]=t,a[t]=e}))})),oi.forEach(e,(function(t){var e=-1;oi.forEach(t,(function(t){var s=r(t);if(s.length)for(var u=((s=oi.sortBy(s,(function(t){return a[t]}))).length-1)/2,c=Math.floor(u),l=Math.ceil(u);c<=l;++c){var f=s[c];o[t]===t&&e<a[f]&&!co(n,t,f)&&(o[f]=t,o[t]=i[t]=i[f],e=a[f])}}))})),{root:i,align:o}}(0,e,r,a),u=function(t,e,n,r,i){var o={},a=function(t,e,n,r){var i=new so,o=t.graph(),a=function(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),c=0;if(c+=s.width/2,oi.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(c+=n?a:-a),a=0,c+=(s.dummy?e:t)/2,c+=(u.dummy?e:t)/2,c+=u.width/2,oi.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(c+=n?a:-a),a=0,c}}(o.nodesep,o.edgesep,r);return oi.forEach(e,(function(e){var r;oi.forEach(e,(function(e){var o=n[e];if(i.setNode(o),r){var s=n[r],u=i.edge(s,o);i.setEdge(s,o,Math.max(a(t,e,r),u||0))}r=e}))})),i}(t,e,n,i),s=i?"borderLeft":"borderRight";function u(t,e){for(var n=a.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return u((function(t){o[t]=a.inEdges(t).reduce((function(t,e){return Math.max(t,o[e.v]+a.edge(e))}),0)}),a.predecessors.bind(a)),u((function(e){var n=a.outEdges(e).reduce((function(t,e){return Math.min(t,o[e.w]-a.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==s&&(o[e]=Math.max(o[e],n))}),a.successors.bind(a)),oi.forEach(r,(function(t){o[t]=o[n[t]]})),o}(t,e,s.root,s.align,"r"===n);"r"===n&&(u=oi.mapValues(u,(function(t){return-t}))),i[o+n]=u}))}));var o=function(t,e){return oi.minBy(oi.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return oi.forIn(e,(function(e,i){var o=function(t,e){return t.node(e).width}(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)})),n-r}))}(t,i);return function(t,e){var n=oi.values(e),r=oi.min(n),i=oi.max(n);oi.forEach(["u","d"],(function(n){oi.forEach(["l","r"],(function(o){var a,s=n+o,u=t[s];if(u!==e){var c=oi.values(u);(a="l"===o?r-oi.min(c):i-oi.max(c))&&(t[s]=oi.mapValues(u,(function(t){return t+a})))}}))}))}(i,o),function(t,e){return oi.mapValues(t.ul,(function(n,r){if(e)return t[e.toLowerCase()][r];var i=oi.sortBy(oi.map(t,r));return(i[1]+i[2])/2}))}(i,t.graph().align)}(t),(function(e,n){t.node(n).x=e}))}(t)})),e("    positionSelfEdges",(function(){!function(t){oi.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){oi.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(oi.last(n.borderLeft)),a=t.node(oi.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}})),oi.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){!function(t){oi.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){oi.forEach(t.edges(),(function(e){var n=t.edge(e);if(oi.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){!function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){oi.forEach(t.nodes(),(function(e){Xi(t.node(e))})),oi.forEach(t.edges(),(function(e){var n=t.edge(e);oi.forEach(n.points,Xi),oi.has(n,"y")&&Xi(n)}))}(t),"lr"!==e&&"rl"!==e||(function(t){oi.forEach(t.nodes(),(function(e){qi(t.node(e))})),oi.forEach(t.edges(),(function(e){var n=t.edge(e);oi.forEach(n.points,qi),oi.has(n,"x")&&qi(n)}))}(t),Hi(t))}(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0;function u(t){var o=t.x,a=t.y,s=t.width,u=t.height;e=Math.min(e,o-s/2),n=Math.max(n,o+s/2),r=Math.min(r,a-u/2),i=Math.max(i,a+u/2)}oi.forEach(t.nodes(),(function(e){u(t.node(e))})),oi.forEach(t.edges(),(function(e){var n=t.edge(e);oi.has(n,"x")&&u(n)})),e-=a,r-=s,oi.forEach(t.nodes(),(function(n){var i=t.node(n);i.x-=e,i.y-=r})),oi.forEach(t.edges(),(function(n){var i=t.edge(n);oi.forEach(i.points,(function(t){t.x-=e,t.y-=r})),oi.has(i,"x")&&(i.x-=e),oi.has(i,"y")&&(i.y-=r)})),o.width=n-e+a,o.height=i-r+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){oi.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(ho.intersectRect(o,n)),i.points.push(ho.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){oi.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){!function(t){oi.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){oi.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),oi.forEach(t.edges(),(function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,oi.has(i,"x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))},debug:{debugOrdering:function(t){var e=gi.buildLayerMatrix(t),n=new Co({compound:!0,multigraph:!0}).setGraph({});return oi.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),oi.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),oi.forEach(e,(function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),oi.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}},util:{time:gi.time,notime:gi.notime},version:"0.8.5"},Mo=ko.graphlib,Oo=ko.layout;class To{constructor(t){this.cardinality=1,this.include=c.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=u.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}}class Ao{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}class No{constructor(t,e={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=c.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=u.META,this.path=[],this.name=t,this.metaGraph=Lo(t,l.META,e)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map((t=>this.metaGraph.node(t)))}leaves(){let t,e=[],n=[this];for(;n.length;){let r=n.shift();r.isGroupNode?(t=r.metaGraph,t.nodes().forEach((e=>n.push(t.node(e))))):e.push(r.name)}return e}}class Io{constructor(t,e){this.v=t,this.w=e,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(t,e){this.baseEdgeList.push(t)}}function Po(t,e={}){return new No(t,e)}function Do(t,e){return new Io(t,e)}function Lo(t,e,n){const r=n||{},i=new Mo.Graph(r);return i.setGraph({name:t,rankdir:r.rankdir,type:e,align:r.align}),i}class Ro{constructor(t={}){this.graphOptions=t,this.index={},this.graphOptions.compound=!0,this.root=Po(a,this.graphOptions),this.index[a]=this.root}getNodeMap(){return this.index}node(t){return this.index[t]}setNode(t,e){this.index[t]=e}getBridgeGraph(t){const e=this.index[t];if(!e)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in e))return null;const n=e;if(n.bridgeGraph)return n.bridgeGraph;const r=Lo(s,l.BRIDGE,this.graphOptions);if(n.bridgeGraph=r,!e.parentNode||!("metaGraph"in e.parentNode))return r;const i=e.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach((e=>{e.edges().filter((e=>e.v===t||e.w===t)).forEach((n=>{const i=n.w===t;e.edge(n).baseEdgeList.forEach((e=>{const[o,a]=i?[e.w,n.v]:[e.v,n.w],s=this.getChildName(t,o),u={v:i?a:s,w:i?s:a};let c=r.edge(u);c||(c=Do(u.v,u.w),c.inbound=i,r.setEdge(u.v,u.w,c)),c.addBaseEdge(e,this)}))}))})),r}getChildName(t,e){let n=this.index[e];for(;n;){if(n.parentNode&&n.parentNode.name===t)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+e)}getPredecessors(t){const e=this.index[t];if(!e)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(e,!0)}getSuccessors(t){const e=this.index[t];if(!e)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(e,!1)}getOneWayEdges(t,e){const n=[];if(!t.parentNode||!t.parentNode.isGroupNode)return n;const r=t.parentNode,i=r.metaGraph,o=this.getBridgeGraph(r.name);return jo(i,t,e,n),jo(o,t,e,n),n}}function jo(t,e,n,r){(n?t.inEdges(e.name):t.outEdges(e.name)).forEach((e=>{const n=t.edge(e);r.push(n)}))}class Bo{constructor(t){this.hierarchy=t,this.index={},this.hasSubHierarchy={},this.root=new $o(this.hierarchy.root,this.hierarchy.graphOptions),this.index[t.root.name]=this.root,this.buildSubHierarchy(t.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(t){if(t in this.hasSubHierarchy)return;this.hasSubHierarchy[t]=!0;const e=this.index[t];if(e.node.type!==u.META)return;const n=e,r=n.node.metaGraph,i=n.coreGraph;r.nodes().forEach((t=>{const e=this.getOrCreateRenderNodeByName(t);i.setNode(t,e)})),r.edges().forEach((t=>{const e=r.edge(t),n=new zo(e);i.setEdge(t.v,t.w,n)}));const o=n.node.parentNode;if(!o)return;const a=this.getRenderNodeByName(o.name),s=(t,...e)=>e.concat([t?"IN":"OUT"]).join("~~"),l=this.hierarchy.getBridgeGraph(t);l.edges().forEach((e=>{const n=l.edge(e),f=!!r.node(e.w),[d,h]=f?[e.w,e.v]:[e.v,e.w],p=e=>{const n=f?{v:e,w:t}:{v:t,w:e};return a.coreGraph.edge(n)};let g=p(h);g||(g=p(s(f,h,o.name)));const v=s(f,t),m=s(f,h,t);let y=i.node(m);if(!y){let t=i.node(v);if(!t){const e={name:v,type:u.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:c.UNSPECIFIED,inbound:f,attr:{}};t=new Fo(e),this.index[v]=t,i.setNode(v,t)}const e={name:m,type:u.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:c.UNSPECIFIED,inbound:f,attr:{}};y=new Fo(e),this.index[m]=y,i.setNode(m,y),i.setParent(m,v),t.node.cardinality++}const b=new zo(n);b.adjoiningMetaEdge=g,f?i.setEdge(m,d,b):i.setEdge(d,m,b)}))}getOrCreateRenderNodeByName(t){if(!t)return null;if(t in this.index)return this.index[t];const e=this.getNodeByName(t);return e?(this.index[t]=e.isGroupNode?new $o(e,this.hierarchy.graphOptions):new Fo(e),this.index[t]):null}getRenderNodeByName(t){return this.index[t]}getNodeByName(t){return this.hierarchy.node(t)}}class Fo{constructor(t){this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}}class zo{constructor(t){this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class $o extends Fo{constructor(t,e){super(t);const n=t.metaGraph.graph();e.compound=!0,this.coreGraph=Lo(n.name,l.CORE,e)}}function Go(t,e){t.node.isGroupNode&&function(t,e){const n=i(e);t.coreGraph.nodes().map((e=>t.coreGraph.node(e))).forEach((t=>{var r,i,o,a,s,c;const{height:l,width:f}=t;switch(t.node.type){case u.NODE:Object.assign(t,n.nodeSize.node),t.height=l||n.nodeSize.node.height,t.width=f||n.nodeSize.node.width;break;case u.BRIDGE:Object.assign(t,n.nodeSize.bridge);break;case u.META:t.expanded?Go(t,e):(Object.assign(t,n.nodeSize.meta),t.height=n.nodeSize.meta.height,t.width=n.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+t.node.type)}if(!t.expanded){const n=t.attr;!function(t,e=!1){if(t.coreBox.width=t.width,t.coreBox.height=t.height,!e){const e=`${t.displayName}`.length,n=3;t.width=Math.max(t.coreBox.width,e*n)}}(t,e&&(0===t.node.type&&!!(null===(i=null===(r=null==e?void 0:e.nodeSize)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.width)||1===t.node.type&&(!!(null===(a=null===(o=null==e?void 0:e.nodeSize)||void 0===o?void 0:o.node)||void 0===a?void 0:a.width)||!!n.width)||2===t.node.type&&!!(null===(c=null===(s=null==e?void 0:e.nodeSize)||void 0===s?void 0:s.bridge)||void 0===c?void 0:c.width)))}}))}(t,e),t.node.type===u.META&&function(t,e){const n=i(e),r=n.subScene.meta;Object.assign(t,r);const{nodeSep:o,rankSep:a,edgeSep:s,align:c}=n.graph.meta,l={nodesep:o,ranksep:a,edgesep:s,align:c};Object.assign(t.coreBox,function(t,e){const{ranksep:n,nodesep:r,edgesep:i,align:o}=e;Object.assign(t.graph(),{ranksep:n,nodesep:r,edgesep:i,align:o});const a=[];if(t.nodes().forEach((e=>{t.node(e).node.type!==u.BRIDGE&&a.push(e)})),!a.length)return{width:0,height:0};Oo(t);let s=1/0,c=1/0,l=-1/0,f=-1/0;return a.forEach((e=>{const n=t.node(e),r=.5*n.width,i=n.x-r,o=n.x+r;s=i<s?i:s,l=o>l?o:l;const a=.5*n.height,u=n.y-a,d=n.y+a;c=u<c?u:c,f=d>f?d:f})),t.edges().forEach((e=>{const n=t.edge(e),r=t.node(n.metaEdge.v),i=t.node(n.metaEdge.w);if(3===n.points.length&&function(t){let e=Vo(t[0],t[1]);for(let n=1;n<t.length-1;n++){const r=Vo(t[n],t[n+1]);if(Math.abs(r-e)>1)return!1;e=r}return!0}(n.points)){if(null!=r){const t=r.expanded?r.x:Uo(r);n.points[0].x=t}if(null!=i){const t=i.expanded?i.x:Uo(i);n.points[2].x=t}n.points=[n.points[0],n.points[1]]}const o=n.points[n.points.length-2];null!=i&&(n.points[n.points.length-1]=Wo(o,i));const a=n.points[1];null!=r&&(n.points[0]=Wo(a,r)),n.points.forEach((t=>{s=t.x<s?t.x:s,l=t.x>l?t.x:l,c=t.y<c?t.y:c,f=t.y>f?t.y:f}))})),t.nodes().forEach((e=>{const n=t.node(e);n.x-=s,n.y-=c})),t.edges().forEach((e=>{t.edge(e).points.forEach((t=>{t.x-=s,t.y-=c}))})),{width:l-s,height:f-c}}(t.coreGraph,l));let f=0;t.coreGraph.nodeCount()>0&&f++;const d=f<=1?0:f;t.coreBox.width+=d+d,t.coreBox.height=r.labelHeight+t.coreBox.height,t.width=t.coreBox.width+r.paddingLeft+r.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}(t,e)}function Vo(t,e){const n=e.x-t.x,r=e.y-t.y;return 180*Math.atan(r/n)/Math.PI}function Uo(t){return t.expanded?t.x:t.x-t.width/2+0+t.coreBox.width/2}function Wo(t,e){const n=e.expanded?e.x:Uo(e),r=e.y,i=t.x-n,o=t.y-r;let a,s,u=e.expanded?e.width:e.coreBox.width,c=e.expanded?e.height:e.coreBox.height;return Math.abs(o)*u/2>Math.abs(i)*c/2?(o<0&&(c=-c),a=0===o?0:c/2*i/o,s=c/2):(i<0&&(u=-u),a=u/2,s=0===i?0:u/2*o/i),{x:n+a,y:r+s}}function Ho(t,e,n){var i,o,a,s;const u=t.nodes.filter(((t,e,n)=>n.findIndex((e=>e.id===t.id))!==e)).map((t=>t.id));if(u.length)throw new Error(`Duplicated ids found: ${u.join(", ")}`);const c=function(t){const e={nodes:[]},n=t.compound,r=Object.keys(n||{}),i=new Map,o=(t,e=[])=>{if(i.has(t))return i.get(t);for(let i=0;i<r.length;i++){let a=r[i];if(n&&-1!==n[a].indexOf(t))return e.unshift(a),o(a,e)}return 0===e.length&&i.set(t,e),e},a=e=>t.edges.filter((t=>t.w===e)).map((t=>({name:t.v})));return t.nodes.forEach((t=>{const n=t.id,r=[...o(n),n];let i=a(n);e.nodes.push({name:n,path:r,inputs:i,width:t.width,height:t.height,attr:Object.assign({},t)})})),e}(t),l=function(t,e){const n=(t,e)=>{for(let n of e.values())if(n.includes(t))return!0;return!1},r=(t,e=[])=>{if(0===Object.keys(t).length)return[...new Set(e)];const i=new Map(Object.keys(t).map((e=>[e,t[e]]))),o={};for(let[t,r]of i)n(t,i)?o[t]=r:e=e.concat(t,r);return r(o,e)};return r(t).filter((t=>e.includes(t)))}(t.compound||{},(null==e?void 0:e.expanded)||[]),f=function(t,e){return function(t){return new Bo(t)}(function(t,e){const{rankDirection:n,align:r}=e,i=new Ro({rankdir:n,align:r});return function(t,e){Object.keys(e.nodes).forEach((n=>{const r=e.nodes[n],i=r.path;let o=t.root;o.depth=Math.max(i.length,o.depth);for(let e=0;e<i.length&&(o.depth=Math.max(o.depth,i.length-e),o.cardinality+=r.cardinality,e!==i.length-1);e++){const n=i[e];let a=t.node(n);a||(a=Po(n,t.graphOptions),a.path=r.path.slice(0,e+1),a.parentNode=o,t.setNode(n,a),o.metaGraph.setNode(n,a)),o=a}t.setNode(r.name,r),r.parentNode=o,o.metaGraph.setNode(r.name,r)}))}(i,t),function(t,e){const n=t.getNodeMap();let r=[],i=[];const o=(t,e)=>{let n=0;for(;t;)e[n++]=t.name,t=t.parentNode;return n-1};e.edges.forEach((a=>{r=[],i=[];let s=o(e.nodes[a.v],r),u=o(e.nodes[a.w],i);for(;r[s]===i[u];)if(s--,u--,s<0||u<0)throw Error("No difference found between ancestor paths.");const c=n[r[s+1]],l=r[s],f=i[u];let d=c.metaGraph.edge(l,f);d||(d=Do(l,f),c.metaGraph.setEdge(l,f,d)),d.addBaseEdge(a,t)}))}(i,t),i}(function(t){const e=new Ao;return t.nodes.map((t=>new To(t))).forEach((t=>{e.nodes[t.name]=t,t.inputs.forEach((n=>{!function(t,e,n){n.name!==e.name&&t.edges.push(Object.assign(Object.assign({},n.attr),{v:n.name,w:e.name}))}(e,t,n)}))})),e}(t),e))}(c,{rankDirection:(null===(o=null===(i=null==n?void 0:n.graph)||void 0===i?void 0:i.meta)||void 0===o?void 0:o.rankDir)||(null==e?void 0:e.rankDirection)||r.graph.meta.rankDir,align:(null===(s=null===(a=null==n?void 0:n.graph)||void 0===a?void 0:a.meta)||void 0===s?void 0:s.align)||r.graph.meta.align});return function(t,e){e.forEach((e=>{const n=t.getRenderInfoNodes().find((t=>t.displayName===e));let r=n&&n.node&&n.node.name||"";const i=t.getRenderNodeByName(r);if(!i)throw new Error(`No nodes found: ${r}`);i.expanded=!0,t.buildSubHierarchy(r)}))}(f,l),Go(f.root,n),qo(f.root)}function Yo(t,e=!1){const n=JSON.parse(JSON.stringify(t)),r={nodes:[n],edges:[...n.edges]};return n.nodes.forEach((function t(e){(0===e.type||1===e.type)&&r.nodes.push(e),0===e.type&&(r.edges=r.edges.concat(e.edges)),Array.isArray(e.nodes)&&e.nodes.forEach(t)})),e&&r.nodes.forEach((t=>{const e=r.nodes.find((e=>e.id===t.parentNodeName));if(e){const n=e.x-e.width/2+e.paddingLeft,r=e.y-e.height/2+e.labelHeight+e.paddingTop;e.id!==a&&(t.x+=n,t.y+=r),0===t.type&&t.edges.forEach((e=>{e.points.forEach((e=>{e.x+=t.x-t.width/2+t.paddingLeft,e.y+=t.y-t.height/2+t.labelHeight+t.paddingTop}))}))}})),r}function Xo(t,e,n,r){var i,o;let s=[];const u=(null===(i=n.find((e=>e.id===t)))||void 0===i?void 0:i.path)||[],c=(null===(o=n.find((t=>t.id===e)))||void 0===o?void 0:o.path)||[],l=[a,...u].slice(0,u.length).reverse(),f=[a,...c].slice(0,c.length);return l.forEach((i=>{const o=n.find((t=>t.id===i));s=s.concat(o.edges.filter((n=>n.baseEdgeList.some((n=>n.v===((null==r?void 0:r.v)||t)&&n.w===((null==r?void 0:r.w)||e))))))})),f.filter((t=>!l.includes(t))).forEach((i=>{const o=n.find((t=>t.id===i));s=s.concat(o.edges.filter((n=>n.baseEdgeList.some((n=>n.v===((null==r?void 0:r.v)||t)&&n.w===((null==r?void 0:r.w)||e))))))})),s}function qo(t){const e=t.coreGraph.nodes().map((e=>t.coreGraph.node(e)));return Object.assign(Object.assign({},Zo(t)),{expanded:t.expanded,nodes:t.expanded?(n=e,n.map((t=>t.node.type===u.META?qo(t):Zo(t)))):[],edges:t.expanded?Ko(t):[]});var n}function Zo(t){return{id:t.node.name,name:t.node.name,type:t.node.type,cardinality:t.node.cardinality,attr:t.attr,parentNodeName:t.node.parentNode?t.node.parentNode.name:null,coreBox:Object.assign({},t.coreBox),x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius,labelHeight:t.labelHeight,labelOffset:t.labelOffset,outboxWidth:t.outboxWidth,paddingLeft:t.paddingLeft,paddingTop:t.paddingTop,paddingRight:t.paddingRight,paddingBottom:t.paddingBottom,path:t.node.path}}function Ko(t){return t.coreGraph.edges().map((e=>({renderInfoEdge:t.coreGraph.edge(e),edge:e}))).filter((({renderInfoEdge:t})=>t.metaEdge)).map((({edge:e,renderInfoEdge:n})=>{const r=function(t,e){const n=e.points.map((t=>Object.assign({},t)));if(e.adjoiningMetaEdge){const r=e.adjoiningMetaEdge.points,i=e.metaEdge.inbound,o=i?r[r.length-1]:r[0],a=n[i?0:n.length-1],s=t.x-t.width/2,u=t.y-t.height/2,c=o.x-s,l=o.y-u,f=-t.paddingLeft,d=-(t.paddingTop+t.labelHeight);a.x=c+f,a.y=l+d}return n}(t,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:e.w,v:e.v,points:r,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:t.node.name}}))}},9685:function(t,e,n){"use strict";n.r(e),n.d(e,{ARRAY_TYPE:function(){return i},EPSILON:function(){return r},RANDOM:function(){return o},equals:function(){return c},setMatrixArrayType:function(){return a},toRadian:function(){return u}});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;function a(t){i=t}var s=Math.PI/180;function u(t){return t*s}function c(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},4530:function(t,e,n){"use strict";n.r(e),n.d(e,{glMatrix:function(){return c},mat2:function(){return r},mat2d:function(){return i},mat3:function(){return st},mat4:function(){return o},quat:function(){return s},quat2:function(){return u},vec2:function(){return Cr},vec3:function(){return oe},vec4:function(){return a}});var r={};n.r(r),n.d(r,{LDU:function(){return M},add:function(){return O},adjoint:function(){return y},clone:function(){return f},copy:function(){return d},create:function(){return l},determinant:function(){return b},equals:function(){return N},exactEquals:function(){return A},frob:function(){return k},fromRotation:function(){return E},fromScaling:function(){return S},fromValues:function(){return p},identity:function(){return h},invert:function(){return m},mul:function(){return D},multiply:function(){return x},multiplyScalar:function(){return I},multiplyScalarAndAdd:function(){return P},rotate:function(){return w},scale:function(){return _},set:function(){return g},str:function(){return C},sub:function(){return L},subtract:function(){return T},transpose:function(){return v}});var i={};n.r(i),n.d(i,{add:function(){return Q},clone:function(){return j},copy:function(){return B},create:function(){return R},determinant:function(){return V},equals:function(){return it},exactEquals:function(){return rt},frob:function(){return J},fromRotation:function(){return X},fromScaling:function(){return q},fromTranslation:function(){return Z},fromValues:function(){return z},identity:function(){return F},invert:function(){return G},mul:function(){return ot},multiply:function(){return U},multiplyScalar:function(){return et},multiplyScalarAndAdd:function(){return nt},rotate:function(){return W},scale:function(){return H},set:function(){return $},str:function(){return K},sub:function(){return at},subtract:function(){return tt},translate:function(){return Y}});var o={};n.r(o),n.d(o,{add:function(){return Kt},adjoint:function(){return vt},clone:function(){return ct},copy:function(){return lt},create:function(){return ut},determinant:function(){return mt},equals:function(){return ne},exactEquals:function(){return ee},frob:function(){return Zt},fromQuat:function(){return Bt},fromQuat2:function(){return It},fromRotation:function(){return Mt},fromRotationTranslation:function(){return Nt},fromRotationTranslationScale:function(){return Rt},fromRotationTranslationScaleOrigin:function(){return jt},fromScaling:function(){return kt},fromTranslation:function(){return Ct},fromValues:function(){return ft},fromXRotation:function(){return Ot},fromYRotation:function(){return Tt},fromZRotation:function(){return At},frustum:function(){return Ft},getRotation:function(){return Lt},getScaling:function(){return Dt},getTranslation:function(){return Pt},identity:function(){return ht},invert:function(){return gt},lookAt:function(){return Yt},mul:function(){return re},multiply:function(){return yt},multiplyScalar:function(){return Qt},multiplyScalarAndAdd:function(){return te},ortho:function(){return Wt},orthoNO:function(){return Ut},orthoZO:function(){return Ht},perspective:function(){return $t},perspectiveFromFieldOfView:function(){return Vt},perspectiveNO:function(){return zt},perspectiveZO:function(){return Gt},rotate:function(){return wt},rotateX:function(){return _t},rotateY:function(){return Et},rotateZ:function(){return St},scale:function(){return xt},set:function(){return dt},str:function(){return qt},sub:function(){return ie},subtract:function(){return Jt},targetTo:function(){return Xt},translate:function(){return bt},transpose:function(){return pt}});var a={};n.r(a),n.d(a,{add:function(){return fe},ceil:function(){return ge},clone:function(){return se},copy:function(){return ce},create:function(){return ae},cross:function(){return Ae},dist:function(){return Ve},distance:function(){return _e},div:function(){return Ge},divide:function(){return pe},dot:function(){return Te},equals:function(){return Be},exactEquals:function(){return je},floor:function(){return ve},forEach:function(){return Ye},fromValues:function(){return ue},inverse:function(){return Me},len:function(){return We},length:function(){return Se},lerp:function(){return Ne},max:function(){return ye},min:function(){return me},mul:function(){return $e},multiply:function(){return he},negate:function(){return ke},normalize:function(){return Oe},random:function(){return Ie},round:function(){return be},scale:function(){return xe},scaleAndAdd:function(){return we},set:function(){return le},sqrDist:function(){return Ue},sqrLen:function(){return He},squaredDistance:function(){return Ee},squaredLength:function(){return Ce},str:function(){return Re},sub:function(){return ze},subtract:function(){return de},transformMat4:function(){return Pe},transformQuat:function(){return De},zero:function(){return Le}});var s={};n.r(s),n.d(s,{add:function(){return Cn},calculateW:function(){return rn},clone:function(){return wn},conjugate:function(){return fn},copy:function(){return En},create:function(){return Xe},dot:function(){return On},equals:function(){return Rn},exactEquals:function(){return Ln},exp:function(){return on},fromEuler:function(){return hn},fromMat3:function(){return dn},fromValues:function(){return _n},getAngle:function(){return Je},getAxisAngle:function(){return Ke},identity:function(){return qe},invert:function(){return ln},len:function(){return Nn},length:function(){return An},lerp:function(){return Tn},ln:function(){return an},mul:function(){return kn},multiply:function(){return Qe},normalize:function(){return Dn},pow:function(){return sn},random:function(){return cn},rotateX:function(){return tn},rotateY:function(){return en},rotateZ:function(){return nn},rotationTo:function(){return jn},scale:function(){return Mn},set:function(){return Sn},setAxes:function(){return Fn},setAxisAngle:function(){return Ze},slerp:function(){return un},sqlerp:function(){return Bn},sqrLen:function(){return Pn},squaredLength:function(){return In},str:function(){return pn}});var u={};n.r(u),n.d(u,{add:function(){return cr},clone:function(){return $n},conjugate:function(){return vr},copy:function(){return Xn},create:function(){return zn},dot:function(){return hr},equals:function(){return Sr},exactEquals:function(){return Er},fromMat4:function(){return Yn},fromRotation:function(){return Hn},fromRotationTranslation:function(){return Un},fromRotationTranslationValues:function(){return Vn},fromTranslation:function(){return Wn},fromValues:function(){return Gn},getDual:function(){return Jn},getReal:function(){return Kn},getTranslation:function(){return er},identity:function(){return qn},invert:function(){return gr},len:function(){return yr},length:function(){return mr},lerp:function(){return pr},mul:function(){return fr},multiply:function(){return lr},normalize:function(){return wr},rotateAroundAxis:function(){return ur},rotateByQuatAppend:function(){return ar},rotateByQuatPrepend:function(){return sr},rotateX:function(){return rr},rotateY:function(){return ir},rotateZ:function(){return or},scale:function(){return dr},set:function(){return Zn},setDual:function(){return tr},setReal:function(){return Qn},sqrLen:function(){return xr},squaredLength:function(){return br},str:function(){return _r},translate:function(){return nr}});var c=n(9685);function l(){var t=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function f(t){var e=new c.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function p(t,e,n,r){var i=new c.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function g(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function v(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function m(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function y(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function b(t){return t[0]*t[3]-t[2]*t[1]}function x(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*l,t[3]=i*c+a*l,t}function w(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function _(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function E(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function S(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function C(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function k(t){return Math.hypot(t[0],t[1],t[2],t[3])}function M(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function O(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function T(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function A(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function N(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-a)<=c.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=c.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-l)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))}function I(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function P(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var D=x,L=T;function R(){var t=new c.ARRAY_TYPE(6);return c.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function j(t){var e=new c.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function F(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function z(t,e,n,r,i,o){var a=new c.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function $(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function G(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null}function V(t){return t[0]*t[3]-t[1]*t[2]}function U(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1],f=n[2],d=n[3],h=n[4],p=n[5];return t[0]=r*c+o*l,t[1]=i*c+a*l,t[2]=r*f+o*d,t[3]=i*f+a*d,t[4]=r*h+o*p+s,t[5]=i*h+a*p+u,t}function W(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=i*l+a*c,t[2]=r*-c+o*l,t[3]=i*-c+a*l,t[4]=s,t[5]=u,t}function H(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*l,t[3]=a*l,t[4]=s,t[5]=u,t}function Y(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*l+s,t[5]=i*c+a*l+u,t}function X(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function q(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function Z(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function K(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function J(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function Q(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function tt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function et(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function nt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function rt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function it(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],l=e[1],f=e[2],d=e[3],h=e[4],p=e[5];return Math.abs(n-u)<=c.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-l)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-f)<=c.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-d)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-h)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-p)<=c.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))}var ot=U,at=tt,st=n(5600);function ut(){var t=new c.ARRAY_TYPE(16);return c.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ct(t){var e=new c.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function lt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ft(t,e,n,r,i,o,a,s,u,l,f,d,h,p,g,v){var m=new c.ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=i,m[5]=o,m[6]=a,m[7]=s,m[8]=u,m[9]=l,m[10]=f,m[11]=d,m[12]=h,m[13]=p,m[14]=g,m[15]=v,m}function dt(t,e,n,r,i,o,a,s,u,c,l,f,d,h,p,g,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=d,t[12]=h,t[13]=p,t[14]=g,t[15]=v,t}function ht(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pt(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function gt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=n*s-r*a,b=n*u-i*a,x=n*c-o*a,w=r*u-i*s,_=r*c-o*s,E=i*c-o*u,S=l*g-f*p,C=l*v-d*p,k=l*m-h*p,M=f*v-d*g,O=f*m-h*g,T=d*m-h*v,A=y*T-b*O+x*M+w*k-_*C+E*S;return A?(A=1/A,t[0]=(s*T-u*O+c*M)*A,t[1]=(i*O-r*T-o*M)*A,t[2]=(g*E-v*_+m*w)*A,t[3]=(d*_-f*E-h*w)*A,t[4]=(u*k-a*T-c*C)*A,t[5]=(n*T-i*k+o*C)*A,t[6]=(v*x-p*E-m*b)*A,t[7]=(l*E-d*x+h*b)*A,t[8]=(a*O-s*k+c*S)*A,t[9]=(r*k-n*O-o*S)*A,t[10]=(p*_-g*x+m*y)*A,t[11]=(f*x-l*_-h*y)*A,t[12]=(s*C-a*M-u*S)*A,t[13]=(n*M-r*C+i*S)*A,t[14]=(g*b-p*w-v*y)*A,t[15]=(l*w-f*b+d*y)*A,t):null}function vt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],g=e[13],v=e[14],m=e[15];return t[0]=s*(d*m-h*v)-f*(u*m-c*v)+g*(u*h-c*d),t[1]=-(r*(d*m-h*v)-f*(i*m-o*v)+g*(i*h-o*d)),t[2]=r*(u*m-c*v)-s*(i*m-o*v)+g*(i*c-o*u),t[3]=-(r*(u*h-c*d)-s*(i*h-o*d)+f*(i*c-o*u)),t[4]=-(a*(d*m-h*v)-l*(u*m-c*v)+p*(u*h-c*d)),t[5]=n*(d*m-h*v)-l*(i*m-o*v)+p*(i*h-o*d),t[6]=-(n*(u*m-c*v)-a*(i*m-o*v)+p*(i*c-o*u)),t[7]=n*(u*h-c*d)-a*(i*h-o*d)+l*(i*c-o*u),t[8]=a*(f*m-h*g)-l*(s*m-c*g)+p*(s*h-c*f),t[9]=-(n*(f*m-h*g)-l*(r*m-o*g)+p*(r*h-o*f)),t[10]=n*(s*m-c*g)-a*(r*m-o*g)+p*(r*c-o*s),t[11]=-(n*(s*h-c*f)-a*(r*h-o*f)+l*(r*c-o*s)),t[12]=-(a*(f*v-d*g)-l*(s*v-u*g)+p*(s*d-u*f)),t[13]=n*(f*v-d*g)-l*(r*v-i*g)+p*(r*d-i*f),t[14]=-(n*(s*v-u*g)-a*(r*v-i*g)+p*(r*u-i*s)),t[15]=n*(s*d-u*f)-a*(r*d-i*f)+l*(r*u-i*s),t}function mt(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],d=t[11],h=t[12],p=t[13],g=t[14],v=t[15];return(e*a-n*o)*(f*v-d*g)-(e*s-r*o)*(l*v-d*p)+(e*u-i*o)*(l*g-f*p)+(n*s-r*a)*(c*v-d*h)-(n*u-i*a)*(c*g-f*h)+(r*u-i*s)*(c*p-l*h)}function yt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],p=e[11],g=e[12],v=e[13],m=e[14],y=e[15],b=n[0],x=n[1],w=n[2],_=n[3];return t[0]=b*r+x*s+w*f+_*g,t[1]=b*i+x*u+w*d+_*v,t[2]=b*o+x*c+w*h+_*m,t[3]=b*a+x*l+w*p+_*y,b=n[4],x=n[5],w=n[6],_=n[7],t[4]=b*r+x*s+w*f+_*g,t[5]=b*i+x*u+w*d+_*v,t[6]=b*o+x*c+w*h+_*m,t[7]=b*a+x*l+w*p+_*y,b=n[8],x=n[9],w=n[10],_=n[11],t[8]=b*r+x*s+w*f+_*g,t[9]=b*i+x*u+w*d+_*v,t[10]=b*o+x*c+w*h+_*m,t[11]=b*a+x*l+w*p+_*y,b=n[12],x=n[13],w=n[14],_=n[15],t[12]=b*r+x*s+w*f+_*g,t[13]=b*i+x*u+w*d+_*v,t[14]=b*o+x*c+w*h+_*m,t[15]=b*a+x*l+w*p+_*y,t}function bt(t,e,n){var r,i,o,a,s,u,c,l,f,d,h,p,g=n[0],v=n[1],m=n[2];return e===t?(t[12]=e[0]*g+e[4]*v+e[8]*m+e[12],t[13]=e[1]*g+e[5]*v+e[9]*m+e[13],t[14]=e[2]*g+e[6]*v+e[10]*m+e[14],t[15]=e[3]*g+e[7]*v+e[11]*m+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=d,t[10]=h,t[11]=p,t[12]=r*g+s*v+f*m+e[12],t[13]=i*g+u*v+d*m+e[13],t[14]=o*g+c*v+h*m+e[14],t[15]=a*g+l*v+p*m+e[15]),t}function xt(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function wt(t,e,n,r){var i,o,a,s,u,l,f,d,h,p,g,v,m,y,b,x,w,_,E,S,C,k,M,O,T=r[0],A=r[1],N=r[2],I=Math.hypot(T,A,N);return I<c.EPSILON?null:(T*=I=1/I,A*=I,N*=I,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],u=e[1],l=e[2],f=e[3],d=e[4],h=e[5],p=e[6],g=e[7],v=e[8],m=e[9],y=e[10],b=e[11],x=T*T*a+o,w=A*T*a+N*i,_=N*T*a-A*i,E=T*A*a-N*i,S=A*A*a+o,C=N*A*a+T*i,k=T*N*a+A*i,M=A*N*a-T*i,O=N*N*a+o,t[0]=s*x+d*w+v*_,t[1]=u*x+h*w+m*_,t[2]=l*x+p*w+y*_,t[3]=f*x+g*w+b*_,t[4]=s*E+d*S+v*C,t[5]=u*E+h*S+m*C,t[6]=l*E+p*S+y*C,t[7]=f*E+g*S+b*C,t[8]=s*k+d*M+v*O,t[9]=u*k+h*M+m*O,t[10]=l*k+p*M+y*O,t[11]=f*k+g*M+b*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function _t(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+d*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=d*i-u*r,t}function Et(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-d*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+d*i,t}function St(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+d*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=d*i-u*r,t}function Ct(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function kt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mt(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],l=Math.hypot(a,s,u);return l<c.EPSILON?null:(a*=l=1/l,s*=l,u*=l,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Ot(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function At(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Nt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,d=r*c,h=i*u,p=i*c,g=o*c,v=a*s,m=a*u,y=a*c;return t[0]=1-(h+g),t[1]=f+y,t[2]=d-m,t[3]=0,t[4]=f-y,t[5]=1-(l+g),t[6]=p+v,t[7]=0,t[8]=d+m,t[9]=p-v,t[10]=1-(l+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function It(t,e){var n=new c.ARRAY_TYPE(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],l=e[6],f=e[7],d=r*r+i*i+o*o+a*a;return d>0?(n[0]=2*(s*a+f*r+u*o-l*i)/d,n[1]=2*(u*a+f*i+l*r-s*o)/d,n[2]=2*(l*a+f*o+s*i-u*r)/d):(n[0]=2*(s*a+f*r+u*o-l*i),n[1]=2*(u*a+f*i+l*r-s*o),n[2]=2*(l*a+f*o+s*i-u*r)),Nt(t,e,n),t}function Pt(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Dt(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,l),t}function Lt(t,e){var n=new c.ARRAY_TYPE(3);Dt(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,u=e[2]*o,l=e[4]*r,f=e[5]*i,d=e[6]*o,h=e[8]*r,p=e[9]*i,g=e[10]*o,v=a+f+g,m=0;return v>0?(m=2*Math.sqrt(v+1),t[3]=.25*m,t[0]=(d-p)/m,t[1]=(h-u)/m,t[2]=(s-l)/m):a>f&&a>g?(m=2*Math.sqrt(1+a-f-g),t[3]=(d-p)/m,t[0]=.25*m,t[1]=(s+l)/m,t[2]=(h+u)/m):f>g?(m=2*Math.sqrt(1+f-a-g),t[3]=(h-u)/m,t[0]=(s+l)/m,t[1]=.25*m,t[2]=(d+p)/m):(m=2*Math.sqrt(1+g-a-f),t[3]=(s-l)/m,t[0]=(h+u)/m,t[1]=(d+p)/m,t[2]=.25*m),t}function Rt(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,f=i*u,d=i*c,h=i*l,p=o*c,g=o*l,v=a*l,m=s*u,y=s*c,b=s*l,x=r[0],w=r[1],_=r[2];return t[0]=(1-(p+v))*x,t[1]=(d+b)*x,t[2]=(h-y)*x,t[3]=0,t[4]=(d-b)*w,t[5]=(1-(f+v))*w,t[6]=(g+m)*w,t[7]=0,t[8]=(h+y)*_,t[9]=(g-m)*_,t[10]=(1-(f+p))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function jt(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,f=s+s,d=o*c,h=o*l,p=o*f,g=a*l,v=a*f,m=s*f,y=u*c,b=u*l,x=u*f,w=r[0],_=r[1],E=r[2],S=i[0],C=i[1],k=i[2],M=(1-(g+m))*w,O=(h+x)*w,T=(p-b)*w,A=(h-x)*_,N=(1-(d+m))*_,I=(v+y)*_,P=(p+b)*E,D=(v-y)*E,L=(1-(d+g))*E;return t[0]=M,t[1]=O,t[2]=T,t[3]=0,t[4]=A,t[5]=N,t[6]=I,t[7]=0,t[8]=P,t[9]=D,t[10]=L,t[11]=0,t[12]=n[0]+S-(M*S+A*C+P*k),t[13]=n[1]+C-(O*S+N*C+D*k),t[14]=n[2]+k-(T*S+I*C+L*k),t[15]=1,t}function Bt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,d=i*a,h=i*s,p=i*u,g=o*a,v=o*s,m=o*u;return t[0]=1-f-p,t[1]=l+m,t[2]=d-v,t[3]=0,t[4]=l-m,t[5]=1-c-p,t[6]=h+g,t[7]=0,t[8]=d+v,t[9]=h-g,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ft(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function zt(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var $t=zt;function Gt(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function Vt(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ut(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}var Wt=Ut;function Ht(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=o*c,t[15]=1,t}function Yt(t,e,n,r){var i,o,a,s,u,l,f,d,h,p,g=e[0],v=e[1],m=e[2],y=r[0],b=r[1],x=r[2],w=n[0],_=n[1],E=n[2];return Math.abs(g-w)<c.EPSILON&&Math.abs(v-_)<c.EPSILON&&Math.abs(m-E)<c.EPSILON?ht(t):(f=g-w,d=v-_,h=m-E,i=b*(h*=p=1/Math.hypot(f,d,h))-x*(d*=p),o=x*(f*=p)-y*h,a=y*d-b*f,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),s=d*a-h*o,u=h*i-f*a,l=f*o-d*i,(p=Math.hypot(s,u,l))?(s*=p=1/p,u*=p,l*=p):(s=0,u=0,l=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=o,t[5]=u,t[6]=d,t[7]=0,t[8]=a,t[9]=l,t[10]=h,t[11]=0,t[12]=-(i*g+o*v+a*m),t[13]=-(s*g+u*v+l*m),t[14]=-(f*g+d*v+h*m),t[15]=1,t)}function Xt(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],f=o-n[1],d=a-n[2],h=l*l+f*f+d*d;h>0&&(l*=h=1/Math.sqrt(h),f*=h,d*=h);var p=u*d-c*f,g=c*l-s*d,v=s*f-u*l;return(h=p*p+g*g+v*v)>0&&(p*=h=1/Math.sqrt(h),g*=h,v*=h),t[0]=p,t[1]=g,t[2]=v,t[3]=0,t[4]=f*v-d*g,t[5]=d*p-l*v,t[6]=l*g-f*p,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function qt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Zt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Kt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Jt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Qt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function te(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function ee(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function ne(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],f=t[8],d=t[9],h=t[10],p=t[11],g=t[12],v=t[13],m=t[14],y=t[15],b=e[0],x=e[1],w=e[2],_=e[3],E=e[4],S=e[5],C=e[6],k=e[7],M=e[8],O=e[9],T=e[10],A=e[11],N=e[12],I=e[13],P=e[14],D=e[15];return Math.abs(n-b)<=c.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-x)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-w)<=c.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(o-_)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-E)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-S)<=c.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-C)<=c.EPSILON*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(l-k)<=c.EPSILON*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(f-M)<=c.EPSILON*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(d-O)<=c.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(h-T)<=c.EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(p-A)<=c.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(g-N)<=c.EPSILON*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(v-I)<=c.EPSILON*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(m-P)<=c.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-D)<=c.EPSILON*Math.max(1,Math.abs(y),Math.abs(D))}var re=yt,ie=Jt,oe=n(7160);function ae(){var t=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function se(t){var e=new c.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function ue(t,e,n,r){var i=new c.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function ce(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function le(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function fe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function de(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function he(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function pe(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function ge(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function ve(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function me(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function ye(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function be(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function xe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function we(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function _e(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function Ee(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function Se(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function Ce(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function ke(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Me(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Oe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function Te(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ae(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],f=e[1],d=e[2],h=e[3];return t[0]=f*c-d*u+h*s,t[1]=-l*c+d*a-h*o,t[2]=l*u-f*a+h*i,t[3]=-l*s+f*o-d*i,t}function Ne(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function Ie(t,e){var n,r,i,o,a,s;e=e||1;do{a=(n=2*c.RANDOM()-1)*n+(r=2*c.RANDOM()-1)*r}while(a>=1);do{s=(i=2*c.RANDOM()-1)*i+(o=2*c.RANDOM()-1)*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*o*u,t}function Pe(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function De(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,d=c*o+a*i-s*r,h=-a*r-s*i-u*o;return t[0]=l*c+h*-a+f*-u-d*-s,t[1]=f*c+h*-s+d*-a-l*-u,t[2]=d*c+h*-u+l*-s-f*-a,t[3]=e[3],t}function Le(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Re(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function je(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Be(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-a)<=c.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=c.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-l)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))}var Fe,ze=de,$e=he,Ge=pe,Ve=_e,Ue=Ee,We=Se,He=Ce,Ye=(Fe=ae(),function(t,e,n,r,i,o){var a,s;for(e||(e=4),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)Fe[0]=t[a],Fe[1]=t[a+1],Fe[2]=t[a+2],Fe[3]=t[a+3],i(Fe,Fe,o),t[a]=Fe[0],t[a+1]=Fe[1],t[a+2]=Fe[2],t[a+3]=Fe[3];return t});function Xe(){var t=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function qe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ze(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Ke(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>c.EPSILON?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Je(t,e){var n=On(t,e);return Math.acos(2*n*n-1)}function Qe(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t}function tn(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t}function en(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t}function nn(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}function rn(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function on(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),u=a>0?s*Math.sin(a)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=s*Math.cos(a),t}function an(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function sn(t,e,n){return an(t,e),Mn(t,t,n),on(t,t),t}function un(t,e,n,r){var i,o,a,s,u,l=e[0],f=e[1],d=e[2],h=e[3],p=n[0],g=n[1],v=n[2],m=n[3];return(o=l*p+f*g+d*v+h*m)<0&&(o=-o,p=-p,g=-g,v=-v,m=-m),1-o>c.EPSILON?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*l+u*p,t[1]=s*f+u*g,t[2]=s*d+u*v,t[3]=s*h+u*m,t}function cn(t){var e=c.RANDOM(),n=c.RANDOM(),r=c.RANDOM(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function ln(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function fn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function dn(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}function hn(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*u*l-a*s*c,t[1]=a*s*l+o*u*c,t[2]=a*u*c-o*s*l,t[3]=a*u*l+o*s*c,t}function pn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var gn,vn,mn,yn,bn,xn,wn=se,_n=ue,En=ce,Sn=le,Cn=fe,kn=Qe,Mn=xe,On=Te,Tn=Ne,An=Se,Nn=An,In=Ce,Pn=In,Dn=Oe,Ln=je,Rn=Be,jn=(gn=oe.create(),vn=oe.fromValues(1,0,0),mn=oe.fromValues(0,1,0),function(t,e,n){var r=oe.dot(e,n);return r<-.999999?(oe.cross(gn,vn,e),oe.len(gn)<1e-6&&oe.cross(gn,mn,e),oe.normalize(gn,gn),Ze(t,gn,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(oe.cross(gn,e,n),t[0]=gn[0],t[1]=gn[1],t[2]=gn[2],t[3]=1+r,Dn(t,t))}),Bn=(yn=Xe(),bn=Xe(),function(t,e,n,r,i,o){return un(yn,e,i,o),un(bn,n,r,o),un(t,yn,bn,2*o*(1-o)),t}),Fn=(xn=st.create(),function(t,e,n,r){return xn[0]=n[0],xn[3]=n[1],xn[6]=n[2],xn[1]=r[0],xn[4]=r[1],xn[7]=r[2],xn[2]=-e[0],xn[5]=-e[1],xn[8]=-e[2],Dn(t,dn(t,xn))});function zn(){var t=new c.ARRAY_TYPE(8);return c.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function $n(t){var e=new c.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Gn(t,e,n,r,i,o,a,s){var u=new c.ARRAY_TYPE(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u}function Vn(t,e,n,r,i,o,a){var s=new c.ARRAY_TYPE(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*i,l=.5*o,f=.5*a;return s[4]=u*r+l*n-f*e,s[5]=l*r+f*t-u*n,s[6]=f*r+u*e-l*t,s[7]=-u*t-l*e-f*n,s}function Un(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+i*u-o*s,t[5]=i*c+o*a-r*u,t[6]=o*c+r*s-i*a,t[7]=-r*a-i*s-o*u,t}function Wn(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Hn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Yn(t,e){var n=Xe();Lt(n,e);var r=new c.ARRAY_TYPE(3);return Pt(r,e),Un(t,n,r),t}function Xn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function qn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Zn(t,e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}var Kn=En;function Jn(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Qn=En;function tr(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function er(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+o*a+r*u-i*s),t[1]=2*(r*c+o*s+i*a-n*u),t[2]=2*(i*c+o*u+n*s-r*a),t}function nr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],l=e[4],f=e[5],d=e[6],h=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*c-o*u+l,t[5]=a*u+o*s-r*c+f,t[6]=a*c+r*u-i*s+d,t[7]=-r*s-i*u-o*c+h,t}function rr(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*a+l*r+u*o-c*i,d=u*a+l*i+c*r-s*o,h=c*a+l*o+s*i-u*r,p=l*a-s*r-u*i-c*o;return tn(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=f*a+p*r+d*o-h*i,t[5]=d*a+p*i+h*r-f*o,t[6]=h*a+p*o+f*i-d*r,t[7]=p*a-f*r-d*i-h*o,t}function ir(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*a+l*r+u*o-c*i,d=u*a+l*i+c*r-s*o,h=c*a+l*o+s*i-u*r,p=l*a-s*r-u*i-c*o;return en(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=f*a+p*r+d*o-h*i,t[5]=d*a+p*i+h*r-f*o,t[6]=h*a+p*o+f*i-d*r,t[7]=p*a-f*r-d*i-h*o,t}function or(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*a+l*r+u*o-c*i,d=u*a+l*i+c*r-s*o,h=c*a+l*o+s*i-u*r,p=l*a-s*r-u*i-c*o;return nn(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=f*a+p*r+d*o-h*i,t[5]=d*a+p*i+h*r-f*o,t[6]=h*a+p*o+f*i-d*r,t[7]=p*a-f*r-d*i-h*o,t}function ar(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=s*a+l*r+u*o-c*i,t[1]=u*a+l*i+c*r-s*o,t[2]=c*a+l*o+s*i-u*r,t[3]=l*a-s*r-u*i-c*o,s=e[4],u=e[5],c=e[6],l=e[7],t[4]=s*a+l*r+u*o-c*i,t[5]=u*a+l*i+c*r-s*o,t[6]=c*a+l*o+s*i-u*r,t[7]=l*a-s*r-u*i-c*o,t}function sr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,s=n[4],u=n[5],c=n[6],l=n[7],t[4]=r*l+a*s+i*c-o*u,t[5]=i*l+a*u+o*s-r*c,t[6]=o*l+a*c+r*u-i*s,t[7]=a*l-r*s-i*u-o*c,t}function ur(t,e,n,r){if(Math.abs(r)<c.EPSILON)return Xn(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),a=o*n[0]/i,s=o*n[1]/i,u=o*n[2]/i,l=Math.cos(r),f=e[0],d=e[1],h=e[2],p=e[3];t[0]=f*l+p*a+d*u-h*s,t[1]=d*l+p*s+h*a-f*u,t[2]=h*l+p*u+f*s-d*a,t[3]=p*l-f*a-d*s-h*u;var g=e[4],v=e[5],m=e[6],y=e[7];return t[4]=g*l+y*a+v*u-m*s,t[5]=v*l+y*s+m*a-g*u,t[6]=m*l+y*u+g*s-v*a,t[7]=y*l-g*a-v*s-m*u,t}function cr(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function lr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],u=n[5],c=n[6],l=n[7],f=e[4],d=e[5],h=e[6],p=e[7],g=n[0],v=n[1],m=n[2],y=n[3];return t[0]=r*y+a*g+i*m-o*v,t[1]=i*y+a*v+o*g-r*m,t[2]=o*y+a*m+r*v-i*g,t[3]=a*y-r*g-i*v-o*m,t[4]=r*l+a*s+i*c-o*u+f*y+p*g+d*m-h*v,t[5]=i*l+a*u+o*s-r*c+d*y+p*v+h*g-f*m,t[6]=o*l+a*c+r*u-i*s+h*y+p*m+f*v-d*g,t[7]=a*l-r*s-i*u-o*c+p*y-f*g-d*v-h*m,t}var fr=lr;function dr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var hr=On;function pr(t,e,n,r){var i=1-r;return hr(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function gr(t,e){var n=br(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function vr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var mr=An,yr=mr,br=In,xr=br;function wr(t,e){var n=br(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,a=e[3]/n,s=e[4],u=e[5],c=e[6],l=e[7],f=r*s+i*u+o*c+a*l;t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=(s-r*f)/n,t[5]=(u-i*f)/n,t[6]=(c-o*f)/n,t[7]=(l-a*f)/n}return t}function _r(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Er(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Sr(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],f=e[0],d=e[1],h=e[2],p=e[3],g=e[4],v=e[5],m=e[6],y=e[7];return Math.abs(n-f)<=c.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-h)<=c.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-p)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-g)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-v)<=c.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-m)<=c.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-y)<=c.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))}var Cr=n(1437)},5600:function(t,e,n){"use strict";n.r(e),n.d(e,{add:function(){return O},adjoint:function(){return h},clone:function(){return a},copy:function(){return s},create:function(){return i},determinant:function(){return p},equals:function(){return P},exactEquals:function(){return I},frob:function(){return M},fromMat2d:function(){return _},fromMat4:function(){return o},fromQuat:function(){return E},fromRotation:function(){return x},fromScaling:function(){return w},fromTranslation:function(){return b},fromValues:function(){return u},identity:function(){return l},invert:function(){return d},mul:function(){return D},multiply:function(){return g},multiplyScalar:function(){return A},multiplyScalarAndAdd:function(){return N},normalFromMat4:function(){return S},projection:function(){return C},rotate:function(){return m},scale:function(){return y},set:function(){return c},str:function(){return k},sub:function(){return L},subtract:function(){return T},translate:function(){return v},transpose:function(){return f}});var r=n(9685);function i(){var t=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,n,i,o,a,s,u,c){var l=new r.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=i,l[4]=o,l[5]=a,l[6]=s,l[7]=u,l[8]=c,l}function c(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function d(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*a-s*c,d=-l*o+s*u,h=c*o-a*u,p=n*f+r*d+i*h;return p?(p=1/p,t[0]=f*p,t[1]=(-l*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=d*p,t[4]=(l*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=h*p,t[7]=(-c*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*a,t[3]=s*u-o*l,t[4]=n*l-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t}function p(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)}function g(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=n[0],h=n[1],p=n[2],g=n[3],v=n[4],m=n[5],y=n[6],b=n[7],x=n[8];return t[0]=d*r+h*a+p*c,t[1]=d*i+h*s+p*l,t[2]=d*o+h*u+p*f,t[3]=g*r+v*a+m*c,t[4]=g*i+v*s+m*l,t[5]=g*o+v*u+m*f,t[6]=y*r+b*a+x*c,t[7]=y*i+b*s+x*l,t[8]=y*o+b*u+x*f,t}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=n[0],h=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=d*r+h*a+c,t[7]=d*i+h*s+l,t[8]=d*o+h*u+f,t}function m(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=Math.sin(n),h=Math.cos(n);return t[0]=h*r+d*a,t[1]=h*i+d*s,t[2]=h*o+d*u,t[3]=h*a-d*r,t[4]=h*s-d*i,t[5]=h*u-d*o,t[6]=c,t[7]=l,t[8]=f,t}function y(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function x(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function E(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,d=i*a,h=i*s,p=i*u,g=o*a,v=o*s,m=o*u;return t[0]=1-f-p,t[3]=l-m,t[6]=d+v,t[1]=l+m,t[4]=1-c-p,t[7]=h-g,t[2]=d-v,t[5]=h+g,t[8]=1-c-f,t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=n*s-r*a,b=n*u-i*a,x=n*c-o*a,w=r*u-i*s,_=r*c-o*s,E=i*c-o*u,S=l*g-f*p,C=l*v-d*p,k=l*m-h*p,M=f*v-d*g,O=f*m-h*g,T=d*m-h*v,A=y*T-b*O+x*M+w*k-_*C+E*S;return A?(A=1/A,t[0]=(s*T-u*O+c*M)*A,t[1]=(u*k-a*T-c*C)*A,t[2]=(a*O-s*k+c*S)*A,t[3]=(i*O-r*T-o*M)*A,t[4]=(n*T-i*k+o*C)*A,t[5]=(r*k-n*O-o*S)*A,t[6]=(g*E-v*_+m*w)*A,t[7]=(v*x-p*E-m*b)*A,t[8]=(p*_-g*x+m*y)*A,t):null}function C(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function k(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function M(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function O(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function T(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function A(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function N(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function I(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function P(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=e[0],h=e[1],p=e[2],g=e[3],v=e[4],m=e[5],y=e[6],b=e[7],x=e[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-g)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-v)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-m)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-y)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-b)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(f-x)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))}var D=g,L=T},1437:function(t,e,n){"use strict";n.r(e),n.d(e,{add:function(){return c},angle:function(){return R},ceil:function(){return h},clone:function(){return o},copy:function(){return s},create:function(){return i},cross:function(){return O},dist:function(){return H},distance:function(){return x},div:function(){return W},divide:function(){return d},dot:function(){return M},equals:function(){return z},exactEquals:function(){return F},floor:function(){return p},forEach:function(){return q},fromValues:function(){return a},inverse:function(){return C},len:function(){return G},length:function(){return _},lerp:function(){return T},max:function(){return v},min:function(){return g},mul:function(){return U},multiply:function(){return f},negate:function(){return S},normalize:function(){return k},random:function(){return A},rotate:function(){return L},round:function(){return m},scale:function(){return y},scaleAndAdd:function(){return b},set:function(){return u},sqrDist:function(){return Y},sqrLen:function(){return X},squaredDistance:function(){return w},squaredLength:function(){return E},str:function(){return B},sub:function(){return V},subtract:function(){return l},transformMat2:function(){return N},transformMat2d:function(){return I},transformMat3:function(){return P},transformMat4:function(){return D},zero:function(){return j}});var r=n(9685);function i(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function s(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function d(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function h(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function g(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function _(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function E(t){var e=t[0],n=t[1];return e*e+n*n}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t}function C(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function k(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function M(t,e){return t[0]*e[0]+t[1]*e[1]}function O(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function T(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function A(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function N(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function I(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function P(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function D(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function L(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function R(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function j(t){return t[0]=0,t[1]=0,t}function B(t){return"vec2("+t[0]+", "+t[1]+")"}function F(t,e){return t[0]===e[0]&&t[1]===e[1]}function z(t,e){var n=t[0],i=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))}var $,G=_,V=l,U=f,W=d,H=x,Y=w,X=E,q=($=i(),function(t,e,n,r,i,o){var a,s;for(e||(e=2),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)$[0]=t[a],$[1]=t[a+1],i($,$,o),t[a]=$[0],t[a+1]=$[1];return t})},7160:function(t,e,n){"use strict";n.r(e),n.d(e,{add:function(){return l},angle:function(){return F},bezier:function(){return N},ceil:function(){return p},clone:function(){return o},copy:function(){return u},create:function(){return i},cross:function(){return O},dist:function(){return X},distance:function(){return w},div:function(){return Y},divide:function(){return h},dot:function(){return M},equals:function(){return V},exactEquals:function(){return G},floor:function(){return g},forEach:function(){return J},fromValues:function(){return s},hermite:function(){return A},inverse:function(){return C},len:function(){return Z},length:function(){return a},lerp:function(){return T},max:function(){return m},min:function(){return v},mul:function(){return H},multiply:function(){return d},negate:function(){return S},normalize:function(){return k},random:function(){return I},rotateX:function(){return R},rotateY:function(){return j},rotateZ:function(){return B},round:function(){return y},scale:function(){return b},scaleAndAdd:function(){return x},set:function(){return c},sqrDist:function(){return q},sqrLen:function(){return K},squaredDistance:function(){return _},squaredLength:function(){return E},str:function(){return $},sub:function(){return W},subtract:function(){return f},transformMat3:function(){return D},transformMat4:function(){return P},transformQuat:function(){return L},zero:function(){return z}});var r=n(9685);function i(){var t=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function s(t,e,n){var i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function d(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function g(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function x(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function E(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function C(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function k(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function M(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function O(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function T(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function A(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t}function N(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,d=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+i[0]*d,t[1]=e[1]*c+n[1]*l+r[1]*f+i[1]*d,t[2]=e[2]*c+n[2]*l+r[2]*f+i[2]*d,t}function I(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t}function P(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function D(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function L(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=i*c-o*u,f=o*s-r*c,d=r*u-i*s,h=i*d-o*f,p=o*l-r*d,g=r*f-i*l,v=2*a;return l*=v,f*=v,d*=v,h*=2,p*=2,g*=2,t[0]=s+l+h,t[1]=u+f+p,t[2]=c+d+g,t}function R(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function j(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function B(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function F(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),c=u&&M(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function z(t){return t[0]=0,t[1]=0,t[2]=0,t}function $(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function G(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function V(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}var U,W=f,H=d,Y=h,X=w,q=_,Z=a,K=E,J=(U=i(),function(t,e,n,r,i,o){var a,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)U[0]=t[a],U[1]=t[a+1],U[2]=t[a+2],i(U,U,o),t[a]=U[0],t[a+1]=U[1],t[a+2]=U[2];return t})},8186:function(t){var e=[],n=[],r="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function i(t,i){if(i=i||{},void 0===t)throw new Error(r);var o,a=!0===i.prepend?"prepend":"append",s=void 0!==i.container?i.container:document.querySelector("head"),u=e.indexOf(s);return-1===u&&(u=e.push(s)-1,n[u]={}),void 0!==n[u]&&void 0!==n[u][a]?o=n[u][a]:(o=n[u][a]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===a?s.insertBefore(o,s.childNodes[0]):s.appendChild(o)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),o.styleSheet?o.styleSheet.cssText+=t:o.textContent+=t,o}t.exports=i,t.exports.insertCss=i},5171:function(t){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},1296:function(t,e,n){var r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,f="object"==typeof self&&self&&self.Object===Object&&self,d=l||f||Function("return this")(),h=Object.prototype.toString,p=Math.max,g=Math.min,v=function(){return d.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&h.call(t)==i}(t))return r;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):a.test(t)?r:+t}t.exports=function(t,e,n){var r,i,o,a,s,u,c=0,l=!1,f=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,c=e,a=t.apply(o,n)}function b(t){var n=t-u;return void 0===u||n>=e||n<0||f&&t-c>=o}function x(){var t=v();if(b(t))return w(t);s=setTimeout(x,function(t){var n=e-(t-u);return f?g(n,o-(t-c)):n}(t))}function w(t){return s=void 0,d&&r?h(t):(r=i=void 0,a)}function _(){var t=v(),n=b(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return function(t){return c=t,s=setTimeout(x,e),l?h(t):a}(u);if(f)return s=setTimeout(x,e),h(u)}return void 0===s&&(s=setTimeout(x,e)),a}return e=y(e)||0,m(n)&&(l=!!n.leading,o=(f="maxWait"in n)?p(y(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),_.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=i=s=void 0},_.flush=function(){return void 0===s?a:w(v())},_}},2705:function(t,e,n){var r=n(5639).Symbol;t.exports=r},4239:function(t,e,n){var r=n(2705),i=n(9607),o=n(2333),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},8749:function(t,e,n){var r=n(4239),i=n(1780),o=n(7005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},7518:function(t){t.exports=function(t){return function(e){return t(e)}}},1957:function(t,e,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},5924:function(t,e,n){var r=n(5569)(Object.getPrototypeOf,Object);t.exports=r},9607:function(t,e,n){var r=n(2705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},1167:function(t,e,n){t=n.nmd(t);var r=n(1957),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},2333:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5569:function(t){t.exports=function(t,e){return function(n){return t(e(n))}}},5639:function(t,e,n){var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},1469:function(t){var e=Array.isArray;t.exports=e},1780:function(t){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},1763:function(t,e,n){var r=n(4239),i=n(7005);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},7005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},8630:function(t,e,n){var r=n(4239),i=n(5924),o=n(7005),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},6719:function(t,e,n){var r=n(8749),i=n(7518),o=n(1167),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},6486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o=200,a="Expected a function",s="__lodash_hash_undefined__",u="__lodash_placeholder__",c=1,l=2,f=4,d=1,h=2,p=1,g=2,v=4,m=8,y=16,b=32,x=64,w=128,_=256,E=512,S=800,C=16,k=1/0,M=9007199254740991,O=17976931348623157e292,T=NaN,A=4294967295,N=A-1,I=A>>>1,P=[["ary",w],["bind",p],["bindKey",g],["curry",m],["curryRight",y],["flip",E],["partial",b],["partialRight",x],["rearg",_]],D="[object Arguments]",L="[object Array]",R="[object AsyncFunction]",j="[object Boolean]",B="[object Date]",F="[object DOMException]",z="[object Error]",$="[object Function]",G="[object GeneratorFunction]",V="[object Map]",U="[object Number]",W="[object Null]",H="[object Object]",Y="[object Promise]",X="[object Proxy]",q="[object RegExp]",Z="[object Set]",K="[object String]",J="[object Symbol]",Q="[object Undefined]",tt="[object WeakMap]",et="[object ArrayBuffer]",nt="[object DataView]",rt="[object Float32Array]",it="[object Float64Array]",ot="[object Int8Array]",at="[object Int16Array]",st="[object Int32Array]",ut="[object Uint8Array]",ct="[object Uint8ClampedArray]",lt="[object Uint16Array]",ft="[object Uint32Array]",dt=/\b__p \+= '';/g,ht=/\b(__p \+=) '' \+/g,pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gt=/&(?:amp|lt|gt|quot|#39);/g,vt=/[&<>"']/g,mt=RegExp(gt.source),yt=RegExp(vt.source),bt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/,St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ct=/[\\^$.*+?()[\]{}|]/g,kt=RegExp(Ct.source),Mt=/^\s+/,Ot=/\s/,Tt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,At=/\{\n\/\* \[wrapped with (.+)\] \*/,Nt=/,? & /,It=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pt=/[()=,{}\[\]\/\s]/,Dt=/\\(\\)?/g,Lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rt=/\w*$/,jt=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Ft=/^\[object .+?Constructor\]$/,zt=/^0o[0-7]+$/i,$t=/^(?:0|[1-9]\d*)$/,Gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vt=/($^)/,Ut=/['\n\r\u2028\u2029\\]/g,Wt="\\ud800-\\udfff",Ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Yt="\\u2700-\\u27bf",Xt="a-z\\xdf-\\xf6\\xf8-\\xff",qt="A-Z\\xc0-\\xd6\\xd8-\\xde",Zt="\\ufe0e\\ufe0f",Kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jt="["+Wt+"]",Qt="["+Kt+"]",te="["+Ht+"]",ee="\\d+",ne="["+Yt+"]",re="["+Xt+"]",ie="[^"+Wt+Kt+ee+Yt+Xt+qt+"]",oe="\\ud83c[\\udffb-\\udfff]",ae="[^"+Wt+"]",se="(?:\\ud83c[\\udde6-\\uddff]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",ce="["+qt+"]",le="\\u200d",fe="(?:"+re+"|"+ie+")",de="(?:"+ce+"|"+ie+")",he="(?:['](?:d|ll|m|re|s|t|ve))?",pe="(?:['](?:D|LL|M|RE|S|T|VE))?",ge="(?:"+te+"|"+oe+")?",ve="["+Zt+"]?",me=ve+ge+"(?:"+le+"(?:"+[ae,se,ue].join("|")+")"+ve+ge+")*",ye="(?:"+[ne,se,ue].join("|")+")"+me,be="(?:"+[ae+te+"?",te,se,ue,Jt].join("|")+")",xe=RegExp("[']","g"),we=RegExp(te,"g"),_e=RegExp(oe+"(?="+oe+")|"+be+me,"g"),Ee=RegExp([ce+"?"+re+"+"+he+"(?="+[Qt,ce,"$"].join("|")+")",de+"+"+pe+"(?="+[Qt,ce+fe,"$"].join("|")+")",ce+"?"+fe+"+"+he,ce+"+"+pe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ee,ye].join("|"),"g"),Se=RegExp("["+le+Wt+Ht+Zt+"]"),Ce=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,Oe={};Oe[rt]=Oe[it]=Oe[ot]=Oe[at]=Oe[st]=Oe[ut]=Oe[ct]=Oe[lt]=Oe[ft]=!0,Oe[D]=Oe[L]=Oe[et]=Oe[j]=Oe[nt]=Oe[B]=Oe[z]=Oe[$]=Oe[V]=Oe[U]=Oe[H]=Oe[q]=Oe[Z]=Oe[K]=Oe[tt]=!1;var Te={};Te[D]=Te[L]=Te[et]=Te[nt]=Te[j]=Te[B]=Te[rt]=Te[it]=Te[ot]=Te[at]=Te[st]=Te[V]=Te[U]=Te[H]=Te[q]=Te[Z]=Te[K]=Te[J]=Te[ut]=Te[ct]=Te[lt]=Te[ft]=!0,Te[z]=Te[$]=Te[tt]=!1;var Ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ne=parseFloat,Ie=parseInt,Pe="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,De="object"==typeof self&&self&&self.Object===Object&&self,Le=Pe||De||Function("return this")(),Re=e&&!e.nodeType&&e,je=Re&&t&&!t.nodeType&&t,Be=je&&je.exports===Re,Fe=Be&&Pe.process,ze=function(){try{return je&&je.require&&je.require("util").types||Fe&&Fe.binding&&Fe.binding("util")}catch(t){}}(),$e=ze&&ze.isArrayBuffer,Ge=ze&&ze.isDate,Ve=ze&&ze.isMap,Ue=ze&&ze.isRegExp,We=ze&&ze.isSet,He=ze&&ze.isTypedArray;function Ye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Xe(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function qe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ze(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Je(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Qe(t,e){return!(null==t||!t.length)&&ln(t,e,0)>-1}function tn(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function en(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function nn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function rn(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function on(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function an(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var sn=pn("length");function un(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function cn(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function ln(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):cn(t,dn,n)}function fn(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function dn(t){return t!=t}function hn(t,e){var n=null==t?0:t.length;return n?mn(t,e)/n:T}function pn(t){return function(e){return null==e?i:e[t]}}function gn(t){return function(e){return null==t?i:t[e]}}function vn(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function mn(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function yn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function bn(t){return t?t.slice(0,Rn(t)+1).replace(Mt,""):t}function xn(t){return function(e){return t(e)}}function wn(t,e){return en(e,(function(e){return t[e]}))}function _n(t,e){return t.has(e)}function En(t,e){for(var n=-1,r=t.length;++n<r&&ln(e,t[n],0)>-1;);return n}function Sn(t,e){for(var n=t.length;n--&&ln(e,t[n],0)>-1;);return n}var Cn=gn({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),kn=gn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Mn(t){return"\\"+Ae[t]}function On(t){return Se.test(t)}function Tn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function An(t,e){return function(n){return t(e(n))}}function Nn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==u||(t[n]=u,o[i++]=n)}return o}function In(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Pn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Dn(t){return On(t)?function(t){for(var e=_e.lastIndex=0;_e.test(t);)++e;return e}(t):sn(t)}function Ln(t){return On(t)?function(t){return t.match(_e)||[]}(t):function(t){return t.split("")}(t)}function Rn(t){for(var e=t.length;e--&&Ot.test(t.charAt(e)););return e}var jn=gn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Bn=function t(e){var n,r=(e=null==e?Le:Bn.defaults(Le.Object(),e,Bn.pick(Le,ke))).Array,Ot=e.Date,Wt=e.Error,Ht=e.Function,Yt=e.Math,Xt=e.Object,qt=e.RegExp,Zt=e.String,Kt=e.TypeError,Jt=r.prototype,Qt=Ht.prototype,te=Xt.prototype,ee=e["__core-js_shared__"],ne=Qt.toString,re=te.hasOwnProperty,ie=0,oe=(n=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",ae=te.toString,se=ne.call(Xt),ue=Le._,ce=qt("^"+ne.call(re).replace(Ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),le=Be?e.Buffer:i,fe=e.Symbol,de=e.Uint8Array,he=le?le.allocUnsafe:i,pe=An(Xt.getPrototypeOf,Xt),ge=Xt.create,ve=te.propertyIsEnumerable,me=Jt.splice,ye=fe?fe.isConcatSpreadable:i,be=fe?fe.iterator:i,_e=fe?fe.toStringTag:i,Se=function(){try{var t=Po(Xt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ae=e.clearTimeout!==Le.clearTimeout&&e.clearTimeout,Pe=Ot&&Ot.now!==Le.Date.now&&Ot.now,De=e.setTimeout!==Le.setTimeout&&e.setTimeout,Re=Yt.ceil,je=Yt.floor,Fe=Xt.getOwnPropertySymbols,ze=le?le.isBuffer:i,sn=e.isFinite,gn=Jt.join,Fn=An(Xt.keys,Xt),zn=Yt.max,$n=Yt.min,Gn=Ot.now,Vn=e.parseInt,Un=Yt.random,Wn=Jt.reverse,Hn=Po(e,"DataView"),Yn=Po(e,"Map"),Xn=Po(e,"Promise"),qn=Po(e,"Set"),Zn=Po(e,"WeakMap"),Kn=Po(Xt,"create"),Jn=Zn&&new Zn,Qn={},tr=sa(Hn),er=sa(Yn),nr=sa(Xn),rr=sa(qn),ir=sa(Zn),or=fe?fe.prototype:i,ar=or?or.valueOf:i,sr=or?or.toString:i;function ur(t){if(Ss(t)&&!hs(t)&&!(t instanceof dr)){if(t instanceof fr)return t;if(re.call(t,"__wrapped__"))return ua(t)}return new fr(t)}var cr=function(){function t(){}return function(e){if(!Es(e))return{};if(ge)return ge(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function lr(){}function fr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function dr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=A,this.__views__=[]}function hr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function pr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function gr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function vr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new gr;++e<n;)this.add(t[e])}function mr(t){var e=this.__data__=new pr(t);this.size=e.size}function yr(t,e){var n=hs(t),r=!n&&ds(t),i=!n&&!r&&ms(t),o=!n&&!r&&!i&&Is(t),a=n||r||i||o,s=a?yn(t.length,Zt):[],u=s.length;for(var c in t)!e&&!re.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||zo(c,u))||s.push(c);return s}function br(t){var e=t.length;return e?t[gi(0,e-1)]:i}function xr(t,e){return na(Zi(t),Tr(e,0,t.length))}function wr(t){return na(Zi(t))}function _r(t,e,n){(n!==i&&!cs(t[e],n)||n===i&&!(e in t))&&Mr(t,e,n)}function Er(t,e,n){var r=t[e];re.call(t,e)&&cs(r,n)&&(n!==i||e in t)||Mr(t,e,n)}function Sr(t,e){for(var n=t.length;n--;)if(cs(t[n][0],e))return n;return-1}function Cr(t,e,n,r){return Dr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function kr(t,e){return t&&Ki(e,tu(e),t)}function Mr(t,e,n){"__proto__"==e&&Se?Se(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Or(t,e){for(var n=-1,o=e.length,a=r(o),s=null==t;++n<o;)a[n]=s?i:qs(t,e[n]);return a}function Tr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function Ar(t,e,n,r,o,a){var s,u=e&c,d=e&l,h=e&f;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!Es(t))return t;var p=hs(t);if(p){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&re.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Zi(t,s)}else{var g=Ro(t),v=g==$||g==G;if(ms(t))return Ui(t,u);if(g==H||g==D||v&&!o){if(s=d||v?{}:Bo(t),!u)return d?function(t,e){return Ki(t,Lo(t),e)}(t,function(t,e){return t&&Ki(e,eu(e),t)}(s,t)):function(t,e){return Ki(t,Do(t),e)}(t,kr(s,t))}else{if(!Te[g])return o?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case et:return Wi(t);case j:case B:return new i(+t);case nt:return function(t,e){var n=e?Wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case rt:case it:case ot:case at:case st:case ut:case ct:case lt:case ft:return Hi(t,n);case V:return new i;case U:case K:return new i(t);case q:return function(t){var e=new t.constructor(t.source,Rt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case Z:return new i;case J:return r=t,ar?Xt(ar.call(r)):{}}}(t,g,u)}}a||(a=new mr);var m=a.get(t);if(m)return m;a.set(t,s),Ts(t)?t.forEach((function(r){s.add(Ar(r,e,n,r,t,a))})):Cs(t)&&t.forEach((function(r,i){s.set(i,Ar(r,e,n,i,t,a))}));var y=p?i:(h?d?ko:Co:d?eu:tu)(t);return qe(y||t,(function(r,i){y&&(r=t[i=r]),Er(s,i,Ar(r,e,n,i,t,a))})),s}function Nr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Xt(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function Ir(t,e,n){if("function"!=typeof t)throw new Kt(a);return Jo((function(){t.apply(i,n)}),e)}function Pr(t,e,n,r){var i=-1,a=Qe,s=!0,u=t.length,c=[],l=e.length;if(!u)return c;n&&(e=en(e,xn(n))),r?(a=tn,s=!1):e.length>=o&&(a=_n,s=!1,e=new vr(e));t:for(;++i<u;){var f=t[i],d=null==n?f:n(f);if(f=r||0!==f?f:0,s&&d==d){for(var h=l;h--;)if(e[h]===d)continue t;c.push(f)}else a(e,d,r)||c.push(f)}return c}ur.templateSettings={escape:bt,evaluate:xt,interpolate:wt,variable:"",imports:{_:ur}},ur.prototype=lr.prototype,ur.prototype.constructor=ur,fr.prototype=cr(lr.prototype),fr.prototype.constructor=fr,dr.prototype=cr(lr.prototype),dr.prototype.constructor=dr,hr.prototype.clear=function(){this.__data__=Kn?Kn(null):{},this.size=0},hr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},hr.prototype.get=function(t){var e=this.__data__;if(Kn){var n=e[t];return n===s?i:n}return re.call(e,t)?e[t]:i},hr.prototype.has=function(t){var e=this.__data__;return Kn?e[t]!==i:re.call(e,t)},hr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Kn&&e===i?s:e,this},pr.prototype.clear=function(){this.__data__=[],this.size=0},pr.prototype.delete=function(t){var e=this.__data__,n=Sr(e,t);return!(n<0||(n==e.length-1?e.pop():me.call(e,n,1),--this.size,0))},pr.prototype.get=function(t){var e=this.__data__,n=Sr(e,t);return n<0?i:e[n][1]},pr.prototype.has=function(t){return Sr(this.__data__,t)>-1},pr.prototype.set=function(t,e){var n=this.__data__,r=Sr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},gr.prototype.clear=function(){this.size=0,this.__data__={hash:new hr,map:new(Yn||pr),string:new hr}},gr.prototype.delete=function(t){var e=No(this,t).delete(t);return this.size-=e?1:0,e},gr.prototype.get=function(t){return No(this,t).get(t)},gr.prototype.has=function(t){return No(this,t).has(t)},gr.prototype.set=function(t,e){var n=No(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},vr.prototype.add=vr.prototype.push=function(t){return this.__data__.set(t,s),this},vr.prototype.has=function(t){return this.__data__.has(t)},mr.prototype.clear=function(){this.__data__=new pr,this.size=0},mr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},mr.prototype.get=function(t){return this.__data__.get(t)},mr.prototype.has=function(t){return this.__data__.has(t)},mr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof pr){var r=n.__data__;if(!Yn||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new gr(r)}return n.set(t,e),this.size=n.size,this};var Dr=to(Gr),Lr=to(Vr,!0);function Rr(t,e){var n=!0;return Dr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function jr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(u===i?s==s&&!Ns(s):n(s,u)))var u=s,c=a}return c}function Br(t,e){var n=[];return Dr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Fr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Fo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Fr(s,e-1,n,r,i):nn(i,s):r||(i[i.length]=s)}return i}var zr=eo(),$r=eo(!0);function Gr(t,e){return t&&zr(t,e,tu)}function Vr(t,e){return t&&$r(t,e,tu)}function Ur(t,e){return Je(e,(function(e){return xs(t[e])}))}function Wr(t,e){for(var n=0,r=(e=zi(e,t)).length;null!=t&&n<r;)t=t[aa(e[n++])];return n&&n==r?t:i}function Hr(t,e,n){var r=e(t);return hs(t)?r:nn(r,n(t))}function Yr(t){return null==t?t===i?Q:W:_e&&_e in Xt(t)?function(t){var e=re.call(t,_e),n=t[_e];try{t[_e]=i;var r=!0}catch(t){}var o=ae.call(t);return r&&(e?t[_e]=n:delete t[_e]),o}(t):function(t){return ae.call(t)}(t)}function Xr(t,e){return t>e}function qr(t,e){return null!=t&&re.call(t,e)}function Zr(t,e){return null!=t&&e in Xt(t)}function Kr(t,e,n){for(var o=n?tn:Qe,a=t[0].length,s=t.length,u=s,c=r(s),l=1/0,f=[];u--;){var d=t[u];u&&e&&(d=en(d,xn(e))),l=$n(d.length,l),c[u]=!n&&(e||a>=120&&d.length>=120)?new vr(u&&d):i}d=t[0];var h=-1,p=c[0];t:for(;++h<a&&f.length<l;){var g=d[h],v=e?e(g):g;if(g=n||0!==g?g:0,!(p?_n(p,v):o(f,v,n))){for(u=s;--u;){var m=c[u];if(!(m?_n(m,v):o(t[u],v,n)))continue t}p&&p.push(v),f.push(g)}}return f}function Jr(t,e,n){var r=null==(t=qo(t,e=zi(e,t)))?t:t[aa(ba(e))];return null==r?i:Ye(r,t,n)}function Qr(t){return Ss(t)&&Yr(t)==D}function ti(t,e,n,r,o){return t===e||(null==t||null==e||!Ss(t)&&!Ss(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var s=hs(t),u=hs(e),c=s?L:Ro(t),l=u?L:Ro(e),f=(c=c==D?H:c)==H,p=(l=l==D?H:l)==H,g=c==l;if(g&&ms(t)){if(!ms(e))return!1;s=!0,f=!1}if(g&&!f)return a||(a=new mr),s||Is(t)?Eo(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case nt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case et:return!(t.byteLength!=e.byteLength||!o(new de(t),new de(e)));case j:case B:case U:return cs(+t,+e);case z:return t.name==e.name&&t.message==e.message;case q:case K:return t==e+"";case V:var s=Tn;case Z:var u=r&d;if(s||(s=In),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=h,a.set(t,e);var l=Eo(s(t),s(e),r,i,o,a);return a.delete(t),l;case J:if(ar)return ar.call(t)==ar.call(e)}return!1}(t,e,c,n,r,o,a);if(!(n&d)){var v=f&&re.call(t,"__wrapped__"),m=p&&re.call(e,"__wrapped__");if(v||m){var y=v?t.value():t,b=m?e.value():e;return a||(a=new mr),o(y,b,n,r,a)}}return!!g&&(a||(a=new mr),function(t,e,n,r,o,a){var s=n&d,u=Co(t),c=u.length;if(c!=Co(e).length&&!s)return!1;for(var l=c;l--;){var f=u[l];if(!(s?f in e:re.call(e,f)))return!1}var h=a.get(t),p=a.get(e);if(h&&p)return h==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var v=s;++l<c;){var m=t[f=u[l]],y=e[f];if(r)var b=s?r(y,m,f,e,t,a):r(m,y,f,t,e,a);if(!(b===i?m===y||o(m,y,n,r,a):b)){g=!1;break}v||(v="constructor"==f)}if(g&&!v){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}(t,e,n,r,o,a))}(t,e,n,r,ti,o))}function ei(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=Xt(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var c=(u=n[o])[0],l=t[c],f=u[1];if(s&&u[2]){if(l===i&&!(c in t))return!1}else{var p=new mr;if(r)var g=r(l,f,c,t,e,p);if(!(g===i?ti(f,l,d|h,r,p):g))return!1}}return!0}function ni(t){return!(!Es(t)||(e=t,oe&&oe in e))&&(xs(t)?ce:Ft).test(sa(t));var e}function ri(t){return"function"==typeof t?t:null==t?ku:"object"==typeof t?hs(t)?ui(t[0],t[1]):si(t):Lu(t)}function ii(t){if(!Wo(t))return Fn(t);var e=[];for(var n in Xt(t))re.call(t,n)&&"constructor"!=n&&e.push(n);return e}function oi(t,e){return t<e}function ai(t,e){var n=-1,i=gs(t)?r(t.length):[];return Dr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function si(t){var e=Io(t);return 1==e.length&&e[0][2]?Yo(e[0][0],e[0][1]):function(n){return n===t||ei(n,t,e)}}function ui(t,e){return Go(t)&&Ho(e)?Yo(aa(t),e):function(n){var r=qs(n,t);return r===i&&r===e?Zs(n,t):ti(e,r,d|h)}}function ci(t,e,n,r,o){t!==e&&zr(e,(function(a,s){if(o||(o=new mr),Es(a))!function(t,e,n,r,o,a,s){var u=Zo(t,n),c=Zo(e,n),l=s.get(c);if(l)_r(t,n,l);else{var f=a?a(u,c,n+"",t,e,s):i,d=f===i;if(d){var h=hs(c),p=!h&&ms(c),g=!h&&!p&&Is(c);f=c,h||p||g?hs(u)?f=u:vs(u)?f=Zi(u):p?(d=!1,f=Ui(c,!0)):g?(d=!1,f=Hi(c,!0)):f=[]:Ms(c)||ds(c)?(f=u,ds(u)?f=zs(u):Es(u)&&!xs(u)||(f=Bo(c))):d=!1}d&&(s.set(c,f),o(f,c,r,a,s),s.delete(c)),_r(t,n,f)}}(t,e,s,n,ci,r,o);else{var u=r?r(Zo(t,s),a,s+"",t,e,o):i;u===i&&(u=a),_r(t,s,u)}}),eu)}function li(t,e){var n=t.length;if(n)return zo(e+=e<0?n:0,n)?t[e]:i}function fi(t,e,n){e=e.length?en(e,(function(t){return hs(t)?function(e){return Wr(e,1===t.length?t[0]:t)}:t})):[ku];var r=-1;e=en(e,xn(Ao()));var i=ai(t,(function(t,n,i){var o=en(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Yi(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function di(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Wr(t,a);n(s,a)&&xi(o,zi(a,t),s)}return o}function hi(t,e,n,r){var i=r?fn:ln,o=-1,a=e.length,s=t;for(t===e&&(e=Zi(e)),n&&(s=en(t,xn(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&me.call(s,u,1),me.call(t,u,1);return t}function pi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;zo(i)?me.call(t,i,1):Ii(t,i)}}return t}function gi(t,e){return t+je(Un()*(e-t+1))}function vi(t,e){var n="";if(!t||e<1||e>M)return n;do{e%2&&(n+=t),(e=je(e/2))&&(t+=t)}while(e);return n}function mi(t,e){return Qo(Xo(t,e,ku),t+"")}function yi(t){return br(cu(t))}function bi(t,e){var n=cu(t);return na(n,Tr(e,0,n.length))}function xi(t,e,n,r){if(!Es(t))return t;for(var o=-1,a=(e=zi(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var c=aa(e[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var f=u[c];(l=r?r(f,c,u):i)===i&&(l=Es(f)?f:zo(e[o+1])?[]:{})}Er(u,c,l),u=u[c]}return t}var wi=Jn?function(t,e){return Jn.set(t,e),t}:ku,_i=Se?function(t,e){return Se(t,"toString",{configurable:!0,enumerable:!1,value:Eu(e),writable:!0})}:ku;function Ei(t){return na(cu(t))}function Si(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function Ci(t,e){var n;return Dr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ki(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=I){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Ns(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Mi(t,e,ku,n)}function Mi(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,c=Ns(e),l=e===i;o<a;){var f=je((o+a)/2),d=n(t[f]),h=d!==i,p=null===d,g=d==d,v=Ns(d);if(s)var m=r||g;else m=l?g&&(r||h):u?g&&h&&(r||!p):c?g&&h&&!p&&(r||!v):!p&&!v&&(r?d<=e:d<e);m?o=f+1:a=f}return $n(a,N)}function Oi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!cs(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Ti(t){return"number"==typeof t?t:Ns(t)?T:+t}function Ai(t){if("string"==typeof t)return t;if(hs(t))return en(t,Ai)+"";if(Ns(t))return sr?sr.call(t):"";var e=t+"";return"0"==e&&1/t==-k?"-0":e}function Ni(t,e,n){var r=-1,i=Qe,a=t.length,s=!0,u=[],c=u;if(n)s=!1,i=tn;else if(a>=o){var l=e?null:mo(t);if(l)return In(l);s=!1,i=_n,c=new vr}else c=e?[]:u;t:for(;++r<a;){var f=t[r],d=e?e(f):f;if(f=n||0!==f?f:0,s&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue t;e&&c.push(d),u.push(f)}else i(c,d,n)||(c!==u&&c.push(d),u.push(f))}return u}function Ii(t,e){return null==(t=qo(t,e=zi(e,t)))||delete t[aa(ba(e))]}function Pi(t,e,n,r){return xi(t,e,n(Wr(t,e)),r)}function Di(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Si(t,r?0:o,r?o+1:i):Si(t,r?o+1:0,r?i:o)}function Li(t,e){var n=t;return n instanceof dr&&(n=n.value()),rn(e,(function(t,e){return e.func.apply(e.thisArg,nn([t],e.args))}),n)}function Ri(t,e,n){var i=t.length;if(i<2)return i?Ni(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=Pr(a[o]||s,t[u],e,n));return Ni(Fr(a,1),e,n)}function ji(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var u=r<a?e[r]:i;n(s,t[r],u)}return s}function Bi(t){return vs(t)?t:[]}function Fi(t){return"function"==typeof t?t:ku}function zi(t,e){return hs(t)?t:Go(t,e)?[t]:oa($s(t))}var $i=mi;function Gi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:Si(t,e,n)}var Vi=Ae||function(t){return Le.clearTimeout(t)};function Ui(t,e){if(e)return t.slice();var n=t.length,r=he?he(n):new t.constructor(n);return t.copy(r),r}function Wi(t){var e=new t.constructor(t.byteLength);return new de(e).set(new de(t)),e}function Hi(t,e){var n=e?Wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Yi(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=Ns(t),s=e!==i,u=null===e,c=e==e,l=Ns(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!l&&t<e||l&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function Xi(t,e,n,i){for(var o=-1,a=t.length,s=n.length,u=-1,c=e.length,l=zn(a-s,0),f=r(c+l),d=!i;++u<c;)f[u]=e[u];for(;++o<s;)(d||o<a)&&(f[n[o]]=t[o]);for(;l--;)f[u++]=t[o++];return f}function qi(t,e,n,i){for(var o=-1,a=t.length,s=-1,u=n.length,c=-1,l=e.length,f=zn(a-u,0),d=r(f+l),h=!i;++o<f;)d[o]=t[o];for(var p=o;++c<l;)d[p+c]=e[c];for(;++s<u;)(h||o<a)&&(d[p+n[s]]=t[o++]);return d}function Zi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ki(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?Mr(n,u,c):Er(n,u,c)}return n}function Ji(t,e){return function(n,r){var i=hs(n)?Xe:Cr,o=e?e():{};return i(n,t,Ao(r,2),o)}}function Qi(t){return mi((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&$o(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=Xt(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e}))}function to(t,e){return function(n,r){if(null==n)return n;if(!gs(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Xt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function eo(t){return function(e,n,r){for(var i=-1,o=Xt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function no(t){return function(e){var n=On(e=$s(e))?Ln(e):i,r=n?n[0]:e.charAt(0),o=n?Gi(n,1).join(""):e.slice(1);return r[t]()+o}}function ro(t){return function(e){return rn(xu(du(e).replace(xe,"")),t,"")}}function io(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=cr(t.prototype),r=t.apply(n,e);return Es(r)?r:n}}function oo(t){return function(e,n,r){var o=Xt(e);if(!gs(e)){var a=Ao(n,3);e=tu(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function ao(t){return So((function(e){var n=e.length,r=n,o=fr.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Kt(a);if(o&&!u&&"wrapper"==Oo(s))var u=new fr([],!0)}for(r=u?r:n;++r<n;){var c=Oo(s=e[r]),l="wrapper"==c?Mo(s):i;u=l&&Vo(l[0])&&l[1]==(w|m|b|_)&&!l[4].length&&1==l[9]?u[Oo(l[0])].apply(u,l[3]):1==s.length&&Vo(s)?u[c]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&hs(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function so(t,e,n,o,a,s,u,c,l,f){var d=e&w,h=e&p,v=e&g,b=e&(m|y),x=e&E,_=v?i:io(t);return function p(){for(var g=arguments.length,m=r(g),y=g;y--;)m[y]=arguments[y];if(b)var w=To(p),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(m,w);if(o&&(m=Xi(m,o,a,b)),s&&(m=qi(m,s,u,b)),g-=E,b&&g<f){var S=Nn(m,w);return go(t,e,so,p.placeholder,n,m,S,c,l,f-g)}var C=h?n:this,k=v?C[t]:t;return g=m.length,c?m=function(t,e){for(var n=t.length,r=$n(e.length,n),o=Zi(t);r--;){var a=e[r];t[r]=zo(a,n)?o[a]:i}return t}(m,c):x&&g>1&&m.reverse(),d&&l<g&&(m.length=l),this&&this!==Le&&this instanceof p&&(k=_||io(k)),k.apply(C,m)}}function uo(t,e){return function(n,r){return function(t,e,n,r){return Gr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function co(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=Ai(n),r=Ai(r)):(n=Ti(n),r=Ti(r)),o=t(n,r)}return o}}function lo(t){return So((function(e){return e=en(e,xn(Ao())),mi((function(n){var r=this;return t(e,(function(t){return Ye(t,r,n)}))}))}))}function fo(t,e){var n=(e=e===i?" ":Ai(e)).length;if(n<2)return n?vi(e,t):e;var r=vi(e,Re(t/Dn(e)));return On(e)?Gi(Ln(r),0,t).join(""):r.slice(0,t)}function ho(t){return function(e,n,o){return o&&"number"!=typeof o&&$o(e,n,o)&&(n=o=i),e=Rs(e),n===i?(n=e,e=0):n=Rs(n),function(t,e,n,i){for(var o=-1,a=zn(Re((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:Rs(o),t)}}function po(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Fs(e),n=Fs(n)),t(e,n)}}function go(t,e,n,r,o,a,s,u,c,l){var f=e&m;e|=f?b:x,(e&=~(f?x:b))&v||(e&=~(p|g));var d=[t,e,o,f?a:i,f?s:i,f?i:a,f?i:s,u,c,l],h=n.apply(i,d);return Vo(t)&&Ko(h,d),h.placeholder=r,ta(h,t,e)}function vo(t){var e=Yt[t];return function(t,n){if(t=Fs(t),(n=null==n?0:$n(js(n),292))&&sn(t)){var r=($s(t)+"e").split("e");return+((r=($s(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var mo=qn&&1/In(new qn([,-0]))[1]==k?function(t){return new qn(t)}:Nu;function yo(t){return function(e){var n=Ro(e);return n==V?Tn(e):n==Z?Pn(e):function(t,e){return en(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function bo(t,e,n,o,s,c,l,f){var d=e&g;if(!d&&"function"!=typeof t)throw new Kt(a);var h=o?o.length:0;if(h||(e&=~(b|x),o=s=i),l=l===i?l:zn(js(l),0),f=f===i?f:js(f),h-=s?s.length:0,e&x){var E=o,S=s;o=s=i}var C=d?i:Mo(t),k=[t,e,n,o,s,E,S,c,l,f];if(C&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(p|g|w),a=r==w&&n==m||r==w&&n==_&&t[7].length<=e[8]||r==(w|_)&&e[7].length<=e[8]&&n==m;if(!o&&!a)return t;r&p&&(t[2]=e[2],i|=n&p?0:v);var s=e[3];if(s){var c=t[3];t[3]=c?Xi(c,s,e[4]):s,t[4]=c?Nn(t[3],u):e[4]}(s=e[5])&&(c=t[5],t[5]=c?qi(c,s,e[6]):s,t[6]=c?Nn(t[5],u):e[6]),(s=e[7])&&(t[7]=s),r&w&&(t[8]=null==t[8]?e[8]:$n(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(k,C),t=k[0],e=k[1],n=k[2],o=k[3],s=k[4],!(f=k[9]=k[9]===i?d?0:t.length:zn(k[9]-h,0))&&e&(m|y)&&(e&=~(m|y)),e&&e!=p)M=e==m||e==y?function(t,e,n){var o=io(t);return function a(){for(var s=arguments.length,u=r(s),c=s,l=To(a);c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:Nn(u,l);return(s-=f.length)<n?go(t,e,so,a.placeholder,i,u,f,i,i,n-s):Ye(this&&this!==Le&&this instanceof a?o:t,this,u)}}(t,e,f):e!=b&&e!=(p|b)||s.length?so.apply(i,k):function(t,e,n,i){var o=e&p,a=io(t);return function e(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=r(l+u),d=this&&this!==Le&&this instanceof e?a:t;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return Ye(d,o?n:this,f)}}(t,e,n,o);else var M=function(t,e,n){var r=e&p,i=io(t);return function e(){return(this&&this!==Le&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return ta((C?wi:Ko)(M,k),t,e)}function xo(t,e,n,r){return t===i||cs(t,te[n])&&!re.call(r,n)?e:t}function wo(t,e,n,r,o,a){return Es(t)&&Es(e)&&(a.set(e,t),ci(t,e,i,wo,a),a.delete(e)),t}function _o(t){return Ms(t)?i:t}function Eo(t,e,n,r,o,a){var s=n&d,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(t),f=a.get(e);if(l&&f)return l==e&&f==t;var p=-1,g=!0,v=n&h?new vr:i;for(a.set(t,e),a.set(e,t);++p<u;){var m=t[p],y=e[p];if(r)var b=s?r(y,m,p,e,t,a):r(m,y,p,t,e,a);if(b!==i){if(b)continue;g=!1;break}if(v){if(!an(e,(function(t,e){if(!_n(v,e)&&(m===t||o(m,t,n,r,a)))return v.push(e)}))){g=!1;break}}else if(m!==y&&!o(m,y,n,r,a)){g=!1;break}}return a.delete(t),a.delete(e),g}function So(t){return Qo(Xo(t,i,pa),t+"")}function Co(t){return Hr(t,tu,Do)}function ko(t){return Hr(t,eu,Lo)}var Mo=Jn?function(t){return Jn.get(t)}:Nu;function Oo(t){for(var e=t.name+"",n=Qn[e],r=re.call(Qn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function To(t){return(re.call(ur,"placeholder")?ur:t).placeholder}function Ao(){var t=ur.iteratee||Mu;return t=t===Mu?ri:t,arguments.length?t(arguments[0],arguments[1]):t}function No(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Io(t){for(var e=tu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ho(i)]}return e}function Po(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return ni(n)?n:i}var Do=Fe?function(t){return null==t?[]:(t=Xt(t),Je(Fe(t),(function(e){return ve.call(t,e)})))}:Bu,Lo=Fe?function(t){for(var e=[];t;)nn(e,Do(t)),t=pe(t);return e}:Bu,Ro=Yr;function jo(t,e,n){for(var r=-1,i=(e=zi(e,t)).length,o=!1;++r<i;){var a=aa(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&_s(i)&&zo(a,i)&&(hs(t)||ds(t))}function Bo(t){return"function"!=typeof t.constructor||Wo(t)?{}:cr(pe(t))}function Fo(t){return hs(t)||ds(t)||!!(ye&&t&&t[ye])}function zo(t,e){var n=typeof t;return!!(e=null==e?M:e)&&("number"==n||"symbol"!=n&&$t.test(t))&&t>-1&&t%1==0&&t<e}function $o(t,e,n){if(!Es(n))return!1;var r=typeof e;return!!("number"==r?gs(n)&&zo(e,n.length):"string"==r&&e in n)&&cs(n[e],t)}function Go(t,e){if(hs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ns(t))||Et.test(t)||!_t.test(t)||null!=e&&t in Xt(e)}function Vo(t){var e=Oo(t),n=ur[e];if("function"!=typeof n||!(e in dr.prototype))return!1;if(t===n)return!0;var r=Mo(n);return!!r&&t===r[0]}(Hn&&Ro(new Hn(new ArrayBuffer(1)))!=nt||Yn&&Ro(new Yn)!=V||Xn&&Ro(Xn.resolve())!=Y||qn&&Ro(new qn)!=Z||Zn&&Ro(new Zn)!=tt)&&(Ro=function(t){var e=Yr(t),n=e==H?t.constructor:i,r=n?sa(n):"";if(r)switch(r){case tr:return nt;case er:return V;case nr:return Y;case rr:return Z;case ir:return tt}return e});var Uo=ee?xs:Fu;function Wo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||te)}function Ho(t){return t==t&&!Es(t)}function Yo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Xt(n))}}function Xo(t,e,n){return e=zn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=zn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(s),Ye(t,this,u)}}function qo(t,e){return e.length<2?t:Wr(t,Si(e,0,-1))}function Zo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ko=ea(wi),Jo=De||function(t,e){return Le.setTimeout(t,e)},Qo=ea(_i);function ta(t,e,n){var r=e+"";return Qo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Tt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return qe(P,(function(n){var r="_."+n[0];e&n[1]&&!Qe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(At);return e?e[1].split(Nt):[]}(r),n)))}function ea(t){var e=0,n=0;return function(){var r=Gn(),o=C-(r-n);if(n=r,o>0){if(++e>=S)return arguments[0]}else e=0;return t.apply(i,arguments)}}function na(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=gi(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var ra,ia,oa=(ra=rs((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(St,(function(t,n,r,i){e.push(r?i.replace(Dt,"$1"):n||t)})),e}),(function(t){return 500===ia.size&&ia.clear(),t})),ia=ra.cache,ra);function aa(t){if("string"==typeof t||Ns(t))return t;var e=t+"";return"0"==e&&1/t==-k?"-0":e}function sa(t){if(null!=t){try{return ne.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ua(t){if(t instanceof dr)return t.clone();var e=new fr(t.__wrapped__,t.__chain__);return e.__actions__=Zi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ca=mi((function(t,e){return vs(t)?Pr(t,Fr(e,1,vs,!0)):[]})),la=mi((function(t,e){var n=ba(e);return vs(n)&&(n=i),vs(t)?Pr(t,Fr(e,1,vs,!0),Ao(n,2)):[]})),fa=mi((function(t,e){var n=ba(e);return vs(n)&&(n=i),vs(t)?Pr(t,Fr(e,1,vs,!0),i,n):[]}));function da(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:js(n);return i<0&&(i=zn(r+i,0)),cn(t,Ao(e,3),i)}function ha(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=js(n),o=n<0?zn(r+o,0):$n(o,r-1)),cn(t,Ao(e,3),o,!0)}function pa(t){return null!=t&&t.length?Fr(t,1):[]}function ga(t){return t&&t.length?t[0]:i}var va=mi((function(t){var e=en(t,Bi);return e.length&&e[0]===t[0]?Kr(e):[]})),ma=mi((function(t){var e=ba(t),n=en(t,Bi);return e===ba(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Kr(n,Ao(e,2)):[]})),ya=mi((function(t){var e=ba(t),n=en(t,Bi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Kr(n,i,e):[]}));function ba(t){var e=null==t?0:t.length;return e?t[e-1]:i}var xa=mi(wa);function wa(t,e){return t&&t.length&&e&&e.length?hi(t,e):t}var _a=So((function(t,e){var n=null==t?0:t.length,r=Or(t,e);return pi(t,en(e,(function(t){return zo(t,n)?+t:t})).sort(Yi)),r}));function Ea(t){return null==t?t:Wn.call(t)}var Sa=mi((function(t){return Ni(Fr(t,1,vs,!0))})),Ca=mi((function(t){var e=ba(t);return vs(e)&&(e=i),Ni(Fr(t,1,vs,!0),Ao(e,2))})),ka=mi((function(t){var e=ba(t);return e="function"==typeof e?e:i,Ni(Fr(t,1,vs,!0),i,e)}));function Ma(t){if(!t||!t.length)return[];var e=0;return t=Je(t,(function(t){if(vs(t))return e=zn(t.length,e),!0})),yn(e,(function(e){return en(t,pn(e))}))}function Oa(t,e){if(!t||!t.length)return[];var n=Ma(t);return null==e?n:en(n,(function(t){return Ye(e,i,t)}))}var Ta=mi((function(t,e){return vs(t)?Pr(t,e):[]})),Aa=mi((function(t){return Ri(Je(t,vs))})),Na=mi((function(t){var e=ba(t);return vs(e)&&(e=i),Ri(Je(t,vs),Ao(e,2))})),Ia=mi((function(t){var e=ba(t);return e="function"==typeof e?e:i,Ri(Je(t,vs),i,e)})),Pa=mi(Ma),Da=mi((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,Oa(t,n)}));function La(t){var e=ur(t);return e.__chain__=!0,e}function Ra(t,e){return e(t)}var ja=So((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return Or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof dr&&zo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Ra,args:[o],thisArg:i}),new fr(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),Ba=Ji((function(t,e,n){re.call(t,n)?++t[n]:Mr(t,n,1)})),Fa=oo(da),za=oo(ha);function $a(t,e){return(hs(t)?qe:Dr)(t,Ao(e,3))}function Ga(t,e){return(hs(t)?Ze:Lr)(t,Ao(e,3))}var Va=Ji((function(t,e,n){re.call(t,n)?t[n].push(e):Mr(t,n,[e])})),Ua=mi((function(t,e,n){var i=-1,o="function"==typeof e,a=gs(t)?r(t.length):[];return Dr(t,(function(t){a[++i]=o?Ye(e,t,n):Jr(t,e,n)})),a})),Wa=Ji((function(t,e,n){Mr(t,n,e)}));function Ha(t,e){return(hs(t)?en:ai)(t,Ao(e,3))}var Ya=Ji((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Xa=mi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&$o(t,e[0],e[1])?e=[]:n>2&&$o(e[0],e[1],e[2])&&(e=[e[0]]),fi(t,Fr(e,1),[])})),qa=Pe||function(){return Le.Date.now()};function Za(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,bo(t,w,i,i,i,i,e)}function Ka(t,e){var n;if("function"!=typeof e)throw new Kt(a);return t=js(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ja=mi((function(t,e,n){var r=p;if(n.length){var i=Nn(n,To(Ja));r|=b}return bo(t,r,e,n,i)})),Qa=mi((function(t,e,n){var r=p|g;if(n.length){var i=Nn(n,To(Qa));r|=b}return bo(e,r,t,n,i)}));function ts(t,e,n){var r,o,s,u,c,l,f=0,d=!1,h=!1,p=!0;if("function"!=typeof t)throw new Kt(a);function g(e){var n=r,a=o;return r=o=i,f=e,u=t.apply(a,n)}function v(t){var n=t-l;return l===i||n>=e||n<0||h&&t-f>=s}function m(){var t=qa();if(v(t))return y(t);c=Jo(m,function(t){var n=e-(t-l);return h?$n(n,s-(t-f)):n}(t))}function y(t){return c=i,p&&r?g(t):(r=o=i,u)}function b(){var t=qa(),n=v(t);if(r=arguments,o=this,l=t,n){if(c===i)return function(t){return f=t,c=Jo(m,e),d?g(t):u}(l);if(h)return Vi(c),c=Jo(m,e),g(l)}return c===i&&(c=Jo(m,e)),u}return e=Fs(e)||0,Es(n)&&(d=!!n.leading,s=(h="maxWait"in n)?zn(Fs(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){c!==i&&Vi(c),f=0,r=l=o=c=i},b.flush=function(){return c===i?u:y(qa())},b}var es=mi((function(t,e){return Ir(t,1,e)})),ns=mi((function(t,e,n){return Ir(t,Fs(e)||0,n)}));function rs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Kt(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(rs.Cache||gr),n}function is(t){if("function"!=typeof t)throw new Kt(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}rs.Cache=gr;var os=$i((function(t,e){var n=(e=1==e.length&&hs(e[0])?en(e[0],xn(Ao())):en(Fr(e,1),xn(Ao()))).length;return mi((function(r){for(var i=-1,o=$n(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ye(t,this,r)}))})),as=mi((function(t,e){var n=Nn(e,To(as));return bo(t,b,i,e,n)})),ss=mi((function(t,e){var n=Nn(e,To(ss));return bo(t,x,i,e,n)})),us=So((function(t,e){return bo(t,_,i,i,i,e)}));function cs(t,e){return t===e||t!=t&&e!=e}var ls=po(Xr),fs=po((function(t,e){return t>=e})),ds=Qr(function(){return arguments}())?Qr:function(t){return Ss(t)&&re.call(t,"callee")&&!ve.call(t,"callee")},hs=r.isArray,ps=$e?xn($e):function(t){return Ss(t)&&Yr(t)==et};function gs(t){return null!=t&&_s(t.length)&&!xs(t)}function vs(t){return Ss(t)&&gs(t)}var ms=ze||Fu,ys=Ge?xn(Ge):function(t){return Ss(t)&&Yr(t)==B};function bs(t){if(!Ss(t))return!1;var e=Yr(t);return e==z||e==F||"string"==typeof t.message&&"string"==typeof t.name&&!Ms(t)}function xs(t){if(!Es(t))return!1;var e=Yr(t);return e==$||e==G||e==R||e==X}function ws(t){return"number"==typeof t&&t==js(t)}function _s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=M}function Es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ss(t){return null!=t&&"object"==typeof t}var Cs=Ve?xn(Ve):function(t){return Ss(t)&&Ro(t)==V};function ks(t){return"number"==typeof t||Ss(t)&&Yr(t)==U}function Ms(t){if(!Ss(t)||Yr(t)!=H)return!1;var e=pe(t);if(null===e)return!0;var n=re.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ne.call(n)==se}var Os=Ue?xn(Ue):function(t){return Ss(t)&&Yr(t)==q},Ts=We?xn(We):function(t){return Ss(t)&&Ro(t)==Z};function As(t){return"string"==typeof t||!hs(t)&&Ss(t)&&Yr(t)==K}function Ns(t){return"symbol"==typeof t||Ss(t)&&Yr(t)==J}var Is=He?xn(He):function(t){return Ss(t)&&_s(t.length)&&!!Oe[Yr(t)]},Ps=po(oi),Ds=po((function(t,e){return t<=e}));function Ls(t){if(!t)return[];if(gs(t))return As(t)?Ln(t):Zi(t);if(be&&t[be])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[be]());var e=Ro(t);return(e==V?Tn:e==Z?In:cu)(t)}function Rs(t){return t?(t=Fs(t))===k||t===-k?(t<0?-1:1)*O:t==t?t:0:0===t?t:0}function js(t){var e=Rs(t),n=e%1;return e==e?n?e-n:e:0}function Bs(t){return t?Tr(js(t),0,A):0}function Fs(t){if("number"==typeof t)return t;if(Ns(t))return T;if(Es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=bn(t);var n=Bt.test(t);return n||zt.test(t)?Ie(t.slice(2),n?2:8):jt.test(t)?T:+t}function zs(t){return Ki(t,eu(t))}function $s(t){return null==t?"":Ai(t)}var Gs=Qi((function(t,e){if(Wo(e)||gs(e))Ki(e,tu(e),t);else for(var n in e)re.call(e,n)&&Er(t,n,e[n])})),Vs=Qi((function(t,e){Ki(e,eu(e),t)})),Us=Qi((function(t,e,n,r){Ki(e,eu(e),t,r)})),Ws=Qi((function(t,e,n,r){Ki(e,tu(e),t,r)})),Hs=So(Or),Ys=mi((function(t,e){t=Xt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&$o(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=eu(a),u=-1,c=s.length;++u<c;){var l=s[u],f=t[l];(f===i||cs(f,te[l])&&!re.call(t,l))&&(t[l]=a[l])}return t})),Xs=mi((function(t){return t.push(i,wo),Ye(ru,i,t)}));function qs(t,e,n){var r=null==t?i:Wr(t,e);return r===i?n:r}function Zs(t,e){return null!=t&&jo(t,e,Zr)}var Ks=uo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ae.call(e)),t[e]=n}),Eu(ku)),Js=uo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ae.call(e)),re.call(t,e)?t[e].push(n):t[e]=[n]}),Ao),Qs=mi(Jr);function tu(t){return gs(t)?yr(t):ii(t)}function eu(t){return gs(t)?yr(t,!0):function(t){if(!Es(t))return function(t){var e=[];if(null!=t)for(var n in Xt(t))e.push(n);return e}(t);var e=Wo(t),n=[];for(var r in t)("constructor"!=r||!e&&re.call(t,r))&&n.push(r);return n}(t)}var nu=Qi((function(t,e,n){ci(t,e,n)})),ru=Qi((function(t,e,n,r){ci(t,e,n,r)})),iu=So((function(t,e){var n={};if(null==t)return n;var r=!1;e=en(e,(function(e){return e=zi(e,t),r||(r=e.length>1),e})),Ki(t,ko(t),n),r&&(n=Ar(n,c|l|f,_o));for(var i=e.length;i--;)Ii(n,e[i]);return n})),ou=So((function(t,e){return null==t?{}:function(t,e){return di(t,e,(function(e,n){return Zs(t,n)}))}(t,e)}));function au(t,e){if(null==t)return{};var n=en(ko(t),(function(t){return[t]}));return e=Ao(e),di(t,n,(function(t,n){return e(t,n[0])}))}var su=yo(tu),uu=yo(eu);function cu(t){return null==t?[]:wn(t,tu(t))}var lu=ro((function(t,e,n){return e=e.toLowerCase(),t+(n?fu(e):e)}));function fu(t){return bu($s(t).toLowerCase())}function du(t){return(t=$s(t))&&t.replace(Gt,Cn).replace(we,"")}var hu=ro((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),pu=ro((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),gu=no("toLowerCase"),vu=ro((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),mu=ro((function(t,e,n){return t+(n?" ":"")+bu(e)})),yu=ro((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),bu=no("toUpperCase");function xu(t,e,n){return t=$s(t),(e=n?i:e)===i?function(t){return Ce.test(t)}(t)?function(t){return t.match(Ee)||[]}(t):function(t){return t.match(It)||[]}(t):t.match(e)||[]}var wu=mi((function(t,e){try{return Ye(t,i,e)}catch(t){return bs(t)?t:new Wt(t)}})),_u=So((function(t,e){return qe(e,(function(e){e=aa(e),Mr(t,e,Ja(t[e],t))})),t}));function Eu(t){return function(){return t}}var Su=ao(),Cu=ao(!0);function ku(t){return t}function Mu(t){return ri("function"==typeof t?t:Ar(t,c))}var Ou=mi((function(t,e){return function(n){return Jr(n,t,e)}})),Tu=mi((function(t,e){return function(n){return Jr(t,n,e)}}));function Au(t,e,n){var r=tu(e),i=Ur(e,r);null!=n||Es(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Ur(e,tu(e)));var o=!(Es(n)&&"chain"in n&&!n.chain),a=xs(t);return qe(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Zi(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,nn([this.value()],arguments))})})),t}function Nu(){}var Iu=lo(en),Pu=lo(Ke),Du=lo(an);function Lu(t){return Go(t)?pn(aa(t)):function(t){return function(e){return Wr(e,t)}}(t)}var Ru=ho(),ju=ho(!0);function Bu(){return[]}function Fu(){return!1}var zu,$u=co((function(t,e){return t+e}),0),Gu=vo("ceil"),Vu=co((function(t,e){return t/e}),1),Uu=vo("floor"),Wu=co((function(t,e){return t*e}),1),Hu=vo("round"),Yu=co((function(t,e){return t-e}),0);return ur.after=function(t,e){if("function"!=typeof e)throw new Kt(a);return t=js(t),function(){if(--t<1)return e.apply(this,arguments)}},ur.ary=Za,ur.assign=Gs,ur.assignIn=Vs,ur.assignInWith=Us,ur.assignWith=Ws,ur.at=Hs,ur.before=Ka,ur.bind=Ja,ur.bindAll=_u,ur.bindKey=Qa,ur.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return hs(t)?t:[t]},ur.chain=La,ur.chunk=function(t,e,n){e=(n?$o(t,e,n):e===i)?1:zn(js(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,u=r(Re(o/e));a<o;)u[s++]=Si(t,a,a+=e);return u},ur.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},ur.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return nn(hs(n)?Zi(n):[n],Fr(e,1))},ur.cond=function(t){var e=null==t?0:t.length,n=Ao();return t=e?en(t,(function(t){if("function"!=typeof t[1])throw new Kt(a);return[n(t[0]),t[1]]})):[],mi((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ye(i[0],this,n))return Ye(i[1],this,n)}}))},ur.conforms=function(t){return function(t){var e=tu(t);return function(n){return Nr(n,t,e)}}(Ar(t,c))},ur.constant=Eu,ur.countBy=Ba,ur.create=function(t,e){var n=cr(t);return null==e?n:kr(n,e)},ur.curry=function t(e,n,r){var o=bo(e,m,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},ur.curryRight=function t(e,n,r){var o=bo(e,y,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},ur.debounce=ts,ur.defaults=Ys,ur.defaultsDeep=Xs,ur.defer=es,ur.delay=ns,ur.difference=ca,ur.differenceBy=la,ur.differenceWith=fa,ur.drop=function(t,e,n){var r=null==t?0:t.length;return r?Si(t,(e=n||e===i?1:js(e))<0?0:e,r):[]},ur.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Si(t,0,(e=r-(e=n||e===i?1:js(e)))<0?0:e):[]},ur.dropRightWhile=function(t,e){return t&&t.length?Di(t,Ao(e,3),!0,!0):[]},ur.dropWhile=function(t,e){return t&&t.length?Di(t,Ao(e,3),!0):[]},ur.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&$o(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=js(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:js(r))<0&&(r+=o),r=n>r?0:Bs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},ur.filter=function(t,e){return(hs(t)?Je:Br)(t,Ao(e,3))},ur.flatMap=function(t,e){return Fr(Ha(t,e),1)},ur.flatMapDeep=function(t,e){return Fr(Ha(t,e),k)},ur.flatMapDepth=function(t,e,n){return n=n===i?1:js(n),Fr(Ha(t,e),n)},ur.flatten=pa,ur.flattenDeep=function(t){return null!=t&&t.length?Fr(t,k):[]},ur.flattenDepth=function(t,e){return null!=t&&t.length?Fr(t,e=e===i?1:js(e)):[]},ur.flip=function(t){return bo(t,E)},ur.flow=Su,ur.flowRight=Cu,ur.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},ur.functions=function(t){return null==t?[]:Ur(t,tu(t))},ur.functionsIn=function(t){return null==t?[]:Ur(t,eu(t))},ur.groupBy=Va,ur.initial=function(t){return null!=t&&t.length?Si(t,0,-1):[]},ur.intersection=va,ur.intersectionBy=ma,ur.intersectionWith=ya,ur.invert=Ks,ur.invertBy=Js,ur.invokeMap=Ua,ur.iteratee=Mu,ur.keyBy=Wa,ur.keys=tu,ur.keysIn=eu,ur.map=Ha,ur.mapKeys=function(t,e){var n={};return e=Ao(e,3),Gr(t,(function(t,r,i){Mr(n,e(t,r,i),t)})),n},ur.mapValues=function(t,e){var n={};return e=Ao(e,3),Gr(t,(function(t,r,i){Mr(n,r,e(t,r,i))})),n},ur.matches=function(t){return si(Ar(t,c))},ur.matchesProperty=function(t,e){return ui(t,Ar(e,c))},ur.memoize=rs,ur.merge=nu,ur.mergeWith=ru,ur.method=Ou,ur.methodOf=Tu,ur.mixin=Au,ur.negate=is,ur.nthArg=function(t){return t=js(t),mi((function(e){return li(e,t)}))},ur.omit=iu,ur.omitBy=function(t,e){return au(t,is(Ao(e)))},ur.once=function(t){return Ka(2,t)},ur.orderBy=function(t,e,n,r){return null==t?[]:(hs(e)||(e=null==e?[]:[e]),hs(n=r?i:n)||(n=null==n?[]:[n]),fi(t,e,n))},ur.over=Iu,ur.overArgs=os,ur.overEvery=Pu,ur.overSome=Du,ur.partial=as,ur.partialRight=ss,ur.partition=Ya,ur.pick=ou,ur.pickBy=au,ur.property=Lu,ur.propertyOf=function(t){return function(e){return null==t?i:Wr(t,e)}},ur.pull=xa,ur.pullAll=wa,ur.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?hi(t,e,Ao(n,2)):t},ur.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?hi(t,e,i,n):t},ur.pullAt=_a,ur.range=Ru,ur.rangeRight=ju,ur.rearg=us,ur.reject=function(t,e){return(hs(t)?Je:Br)(t,is(Ao(e,3)))},ur.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Ao(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return pi(t,i),n},ur.rest=function(t,e){if("function"!=typeof t)throw new Kt(a);return mi(t,e=e===i?e:js(e))},ur.reverse=Ea,ur.sampleSize=function(t,e,n){return e=(n?$o(t,e,n):e===i)?1:js(e),(hs(t)?xr:bi)(t,e)},ur.set=function(t,e,n){return null==t?t:xi(t,e,n)},ur.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:xi(t,e,n,r)},ur.shuffle=function(t){return(hs(t)?wr:Ei)(t)},ur.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&$o(t,e,n)?(e=0,n=r):(e=null==e?0:js(e),n=n===i?r:js(n)),Si(t,e,n)):[]},ur.sortBy=Xa,ur.sortedUniq=function(t){return t&&t.length?Oi(t):[]},ur.sortedUniqBy=function(t,e){return t&&t.length?Oi(t,Ao(e,2)):[]},ur.split=function(t,e,n){return n&&"number"!=typeof n&&$o(t,e,n)&&(e=n=i),(n=n===i?A:n>>>0)?(t=$s(t))&&("string"==typeof e||null!=e&&!Os(e))&&!(e=Ai(e))&&On(t)?Gi(Ln(t),0,n):t.split(e,n):[]},ur.spread=function(t,e){if("function"!=typeof t)throw new Kt(a);return e=null==e?0:zn(js(e),0),mi((function(n){var r=n[e],i=Gi(n,0,e);return r&&nn(i,r),Ye(t,this,i)}))},ur.tail=function(t){var e=null==t?0:t.length;return e?Si(t,1,e):[]},ur.take=function(t,e,n){return t&&t.length?Si(t,0,(e=n||e===i?1:js(e))<0?0:e):[]},ur.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Si(t,(e=r-(e=n||e===i?1:js(e)))<0?0:e,r):[]},ur.takeRightWhile=function(t,e){return t&&t.length?Di(t,Ao(e,3),!1,!0):[]},ur.takeWhile=function(t,e){return t&&t.length?Di(t,Ao(e,3)):[]},ur.tap=function(t,e){return e(t),t},ur.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Kt(a);return Es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ts(t,e,{leading:r,maxWait:e,trailing:i})},ur.thru=Ra,ur.toArray=Ls,ur.toPairs=su,ur.toPairsIn=uu,ur.toPath=function(t){return hs(t)?en(t,aa):Ns(t)?[t]:Zi(oa($s(t)))},ur.toPlainObject=zs,ur.transform=function(t,e,n){var r=hs(t),i=r||ms(t)||Is(t);if(e=Ao(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Es(t)&&xs(o)?cr(pe(t)):{}}return(i?qe:Gr)(t,(function(t,r,i){return e(n,t,r,i)})),n},ur.unary=function(t){return Za(t,1)},ur.union=Sa,ur.unionBy=Ca,ur.unionWith=ka,ur.uniq=function(t){return t&&t.length?Ni(t):[]},ur.uniqBy=function(t,e){return t&&t.length?Ni(t,Ao(e,2)):[]},ur.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?Ni(t,i,e):[]},ur.unset=function(t,e){return null==t||Ii(t,e)},ur.unzip=Ma,ur.unzipWith=Oa,ur.update=function(t,e,n){return null==t?t:Pi(t,e,Fi(n))},ur.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Pi(t,e,Fi(n),r)},ur.values=cu,ur.valuesIn=function(t){return null==t?[]:wn(t,eu(t))},ur.without=Ta,ur.words=xu,ur.wrap=function(t,e){return as(Fi(e),t)},ur.xor=Aa,ur.xorBy=Na,ur.xorWith=Ia,ur.zip=Pa,ur.zipObject=function(t,e){return ji(t||[],e||[],Er)},ur.zipObjectDeep=function(t,e){return ji(t||[],e||[],xi)},ur.zipWith=Da,ur.entries=su,ur.entriesIn=uu,ur.extend=Vs,ur.extendWith=Us,Au(ur,ur),ur.add=$u,ur.attempt=wu,ur.camelCase=lu,ur.capitalize=fu,ur.ceil=Gu,ur.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=Fs(n))==n?n:0),e!==i&&(e=(e=Fs(e))==e?e:0),Tr(Fs(t),e,n)},ur.clone=function(t){return Ar(t,f)},ur.cloneDeep=function(t){return Ar(t,c|f)},ur.cloneDeepWith=function(t,e){return Ar(t,c|f,e="function"==typeof e?e:i)},ur.cloneWith=function(t,e){return Ar(t,f,e="function"==typeof e?e:i)},ur.conformsTo=function(t,e){return null==e||Nr(t,e,tu(e))},ur.deburr=du,ur.defaultTo=function(t,e){return null==t||t!=t?e:t},ur.divide=Vu,ur.endsWith=function(t,e,n){t=$s(t),e=Ai(e);var r=t.length,o=n=n===i?r:Tr(js(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},ur.eq=cs,ur.escape=function(t){return(t=$s(t))&&yt.test(t)?t.replace(vt,kn):t},ur.escapeRegExp=function(t){return(t=$s(t))&&kt.test(t)?t.replace(Ct,"\\$&"):t},ur.every=function(t,e,n){var r=hs(t)?Ke:Rr;return n&&$o(t,e,n)&&(e=i),r(t,Ao(e,3))},ur.find=Fa,ur.findIndex=da,ur.findKey=function(t,e){return un(t,Ao(e,3),Gr)},ur.findLast=za,ur.findLastIndex=ha,ur.findLastKey=function(t,e){return un(t,Ao(e,3),Vr)},ur.floor=Uu,ur.forEach=$a,ur.forEachRight=Ga,ur.forIn=function(t,e){return null==t?t:zr(t,Ao(e,3),eu)},ur.forInRight=function(t,e){return null==t?t:$r(t,Ao(e,3),eu)},ur.forOwn=function(t,e){return t&&Gr(t,Ao(e,3))},ur.forOwnRight=function(t,e){return t&&Vr(t,Ao(e,3))},ur.get=qs,ur.gt=ls,ur.gte=fs,ur.has=function(t,e){return null!=t&&jo(t,e,qr)},ur.hasIn=Zs,ur.head=ga,ur.identity=ku,ur.includes=function(t,e,n,r){t=gs(t)?t:cu(t),n=n&&!r?js(n):0;var i=t.length;return n<0&&(n=zn(i+n,0)),As(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&ln(t,e,n)>-1},ur.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:js(n);return i<0&&(i=zn(r+i,0)),ln(t,e,i)},ur.inRange=function(t,e,n){return e=Rs(e),n===i?(n=e,e=0):n=Rs(n),function(t,e,n){return t>=$n(e,n)&&t<zn(e,n)}(t=Fs(t),e,n)},ur.invoke=Qs,ur.isArguments=ds,ur.isArray=hs,ur.isArrayBuffer=ps,ur.isArrayLike=gs,ur.isArrayLikeObject=vs,ur.isBoolean=function(t){return!0===t||!1===t||Ss(t)&&Yr(t)==j},ur.isBuffer=ms,ur.isDate=ys,ur.isElement=function(t){return Ss(t)&&1===t.nodeType&&!Ms(t)},ur.isEmpty=function(t){if(null==t)return!0;if(gs(t)&&(hs(t)||"string"==typeof t||"function"==typeof t.splice||ms(t)||Is(t)||ds(t)))return!t.length;var e=Ro(t);if(e==V||e==Z)return!t.size;if(Wo(t))return!ii(t).length;for(var n in t)if(re.call(t,n))return!1;return!0},ur.isEqual=function(t,e){return ti(t,e)},ur.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?ti(t,e,i,n):!!r},ur.isError=bs,ur.isFinite=function(t){return"number"==typeof t&&sn(t)},ur.isFunction=xs,ur.isInteger=ws,ur.isLength=_s,ur.isMap=Cs,ur.isMatch=function(t,e){return t===e||ei(t,e,Io(e))},ur.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,ei(t,e,Io(e),n)},ur.isNaN=function(t){return ks(t)&&t!=+t},ur.isNative=function(t){if(Uo(t))throw new Wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ni(t)},ur.isNil=function(t){return null==t},ur.isNull=function(t){return null===t},ur.isNumber=ks,ur.isObject=Es,ur.isObjectLike=Ss,ur.isPlainObject=Ms,ur.isRegExp=Os,ur.isSafeInteger=function(t){return ws(t)&&t>=-M&&t<=M},ur.isSet=Ts,ur.isString=As,ur.isSymbol=Ns,ur.isTypedArray=Is,ur.isUndefined=function(t){return t===i},ur.isWeakMap=function(t){return Ss(t)&&Ro(t)==tt},ur.isWeakSet=function(t){return Ss(t)&&"[object WeakSet]"==Yr(t)},ur.join=function(t,e){return null==t?"":gn.call(t,e)},ur.kebabCase=hu,ur.last=ba,ur.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=js(n))<0?zn(r+o,0):$n(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):cn(t,dn,o,!0)},ur.lowerCase=pu,ur.lowerFirst=gu,ur.lt=Ps,ur.lte=Ds,ur.max=function(t){return t&&t.length?jr(t,ku,Xr):i},ur.maxBy=function(t,e){return t&&t.length?jr(t,Ao(e,2),Xr):i},ur.mean=function(t){return hn(t,ku)},ur.meanBy=function(t,e){return hn(t,Ao(e,2))},ur.min=function(t){return t&&t.length?jr(t,ku,oi):i},ur.minBy=function(t,e){return t&&t.length?jr(t,Ao(e,2),oi):i},ur.stubArray=Bu,ur.stubFalse=Fu,ur.stubObject=function(){return{}},ur.stubString=function(){return""},ur.stubTrue=function(){return!0},ur.multiply=Wu,ur.nth=function(t,e){return t&&t.length?li(t,js(e)):i},ur.noConflict=function(){return Le._===this&&(Le._=ue),this},ur.noop=Nu,ur.now=qa,ur.pad=function(t,e,n){t=$s(t);var r=(e=js(e))?Dn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return fo(je(i),n)+t+fo(Re(i),n)},ur.padEnd=function(t,e,n){t=$s(t);var r=(e=js(e))?Dn(t):0;return e&&r<e?t+fo(e-r,n):t},ur.padStart=function(t,e,n){t=$s(t);var r=(e=js(e))?Dn(t):0;return e&&r<e?fo(e-r,n)+t:t},ur.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Vn($s(t).replace(Mt,""),e||0)},ur.random=function(t,e,n){if(n&&"boolean"!=typeof n&&$o(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=Rs(t),e===i?(e=t,t=0):e=Rs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=Un();return $n(t+o*(e-t+Ne("1e-"+((o+"").length-1))),e)}return gi(t,e)},ur.reduce=function(t,e,n){var r=hs(t)?rn:vn,i=arguments.length<3;return r(t,Ao(e,4),n,i,Dr)},ur.reduceRight=function(t,e,n){var r=hs(t)?on:vn,i=arguments.length<3;return r(t,Ao(e,4),n,i,Lr)},ur.repeat=function(t,e,n){return e=(n?$o(t,e,n):e===i)?1:js(e),vi($s(t),e)},ur.replace=function(){var t=arguments,e=$s(t[0]);return t.length<3?e:e.replace(t[1],t[2])},ur.result=function(t,e,n){var r=-1,o=(e=zi(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[aa(e[r])];a===i&&(r=o,a=n),t=xs(a)?a.call(t):a}return t},ur.round=Hu,ur.runInContext=t,ur.sample=function(t){return(hs(t)?br:yi)(t)},ur.size=function(t){if(null==t)return 0;if(gs(t))return As(t)?Dn(t):t.length;var e=Ro(t);return e==V||e==Z?t.size:ii(t).length},ur.snakeCase=vu,ur.some=function(t,e,n){var r=hs(t)?an:Ci;return n&&$o(t,e,n)&&(e=i),r(t,Ao(e,3))},ur.sortedIndex=function(t,e){return ki(t,e)},ur.sortedIndexBy=function(t,e,n){return Mi(t,e,Ao(n,2))},ur.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ki(t,e);if(r<n&&cs(t[r],e))return r}return-1},ur.sortedLastIndex=function(t,e){return ki(t,e,!0)},ur.sortedLastIndexBy=function(t,e,n){return Mi(t,e,Ao(n,2),!0)},ur.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ki(t,e,!0)-1;if(cs(t[n],e))return n}return-1},ur.startCase=mu,ur.startsWith=function(t,e,n){return t=$s(t),n=null==n?0:Tr(js(n),0,t.length),e=Ai(e),t.slice(n,n+e.length)==e},ur.subtract=Yu,ur.sum=function(t){return t&&t.length?mn(t,ku):0},ur.sumBy=function(t,e){return t&&t.length?mn(t,Ao(e,2)):0},ur.template=function(t,e,n){var r=ur.templateSettings;n&&$o(t,e,n)&&(e=i),t=$s(t),e=Us({},e,r,xo);var o,a,s=Us({},e.imports,r.imports,xo),u=tu(s),c=wn(s,u),l=0,f=e.interpolate||Vt,d="__p += '",h=qt((e.escape||Vt).source+"|"+f.source+"|"+(f===wt?Lt:Vt).source+"|"+(e.evaluate||Vt).source+"|$","g"),p="//# sourceURL="+(re.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";t.replace(h,(function(e,n,r,i,s,u){return r||(r=i),d+=t.slice(l,u).replace(Ut,Mn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),d+="';\n";var g=re.call(e,"variable")&&e.variable;if(g){if(Pt.test(g))throw new Wt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(dt,""):d).replace(ht,"$1").replace(pt,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=wu((function(){return Ht(u,p+"return "+d).apply(i,c)}));if(v.source=d,bs(v))throw v;return v},ur.times=function(t,e){if((t=js(t))<1||t>M)return[];var n=A,r=$n(t,A);e=Ao(e),t-=A;for(var i=yn(r,e);++n<t;)e(n);return i},ur.toFinite=Rs,ur.toInteger=js,ur.toLength=Bs,ur.toLower=function(t){return $s(t).toLowerCase()},ur.toNumber=Fs,ur.toSafeInteger=function(t){return t?Tr(js(t),-M,M):0===t?t:0},ur.toString=$s,ur.toUpper=function(t){return $s(t).toUpperCase()},ur.trim=function(t,e,n){if((t=$s(t))&&(n||e===i))return bn(t);if(!t||!(e=Ai(e)))return t;var r=Ln(t),o=Ln(e);return Gi(r,En(r,o),Sn(r,o)+1).join("")},ur.trimEnd=function(t,e,n){if((t=$s(t))&&(n||e===i))return t.slice(0,Rn(t)+1);if(!t||!(e=Ai(e)))return t;var r=Ln(t);return Gi(r,0,Sn(r,Ln(e))+1).join("")},ur.trimStart=function(t,e,n){if((t=$s(t))&&(n||e===i))return t.replace(Mt,"");if(!t||!(e=Ai(e)))return t;var r=Ln(t);return Gi(r,En(r,Ln(e))).join("")},ur.truncate=function(t,e){var n=30,r="...";if(Es(e)){var o="separator"in e?e.separator:o;n="length"in e?js(e.length):n,r="omission"in e?Ai(e.omission):r}var a=(t=$s(t)).length;if(On(t)){var s=Ln(t);a=s.length}if(n>=a)return t;var u=n-Dn(r);if(u<1)return r;var c=s?Gi(s,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(s&&(u+=c.length-u),Os(o)){if(t.slice(u).search(o)){var l,f=c;for(o.global||(o=qt(o.source,$s(Rt.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var d=l.index;c=c.slice(0,d===i?u:d)}}else if(t.indexOf(Ai(o),u)!=u){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+r},ur.unescape=function(t){return(t=$s(t))&&mt.test(t)?t.replace(gt,jn):t},ur.uniqueId=function(t){var e=++ie;return $s(t)+e},ur.upperCase=yu,ur.upperFirst=bu,ur.each=$a,ur.eachRight=Ga,ur.first=ga,Au(ur,(zu={},Gr(ur,(function(t,e){re.call(ur.prototype,e)||(zu[e]=t)})),zu),{chain:!1}),ur.VERSION="4.17.21",qe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){ur[t].placeholder=ur})),qe(["drop","take"],(function(t,e){dr.prototype[t]=function(n){n=n===i?1:zn(js(n),0);var r=this.__filtered__&&!e?new dr(this):this.clone();return r.__filtered__?r.__takeCount__=$n(n,r.__takeCount__):r.__views__.push({size:$n(n,A),type:t+(r.__dir__<0?"Right":"")}),r},dr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),qe(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;dr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ao(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),qe(["head","last"],(function(t,e){var n="take"+(e?"Right":"");dr.prototype[t]=function(){return this[n](1).value()[0]}})),qe(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");dr.prototype[t]=function(){return this.__filtered__?new dr(this):this[n](1)}})),dr.prototype.compact=function(){return this.filter(ku)},dr.prototype.find=function(t){return this.filter(t).head()},dr.prototype.findLast=function(t){return this.reverse().find(t)},dr.prototype.invokeMap=mi((function(t,e){return"function"==typeof t?new dr(this):this.map((function(n){return Jr(n,t,e)}))})),dr.prototype.reject=function(t){return this.filter(is(Ao(t)))},dr.prototype.slice=function(t,e){t=js(t);var n=this;return n.__filtered__&&(t>0||e<0)?new dr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=js(e))<0?n.dropRight(-e):n.take(e-t)),n)},dr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},dr.prototype.toArray=function(){return this.take(A)},Gr(dr.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=ur[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(ur.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof dr,c=s[0],l=u||hs(e),f=function(t){var e=o.apply(ur,nn([t],s));return r&&d?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var d=this.__chain__,h=!!this.__actions__.length,p=a&&!d,g=u&&!h;if(!a&&l){e=g?e:new dr(this);var v=t.apply(e,s);return v.__actions__.push({func:Ra,args:[f],thisArg:i}),new fr(v,d)}return p&&g?t.apply(this,s):(v=this.thru(f),p?r?v.value()[0]:v.value():v)})})),qe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Jt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);ur.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(hs(i)?i:[],t)}return this[n]((function(n){return e.apply(hs(n)?n:[],t)}))}})),Gr(dr.prototype,(function(t,e){var n=ur[e];if(n){var r=n.name+"";re.call(Qn,r)||(Qn[r]=[]),Qn[r].push({name:e,func:n})}})),Qn[so(i,g).name]=[{name:"wrapper",func:i}],dr.prototype.clone=function(){var t=new dr(this.__wrapped__);return t.__actions__=Zi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Zi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Zi(this.__views__),t},dr.prototype.reverse=function(){if(this.__filtered__){var t=new dr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},dr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=hs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=$n(e,t+a);break;case"takeRight":t=zn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,d=0,h=$n(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return Li(t,this.__actions__);var p=[];t:for(;u--&&d<h;){for(var g=-1,v=t[c+=e];++g<f;){var m=l[g],y=m.iteratee,b=m.type,x=y(v);if(2==b)v=x;else if(!x){if(1==b)continue t;break t}}p[d++]=v}return p},ur.prototype.at=ja,ur.prototype.chain=function(){return La(this)},ur.prototype.commit=function(){return new fr(this.value(),this.__chain__)},ur.prototype.next=function(){this.__values__===i&&(this.__values__=Ls(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},ur.prototype.plant=function(t){for(var e,n=this;n instanceof lr;){var r=ua(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},ur.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof dr){var e=t;return this.__actions__.length&&(e=new dr(this)),(e=e.reverse()).__actions__.push({func:Ra,args:[Ea],thisArg:i}),new fr(e,this.__chain__)}return this.thru(Ea)},ur.prototype.toJSON=ur.prototype.valueOf=ur.prototype.value=function(){return Li(this.__wrapped__,this.__actions__)},ur.prototype.first=ur.prototype.head,be&&(ur.prototype[be]=function(){return this}),ur}();Le._=Bn,(r=function(){return Bn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},23:function(t,e,n){"use strict";n.r(e),n.d(e,{AbstractMatrix:function(){return w},CHO:function(){return J},CholeskyDecomposition:function(){return J},EVD:function(){return Z},EigenvalueDecomposition:function(){return Z},LU:function(){return j},LuDecomposition:function(){return j},Matrix:function(){return E},MatrixColumnSelectionView:function(){return k},MatrixColumnView:function(){return C},MatrixFlipColumnView:function(){return M},MatrixFlipRowView:function(){return O},MatrixRowSelectionView:function(){return A},MatrixRowView:function(){return T},MatrixSelectionView:function(){return N},MatrixSubView:function(){return I},MatrixTransposeView:function(){return P},NIPALS:function(){return Q},Nipals:function(){return Q},QR:function(){return F},QrDecomposition:function(){return F},SVD:function(){return z},SingularValueDecomposition:function(){return z},WrapperMatrix1D:function(){return D},WrapperMatrix2D:function(){return L},correlation:function(){return q},covariance:function(){return X},default:function(){return E},determinant:function(){return V},inverse:function(){return $},linearDependencies:function(){return H},pseudoInverse:function(){return Y},solve:function(){return G},wrap:function(){return R}});const r=Object.prototype.toString;function i(t){return r.call(t).endsWith("Array]")}function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!i(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,a=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[r],u=r+1;u<a;u++)t[u]<s&&(s=t[u]);return s}(t),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,a=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[r],u=r+1;u<a;u++)t[u]>s&&(s=t[u]);return s}(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=n.min,s=void 0===a?n.autoMinMax?r:0:a,u=n.max,c=void 0===u?n.autoMinMax?o:1:u;if(s>=c)throw new RangeError("min option must be smaller than max option");for(var l=(c-s)/(o-r),f=0;f<t.length;f++)e[f]=(t[f]-r)*l+s;return e}const a=" ".repeat(2),s=" ".repeat(4);function u(t,e={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8,padMinus:o="auto"}=e;return`${t.constructor.name} {\n${a}[\n${s}${function(t,e,n,r,i){const{rows:o,columns:a}=t,u=Math.min(o,e),l=Math.min(a,n),f=[];if("auto"===i){i=!1;t:for(let e=0;e<u;e++)for(let n=0;n<l;n++)if(t.get(e,n)<0){i=!0;break t}}for(let e=0;e<u;e++){let n=[];for(let o=0;o<l;o++)n.push(c(t.get(e,o),r,i));f.push(`${n.join(" ")}`)}return l!==a&&(f[f.length-1]+=` ... ${a-n} more columns`),u!==o&&f.push(`... ${o-e} more rows`),f.join(`\n${s}`)}(t,n,r,i,o)}\n${a}]\n${a}rows: ${t.rows}\n${a}columns: ${t.columns}\n}`}function c(t,e,n){return(t>=0&&n?` ${l(t,e-1)}`:l(t,e)).padEnd(e)}function l(t,e){let n=t.toString();if(n.length<=e)return n;let r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=t.toExponential(e);return i.length>e&&(i=t.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function f(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function d(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function h(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function p(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function g(t,e){if(!i(e))throw new TypeError("row indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function v(t,e){if(!i(e))throw new TypeError("column indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function m(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(b("startRow",e),b("endRow",n),b("startColumn",r),b("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function y(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function b(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function x(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class w{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let r=new E(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)r.set(i,t,n[i*e+t]);return r}static rowVector(t){let e=new E(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new E(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new E(t,e)}static ones(t,e){return new E(t,e).fill(1)}static rand(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new E(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)i.set(n,t,r());return i}static randInt(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let a=i-r,s=new E(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++){let e=r+Math.round(o()*a);s.set(n,t,e)}return s}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);let r=Math.min(t,e),i=this.zeros(t,e);for(let t=0;t<r;t++)i.set(t,t,n);return i}static diag(t,e,n){let r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);let i=Math.min(r,e,n),o=this.zeros(e,n);for(let e=0;e<i;e++)o.set(e,e,t[e]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new E(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(t.get(o,n),e.get(o,n)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(t.get(o,n),e.get(o,n)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new E(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let r=e;for(let i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);let i=t.get(e,n);for(let r=n;r<t.columns;r++)t.set(e,r,t.get(e,r)/i);for(let r=e+1;r<t.rows;r++){let i=t.get(r,n)/t.get(e,n);t.set(r,n,0);for(let o=n+1;o<t.columns;o++)t.set(r,o,t.get(r,o)-t.get(e,o)*i)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;for(;r>=0;)if(0===t.maxRow(r))r--;else{let i=0,o=!1;for(;i<n&&!1===o;)1===t.get(r,i)?o=!0:i++;for(let n=0;n<r;n++){let o=t.get(n,i);for(let a=i;a<e;a++){let e=t.get(n,a)-o*t.get(r,a);t.set(n,a,e)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new E(this.rows*e,this.columns*n);for(let t=0;t<e;t++)for(let e=0;e<n;e++)r.setSubMatrix(this,this.rows*t,this.columns*e);return r}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){f(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return E.rowVector(this.getRow(t))}setRow(t,e){f(this,t),e=h(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){f(this,t),f(this,e);for(let n=0;n<this.columns;n++){let r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}getColumn(t){d(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return E.columnVector(this.getColumn(t))}setColumn(t,e){d(this,t),e=p(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){d(this,t),d(this,e);for(let n=0;n<this.rows;n++){let r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}addRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=h(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=p(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=p(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=p(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=p(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){f(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){d(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){x(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}minIndex(){x(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){if(f(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){f(this,t),x(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){if(f(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){f(this,t),x(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){if(d(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){d(this,t),x(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){if(d(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){d(this,t),x(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n)*this.get(t,n);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=E.checkMatrix(t);let e=this.rows,n=this.columns,r=t.columns,i=new E(e,r),o=new Float64Array(n);for(let a=0;a<r;a++){for(let e=0;e<n;e++)o[e]=t.get(e,a);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n;r++)e+=this.get(t,r)*o[r];i.set(t,a,e)}}return i}strassen2x2(t){t=E.checkMatrix(t);let e=new E(2,2);const n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),f=(a+u)*r,d=n*(o-c),h=u*(s-r),p=(n+i)*c,g=l+h-p+(i-u)*(s+c),v=d+p,m=f+h,y=l-f+d+(a-n)*(r+o);return e.set(0,0,g),e.set(0,1,v),e.set(1,0,m),e.set(1,1,y),e}strassen3x3(t){t=E.checkMatrix(t);let e=new E(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),f=t.get(0,0),d=t.get(0,1),h=t.get(0,2),p=t.get(1,0),g=t.get(1,1),v=t.get(1,2),m=t.get(2,0),y=t.get(2,1),b=t.get(2,2),x=(n-o)*(-d+g),w=(-n+o+a)*(f-d+g),_=(o+a)*(-f+d),S=n*f,C=(-n+u+c)*(f-h+v),k=(-n+u)*(h-v),M=(u+c)*(-f+h),O=(-i+c+l)*(g+m-y),T=(i-l)*(g-y),A=i*m,N=(c+l)*(-m+y),I=(-i+a+s)*(v+m-b),P=(i-s)*(v-b),D=(a+s)*(-m+b),L=S+A+r*p,R=(n+r+i-o-a-c-l)*g+w+_+S+O+A+N,j=S+C+M+(n+r+i-a-s-u-c)*v+A+I+D,B=x+a*(-f+d+p-g-v-m+b)+w+S+A+I+P,F=x+w+_+S+s*y,z=A+I+P+D+o*h,$=S+C+k+c*(-f+h+p-g-v-m+y)+O+T+A,G=O+T+A+N+u*d,V=S+C+k+M+l*b;return e.set(0,0,L),e.set(0,1,R),e.set(0,2,j),e.set(1,0,B),e.set(1,1,F),e.set(1,2,z),e.set(2,0,$),e.set(2,1,G),e.set(2,2,V),e}mmulStrassen(t){t=E.checkMatrix(t);let e=this.clone(),n=e.rows,r=e.columns,i=t.rows,o=t.columns;function a(t,e,n){let r=t.rows,i=t.columns;if(r===e&&i===n)return t;{let r=w.zeros(e,n);return r=r.setSubMatrix(t,0,0),r}}r!==i&&console.warn(`Multiplying ${n} x ${r} and ${i} x ${o} matrix: dimensions do not match.`);let s=Math.max(n,i),u=Math.max(r,o);return e=a(e,s,u),function t(e,n,r,i){if(r<=512||i<=512)return e.mmul(n);r%2==1&&i%2==1?(e=a(e,r+1,i+1),n=a(n,r+1,i+1)):r%2==1?(e=a(e,r+1,i),n=a(n,r+1,i)):i%2==1&&(e=a(e,r,i+1),n=a(n,r,i+1));let o=parseInt(e.rows/2,10),s=parseInt(e.columns/2,10),u=e.subMatrix(0,o-1,0,s-1),c=n.subMatrix(0,o-1,0,s-1),l=e.subMatrix(0,o-1,s,e.columns-1),f=n.subMatrix(0,o-1,s,n.columns-1),d=e.subMatrix(o,e.rows-1,0,s-1),h=n.subMatrix(o,n.rows-1,0,s-1),p=e.subMatrix(o,e.rows-1,s,e.columns-1),g=n.subMatrix(o,n.rows-1,s,n.columns-1),v=t(w.add(u,p),w.add(c,g),o,s),m=t(w.add(d,p),c,o,s),y=t(u,w.sub(f,g),o,s),b=t(p,w.sub(h,c),o,s),x=t(w.add(u,l),g,o,s),_=t(w.sub(d,u),w.add(c,f),o,s),E=t(w.sub(l,p),w.add(h,g),o,s),S=w.add(v,b);S.sub(x),S.add(E);let C=w.add(y,x),k=w.add(m,b),M=w.sub(v,m);M.add(y),M.add(_);let O=w.zeros(2*S.rows,2*S.columns);return O=O.setSubMatrix(S,0,0),O=O.setSubMatrix(C,S.rows,0),O=O.setSubMatrix(k,0,S.columns),O=O.setSubMatrix(M,S.rows,S.columns),O.subMatrix(0,r-1,0,i-1)}(e,t=a(t,s,u),s,u)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new E(this.rows,this.columns);for(let t=0;t<this.rows;t++){const i=this.getRow(t);i.length>0&&o(i,{min:e,max:n,output:i}),r.setRow(t,i)}return r}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new E(this.rows,this.columns);for(let t=0;t<this.columns;t++){const i=this.getColumn(t);i.length&&o(i,{min:e,max:n,output:i}),r.setColumn(t,i)}return r}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let t=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let t=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,t)}return this}kroneckerProduct(t){t=E.checkMatrix(t);let e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new E(e*r,n*i);for(let a=0;a<e;a++)for(let e=0;e<n;e++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)o.set(r*a+n,i*e+s,this.get(a,e)*t.get(n,s));return o}kroneckerSum(t){if(t=E.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,r=this.kroneckerProduct(E.eye(n,n)),i=E.eye(e,e).kroneckerProduct(t);return r.add(i)}transpose(){let t=new E(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=_){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=_){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){m(this,t,e,n,r);let i=new E(e-t+1,r-n+1);for(let o=t;o<=e;o++)for(let e=n;e<=r;e++)i.set(o-t,e-n,this.get(o,e));return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new E(t.length,n-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new E(n-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){if((t=E.checkMatrix(t)).isEmpty())return this;m(this,e,e+t.rows-1,n,n+t.columns-1);for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)this.set(e+r,n+i,t.get(r,i));return this}selection(t,e){g(this,t),v(this,e);let n=new E(t.length,e.length);for(let r=0;r<t.length;r++){let i=t[r];for(let t=0;t<e.length;t++){let o=e[t];n.set(r,t,this.get(i,o))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new E(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return function(t){let e=y(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){let e=y(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=y(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){let e=y(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:r=this.mean(t)}=e;if("boolean"!=typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!i(r))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<r;a++){let r=0,s=0,u=0;for(let e=0;e<i;e++)u=t.get(a,e)-n[a],r+=u,s+=u*u;e?o.push((s-r*r/i)/(i-1)):o.push((s-r*r/i)/i)}return o}(this,n,r);case"column":if(!i(r))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<i;a++){let i=0,s=0,u=0;for(let e=0;e<r;e++)u=t.get(e,a)-n[a],i+=u,s+=u*u;e?o.push((s-i*i/r)/(r-1)):o.push((s-i*i/r)/r)}return o}(this,n,r);case void 0:if("number"!=typeof r)throw new TypeError("mean must be a number");return function(t,e,n){const r=t.rows,i=t.columns,o=r*i;let a=0,s=0,u=0;for(let e=0;e<r;e++)for(let r=0;r<i;r++)u=t.get(e,r)-n,a+=u,s+=u*u;return e?(s-a*a/o)/(o-1):(s-a*a/o)/o}(this,n,r);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let t=0;t<n.length;t++)n[t]=Math.sqrt(n[t]);return n}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":if(!i(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}(this,n),this;case"column":if(!i(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}(this,n),this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.rows;n++){let r=0;for(let e=0;e<t.columns;e++)r+=Math.pow(t.get(n,e),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}(this);else if(!i(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}(this,n),this;case"column":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.columns;n++){let r=0;for(let e=0;e<t.rows;e++)r+=Math.pow(t.get(e,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}(this);else if(!i(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}(this,n),this;case void 0:if(void 0===n)n=function(t){const e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/e;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return u(this,t)}}function _(t,e){return t-e}w.prototype.klass="Matrix","undefined"!=typeof Symbol&&(w.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return u(this)}),w.random=w.rand,w.randomInt=w.randInt,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct;class E extends w{constructor(t,e){if(super(),E.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<t;n++)this.data.push(new Float64Array(e))}else{if(!i(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if("number"!=typeof(e=(t=n.length)?n[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");if(!n[r].every((t=>"number"==typeof t)))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[r]))}}}this.rows=t,this.columns=e}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return f(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),f(this,t,!0),e=Float64Array.from(h(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){d(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let r=0;r<t;r++)n[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)n[r-1]=this.data[e][r];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),d(this,t,!0),e=p(this,e);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},t.add=function(t,n){return new e(t).add(n)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},t.sub=function(t,n){return new e(t).sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},t.mul=function(t,n){return new e(t).mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},t.div=function(t,n){return new e(t).div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},t.mod=function(t,n){return new e(t).mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},t.and=function(t,n){return new e(t).and(n)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},t.or=function(t,n){return new e(t).or(n)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},t.xor=function(t,n){return new e(t).xor(n)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},t.leftShift=function(t,n){return new e(t).leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},t.signPropagatingRightShift=function(t,n){return new e(t).signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},t.rightShift=function(t,n){return new e(t).rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,n){return new e(t).pow(n)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this}}(w,E);class S extends w{constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}}class C extends S{constructor(t,e){d(t,e),super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}class k extends S{constructor(t,e){v(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class M extends S{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class O extends S{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class T extends S{constructor(t,e){f(t,e),super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}class A extends S{constructor(t,e){g(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class N extends S{constructor(t,e,n){g(t,e),v(t,n),super(t,e.length,n.length),this.rowIndices=e,this.columnIndices=n}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class I extends S{constructor(t,e,n,r,i){m(t,e,n,r,i),super(t,n-e+1,i-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class P extends S{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}class D extends w{constructor(t,e={}){const{rows:n=1}=e;if(t.length%n!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=t.length/n,this.data=t}set(t,e,n){let r=this._calculateIndex(t,e);return this.data[r]=n,this}get(t,e){let n=this._calculateIndex(t,e);return this.data[n]}_calculateIndex(t,e){return t*this.columns+e}}class L extends w{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function R(t,e){if(i(t))return t[0]&&i(t[0])?new L(t):new D(t,e);throw new Error("the argument is not an array")}class j{constructor(t){let e,n,r,i,o,a,s,u,c,l=(t=L.checkMatrix(t)).clone(),f=l.rows,d=l.columns,h=new Float64Array(f),p=1;for(e=0;e<f;e++)h[e]=e;for(u=new Float64Array(f),n=0;n<d;n++){for(e=0;e<f;e++)u[e]=l.get(e,n);for(e=0;e<f;e++){for(c=Math.min(e,n),o=0,r=0;r<c;r++)o+=l.get(e,r)*u[r];u[e]-=o,l.set(e,n,u[e])}for(i=n,e=n+1;e<f;e++)Math.abs(u[e])>Math.abs(u[i])&&(i=e);if(i!==n){for(r=0;r<d;r++)a=l.get(i,r),l.set(i,r,l.get(n,r)),l.set(n,r,a);s=h[i],h[i]=h[n],h[n]=s,p=-p}if(n<f&&0!==l.get(n,n))for(e=n+1;e<f;e++)l.set(e,n,l.get(e,n)/l.get(n,n))}this.LU=l,this.pivotVector=h,this.pivotSign=p}isSingular(){let t=this.LU,e=t.columns;for(let n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}solve(t){t=E.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let n,r,i,o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),s=e.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*e.get(n,i));for(i=s-1;i>=0;i--){for(r=0;r<o;r++)a.set(i,r,a.get(i,r)/e.get(i,i));for(n=0;n<i;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*e.get(n,i))}return a}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,n=t.columns;for(let r=0;r<n;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new E(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i>e?r.set(i,e,t.get(i,e)):i===e?r.set(i,e,1):r.set(i,e,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new E(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i<=e?r.set(i,e,t.get(i,e)):r.set(i,e,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function B(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class F{constructor(t){let e,n,r,i,o=(t=L.checkMatrix(t)).clone(),a=t.rows,s=t.columns,u=new Float64Array(s);for(r=0;r<s;r++){let t=0;for(e=r;e<a;e++)t=B(t,o.get(e,r));if(0!==t){for(o.get(r,r)<0&&(t=-t),e=r;e<a;e++)o.set(e,r,o.get(e,r)/t);for(o.set(r,r,o.get(r,r)+1),n=r+1;n<s;n++){for(i=0,e=r;e<a;e++)i+=o.get(e,r)*o.get(e,n);for(i=-i/o.get(r,r),e=r;e<a;e++)o.set(e,n,o.get(e,n)+i*o.get(e,r))}}u[r]=-t}this.QR=o,this.Rdiag=u}solve(t){t=E.checkMatrix(t);let e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,i,o,a,s=t.columns,u=t.clone(),c=e.columns;for(o=0;o<c;o++)for(i=0;i<s;i++){for(a=0,r=o;r<n;r++)a+=e.get(r,o)*u.get(r,i);for(a=-a/e.get(o,o),r=o;r<n;r++)u.set(r,i,u.get(r,i)+a*e.get(r,o))}for(o=c-1;o>=0;o--){for(i=0;i<s;i++)u.set(o,i,u.get(o,i)/this.Rdiag[o]);for(r=0;r<o;r++)for(i=0;i<s;i++)u.set(r,i,u.get(r,i)-u.get(o,i)*e.get(r,o))}return u.subMatrix(0,c-1,0,s-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,n=this.QR,r=n.columns,i=new E(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?i.set(t,e,n.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}get orthogonalMatrix(){let t,e,n,r,i=this.QR,o=i.rows,a=i.columns,s=new E(o,a);for(n=a-1;n>=0;n--){for(t=0;t<o;t++)s.set(t,n,0);for(s.set(n,n,1),e=n;e<a;e++)if(0!==i.get(n,n)){for(r=0,t=n;t<o;t++)r+=i.get(t,n)*s.get(t,e);for(r=-r/i.get(n,n),t=n;t<o;t++)s.set(t,e,s.get(t,e)+r*i.get(t,n))}}return s}}class z{constructor(t,e={}){if((t=L.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,r=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=e;let s,u=Boolean(i),c=Boolean(o),l=!1;if(n<r)if(a){s=t.transpose(),n=s.rows,r=s.columns,l=!0;let e=u;u=c,c=e}else s=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=t.clone();let f=Math.min(n,r),d=Math.min(n+1,r),h=new Float64Array(d),p=new E(n,f),g=new E(r,r),v=new Float64Array(r),m=new Float64Array(n),y=new Float64Array(d);for(let t=0;t<d;t++)y[t]=t;let b=Math.min(n-1,r),x=Math.max(0,Math.min(r-2,n)),w=Math.max(b,x);for(let t=0;t<w;t++){if(t<b){h[t]=0;for(let e=t;e<n;e++)h[t]=B(h[t],s.get(e,t));if(0!==h[t]){s.get(t,t)<0&&(h[t]=-h[t]);for(let e=t;e<n;e++)s.set(e,t,s.get(e,t)/h[t]);s.set(t,t,s.get(t,t)+1)}h[t]=-h[t]}for(let e=t+1;e<r;e++){if(t<b&&0!==h[t]){let r=0;for(let i=t;i<n;i++)r+=s.get(i,t)*s.get(i,e);r=-r/s.get(t,t);for(let i=t;i<n;i++)s.set(i,e,s.get(i,e)+r*s.get(i,t))}v[e]=s.get(t,e)}if(u&&t<b)for(let e=t;e<n;e++)p.set(e,t,s.get(e,t));if(t<x){v[t]=0;for(let e=t+1;e<r;e++)v[t]=B(v[t],v[e]);if(0!==v[t]){v[t+1]<0&&(v[t]=0-v[t]);for(let e=t+1;e<r;e++)v[e]/=v[t];v[t+1]+=1}if(v[t]=-v[t],t+1<n&&0!==v[t]){for(let e=t+1;e<n;e++)m[e]=0;for(let e=t+1;e<n;e++)for(let n=t+1;n<r;n++)m[e]+=v[n]*s.get(e,n);for(let e=t+1;e<r;e++){let r=-v[e]/v[t+1];for(let i=t+1;i<n;i++)s.set(i,e,s.get(i,e)+r*m[i])}}if(c)for(let e=t+1;e<r;e++)g.set(e,t,v[e])}}let _=Math.min(r,n+1);if(b<r&&(h[b]=s.get(b,b)),n<_&&(h[_-1]=0),x+1<_&&(v[x]=s.get(x,_-1)),v[_-1]=0,u){for(let t=b;t<f;t++){for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}for(let t=b-1;t>=0;t--)if(0!==h[t]){for(let e=t+1;e<f;e++){let r=0;for(let i=t;i<n;i++)r+=p.get(i,t)*p.get(i,e);r=-r/p.get(t,t);for(let i=t;i<n;i++)p.set(i,e,p.get(i,e)+r*p.get(i,t))}for(let e=t;e<n;e++)p.set(e,t,-p.get(e,t));p.set(t,t,1+p.get(t,t));for(let e=0;e<t-1;e++)p.set(e,t,0)}else{for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}}if(c)for(let t=r-1;t>=0;t--){if(t<x&&0!==v[t])for(let e=t+1;e<r;e++){let n=0;for(let i=t+1;i<r;i++)n+=g.get(i,t)*g.get(i,e);n=-n/g.get(t+1,t);for(let i=t+1;i<r;i++)g.set(i,e,g.get(i,e)+n*g.get(i,t))}for(let e=0;e<r;e++)g.set(e,t,0);g.set(t,t,1)}let S=_-1,C=0,k=Number.EPSILON;for(;_>0;){let t,e;for(t=_-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+k*Math.abs(h[t]+Math.abs(h[t+1]));if(Math.abs(v[t])<=e||Number.isNaN(v[t])){v[t]=0;break}}if(t===_-2)e=4;else{let n;for(n=_-1;n>=t&&n!==t;n--){let e=(n!==_?Math.abs(v[n]):0)+(n!==t+1?Math.abs(v[n-1]):0);if(Math.abs(h[n])<=k*e){h[n]=0;break}}n===t?e=3:n===_-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=v[_-2];v[_-2]=0;for(let n=_-2;n>=t;n--){let i=B(h[n],e),o=h[n]/i,a=e/i;if(h[n]=i,n!==t&&(e=-a*v[n-1],v[n-1]=o*v[n-1]),c)for(let t=0;t<r;t++)i=o*g.get(t,n)+a*g.get(t,_-1),g.set(t,_-1,-a*g.get(t,n)+o*g.get(t,_-1)),g.set(t,n,i)}break}case 2:{let e=v[t-1];v[t-1]=0;for(let r=t;r<_;r++){let i=B(h[r],e),o=h[r]/i,a=e/i;if(h[r]=i,e=-a*v[r],v[r]=o*v[r],u)for(let e=0;e<n;e++)i=o*p.get(e,r)+a*p.get(e,t-1),p.set(e,t-1,-a*p.get(e,r)+o*p.get(e,t-1)),p.set(e,r,i)}break}case 3:{const e=Math.max(Math.abs(h[_-1]),Math.abs(h[_-2]),Math.abs(v[_-2]),Math.abs(h[t]),Math.abs(v[t])),i=h[_-1]/e,o=h[_-2]/e,a=v[_-2]/e,s=h[t]/e,l=v[t]/e,f=((o+i)*(o-i)+a*a)/2,d=i*a*(i*a);let m=0;0===f&&0===d||(m=f<0?0-Math.sqrt(f*f+d):Math.sqrt(f*f+d),m=d/(f+m));let y=(s+i)*(s-i)+m,b=s*l;for(let e=t;e<_-1;e++){let i=B(y,b);0===i&&(i=Number.MIN_VALUE);let o=y/i,a=b/i;if(e!==t&&(v[e-1]=i),y=o*h[e]+a*v[e],v[e]=o*v[e]-a*h[e],b=a*h[e+1],h[e+1]=o*h[e+1],c)for(let t=0;t<r;t++)i=o*g.get(t,e)+a*g.get(t,e+1),g.set(t,e+1,-a*g.get(t,e)+o*g.get(t,e+1)),g.set(t,e,i);if(i=B(y,b),0===i&&(i=Number.MIN_VALUE),o=y/i,a=b/i,h[e]=i,y=o*v[e]+a*h[e+1],h[e+1]=-a*v[e]+o*h[e+1],b=a*v[e+1],v[e+1]=o*v[e+1],u&&e<n-1)for(let t=0;t<n;t++)i=o*p.get(t,e)+a*p.get(t,e+1),p.set(t,e+1,-a*p.get(t,e)+o*p.get(t,e+1)),p.set(t,e,i)}v[_-2]=y,C+=1;break}case 4:if(h[t]<=0&&(h[t]=h[t]<0?-h[t]:0,c))for(let e=0;e<=S;e++)g.set(e,t,-g.get(e,t));for(;t<S&&!(h[t]>=h[t+1]);){let e=h[t];if(h[t]=h[t+1],h[t+1]=e,c&&t<r-1)for(let n=0;n<r;n++)e=g.get(n,t+1),g.set(n,t+1,g.get(n,t)),g.set(n,t,e);if(u&&t<n-1)for(let r=0;r<n;r++)e=p.get(r,t+1),p.set(r,t+1,p.get(r,t)),p.set(r,t,e);t++}C=0,_--}}if(l){let t=g;g=p,p=t}this.m=n,this.n=r,this.s=h,this.U=p,this.V=g}solve(t){let e=t,n=this.threshold,r=this.s.length,i=E.zeros(r,r);for(let t=0;t<r;t++)Math.abs(this.s[t])<=n?i.set(t,t,0):i.set(t,t,1/this.s[t]);let o=this.U,a=this.rightSingularVectors,s=a.mmul(i),u=a.rows,c=o.rows,l=E.zeros(u,c);for(let t=0;t<u;t++)for(let e=0;e<c;e++){let n=0;for(let i=0;i<r;i++)n+=s.get(t,i)*o.get(e,i);l.set(t,e,n)}return l.mmul(e)}solveForDiagonal(t){return this.solve(E.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new E(n,this.s.length);for(let o=0;o<n;o++)for(let n=0;n<r;n++)Math.abs(this.s[n])>e&&i.set(o,n,t.get(o,n)/this.s[n]);let o=this.U,a=o.rows,s=o.columns,u=new E(n,a);for(let t=0;t<n;t++)for(let e=0;e<a;e++){let n=0;for(let r=0;r<s;r++)n+=i.get(t,r)*o.get(e,r);u.set(t,e,n)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return E.diag(this.s)}}function $(t,e=!1){return t=L.checkMatrix(t),e?new z(t).inverse():G(t,E.eye(t.rows))}function G(t,e,n=!1){return t=L.checkMatrix(t),e=L.checkMatrix(e),n?new z(t).solve(e):t.isSquare()?new j(t).solve(e):new F(t).solve(e)}function V(t){if((t=E.checkMatrix(t)).isSquare()){if(0===t.columns)return 1;let e,n,r,i;if(2===t.columns)return e=t.get(0,0),n=t.get(0,1),r=t.get(1,0),i=t.get(1,1),e*i-n*r;if(3===t.columns){let i,o,a;return i=new N(t,[1,2],[1,2]),o=new N(t,[1,2],[0,2]),a=new N(t,[1,2],[0,1]),e=t.get(0,0),n=t.get(0,1),r=t.get(0,2),e*V(i)-n*V(o)+r*V(a)}return new j(t).determinant}throw Error("determinant can only be calculated for a square matrix")}function U(t,e){let n=[];for(let r=0;r<t;r++)r!==e&&n.push(r);return n}function W(t,e,n,r=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let t=e.addRow(n,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<r&&t.set(e,0,0);return t.to1DArray()}}function H(t,e={}){const{thresholdValue:n=1e-9,thresholdError:r=1e-9}=e;let i=(t=E.checkMatrix(t)).rows,o=new E(i,i);for(let e=0;e<i;e++){let a=E.columnVector(t.getRow(e)),s=t.subMatrixRow(U(i,e)).transpose(),u=new z(s).solve(a),c=E.sub(a,s.mmul(u)).abs().max();o.setRow(e,W(c,u,e,n,r))}return o}function Y(t,e=Number.EPSILON){if((t=E.checkMatrix(t)).isEmpty())return t.transpose();let n=new z(t,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,o=n.diagonal;for(let t=0;t<o.length;t++)Math.abs(o[t])>e?o[t]=1/o[t]:o[t]=0;return i.mmul(E.diag(o).mmul(r.transpose()))}function X(t,e=t,n={}){t=new E(t);let r=!1;if("object"!=typeof e||E.isMatrix(e)||i(e)?e=new E(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:o=!0}=n;o&&(t=t.center("column"),r||(e=e.center("column")));const a=t.transpose().mmul(e);for(let e=0;e<a.rows;e++)for(let n=0;n<a.columns;n++)a.set(e,n,a.get(e,n)*(1/(t.rows-1)));return a}function q(t,e=t,n={}){t=new E(t);let r=!1;if("object"!=typeof e||E.isMatrix(e)||i(e)?e=new E(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:o=!0,scale:a=!0}=n;o&&(t.center("column"),r||e.center("column")),a&&(t.scale("column"),r||e.scale("column"));const s=t.standardDeviation("column",{unbiased:!0}),u=r?s:e.standardDeviation("column",{unbiased:!0}),c=t.transpose().mmul(e);for(let e=0;e<c.rows;e++)for(let n=0;n<c.columns;n++)c.set(e,n,c.get(e,n)*(1/(s[e]*u[n]))*(1/(t.rows-1)));return c}class Z{constructor(t,e={}){const{assumeSymmetric:n=!1}=e;if(!(t=L.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let r,i,o=t.columns,a=new E(o,o),s=new Float64Array(o),u=new Float64Array(o),c=t,l=!1;if(l=!!n||t.isSymmetric(),l){for(r=0;r<o;r++)for(i=0;i<o;i++)a.set(r,i,c.get(r,i));!function(t,e,n,r){let i,o,a,s,u,c,l,f;for(u=0;u<t;u++)n[u]=r.get(t-1,u);for(s=t-1;s>0;s--){for(f=0,a=0,c=0;c<s;c++)f+=Math.abs(n[c]);if(0===f)for(e[s]=n[s-1],u=0;u<s;u++)n[u]=r.get(s-1,u),r.set(s,u,0),r.set(u,s,0);else{for(c=0;c<s;c++)n[c]/=f,a+=n[c]*n[c];for(i=n[s-1],o=Math.sqrt(a),i>0&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,u=0;u<s;u++)e[u]=0;for(u=0;u<s;u++){for(i=n[u],r.set(u,s,i),o=e[u]+r.get(u,u)*i,c=u+1;c<=s-1;c++)o+=r.get(c,u)*n[c],e[c]+=r.get(c,u)*i;e[u]=o}for(i=0,u=0;u<s;u++)e[u]/=a,i+=e[u]*n[u];for(l=i/(a+a),u=0;u<s;u++)e[u]-=l*n[u];for(u=0;u<s;u++){for(i=n[u],o=e[u],c=u;c<=s-1;c++)r.set(c,u,r.get(c,u)-(i*e[c]+o*n[c]));n[u]=r.get(s-1,u),r.set(s,u,0)}}n[s]=a}for(s=0;s<t-1;s++){if(r.set(t-1,s,r.get(s,s)),r.set(s,s,1),a=n[s+1],0!==a){for(c=0;c<=s;c++)n[c]=r.get(c,s+1)/a;for(u=0;u<=s;u++){for(o=0,c=0;c<=s;c++)o+=r.get(c,s+1)*r.get(c,u);for(c=0;c<=s;c++)r.set(c,u,r.get(c,u)-o*n[c])}}for(c=0;c<=s;c++)r.set(c,s+1,0)}for(u=0;u<t;u++)n[u]=r.get(t-1,u),r.set(t-1,u,0);r.set(t-1,t-1,1),e[0]=0}(o,u,s,a),function(t,e,n,r){let i,o,a,s,u,c,l,f,d,h,p,g,v,m,y,b,x;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;let w=0,_=0,E=Number.EPSILON;for(c=0;c<t;c++){for(_=Math.max(_,Math.abs(n[c])+Math.abs(e[c])),l=c;l<t&&!(Math.abs(e[l])<=E*_);)l++;if(l>c){x=0;do{for(x+=1,i=n[c],f=(n[c+1]-i)/(2*e[c]),d=B(f,1),f<0&&(d=-d),n[c]=e[c]/(f+d),n[c+1]=e[c]*(f+d),h=n[c+1],o=i-n[c],a=c+2;a<t;a++)n[a]-=o;for(w+=o,f=n[l],p=1,g=p,v=p,m=e[c+1],y=0,b=0,a=l-1;a>=c;a--)for(v=g,g=p,b=y,i=p*e[a],o=p*f,d=B(f,e[a]),e[a+1]=y*d,y=e[a]/d,p=f/d,f=p*n[a]-y*i,n[a+1]=o+y*(p*i+y*n[a]),u=0;u<t;u++)o=r.get(u,a+1),r.set(u,a+1,y*r.get(u,a)+p*o),r.set(u,a,p*r.get(u,a)-y*o);f=-y*b*v*m*e[c]/h,e[c]=y*f,n[c]=p*f}while(Math.abs(e[c])>E*_)}n[c]=n[c]+w,e[c]=0}for(a=0;a<t-1;a++){for(u=a,f=n[a],s=a+1;s<t;s++)n[s]<f&&(u=s,f=n[s]);if(u!==a)for(n[u]=n[a],n[a]=f,s=0;s<t;s++)f=r.get(s,a),r.set(s,a,r.get(s,u)),r.set(s,u,f)}}(o,u,s,a)}else{let t=new E(o,o),e=new Float64Array(o);for(i=0;i<o;i++)for(r=0;r<o;r++)t.set(r,i,c.get(r,i));!function(t,e,n,r){let i,o,a,s,u,c,l,f=t-1;for(c=1;c<=f-1;c++){for(l=0,s=c;s<=f;s++)l+=Math.abs(e.get(s,c-1));if(0!==l){for(a=0,s=f;s>=c;s--)n[s]=e.get(s,c-1)/l,a+=n[s]*n[s];for(o=Math.sqrt(a),n[c]>0&&(o=-o),a-=n[c]*o,n[c]=n[c]-o,u=c;u<t;u++){for(i=0,s=f;s>=c;s--)i+=n[s]*e.get(s,u);for(i/=a,s=c;s<=f;s++)e.set(s,u,e.get(s,u)-i*n[s])}for(s=0;s<=f;s++){for(i=0,u=f;u>=c;u--)i+=n[u]*e.get(s,u);for(i/=a,u=c;u<=f;u++)e.set(s,u,e.get(s,u)-i*n[u])}n[c]=l*n[c],e.set(c,c-1,l*o)}}for(s=0;s<t;s++)for(u=0;u<t;u++)r.set(s,u,s===u?1:0);for(c=f-1;c>=1;c--)if(0!==e.get(c,c-1)){for(s=c+1;s<=f;s++)n[s]=e.get(s,c-1);for(u=c;u<=f;u++){for(o=0,s=c;s<=f;s++)o+=n[s]*r.get(s,u);for(o=o/n[c]/e.get(c,c-1),s=c;s<=f;s++)r.set(s,u,r.get(s,u)+o*n[s])}}}(o,t,e,a),function(t,e,n,r,i){let o,a,s,u,c,l,f,d,h,p,g,v,m,y,b,x=t-1,w=t-1,_=Number.EPSILON,E=0,S=0,C=0,k=0,M=0,O=0,T=0,A=0;for(o=0;o<t;o++)for((o<0||o>w)&&(n[o]=i.get(o,o),e[o]=0),a=Math.max(o-1,0);a<t;a++)S+=Math.abs(i.get(o,a));for(;x>=0;){for(u=x;u>0&&(O=Math.abs(i.get(u-1,u-1))+Math.abs(i.get(u,u)),0===O&&(O=S),!(Math.abs(i.get(u,u-1))<_*O));)u--;if(u===x)i.set(x,x,i.get(x,x)+E),n[x]=i.get(x,x),e[x]=0,x--,A=0;else if(u===x-1){if(f=i.get(x,x-1)*i.get(x-1,x),C=(i.get(x-1,x-1)-i.get(x,x))/2,k=C*C+f,T=Math.sqrt(Math.abs(k)),i.set(x,x,i.get(x,x)+E),i.set(x-1,x-1,i.get(x-1,x-1)+E),d=i.get(x,x),k>=0){for(T=C>=0?C+T:C-T,n[x-1]=d+T,n[x]=n[x-1],0!==T&&(n[x]=d-f/T),e[x-1]=0,e[x]=0,d=i.get(x,x-1),O=Math.abs(d)+Math.abs(T),C=d/O,k=T/O,M=Math.sqrt(C*C+k*k),C/=M,k/=M,a=x-1;a<t;a++)T=i.get(x-1,a),i.set(x-1,a,k*T+C*i.get(x,a)),i.set(x,a,k*i.get(x,a)-C*T);for(o=0;o<=x;o++)T=i.get(o,x-1),i.set(o,x-1,k*T+C*i.get(o,x)),i.set(o,x,k*i.get(o,x)-C*T);for(o=0;o<=w;o++)T=r.get(o,x-1),r.set(o,x-1,k*T+C*r.get(o,x)),r.set(o,x,k*r.get(o,x)-C*T)}else n[x-1]=d+C,n[x]=d+C,e[x-1]=T,e[x]=-T;x-=2,A=0}else{if(d=i.get(x,x),h=0,f=0,u<x&&(h=i.get(x-1,x-1),f=i.get(x,x-1)*i.get(x-1,x)),10===A){for(E+=d,o=0;o<=x;o++)i.set(o,o,i.get(o,o)-d);O=Math.abs(i.get(x,x-1))+Math.abs(i.get(x-1,x-2)),d=h=.75*O,f=-.4375*O*O}if(30===A&&(O=(h-d)/2,O=O*O+f,O>0)){for(O=Math.sqrt(O),h<d&&(O=-O),O=d-f/((h-d)/2+O),o=0;o<=x;o++)i.set(o,o,i.get(o,o)-O);E+=O,d=h=f=.964}for(A+=1,c=x-2;c>=u&&(T=i.get(c,c),M=d-T,O=h-T,C=(M*O-f)/i.get(c+1,c)+i.get(c,c+1),k=i.get(c+1,c+1)-T-M-O,M=i.get(c+2,c+1),O=Math.abs(C)+Math.abs(k)+Math.abs(M),C/=O,k/=O,M/=O,c!==u)&&!(Math.abs(i.get(c,c-1))*(Math.abs(k)+Math.abs(M))<_*(Math.abs(C)*(Math.abs(i.get(c-1,c-1))+Math.abs(T)+Math.abs(i.get(c+1,c+1)))));)c--;for(o=c+2;o<=x;o++)i.set(o,o-2,0),o>c+2&&i.set(o,o-3,0);for(s=c;s<=x-1&&(y=s!==x-1,s!==c&&(C=i.get(s,s-1),k=i.get(s+1,s-1),M=y?i.get(s+2,s-1):0,d=Math.abs(C)+Math.abs(k)+Math.abs(M),0!==d&&(C/=d,k/=d,M/=d)),0!==d);s++)if(O=Math.sqrt(C*C+k*k+M*M),C<0&&(O=-O),0!==O){for(s!==c?i.set(s,s-1,-O*d):u!==c&&i.set(s,s-1,-i.get(s,s-1)),C+=O,d=C/O,h=k/O,T=M/O,k/=C,M/=C,a=s;a<t;a++)C=i.get(s,a)+k*i.get(s+1,a),y&&(C+=M*i.get(s+2,a),i.set(s+2,a,i.get(s+2,a)-C*T)),i.set(s,a,i.get(s,a)-C*d),i.set(s+1,a,i.get(s+1,a)-C*h);for(o=0;o<=Math.min(x,s+3);o++)C=d*i.get(o,s)+h*i.get(o,s+1),y&&(C+=T*i.get(o,s+2),i.set(o,s+2,i.get(o,s+2)-C*M)),i.set(o,s,i.get(o,s)-C),i.set(o,s+1,i.get(o,s+1)-C*k);for(o=0;o<=w;o++)C=d*r.get(o,s)+h*r.get(o,s+1),y&&(C+=T*r.get(o,s+2),r.set(o,s+2,r.get(o,s+2)-C*M)),r.set(o,s,r.get(o,s)-C),r.set(o,s+1,r.get(o,s+1)-C*k)}}}if(0!==S){for(x=t-1;x>=0;x--)if(C=n[x],k=e[x],0===k)for(u=x,i.set(x,x,1),o=x-1;o>=0;o--){for(f=i.get(o,o)-C,M=0,a=u;a<=x;a++)M+=i.get(o,a)*i.get(a,x);if(e[o]<0)T=f,O=M;else if(u=o,0===e[o]?i.set(o,x,0!==f?-M/f:-M/(_*S)):(d=i.get(o,o+1),h=i.get(o+1,o),k=(n[o]-C)*(n[o]-C)+e[o]*e[o],l=(d*O-T*M)/k,i.set(o,x,l),i.set(o+1,x,Math.abs(d)>Math.abs(T)?(-M-f*l)/d:(-O-h*l)/T)),l=Math.abs(i.get(o,x)),_*l*l>1)for(a=o;a<=x;a++)i.set(a,x,i.get(a,x)/l)}else if(k<0)for(u=x-1,Math.abs(i.get(x,x-1))>Math.abs(i.get(x-1,x))?(i.set(x-1,x-1,k/i.get(x,x-1)),i.set(x-1,x,-(i.get(x,x)-C)/i.get(x,x-1))):(b=K(0,-i.get(x-1,x),i.get(x-1,x-1)-C,k),i.set(x-1,x-1,b[0]),i.set(x-1,x,b[1])),i.set(x,x-1,0),i.set(x,x,1),o=x-2;o>=0;o--){for(p=0,g=0,a=u;a<=x;a++)p+=i.get(o,a)*i.get(a,x-1),g+=i.get(o,a)*i.get(a,x);if(f=i.get(o,o)-C,e[o]<0)T=f,M=p,O=g;else if(u=o,0===e[o]?(b=K(-p,-g,f,k),i.set(o,x-1,b[0]),i.set(o,x,b[1])):(d=i.get(o,o+1),h=i.get(o+1,o),v=(n[o]-C)*(n[o]-C)+e[o]*e[o]-k*k,m=2*(n[o]-C)*k,0===v&&0===m&&(v=_*S*(Math.abs(f)+Math.abs(k)+Math.abs(d)+Math.abs(h)+Math.abs(T))),b=K(d*M-T*p+k*g,d*O-T*g-k*p,v,m),i.set(o,x-1,b[0]),i.set(o,x,b[1]),Math.abs(d)>Math.abs(T)+Math.abs(k)?(i.set(o+1,x-1,(-p-f*i.get(o,x-1)+k*i.get(o,x))/d),i.set(o+1,x,(-g-f*i.get(o,x)-k*i.get(o,x-1))/d)):(b=K(-M-h*i.get(o,x-1),-O-h*i.get(o,x),T,k),i.set(o+1,x-1,b[0]),i.set(o+1,x,b[1]))),l=Math.max(Math.abs(i.get(o,x-1)),Math.abs(i.get(o,x))),_*l*l>1)for(a=o;a<=x;a++)i.set(a,x-1,i.get(a,x-1)/l),i.set(a,x,i.get(a,x)/l)}for(o=0;o<t;o++)if(o<0||o>w)for(a=o;a<t;a++)r.set(o,a,i.get(o,a));for(a=t-1;a>=0;a--)for(o=0;o<=w;o++){for(T=0,s=0;s<=Math.min(a,w);s++)T+=r.get(o,s)*i.get(s,a);r.set(o,a,T)}}}(o,u,s,a,t)}this.n=o,this.e=u,this.d=s,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,n=this.n,r=this.e,i=this.d,o=new E(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o.set(t,e,0);o.set(t,t,i[t]),r[t]>0?o.set(t,t+1,r[t]):r[t]<0&&o.set(t,t-1,r[t])}return o}}function K(t,e,n,r){let i,o;return Math.abs(n)>Math.abs(r)?(i=r/n,o=n+i*r,[(t+i*e)/o,(e-i*t)/o]):(i=n/r,o=r+i*n,[(i*t+e)/o,(i*e-t)/o])}class J{constructor(t){if(!(t=L.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");let e,n,r,i=t,o=i.rows,a=new E(o,o),s=!0;for(n=0;n<o;n++){let t=0;for(r=0;r<n;r++){let o=0;for(e=0;e<r;e++)o+=a.get(r,e)*a.get(n,e);o=(i.get(n,r)-o)/a.get(r,r),a.set(n,r,o),t+=o*o}for(t=i.get(n,n)-t,s&=t>0,a.set(n,n,Math.sqrt(Math.max(t,0))),r=n+1;r<o;r++)a.set(n,r,0)}this.L=a,this.positiveDefinite=Boolean(s)}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=L.checkMatrix(t);let e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let r,i,o,a=t.columns,s=t.clone();for(o=0;o<n;o++)for(i=0;i<a;i++){for(r=0;r<o;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*e.get(o,r));s.set(o,i,s.get(o,i)/e.get(o,o))}for(o=n-1;o>=0;o--)for(i=0;i<a;i++){for(r=o+1;r<n;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*e.get(r,o));s.set(o,i,s.get(o,i)/e.get(o,o))}return s}get lowerTriangularMatrix(){return this.L}}class Q{constructor(t,e={}){t=L.checkMatrix(t);let{Y:n}=e;const{scaleScores:r=!1,maxIterations:o=1e3,terminationCriteria:a=1e-10}=e;let s;if(n){if(n=i(n)&&"number"==typeof n[0]?E.columnVector(n):L.checkMatrix(n),n.rows!==t.rows)throw new Error("Y should have the same number of rows as X");s=n.getColumnVector(0)}else s=t.getColumnVector(0);let u,c,l,f,d=1;for(let e=0;e<o&&d>a;e++)l=t.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),l=l.div(l.norm()),u=t.mmul(l).div(l.transpose().mmul(l).get(0,0)),e>0&&(d=u.clone().sub(f).pow(2).sum()),f=u.clone(),n?(c=n.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),c=c.div(c.norm()),s=n.mmul(c).div(c.transpose().mmul(c).get(0,0))):s=u;if(n){let e=t.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));e=e.div(e.norm());let r=t.clone().sub(u.clone().mmul(e.transpose())),i=s.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),o=n.clone().sub(u.clone().mulS(i.get(0,0)).mmul(c.transpose()));this.t=u,this.p=e.transpose(),this.w=l.transpose(),this.q=c,this.u=s,this.s=u.transpose().mmul(u),this.xResidual=r,this.yResidual=o,this.betas=i}else this.w=l.transpose(),this.s=u.transpose().mmul(u).sqrt(),this.t=r?u.clone().div(this.s.get(0,0)):u,this.xResidual=t.sub(u.mmul(l.transpose()))}}},1550:function(t){t.exports=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},n="\n";function r(t){var e=new Error("(regl) "+t);throw console.error(e),e}function i(t,e){t||r(e)}function o(t){return t?": "+t:""}function a(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"==typeof t;case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"==typeof t}}function s(t,e,n){e.indexOf(t)<0&&r("invalid value"+o(n)+". must be one of: "+e)}var u=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function l(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function f(t,e){this.number=t,this.line=e,this.errors=[]}function d(t,e,n){this.file=t,this.line=e,this.message=n}function h(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function p(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function g(t,e){var n,r=t.split("\n"),i=1,o=0,a={unknown:new l,0:new l};a.unknown.name=a[0].name=e||h(),a.unknown.lines.push(new f(0,""));for(var s=0;s<r.length;++s){var u=r[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var d=/(\d+)(\s+\d+)?/.exec(c[2]);d&&(i=0|d[1],d[2]&&((o=0|d[2])in a||(a[o]=new l)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);p&&(a[o].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}a[o].lines.push(new f(i++,u))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function v(t){t._commandRef=h()}function m(t,e){var n=p();r(t+" in command "+(e||h())+("unknown"===n?"":" called from "+n))}function y(t,e,n,r){a(t,e)||m("invalid parameter type"+o(n)+". expected "+e+", got "+typeof t,r||h())}var b=33071,x=9728,w=9984,_=9985,E=9986,S=9987,C=5126,k=32819,M=32820,O=33635,T=34042,A={};function N(t,e){return t===M||t===k||t===O?2:t===T?4:A[t]*e}function I(t){return!(t&t-1||!t)}A[5120]=A[5121]=1,A[5122]=A[5123]=A[36193]=A[O]=A[k]=A[M]=2,A[5124]=A[5125]=A[C]=A[T]=4;var P=e(i,{optional:function(t){t()},raise:r,commandRaise:m,command:function(t,e,n){t||m(e,n||h())},parameter:function(t,e,n){t in e||r("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,r){t in e||m("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),r||h())},constructor:function(t){Object.keys(t).forEach((function(t){u.indexOf(t)<0&&r('invalid regl constructor argument "'+t+'". must be one of '+u)}))},type:function(t,e,n){a(t,e)||r("invalid parameter type"+o(n)+". expected "+e+", got "+typeof t)},commandType:y,isTypedArray:function(e,n){t(e)||r("invalid parameter type"+o(n)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||r("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")},oneOf:s,shaderError:function(t,e,r,o,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),u=o===t.FRAGMENT_SHADER?"fragment":"vertex";y(r,"string",u+" shader source must be a string",a);var l=g(r,a),f=function(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new d(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new d("unknown",0,t))}})),e}(s);(function(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))})(l,f),Object.keys(l).forEach((function(t){var e=l[t];if(e.hasErrors){var r=[""],i=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(c(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+n,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(r){var i=r.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];i=a[2],"assign"===s&&(s="="),e=Math.max(t.line.indexOf(s,e),0)}else e=0;o(c("| ",6)),o(c("^^^",e+3)+n,"font-weight:bold"),o(c("| ",6)),o(i+n,"font-weight:bold")})),o(c("| ",6)+n)}else o(c(t.number,4)+"|  "),o(t.line+n,"color:red")})),"undefined"==typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function o(t,e){r.push(t),i.push(e||"")}})),i.raise("Error compiling "+u+" shader, "+l[0].name)}},linkError:function(t,e,r,o,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),u=g(r,a),c='Error linking program with vertex shader, "'+g(o,a)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+c+n+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(c+n+s),i.raise(c)}},callSite:p,saveCommandRef:v,saveDrawInfo:function(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}v(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?s(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):s(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:h,texture2D:function(t,e,n){var r,o=e.width,a=e.height,s=e.channels;i(o>0&&o<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),t.wrapS===b&&t.wrapT===b||i(I(o)&&I(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==o&&1!==a&&i(t.minFilter!==w&&t.minFilter!==E&&t.minFilter!==_&&t.minFilter!==S,"min filter requires mipmap"):(i(I(o)&&I(a),"texture must be a square power of 2 to support mipmapping"),i(e.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),e.type===C&&(n.extensions.indexOf("oes_texture_float_linear")<0&&i(t.minFilter===x&&t.magFilter===x,"filter not supported, must enable oes_texture_float_linear"),i(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(r=0;r<16;++r)if(u[r]){var c=o>>r,l=a>>r;i(e.mipmask&1<<r,"missing mipmap data");var f=u[r];if(i(f.width===c&&f.height===l,"invalid shape for mip images"),i(f.format===e.format&&f.internalformat===e.internalformat&&f.type===e.type,"incompatible type for mip image"),f.compressed);else if(f.data){var d=Math.ceil(N(f.type,s)*c/f.unpackAlignment)*f.unpackAlignment;i(f.data.byteLength===d*l,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else t.genMipmaps||i(0==(e.mipmask&1<<r),"extra mipmap data");e.compressed&&i(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,r){var o=t.width,a=t.height,s=t.channels;i(o>0&&o<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),i(o===a,"cube map must be square"),i(e.wrapS===b&&e.wrapT===b,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];i(c.width===o&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(i(!c.compressed,"can not generate mipmap for compressed textures"),i(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=c.images,f=0;f<16;++f){var d=l[f];if(d){var h=o>>f,p=a>>f;i(c.mipmask&1<<f,"missing mipmap data"),i(d.width===h&&d.height===p,"invalid shape for mip images"),i(d.format===t.format&&d.internalformat===t.internalformat&&d.type===t.type,"incompatible type for mip image"),d.compressed||(d.data?i(d.data.byteLength===h*p*Math.max(N(d.type,s),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):d.element||d.copy)}}}}}),D=0,L=0,R=5,j=6;function B(t,e){this.id=D++,this.type=t,this.data=e}function F(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function z(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+F(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return z(t.substr(0,r.index)).concat(z(r[1])).concat(z(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+F(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(z(i[a]));return o}function $(t){return"["+z(t).join("][")+"]"}var G={DynamicVariable:B,define:function(t,e){return new B(t,$(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof B},unbox:function t(e,n){return"function"==typeof e?new B(L,e):"number"==typeof e||"boolean"==typeof e?new B(R,e):Array.isArray(e)?new B(j,e.map(((e,r)=>t(e,n+"["+r+"]")))):e instanceof B?e:void P(!1,"invalid option type in uniform "+n)},accessor:$},V={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},U="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function W(t){return"string"==typeof t?t.split():(P(Array.isArray(t),"invalid extension array"),t)}function H(t){return"string"==typeof t?(P("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function Y(t){var n,r,i,o,a,s=t||{},u={},c=[],l=[],f="undefined"==typeof window?1:window.devicePixelRatio,d=!1,h=function(t){t&&P.raise(t)},p=function(){};if("string"==typeof s?(P("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),P(n,"invalid query string for element")):"object"==typeof s?"string"==typeof(a=s).nodeName&&"function"==typeof a.appendChild&&"function"==typeof a.getBoundingClientRect?n=s:function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(s)?i=(o=s).canvas:(P.constructor(s),"gl"in s?o=s.gl:"canvas"in s?i=H(s.canvas):"container"in s&&(r=H(s.container)),"attributes"in s&&(u=s.attributes,P.type(u,"object","invalid context attributes")),"extensions"in s&&(c=W(s.extensions)),"optionalExtensions"in s&&(l=W(s.optionalExtensions)),"onDone"in s&&(P.type(s.onDone,"function","invalid or missing onDone callback"),h=s.onDone),"profile"in s&&(d=!!s.profile),"pixelRatio"in s&&(f=+s.pixelRatio,P(f>0,"invalid pixel ratio"))):P.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?i=n:r=n),!o){if(!i){P("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var g=function(t,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,e(o.style,{width:n+"px",height:i+"px"})}return e(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",a),t.removeChild(o)}}}(r||document.body,0,f);if(!g)return null;i=g.canvas,p=g.onDestroy}void 0===u.premultipliedAlpha&&(u.premultipliedAlpha=!0),o=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(i,u)}return o?{gl:o,canvas:i,container:r,extensions:c,optionalExtensions:l,pixelRatio:f,profile:d,onDone:h,onDestroy:p}:(p(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function X(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}var q=5120,Z=5121,K=5122,J=5123,Q=5124,tt=5125,et=5126;function nt(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function rt(){var t=X(8,(function(){return[]}));function e(e){var n=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(e),r=t[nt(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[nt(e.byteLength)>>2].push(e)}return{alloc:e,free:n,allocType:function(t,n){var r=null;switch(t){case q:r=new Int8Array(e(n),0,n);break;case Z:r=new Uint8Array(e(n),0,n);break;case K:r=new Int16Array(e(2*n),0,n);break;case J:r=new Uint16Array(e(2*n),0,n);break;case Q:r=new Int32Array(e(4*n),0,n);break;case tt:r=new Uint32Array(e(4*n),0,n);break;case et:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){n(t.buffer)}}}var it=rt();it.zero=rt();var ot=3553,at=6408,st=5126,ut=36160,ct=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),i=t.getParameter(36063));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(ot,a),t.texImage2D(ot,0,at,1,1,0,at,st,null);var s=t.createFramebuffer();if(t.bindFramebuffer(ut,s),t.framebufferTexture2D(ut,36064,ot,a,0),t.bindTexture(ot,null),36053!==t.checkFramebufferStatus(ut))o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var u=it.allocType(st,4);t.readPixels(0,0,1,1,at,st,u),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===u[0]),it.freeType(u)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var l=t.createTexture(),f=it.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,l),t.texImage2D(34069,0,at,3,3,0,at,5121,f),it.freeType(f),t.bindTexture(34067,null),t.deleteTexture(l),c=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:o,npotTextureCube:c}};function lt(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var ft=function(t){return Object.keys(t).map((function(e){return t[e]}))},dt={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||it.allocType(n,i);switch(e.length){case 0:break;case 1:!function(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}(t,e[0],a);break;case 2:!function(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}(t,e[0],e[1],a);break;case 3:ht(t,e[0],e[1],e[2],a,0);break;default:pt(t,e,0,a,0)}return a}};function ht(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var u=t[s],c=0;c<n;++c)for(var l=u[c],f=0;f<r;++f)i[a++]=l[f]}function pt(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n==4){var u=e[n+1],c=e[n+2],l=e[n+3];for(a=0;a<s;++a)ht(t[a],u,c,l,r,i),i+=o}else for(a=0;a<s;++a)pt(t[a],e,n+1,r,i),i+=o}var gt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},vt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},mt={dynamic:35048,stream:35040,static:35044},yt=dt.flatten,bt=dt.shape,xt=35044,wt=35040,_t=5121,Et=5126,St=[];function Ct(t){return 0|gt[Object.prototype.toString.call(t)]}function kt(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function Mt(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)t[s++]=e[i*u+o*c+a]}St[5120]=1,St[5122]=2,St[5124]=4,St[5121]=1,St[5123]=2,St[5125]=4,St[5126]=4;var Ot={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Tt=0,At=1,Nt=4,It=5120,Pt=5121,Dt=5122,Lt=5123,Rt=5124,jt=5125,Bt=34963,Ft=35040,zt=35044;var $t=new Float32Array(1),Gt=new Uint32Array($t.buffer),Vt=5123;function Ut(t){for(var e=it.allocType(Vt,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{$t[0]=t[n];var r=Gt[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function Wt(e){return Array.isArray(e)||t(e)}var Ht=function(t){return!(t&t-1||!t)},Yt=34467,Xt=3553,qt=34067,Zt=34069,Kt=6408,Jt=6406,Qt=6407,te=6409,ee=6410,ne=32854,re=32855,ie=36194,oe=32819,ae=32820,se=33635,ue=34042,ce=6402,le=34041,fe=35904,de=35906,he=36193,pe=33776,ge=33777,ve=33778,me=33779,ye=35986,be=35987,xe=34798,we=35840,_e=35841,Ee=35842,Se=35843,Ce=36196,ke=5121,Me=5123,Oe=5125,Te=5126,Ae=10242,Ne=10243,Ie=10497,Pe=33071,De=33648,Le=10240,Re=10241,je=9728,Be=9729,Fe=9984,ze=9985,$e=9986,Ge=9987,Ve=33170,Ue=4352,We=4353,He=4354,Ye=34046,Xe=3317,qe=37440,Ze=37441,Ke=37443,Je=37444,Qe=33984,tn=[Fe,$e,ze,Ge],en=[0,te,ee,Qt,Kt],nn={};function rn(t){return"[object "+t+"]"}nn[te]=nn[Jt]=nn[ce]=1,nn[le]=nn[ee]=2,nn[Qt]=nn[fe]=3,nn[Kt]=nn[de]=4;var on=rn("HTMLCanvasElement"),an=rn("OffscreenCanvas"),sn=rn("CanvasRenderingContext2D"),un=rn("ImageBitmap"),cn=rn("HTMLImageElement"),ln=rn("HTMLVideoElement"),fn=Object.keys(gt).concat([on,an,sn,un,cn,ln]),dn=[];dn[ke]=1,dn[Te]=4,dn[he]=2,dn[Me]=2,dn[Oe]=4;var hn=[];function pn(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function gn(t){return!!Array.isArray(t)&&!(0===t.length||!Wt(t[0]))}function vn(t){return Object.prototype.toString.call(t)}function mn(t){return vn(t)===on}function yn(t){return vn(t)===an}function bn(t){if(!t)return!1;var e=vn(t);return fn.indexOf(e)>=0||pn(t)||gn(t)||lt(t)}function xn(t){return 0|gt[Object.prototype.toString.call(t)]}function wn(t,e){return it.allocType(t.type===he?Te:t.type,e)}function _n(t,e){t.type===he?(t.data=Ut(e),it.freeType(e)):t.data=e}function En(t,e,n,r,i,o){var a;if(a=void 0!==hn[t]?hn[t]:nn[t]*dn[e],o&&(a*=6),i){for(var s=0,u=n;u>=1;)s+=a*u*u,u/=2;return s}return a*n*r}function Sn(n,r,i,o,a,s,u){var c={"don't care":Ue,"dont care":Ue,nice:He,fast:We},l={repeat:Ie,clamp:Pe,mirror:De},f={nearest:je,linear:Be},d=e({mipmap:Ge,"nearest mipmap nearest":Fe,"linear mipmap nearest":ze,"nearest mipmap linear":$e,"linear mipmap linear":Ge},f),h={none:0,browser:Je},p={uint8:ke,rgba4:oe,rgb565:se,"rgb5 a1":ae},g={alpha:Jt,luminance:te,"luminance alpha":ee,rgb:Qt,rgba:Kt,rgba4:ne,"rgb5 a1":re,rgb565:ie},v={};r.ext_srgb&&(g.srgb=fe,g.srgba=de),r.oes_texture_float&&(p.float32=p.float=Te),r.oes_texture_half_float&&(p.float16=p["half float"]=he),r.webgl_depth_texture&&(e(g,{depth:ce,"depth stencil":le}),e(p,{uint16:Me,uint32:Oe,"depth stencil":ue})),r.webgl_compressed_texture_s3tc&&e(v,{"rgb s3tc dxt1":pe,"rgba s3tc dxt1":ge,"rgba s3tc dxt3":ve,"rgba s3tc dxt5":me}),r.webgl_compressed_texture_atc&&e(v,{"rgb atc":ye,"rgba atc explicit alpha":be,"rgba atc interpolated alpha":xe}),r.webgl_compressed_texture_pvrtc&&e(v,{"rgb pvrtc 4bppv1":we,"rgb pvrtc 2bppv1":_e,"rgba pvrtc 4bppv1":Ee,"rgba pvrtc 2bppv1":Se}),r.webgl_compressed_texture_etc1&&(v["rgb etc1"]=Ce);var m=Array.prototype.slice.call(n.getParameter(Yt));Object.keys(v).forEach((function(t){var e=v[t];m.indexOf(e)>=0&&(g[t]=e)}));var y=Object.keys(g);i.textureFormats=y;var b=[];Object.keys(g).forEach((function(t){var e=g[t];b[e]=t}));var x=[];Object.keys(p).forEach((function(t){var e=p[t];x[e]=t}));var w=[];Object.keys(f).forEach((function(t){var e=f[t];w[e]=t}));var _=[];Object.keys(d).forEach((function(t){var e=d[t];_[e]=t}));var E=[];Object.keys(l).forEach((function(t){var e=l[t];E[e]=t}));var S=y.reduce((function(t,e){var n=g[e];return n===te||n===Jt||n===te||n===ee||n===ce||n===le||r.ext_srgb&&(n===fe||n===de)?t[n]=n:n===re||e.indexOf("rgba")>=0?t[n]=Kt:t[n]=Qt,t}),{});function C(){this.internalformat=Kt,this.format=Kt,this.type=ke,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Je,this.width=0,this.height=0,this.channels=0}function k(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function M(t,e){if("object"==typeof e&&e){if("premultiplyAlpha"in e&&(P.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(P.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(P.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(P.parameter(e.colorSpace,h,"invalid colorSpace"),t.colorSpace=h[e.colorSpace]),"type"in e){var n=e.type;P(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),P(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),P(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),P.parameter(n,p,"invalid texture type"),t.type=p[n]}var o=t.width,a=t.height,s=t.channels,u=!1;"shape"in e?(P(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),o=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],P(s>0&&s<=4,"invalid number of channels"),u=!0),P(o>=0&&o<=i.maxTextureSize,"invalid width"),P(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in e&&(o=a=e.radius,P(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in e&&(o=e.width,P(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,P(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,P(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var c=!1;if("format"in e){var l=e.format;P(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),P.parameter(l,g,"invalid texture format");var f=t.internalformat=g[l];t.format=S[f],l in p&&("type"in e||(t.type=p[l])),l in v&&(t.compressed=!0),c=!0}!u&&c?t.channels=nn[t.format]:u&&!c?t.channels!==en[t.format]&&(t.format=t.internalformat=en[t.channels]):c&&u&&P(t.channels===nn[t.format],"number of channels inconsistent with specified format")}}function O(t){n.pixelStorei(qe,t.flipY),n.pixelStorei(Ze,t.premultiplyAlpha),n.pixelStorei(Ke,t.colorSpace),n.pixelStorei(Xe,t.unpackAlignment)}function T(){C.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function A(e,n){var r=null;if(bn(n)?r=n:n&&(P.type(n,"object","invalid pixel data type"),M(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),bn(n.data)&&(r=n.data)),P(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){P(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,P(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=o&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||e.type!==ke||(e.type=xn(r));else if(pn(r))e.channels=e.channels||4,function(t,e){var n=e.length;switch(t.type){case ke:case Me:case Oe:case Te:var r=it.allocType(t.type,n);r.set(e),t.data=r;break;case he:t.data=Ut(e);break;default:P.raise("unsupported texture type, must specify a typed array")}}(e,r),e.alignment=1,e.needsFree=!0;else if(lt(r)){var u=r.data;Array.isArray(u)||e.type!==ke||(e.type=xn(u));var c,l,f,d,h,p,g=r.shape,v=r.stride;3===g.length?(f=g[2],p=v[2]):(P(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,p=1),c=g[0],l=g[1],d=v[0],h=v[1],e.alignment=1,e.width=c,e.height=l,e.channels=f,e.format=e.internalformat=en[f],e.needsFree=!0,function(t,e,n,r,i,o){for(var a=t.width,s=t.height,u=t.channels,c=wn(t,a*s*u),l=0,f=0;f<s;++f)for(var d=0;d<a;++d)for(var h=0;h<u;++h)c[l++]=e[n*d+r*f+i*h+o];_n(t,c)}(e,u,d,h,p,r.offset)}else if(mn(r)||yn(r)||vn(r)===sn)mn(r)||yn(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(function(t){return vn(t)===un}(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(function(t){return vn(t)===cn}(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(function(t){return vn(t)===ln}(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(gn(r)){var m=e.width||r[0].length,y=e.height||r.length,b=e.channels;b=Wt(r[0][0])?b||r[0][0].length:b||1;for(var x=dt.shape(r),w=1,_=0;_<x.length;++_)w*=x[_];var E=wn(e,w);dt.flatten(r,x,"",E),_n(e,E),e.alignment=1,e.width=m,e.height=y,e.channels=b,e.format=e.internalformat=en[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Te?P(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===he&&P(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function N(t,e,r){var i=t.element,a=t.data,s=t.internalformat,u=t.format,c=t.type,l=t.width,f=t.height;O(t),i?n.texImage2D(e,r,u,u,c,i):t.compressed?n.compressedTexImage2D(e,r,s,l,f,0,a):t.needsCopy?(o(),n.copyTexImage2D(e,r,u,t.xOffset,t.yOffset,l,f,0)):n.texImage2D(e,r,u,l,f,0,u,c,a||null)}function I(t,e,r,i,a){var s=t.element,u=t.data,c=t.internalformat,l=t.format,f=t.type,d=t.width,h=t.height;O(t),s?n.texSubImage2D(e,a,r,i,l,f,s):t.compressed?n.compressedTexSubImage2D(e,a,r,i,c,d,h,u):t.needsCopy?(o(),n.copyTexSubImage2D(e,a,r,i,t.xOffset,t.yOffset,d,h)):n.texSubImage2D(e,a,r,i,d,h,l,f,u)}var D=[];function L(){return D.pop()||new T}function R(t){t.needsFree&&it.freeType(t.data),T.call(t),D.push(t)}function j(){C.call(this),this.genMipmaps=!1,this.mipmapHint=Ue,this.mipmask=0,this.images=Array(16)}function B(t,e,n){var r=t.images[0]=L();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function F(t,e){var n=null;if(bn(e))k(n=t.images[0]=L(),t),A(n,e),t.mipmask=1;else if(M(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)k(n=t.images[i]=L(),t),n.width>>=i,n.height>>=i,A(n,r[i]),t.mipmask|=1<<i;else k(n=t.images[0]=L(),t),A(n,e),t.mipmask=1;k(t,t.images[0]),!t.compressed||t.internalformat!==pe&&t.internalformat!==ge&&t.internalformat!==ve&&t.internalformat!==me||P(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function z(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;N(n[r],e,r)}}var $=[];function G(){var t=$.pop()||new j;C.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function V(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&R(e[n]),e[n]=null;$.push(t)}function U(){this.minFilter=je,this.magFilter=je,this.wrapS=Pe,this.wrapT=Pe,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ue}function W(t,e){if("min"in e){var n=e.min;P.parameter(n,d),t.minFilter=d[n],tn.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;P.parameter(r,f),t.magFilter=f[r]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(P.parameter(s,l),o=a=l[s]):Array.isArray(s)&&(P.parameter(s[0],l),P.parameter(s[1],l),o=l[s[0]],a=l[s[1]])}else{if("wrapS"in e){var u=e.wrapS;P.parameter(u,l),o=l[u]}if("wrapT"in e){var h=e.wrapT;P.parameter(h,l),a=l[h]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var p=e.anisotropic;P("number"==typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var g=!1;switch(typeof e.mipmap){case"string":P.parameter(e.mipmap,c,"invalid mipmap hint"),t.mipmapHint=c[e.mipmap],t.genMipmaps=!0,g=!0;break;case"boolean":g=t.genMipmaps=e.mipmap;break;case"object":P(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,g=!0;break;default:P.raise("invalid mipmap type")}g&&!("min"in e)&&(t.minFilter=Fe)}}function H(t,e){n.texParameteri(e,Re,t.minFilter),n.texParameteri(e,Le,t.magFilter),n.texParameteri(e,Ae,t.wrapS),n.texParameteri(e,Ne,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,Ye,t.anisotropic),t.genMipmaps&&(n.hint(Ve,t.mipmapHint),n.generateMipmap(e))}var Y=0,X={},q=i.maxTextureUnits,Z=Array(q).map((function(){return null}));function K(t){C.call(this),this.mipmask=0,this.internalformat=Kt,this.id=Y++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new U,u.profile&&(this.stats={size:0})}function J(t){n.activeTexture(Qe),n.bindTexture(t.target,t.texture)}function Q(){var t=Z[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(Xt,null)}function tt(t){var e=t.texture;P(e,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(n.activeTexture(Qe+r),n.bindTexture(i,null),Z[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete X[t.id],s.textureCount--}return e(K.prototype,{bind:function(){var t=this;t.bindCount+=1;var e=t.unit;if(e<0){for(var r=0;r<q;++r){var i=Z[r];if(i){if(i.bindCount>0)continue;i.unit=-1}Z[r]=t,e=r;break}e>=q&&P.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<e+1&&(s.maxTextureUnits=e+1),t.unit=e,n.activeTexture(Qe+e),n.bindTexture(t.target,t.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&tt(this)}}),u.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(X).forEach((function(e){t+=X[e].stats.size})),t}),{create2D:function(t,e){var r=new K(Xt);function o(t,e){var n=r.texInfo;U.call(n);var a=G();return"number"==typeof t?B(a,0|t,"number"==typeof e?0|e:0|t):t?(P.type(t,"object","invalid arguments to regl.texture"),W(n,t),F(a,t)):B(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,k(r,a),P.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,J(r),z(a,Xt),H(n,Xt),Q(),V(a),u.profile&&(r.stats.size=En(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=x[r.type],o.mag=w[n.magFilter],o.min=_[n.minFilter],o.wrapS=E[n.wrapS],o.wrapT=E[n.wrapT],o}return X[r.id]=r,s.textureCount++,o(t,e),o.subimage=function(t,e,n,i){P(!!t,"must specify image data");var a=0|e,s=0|n,u=0|i,c=L();return k(c,r),c.width=0,c.height=0,A(c,t),c.width=c.width||(r.width>>u)-a,c.height=c.height||(r.height>>u)-s,P(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),P(a>=0&&s>=0&&a+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),P(r.mipmask&1<<u,"missing mipmap data"),P(c.data||c.element||c.needsCopy,"missing image data"),J(r),I(c,Xt,a,s,u),Q(),R(c),o},o.resize=function(t,e){var i=0|t,a=0|e||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,J(r);for(var s=0;r.mipmask>>s;++s){var c=i>>s,l=a>>s;if(!c||!l)break;n.texImage2D(Xt,s,r.format,c,l,0,r.format,r.type,null)}return Q(),u.profile&&(r.stats.size=En(r.internalformat,r.type,i,a,!1,!1)),o},o._reglType="texture2d",o._texture=r,u.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o},createCube:function(t,e,r,o,a,c){var l=new K(qt);X[l.id]=l,s.cubeCount++;var f=new Array(6);function d(t,e,n,r,o,a){var s,c=l.texInfo;for(U.call(c),s=0;s<6;++s)f[s]=G();if("number"!=typeof t&&t)if("object"==typeof t)if(e)F(f[0],t),F(f[1],e),F(f[2],n),F(f[3],r),F(f[4],o),F(f[5],a);else if(W(c,t),M(l,t),"faces"in t){var h=t.faces;for(P(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),s=0;s<6;++s)P("object"==typeof h[s]&&!!h[s],"invalid input for cube map face"),k(f[s],l),F(f[s],h[s])}else for(s=0;s<6;++s)F(f[s],t);else P.raise("invalid arguments to cube map");else{var p=0|t||1;for(s=0;s<6;++s)B(f[s],p,p)}for(k(l,f[0]),i.npotTextureCube||P(Ht(l.width)&&Ht(l.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?l.mipmask=(f[0].width<<1)-1:l.mipmask=f[0].mipmask,P.textureCube(l,c,f,i),l.internalformat=f[0].internalformat,d.width=f[0].width,d.height=f[0].height,J(l),s=0;s<6;++s)z(f[s],Zt+s);for(H(c,qt),Q(),u.profile&&(l.stats.size=En(l.internalformat,l.type,d.width,d.height,c.genMipmaps,!0)),d.format=b[l.internalformat],d.type=x[l.type],d.mag=w[c.magFilter],d.min=_[c.minFilter],d.wrapS=E[c.wrapS],d.wrapT=E[c.wrapT],s=0;s<6;++s)V(f[s]);return d}return d(t,e,r,o,a,c),d.subimage=function(t,e,n,r,i){P(!!e,"must specify image data"),P("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,u=L();return k(u,l),u.width=0,u.height=0,A(u,e),u.width=u.width||(l.width>>s)-o,u.height=u.height||(l.height>>s)-a,P(l.type===u.type&&l.format===u.format&&l.internalformat===u.internalformat,"incompatible format for texture.subimage"),P(o>=0&&a>=0&&o+u.width<=l.width&&a+u.height<=l.height,"texture.subimage write out of bounds"),P(l.mipmask&1<<s,"missing mipmap data"),P(u.data||u.element||u.needsCopy,"missing image data"),J(l),I(u,Zt+t,o,a,s),Q(),R(u),d},d.resize=function(t){var e=0|t;if(e!==l.width){d.width=l.width=e,d.height=l.height=e,J(l);for(var r=0;r<6;++r)for(var i=0;l.mipmask>>i;++i)n.texImage2D(Zt+r,i,l.format,e>>i,e>>i,0,l.format,l.type,null);return Q(),u.profile&&(l.stats.size=En(l.internalformat,l.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=l,u.profile&&(d.stats=l.stats),d.destroy=function(){l.decRef()},d},clear:function(){for(var t=0;t<q;++t)n.activeTexture(Qe+t),n.bindTexture(Xt,null),Z[t]=null;ft(X).forEach(tt),s.cubeCount=0,s.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<q;++t){var e=Z[t];e&&(e.bindCount=0,e.unit=-1,Z[t]=null)}ft(X).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(t.target===Xt)n.texImage2D(Xt,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(Zt+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);H(t.texInfo,t.target)}))},refresh:function(){for(var t=0;t<q;++t){var e=Z[t];e&&(e.bindCount=0,e.unit=-1,Z[t]=null),n.activeTexture(Qe+t),n.bindTexture(Xt,null),n.bindTexture(qt,null)}}}}hn[ne]=2,hn[re]=2,hn[ie]=2,hn[le]=4,hn[pe]=.5,hn[ge]=.5,hn[ve]=1,hn[me]=1,hn[ye]=.5,hn[be]=1,hn[xe]=1,hn[we]=.5,hn[_e]=.25,hn[Ee]=.5,hn[Se]=.25,hn[Ce]=.5;var Cn=36161,kn=32854,Mn=[];function On(t,e,n){return Mn[t]*e*n}Mn[kn]=2,Mn[32855]=2,Mn[36194]=2,Mn[33189]=2,Mn[36168]=1,Mn[34041]=4,Mn[35907]=4,Mn[34836]=16,Mn[34842]=8,Mn[34843]=6;var Tn=function(t,e,n,r,i){var o={rgba4:kn,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(o.srgba=35907),e.ext_color_buffer_half_float&&(o.rgba16f=34842,o.rgb16f=34843),e.webgl_color_buffer_float&&(o.rgba32f=34836);var a=[];Object.keys(o).forEach((function(t){var e=o[t];a[e]=t}));var s=0,u={};function c(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=kn,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function l(e){var n=e.renderbuffer;P(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(Cn,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete u[e.id],r.renderbufferCount--}return c.prototype.decRef=function(){--this.refCount<=0&&l(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(u).forEach((function(e){t+=u[e].stats.size})),t}),{create:function(e,s){var l=new c(t.createRenderbuffer());function f(e,r){var s=0,u=0,c=kn;if("object"==typeof e&&e){var d=e;if("shape"in d){var h=d.shape;P(Array.isArray(h)&&h.length>=2,"invalid renderbuffer shape"),s=0|h[0],u=0|h[1]}else"radius"in d&&(s=u=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(u=0|d.height);"format"in d&&(P.parameter(d.format,o,"invalid renderbuffer format"),c=o[d.format])}else"number"==typeof e?(s=0|e,u="number"==typeof r?0|r:s):e?P.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(P(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||u!==l.height||c!==l.format)return f.width=l.width=s,f.height=l.height=u,l.format=c,t.bindRenderbuffer(Cn,l.renderbuffer),t.renderbufferStorage(Cn,c,s,u),P(0===t.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=On(l.format,l.width,l.height)),f.format=a[l.format],f}return u[l.id]=l,r.renderbufferCount++,f(e,s),f.resize=function(e,r){var o=0|e,a=0|r||o;return o===l.width&&a===l.height||(P(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=l.width=o,f.height=l.height=a,t.bindRenderbuffer(Cn,l.renderbuffer),t.renderbufferStorage(Cn,l.format,o,a),P(0===t.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=On(l.format,l.width,l.height))),f},f._reglType="renderbuffer",f._renderbuffer=l,i.profile&&(f.stats=l.stats),f.destroy=function(){l.decRef()},f},clear:function(){ft(u).forEach(l)},restore:function(){ft(u).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(Cn,e.renderbuffer),t.renderbufferStorage(Cn,e.format,e.width,e.height)})),t.bindRenderbuffer(Cn,null)}}},An=36160,Nn=36161,In=3553,Pn=34069,Dn=36064,Ln=36096,Rn=36128,jn=33306,Bn=36053,Fn=6402,zn=[6407,6408],$n=[];$n[6408]=4,$n[6407]=3;var Gn=[];Gn[5121]=1,Gn[5126]=4,Gn[36193]=2;var Vn=33189,Un=36168,Wn=34041,Hn=[32854,32855,36194,35907,34842,34843,34836],Yn={};Yn[Bn]="complete",Yn[36054]="incomplete attachment",Yn[36057]="incomplete dimensions",Yn[36055]="incomplete, missing attachment",Yn[36061]="unsupported";var Xn=5126,qn=34962;function Zn(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Xn,this.offset=0,this.stride=0,this.divisor=0}var Kn=35632,Jn=35633,Qn=35718,tr=35721;var er=6408,nr=5121,rr=3333,ir=5126;function or(e,n,r,i,o,a,s){function u(u){var c;null===n.next?(P(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=nr):(P(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(P(c===nr||c===ir,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===ir&&P(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):P(c===nr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var l=0,f=0,d=i.framebufferWidth,h=i.framebufferHeight,p=null;t(u)?p=u:u&&(P.type(u,"object","invalid arguments to regl.read()"),l=0|u.x,f=0|u.y,P(l>=0&&l<i.framebufferWidth,"invalid x offset for regl.read"),P(f>=0&&f<i.framebufferHeight,"invalid y offset for regl.read"),d=0|(u.width||i.framebufferWidth-l),h=0|(u.height||i.framebufferHeight-f),p=u.data||null),p&&(c===nr?P(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===ir&&P(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),P(d>0&&d+l<=i.framebufferWidth,"invalid width for read pixels"),P(h>0&&h+f<=i.framebufferHeight,"invalid height for read pixels"),r();var g=d*h*4;return p||(c===nr?p=new Uint8Array(g):c===ir&&(p=p||new Float32Array(g))),P.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),P(p.byteLength>=g,"data buffer for regl.read() too small"),e.pixelStorei(rr,4),e.readPixels(l,f,d,h,er,c,p),p}return function(t){return t&&"framebuffer"in t?function(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=u(t)})),e}(t):u(t)}}function ar(t){return Array.prototype.slice.call(t)}function sr(t){return ar(t).join("")}var ur="xyzw".split(""),cr=5121,lr=1,fr=2,dr=0,hr=1,pr=2,gr=3,vr=4,mr=5,yr=6,br="dither",xr="blend.enable",wr="blend.color",_r="blend.equation",Er="blend.func",Sr="depth.enable",Cr="depth.func",kr="depth.range",Mr="depth.mask",Or="colorMask",Tr="cull.enable",Ar="cull.face",Nr="frontFace",Ir="lineWidth",Pr="polygonOffset.enable",Dr="polygonOffset.offset",Lr="sample.alpha",Rr="sample.enable",jr="sample.coverage",Br="stencil.enable",Fr="stencil.mask",zr="stencil.func",$r="stencil.opFront",Gr="stencil.opBack",Vr="scissor.enable",Ur="scissor.box",Wr="viewport",Hr="profile",Yr="framebuffer",Xr="vert",qr="frag",Zr="elements",Kr="primitive",Jr="count",Qr="offset",ti="instances",ei="vao",ni="Width",ri="Height",ii=Yr+ni,oi=Yr+ri,ai=Wr+ni,si=Wr+ri,ui="drawingBuffer",ci=ui+ni,li=ui+ri,fi=[Er,_r,zr,$r,Gr,jr,Wr,Ur,Dr],di=34962,hi=34963,pi=3553,gi=34067,vi=2884,mi=3042,yi=3024,bi=2960,xi=2929,wi=3089,_i=32823,Ei=32926,Si=32928,Ci=5126,ki=35664,Mi=35665,Oi=35666,Ti=5124,Ai=35667,Ni=35668,Ii=35669,Pi=35670,Di=35671,Li=35672,Ri=35673,ji=35674,Bi=35675,Fi=35676,zi=35678,$i=35680,Gi=4,Vi=1028,Ui=1029,Wi=2304,Hi=2305,Yi=32775,Xi=32776,qi=519,Zi=7680,Ki=0,Ji=1,Qi=32774,to=513,eo=36160,no=36064,ro={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},io=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],oo={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ao={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},so={frag:35632,vert:35633},uo={cw:Wi,ccw:Hi};function co(e){return Array.isArray(e)||t(e)||lt(e)}function lo(t){return t.sort((function(t,e){return t===Wr?-1:e===Wr?1:t<e?-1:1}))}function fo(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function ho(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function po(t){return new fo(!1,!1,!1,t)}function go(t,e){var n=t.type;if(n===dr){var r=t.data.length;return new fo(!0,r>=1,r>=2,e)}if(n===vr){var i=t.data;return new fo(i.thisDep,i.contextDep,i.propDep,e)}if(n===mr)return new fo(!1,!1,!1,e);if(n===yr){for(var o=!1,a=!1,s=!1,u=0;u<t.data.length;++u){var c=t.data[u];if(c.type===hr)s=!0;else if(c.type===pr)a=!0;else if(c.type===gr)o=!0;else if(c.type===dr){o=!0;var l=c.data;l>=1&&(a=!0),l>=2&&(s=!0)}else c.type===vr&&(o=o||c.data.thisDep,a=a||c.data.contextDep,s=s||c.data.propDep)}return new fo(o,a,s,e)}return new fo(n===gr,n===pr,n===hr,e)}var vo=new fo(!1,!1,!1,(function(){}));function mo(t,n,r,i,o,a,s,u,c,l,f,d,h,p,g){var v=l.Record,m={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(m.min=Yi,m.max=Xi);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,x={dirty:!0,profile:g.profile},w={},_=[],E={},S={};function C(t){return t.replace(".","_")}function k(t,e,n){var r=C(t);_.push(t),w[r]=x[r]=!!n,E[r]=e}function M(t,e,n){var r=C(t);_.push(t),Array.isArray(n)?(x[r]=n.slice(),w[r]=n.slice()):x[r]=w[r]=n,S[r]=e}k(br,yi),k(xr,mi),M(wr,"blendColor",[0,0,0,0]),M(_r,"blendEquationSeparate",[Qi,Qi]),M(Er,"blendFuncSeparate",[Ji,Ki,Ji,Ki]),k(Sr,xi,!0),M(Cr,"depthFunc",to),M(kr,"depthRange",[0,1]),M(Mr,"depthMask",!0),M(Or,Or,[!0,!0,!0,!0]),k(Tr,vi),M(Ar,"cullFace",Ui),M(Nr,Nr,Hi),M(Ir,Ir,1),k(Pr,_i),M(Dr,"polygonOffset",[0,0]),k(Lr,Ei),k(Rr,Si),M(jr,"sampleCoverage",[1,!1]),k(Br,bi),M(Fr,"stencilMask",-1),M(zr,"stencilFunc",[qi,0,-1]),M($r,"stencilOpSeparate",[Vi,Zi,Zi,Zi]),M(Gr,"stencilOpSeparate",[Ui,Zi,Zi,Zi]),k(Vr,wi),M(Ur,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),M(Wr,Wr,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var O={gl:t,context:h,strings:n,next:w,current:x,draw:d,elements:a,buffer:o,shader:f,attributes:l.state,vao:l,uniforms:c,framebuffer:u,extensions:r,timer:p,isBufferArgs:co},T={primTypes:Ot,compareFuncs:oo,blendFuncs:ro,blendEquations:m,stencilOps:ao,glTypes:vt,orientationType:uo};P.optional((function(){O.isArrayLike=Wt})),b&&(T.backBuffer=[Ui],T.drawBuffer=X(i.maxDrawbuffers,(function(t){return 0===t?[0]:X(t,(function(t){return no+t}))})));var A=0;function N(){var t=function(){var t=0,n=[],r=[];function i(){var n=[],r=[];return e((function(){n.push.apply(n,ar(arguments))}),{def:function(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,ar(arguments)),n.push(";")),e},toString:function(){return sr([r.length>0?"var "+r.join(",")+";":"",sr(n)])}})}function o(){var t=i(),n=i(),r=t.toString,o=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,ar(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+o()}})}var a=i(),s={};return{global:a,link:function(e){for(var i=0;i<r.length;++i)if(r[i]===e)return n[i];var o="g"+t++;return n.push(o),r.push(e),o},block:i,proc:function(t,n){var r=[];function i(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var a=0;a<n;++a)i();var u=o(),c=u.toString;return s[t]=e(u,{arg:i,toString:function(){return sr(["function(",r.join(),"){",c(),"}"])}})},scope:o,cond:function(){var t=sr(arguments),n=o(),r=o(),i=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,ar(arguments)),this},else:function(){return r.apply(r,ar(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),sr(["if(",t,"){",i(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(s).forEach((function(e){t.push('"',e,'":',s[e].toString(),",")})),t.push("}");var e=sr(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,r)}}}(),r=t.link,i=t.global;t.id=A++,t.batchId="0";var o=r(O),a=t.shared={props:"a0"};Object.keys(O).forEach((function(t){a[t]=i.def(o,".",t)})),P.optional((function(){t.CHECK=r(P),t.commandStr=P.guessCommand(),t.command=r(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},T.invalidBlendCombinations=io}));var s=t.next={},u=t.current={};Object.keys(S).forEach((function(t){Array.isArray(x[t])&&(s[t]=i.def(a.next,".",t),u[t]=i.def(a.current,".",t))}));var c=t.constants={};Object.keys(T).forEach((function(t){c[t]=i.def(JSON.stringify(T[t]))})),t.invoke=function(e,n){switch(n.type){case dr:var i=["this",a.context,a.props,t.batchId];return e.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case hr:return e.def(a.props,n.data);case pr:return e.def(a.context,n.data);case gr:return e.def("this",n.data);case vr:return n.data.append(t,e),n.data.ref;case mr:return n.data.toString();case yr:return n.data.map((function(n){return t.invoke(e,n)}))}},t.attribCache={};var f={};return t.scopeAttrib=function(t){var e=n.id(t);if(e in f)return f[e];var i=l.scope[e];return i||(i=l.scope[e]=new v),f[e]=r(i)},t}function I(t,e,s,c,d){var h=t.static,p=t.dynamic;P.optional((function(){var t=[Yr,Xr,qr,Zr,Kr,Qr,Jr,ti,Hr,ei].concat(_);function e(e){Object.keys(e).forEach((function(e){P.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',d.commandStr)}))}e(h),e(p)}));var g=function(t,e){var n=t.static;if("string"==typeof n[qr]&&"string"==typeof n[Xr]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var o=[],a=0;a<i.length;++a)P("number"==typeof r[i[a]],"must specify all vertex attribute locations when using vaos"),o.push([0|r[i[a]],i[a]]);return o}}return null}(t,e),b=function(t,e){var n=t.static,r=t.dynamic;if(Yr in n){var i=n[Yr];return i?(i=u.getFramebuffer(i),P.command(i,"invalid framebuffer object"),po((function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+ii,n+".width"),e.set(o,"."+oi,n+".height"),n}))):po((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+ii,r+"."+ci),e.set(r,"."+oi,r+"."+li),"null"}))}if(Yr in r){var o=r[Yr];return go(o,(function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");P.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(i,".next",a);var s=r.context;return e.set(s,"."+ii,a+"?"+a+".width:"+s+"."+ci),e.set(s,"."+oi,a+"?"+a+".height:"+s+"."+li),a}))}return null}(t),x=function(t,e,n){var r=t.static,i=t.dynamic;function o(t){if(t in r){var o=r[t];P.commandType(o,"object","invalid "+t,n.commandStr);var a,s,u=!0,c=0|o.x,l=0|o.y;return"width"in o?(a=0|o.width,P.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in o?(s=0|o.height,P.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new fo(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in o||(r=e.def(n,".",ii,"-",c));var i=s;return"height"in o||(i=e.def(n,".",oi,"-",l)),[c,l,r,i]}))}if(t in i){var f=i[t],d=go(f,(function(e,n){var r=e.invoke(n,f);P.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",ii,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",oi,"-",a,")");return P.optional((function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)})),[o,a,s,u]}));return e&&(d.thisDep=d.thisDep||e.thisDep,d.contextDep=d.contextDep||e.contextDep,d.propDep=d.propDep||e.propDep),d}return e?new fo(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",ii),e.def(n,".",oi)]})):null}var a=o(Wr);if(a){var s=a;a=new fo(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+ai,n[2]),e.set(r,"."+si,n[3]),n}))}return{viewport:a,scissor_box:o(Ur)}}(t,b,d),w=function(t,e){var n=t.static,r=t.dynamic,i=function(){if(Zr in n){var t=n[Zr];co(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),P.command(t,"invalid elements",e.commandStr));var i=po((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return i.value=t,i}if(Zr in r){var o=r[Zr];return go(o,(function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,a=t.invoke(e,o),s=e.def("null"),u=e.def(r,"(",a,")"),c=t.cond(u).then(s,"=",i,".createStream(",a,");").else(s,"=",i,".getElements(",a,");");return P.optional((function(){t.assert(c.else,"!"+a+"||"+s,"invalid elements")})),e.entry(c),e.exit(t.cond(u).then(i,".destroyStream(",s,");")),t.ELEMENTS=s,s}))}return null}();function o(t,o){if(t in n){var a=0|n[t];return P.command(!o||a>=0,"invalid "+t,e.commandStr),po((function(t,e){return o&&(t.OFFSET=a),a}))}if(t in r){var s=r[t];return go(s,(function(e,n){var r=e.invoke(n,s);return o&&(e.OFFSET=r,P.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return o&&i?po((function(t,e){return t.OFFSET="0",0})):null}var s=o(Qr,!0);return{elements:i,primitive:function(){if(Kr in n){var t=n[Kr];return P.commandParameter(t,Ot,"invalid primitve",e.commandStr),po((function(e,n){return Ot[t]}))}if(Kr in r){var o=r[Kr];return go(o,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,o);return P.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Ot))})),e.def(n,"[",r,"]")}))}return i?ho(i)?i.value?po((function(t,e){return e.def(t.ELEMENTS,".primType")})):po((function(){return Gi})):new fo(i.thisDep,i.contextDep,i.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",Gi)})):null}(),count:function(){if(Jr in n){var t=0|n[Jr];return P.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),po((function(){return t}))}if(Jr in r){var o=r[Jr];return go(o,(function(t,e){var n=t.invoke(e,o);return P.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(i){if(ho(i)){if(i)return s?new fo(s.thisDep,s.contextDep,s.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return P.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):po((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=po((function(){return-1}));return P.optional((function(){a.MISSING=!0})),a}var u=new fo(i.thisDep||s.thisDep,i.contextDep||s.contextDep,i.propDep||s.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return P.optional((function(){u.DYNAMIC=!0})),u}return null}(),instances:o(ti,!1),offset:s}}(t,d),E=function(t,e){var n=t.static,r=t.dynamic,o={};return _.forEach((function(t){var a=C(t);function s(e,i){if(t in n){var s=e(n[t]);o[a]=po((function(){return s}))}else if(t in r){var u=r[t];o[a]=go(u,(function(t,e){return i(t,e,t.invoke(e,u))}))}}switch(t){case Tr:case xr:case br:case Br:case Sr:case Vr:case Pr:case Lr:case Rr:case Mr:return s((function(n){return P.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return P.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case Cr:return s((function(n){return P.commandParameter(n,oo,"invalid "+t,e.commandStr),oo[n]}),(function(e,n,r){var i=e.constants.compareFuncs;return P.optional((function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(oo))})),n.def(i,"[",r,"]")}));case kr:return s((function(t){return P.command(Wt(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return P.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case Er:return s((function(t){P.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return P.commandParameter(n,ro,a+".srcRGB",e.commandStr),P.commandParameter(r,ro,a+".srcAlpha",e.commandStr),P.commandParameter(i,ro,a+".dstRGB",e.commandStr),P.commandParameter(o,ro,a+".dstAlpha",e.commandStr),P.command(-1===io.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[ro[n],ro[i],ro[r],ro[o]]}),(function(e,n,r){var i=e.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return P.optional((function(){e.assert(n,s+" in "+i,"invalid "+t+"."+o+a+", must be one of "+Object.keys(ro))})),s}P.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");P.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]");return[u,n.def(i,"[",s,"]"),c,n.def(i,"[",o("dst","Alpha"),"]")]}));case _r:return s((function(n){return"string"==typeof n?(P.commandParameter(n,m,"invalid "+t,e.commandStr),[m[n],m[n]]):"object"==typeof n?(P.commandParameter(n.rgb,m,t+".rgb",e.commandStr),P.commandParameter(n.alpha,m,t+".alpha",e.commandStr),[m[n.rgb],m[n.alpha]]):void P.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return P.optional((function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(m))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case wr:return s((function(t){return P.command(Wt(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),X(4,(function(e){return+t[e]}))}),(function(t,e,n){return P.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),X(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case Fr:return s((function(t){return P.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return P.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case zr:return s((function(n){P.commandType(n,"object",a,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return P.commandParameter(r,oo,t+".cmp",e.commandStr),P.commandType(i,"number",t+".ref",e.commandStr),P.commandType(o,"number",t+".mask",e.commandStr),[oo[r],i,o]}),(function(t,e,n){var r=t.constants.compareFuncs;return P.optional((function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Zi),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case $r:case Gr:return s((function(n){P.commandType(n,"object",a,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return P.commandParameter(r,ao,t+".fail",e.commandStr),P.commandParameter(i,ao,t+".zfail",e.commandStr),P.commandParameter(o,ao,t+".zpass",e.commandStr),[t===Gr?Ui:Vi,ao[r],ao[i],ao[o]]}),(function(e,n,r){var i=e.constants.stencilOps;function o(o){return P.optional((function(){e.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+t+"."+o+", must be one of "+Object.keys(ao))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",Zi)}return P.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[t===Gr?Ui:Vi,o("fail"),o("zfail"),o("zpass")]}));case Dr:return s((function(t){P.commandType(t,"object",a,e.commandStr);var n=0|t.factor,r=0|t.units;return P.commandType(n,"number",a+".factor",e.commandStr),P.commandType(r,"number",a+".units",e.commandStr),[n,r]}),(function(e,n,r){return P.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case Ar:return s((function(t){var n=0;return"front"===t?n=Vi:"back"===t&&(n=Ui),P.command(!!n,a,e.commandStr),n}),(function(t,e,n){return P.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',Vi,":",Ui)}));case Ir:return s((function(t){return P.command("number"==typeof t&&t>=i.lineWidthDims[0]&&t<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return P.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case Nr:return s((function(t){return P.commandParameter(t,uo,a,e.commandStr),uo[t]}),(function(t,e,n){return P.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?'+Wi+":"+Hi)}));case Or:return s((function(t){return P.command(Wt(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return P.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),X(4,(function(t){return"!!"+n+"["+t+"]"}))}));case jr:return s((function(t){P.command("object"==typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return P.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return P.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),o}(t,d),S=function(t,e,r){var i=t.static,o=t.dynamic;function a(t){if(t in i){var e=n.id(i[t]);P.optional((function(){f.shader(so[t],e,P.guessCommand())}));var r=po((function(){return e}));return r.id=e,r}if(t in o){var a=o[t];return go(a,(function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return P.optional((function(){n(e.shared.shader,".shader(",so[t],",",i,",",e.command,");")})),i}))}return null}var s,u=a(qr),c=a(Xr),l=null;return ho(u)&&ho(c)?(l=f.program(c.id,u.id,null,r),s=po((function(t,e){return t.link(l)}))):s=new fo(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,(function(t,e){var n,r=t.shared.shader;n=u?u.append(t,e):e.def(r,".",qr);var i=r+".program("+(c?c.append(t,e):e.def(r,".",Xr))+","+n;return P.optional((function(){i+=","+t.command})),e.def(i+")")})),{frag:u,vert:c,progVar:s,program:l}}(t,0,g);function k(t){var e=x[t];e&&(E[t]=e)}k(Wr),k(C(Ur));var M=Object.keys(E).length>0,O={framebuffer:b,draw:w,shader:S,state:E,dirty:M,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(O.profile=function(t){var e,n=t.static,r=t.dynamic;if(Hr in n){var i=!!n[Hr];(e=po((function(t,e){return i}))).enable=i}else if(Hr in r){var o=r[Hr];e=go(o,(function(t,e){return t.invoke(e,o)}))}return e}(t),O.uniforms=function(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach((function(t){var r,o=n[t];if("number"==typeof o||"boolean"==typeof o)r=po((function(){return o}));else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=po((function(t){return t.link(o)})):"framebuffer"===a||"framebufferCube"===a?(P.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=po((function(t){return t.link(o.color[0])}))):P.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else Wt(o)?r=po((function(e){return e.global.def("[",X(o.length,(function(n){return P.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+t,e.commandStr),o[n]})),"]")})):P.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];i[t]=go(e,(function(t,n){return t.invoke(n,e)}))})),i}(s,d),O.drawVAO=O.scopeVAO=function(t,e){var n=t.static,r=t.dynamic;if(ei in n){var i=n[ei];return null!==i&&null===l.getVAO(i)&&(i=l.createVAO(i)),po((function(t){return t.link(l.getVAO(i))}))}if(ei in r){var o=r[ei];return go(o,(function(t,e){var n=t.invoke(e,o);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}(t),!O.drawVAO&&S.program&&!g&&r.angle_instanced_arrays){var T=!0,A=S.program.attributes.map((function(t){var n=e.static[t];return T=T&&!!n,n}));if(T&&A.length>0){var N=l.getVAO(l.createVAO(A));O.drawVAO=new fo(null,null,null,(function(t,e){return t.link(N)})),O.useVAO=!0}}return g?O.useVAO=!0:O.attributes=function(t,e){var r=t.static,i=t.dynamic,a={};return Object.keys(r).forEach((function(t){var i=r[t],s=n.id(t),u=new v;if(co(i))u.state=lr,u.buffer=o.getBuffer(o.create(i,di,!1,!0)),u.type=0;else{var c=o.getBuffer(i);if(c)u.state=lr,u.buffer=c,u.type=0;else if(P.command("object"==typeof i&&i,"invalid data for attribute "+t,e.commandStr),"constant"in i){var l=i.constant;u.buffer="null",u.state=fr,"number"==typeof l?u.x=l:(P.command(Wt(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,e.commandStr),ur.forEach((function(t,e){e<l.length&&(u[t]=l[e])})))}else{c=co(i.buffer)?o.getBuffer(o.create(i.buffer,di,!1,!0)):o.getBuffer(i.buffer),P.command(!!c,'missing buffer for attribute "'+t+'"',e.commandStr);var f=0|i.offset;P.command(f>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var d=0|i.stride;P.command(d>=0&&d<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var h=0|i.size;P.command(!("size"in i)||h>0&&h<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var p=!!i.normalized,g=0;"type"in i&&(P.commandParameter(i.type,vt,"invalid type for attribute "+t,e.commandStr),g=vt[i.type]);var m=0|i.divisor;"divisor"in i&&(P.command(0===m||y,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),P.command(m>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),P.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(e){P.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),u.buffer=c,u.state=lr,u.size=h,u.normalized=p,u.type=g||c.dtype,u.offset=f,u.stride=d,u.divisor=m}}a[t]=po((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(t){r[t]=u[t]})),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(t){var e=i[t];a[t]=go(e,(function(n,r){var i=n.invoke(r,e),o=n.shared,a=n.constants,s=o.isBufferArgs,u=o.buffer;P.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},l=new v;l.state=lr,Object.keys(l).forEach((function(t){c[t]=r.def(""+l[t])}));var f=c.buffer,d=c.type;function h(t){r(c[t],"=",i,".",t,"|0;")}return r("if(",s,"(",i,")){",c.isStream,"=true;",f,"=",u,".createStream(",di,",",i,");",d,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",i,");","if(",f,"){",d,"=",f,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",fr,";","if(typeof "+i+'.constant === "number"){',c[ur[0]],"=",i,".constant;",ur.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",ur.map((function(t,e){return c[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",f,"=",u,".createStream(",di,",",i,".buffer);","}else{",f,"=",u,".getBuffer(",i,".buffer);","}",d,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",f,".dtype;",c.normalized,"=!!",i,".normalized;"),h("size"),h("offset"),h("stride"),h("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",f,");","}"),c}))})),a}(e,d),O.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=po((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=go(e,(function(t,n){return t.invoke(n,e)}))})),r}(c),O}function D(t,e,n){var r=t.shared.context,i=t.scope();Object.keys(n).forEach((function(o){e.save(r,"."+o);var a=n[o].append(t,e);Array.isArray(a)?i(r,".",o,"=[",a.join(),"];"):i(r,".",o,"=",a,";")})),e(i)}function L(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;b&&(i=e.def(o.extensions,".webgl_draw_buffers"));var u,c=t.constants,l=c.drawBuffer,f=c.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",eo,",",u,".framebuffer);"),b&&e(i,".drawBuffersWEBGL(",l,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",eo,",null);"),b&&e(i,".drawBuffersWEBGL(",f,");"),e("}",s,".cur=",u,";"),r||e("}")}function R(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,u=r.next,c=t.cond(s,".dirty");_.forEach((function(e){var r,l,f=C(e);if(!(f in n.state))if(f in a){r=a[f],l=o[f];var d=X(x[f].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(d.map((function(t,e){return t+"!=="+l+"["+e+"]"})).join("||")).then(i,".",S[f],"(",d,");",d.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(u,".",f);var h=t.cond(r,"!==",s,".",f);c(h),f in E?h(t.cond(r).then(i,".enable(",E[f],");").else(i,".disable(",E[f],");"),s,".",f,"=",r,";"):h(i,".",S[f],"(",r,");",s,".",f,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),e(c)}function j(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;lo(Object.keys(n)).forEach((function(i){var u=n[i];if(!r||r(u)){var c=u.append(t,e);if(E[i]){var l=E[i];ho(u)?e(s,c?".enable(":".disable(",l,");"):e(t.cond(c).then(s,".enable(",l,");").else(s,".disable(",l,");")),e(a,".",i,"=",c,";")}else if(Wt(c)){var f=o[i];e(s,".",S[i],"(",c,");",c.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";")}else e(s,".",S[i],"(",c,");",a,".",i,"=",c,";")}}))}function B(t,e){y&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function F(t,e,n,r,i){var o,a,s,u=t.shared,c=t.stats,l=u.current,f=u.timer,d=n.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function g(t){t(o=e.def(),"=",h(),";"),"string"==typeof i?t(c,".count+=",i,";"):t(c,".count++;"),p&&(r?t(a=e.def(),"=",f,".getNumPendingQueries();"):t(f,".beginQuery(",c,");"))}function v(t){t(c,".cpuTime+=",h(),"-",o,";"),p&&(r?t(f,".pushScopeStats(",a,",",f,".getNumPendingQueries(),",c,");"):t(f,".endQuery();"))}function m(t){var n=e.def(l,".profile");e(l,".profile=",t,";"),e.exit(l,".profile=",n,";")}if(d){if(ho(d))return void(d.enable?(g(e),v(e.exit),m("true")):m("false"));m(s=d.append(t,e))}else s=e.def(l,".profile");var y=t.block();g(y),e("if(",s,"){",y,"}");var b=t.block();v(b),e.exit("if(",s,"){",b,"}")}function z(t,e,n,r,i){var o=t.shared;r.forEach((function(r){var a,s=r.name,u=n.attributes[s];if(u){if(!i(u))return;a=u.append(t,e)}else{if(!i(vo))return;var c=t.scopeAttrib(s);P.optional((function(){t.assert(e,c+".state","missing attribute "+s)})),a={},Object.keys(new v).forEach((function(t){a[t]=e.def(c,".",t)}))}!function(n,r,i){var a=o.gl,s=e.def(n,".location"),u=e.def(o.attributes,"[",s,"]"),c=i.state,l=i.buffer,f=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];function h(){e("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",u,".type!==",o,"||",u,".size!==",n,"||",d.map((function(t){return u+"."+t+"!=="+i[t]})).join("||"),"){",a,".bindBuffer(",di,",",l,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",u,".type=",o,";",u,".size=",n,";",d.map((function(t){return u+"."+t+"="+i[t]+";"})).join(""),"}"),y){var c=i.divisor;e("if(",u,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function p(){e("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",ur.map((function(t,e){return u+"."+t+"!=="+f[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",f,");",ur.map((function(t,e){return u+"."+t+"="+f[e]+";"})).join(""),"}")}c===lr?h():c===fr?p():(e("if(",c,"===",lr,"){"),h(),e("}else{"),p(),e("}"))}(t.link(r),function(t){switch(t){case ki:case Ai:case Di:return 2;case Mi:case Ni:case Li:return 3;case Oi:case Ii:case Ri:return 4;default:return 1}}(r.info.type),a)}))}function $(t,e,r,i,o){for(var a,s=t.shared,u=s.gl,c=0;c<i.length;++c){var l,f=i[c],d=f.name,h=f.info.type,p=r.uniforms[d],g=t.link(f)+".location";if(p){if(!o(p))continue;if(ho(p)){var v=p.value;if(P.command(null!=v,'missing uniform "'+d+'"',t.commandStr),h===zi||h===$i){P.command("function"==typeof v&&(h===zi&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||h===$i&&("textureCube"===v._reglType||"framebufferCube"===v._reglType)),"invalid texture for uniform "+d,t.commandStr);var m=t.link(v._texture||v.color[0]._texture);e(u,".uniform1i(",g,",",m+".bind());"),e.exit(m,".unbind();")}else if(h===ji||h===Bi||h===Fi){P.optional((function(){P.command(Wt(v),"invalid matrix for uniform "+d,t.commandStr),P.command(h===ji&&4===v.length||h===Bi&&9===v.length||h===Fi&&16===v.length,"invalid length for matrix uniform "+d,t.commandStr)}));var y=t.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),b=2;h===Bi?b=3:h===Fi&&(b=4),e(u,".uniformMatrix",b,"fv(",g,",false,",y,");")}else{switch(h){case Ci:P.commandType(v,"number","uniform "+d,t.commandStr),a="1f";break;case ki:P.command(Wt(v)&&2===v.length,"uniform "+d,t.commandStr),a="2f";break;case Mi:P.command(Wt(v)&&3===v.length,"uniform "+d,t.commandStr),a="3f";break;case Oi:P.command(Wt(v)&&4===v.length,"uniform "+d,t.commandStr),a="4f";break;case Pi:P.commandType(v,"boolean","uniform "+d,t.commandStr),a="1i";break;case Ti:P.commandType(v,"number","uniform "+d,t.commandStr),a="1i";break;case Di:case Ai:P.command(Wt(v)&&2===v.length,"uniform "+d,t.commandStr),a="2i";break;case Li:case Ni:P.command(Wt(v)&&3===v.length,"uniform "+d,t.commandStr),a="3i";break;case Ri:case Ii:P.command(Wt(v)&&4===v.length,"uniform "+d,t.commandStr),a="4i"}e(u,".uniform",a,"(",g,",",Wt(v)?Array.prototype.slice.call(v):v,");")}continue}l=p.append(t,e)}else{if(!o(vo))continue;l=e.def(s.uniforms,"[",n.id(d),"]")}h===zi?(P(!Array.isArray(l),"must specify a scalar prop for textures"),e("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}")):h===$i&&(P(!Array.isArray(l),"must specify a scalar prop for cube maps"),e("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}")),P.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+d+'".  '+r)}function r(t){P(!Array.isArray(l),"must not specify an array type for uniform"),n("typeof "+l+'==="'+t+'"',"invalid type, expected "+t)}function i(e,r){Array.isArray(l)?P(l.length===e,"must have length "+e):n(s.isArrayLike+"("+l+")&&"+l+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function o(e){P(!Array.isArray(l),"must not specify a value type"),n("typeof "+l+'==="function"&&'+l+'._reglType==="texture'+(e===pi?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(h){case Ti:r("number");break;case Ai:i(2);break;case Ni:i(3);break;case Ii:i(4);break;case Ci:r("number");break;case ki:i(2);break;case Mi:i(3);break;case Oi:i(4);break;case Pi:r("boolean");break;case Di:i(2);break;case Li:i(3);break;case Ri:case ji:i(4);break;case Bi:i(9);break;case Fi:i(16);break;case zi:o(pi);break;case $i:o(gi)}}));var x=1;switch(h){case zi:case $i:var w=e.def(l,"._texture");e(u,".uniform1i(",g,",",w,".bind());"),e.exit(w,".unbind();");continue;case Ti:case Pi:a="1i";break;case Ai:case Di:a="2i",x=2;break;case Ni:case Li:a="3i",x=3;break;case Ii:case Ri:a="4i",x=4;break;case Ci:a="1f";break;case ki:a="2f",x=2;break;case Mi:a="3f",x=3;break;case Oi:a="4f",x=4;break;case ji:a="Matrix2fv";break;case Bi:a="Matrix3fv";break;case Fi:a="Matrix4fv"}if(e(u,".uniform",a,"(",g,","),"M"===a.charAt(0)){var _=Math.pow(h-ji+2,2),E=t.global.def("new Float32Array(",_,")");Array.isArray(l)?e("false,(",X(_,(function(t){return E+"["+t+"]="+l[t]})),",",E,")"):e("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",X(_,(function(t){return E+"["+t+"]="+l+"["+t+"]"})),",",E,")")}else x>1?e(X(x,(function(t){return Array.isArray(l)?l[t]:l+"["+t+"]"}))):(P(!Array.isArray(l),"uniform value must not be an array"),e(l));e(");")}}function V(t,e,n,r){var i=t.shared,o=i.gl,a=i.draw,s=r.draw;var u=function(){var i,u=s.elements,c=e;return u?((u.contextDep&&r.contextDynamic||u.propDep)&&(c=n),i=u.append(t,c)):i=c.def(a,".",Zr),i&&c("if("+i+")"+o+".bindBuffer("+hi+","+i+".buffer.buffer);"),i}();function c(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(a,".",i)}var l,f,d=c(Kr),h=c(Qr),p=function(){var i,o=s.count,u=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(u=n),i=o.append(t,u),P.optional((function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(u,i+">=0","missing vertex count")}))):(i=u.def(a,".",Jr),P.optional((function(){t.assert(u,i+">=0","missing vertex count")}))),i}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");y&&(l=c(ti),f=t.instancing);var g=u+".type",v=s.elements&&ho(s.elements);function m(){function t(){n(f,".drawElementsInstancedANGLE(",[d,p,g,h+"<<(("+g+"-"+cr+")>>1)",l],");")}function e(){n(f,".drawArraysInstancedANGLE(",[d,h,p,l],");")}u?v?t():(n("if(",u,"){"),t(),n("}else{"),e(),n("}")):e()}function b(){function t(){n(o+".drawElements("+[d,p,g,h+"<<(("+g+"-"+cr+")>>1)"]+");")}function e(){n(o+".drawArrays("+[d,h,p]+");")}u?v?t():(n("if(",u,"){"),t(),n("}else{"),e(),n("}")):e()}y&&("number"!=typeof l||l>=0)?"string"==typeof l?(n("if(",l,">0){"),m(),n("}else if(",l,"<0){"),b(),n("}")):m():b()}function U(t,e,n,r,i){var o=N(),a=o.proc("body",i);return P.optional((function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function W(t,e,n,r){B(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),z(t,e,n,r.attributes,(function(){return!0}))),$(t,e,n,r.uniforms,(function(){return!0})),V(t,e,e,n)}function H(t,e,n,r){function i(){return!0}t.batchId="a1",B(t,e),z(t,e,n,r.attributes,i),$(t,e,n,r.uniforms,i),V(t,e,e,n)}function Y(t,e,n,r){B(t,e);var i=n.contextDep,o=e.def(),a=e.def();t.shared.props=a,t.batchId=o;var s=t.scope(),u=t.scope();function c(t){return t.contextDep&&i||t.propDep}function l(t){return!c(t)}if(e(s.entry,"for(",o,"=0;",o,"<","a1",";++",o,"){",a,"=","a0","[",o,"];",u,"}",s.exit),n.needsContext&&D(t,u,n.context),n.needsFramebuffer&&L(t,u,n.framebuffer),j(t,u,n.state,c),n.profile&&c(n.profile)&&F(t,u,n,!1,!0),r)n.useVAO?n.drawVAO?c(n.drawVAO)?u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):s(t.shared.vao,".setVAO(",n.drawVAO.append(t,s),");"):s(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(s(t.shared.vao,".setVAO(null);"),z(t,s,n,r.attributes,l),z(t,u,n,r.attributes,c)),$(t,s,n,r.uniforms,l),$(t,u,n,r.uniforms,c),V(t,s,u,n);else{var f=t.global.def("{}"),d=n.shader.progVar.append(t,u),h=u.def(d,".id"),p=u.def(f,"[",h,"]");u(t.shared.gl,".useProgram(",d,".program);","if(!",p,"){",p,"=",f,"[",h,"]=",t.link((function(e){return U(H,t,n,e,2)})),"(",d,");}",p,".call(this,a0[",o,"],",o,");")}}function q(t,e,n){var r=e.static[n];if(r&&function(t){if("object"==typeof t&&!Wt(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(G.isDynamic(t[e[n]]))return!0;return!1}}(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,u=!1,c=t.global.def("{}");o.forEach((function(e){var n=r[e];if(G.isDynamic(n)){"function"==typeof n&&(n=r[e]=G.unbox(n));var o=go(n,null);a=a||o.thisDep,u=u||o.propDep,s=s||o.contextDep}else{switch(i(c,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n))}i(";")}})),e.dynamic[n]=new G.DynamicVariable(vr,{thisDep:a,contextDep:s,propDep:u,ref:c,append:function(t,e){o.forEach((function(n){var i=r[n];if(G.isDynamic(i)){var o=t.invoke(e,i);e(c,".",n,"=",o,";")}}))}}),delete e.static[n]}}return{next:w,current:x,procs:function(){var t=N(),e=t.proc("poll"),n=t.proc("refresh"),o=t.block();e(o),n(o);var a,s=t.shared,u=s.gl,c=s.next,l=s.current;o(l,".dirty=false;"),L(t,e),L(t,n,null,!0),y&&(a=t.link(y)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<i.maxAttributes;++f){var d=n.def(s.attributes,"[",f,"]"),h=t.cond(d,".buffer");h.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",di,",",d,".buffer.buffer);",u,".vertexAttribPointer(",f,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),n(h),y&&n(a,".vertexAttribDivisorANGLE(",f,",",d,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(E).forEach((function(r){var i=E[r],a=o.def(c,".",r),s=t.block();s("if(",a,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",l,".",r,"=",a,";"),n(s),e("if(",a,"!==",l,".",r,"){",s,"}")})),Object.keys(S).forEach((function(r){var i,a,s=S[r],f=x[r],d=t.block();if(d(u,".",s,"("),Wt(f)){var h=f.length;i=t.global.def(c,".",r),a=t.global.def(l,".",r),d(X(h,(function(t){return i+"["+t+"]"})),");",X(h,(function(t){return a+"["+t+"]="+i+"["+t+"];"})).join("")),e("if(",X(h,(function(t){return i+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",d,"}")}else i=o.def(c,".",r),a=o.def(l,".",r),d(i,");",l,".",r,"=",i,";"),e("if(",i,"!==",a,"){",d,"}");n(d)})),t.compile()}(),compile:function(t,r,i,o,a){var s=N();s.stats=s.link(a),Object.keys(r.static).forEach((function(t){q(s,r,t)})),fi.forEach((function(e){q(s,t,e)}));var u=I(t,r,i,o,s);return function(t,e){var n=t.proc("draw",1);B(t,n),D(t,n,e.context),L(t,n,e.framebuffer),R(t,n,e),j(t,n,e.state),F(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)W(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link((function(n){return U(W,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(s,u),function(t,e){var r=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;function a(n){var o=e.shader[n];o&&r.set(i.shader,"."+n,o.append(t,r))}D(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),lo(Object.keys(e.state)).forEach((function(n){var o=e.state[n].append(t,r);Wt(o)?o.forEach((function(e,i){r.set(t.next[n],"["+i+"]",e)})):r.set(i.next,"."+n,o)})),F(t,r,e,!0,!0),[Zr,Qr,Jr,ti,Kr].forEach((function(n){var o=e.draw[n];o&&r.set(i.draw,"."+n,""+o.append(t,r))})),Object.keys(e.uniforms).forEach((function(o){var a=e.uniforms[o].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+n.id(o)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var i=e.attributes[n].append(t,r),o=t.scopeAttrib(n);Object.keys(new v).forEach((function(t){r.set(o,"."+t,i[t])}))})),e.scopeVAO&&r.set(i.vao,".targetVAO",e.scopeVAO.append(t,r)),a(Xr),a(qr),Object.keys(e.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}(s,u),function(t,e){var n=t.proc("batch",2);t.batchId="0",B(t,n);var r=!1,i=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(D(t,n,e.context),i=!1);var o=e.framebuffer,a=!1;function s(t){return t.contextDep&&r||t.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||L(t,n,o)):L(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),R(t,n,e),j(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||F(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=i,e.needsFramebuffer=a;var u=e.shader.progVar;if(u.contextDep&&r||u.propDep)Y(t,n,e,null);else{var c=u.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)Y(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var l=t.global.def("{}"),f=n.def(c,".id"),d=n.def(l,"[",f,"]");n(t.cond(d).then(d,".call(this,a0,a1);").else(d,"=",l,"[",f,"]=",t.link((function(n){return U(Y,t,e,n,2)})),"(",c,");",d,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(s,u),e(s.compile(),{destroy:function(){u.shader.program.destroy()}})}}}var yo=34918,bo=34919,xo=35007,wo=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(t){n.push(t)}var i=[];function o(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[];function s(t){a.push(t)}var u=[];function c(t,e,n){var r=a.pop()||new o;r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,u.push(r)}var l=[],f=[];return{beginQuery:function(t){var r=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(xo,r),i.push(r),c(i.length-1,i.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(xo)},pushScopeStats:c,update:function(){var t,n,o=i.length;if(0!==o){f.length=Math.max(f.length,o+1),l.length=Math.max(l.length,o+1),l[0]=0,f[0]=0;var a=0;for(t=0,n=0;n<i.length;++n){var c=i[n];e.ext_disjoint_timer_query.getQueryObjectEXT(c,bo)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,yo),r(c)):i[t++]=c,l[n+1]=a,f[n+1]=t}for(i.length=t,t=0,n=0;n<u.length;++n){var d=u[n],h=d.startQueryIndex,p=d.endQueryIndex;d.sum+=l[p]-l[h];var g=f[h],v=f[p];v===g?(d.stats.gpuTime+=d.sum/1e6,s(d)):(d.startQueryIndex=g,d.endQueryIndex=v,u[t++]=d)}u.length=t}},getNumPendingQueries:function(){return i.length},clear:function(){n.push.apply(n,i);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);i.length=0,n.length=0},restore:function(){i.length=0,n.length=0}}},_o=16384,Eo=256,So=1024,Co=34962,ko="webglcontextlost",Mo="webglcontextrestored",Oo=1,To=2,Ao=3;function No(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}return function(n){var r=Y(n);if(!r)return null;var i=r.gl,o=i.getContextAttributes(),a=i.isContextLost(),s=function(t,e){var n={};function r(e){P.type(e,"string","extension name must be string");var r,i=e.toLowerCase();try{r=n[i]=t.getExtension(i)}catch(t){}return!!r}for(var i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!r(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}(i,r);if(!s)return null;var u,c,l=(u={"":0},c=[""],{id:function(t){var e=u[t];return e||(e=u[t]=c.length,c.push(t),e)},str:function(t){return c[t]}}),f={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=s.extensions,h=wo(i,d),p=U(),g=i.drawingBufferWidth,v=i.drawingBufferHeight,m={tick:0,time:0,viewportWidth:g,viewportHeight:v,framebufferWidth:g,framebufferHeight:v,drawingBufferWidth:g,drawingBufferHeight:v,pixelRatio:r.pixelRatio},y=ct(i,d),b=function(e,n,r,i){var o=0,a={};function s(t){this.id=o++,this.buffer=e.createBuffer(),this.type=t,this.usage=xt,this.byteLength=0,this.dimension=1,this.dtype=_t,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var u=[];function c(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function l(e,n,r,i,o,a){var s,u;if(e.usage=r,Array.isArray(n)){if(e.dtype=i||Et,n.length>0)if(Array.isArray(n[0])){s=bt(n);for(var l=1,f=1;f<s.length;++f)l*=s[f];e.dimension=l,c(e,u=yt(n,s,e.dtype),r),a?e.persistentData=u:it.freeType(u)}else if("number"==typeof n[0]){e.dimension=o;var d=it.allocType(e.dtype,n.length);kt(d,n),c(e,d,r),a?e.persistentData=d:it.freeType(d)}else t(n[0])?(e.dimension=n[0].length,e.dtype=i||Ct(n[0])||Et,c(e,u=yt(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=u:it.freeType(u)):P.raise("invalid buffer data")}else if(t(n))e.dtype=i||Ct(n),e.dimension=o,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(lt(n)){s=n.shape;var h=n.stride,p=n.offset,g=0,v=0,m=0,y=0;1===s.length?(g=s[0],v=1,m=h[0],y=0):2===s.length?(g=s[0],v=s[1],m=h[0],y=h[1]):P.raise("invalid shape"),e.dtype=i||Ct(n.data)||Et,e.dimension=v;var b=it.allocType(e.dtype,g*v);Mt(b,n.data,g,v,m,y,p),c(e,b,r),a?e.persistentData=b:it.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=_t,e.dimension=o,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):P.raise("invalid buffer data")}function f(t){n.bufferCount--,i(t);var r=t.buffer;P(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:function(i,o,u,c){n.bufferCount++;var d=new s(o);function h(n){var i=xt,o=null,a=0,s=0,u=1;return Array.isArray(n)||t(n)||lt(n)||n instanceof ArrayBuffer?o=n:"number"==typeof n?a=0|n:n&&(P.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(P(null===o||Array.isArray(o)||t(o)||lt(o),"invalid data for buffer"),o=n.data),"usage"in n&&(P.parameter(n.usage,mt,"invalid buffer usage"),i=mt[n.usage]),"type"in n&&(P.parameter(n.type,vt,"invalid buffer type"),s=vt[n.type]),"dimension"in n&&(P.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(P.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),d.bind(),o?l(d,o,i,s,u,c):(a&&e.bufferData(d.type,a,i),d.dtype=s||_t,d.usage=i,d.dimension=u,d.byteLength=a),r.profile&&(d.stats.size=d.byteLength*St[d.dtype]),h}function p(t,n){P(n+t.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+d.byteLength),e.bufferSubData(d.type,n,t)}return a[d.id]=d,u||h(i),h._reglType="buffer",h._buffer=d,h.subdata=function(e,n){var r,i=0|(n||0);if(d.bind(),t(e)||e instanceof ArrayBuffer)p(e,i);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var o=it.allocType(d.dtype,e.length);kt(o,e),p(o,i),it.freeType(o)}else if(Array.isArray(e[0])||t(e[0])){r=bt(e);var a=yt(e,r,d.dtype);p(a,i),it.freeType(a)}else P.raise("invalid buffer data")}else if(lt(e)){r=e.shape;var s=e.stride,u=0,c=0,l=0,f=0;1===r.length?(u=r[0],c=1,l=s[0],f=0):2===r.length?(u=r[0],c=r[1],l=s[0],f=s[1]):P.raise("invalid shape");var g=Array.isArray(e.data)?d.dtype:Ct(e.data),v=it.allocType(g,u*c);Mt(v,e.data,u,c,l,f,e.offset),p(v,i),it.freeType(v)}else P.raise("invalid data for buffer subdata");return h},r.profile&&(h.stats=d.stats),h.destroy=function(){f(d)},h},createStream:function(t,e){var n=u.pop();return n||(n=new s(t)),n.bind(),l(n,e,wt,0,1,!1),n},destroyStream:function(t){u.push(t)},clear:function(){ft(a).forEach(f),u.forEach(f)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:function(){ft(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:l}}(i,f,r,(function(t){return x.destroyBuffer(t)})),x=function(e,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),u=0;u<a;++u)s[u]=new Zn;var c=0,l={},f={Record:Zn,scope:{},state:s,currentVAO:null,targetVAO:null,restore:d()?function(){d()&&ft(l).forEach((function(t){t.refresh()}))}:function(){},createVAO:function(e){var r=new p;function s(e){P(Array.isArray(e),"arguments to vertex array constructor must be an array"),P(e.length<a,"too many attributes"),P(e.length>0,"must specify at least one attribute");var i={},u=r.attributes;u.length=e.length;for(var c=0;c<e.length;++c){var l,f=e[c],d=u[c]=new Zn,h=f.data||f;Array.isArray(h)||t(h)||lt(h)?(r.buffers[c]&&(l=r.buffers[c],t(h)&&l._buffer.byteLength>=h.byteLength?l.subdata(h):(l.destroy(),r.buffers[c]=null)),r.buffers[c]||(l=r.buffers[c]=o.create(f,qn,!1,!0)),d.buffer=o.getBuffer(l),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1,i[c]=1):o.getBuffer(f)?(d.buffer=o.getBuffer(f),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):o.getBuffer(f.buffer)?(d.buffer=o.getBuffer(f.buffer),d.size=0|(+f.size||d.buffer.dimension),d.normalized=!!f.normalized||!1,"type"in f?(P.parameter(f.type,vt,"invalid buffer type"),d.type=vt[f.type]):d.type=d.buffer.dtype,d.offset=0|(f.offset||0),d.stride=0|(f.stride||0),d.divisor=0|(f.divisor||0),d.state=1,P(d.size>=1&&d.size<=4,"size must be between 1 and 4"),P(d.offset>=0,"invalid offset"),P(d.stride>=0&&d.stride<=255,"stride must be between 0 and 255"),P(d.divisor>=0,"divisor must be positive"),P(!d.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in f?(P(c>0,"first attribute must not be a constant"),d.x=+f.x||0,d.y=+f.y||0,d.z=+f.z||0,d.w=+f.w||0,d.state=2):P(!1,"invalid attribute spec for location "+c)}for(var p=0;p<r.buffers.length;++p)!i[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},s._vao=r,s._reglType="vao",s(e)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}},setVAO:d()?function(t){if(t!==f.currentVAO){var e=d();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),f.currentVAO=t}}:function(t){if(t!==f.currentVAO){if(t)t.bindAttrs();else for(var n=h(),r=0;r<s.length;++r){var i=s[r];i.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}f.currentVAO=t}},clear:d()?function(){ft(l).forEach((function(t){t.destroy()}))}:function(){}};function d(){return n.oes_vertex_array_object}function h(){return n.angle_instanced_arrays}function p(){this.id=++c,this.attributes=[];var t=d();this.vao=t?t.createVertexArrayOES():null,l[this.id]=this,this.buffers=[]}return p.prototype.bindAttrs=function(){for(var t=h(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(qn,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)e.disableVertexAttribArray(o)},p.prototype.refresh=function(){var t=d();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),f.currentVAO=this)},p.prototype.destroy=function(){if(this.vao){var t=d();this===f.currentVAO&&(f.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}l[this.id]&&(delete l[this.id],i.vaoCount-=1)},f}(i,d,y,f,b),w=function(e,n,r,i){var o={},a=0,s={uint8:Pt,uint16:Lt};function u(t){this.id=a++,o[this.id]=this,this.buffer=t,this.primType=Nt,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=jt),u.prototype.bind=function(){this.buffer.bind()};var c=[];function l(i,o,a,s,u,c,l){var f;if(i.buffer.bind(),o){var d=l;l||t(o)&&(!lt(o)||t(o.data))||(d=n.oes_element_index_uint?jt:Lt),r._initBuffer(i.buffer,o,a,d,3)}else e.bufferData(Bt,c,a),i.buffer.dtype=f||Pt,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=c;if(f=l,!l){switch(i.buffer.dtype){case Pt:case It:f=Pt;break;case Lt:case Dt:f=Lt;break;case jt:case Rt:f=jt;break;default:P.raise("unsupported type for element array")}i.buffer.dtype=f}i.type=f,P(f!==jt||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=u;h<0&&(h=i.buffer.byteLength,f===Lt?h>>=1:f===jt&&(h>>=2)),i.vertCount=h;var p=s;if(s<0){p=Nt;var g=i.buffer.dimension;1===g&&(p=Tt),2===g&&(p=At),3===g&&(p=Nt)}i.primType=p}function f(t){i.elementsCount--,P(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,n){var o=r.create(null,Bt,!0),a=new u(o._buffer);function c(e){if(e)if("number"==typeof e)o(e),a.primType=Nt,a.vertCount=0|e,a.type=Pt;else{var n=null,r=zt,i=-1,u=-1,f=0,d=0;Array.isArray(e)||t(e)||lt(e)?n=e:(P.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,P(Array.isArray(n)||t(n)||lt(n),"invalid data for element buffer")),"usage"in e&&(P.parameter(e.usage,mt,"invalid element buffer usage"),r=mt[e.usage]),"primitive"in e&&(P.parameter(e.primitive,Ot,"invalid element buffer primitive"),i=Ot[e.primitive]),"count"in e&&(P("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(P.parameter(e.type,s,"invalid buffer type"),d=s[e.type]),"length"in e?f=0|e.length:(f=u,d===Lt||d===Dt?f*=2:d!==jt&&d!==Rt||(f*=4))),l(a,n,r,i,u,f,d)}else o(),a.primType=Nt,a.vertCount=0,a.type=Pt;return c}return i.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return o.subdata(t,e),c},c.destroy=function(){f(a)},c},createStream:function(t){var e=c.pop();return e||(e=new u(r.create(null,Bt,!0,!1)._buffer)),l(e,t,Ft,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof u?t._elements:null},clear:function(){ft(o).forEach(f)}}}(i,d,b,f),_=function(t,n,r,i){var o={},a={};function s(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function u(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function c(e,r,i){var s=e===Kn?o:a,u=s[r];if(!u){var c=n.str(r);u=t.createShader(e),t.shaderSource(u,c),t.compileShader(u),P.shaderError(t,u,c,e,i),s[r]=u}return u}var l={},f=[],d=0;function h(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,o){var a,l,f=c(Kn,e.fragId),d=c(Jn,e.vertId),h=e.program=t.createProgram();if(t.attachShader(h,f),t.attachShader(h,d),o)for(a=0;a<o.length;++a){var p=o[a];t.bindAttribLocation(h,p[0],p[1])}t.linkProgram(h),P.linkError(t,h,n.str(e.fragId),n.str(e.vertId),r);var g=t.getProgramParameter(h,Qn);i.profile&&(e.stats.uniformsCount=g);var v=e.uniforms;for(a=0;a<g;++a)if(l=t.getActiveUniform(h,a))if(l.size>1)for(var m=0;m<l.size;++m){var y=l.name.replace("[0]","["+m+"]");u(v,new s(y,n.id(y),t.getUniformLocation(h,y),l))}else u(v,new s(l.name,n.id(l.name),t.getUniformLocation(h,l.name),l));var b=t.getProgramParameter(h,tr);i.profile&&(e.stats.attributesCount=b);var x=e.attributes;for(a=0;a<b;++a)(l=t.getActiveAttrib(h,a))&&u(x,new s(l.name,n.id(l.name),t.getAttribLocation(h,l.name),l))}return i.profile&&(r.getMaxUniformsCount=function(){var t=0;return f.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return f.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);ft(o).forEach(e),o={},ft(a).forEach(e),a={},f.forEach((function(e){t.deleteProgram(e.program)})),f.length=0,l={},r.shaderCount=0},program:function(n,i,s,u){P.command(n>=0,"missing vertex shader",s),P.command(i>=0,"missing fragment shader",s);var c=l[i];c||(c=l[i]={});var d=c[n];if(d&&(d.refCount++,!u))return d;var g=new h(i,n);return r.shaderCount++,p(g,s,u),d||(c[n]=g),f.push(g),e(g,{destroy:function(){if(g.refCount--,g.refCount<=0){t.deleteProgram(g.program);var e=f.indexOf(g);f.splice(e,1),r.shaderCount--}c[g.vertId].refCount<=0&&(t.deleteShader(a[g.vertId]),delete a[g.vertId],delete l[g.fragId][g.vertId]),Object.keys(l[g.fragId]).length||(t.deleteShader(o[g.fragId]),delete o[g.fragId],delete l[g.fragId])}})},restore:function(){o={},a={};for(var t=0;t<f.length;++t)p(f[t],null,f[t].attributes.map((function(t){return[t.location,t.name]})))},shader:c,frag:-1,vert:-1}}(i,l,f,r),E=Sn(i,d,y,(function(){k.procs.poll()}),m,f,r),S=Tn(i,d,y,f,r),C=function(t,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var l=["uint8"];function f(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function d(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function h(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);P(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;P(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(e,n){n&&(n.texture?t.framebufferTexture2D(An,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(An,e,Nn,n.renderbuffer._renderbuffer.renderbuffer))}function g(t){var e=In,n=null,r=null,i=t;"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),P.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,P(e===In)):"textureCube"===o?(n=i,P(e>=Pn&&e<Pn+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=Nn):P.raise("invalid regl object for attachment"),new f(e,n,r)}function v(t,e,n,r,a){if(n){var s=i.create2D({width:t,height:e,format:r,type:a});return s._texture.refCount=0,new f(In,s,null)}var u=o.create({width:t,height:e,format:r});return u._renderbuffer.refCount=0,new f(Nn,null,u)}function m(t){return t&&(t.texture||t.renderbuffer)}function y(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&l.push("half float","float16"),n.oes_texture_float&&l.push("float","float32");var b=0,x={};function w(){this.id=b++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function _(t){t.colorAttachments.forEach(d),d(t.depthAttachment),d(t.stencilAttachment),d(t.depthStencilAttachment)}function E(e){var n=e.framebuffer;P(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete x[e.id]}function S(e){var n;t.bindFramebuffer(An,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)p(Dn+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(An,Dn+n,In,null,0);t.framebufferTexture2D(An,jn,In,null,0),t.framebufferTexture2D(An,Ln,In,null,0),t.framebufferTexture2D(An,Rn,In,null,0),p(Ln,e.depthAttachment),p(Rn,e.stencilAttachment),p(jn,e.depthStencilAttachment);var o=t.checkFramebufferStatus(An);t.isContextLost()||o===Bn||P.raise("framebuffer configuration not supported, status = "+Yn[o]),t.bindFramebuffer(An,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function C(t,i){var o=new w;function f(t,e){var i;P(s.next!==o,"can not update framebuffer which is currently in use");var a=0,d=0,p=!0,y=!0,b=null,x=!0,w="rgba",E="uint8",C=1,k=null,M=null,O=null,T=!1;if("number"==typeof t)a=0|t,d=0|e||a;else if(t){P.type(t,"object","invalid arguments for framebuffer");var A=t;if("shape"in A){var N=A.shape;P(Array.isArray(N)&&N.length>=2,"invalid shape for framebuffer"),a=N[0],d=N[1]}else"radius"in A&&(a=d=A.radius),"width"in A&&(a=A.width),"height"in A&&(d=A.height);("color"in A||"colors"in A)&&(b=A.color||A.colors,Array.isArray(b)&&P(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in A&&(C=0|A.colorCount,P(C>0,"invalid color buffer count")),"colorTexture"in A&&(x=!!A.colorTexture,w="rgba4"),"colorType"in A&&(E=A.colorType,x?(P(n.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),P(n.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(P(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==E&&"float32"!==E||(P(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),P.oneOf(E,l,"invalid color type")),"colorFormat"in A&&(w=A.colorFormat,u.indexOf(w)>=0?x=!0:c.indexOf(w)>=0?x=!1:x?P.oneOf(A.colorFormat,u,"invalid color format for texture"):P.oneOf(A.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in A||"depthStencilTexture"in A)&&(T=!(!A.depthTexture&&!A.depthStencilTexture),P(!T||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in A&&("boolean"==typeof A.depth?p=A.depth:(k=A.depth,y=!1)),"stencil"in A&&("boolean"==typeof A.stencil?y=A.stencil:(M=A.stencil,p=!1)),"depthStencil"in A&&("boolean"==typeof A.depthStencil?p=y=A.depthStencil:(O=A.depthStencil,p=!1,y=!1))}else a=d=1;var I=null,D=null,L=null,R=null;if(Array.isArray(b))I=b.map(g);else if(b)I=[g(b)];else for(I=new Array(C),i=0;i<C;++i)I[i]=v(a,d,x,w,E);P(n.webgl_draw_buffers||I.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),P(I.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||I[0].width,d=d||I[0].height,k?D=g(k):p&&!y&&(D=v(a,d,T,"depth","uint32")),M?L=g(M):y&&!p&&(L=v(a,d,!1,"stencil","uint8")),O?R=g(O):!k&&!M&&y&&p&&(R=v(a,d,T,"depth stencil","depth stencil")),P(!!k+!!M+!!O<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var j=null;for(i=0;i<I.length;++i)if(h(I[i],a,d),P(!I[i]||I[i].texture&&zn.indexOf(I[i].texture._texture.format)>=0||I[i].renderbuffer&&Hn.indexOf(I[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),I[i]&&I[i].texture){var B=$n[I[i].texture._texture.format]*Gn[I[i].texture._texture.type];null===j?j=B:P(j===B,"all color attachments much have the same number of bits per pixel.")}return h(D,a,d),P(!D||D.texture&&D.texture._texture.format===Fn||D.renderbuffer&&D.renderbuffer._renderbuffer.format===Vn,"invalid depth attachment for framebuffer object"),h(L,a,d),P(!L||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Un,"invalid stencil attachment for framebuffer object"),h(R,a,d),P(!R||R.texture&&R.texture._texture.format===Wn||R.renderbuffer&&R.renderbuffer._renderbuffer.format===Wn,"invalid depth-stencil attachment for framebuffer object"),_(o),o.width=a,o.height=d,o.colorAttachments=I,o.depthAttachment=D,o.stencilAttachment=L,o.depthStencilAttachment=R,f.color=I.map(m),f.depth=m(D),f.stencil=m(L),f.depthStencil=m(R),f.width=o.width,f.height=o.height,S(o),f}return a.framebufferCount++,f(t,i),e(f,{resize:function(t,e){P(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===o.width&&r===o.height)return f;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=f.width=n,o.height=f.height=r,S(o),f},_reglType:"framebuffer",_framebuffer:o,destroy:function(){E(o),_(o)},use:function(t){s.setFBO({framebuffer:f},t)}})}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof w)return e}return null},create:C,createCube:function(t){var o=Array(6);function a(t){var r;P(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,f={color:null},d=0,h=null,p="rgba",g="uint8",v=1;if("number"==typeof t)d=0|t;else if(t){P.type(t,"object","invalid arguments for framebuffer");var m=t;if("shape"in m){var y=m.shape;P(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),P(y[0]===y[1],"cube framebuffer must be square"),d=y[0]}else"radius"in m&&(d=0|m.radius),"width"in m?(d=0|m.width,"height"in m&&P(m.height===d,"must be square")):"height"in m&&(d=0|m.height);("color"in m||"colors"in m)&&(h=m.color||m.colors,Array.isArray(h)&&P(1===h.length||n.webgl_draw_buffers,"multiple render targets not supported")),h||("colorCount"in m&&(v=0|m.colorCount,P(v>0,"invalid color buffer count")),"colorType"in m&&(P.oneOf(m.colorType,l,"invalid color type"),g=m.colorType),"colorFormat"in m&&(p=m.colorFormat,P.oneOf(m.colorFormat,u,"invalid color format for texture"))),"depth"in m&&(f.depth=m.depth),"stencil"in m&&(f.stencil=m.stencil),"depthStencil"in m&&(f.depthStencil=m.depthStencil)}else d=1;if(h)if(Array.isArray(h))for(c=[],r=0;r<h.length;++r)c[r]=h[r];else c=[h];else{c=Array(v);var b={radius:d,format:p,type:g};for(r=0;r<v;++r)c[r]=i.createCube(b)}for(f.color=Array(c.length),r=0;r<c.length;++r){var x=c[r];P("function"==typeof x&&"textureCube"===x._reglType,"invalid cube map"),d=d||x.width,P(x.width===d&&x.height===d,"invalid cube map shape"),f.color[r]={target:Pn,data:c[r]}}for(r=0;r<6;++r){for(var w=0;w<c.length;++w)f.color[w].target=Pn+r;r>0&&(f.depth=o[0].depth,f.stencil=o[0].stencil,f.depthStencil=o[0].depthStencil),o[r]?o[r](f):o[r]=C(f)}return e(a,{width:d,height:d,color:c})}return a(t),e(a,{faces:o,resize:function(t){var e,n=0|t;if(P(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;e<6;++e)o[e].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){o.forEach((function(t){t.destroy()}))}})},clear:function(){ft(x).forEach(E)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,ft(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),S(e)}))}})}(i,d,y,E,S,f),k=mo(i,l,d,y,b,w,0,C,{},x,_,{elements:null,primitive:4,count:-1,offset:0,instances:-1},m,h,r),M=or(i,C,k.procs.poll,m,o,d,y),O=k.next,T=i.canvas,A=[],N=[],I=[],D=[r.onDestroy],L=null;function R(){if(0===A.length)return h&&h.update(),void(L=null);L=V.next(R),Z();for(var t=A.length-1;t>=0;--t){var e=A[t];e&&e(m,null,0)}i.flush(),h&&h.update()}function j(){!L&&A.length>0&&(L=V.next(R))}function B(){L&&(V.cancel(R),L=null)}function F(t){t.preventDefault(),a=!0,B(),N.forEach((function(t){t()}))}function z(t){i.getError(),a=!1,s.restore(),_.restore(),b.restore(),E.restore(),S.restore(),C.restore(),x.restore(),h&&h.restore(),k.procs.refresh(),j(),I.forEach((function(t){t()}))}function $(t){function n(t,e){var n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];if(G.isDynamic(o))r[i]=G.unbox(o,i);else{if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(G.isDynamic(o[a]))return void(r[i]=G.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}P(!!t,"invalid args to regl({...})"),P.type(t,"object","invalid args to regl({...})");var r=n(t.context||{},!0),i=n(t.uniforms||{},!0),o=n(t.attributes||{},!1),s=n(function(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}(t),!1),u={gpuTime:0,cpuTime:0,count:0},c=k.compile(s,o,i,r,u),l=c.draw,f=c.batch,d=c.scope,h=[];return e((function(t,e){var n;if(a&&P.raise("context lost"),"function"==typeof t)return d.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)d.call(this,null,e,n);else{if(!Array.isArray(t))return d.call(this,t,e,0);for(n=0;n<t.length;++n)d.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return f.call(this,function(t){for(;h.length<t;)h.push(null);return h}(0|t),0|t)}else{if(!Array.isArray(t))return l.call(this,t);if(t.length)return f.call(this,t,t.length)}}),{stats:u,destroy:function(){c.destroy()}})}T&&(T.addEventListener(ko,F,!1),T.addEventListener(Mo,z,!1));var W=C.setFBO=$({framebuffer:G.define.call(null,Oo,"framebuffer")});function H(t,e){var n=0;k.procs.poll();var r=e.color;r&&(i.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=_o),"depth"in e&&(i.clearDepth(+e.depth),n|=Eo),"stencil"in e&&(i.clearStencil(0|e.stencil),n|=So),P(!!n,"called regl.clear with no buffer specified"),i.clear(n)}function X(t){return P.type(t,"function","regl.frame() callback must be a function"),A.push(t),j(),{cancel:function(){var e=No(A,t);P(e>=0,"cannot cancel a frame twice"),A[e]=function t(){var e=No(A,t);A[e]=A[A.length-1],A.length-=1,A.length<=0&&B()}}}}function q(){var t=O.viewport,e=O.scissor_box;t[0]=t[1]=e[0]=e[1]=0,m.viewportWidth=m.framebufferWidth=m.drawingBufferWidth=t[2]=e[2]=i.drawingBufferWidth,m.viewportHeight=m.framebufferHeight=m.drawingBufferHeight=t[3]=e[3]=i.drawingBufferHeight}function Z(){m.tick+=1,m.time=J(),q(),k.procs.poll()}function K(){E.refresh(),q(),k.procs.refresh(),h&&h.update()}function J(){return(U()-p)/1e3}K();var Q=e($,{clear:function(t){if(P("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)W(e({framebuffer:t.framebuffer.faces[n]},t),H);else W(t,H);else H(0,t)},prop:G.define.bind(null,Oo),context:G.define.bind(null,To),this:G.define.bind(null,Ao),draw:$({}),buffer:function(t){return b.create(t,Co,!1,!1)},elements:function(t){return w.create(t,!1)},texture:E.create2D,cube:E.createCube,renderbuffer:S.create,framebuffer:C.create,framebufferCube:C.createCube,vao:x.createVAO,attributes:o,frame:X,on:function(t,e){var n;switch(P.type(e,"function","listener callback must be a function"),t){case"frame":return X(e);case"lost":n=N;break;case"restore":n=I;break;case"destroy":n=D;break;default:P.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:y,hasExtension:function(t){return y.extensions.indexOf(t.toLowerCase())>=0},read:M,destroy:function(){A.length=0,B(),T&&(T.removeEventListener(ko,F),T.removeEventListener(Mo,z)),_.clear(),C.clear(),S.clear(),E.clear(),w.clear(),b.clear(),x.clear(),h&&h.clear(),D.forEach((function(t){t()}))},_gl:i,_refresh:K,poll:function(){Z(),h&&h.update()},now:J,stats:f});return r.onDone(null,Q),Q}}()},6851:function(t,e,n){"use strict";var r=n(5171),i=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(t){for(var e=[],n=0,a=t.length;n<a;n++){var s=t[n];r(s)?e=i.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},8971:function(t,e,n){var r=n(2195),i=n(9015),o=[n(9257)];t.exports=r.createStore(i,o)},9257:function(t,e,n){t.exports=function(){return n(5703),{}}},5703:function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(t){return t<10?"0"+t:t}function this_value(){return this.valueOf()}function quote(t){return rx_escapable.lastIndex=0,rx_escapable.test(t)?'"'+t.replace(rx_escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var n,r,i,o,a,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;n<o;n+=1)a[n]=str(n,u)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(i=str(r=rep[n],u))&&a.push(quote(r)+(gap?": ":":")+i);else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=str(r,u))&&a.push(quote(r)+(gap?": ":":")+i);return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var n,r,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(t,e,i)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},2195:function(t,e,n){var r=n(9078),i=r.slice,o=r.pluck,a=r.each,s=r.bind,u=r.create,c=r.isList,l=r.isFunction,f=r.isObject;t.exports={createStore:h};var d={version:"2.0.12",enabled:!1,get:function(t,e){var n=this.storage.read(this._namespacePrefix+t);return this._deserialize(n,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(t){var e=this;this.storage.each((function(n,r){t.call(e,e._deserialize(n),(r||"").replace(e._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return h.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return h(this.storage,this.plugins,t)}};function h(t,e,n){n||(n=""),t&&!c(t)&&(t=[t]),e&&!c(e)&&(e=[e]);var r=n?"__storejs_"+n+"_":"",h=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var p={_namespacePrefix:r,_namespaceRegexp:h,_testStorage:function(t){try{var e="__storejs__test__";t.write(e,e);var n=t.read(e)===e;return t.remove(e),n}catch(t){return!1}},_assignPluginFnProp:function(t,e){var n=this[e];this[e]=function(){var e=i(arguments,0),r=this,o=[function(){if(n)return a(arguments,(function(t,n){e[n]=t})),n.apply(r,e)}].concat(e);return t.apply(r,o)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(t,e){if(!t)return e;var n="";try{n=JSON.parse(t)}catch(e){n=t}return void 0!==n?n:e},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(t){var e=this;if(c(t))a(t,(function(t){e._addPlugin(t)}));else if(!o(this.plugins,(function(e){return t===e}))){if(this.plugins.push(t),!l(t))throw new Error("Plugins must be function values that return objects");var n=t.call(this);if(!f(n))throw new Error("Plugins must return an object of function properties");a(n,(function(n,r){if(!l(n))throw new Error("Bad plugin property: "+r+" from plugin "+t.name+". Plugins should only return functions.");e._assignPluginFnProp(n,r)}))}},addStorage:function(t){!function(){var t="undefined"==typeof console?null:console;t&&(t.warn?t.warn:t.log).apply(t,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},g=u(p,d,{plugins:[]});return g.raw={},a(g,(function(t,e){l(t)&&(g.raw[e]=s(g,t))})),a(t,(function(t){g._addStorage(t)})),a(e,(function(t){g._addPlugin(t)})),g}},9078:function(t,e,n){var r=Object.assign?Object.assign:function(t,e,n,r){for(var i=1;i<arguments.length;i++)u(Object(arguments[i]),(function(e,n){t[n]=e}));return t},i=function(){if(Object.create)return function(t,e,n,i){var o=s(arguments,1);return r.apply(this,[Object.create(t)].concat(o))};{function t(){}return function(e,n,i,o){var a=s(arguments,1);return t.prototype=e,r.apply(this,[new t].concat(a))}}}(),o=String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},a="undefined"!=typeof window?window:n.g;function s(t,e){return Array.prototype.slice.call(t,e||0)}function u(t,e){c(t,(function(t,n){return e(t,n),!1}))}function c(t,e){if(l(t)){for(var n=0;n<t.length;n++)if(e(t[n],n))return t[n]}else for(var r in t)if(t.hasOwnProperty(r)&&e(t[r],r))return t[r]}function l(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}t.exports={assign:r,create:i,trim:o,bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:s,each:u,map:function(t,e){var n=l(t)?[]:{};return c(t,(function(t,r){return n[r]=e(t,r),!1})),n},pluck:c,isList:l,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:a}},9015:function(t,e,n){t.exports=[n(9627),n(5347),n(4524),n(5580),n(8855),n(8728)]},5580:function(t,e,n){var r=n(9078),i=r.Global,o=r.trim;t.exports={name:"cookieStorage",read:function(t){if(!t||!c(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(a.cookie.replace(new RegExp(e),"$1"))},write:function(t,e){t&&(a.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:s,remove:u,clearAll:function(){s((function(t,e){u(e)}))}};var a=i.document;function s(t){for(var e=a.cookie.split(/; ?/g),n=e.length-1;n>=0;n--)if(o(e[n])){var r=e[n].split("="),i=unescape(r[0]);t(unescape(r[1]),i)}}function u(t){t&&c(t)&&(a.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function c(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(a.cookie)}},9627:function(t,e,n){var r=n(9078).Global;function i(){return r.localStorage}function o(t){return i().getItem(t)}t.exports={name:"localStorage",read:o,write:function(t,e){return i().setItem(t,e)},each:function(t){for(var e=i().length-1;e>=0;e--){var n=i().key(e);t(o(n),n)}},remove:function(t){return i().removeItem(t)},clearAll:function(){return i().clear()}}},8728:function(t){t.exports={name:"memoryStorage",read:function(t){return e[t]},write:function(t,n){e[t]=n},each:function(t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},remove:function(t){delete e[t]},clearAll:function(t){e={}}};var e={}},5347:function(t,e,n){var r=n(9078).Global;t.exports={name:"oldFF-globalStorage",read:function(t){return i[t]},write:function(t,e){i[t]=e},each:o,remove:function(t){return i.removeItem(t)},clearAll:function(){o((function(t,e){delete i[t]}))}};var i=r.globalStorage;function o(t){for(var e=i.length-1;e>=0;e--){var n=i.key(e);t(i[n],n)}}},4524:function(t,e,n){var r=n(9078).Global;t.exports={name:"oldIE-userDataStorage",write:function(t,e){if(!s){var n=c(t);a((function(t){t.setAttribute(n,e),t.save(i)}))}},read:function(t){if(!s){var e=c(t),n=null;return a((function(t){n=t.getAttribute(e)})),n}},each:function(t){a((function(e){for(var n=e.XMLDocument.documentElement.attributes,r=n.length-1;r>=0;r--){var i=n[r];t(e.getAttribute(i.name),i.name)}}))},remove:function(t){var e=c(t);a((function(t){t.removeAttribute(e),t.save(i)}))},clearAll:function(){a((function(t){var e=t.XMLDocument.documentElement.attributes;t.load(i);for(var n=e.length-1;n>=0;n--)t.removeAttribute(e[n].name);t.save(i)}))}};var i="storejs",o=r.document,a=function(){if(!o||!o.documentElement||!o.documentElement.addBehavior)return null;var t,e,n,r="script";try{(e=new ActiveXObject("htmlfile")).open(),e.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),e.close(),t=e.w.frames[0].document,n=t.createElement("div")}catch(e){n=o.createElement("div"),t=o.body}return function(e){var r=[].slice.call(arguments,0);r.unshift(n),t.appendChild(n),n.addBehavior("#default#userData"),n.load(i),e.apply(this,r),t.removeChild(n)}}(),s=(r.navigator?r.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function c(t){return t.replace(/^\d/,"___$&").replace(u,"___")}},8855:function(t,e,n){var r=n(9078).Global;function i(){return r.sessionStorage}function o(t){return i().getItem(t)}t.exports={name:"sessionStorage",read:o,write:function(t,e){return i().setItem(t,e)},each:function(t){for(var e=i().length-1;e>=0;e--){var n=i().key(e);t(o(n),n)}},remove:function(t){return i().removeItem(t)},clearAll:function(){return i().clear()}}},7575:function(t,e,n){!function(){"use strict";var e=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},r=function(t){return{eq:t}},i=r((function(t,e){return t===e})),o=function(t){return r((function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!t.eq(e[i],n[i]))return!1;return!0}))},a=function(t){return r((function(e,n){var a=Object.keys(e),s=Object.keys(n);if(!function(t,e){return function(t,e){return r((function(n,r){return t.eq(e(n),e(r))}))}(o(t),(function(t){return function(t,e){return Array.prototype.slice.call(t).sort(e)}(t,e)}))}(i).eq(a,s))return!1;for(var u=a.length,c=0;c<u;c++){var l=a[c];if(!t.eq(e[l],n[l]))return!1}return!0}))},s=r((function(t,n){if(t===n)return!0;var r=e(t);return r===e(n)&&(function(t){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(t)}(r)?t===n:"array"===r?o(s).eq(t,n):"object"===r&&a(s).eq(t,n))})),u=function(t){return function(e){return r=typeof(n=e),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===t;var n,r}},c=function(t){return function(e){return typeof e===t}},l=function(t){return function(e){return t===e}},f=u("string"),d=u("object"),h=u("array"),p=l(null),g=c("boolean"),v=l(void 0),m=function(t){return null==t},y=function(t){return!m(t)},b=c("function"),x=c("number"),w=function(){},_=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},E=function(t,e){return function(n){return t(e(n))}},S=function(t){return function(){return t}},C=function(t){return t},k=function(t,e){return t===e};function M(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.concat(n);return t.apply(null,i)}}var O=function(t){return function(e){return!t(e)}},T=function(t){return t()},A=function(t){t()},N=S(!1),I=S(!0),P=function(){return D},D=function(){var t=function(t){return t()},e=C;return{fold:function(t,e){return t()},isSome:N,isNone:I,getOr:e,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:S(null),getOrUndefined:S(void 0),or:e,orThunk:t,map:P,each:w,bind:P,exists:N,forall:I,filter:function(){return P()},toArray:function(){return[]},toString:S("none()")}}(),L=function(t){var e=S(t),n=function(){return i},r=function(e){return e(t)},i={fold:function(e,n){return n(t)},isSome:I,isNone:N,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return L(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?i:D},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},R={some:L,none:P,from:function(t){return null==t?D:L(t)}},j=Array.prototype.slice,B=Array.prototype.indexOf,F=Array.prototype.push,z=function(t,e){return B.call(t,e)},$=function(t,e){return z(t,e)>-1},G=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},V=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++){var o=t[i];r[i]=e(o,i)}return r},U=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)},W=function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n)},H=function(t,e){for(var n=[],r=[],i=0,o=t.length;i<o;i++){var a=t[i];(e(a,i)?n:r).push(a)}return{pass:n,fail:r}},Y=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];e(o,r)&&n.push(o)}return n},X=function(t,e,n){return W(t,(function(t,r){n=e(n,t,r)})),n},q=function(t,e,n){return U(t,(function(t,r){n=e(n,t,r)})),n},Z=function(t,e,n){for(var r=0,i=t.length;r<i;r++){var o=t[r];if(e(o,r))return R.some(o);if(n(o,r))break}return R.none()},K=function(t,e){return Z(t,e,N)},J=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return R.some(n);return R.none()},Q=function(t,e){return function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!h(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);F.apply(e,t[n])}return e}(V(t,e))},tt=function(t,e){for(var n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},et=function(t){var e=j.call(t,0);return e.reverse(),e},nt=function(t,e){return Y(t,(function(t){return!$(e,t)}))},rt=function(t,e){var n=j.call(t,0);return n.sort(e),n},it=function(t,e){return e>=0&&e<t.length?R.some(t[e]):R.none()},ot=function(t){return it(t,0)},at=function(t){return it(t,t.length-1)},st=b(Array.from)?Array.from:function(t){return j.call(t)},ut=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return R.none()},ct=Object.keys,lt=Object.hasOwnProperty,ft=function(t,e){for(var n=ct(t),r=0,i=n.length;r<i;r++){var o=n[r];e(t[o],o)}},dt=function(t,e){return ht(t,(function(t,n){return{k:n,v:e(t,n)}}))},ht=function(t,e){var n={};return ft(t,(function(t,r){var i=e(t,r);n[i.k]=i.v})),n},pt=function(t){return function(e,n){t[n]=e}},gt=function(t,e,n,r){return ft(t,(function(t,i){(e(t,i)?n:r)(t,i)})),{}},vt=function(t,e){var n={};return gt(t,e,pt(n),w),n},mt=function(t,e){return yt(t,e)?R.from(t[e]):R.none()},yt=function(t,e){return lt.call(t,e)},bt=function(t,e){return yt(t,e)&&void 0!==t[e]&&null!==t[e]},xt=Array.isArray,wt=function(t,e,n){var r,i;if(!t)return!1;if(n=n||t,void 0!==t.length){for(r=0,i=t.length;r<i;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(r in t)if(yt(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},_t=function(t,e){var n=[];return wt(t,(function(r,i){n.push(e(r,i,t))})),n},Et=function(t,e){var n=[];return wt(t,(function(r,i){e&&!e(r,i,t)||n.push(r)})),n},St=function(t,e){if(t)for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},Ct=function(t,e,n,r){for(var i=v(n)?t[0]:n,o=0;o<t.length;o++)i=e.call(r,i,t[o],o);return i},kt=function(t,e,n){var r,i;for(r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return r;return-1},Mt=function(t){return t[t.length-1]},Ot=function(){return Ot=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ot.apply(this,arguments)};function Tt(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var At=function(t){var e,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,e=t.apply(null,r)),e}},Nt=function(){return It(0,0)},It=function(t,e){return{major:t,minor:e}},Pt={nu:It,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?Nt():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return It(r(1),r(2))}(t,n)},unknown:Nt},Dt=function(t,e){var n=String(e).toLowerCase();return K(t,(function(t){return t.search(n)}))},Lt=function(t,e){return-1!==t.indexOf(e)},Rt=function(t,e){return function(t,e,n){return""===e||t.length>=e.length&&t.substr(0,0+e.length)===e}(t,e)},jt=function(t){return function(e){return e.replace(t,"")}},Bt=jt(/^\s+|\s+$/g),Ft=jt(/^\s+/g),zt=jt(/\s+$/g),$t=function(t){return t.length>0},Gt=function(t){return!$t(t)},Vt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ut=function(t){return function(e){return Lt(e,t)}},Wt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Lt(t,"edge/")&&Lt(t,"chrome")&&Lt(t,"safari")&&Lt(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Vt],search:function(t){return Lt(t,"chrome")&&!Lt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Lt(t,"msie")||Lt(t,"trident")}},{name:"Opera",versionRegexes:[Vt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ut("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ut("firefox")},{name:"Safari",versionRegexes:[Vt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Lt(t,"safari")||Lt(t,"mobile/"))&&Lt(t,"applewebkit")}}],Ht=[{name:"Windows",search:Ut("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Lt(t,"iphone")||Lt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ut("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ut("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ut("linux"),versionRegexes:[]},{name:"Solaris",search:Ut("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ut("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ut("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Yt={browsers:S(Wt),oses:S(Ht)},Xt="Edge",qt="Chrome",Zt="Opera",Kt="Firefox",Jt="Safari",Qt=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:r(Xt),isChrome:r(qt),isIE:r("IE"),isOpera:r(Zt),isFirefox:r(Kt),isSafari:r(Jt)}},te=function(){return Qt({current:void 0,version:Pt.unknown()})},ee=Qt,ne=(S(Xt),S(qt),S("IE"),S(Zt),S(Kt),S(Jt),"Windows"),re="Android",ie="Linux",oe="Solaris",ae="FreeBSD",se="ChromeOS",ue=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:r(ne),isiOS:r("iOS"),isAndroid:r(re),isOSX:r("OSX"),isLinux:r(ie),isSolaris:r(oe),isFreeBSD:r(ae),isChromeOS:r(se)}},ce=function(){return ue({current:void 0,version:Pt.unknown()})},le=ue,fe=(S(ne),S("iOS"),S(re),S(ie),S("OSX"),S(oe),S(ae),S(se),function(t){return window.matchMedia(t).matches}),de=At((function(){return function(t,e,n){var r=Yt.browsers(),i=Yt.oses(),o=e.bind((function(t){return function(t,e){return ut(e.brands,(function(e){var n=e.brand.toLowerCase();return K(t,(function(t){var e;return n===(null===(e=t.brand)||void 0===e?void 0:e.toLowerCase())})).map((function(t){return{current:t.name,version:Pt.nu(parseInt(e.version,10),0)}}))}))}(r,t)})).orThunk((function(){return function(t,e){return Dt(t,e).map((function(t){var n=Pt.detect(t.versionRegexes,e);return{current:t.name,version:n}}))}(r,t)})).fold(te,ee),a=function(t,e){return Dt(t,e).map((function(t){var n=Pt.detect(t.versionRegexes,e);return{current:t.name,version:n}}))}(i,t).fold(ce,le),s=function(t,e,n,r){var i=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!i,a=t.isiOS()||t.isAndroid(),s=a||r("(pointer:coarse)"),u=i||!o&&a&&r("(min-device-width:768px)"),c=o||a&&!u,l=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),f=!c&&!u&&!l;return{isiPad:S(i),isiPhone:S(o),isTablet:S(u),isPhone:S(c),isTouch:S(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:S(l),isDesktop:S(f)}}(a,o,t,n);return{browser:o,os:a,deviceType:s}}(navigator.userAgent,R.from(navigator.userAgentData),fe)})),he=function(){return de()},pe=navigator.userAgent,ge=he(),ve=ge.browser,me=ge.os,ye=ge.deviceType,be=/WebKit/.test(pe)&&!ve.isEdge(),xe="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,we=-1!==pe.indexOf("Windows Phone"),_e={opera:ve.isOpera(),webkit:be,ie:!(!ve.isIE()&&!ve.isEdge())&&ve.version.major,gecko:ve.isFirefox(),mac:me.isOSX()||me.isiOS(),iOS:ye.isiPad()||ye.isiPhone(),android:me.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:ve.isIE()?document.documentMode||7:10,fileApi:xe,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!ve.isIE(),desktop:ye.isDesktop(),windowsPhone:we,browser:{current:ve.current,version:ve.version,isChrome:ve.isChrome,isEdge:ve.isEdge,isFirefox:ve.isFirefox,isIE:ve.isIE,isOpera:ve.isOpera,isSafari:ve.isSafari},os:{current:me.current,version:me.version,isAndroid:me.isAndroid,isChromeOS:me.isChromeOS,isFreeBSD:me.isFreeBSD,isiOS:me.isiOS,isLinux:me.isLinux,isOSX:me.isOSX,isSolaris:me.isSolaris,isWindows:me.isWindows},deviceType:{isDesktop:ye.isDesktop,isiPad:ye.isiPad,isiPhone:ye.isiPhone,isPhone:ye.isPhone,isTablet:ye.isTablet,isTouch:ye.isTouch,isWebView:ye.isWebView}},Ee=/^\s*|\s*$/g,Se=function(t){return null==t?"":(""+t).replace(Ee,"")},Ce=function(t,e){return e?!("array"!==e||!xt(t))||typeof t===e:void 0!==t},ke=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),wt(t,(function(t,i){if(!1===e.call(r,t,i,n))return!1;ke(t,e,n,r)})))},Me={trim:Se,isArray:xt,is:Ce,toArray:function(t){if(xt(t))return t;for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[n];return e},makeMap:function(t,e,n){var r;for(e=e||",","string"==typeof(t=t||[])&&(t=t.split(e)),n=n||{},r=t.length;r--;)n[t[r]]={};return n},each:wt,map:_t,grep:Et,inArray:St,hasOwn:yt,extend:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r];for(var o in i)if(yt(i,o)){var a=i[o];void 0!==a&&(t[o]=a)}}return t},create:function(t,e,n){var r,i,o,a=this,s=0,u=(t=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(t))[3].match(/(^|\.)(\w+)$/i)[2],c=a.createNS(t[3].replace(/\.\w+$/,""),n);if(!c[u]){if("static"===t[2])return c[u]=e,void(this.onCreate&&this.onCreate(t[2],t[3],c[u]));e[u]||(e[u]=function(){},s=1),c[u]=e[u],a.extend(c[u].prototype,e),t[5]&&(r=a.resolve(t[5]).prototype,i=t[5].match(/\.(\w+)$/i)[1],o=c[u],c[u]=s?function(){return r[i].apply(this,arguments)}:function(){return this.parent=r[i],o.apply(this,arguments)},c[u].prototype[u]=c[u],a.each(r,(function(t,e){c[u].prototype[e]=r[e]})),a.each(e,(function(t,e){r[e]?c[u].prototype[e]=function(){return this.parent=r[e],t.apply(this,arguments)}:e!==u&&(c[u].prototype[e]=t)}))),a.each(e.static,(function(t,e){c[u][e]=t}))}},walk:ke,createNS:function(t,e){var n,r;for(e=e||window,t=t.split("."),n=0;n<t.length;n++)e[r=t[n]]||(e[r]={}),e=e[r];return e},resolve:function(t,e){var n,r;for(e=e||window,n=0,r=(t=t.split(".")).length;n<r&&(e=e[t[n]]);n++);return e},explode:function(t,e){return!t||Ce(t,"array")?t:_t(t.split(e||","),Se)},_addCacheSuffix:function(t){var e=_e.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Oe=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Te=function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Oe(n.childNodes[0])},Ae=function(t,e){var n=(e||document).createElement(t);return Oe(n)},Ne=function(t,e){var n=(e||document).createTextNode(t);return Oe(n)},Ie=Oe,Pe=function(t,e){var n=[],r=function(t){return n.push(t),e(t)},i=e(t);do{i=i.bind(r)}while(i.isSome());return n},De=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Le=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},Re=function(t,e){return t.dom===e.dom},je=function(t,e){return he().browser.isIE()?function(t,e){return function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)}(t.dom,e.dom,Node.DOCUMENT_POSITION_CONTAINED_BY)}(t,e):function(t,e){var n=t.dom,r=e.dom;return n!==r&&n.contains(r)}(t,e)};"undefined"!=typeof window?window:Function("return this;")();var Be=function(t){return t.dom.nodeName.toLowerCase()},Fe=function(t){return t.dom.nodeType},ze=function(t){return function(e){return Fe(e)===t}},$e=ze(1),Ge=ze(3),Ve=ze(9),Ue=ze(11),We=function(t){return Ie(t.dom.ownerDocument)},He=function(t){return Ve(t)?t:We(t)},Ye=function(t){return Ie(He(t).dom.defaultView)},Xe=function(t){return R.from(t.dom.parentNode).map(Ie)},qe=function(t){return R.from(t.dom.previousSibling).map(Ie)},Ze=function(t){return R.from(t.dom.nextSibling).map(Ie)},Ke=function(t){return et(Pe(t,qe))},Je=function(t){return Pe(t,Ze)},Qe=function(t){return V(t.dom.childNodes,Ie)},tn=function(t,e){var n=t.dom.childNodes;return R.from(n[e]).map(Ie)},en=function(t){return tn(t,0)},nn=function(t){return tn(t,t.dom.childNodes.length-1)},rn=function(t){return t.dom.childNodes.length},on=function(t){return Ue(t)&&y(t.dom.host)},an=b(Element.prototype.attachShadow)&&b(Node.prototype.getRootNode),sn=S(an),un=an?function(t){return Ie(t.dom.getRootNode())}:He,cn=function(t){return on(t)?t:function(t){var e=t.dom.head;if(null==e)throw new Error("Head is not available yet");return Ie(e)}(He(t))},ln=function(t){return Ie(t.dom.host)},fn=function(t,e){Xe(t).each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},dn=function(t,e){Ze(t).fold((function(){Xe(t).each((function(t){pn(t,e)}))}),(function(t){fn(t,e)}))},hn=function(t,e){en(t).fold((function(){pn(t,e)}),(function(n){t.dom.insertBefore(e.dom,n.dom)}))},pn=function(t,e){t.dom.appendChild(e.dom)},gn=function(t,e){U(e,(function(e){pn(t,e)}))},vn=function(t){t.dom.textContent="",U(Qe(t),(function(t){mn(t)}))},mn=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},yn=function(t){var e,n=Qe(t);n.length>0&&(e=t,U(n,(function(t){fn(e,t)}))),mn(t)},bn=function(t){var e=Ge(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;var n=e.ownerDocument;return function(t){var e=un(t);return on(e)?R.some(e):R.none()}(Ie(e)).fold((function(){return n.body.contains(e)}),E(bn,ln))},xn=function(t,e){return{left:t,top:e,translate:function(n,r){return xn(t+n,e+r)}}},wn=xn,_n=function(t,e){return void 0!==t?t:void 0!==e?e:0},En=function(t){var e=t.dom,n=e.ownerDocument.body;return n===e?wn(n.offsetLeft,n.offsetTop):bn(t)?function(t){var e=t.getBoundingClientRect();return wn(e.left,e.top)}(e):wn(0,0)},Sn=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return wn(n,r)},Cn=function(t,e,n){var r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(t,e)},kn=function(t,e){he().browser.isSafari()&&b(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Mn=function(t,e,n,r){return{x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}},On=function(t){var e=void 0===t?window:t,n=e.document,r=Sn(Ie(n));return function(t){var e=void 0===t?window:t;return he().browser.isFirefox()?R.none():R.from(e.visualViewport)}(e).fold((function(){var t=e.document.documentElement,n=t.clientWidth,i=t.clientHeight;return Mn(r.left,r.top,n,i)}),(function(t){return Mn(Math.max(t.pageLeft,r.left),Math.max(t.pageTop,r.top),t.width,t.height)}))},Tn=function(t){return function(e){return!!e&&e.nodeType===t}},An=function(t){return!!t&&!Object.getPrototypeOf(t)},Nn=Tn(1),In=function(t){var e=t.map((function(t){return t.toLowerCase()}));return function(t){if(t&&t.nodeName){var n=t.nodeName.toLowerCase();return $(e,n)}return!1}},Pn=function(t,e){var n=e.toLowerCase().split(" ");return function(e){if(Nn(e))for(var r=0;r<n.length;r++){var i=e.ownerDocument.defaultView.getComputedStyle(e,null);if((i?i.getPropertyValue(t):null)===n[r])return!0}return!1}},Dn=function(t){return function(e){return Nn(e)&&e.hasAttribute(t)}},Ln=function(t){return Nn(t)&&t.hasAttribute("data-mce-bogus")},Rn=function(t){return Nn(t)&&"TABLE"===t.tagName},jn=function(t){return function(e){if(Nn(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},Bn=In(["textarea","input"]),Fn=Tn(3),zn=Tn(8),$n=Tn(9),Gn=Tn(11),Vn=In(["br"]),Un=In(["img"]),Wn=jn("true"),Hn=jn("false"),Yn=In(["td","th"]),Xn=In(["video","audio","object","embed"]),qn=function(t,e,n){return void 0===n&&(n=k),t.exists((function(t){return n(t,e)}))},Zn=function(t,e,n){return t.isSome()&&e.isSome()?R.some(n(t.getOrDie(),e.getOrDie())):R.none()},Kn=function(t){return void 0!==t.style&&b(t.style.getPropertyValue)},Jn=function(t,e,n){if(!(f(n)||g(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Qn=function(t,e,n){Jn(t.dom,e,n)},tr=function(t,e){var n=t.dom;ft(e,(function(t,e){Jn(n,e,t)}))},er=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},nr=function(t,e){return R.from(er(t,e))},rr=function(t,e){t.dom.removeAttribute(e)},ir=function(t,e){var n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||bn(t)?r:or(n,e)},or=function(t,e){return Kn(t)?t.style.getPropertyValue(e):""},ar=function(t,e){var n=t.dom,r=or(n,e);return R.from(r).filter((function(t){return t.length>0}))},sr=function(t){var e={},n=t.dom;if(Kn(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);e[i]=n.style[i]}return e},ur=he().browser,cr=function(t){return K(t,$e)},lr=function(t,e){return t.children&&$(t.children,e)},fr={},dr={exports:fr};!function(t,e,r,i){var o,a;o=this,a=function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e={exports:{}};!function(e){!function(t){var n=setTimeout;function r(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void s(e.promise,t)}a(e.promise,r)}else(1===t._state?a:s)(e.promise,t._value)}))):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void l((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(e){s(t,e)}var r,o}function s(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&i._immediateFn((function(){t._handled||i._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)o(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t((function(t){n||(n=!0,a(e,t))}),(function(t){n||(n=!0,s(e,t))}))}catch(t){if(n)return;n=!0,s(e,t)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=new this.constructor(r);return o(this,new c(t,e,n)),n},i.all=function(t){var e=Array.prototype.slice.call(t);return new i((function(t,n){if(0===e.length)return t([]);var r=e.length;function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){i(o,t)}),n)}e[o]=a,0==--r&&t(e)}catch(t){n(t)}}for(var o=0;o<e.length;o++)i(o,e[o])}))},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i((function(e){e(t)}))},i.reject=function(t){return new i((function(e,n){n(t)}))},i.race=function(t){return new i((function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)}))},i._immediateFn="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){n(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},e.exports?e.exports=i:t.Promise||(t.Promise=i)}(t)}(e);var r=e.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||r}},"object"==typeof e&&void 0!==r?r.exports=a():(o="undefined"!=typeof globalThis?globalThis:o||self).EphoxContactWrapper=a()}(0,fr,dr);var hr=dr.exports.boltExport,pr=function(t){var e=R.none(),n=[],r=function(t){i()?o(t):n.push(t)},i=function(){return e.isSome()},o=function(t){e.each((function(e){setTimeout((function(){t(e)}),0)}))};return t((function(t){i()||(e=R.some(t),U(n,o),n=[])})),{get:r,map:function(t){return pr((function(e){r((function(n){e(t(n))}))}))},isReady:i}},gr={nu:pr,pure:function(t){return pr((function(e){e(t)}))}},vr=function(t){setTimeout((function(){throw t}),0)},mr=function(t){var e=function(e){t().then(e,vr)};return{map:function(e){return mr((function(){return t().then(e)}))},bind:function(e){return mr((function(){return t().then((function(t){return e(t).toPromise()}))}))},anonBind:function(e){return mr((function(){return t().then((function(){return e.toPromise()}))}))},toLazy:function(){return gr.nu(e)},toCached:function(){var e=null;return mr((function(){return null===e&&(e=t()),e}))},toPromise:t,get:e}},yr=function(t){return mr((function(){return new hr(t)}))},br=function(t){return{isValue:I,isError:N,getOr:S(t),getOrThunk:S(t),getOrDie:S(t),or:function(e){return br(t)},orThunk:function(e){return br(t)},fold:function(e,n){return n(t)},map:function(e){return br(e(t))},mapError:function(e){return br(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOptional:function(){return R.some(t)}}},xr=function(t){return{isValue:N,isError:I,getOr:C,getOrThunk:function(t){return t()},getOrDie:function(){return(e=String(t),function(){throw new Error(e)})();var e},or:C,orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return xr(t)},mapError:function(e){return xr(e(t))},each:w,bind:function(e){return xr(t)},exists:N,forall:I,toOptional:R.none}},wr={value:br,error:xr,fromOption:function(t,e){return t.fold((function(){return xr(e)}),br)}},_r=function(t){if(!h(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return U(t,(function(r,i){var o=ct(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!h(s))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=n.length;if(o!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+o);return{fold:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);return e[i].apply(null,n)},match:function(t){var r=ct(t);if(e.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+r.join(","));if(!tt(e,(function(t){return $(r,t)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,n)},log:function(t){console.log(t,{constructors:e,constructor:a,params:n})}}}})),n};_r([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Er=function(t){return t.fold(C,C)};function Sr(t,e,n,r,i){return t(n,r)?R.some(n):b(i)&&i(n)?R.none():e(n,r,i)}var Cr,kr,Mr,Or,Tr,Ar,Nr,Ir,Pr,Dr,Lr,Rr,jr,Br,Fr,zr,$r,Gr,Vr=function(t,e,n){for(var r=t.dom,i=b(n)?n:N;r.parentNode;){r=r.parentNode;var o=Ie(r);if(e(o))return R.some(o);if(i(o))break}return R.none()},Ur=function(t,e,n){return Sr((function(t,e){return e(t)}),Vr,t,e,n)},Wr=function(t,e,n){return Vr(t,(function(t){return De(t,e)}),n)},Hr=function(t,e){return function(t,e){var n=void 0===e?document:e.dom;return Le(n)?R.none():R.from(n.querySelector(t)).map(Ie)}(e,t)},Yr=function(t,e,n){return Sr((function(t,e){return De(t,e)}),Wr,t,e,n)},Xr=window.Promise?window.Promise:hr,qr=function(t,e){return"number"!=typeof e&&(e=0),setTimeout(t,e)},Zr=function(t,e){return"number"!=typeof e&&(e=1),setInterval(t,e)},Kr=function(t,e){var n,r=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];clearTimeout(n),n=qr((function(){t.apply(this,r)}),e)};return r.stop=function(){clearTimeout(n)},r},Jr={requestAnimationFrame:function(t,e){Cr?Cr.then(t):Cr=new Xr((function(t){e||(e=document.body),function(t,e){for(var n=window.requestAnimationFrame,r=["ms","moz","webkit"],i=0;i<r.length&&!n;i++)n=window[r[i]+"RequestAnimationFrame"];n||(n=function(t){window.setTimeout(t,0)}),n(t,e)}(t,e)})).then(t)},setTimeout:qr,setInterval:Zr,setEditorTimeout:function(t,e,n){return qr((function(){t.removed||e()}),n)},setEditorInterval:function(t,e,n){var r=Zr((function(){t.removed?clearInterval(r):e()}),n);return r},debounce:Kr,throttle:Kr,clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)}},Qr=function(t,e){void 0===e&&(e={});var n=0,r={},i=Ie(t),o=He(i),a=e.maxLoadTime||5e3,s=function(s,u,c){var l,f=Me._addCacheSuffix(s),d=function(t){return mt(r,t).getOrThunk((function(){return{id:"mce-u"+n++,passed:[],failed:[],count:0}}))}(f);r[f]=d,d.count++;var h=function(t,e){for(var n=t.length;n--;)t[n]();d.status=e,d.passed=[],d.failed=[],l&&(l.onload=null,l.onerror=null,l=null)},p=function(){return h(d.passed,2)},g=function(){return h(d.failed,3)},v=function(){var e;e=v,function(){for(var e=t.styleSheets,n=e.length;n--;){var r=e[n].ownerNode;if(r&&r.id===l.id)return p(),!0}return!1}()||(Date.now()-b<a?Jr.setTimeout(e):g())};if(u&&d.passed.push(u),c&&d.failed.push(c),1!==d.status)if(2!==d.status)if(3!==d.status){d.status=1;var m=Ae("link",o.dom);tr(m,{rel:"stylesheet",type:"text/css",id:d.id});var y,b=Date.now();e.contentCssCors&&Qn(m,"crossOrigin","anonymous"),e.referrerPolicy&&Qn(m,"referrerpolicy",e.referrerPolicy),(l=m.dom).onload=v,l.onerror=g,y=m,pn(cn(i),y),Qn(m,"href",f)}else g();else p()},u=function(t){return yr((function(e){s(t,_(e,S(wr.value(t))),_(e,S(wr.error(t))))}))},c=function(t){var e=Me._addCacheSuffix(t);mt(r,e).each((function(t){var n,o;0==--t.count&&(delete r[e],n=t.id,o=cn(i),Hr(o,"#"+n).each(mn))}))};return{load:s,loadAll:function(t,e,n){var r,i,o;(r=V(t,u),i=r,o=yr,o((function(t){var e=[],n=0;0===i.length?t([]):U(i,(function(r,o){r.get(function(r){return function(o){e[r]=o,++n>=i.length&&t(e)}}(o))}))}))).get((function(t){var r=H(t,(function(t){return t.isValue()}));r.fail.length>0?n(r.fail.map(Er)):e(r.pass.map(Er))}))},unload:c,unloadAll:function(t){U(t,(function(t){c(t)}))},_setReferrerPolicy:function(t){e.referrerPolicy=t}}},ti=function(){var t=new WeakMap;return{forElement:function(e,n){var r=un(e).dom;return R.from(t.get(r)).getOrThunk((function(){var e=Qr(r,n);return t.set(r,e),e}))}}}(),ei=function(){function t(t,e){this.node=t,this.rootNode=e,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return t.prototype.current=function(){return this.node},t.prototype.next=function(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node},t.prototype.prev=function(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node},t.prototype.prev2=function(t){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",t),this.node},t.prototype.findSibling=function(t,e,n,r){var i,o;if(t){if(!r&&t[e])return t[e];if(t!==this.rootNode){if(i=t[n])return i;for(o=t.parentNode;o&&o!==this.rootNode;o=o.parentNode)if(i=o[n])return i}}},t.prototype.findPreviousNode=function(t,e,n,r){var i,o,a;if(t){if(i=t[n],this.rootNode&&i===this.rootNode)return;if(i){if(!r)for(a=i[e];a;a=a[e])if(!a[e])return a;return i}if((o=t.parentNode)&&o!==this.rootNode)return o}},t}(),ni=function(t){var e;return function(n){return e=e||function(t,e){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];n[String(o)]=e(o,r)}return n}(t,I),yt(e,Be(n))}},ri=ni(["h1","h2","h3","h4","h5","h6"]),ii=ni(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),oi=function(t){return $e(t)&&!ii(t)},ai=function(t){return $e(t)&&"br"===Be(t)},si=ni(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),ui=ni(["ul","ol","dl"]),ci=ni(["li","dd","dt"]),li=ni(["thead","tbody","tfoot"]),fi=ni(["td","th"]),di=ni(["pre","script","textarea","style"]),hi="",pi="\ufeff",gi=function(t){return"\ufeff"===t},vi=function(t){return t.replace(/\uFEFF/g,"")},mi=Nn,yi=Fn,bi=function(t){return yi(t)&&(t=t.parentNode),mi(t)&&t.hasAttribute("data-mce-caret")},xi=function(t){return yi(t)&&gi(t.data)},wi=function(t){return bi(t)||xi(t)},_i=function(t){return t.firstChild!==t.lastChild||!Vn(t.firstChild)},Ei=function(t){var e=t.container();return!!Fn(e)&&(e.data.charAt(t.offset())===pi||t.isAtStart()&&xi(e.previousSibling))},Si=function(t){var e=t.container();return!!Fn(e)&&(e.data.charAt(t.offset()-1)===pi||t.isAtEnd()&&xi(e.nextSibling))},Ci=function(t){return yi(t)&&t.data[0]===pi},ki=function(t){return yi(t)&&t.data[t.data.length-1]===pi},Mi=function(t){return t&&t.hasAttribute("data-mce-caret")?(n=(e=t.getElementsByTagName("br"))[e.length-1],Ln(n)&&n.parentNode.removeChild(n),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("_moz_abspos"),t):null;var e,n},Oi=function(t){return bi(t.startContainer)},Ti=Wn,Ai=Hn,Ni=Vn,Ii=Fn,Pi=In(["script","style","textarea"]),Di=In(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Li=In(["table"]),Ri=wi,ji=function(t){return!Ri(t)&&(Ii(t)?!Pi(t.parentNode):Di(t)||Ni(t)||Li(t)||Bi(t))},Bi=function(t){return!1===function(t){return Nn(t)&&"true"===t.getAttribute("unselectable")}(t)&&Ai(t)},Fi=function(t,e){return ji(t)&&function(t,e){for(t=t.parentNode;t&&t!==e;t=t.parentNode){if(Bi(t))return!1;if(Ti(t))return!0}return!0}(t,e)},zi=/^[ \t\r\n]*$/,$i=function(t){return zi.test(t)},Gi=function(t,e){return ji(t)&&!1===function(t,e){return Fn(t)&&$i(t.data)&&!1===function(t,e){var n,r,i=Ie(e);return n=Ie(t),r=M(Re,i),Wr(n,"pre,code",r).isSome()}(t,e)}(t,e)||function(t){return Nn(t)&&"A"===t.nodeName&&!t.hasAttribute("href")&&(t.hasAttribute("name")||t.hasAttribute("id"))}(t)||Vi(t)},Vi=Dn("data-mce-bookmark"),Ui=Dn("data-mce-bogus"),Wi=("data-mce-bogus","all",function(t){return Nn(t)&&"all"===t.getAttribute("data-mce-bogus")}),Hi=function(t,e){return void 0===e&&(e=!0),function(t,e){var n=0;if(Gi(t,t))return!1;var r=t.firstChild;if(!r)return!0;var i=new ei(r,t);do{if(e){if(Wi(r)){r=i.next(!0);continue}if(Ui(r)){r=i.next();continue}}if(Vn(r))n++,r=i.next();else{if(Gi(r,t))return!1;r=i.next()}}while(r);return n<=1}(t.dom,e)},Yi=function(t,e){return y(t)&&(Gi(t,e)||oi(Ie(t)))},Xi=function(t){return function(t){return"span"===t.nodeName.toLowerCase()}(t)&&"bookmark"===t.getAttribute("data-mce-type")},qi=function(t,e,n){var r=n||e;if(Nn(e)&&Xi(e))return e;for(var i=e.childNodes,o=i.length-1;o>=0;o--)qi(t,i[o],r);if(Nn(e)){var a=e.childNodes;1===a.length&&Xi(a[0])&&e.parentNode.insertBefore(a[0],e)}return function(t){return Gn(t)||$n(t)}(e)||Gi(e,r)||function(t){return!!Nn(t)&&t.childNodes.length>0}(e)||function(t,e){return Fn(t)&&t.data.length>0&&function(t,e){var n=new ei(t,e).prev(!1),r=new ei(t,e).next(!1),i=v(n)||Yi(n,e),o=v(r)||Yi(r,e);return i&&o}(t,e)}(e,r)||t.remove(e),e},Zi=Me.makeMap,Ki=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ji=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qi=/[<>&\"\']/g,to=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,eo={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},no={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ro={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},io=function(t,e){var n,r,i,o={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)r=String.fromCharCode(parseInt(t[n],e)),no[r]||(i="&"+t[n+1]+";",o[r]=i,o[i]=r);return o}},oo=io("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ao=function(t,e){return t.replace(e?Ki:Ji,(function(t){return no[t]||t}))},so=function(t,e){return t.replace(e?Ki:Ji,(function(t){return t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":no[t]||"&#"+t.charCodeAt(0)+";"}))},uo=function(t,e,n){return n=n||oo,t.replace(e?Ki:Ji,(function(t){return no[t]||n[t]||t}))},co={encodeRaw:ao,encodeAllRaw:function(t){return(""+t).replace(Qi,(function(t){return no[t]||t}))},encodeNumeric:so,encodeNamed:uo,getEncodeFunc:function(t,e){var n=io(e)||oo,r=Zi(t.replace(/\+/g,","));return r.named&&r.numeric?function(t,e){return t.replace(e?Ki:Ji,(function(t){return void 0!==no[t]?no[t]:void 0!==n[t]?n[t]:t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";"}))}:r.named?e?function(t,e){return uo(t,e,n)}:uo:r.numeric?so:ao},decode:function(t){return t.replace(to,(function(t,e){return e?(e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10))>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):eo[e]||String.fromCharCode(e):ro[t]||oo[t]||function(t){var e=Ae("div").dom;return e.innerHTML=t,e.textContent||e.innerText||t}(t)}))}},lo={},fo={},ho=Me.makeMap,po=Me.each,go=Me.extend,vo=Me.explode,mo=Me.inArray,yo=function(t,e){return(t=Me.trim(t))?t.split(e||" "):[]},bo=function(t,e){var n=ho(t," ",ho(t.toUpperCase()," "));return go(n,e)},xo=function(t){return bo("td th li dt dd figcaption caption details summary",t.getTextBlockElements())},wo=function(t,e){var n;return t&&(n={},"string"==typeof t&&(t={"*":t}),po(t,(function(t,r){n[r]=n[r.toUpperCase()]="map"===e?ho(t,/[, ]/):vo(t,/[, ]/)}))),n},_o=function(t){var e={},n={},r=[],i={},o={},a=function(e,n,r){var i=t[e];return i?i=ho(i,/[, ]/,ho(i.toUpperCase(),/[, ]/)):(i=lo[e])||(i=bo(n,r),lo[e]=i),i},s=function(t){var e,n,r,i,o,a,s={},u=function(t,n,r){var i,o,a,u=function(t,e){var n,r,i={};for(n=0,r=t.length;n<r;n++)i[t[n]]=e||{};return i};n=n||"","string"==typeof(r=r||[])&&(r=yo(r));var c=yo(t);for(i=c.length;i--;)a={attributes:u(o=yo([e,n].join(" "))),attributesOrder:o,children:u(r,fo)},s[c[i]]=a},c=function(t,e){var n,r,i,o,a=yo(t);n=a.length;for(var u=yo(e);n--;)for(r=s[a[n]],i=0,o=u.length;i<o;i++)r.attributes[u[i]]={},r.attributesOrder.push(u[i])};return lo[t]?lo[t]:(e="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(e+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==t&&(e+=" xml:lang",r=[r,a="acronym applet basefont big font strike tt"].join(" "),po(yo(a),(function(t){u(t,"",r)})),n=[n,o="center dir isindex noframes"].join(" "),i=[n,r].join(" "),po(yo(o),(function(t){u(t,"",i)}))),i=i||[n,r].join(" "),u("html","manifest","head body"),u("head","","base command link meta noscript script style title"),u("title hr noscript br"),u("base","href target"),u("link","href rel media hreflang type sizes hreflang"),u("meta","name http-equiv content charset"),u("style","media type scoped"),u("script","src async defer type charset"),u("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),u("address dt dd div caption","",i),u("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),u("blockquote","cite",i),u("ol","reversed start type","li"),u("ul","","li"),u("li","value",i),u("dl","","dt dd"),u("a","href target rel media hreflang type",r),u("q","cite",r),u("ins del","cite datetime",i),u("img","src sizes srcset alt usemap ismap width height"),u("iframe","src name width height",i),u("embed","src type width height"),u("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),u("param","name value"),u("map","name",[i,"area"].join(" ")),u("area","alt coords shape href target rel media hreflang type"),u("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),u("colgroup","span","col"),u("col","span"),u("tbody thead tfoot","","tr"),u("tr","","td th"),u("td","colspan rowspan headers",i),u("th","colspan rowspan headers scope abbr",i),u("form","accept-charset action autocomplete enctype method name novalidate target",i),u("fieldset","disabled form name",[i,"legend"].join(" ")),u("label","form for",r),u("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),u("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?i:r),u("select","disabled form multiple name required size","option optgroup"),u("optgroup","disabled label","option"),u("option","disabled label selected value"),u("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),u("menu","type label",[i,"li"].join(" ")),u("noscript","",i),"html4"!==t&&(u("wbr"),u("ruby","",[r,"rt rp"].join(" ")),u("figcaption","",i),u("mark rt rp summary bdi","",r),u("canvas","width height",i),u("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),u("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),u("picture","","img source"),u("source","src srcset type media sizes"),u("track","kind src srclang label default"),u("datalist","",[r,"option"].join(" ")),u("article section nav aside main header footer","",i),u("hgroup","","h1 h2 h3 h4 h5 h6"),u("figure","",[i,"figcaption"].join(" ")),u("time","datetime",r),u("dialog","open",i),u("command","type label icon disabled checked radiogroup command"),u("output","for form name",r),u("progress","value max",r),u("meter","value min max low high optimum",r),u("details","open",[i,"summary"].join(" ")),u("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==t&&(c("script","language xml:space"),c("style","xml:space"),c("object","declare classid code codebase codetype archive standby align border hspace vspace"),c("embed","align name hspace vspace"),c("param","valuetype type"),c("a","charset name rev shape coords"),c("br","clear"),c("applet","codebase archive code object alt name width height align hspace vspace"),c("img","name longdesc align border hspace vspace"),c("iframe","longdesc frameborder marginwidth marginheight scrolling align"),c("font basefont","size color face"),c("input","usemap align"),c("select"),c("textarea"),c("h1 h2 h3 h4 h5 h6 div p legend caption","align"),c("ul","type compact"),c("li","type"),c("ol dl menu dir","compact"),c("pre","width xml:space"),c("hr","align noshade size width"),c("isindex","prompt"),c("table","summary width frame rules cellspacing cellpadding align bgcolor"),c("col","width align char charoff valign"),c("colgroup","width align char charoff valign"),c("thead","align char charoff valign"),c("tr","align char charoff valign bgcolor"),c("th","axis align char charoff valign nowrap bgcolor width height"),c("form","accept"),c("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),c("tfoot","align char charoff valign"),c("tbody","align char charoff valign"),c("area","nohref"),c("body","background bgcolor text link vlink alink")),"html4"!==t&&(c("input button select textarea","autofocus"),c("input textarea","placeholder"),c("a","download"),c("link script img","crossorigin"),c("img","loading"),c("iframe","sandbox seamless allowfullscreen loading")),po(yo("a form meter progress dfn"),(function(t){s[t]&&delete s[t].children[t]})),delete s.caption.children.table,delete s.script,lo[t]=s,s)}((t=t||{}).schema);!1===t.verify_html&&(t.valid_elements="*[*]");var u=wo(t.valid_styles),c=wo(t.invalid_styles,"map"),l=wo(t.valid_classes,"map"),f=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),d=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=a("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),g="td th iframe video audio object script code",v=a("non_empty_elements",g+" pre",h),m=a("move_caret_before_on_enter_elements",g+" table",h),y=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),b=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",y),x=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");po((t.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),(function(t){o[t]=new RegExp("</"+t+"[^>]*>","gi")}));var w=function(t){return new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$")},_=function(t){var n,i,o,a,s,u,c,l,f,d,h,p,g,v,m,y,b,x,_=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,E=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(t){var C=yo(t,",");for(e["@"]&&(y=e["@"].attributes,b=e["@"].attributesOrder),n=0,i=C.length;n<i;n++)if(s=_.exec(C[n])){if(v=s[1],f=s[2],m=s[3],l=s[5],u={attributes:p={},attributesOrder:g=[]},"#"===v&&(u.paddEmpty=!0),"-"===v&&(u.removeEmpty=!0),"!"===s[4]&&(u.removeEmptyAttrs=!0),y&&(ft(y,(function(t,e){p[e]=t})),g.push.apply(g,b)),l)for(o=0,a=(l=yo(l,"|")).length;o<a;o++)if(s=E.exec(l[o])){if(c={},h=s[1],d=s[2].replace(/[\\:]:/g,":"),v=s[3],x=s[4],"!"===h&&(u.attributesRequired=u.attributesRequired||[],u.attributesRequired.push(d),c.required=!0),"-"===h){delete p[d],g.splice(mo(g,d),1);continue}v&&("="===v&&(u.attributesDefault=u.attributesDefault||[],u.attributesDefault.push({name:d,value:x}),c.defaultValue=x),":"===v&&(u.attributesForced=u.attributesForced||[],u.attributesForced.push({name:d,value:x}),c.forcedValue=x),"<"===v&&(c.validValues=ho(x,"?"))),S.test(d)?(u.attributePatterns=u.attributePatterns||[],c.pattern=w(d),u.attributePatterns.push(c)):(p[d]||g.push(d),p[d]=c)}y||"@"!==f||(y=p,b=g),m&&(u.outputName=f,e[m]=u),S.test(f)?(u.pattern=w(f),r.push(u)):e[f]=u}}},E=function(t){e={},r=[],_(t),po(s,(function(t,e){n[e]=t.children}))},C=function(t){var r=/^(~)?(.+)$/;t&&(lo.text_block_elements=lo.block_elements=null,po(yo(t,","),(function(t){var o=r.exec(t),a="~"===o[1],s=a?"span":"div",u=o[2];if(n[u]=n[s],i[u]=s,a||(b[u.toUpperCase()]={},b[u]={}),!e[u]){var c=e[s];delete(c=go({},c)).removeEmptyAttrs,delete c.removeEmpty,e[u]=c}po(n,(function(t,e){t[s]&&(n[e]=t=go({},n[e]),t[u]=t[s])}))})))},k=function(e){var r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;lo[t.schema]=null,e&&po(yo(e,","),(function(t){var e,i,o=r.exec(t);o&&(i=o[1],e=i?n[o[2]]:n[o[2]]={"#comment":{}},e=n[o[2]],po(yo(o[3],"|"),(function(t){"-"===i?delete e[t]:e[t]={}})))}))},M=function(t){var n,i=e[t];if(i)return i;for(n=r.length;n--;)if((i=r[n]).pattern.test(t))return i};t.valid_elements?E(t.valid_elements):(po(s,(function(t,r){e[r]={attributes:t.attributes,attributesOrder:t.attributesOrder},n[r]=t.children})),"html5"!==t.schema&&po(yo("strong/b em/i"),(function(t){var n=yo(t,"/");e[n[1]].outputName=n[0]})),po(x,(function(n,r){e[r]&&(t.padd_empty_block_inline_children&&(e[r].paddInEmptyBlock=!0),e[r].removeEmpty=!0)})),po(yo("ol ul blockquote a table tbody"),(function(t){e[t]&&(e[t].removeEmpty=!0)})),po(yo("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(function(t){e[t].paddEmpty=!0})),po(yo("span"),(function(t){e[t].removeEmptyAttrs=!0}))),C(t.custom_elements),k(t.valid_children),_(t.extended_valid_elements),k("+ol[ul|ol],+ul[ul|ol]"),po({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(t,n){e[n]&&(e[n].parentsRequired=yo(t))})),t.invalid_elements&&po(vo(t.invalid_elements),(function(t){e[t]&&delete e[t]})),M("span")||_("span[!data-mce-type|*]");var O=S(u),T=S(c),A=S(l),N=S(p),I=S(b),P=S(y),D=S(x),L=S(h),R=S(d),j=S(v),B=S(m),F=S(f),z=S(o),$=S(i);return{children:n,elements:e,getValidStyles:O,getValidClasses:A,getBlockElements:I,getInvalidStyles:T,getShortEndedElements:L,getTextBlockElements:P,getTextInlineElements:D,getBoolAttrs:N,getElementRule:M,getSelfClosingElements:R,getNonEmptyElements:j,getMoveCaretBeforeOnEnterElements:B,getWhiteSpaceElements:F,getSpecialElements:z,isValidChild:function(t,e){var r=n[t.toLowerCase()];return!(!r||!r[e.toLowerCase()])},isValid:function(t,e){var n,r,i=M(t);if(i){if(!e)return!0;if(i.attributes[e])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(t))return!0}return!1},getCustomElements:$,addValidElements:_,setValidElements:E,addCustomElements:C,addValidChildren:k}},Eo=function(t,e,n,r){var i=function(t){return(t=parseInt(t,10).toString(16)).length>1?t:"0"+t};return"#"+i(e)+i(n)+i(r)},So=function(t,e){var n,r,i,o=this,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,u=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,l={};t=t||{},e&&(r=e.getValidStyles(),i=e.getInvalidStyles());var f="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(n=0;n<f.length;n++)l[f[n]]="\ufeff"+n,l["\ufeff"+n]=f[n];return{toHex:function(t){return t.replace(a,Eo)},parse:function(e){var r,i,f,d,h,p,g,v={},m=t.url_converter,y=t.url_converter_scope||o,b=function(t,e,r){var i=v[t+"-top"+e];if(i){var o=v[t+"-right"+e];if(o){var a=v[t+"-bottom"+e];if(a){var s=v[t+"-left"+e];if(s){var u=[i,o,a,s];for(n=u.length-1;n--&&u[n]===u[n+1];);n>-1&&r||(v[t+e]=-1===n?u[0]:u.join(" "),delete v[t+"-top"+e],delete v[t+"-right"+e],delete v[t+"-bottom"+e],delete v[t+"-left"+e])}}}}},x=function(t){var e,n=v[t];if(n){for(e=(n=n.split(" ")).length;e--;)if(n[e]!==n[0])return!1;return v[t]=n[0],!0}},w=function(t){return d=!0,l[t]},_=function(t,e){return d&&(t=t.replace(/\uFEFF[0-9]/g,(function(t){return l[t]}))),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t},E=function(t){return String.fromCharCode(parseInt(t.slice(1),16))},S=function(t){return t.replace(/\\[0-9a-f]+/gi,E)},C=function(e,n,r,i,o,a){if(o=o||a)return"'"+(o=_(o)).replace(/\'/g,"\\'")+"'";if(n=_(n||r||i),!t.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!t.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return m&&(n=m.call(y,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,w).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(t){return t.replace(/[;:]/g,w)}));r=u.exec(e);)if(u.lastIndex=r.index+r[0].length,i=r[1].replace(c,"").toLowerCase(),f=r[2].replace(c,""),i&&f){if(i=S(i),f=S(f),-1!==i.indexOf("\ufeff")||-1!==i.indexOf('"'))continue;if(!t.allow_script_urls&&("behavior"===i||/expression\s*\(|\/\*|\*\//.test(f)))continue;"font-weight"===i&&"700"===f?f="bold":"color"!==i&&"background-color"!==i||(f=f.toLowerCase()),f=(f=f.replace(a,Eo)).replace(s,C),v[i]=d?_(f,!0):f}b("border","",!0),b("border","-width"),b("border","-color"),b("border","-style"),b("padding",""),b("margin",""),"border",p="border-style",g="border-color",x(h="border-width")&&x(p)&&x(g)&&(v.border=v[h]+" "+v[p]+" "+v[g],delete v[h],delete v[p],delete v[g]),"medium none"===v.border&&delete v.border,"none"===v["border-image"]&&delete v["border-image"]}return v},serialize:function(t,e){var n="",o=function(e){var i,o=r[e];if(o)for(var a=0,s=o.length;a<s;a++)e=o[a],(i=t[e])&&(n+=(n.length>0?" ":"")+e+": "+i+";")};return e&&r?(o("*"),o(e)):ft(t,(function(t,r){!t||i&&!function(t,e){var n=i["*"];return!(n&&n[t]||(n=i[e])&&n[t])}(r,e)||(n+=(n.length>0?" ":"")+r+": "+t+";")})),n}}},Co={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ko=function(t){return t instanceof Event||b(t.initEvent)},Mo=function(t,e,n,r){var i,o=function(t,e){var n=null!=e?e:{};for(var r in t)yt(Co,r)||(n[r]=t[r]);return y(n.composedPath)&&(n.composedPath=function(){return t.composedPath()}),n}(e,r);return o.type=t,m(o.target)&&(o.target=null!==(i=o.srcElement)&&void 0!==i?i:n),function(t){return m(t.preventDefault)||ko(t)}(e)&&(o.preventDefault=function(){o.defaultPrevented=!0,o.isDefaultPrevented=I,b(e.preventDefault)?e.preventDefault():ko(e)&&(e.returnValue=!1)},o.stopPropagation=function(){o.cancelBubble=!0,o.isPropagationStopped=I,b(e.stopPropagation)?e.stopPropagation():ko(e)&&(e.cancelBubble=!0)},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=I,o.stopPropagation()},function(t){return t.isDefaultPrevented===I||t.isDefaultPrevented===N}(o)||(o.isDefaultPrevented=!0===o.defaultPrevented?I:N,o.isPropagationStopped=!0===o.cancelBubble?I:N,o.isImmediatePropagationStopped=N)),o},Oo="mce-data-",To=/^(?:mouse|contextmenu)|click/,Ao=function(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r||!1):t.attachEvent&&t.attachEvent("on"+e,n)},No=function(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,r||!1):t.detachEvent&&t.detachEvent("on"+e,n)},Io=function(t,e){var n=Mo(t.type,t,document,e);if(function(t){return y(t)&&To.test(t.type)}(t)&&v(t.pageX)&&!v(t.clientX)){var r=n.target.ownerDocument||document,i=r.documentElement,o=r.body,a=n;a.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),a.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)}return v(n.metaKey)&&(n.metaKey=!1),n},Po=function(t,e,n){var r=t.document,i={type:"ready"};if(n.domLoaded)e(i);else{var o=function(){No(t,"DOMContentLoaded",o),No(t,"load",o),n.domLoaded||(n.domLoaded=!0,e(i)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?o():Ao(t,"DOMContentLoaded",o),n.domLoaded||Ao(t,"load",o)}},Do=function(){function t(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Oo+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return t.prototype.bind=function(t,e,n,r){var i,o,a,s,u,c,l,f=this,d=window,h=function(t){f.executeHandlers(Io(t||d.event),i)};if(t&&3!==t.nodeType&&8!==t.nodeType){t[f.expando]?i=t[f.expando]:(i=f.count++,t[f.expando]=i,f.events[i]={}),r=r||t;var p=e.split(" ");for(a=p.length;a--;)c=h,u=l=!1,"DOMContentLoaded"===(s=p[a])&&(s="ready"),f.domLoaded&&"ready"===s&&"complete"===t.readyState?n.call(r,Io({type:s})):(f.hasMouseEnterLeave||(u=f.mouseEnterLeave[s])&&(c=function(t){var e=t.currentTarget,n=t.relatedTarget;if(n&&e.contains)n=e.contains(n);else for(;n&&n!==e;)n=n.parentNode;n||((t=Io(t||d.event)).type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=e,f.executeHandlers(t,i))}),f.hasFocusIn||"focusin"!==s&&"focusout"!==s||(l=!0,u="focusin"===s?"focus":"blur",c=function(t){(t=Io(t||d.event)).type="focus"===t.type?"focusin":"focusout",f.executeHandlers(t,i)}),(o=f.events[i][s])?"ready"===s&&f.domLoaded?n(Io({type:s})):o.push({func:n,scope:r}):(f.events[i][s]=o=[{func:n,scope:r}],o.fakeName=u,o.capture=l,o.nativeHandler=c,"ready"===s?Po(t,c,f):Ao(t,u||s,c,l)));return t=o=null,n}},t.prototype.unbind=function(t,e,n){var r,i,o,a,s;if(!t||3===t.nodeType||8===t.nodeType)return this;var u=t[this.expando];if(u){if(s=this.events[u],e){var c=e.split(" ");for(i=c.length;i--;)if(r=s[a=c[i]]){if(n)for(o=r.length;o--;)if(r[o].func===n){var l=r.nativeHandler,f=r.fakeName,d=r.capture;(r=r.slice(0,o).concat(r.slice(o+1))).nativeHandler=l,r.fakeName=f,r.capture=d,s[a]=r}n&&0!==r.length||(delete s[a],No(t,r.fakeName||a,r.nativeHandler,r.capture))}}else ft(s,(function(e,n){No(t,e.fakeName||n,e.nativeHandler,e.capture)})),s={};for(a in s)if(yt(s,a))return this;delete this.events[u];try{delete t[this.expando]}catch(e){t[this.expando]=null}}return this},t.prototype.fire=function(t,e,n){var r;if(!t||3===t.nodeType||8===t.nodeType)return this;var i=Io({type:e,target:t},n);do{(r=t[this.expando])&&this.executeHandlers(i,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!i.isPropagationStopped());return this},t.prototype.clean=function(t){var e,n;if(!t||3===t.nodeType||8===t.nodeType)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(this.unbind(t),e=(n=t.getElementsByTagName("*")).length;e--;)(t=n[e])[this.expando]&&this.unbind(t);return this},t.prototype.destroy=function(){this.events={}},t.prototype.cancel=function(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1},t.prototype.executeHandlers=function(t,e){var n=this.events[e],r=n&&n[t.type];if(r)for(var i=0,o=r.length;i<o;i++){var a=r[i];if(a&&!1===a.func.call(a.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}},t.Event=new t,t}(),Lo="sizzle"+-new Date,Ro=window.document,jo=0,Bo=0,Fo=ya(),zo=ya(),$o=ya(),Go=function(t,e){return t===e&&(Lr=!0),0},Vo="undefined",Uo=1<<31,Wo={}.hasOwnProperty,Ho=[],Yo=Ho.pop,Xo=Ho.push,qo=Ho.push,Zo=Ho.slice,Ko=Ho.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},Jo="[\\x20\\t\\r\\n\\f]",Qo="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ta="\\["+Jo+"*("+Qo+")(?:"+Jo+"*([*^$|!~]?=)"+Jo+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Qo+"))|)"+Jo+"*\\]",ea=":("+Qo+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ta+")*)|.*)\\)|)",na=new RegExp("^"+Jo+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Jo+"+$","g"),ra=new RegExp("^"+Jo+"*,"+Jo+"*"),ia=new RegExp("^"+Jo+"*([>+~]|"+Jo+")"+Jo+"*"),oa=new RegExp("="+Jo+"*([^\\]'\"]*?)"+Jo+"*\\]","g"),aa=new RegExp(ea),sa=new RegExp("^"+Qo+"$"),ua={ID:new RegExp("^#("+Qo+")"),CLASS:new RegExp("^\\.("+Qo+")"),TAG:new RegExp("^("+Qo+"|[*])"),ATTR:new RegExp("^"+ta),PSEUDO:new RegExp("^"+ea),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Jo+"*(even|odd|(([+-]|)(\\d*)n|)"+Jo+"*(?:([+-]|)"+Jo+"*(\\d+)|))"+Jo+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+Jo+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Jo+"*((?:-\\d)?\\d*)"+Jo+"*\\)|)(?=[^-]|$)","i")},ca=/^(?:input|select|textarea|button)$/i,la=/^h\d$/i,fa=/^[^{]+\{\s*\[native \w/,da=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ha=/[+~]/,pa=/'|\\/g,ga=new RegExp("\\\\([\\da-f]{1,6}"+Jo+"?|("+Jo+")|.)","ig"),va=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{qo.apply(Ho=Zo.call(Ro.childNodes),Ro.childNodes),Ho[Ro.childNodes.length].nodeType}catch(t){qo={apply:Ho.length?function(t,e){Xo.apply(t,Zo.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}var ma=function(t,e,n,r){var i,o,a,s,u,c,l,f,d,h;if((e?e.ownerDocument||e:Ro)!==jr&&Rr(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=(e=e||jr).nodeType)&&9!==s)return[];if(Fr&&!r){if(i=da.exec(t))if(a=i[1]){if(9===s){if(!(o=e.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&Gr(e,o)&&o.id===a)return n.push(o),n}else{if(i[2])return qo.apply(n,e.getElementsByTagName(t)),n;if((a=i[3])&&kr.getElementsByClassName)return qo.apply(n,e.getElementsByClassName(a)),n}if(kr.qsa&&(!zr||!zr.test(t))){if(f=l=Lo,d=e,h=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(c=Ar(t),(l=e.getAttribute("id"))?f=l.replace(pa,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",u=c.length;u--;)c[u]=f+Sa(c[u]);d=ha.test(t)&&_a(e.parentNode)||e,h=c.join(",")}if(h)try{return qo.apply(n,d.querySelectorAll(h)),n}catch(t){}finally{l||e.removeAttribute("id")}}}return Ir(t.replace(na,"$1"),e,n,r)};function ya(){var t=[];return function e(n,r){return t.push(n+" ")>Mr.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function ba(t){return t[Lo]=!0,t}function xa(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Uo)-(~t.sourceIndex||Uo);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function wa(t){return ba((function(e){return e=+e,ba((function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function _a(t){return t&&typeof t.getElementsByTagName!==Vo&&t}function Ea(){}function Sa(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function Ca(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=Bo++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,u,c=[jo,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if((s=(u=e[Lo]||(e[Lo]={}))[r])&&s[0]===jo&&s[1]===o)return c[2]=s[2];if(u[r]=c,c[2]=t(e,n,a))return!0}}}function ka(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function Ma(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,c=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(s)));return a}function Oa(t,e,n,r,i,o){return r&&!r[Lo]&&(r=Oa(r)),i&&!i[Lo]&&(i=Oa(i,o)),ba((function(o,a,s,u){var c,l,f,d=[],h=[],p=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ma(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),v=!t||!o&&e?g:Ma(g,d,t,s,u),m=n?i||(o?t:p||r)?[]:a:v;if(n&&n(v,m,s,u),r)for(c=Ma(m,h),r(c,[],s,u),l=c.length;l--;)(f=c[l])&&(m[h[l]]=!(v[h[l]]=f));if(o){if(i||t){if(i){for(c=[],l=m.length;l--;)(f=m[l])&&c.push(v[l]=f);i(null,m=[],c,u)}for(l=m.length;l--;)(f=m[l])&&(c=i?Ko.call(o,f):d[l])>-1&&(o[c]=!(a[c]=f))}}else m=Ma(m===a?m.splice(p,m.length):m),i?i(null,a,m,u):qo.apply(a,m)}))}function Ta(t){for(var e,n,r,i=t.length,o=Mr.relative[t[0].type],a=o||Mr.relative[" "],s=o?1:0,u=Ca((function(t){return t===e}),a,!0),c=Ca((function(t){return Ko.call(e,t)>-1}),a,!0),l=[function(t,n,r){var i=!o&&(r||n!==Pr)||((e=n).nodeType?u(t,n,r):c(t,n,r));return e=null,i}];s<i;s++)if(n=Mr.relative[t[s].type])l=[Ca(ka(l),n)];else{if((n=Mr.filter[t[s].type].apply(null,t[s].matches))[Lo]){for(r=++s;r<i&&!Mr.relative[t[r].type];r++);return Oa(s>1&&ka(l),s>1&&Sa(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(na,"$1"),n,s<r&&Ta(t.slice(s,r)),r<i&&Ta(t=t.slice(r)),r<i&&Sa(t))}l.push(n)}return ka(l)}kr=ma.support={},Tr=ma.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},Rr=ma.setDocument=function(t){var e,n=t?t.ownerDocument||t:Ro,r=n.defaultView;return n!==jr&&9===n.nodeType&&n.documentElement?(jr=n,Br=n.documentElement,Fr=!Tr(n),r&&r!==function(t){try{return t.top}catch(t){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",(function(){Rr()}),!1):r.attachEvent&&r.attachEvent("onunload",(function(){Rr()}))),kr.attributes=!0,kr.getElementsByTagName=!0,kr.getElementsByClassName=fa.test(n.getElementsByClassName),kr.getById=!0,Mr.find.ID=function(t,e){if(typeof e.getElementById!==Vo&&Fr){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},Mr.filter.ID=function(t){var e=t.replace(ga,va);return function(t){return t.getAttribute("id")===e}},Mr.find.TAG=kr.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==Vo)return e.getElementsByTagName(t)}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},Mr.find.CLASS=kr.getElementsByClassName&&function(t,e){if(Fr)return e.getElementsByClassName(t)},$r=[],zr=[],kr.disconnectedMatch=!0,zr=zr.length&&new RegExp(zr.join("|")),$r=$r.length&&new RegExp($r.join("|")),e=fa.test(Br.compareDocumentPosition),Gr=e||fa.test(Br.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Go=e?function(t,e){if(t===e)return Lr=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!kr.sortDetached&&e.compareDocumentPosition(t)===r?t===n||t.ownerDocument===Ro&&Gr(Ro,t)?-1:e===n||e.ownerDocument===Ro&&Gr(Ro,e)?1:Dr?Ko.call(Dr,t)-Ko.call(Dr,e):0:4&r?-1:1)}:function(t,e){if(t===e)return Lr=!0,0;var r,i=0,o=t.parentNode,a=e.parentNode,s=[t],u=[e];if(!o||!a)return t===n?-1:e===n?1:o?-1:a?1:Dr?Ko.call(Dr,t)-Ko.call(Dr,e):0;if(o===a)return xa(t,e);for(r=t;r=r.parentNode;)s.unshift(r);for(r=e;r=r.parentNode;)u.unshift(r);for(;s[i]===u[i];)i++;return i?xa(s[i],u[i]):s[i]===Ro?-1:u[i]===Ro?1:0},n):jr},ma.matches=function(t,e){return ma(t,null,null,e)},ma.matchesSelector=function(t,e){if((t.ownerDocument||t)!==jr&&Rr(t),e=e.replace(oa,"='$1']"),kr.matchesSelector&&Fr&&(!$r||!$r.test(e))&&(!zr||!zr.test(e)))try{var n=(void 0).call(t,e);if(n||kr.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return ma(e,jr,null,[t]).length>0},ma.contains=function(t,e){return(t.ownerDocument||t)!==jr&&Rr(t),Gr(t,e)},ma.attr=function(t,e){(t.ownerDocument||t)!==jr&&Rr(t);var n=Mr.attrHandle[e.toLowerCase()],r=n&&Wo.call(Mr.attrHandle,e.toLowerCase())?n(t,e,!Fr):void 0;return void 0!==r?r:kr.attributes||!Fr?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},ma.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ma.uniqueSort=function(t){var e,n=[],r=0,i=0;if(Lr=!kr.detectDuplicates,Dr=!kr.sortStable&&t.slice(0),t.sort(Go),Lr){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return Dr=null,t},Or=ma.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=Or(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=Or(e);return n},Mr=ma.selectors={cacheLength:50,createPseudo:ba,match:ua,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ga,va),t[3]=(t[3]||t[4]||t[5]||"").replace(ga,va),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ma.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ma.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ua.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&aa.test(n)&&(e=Ar(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(ga,va).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=Fo[t+" "];return e||(e=new RegExp("(^|"+Jo+")"+t+"("+Jo+"|$)"))&&Fo(t,(function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==Vo&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=ma.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,f,d,h,p,g=o!==a?"nextSibling":"previousSibling",v=e.parentNode,m=s&&e.nodeName.toLowerCase(),y=!u&&!s;if(v){if(o){for(;g;){for(f=e;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(h=(c=(l=v[Lo]||(v[Lo]={}))[t]||[])[0]===jo&&c[1],d=c[0]===jo&&c[2],f=h&&v.childNodes[h];f=++h&&f&&f[g]||(d=h=0)||p.pop();)if(1===f.nodeType&&++d&&f===e){l[t]=[jo,h,d];break}}else if(y&&(c=(e[Lo]||(e[Lo]={}))[t])&&c[0]===jo)d=c[1];else for(;(f=++h&&f&&f[g]||(d=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++d||(y&&((f[Lo]||(f[Lo]={}))[t]=[jo,d]),f!==e)););return(d-=i)===r||d%r==0&&d/r>=0}}},PSEUDO:function(t,e){var n,r=Mr.pseudos[t]||Mr.setFilters[t.toLowerCase()]||ma.error("unsupported pseudo: "+t);return r[Lo]?r(e):r.length>1?(n=[t,t,"",e],Mr.setFilters.hasOwnProperty(t.toLowerCase())?ba((function(t,n){for(var i,o=r(t,e),a=o.length;a--;)t[i=Ko.call(t,o[a])]=!(n[i]=o[a])})):function(t){return r(t,0,n)}):r}},pseudos:{not:ba((function(t){var e=[],n=[],r=Nr(t.replace(na,"$1"));return r[Lo]?ba((function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:ba((function(t){return function(e){return ma(t,e).length>0}})),contains:ba((function(t){return t=t.replace(ga,va),function(e){return(e.textContent||e.innerText||Or(e)).indexOf(t)>-1}})),lang:ba((function(t){return sa.test(t||"")||ma.error("unsupported lang: "+t),t=t.replace(ga,va).toLowerCase(),function(e){var n;do{if(n=Fr?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===Br},focus:function(t){return t===jr.activeElement&&(!jr.hasFocus||jr.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!Mr.pseudos.empty(t)},header:function(t){return la.test(t.nodeName)},input:function(t){return ca.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:wa((function(){return[0]})),last:wa((function(t,e){return[e-1]})),eq:wa((function(t,e,n){return[n<0?n+e:n]})),even:wa((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:wa((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:wa((function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t})),gt:wa((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},Mr.pseudos.nth=Mr.pseudos.eq,U(["radio","checkbox","file","password","image"],(function(t){Mr.pseudos[t]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(t)})),U(["submit","reset"],(function(t){Mr.pseudos[t]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(t)})),Ea.prototype=Mr.filters=Mr.pseudos,Mr.setFilters=new Ea,Ar=ma.tokenize=function(t,e){var n,r,i,o,a,s,u,c=zo[t+" "];if(c)return e?0:c.slice(0);for(a=t,s=[],u=Mr.preFilter;a;){for(o in n&&!(r=ra.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=ia.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(na," ")}),a=a.slice(n.length)),Mr.filter)Mr.filter.hasOwnProperty(o)&&(!(r=ua[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length)));if(!n)break}return e?a.length:a?ma.error(t):zo(t,s).slice(0)},Nr=ma.compile=function(t,e){var n,r=[],i=[],o=$o[t+" "];if(!o){for(e||(e=Ar(t)),n=e.length;n--;)(o=Ta(e[n]))[Lo]?r.push(o):i.push(o);o=$o(t,function(t,e){var n=e.length>0,r=t.length>0,i=function(i,o,a,s,u){var c,l,f,d=0,h="0",p=i&&[],g=[],v=Pr,m=i||r&&Mr.find.TAG("*",u),y=jo+=null==v?1:Math.random()||.1,b=m.length;for(u&&(Pr=o!==jr&&o);h!==b&&null!=(c=m[h]);h++){if(r&&c){for(l=0;f=t[l++];)if(f(c,o,a)){s.push(c);break}u&&(jo=y)}n&&((c=!f&&c)&&d--,i&&p.push(c))}if(d+=h,n&&h!==d){for(l=0;f=e[l++];)f(p,g,o,a);if(i){if(d>0)for(;h--;)p[h]||g[h]||(g[h]=Yo.call(s));g=Ma(g)}qo.apply(s,g),u&&!i&&g.length>0&&d+e.length>1&&ma.uniqueSort(s)}return u&&(jo=y,Pr=v),p};return n?ba(i):i}(i,r)),o.selector=t}return o},Ir=ma.select=function(t,e,n,r){var i,o,a,s,u,c="function"==typeof t&&t,l=!r&&Ar(t=c.selector||t);if(n=n||[],1===l.length){if((o=l[0]=l[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&kr.getById&&9===e.nodeType&&Fr&&Mr.relative[o[1].type]){if(!(e=(Mr.find.ID(a.matches[0].replace(ga,va),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=ua.needsContext.test(t)?0:o.length;i--&&(a=o[i],!Mr.relative[s=a.type]);)if((u=Mr.find[s])&&(r=u(a.matches[0].replace(ga,va),ha.test(o[0].type)&&_a(e.parentNode)||e))){if(o.splice(i,1),!(t=r.length&&Sa(o)))return qo.apply(n,r),n;break}}return(c||Nr(t,l))(r,e,!Fr,n,ha.test(t)&&_a(e.parentNode)||e),n},kr.sortStable=Lo.split("").sort(Go).join("")===Lo,kr.detectDuplicates=!!Lr,Rr(),kr.sortDetached=!0;var Aa=document,Na=Array.prototype.push,Ia=Array.prototype.slice,Pa=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Da=Do.Event,La=Me.makeMap("children,contents,next,prev"),Ra=function(t){return void 0!==t},ja=function(t){return"string"==typeof t},Ba=function(t,e){var n,r=(e=e||Aa).createElement("div"),i=e.createDocumentFragment();for(r.innerHTML=t;n=r.firstChild;)i.appendChild(n);return i},Fa=function(t,e,n,r){var i;if(ja(e))e=Ba(e,Qa(t[0]));else if(e.length&&!e.nodeType){if(e=rs.makeArray(e),r)for(i=e.length-1;i>=0;i--)Fa(t,e[i],n,r);else for(i=0;i<e.length;i++)Fa(t,e[i],n,r);return t}if(e.nodeType)for(i=t.length;i--;)n.call(t[i],e);return t},za=function(t,e){return t&&e&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")},$a=function(t,e,n){var r,i;return e=rs(e)[0],t.each((function(){var t=this;n&&r===t.parentNode||(r=t.parentNode,i=e.cloneNode(!1),t.parentNode.insertBefore(i,t)),i.appendChild(t)})),t},Ga=Me.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Va=Me.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Ua={for:"htmlFor",class:"className",readonly:"readOnly"},Wa={float:"cssFloat"},Ha={},Ya={},Xa=function(t,e){return new rs.fn.init(t,e)},qa=/^\s*|\s*$/g,Za=function(t){return null==t?"":(""+t).replace(qa,"")},Ka=function(t,e){var n,r,i,o;if(t)if(void 0===(n=t.length)){for(r in t)if(t.hasOwnProperty(r)&&(o=t[r],!1===e.call(o,r,o)))break}else for(i=0;i<n&&(o=t[i],!1!==e.call(o,i,o));i++);return t},Ja=function(t,e){var n=[];return Ka(t,(function(t,r){e(r,t)&&n.push(r)})),n},Qa=function(t){return t?9===t.nodeType?t:t.ownerDocument:Aa};Xa.fn=Xa.prototype={constructor:Xa,selector:"",context:null,length:0,init:function(t,e){var n,r,i=this;if(!t)return i;if(t.nodeType)return i.context=i[0]=t,i.length=1,i;if(e&&e.nodeType)i.context=e;else{if(e)return rs(t).attr(e);i.context=e=document}if(ja(t)){if(i.selector=t,!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:Pa.exec(t)))return rs(e).find(t);if(n[1])for(r=Ba(t,Qa(e)).firstChild;r;)Na.call(i,r),r=r.nextSibling;else{if(!(r=Qa(e).getElementById(n[2])))return i;if(r.id!==n[2])return i.find(t);i.length=1,i[0]=r}}else this.add(t,!1);return i},toArray:function(){return Me.toArray(this)},add:function(t,e){var n,r,i=this;if(ja(t))return i.add(rs(t));if(!1!==e)for(n=rs.unique(i.toArray().concat(rs.makeArray(t))),i.length=n.length,r=0;r<n.length;r++)i[r]=n[r];else Na.apply(i,rs.makeArray(t));return i},attr:function(t,e){var n,r=this;if("object"==typeof t)Ka(t,(function(t,e){r.attr(t,e)}));else{if(!Ra(e)){if(r[0]&&1===r[0].nodeType){if((n=Ha[t])&&n.get)return n.get(r[0],t);if(Va[t])return r.prop(t)?t:void 0;null===(e=r[0].getAttribute(t,2))&&(e=void 0)}return e}this.each((function(){var n;if(1===this.nodeType){if((n=Ha[t])&&n.set)return void n.set(this,e);null===e?this.removeAttribute(t,2):this.setAttribute(t,e,2)}}))}return r},removeAttr:function(t){return this.attr(t,null)},prop:function(t,e){var n=this;if("object"==typeof(t=Ua[t]||t))Ka(t,(function(t,e){n.prop(t,e)}));else{if(!Ra(e))return n[0]&&n[0].nodeType&&t in n[0]?n[0][t]:e;this.each((function(){1===this.nodeType&&(this[t]=e)}))}return n},css:function(t,e){var n,r,i=this,o=function(t){return t.replace(/-(\D)/g,(function(t,e){return e.toUpperCase()}))},a=function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t}))};if("object"==typeof t)Ka(t,(function(t,e){i.css(t,e)}));else if(Ra(e))t=o(t),"number"!=typeof e||Ga[t]||(e=e.toString()+"px"),i.each((function(){var n=this.style;if((r=Ya[t])&&r.set)r.set(this,e);else{try{this.style[Wa[t]||t]=e}catch(t){}null!==e&&""!==e||(n.removeProperty?n.removeProperty(a(t)):n.removeAttribute(t))}}));else{if(n=i[0],(r=Ya[t])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[o(t)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(t))}catch(t){return}}return i},remove:function(){for(var t,e=this.length;e--;)t=this[e],Da.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var t,e=this.length;e--;)for(t=this[e];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(t){var e,n=this;if(Ra(t)){e=n.length;try{for(;e--;)n[e].innerHTML=t}catch(r){rs(n[e]).empty().append(t)}return n}return n[0]?n[0].innerHTML:""},text:function(t){var e,n=this;if(Ra(t)){for(e=n.length;e--;)"innerText"in n[e]?n[e].innerText=t:n[0].textContent=t;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return Fa(this,arguments,(function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(t)}))},prepend:function(){return Fa(this,arguments,(function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(t,this.firstChild)}),!0)},before:function(){var t=this;return t[0]&&t[0].parentNode?Fa(t,arguments,(function(t){this.parentNode.insertBefore(t,this)})):t},after:function(){var t=this;return t[0]&&t[0].parentNode?Fa(t,arguments,(function(t){this.parentNode.insertBefore(t,this.nextSibling)}),!0):t},appendTo:function(t){return rs(t).append(this),this},prependTo:function(t){return rs(t).prepend(this),this},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){return $a(this,t)},wrapAll:function(t){return $a(this,t,!0)},wrapInner:function(t){return this.each((function(){rs(this).contents().wrapAll(t)})),this},unwrap:function(){return this.parent().each((function(){rs(this).replaceWith(this.childNodes)}))},clone:function(){var t=[];return this.each((function(){t.push(this.cloneNode(!0))})),rs(t)},addClass:function(t){return this.toggleClass(t,!0)},removeClass:function(t){return this.toggleClass(t,!1)},toggleClass:function(t,e){var n=this;return"string"!=typeof t||(-1!==t.indexOf(" ")?Ka(t.split(" "),(function(){n.toggleClass(this,e)})):n.each((function(n,r){var i=za(r,t);if(i!==e){var o=r.className;i?r.className=Za((" "+o+" ").replace(" "+t+" "," ")):r.className+=o?" "+t:t}}))),n},hasClass:function(t){return za(this[0],t)},each:function(t){return Ka(this,t)},on:function(t,e){return this.each((function(){Da.bind(this,t,e)}))},off:function(t,e){return this.each((function(){Da.unbind(this,t,e)}))},trigger:function(t){return this.each((function(){"object"==typeof t?Da.fire(this,t.type,t):Da.fire(this,t)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return rs(Ia.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(t){var e,n,r=[];for(e=0,n=this.length;e<n;e++)rs.find(t,this[e],r);return rs(r)},filter:function(t){return rs("function"==typeof t?Ja(this.toArray(),(function(e,n){return t(n,e)})):rs.filter(t,this.toArray()))},closest:function(t){var e=[];return t instanceof rs&&(t=t[0]),this.each((function(n,r){for(;r;){if("string"==typeof t&&rs(r).is(t)){e.push(r);break}if(r===t){e.push(r);break}r=r.parentNode}})),rs(e)},offset:function(t){var e,n,r,i,o=0,a=0;return t?this.css(t):((e=this[0])&&(r=(n=e.ownerDocument).documentElement,e.getBoundingClientRect&&(o=(i=e.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=i.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:a})},push:Na,sort:Array.prototype.sort,splice:Array.prototype.splice},Me.extend(Xa,{extend:Me.extend,makeArray:function(t){return(e=t)&&e===e.window||t.nodeType?[t]:Me.toArray(t);var e},inArray:function(t,e){var n;if(e.indexOf)return e.indexOf(t);for(n=e.length;n--;)if(e[n]===t)return n;return-1},isArray:Me.isArray,each:Ka,trim:Za,grep:Ja,find:ma,expr:ma.selectors,unique:ma.uniqueSort,text:ma.getText,contains:ma.contains,filter:function(t,e,n){var r=e.length;for(n&&(t=":not("+t+")");r--;)1!==e[r].nodeType&&e.splice(r,1);return 1===e.length?rs.find.matchesSelector(e[0],t)?[e[0]]:[]:rs.find.matches(t,e)}});var ts=function(t,e,n){var r=[],i=t[e];for("string"!=typeof n&&n instanceof rs&&(n=n[0]);i&&9!==i.nodeType;){if(void 0!==n){if(i===n)break;if("string"==typeof n&&rs(i).is(n))break}1===i.nodeType&&r.push(i),i=i[e]}return r},es=function(t,e,n,r){var i=[];for(r instanceof rs&&(r=r[0]);t;t=t[e])if(!n||t.nodeType===n){if(void 0!==r){if(t===r)break;if("string"==typeof r&&rs(t).is(r))break}i.push(t)}return i},ns=function(t,e,n){for(t=t[e];t;t=t[e])if(t.nodeType===n)return t;return null};Ka({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ts(t,"parentNode")},next:function(t){return ns(t,"nextSibling",1)},prev:function(t){return ns(t,"previousSibling",1)},children:function(t){return es(t.firstChild,"nextSibling",1)},contents:function(t){return Me.toArray(("iframe"===t.nodeName?t.contentDocument||t.contentWindow.document:t).childNodes)}},(function(t,e){Xa.fn[t]=function(n){var r=[];this.each((function(){var t=e.call(r,this,n,r);t&&(rs.isArray(t)?r.push.apply(r,t):r.push(t))})),this.length>1&&(La[t]||(r=rs.unique(r)),0===t.indexOf("parents")&&(r=r.reverse()));var i=rs(r);return n?i.filter(n):i}})),Ka({parentsUntil:function(t,e){return ts(t,"parentNode",e)},nextUntil:function(t,e){return es(t,"nextSibling",1,e).slice(1)},prevUntil:function(t,e){return es(t,"previousSibling",1,e).slice(1)}},(function(t,e){Xa.fn[t]=function(n,r){var i=[];this.each((function(){var t=e.call(i,this,n,i);t&&(rs.isArray(t)?i.push.apply(i,t):i.push(t))})),this.length>1&&(i=rs.unique(i),0!==t.indexOf("parents")&&"prevUntil"!==t||(i=i.reverse()));var o=rs(i);return r?o.filter(r):o}})),Xa.fn.is=function(t){return!!t&&this.filter(t).length>0},Xa.fn.init.prototype=Xa.fn,Xa.overrideDefaults=function(t){var e,n=function(r,i){return e=e||t(),0===arguments.length&&(r=e.element),i||(i=e.context),new n.fn.init(r,i)};return rs.extend(n,this),n},Xa.attrHooks=Ha,Xa.cssHooks=Ya;var rs=Xa,is=Me.each,os=Me.grep,as=_e.ie,ss=/^([a-z0-9],?)+$/i,us=function(t,e){var n=e.attr("style"),r=t.serialize(t.parse(n),e[0].nodeName);r||(r=null),e.attr("data-mce-style",r)},cs=function(t,e){var n,r,i=0;if(t)for(n=t.nodeType,t=t.previousSibling;t;t=t.previousSibling)r=t.nodeType,(!e||3!==r||r!==n&&t.nodeValue.length)&&(i++,n=r);return i},ls=function(t,e){void 0===e&&(e={});var n={},r=window,i={},o=0,a=ti.forElement(Ie(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),s=[],u=e.schema?e.schema:_o({}),c=So({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),l=e.ownEvents?new Do:Do.Event,d=u.getBlockElements(),h=rs.overrideDefaults((function(){return{context:t,element:V.getRoot()}})),p=function(e){return e&&t&&f(e)?t.getElementById(e):e},g=function(t){return h("string"==typeof t?p(t):t)},v=function(t,e,n){var r,i,o=g(t);return o.length&&(i=(r=W[e])&&r.get?r.get(o,e):o.attr(e)),void 0===i&&(i=n||""),i},y=function(t){var e=p(t);return e?e.attributes:[]},b=function(t,n,r){""===r&&(r=null);var i=g(t),o=i.attr(n);if(i.length){var a=W[n];a&&a.set?a.set(i,r,n):i.attr(n,r),o!==r&&e.onSetAttrib&&e.onSetAttrib({attrElm:i,attrName:n,attrValue:r})}},x=function(){return e.root_element||t.body},_=function(e,n){return function(t,e,n){var r=0,i=0,o=t.ownerDocument;if(n=n||t,e){if(n===t&&e.getBoundingClientRect&&"static"===ir(Ie(t),"position")){var a=e.getBoundingClientRect();return{x:r=a.left+(o.documentElement.scrollLeft||t.scrollLeft)-o.documentElement.clientLeft,y:i=a.top+(o.documentElement.scrollTop||t.scrollTop)-o.documentElement.clientTop}}for(var s=e;s&&s!==n&&s.nodeType&&!lr(s,n);){var u=s;r+=u.offsetLeft||0,i+=u.offsetTop||0,s=u.offsetParent}for(s=e.parentNode;s&&s!==n&&s.nodeType&&!lr(s,n);)r-=s.scrollLeft||0,i-=s.scrollTop||0,s=s.parentNode;i+=function(t){return ur.isFirefox()&&"table"===Be(t)?cr(Qe(t)).filter((function(t){return"caption"===Be(t)})).bind((function(t){return cr(Je(t)).map((function(e){var n=e.dom.offsetTop,r=t.dom.offsetTop,i=t.dom.offsetHeight;return n<=r?-i:0}))})).getOr(0):0}(Ie(e))}return{x:r,y:i}}(t.body,p(e),n)},E=function(t,e,n){var r=g(t);return n?r.css(e):("float"===(e=e.replace(/-(\D)/g,(function(t,e){return e.toUpperCase()})))&&(e=_e.browser.isIE()?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[e]:void 0)},C=function(t){var e,n;return t=p(t),e=E(t,"width"),n=E(t,"height"),-1===e.indexOf("px")&&(e=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(e,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},k=function(t,e){var n;if(!t)return!1;if(!Array.isArray(t)){if("*"===e)return 1===t.nodeType;if(ss.test(e)){var r=e.toLowerCase().split(/,/),i=t.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===i)return!0;return!1}if(t.nodeType&&1!==t.nodeType)return!1}var o=Array.isArray(t)?t:[t];return ma(e,o[0].ownerDocument||o[0],null,o).length>0},M=function(t,e,n,r){var i,o=[],a=p(t);for(r=void 0===r,n=n||("BODY"!==x().nodeName?x().parentNode:null),Me.is(e,"string")&&(i=e,e="*"===e?function(t){return 1===t.nodeType}:function(t){return k(t,i)});a&&!(a===n||m(a.nodeType)||$n(a)||Gn(a));){if(!e||"function"==typeof e&&e(a)){if(!r)return[a];o.push(a)}a=a.parentNode}return r?o:null},O=function(t,e,n){var r=e;if(t)for("string"==typeof e&&(r=function(t){return k(t,e)}),t=t[n];t;t=t[n])if("function"==typeof r&&r(t))return t;return null},T=function(t,e,n){var r,i="string"==typeof t?p(t):t;if(!i)return!1;if(Me.isArray(i)&&(i.length||0===i.length))return r=[],is(i,(function(t,i){t&&r.push(e.call(n,"string"==typeof t?p(t):t,i))})),r;var o=n||this;return e.call(o,i)},A=function(t,e){g(t).each((function(t,n){is(e,(function(t,e){b(n,e,t)}))}))},N=function(t,e){var n=g(t);as?n.each((function(t,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+e,n.removeChild(n.firstChild)}catch(t){rs("<div></div>").html("<br>"+e).contents().slice(1).appendTo(n)}return e}})):n.html(e)},I=function(e,n,r,i,o){return T(e,(function(e){var a="string"==typeof n?t.createElement(n):n;return A(a,r),i&&("string"!=typeof i&&i.nodeType?a.appendChild(i):"string"==typeof i&&N(a,i)),o?a:e.appendChild(a)}))},P=function(e,n,r){return I(t.createElement(e),e,n,r,!0)},D=co.encodeAllRaw,L=function(t,e){var n=g(t);return e?n.each((function(){for(var t;t=this.firstChild;)3===t.nodeType&&0===t.data.length?this.removeChild(t):this.parentNode.insertBefore(t,this)})).remove():n.remove(),n.length>1?n.toArray():n[0]},R=function(t,e,n){g(t).toggleClass(e,n).each((function(){""===this.className&&rs(this).attr("class",null)}))},j=function(t,e,n){return T(e,(function(e){return Me.is(e,"array")&&(t=t.cloneNode(!0)),n&&is(os(e.childNodes),(function(e){t.appendChild(e)})),e.parentNode.replaceChild(t,e)}))},B=function(t){if(Nn(t)){var e="a"===t.nodeName.toLowerCase()&&!v(t,"href")&&v(t,"id");if(v(t,"name")||v(t,"data-mce-bookmark")||e)return!0}return!1},F=function(){return t.createRange()},z=function(n,i,o,a){if(Me.isArray(n)){for(var u=n.length,c=[];u--;)c[u]=z(n[u],i,o,a);return c}return!e.collect||n!==t&&n!==r||s.push([n,i,o,a]),l.bind(n,i,o,a||V)},$=function(e,n,i){if(Me.isArray(e)){for(var o=e.length,a=[];o--;)a[o]=$(e[o],n,i);return a}if(s.length>0&&(e===t||e===r))for(o=s.length;o--;){var u=s[o];e!==u[0]||n&&n!==u[1]||i&&i!==u[2]||l.unbind(u[0],u[1],u[2])}return l.unbind(e,n,i)},G=function(t){if(t&&Nn(t)){var e=t.getAttribute("data-mce-contenteditable");return e&&"inherit"!==e?e:"inherit"!==t.contentEditable?t.contentEditable:null}return null},V={doc:t,settings:e,win:r,files:i,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:s,styles:c,schema:u,events:l,isBlock:function(t){if("string"==typeof t)return!!d[t];if(t){var e=t.nodeType;if(e)return!(1!==e||!d[t.nodeName])}return!1},$:h,$$:g,root:null,clone:function(e,n){if(!as||1!==e.nodeType||n)return e.cloneNode(n);var r=t.createElement(e.nodeName);return is(y(e),(function(t){b(r,t.nodeName,v(e,t.nodeName))})),r},getRoot:x,getViewPort:function(t){var e=On(t);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:function(t){t=p(t);var e=_(t),n=C(t);return{x:e.x,y:e.y,w:n.w,h:n.h}},getSize:C,getParent:function(t,e,n){var r=M(t,e,n,!1);return r&&r.length>0?r[0]:null},getParents:M,get:p,getNext:function(t,e){return O(t,e,"nextSibling")},getPrev:function(t,e){return O(t,e,"previousSibling")},select:function(n,r){return ma(n,p(r)||e.root_element||t,[])},is:k,add:I,create:P,createHTML:function(t,e,n){var r,i="";for(r in i+="<"+t,e)bt(e,r)&&(i+=" "+r+'="'+D(e[r])+'"');return void 0!==n?i+">"+n+"</"+t+">":i+" />"},createFragment:function(e){var n,r=t.createElement("div"),i=t.createDocumentFragment();for(i.appendChild(r),e&&(r.innerHTML=e);n=r.firstChild;)i.appendChild(n);return i.removeChild(r),i},remove:L,setStyle:function(t,n,r){var i=f(n)?g(t).css(n,r):g(t).css(n);e.update_styles&&us(c,i)},getStyle:E,setStyles:function(t,n){var r=g(t).css(n);e.update_styles&&us(c,r)},removeAllAttribs:function(t){return T(t,(function(t){var e,n=t.attributes;for(e=n.length-1;e>=0;e--)t.removeAttributeNode(n.item(e))}))},setAttrib:b,setAttribs:A,getAttrib:v,getPos:_,parseStyle:function(t){return c.parse(t)},serializeStyle:function(t,e){return c.serialize(t,e)},addStyle:function(e){var r,i;if(V!==ls.DOM&&t===document){if(n[e])return;n[e]=!0}(i=t.getElementById("mceDefaultStyles"))||((i=t.createElement("style")).id="mceDefaultStyles",i.type="text/css",(r=t.getElementsByTagName("head")[0]).firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(t.createTextNode(e))},loadCSS:function(t){t||(t=""),U(t.split(","),(function(t){i[t]=!0,a.load(t,w)}))},addClass:function(t,e){g(t).addClass(e)},removeClass:function(t,e){R(t,e,!1)},hasClass:function(t,e){return g(t).hasClass(e)},toggleClass:R,show:function(t){g(t).show()},hide:function(t){g(t).hide()},isHidden:function(t){return"none"===g(t).css("display")},uniqueId:function(t){return(t||"mce_")+o++},setHTML:N,getOuterHTML:function(t){var e="string"==typeof t?p(t):t;return Nn(e)?e.outerHTML:rs("<div></div>").append(rs(e).clone()).html()},setOuterHTML:function(t,e){g(t).each((function(){try{if("outerHTML"in this)return void(this.outerHTML=e)}catch(t){}L(rs(this).html(e),!0)}))},decode:co.decode,encode:D,insertAfter:function(t,e){var n=p(e);return T(t,(function(t){var e=n.parentNode,r=n.nextSibling;return r?e.insertBefore(t,r):e.appendChild(t),t}))},replace:j,rename:function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=P(e),is(y(t),(function(e){b(n,e.nodeName,v(t,e.nodeName))})),j(n,t,!0)),n||t},findCommonAncestor:function(t,e){for(var n,r=t;r;){for(n=e;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&t.ownerDocument?t.ownerDocument.documentElement:r},toHex:function(t){return c.toHex(Me.trim(t))},run:T,getAttribs:y,isEmpty:function(t,e){var n,r,i=0;if(B(t))return!1;if(t=t.firstChild){var o=new ei(t,t.parentNode),a=u?u.getWhiteSpaceElements():{};e=e||(u?u.getNonEmptyElements():null);do{if(n=t.nodeType,Nn(t)){var s=t.getAttribute("data-mce-bogus");if(s){t=o.next("all"===s);continue}if(r=t.nodeName.toLowerCase(),e&&e[r]){if("br"===r){i++,t=o.next();continue}return!1}if(B(t))return!1}if(8===n)return!1;if(3===n&&!$i(t.nodeValue))return!1;if(3===n&&t.parentNode&&a[t.parentNode.nodeName]&&$i(t.nodeValue))return!1;t=o.next()}while(t)}return i<=1},createRng:F,nodeIndex:cs,split:function(t,e,n){var r,i,o,a=F();if(t&&e)return a.setStart(t.parentNode,cs(t)),a.setEnd(e.parentNode,cs(e)),r=a.extractContents(),(a=F()).setStart(e.parentNode,cs(e)+1),a.setEnd(t.parentNode,cs(t)+1),i=a.extractContents(),(o=t.parentNode).insertBefore(qi(V,r),t),n?o.insertBefore(n,t):o.insertBefore(e,t),o.insertBefore(qi(V,i),t),L(t),n||e},bind:z,unbind:$,fire:function(t,e,n){return l.fire(t,e,n)},getContentEditable:G,getContentEditableParent:function(t){for(var e=x(),n=null;t&&t!==e&&null===(n=G(t));t=t.parentNode);return n},destroy:function(){if(s.length>0)for(var t=s.length;t--;){var e=s[t];l.unbind(e[0],e[1],e[2])}ft(i,(function(t,e){a.unload(e),delete i[e]})),ma.setDocument&&ma.setDocument()},isChildOf:function(t,e){if(as){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}return t===e||e.contains(t)},dumpRng:function(t){return"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset}},W=function(t,e,n){var r=e.keep_values,i={set:function(t,r,i){e.url_converter&&null!==r&&(r=e.url_converter.call(e.url_converter_scope||n(),r,i,t[0])),t.attr("data-mce-"+i,r).attr(i,r)},get:function(t,e){return t.attr("data-mce-"+e)||t.attr(e)}},o={style:{set:function(e,n){null===n||"object"!=typeof n?(r&&e.attr("data-mce-style",n),null!==n&&"string"==typeof n?(e.removeAttr("style"),e.css(t.parse(n))):e.attr("style",n)):e.css(n)},get:function(e){var n=e.attr("data-mce-style")||e.attr("style");return t.serialize(t.parse(n),e[0].nodeName)}}};return r&&(o.href=o.src=i),o}(c,e,S(V));return V};ls.DOM=ls(document),ls.nodeIndex=cs;var fs=ls.DOM,ds=Me.each,hs=Me.grep,ps=function(){function t(t){void 0===t&&(t={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=t}return t.prototype._setReferrerPolicy=function(t){this.settings.referrerPolicy=t},t.prototype.loadScript=function(t,e,n){var r,i=fs,o=function(){i.remove(a),r&&(r.onerror=r.onload=r=null)},a=i.uniqueId();(r=document.createElement("script")).id=a,r.type="text/javascript",r.src=Me._addCacheSuffix(t),this.settings.referrerPolicy&&i.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=function(){o(),e()},r.onerror=function(){o(),b(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)},t.prototype.isDone=function(t){return 2===this.states[t]},t.prototype.markDone=function(t){this.states[t]=2},t.prototype.add=function(t,e,n,r){var i=this.states[t];this.queue.push(t),void 0===i&&(this.states[t]=0),e&&(this.scriptLoadedCallbacks[t]||(this.scriptLoadedCallbacks[t]=[]),this.scriptLoadedCallbacks[t].push({success:e,failure:r,scope:n||this}))},t.prototype.load=function(t,e,n,r){return this.add(t,e,n,r)},t.prototype.remove=function(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]},t.prototype.loadQueue=function(t,e,n){this.loadScripts(this.queue,t,e,n)},t.prototype.loadScripts=function(t,e,n,r){var i=this,o=[],a=function(t,e){ds(i.scriptLoadedCallbacks[e],(function(e){b(e[t])&&e[t].call(e.scope)})),i.scriptLoadedCallbacks[e]=void 0};i.queueLoadedCallbacks.push({success:e,failure:r,scope:n||this});var s=function(){var e=hs(t);if(t.length=0,ds(e,(function(t){2!==i.states[t]?3!==i.states[t]?1!==i.states[t]&&(i.states[t]=1,i.loading++,i.loadScript(t,(function(){i.states[t]=2,i.loading--,a("success",t),s()}),(function(){i.states[t]=3,i.loading--,o.push(t),a("failure",t),s()}))):a("failure",t):a("success",t)})),!i.loading){var n=i.queueLoadedCallbacks.slice(0);i.queueLoadedCallbacks.length=0,ds(n,(function(t){0===o.length?b(t.success)&&t.success.call(t.scope):b(t.failure)&&t.failure.call(t.scope,o)}))}};s()},t.ScriptLoader=new t,t}(),gs=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},vs={},ms=gs("en"),ys=function(){return mt(vs,ms.get())},bs={getData:function(){return dt(vs,(function(t){return Ot({},t)}))},setCode:function(t){t&&ms.set(t)},getCode:function(){return ms.get()},add:function(t,e){var n=vs[t];n||(vs[t]=n={}),ft(e,(function(t,e){n[e.toLowerCase()]=t}))},translate:function(t){var e,n=ys().getOr({}),r=function(t){return b(t)?Object.prototype.toString.call(t):i(t)?"":""+t},i=function(t){return""===t||null==t},o=function(t){var e=r(t);return mt(n,e.toLowerCase()).map(r).getOr(e)},a=function(t){return t.replace(/{context:\w+}$/,"")};if(i(t))return"";if(d(e=t)&&yt(e,"raw"))return r(t.raw);if(function(t){return h(t)&&t.length>1}(t)){var s=t.slice(1);return a(o(t[0]).replace(/\{([0-9]+)\}/g,(function(t,e){return yt(s,e)?r(s[e]):t})))}return a(o(t))},isRtl:function(){return ys().bind((function(t){return mt(t,"_dir")})).exists((function(t){return"rtl"===t}))},hasCode:function(t){return yt(vs,t)}},xs=function(){var t=[],e={},n={},r=[],i=function(t,e){var n=Y(r,(function(n){return n.name===t&&n.state===e}));U(n,(function(t){return t.callback()}))},o=function(t){var e;return n[t]&&(e=n[t].dependencies),e||[]},a=function(t,e){return"object"==typeof e?e:"string"==typeof t?{prefix:"",resource:e,suffix:""}:{prefix:t.prefix,resource:e,suffix:t.suffix}},s=function(t,r,u,c,l){if(!e[t]){var f="string"==typeof r?r:r.prefix+r.resource+r.suffix;0!==f.indexOf("/")&&-1===f.indexOf("://")&&(f=xs.baseURL+"/"+f),e[t]=f.substring(0,f.lastIndexOf("/"));var d=function(){i(t,"loaded"),function(t,e,n,r){var i=o(t);U(i,(function(t){var n=a(e,t);s(n.resource,n,void 0,void 0)})),n&&(r?n.call(r):n.call(ps))}(t,r,u,c)};n[t]?d():ps.ScriptLoader.add(f,d,c,l)}},u=function(t,i,o){void 0===o&&(o="added"),yt(n,t)&&"added"===o||yt(e,t)&&"loaded"===o?i():r.push({name:t,state:o,callback:i})};return{items:t,urls:e,lookup:n,_listeners:r,get:function(t){if(n[t])return n[t].instance},dependencies:o,requireLangPack:function(t,n){!1!==xs.languageLoad&&u(t,(function(){var r=bs.getCode();!r||n&&-1===(","+(n||"")+",").indexOf(","+r+",")||ps.ScriptLoader.add(e[t]+"/langs/"+r+".js")}),"loaded")},add:function(e,r,o){var a=r;return t.push(a),n[e]={instance:a,dependencies:o},i(e,"added"),a},remove:function(t){delete e[t],delete n[t]},createUrl:a,addComponents:function(t,n){var r=e[t];U(n,(function(t){ps.ScriptLoader.add(r+"/"+t)}))},load:s,waitFor:u}};xs.languageLoad=!0,xs.baseURL="",xs.PluginManager=xs(),xs.ThemeManager=xs();var ws=function(){var t=function(t){var e=gs(R.none()),n=function(){return e.get().each(t)};return{clear:function(){n(),e.set(R.none())},isSet:function(){return e.get().isSome()},get:function(){return e.get()},set:function(t){n(),e.set(R.some(t))}}}(w);return Ot(Ot({},t),{on:function(e){return t.get().each(e)}})},_s=function(t,e){var n=null;return{cancel:function(){p(n)||(clearTimeout(n),n=null)},throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];p(n)&&(n=setTimeout((function(){n=null,t.apply(null,r)}),e))}}},Es=function(t,e){var n=null,r=function(){p(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];r(),n=setTimeout((function(){n=null,t.apply(null,i)}),e)}}},Ss=function(t,e){var n=er(t,e);return void 0===n||""===n?[]:n.split(" ")},Cs=function(t){return void 0!==t.dom.classList},ks=function(t,e){Cs(t)?t.dom.classList.add(e):function(t,e){(function(t,e,n){var r=Ss(t,e).concat([n]);Qn(t,e,r.join(" "))})(t,"class",e)}(t,e)},Ms=function(t,e){return Cs(t)&&t.dom.classList.contains(e)},Os=function(t,e){var n=[];return U(Qe(t),(function(t){e(t)&&(n=n.concat([t])),n=n.concat(Os(t,e))})),n},Ts=function(t,e){return function(t,e){var n=void 0===e?document:e.dom;return Le(n)?[]:V(n.querySelectorAll(t),Ie)}(e,t)},As=S("mce-annotation"),Ns=S("data-mce-annotation"),Is=S("data-mce-annotation-uid"),Ps=function(t,e){var n=t.selection.getRng(),r=Ie(n.startContainer),i=Ie(t.getBody()),o=e.fold((function(){return"."+As()}),(function(t){return"["+Ns()+'="'+t+'"]'})),a=tn(r,n.startOffset).getOr(r),s=Yr(a,o,(function(t){return Re(t,i)})),u=function(t,e){return function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)}(t,e)?R.some(er(t,e)):R.none()};return s.bind((function(e){return u(e,""+Is()).bind((function(n){return u(e,""+Ns()).map((function(e){var r=Ds(t,n);return{uid:n,name:e,elements:r}}))}))}))},Ds=function(t,e){var n=Ie(t.getBody());return Ts(n,"["+Is()+'="'+e+'"]')},Ls=0,Rs=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++Ls+String(e)},js=function(t,e){var n,r,i=We(t).dom,o=Ie(i.createDocumentFragment()),a=(n=e,(r=(i||document).createElement("div")).innerHTML=n,Qe(Ie(r)));gn(o,a),vn(t),pn(t,o)},Bs=function(t,e){return Ie(t.dom.cloneNode(e))},Fs=function(t){return Bs(t,!1)},zs=function(t){return Bs(t,!0)},$s=function(t,e,n){void 0===n&&(n=N);var r=new ei(t,e),i=function(t){var e;do{e=r[t]()}while(e&&!Fn(e)&&!n(e));return R.from(e).filter(Fn)};return{current:function(){return R.from(r.current()).filter(Fn)},next:function(){return i("next")},prev:function(){return i("prev")},prev2:function(){return i("prev2")}}},Gs=function(t,e){var n=e||function(e){return t.isBlock(e)||Vn(e)||Hn(e)},r=function(t,e,n,i){if(Fn(t)){var o=i(t,e,t.data);if(-1!==o)return R.some({container:t,offset:o})}return n().bind((function(t){return r(t.container,t.offset,n,i)}))};return{backwards:function(t,e,i,o){var a=$s(t,o,n);return r(t,e,(function(){return a.prev().map((function(t){return{container:t,offset:t.length}}))}),i).getOrNull()},forwards:function(t,e,i,o){var a=$s(t,o,n);return r(t,e,(function(){return a.next().map((function(t){return{container:t,offset:0}}))}),i).getOrNull()}}},Vs=Math.round,Us=function(t){return t?{left:Vs(t.left),top:Vs(t.top),bottom:Vs(t.bottom),right:Vs(t.right),width:Vs(t.width),height:Vs(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Ws=function(t,e){return t=Us(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t},Hs=function(t,e,n){return t>=0&&t<=Math.min(e.height,n.height)/2},Ys=function(t,e){var n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Hs(e.top-t.bottom,t,e)},Xs=function(t,e){return t.top>e.bottom||!(t.bottom<e.top)&&Hs(e.bottom-t.top,t,e)},qs=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},Zs=function(t){var e=t.startContainer,n=t.startOffset;return e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},Ks=function(t,e){if(Nn(t)&&t.hasChildNodes()){var n=t.childNodes,r=function(t,e,n){return Math.min(Math.max(t,0),n)}(e,0,n.length-1);return n[r]}return t},Js=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Qs=function(t){return"string"==typeof t&&t.charCodeAt(0)>=768&&Js.test(t)},tu=Nn,eu=ji,nu=Pn("display","block table"),ru=Pn("float","left right"),iu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var n=0;n<t.length;n++)if(!t[n](e))return!1;return!0}}(tu,eu,O(ru)),ou=O(Pn("white-space","pre pre-line pre-wrap")),au=Fn,su=Vn,uu=ls.nodeIndex,cu=function(t,e){return e<0&&Nn(t)&&t.hasChildNodes()?void 0:Ks(t,e)},lu=function(t){return"createRange"in t?t.createRange():ls.DOM.createRng()},fu=function(t){return t&&/[\r\n\t ]/.test(t)},du=function(t){return!!t.setStart&&!!t.setEnd},hu=function(t){var e=t.startContainer,n=t.startOffset;if(fu(t.toString())&&ou(e.parentNode)&&Fn(e)){var r=e.data;if(fu(r[n-1])||fu(r[n+1]))return!0}return!1},pu=function(t){return 0===t.left&&0===t.right&&0===t.top&&0===t.bottom},gu=function(t){var e,n=t.getClientRects();return e=n.length>0?Us(n[0]):Us(t.getBoundingClientRect()),!du(t)&&su(t)&&pu(e)?function(t){var e=t.ownerDocument,n=lu(e),r=e.createTextNode(hi),i=t.parentNode;i.insertBefore(r,t),n.setStart(r,0),n.setEnd(r,1);var o=Us(n.getBoundingClientRect());return i.removeChild(r),o}(t):pu(e)&&du(t)?function(t){var e=t.startContainer,n=t.endContainer,r=t.startOffset,i=t.endOffset;if(e===n&&Fn(n)&&0===r&&1===i){var o=t.cloneRange();return o.setEndAfter(n),gu(o)}return null}(t):e},vu=function(t,e){var n=Ws(t,e);return n.width=1,n.right=n.left+1,n},mu=function(t,e,n){var r=function(){return n||(n=function(t){var e=[],n=function(t){var n,r;0!==t.height&&(e.length>0&&(n=t,r=e[e.length-1],n.left===r.left&&n.top===r.top&&n.bottom===r.bottom&&n.right===r.right)||e.push(t))},r=function(t,r){var i=lu(t.ownerDocument);if(r<t.data.length){if(Qs(t.data[r]))return e;if(Qs(t.data[r-1])&&(i.setStart(t,r),i.setEnd(t,r+1),!hu(i)))return n(vu(gu(i),!1)),e}r>0&&(i.setStart(t,r-1),i.setEnd(t,r),hu(i)||n(vu(gu(i),!1))),r<t.data.length&&(i.setStart(t,r),i.setEnd(t,r+1),hu(i)||n(vu(gu(i),!0)))},i=t.container(),o=t.offset();if(au(i))return r(i,o),e;if(tu(i))if(t.isAtEnd()){var a=cu(i,o);au(a)&&r(a,a.data.length),iu(a)&&!su(a)&&n(vu(gu(a),!1))}else{if(a=cu(i,o),au(a)&&r(a,0),iu(a)&&t.isAtEnd())return n(vu(gu(a),!1)),e;var s=cu(t.container(),t.offset()-1);iu(s)&&!su(s)&&(nu(s)||nu(a)||!iu(a))&&n(vu(gu(s),!1)),iu(a)&&n(vu(gu(a),!0))}return e}(mu(t,e))),n};return{container:S(t),offset:S(e),toRange:function(){var n=lu(t.ownerDocument);return n.setStart(t,e),n.setEnd(t,e),n},getClientRects:r,isVisible:function(){return r().length>0},isAtStart:function(){return au(t),0===e},isAtEnd:function(){return au(t)?e>=t.data.length:e>=t.childNodes.length},isEqual:function(n){return n&&t===n.container()&&e===n.offset()},getNode:function(n){return cu(t,n?e-1:e)}}};mu.fromRangeStart=function(t){return mu(t.startContainer,t.startOffset)},mu.fromRangeEnd=function(t){return mu(t.endContainer,t.endOffset)},mu.after=function(t){return mu(t.parentNode,uu(t)+1)},mu.before=function(t){return mu(t.parentNode,uu(t))},mu.isAbove=function(t,e){return Zn(ot(e.getClientRects()),at(t.getClientRects()),Ys).getOr(!1)},mu.isBelow=function(t,e){return Zn(at(e.getClientRects()),ot(t.getClientRects()),Xs).getOr(!1)},mu.isAtStart=function(t){return!!t&&t.isAtStart()},mu.isAtEnd=function(t){return!!t&&t.isAtEnd()},mu.isTextPosition=function(t){return!!t&&Fn(t.container())},mu.isElementPosition=function(t){return!1===mu.isTextPosition(t)};var yu,bu=function(t,e){Fn(e)&&0===e.data.length&&t.remove(e)},xu=function(t,e,n){Gn(n)?function(t,e,n){var r=R.from(n.firstChild),i=R.from(n.lastChild);e.insertNode(n),r.each((function(e){return bu(t,e.previousSibling)})),i.each((function(e){return bu(t,e.nextSibling)}))}(t,e,n):function(t,e,n){e.insertNode(n),bu(t,n.previousSibling),bu(t,n.nextSibling)}(t,e,n)},wu=Fn,_u=Ln,Eu=ls.nodeIndex,Su=function(t){var e=t.parentNode;return _u(e)?Su(e):e},Cu=function(t){return t?Ct(t.childNodes,(function(t,e){return _u(e)&&"BR"!==e.nodeName?t=t.concat(Cu(e)):t.push(e),t}),[]):[]},ku=function(t){return function(e){return t===e}},Mu=function(t){return(wu(t)?"text()":t.nodeName.toLowerCase())+"["+function(t){var e,n;e=Cu(Su(t)),n=kt(e,ku(t),t),e=e.slice(0,n+1);var r=Ct(e,(function(t,n,r){return wu(n)&&wu(e[r-1])&&t++,t}),0);return e=Et(e,In([t.nodeName])),(n=kt(e,ku(t),t))-r}(t)+"]"},Ou=function(t,e){var n,r,i,o,a,s=[];return n=e.container(),r=e.offset(),wu(n)?i=function(t,e){for(;(t=t.previousSibling)&&wu(t);)e+=t.data.length;return e}(n,r):(r>=(o=n.childNodes).length?(i="after",r=o.length-1):i="before",n=o[r]),s.push(Mu(n)),a=function(t,e,n){var r=[];for(e=e.parentNode;e!==t;e=e.parentNode)r.push(e);return r}(t,n),a=Et(a,O(Ln)),(s=s.concat(_t(a,(function(t){return Mu(t)})))).reverse().join("/")+","+i},Tu=function(t,e){var n;if(!e)return null;var r=e.split(","),i=r[0].split("/");n=r.length>1?r[1]:"before";var o=Ct(i,(function(t,e){var n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(e);return n?("text()"===n[1]&&(n[1]="#text"),function(t,e,n){var r=Cu(t);return r=Et(r,(function(t,e){return!wu(t)||!wu(r[e-1])})),(r=Et(r,In([e])))[n]}(t,n[1],parseInt(n[2],10))):null}),t);return o?wu(o)?function(t,e){for(var n,r=t,i=0;wu(r);){if(n=r.data.length,e>=i&&e<=i+n){t=r,e-=i;break}if(!wu(r.nextSibling)){t=r,e=n;break}i+=n,r=r.nextSibling}return wu(t)&&e>t.data.length&&(e=t.data.length),mu(t,e)}(o,parseInt(n,10)):(n="after"===n?Eu(o)+1:Eu(o),mu(o.parentNode,n)):null},Au=Hn,Nu=function(t,e,n,r,i){var o,a=r[i?"startContainer":"endContainer"],s=r[i?"startOffset":"endOffset"],u=[],c=0,l=t.getRoot();for(Fn(a)?u.push(n?function(t,e,n){var r,i;for(i=t(e.data.slice(0,n)).length,r=e.previousSibling;r&&Fn(r);r=r.previousSibling)i+=t(r.data).length;return i}(e,a,s):s):(s>=(o=a.childNodes).length&&o.length&&(c=1,s=Math.max(0,o.length-1)),u.push(t.nodeIndex(o[s],n)+c));a&&a!==l;a=a.parentNode)u.push(t.nodeIndex(a,n));return u},Iu=function(t,e,n){var r=0;return Me.each(t.select(e),(function(t){if("all"!==t.getAttribute("data-mce-bogus"))return t!==n&&void r++})),r},Pu=function(t,e){var n,r,i,o=e?"start":"end";n=t[o+"Container"],r=t[o+"Offset"],Nn(n)&&"TR"===n.nodeName&&(n=(i=n.childNodes)[Math.min(e?r:r-1,i.length-1)])&&(r=e?0:n.childNodes.length,t["set"+(e?"Start":"End")](n,r))},Du=function(t){return Pu(t,!0),Pu(t,!1),t},Lu=function(t,e){var n;if(Nn(t)&&(t=Ks(t,e),Au(t)))return t;if(wi(t)){if(Fn(t)&&bi(t)&&(t=t.parentNode),n=t.previousSibling,Au(n))return n;if(n=t.nextSibling,Au(n))return n}},Ru=function(t,e,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng();if(Au(r)||"IMG"===i)return{name:i,index:Iu(n.dom,i,r)};var a=function(t){return Lu(t.startContainer,t.startOffset)||Lu(t.endContainer,t.endOffset)}(o);return a?{name:i=a.tagName,index:Iu(n.dom,i,a)}:function(t,e,n,r){var i=e.dom,o={};return o.start=Nu(i,t,n,r,!0),e.isCollapsed()||(o.end=Nu(i,t,n,r,!1)),Oi(r)&&(o.isFakeCaret=!0),o}(t,n,e,o)},ju=function(t,e,n){var r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},Bu=function(t,e){var n=t.dom,r=t.getRng(),i=n.uniqueId(),o=t.isCollapsed(),a=t.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:Iu(n,s,a)};var u=Du(r.cloneRange());if(!o){u.collapse(!1);var c=ju(n,i+"_end",e);xu(n,u,c)}(r=Du(r)).collapse(!0);var l=ju(n,i+"_start",e);return xu(n,r,l),t.moveToBookmark({id:i,keep:!0}),{id:i}},Fu=M(Ru,C,!0),zu=ls.DOM,$u=function(t,e,n){var r=t.getParam(e,n);if(-1!==r.indexOf("=")){var i=t.getParam(e,"","hash");return mt(i,t.id).getOr(n)}return r},Gu=function(t){return t.getParam("content_security_policy","")},Vu=function(t){if(t.getParam("force_p_newlines",!1))return"p";var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},Uu=function(t){return t.getParam("forced_root_block_attrs",{})},Wu=function(t){return t.getParam("automatic_uploads",!0,"boolean")},Hu=function(t){return t.getParam("images_reuse_filename",!1,"boolean")},Yu=function(t){return t.getParam("icons","","string")},Xu=function(t){return t.getParam("images_upload_url","","string")},qu=function(t){return t.getParam("images_upload_base_path","","string")},Zu=function(t){return t.getParam("images_upload_credentials",!1,"boolean")},Ku=function(t){return t.getParam("images_upload_handler",null,"function")},Ju=function(t){return t.getParam("content_css_cors",!1,"boolean")},Qu=function(t){return t.getParam("referrer_policy","","string")},tc=function(t){return t.getParam("language","en","string")},ec=function(t){return t.getParam("indent_use_margin",!1)},nc=function(t){var e=t.getParam("font_css",[]);return h(e)?e:V(e.split(","),Bt)},rc=function(t){var e=t.getParam("object_resizing");return!1!==e&&!_e.iOS&&(f(e)?e:"table,img,figure.image,div,video,iframe")},ic=function(t){return t.getParam("event_root")},oc=function(t){return t.getParam("theme")},ac=function(t){return t.getParam("validate")},sc=function(t){return!1!==t.getParam("inline_boundaries")},uc=function(t){return t.getParam("content_css_cors")},cc=function(t){return t.getParam("plugins","","string")},lc=Nn,fc=Fn,dc=function(t){var e=t.parentNode;e&&e.removeChild(t)},hc=function(t){var e=vi(t);return{count:t.length-e.length,text:e}},pc=function(t){for(var e;-1!==(e=t.data.lastIndexOf(pi));)t.deleteData(e,1)},gc=function(t,e){return mc(t),e},vc=function(t,e){return mu.isTextPosition(e)?function(t,e){return fc(t)&&e.container()===t?function(t,e){var n=hc(t.data.substr(0,e.offset())),r=hc(t.data.substr(e.offset()));return(n.text+r.text).length>0?(pc(t),mu(t,e.offset()-n.count)):e}(t,e):gc(t,e)}(t,e):function(t,e){return e.container()===t.parentNode?function(t,e){var n=e.container(),r=function(t,e){var n=z(t,e);return-1===n?R.none():R.some(n)}(st(n.childNodes),t).map((function(t){return t<e.offset()?mu(n,e.offset()-1):e})).getOr(e);return mc(t),r}(t,e):gc(t,e)}(t,e)},mc=function(t){lc(t)&&wi(t)&&(_i(t)?t.removeAttribute("data-mce-caret"):dc(t)),fc(t)&&(pc(t),0===t.data.length&&dc(t))},yc=he().browser,bc=Hn,xc=Xn,wc=Yn,_c=function(t,e,n){var r,i,o=Ws(e.getBoundingClientRect(),n);if("BODY"===t.tagName){var a=t.ownerDocument.documentElement;r=t.scrollLeft||a.scrollLeft,i=t.scrollTop||a.scrollTop}else{var s=t.getBoundingClientRect();r=t.scrollLeft-s.left,i=t.scrollTop-s.top}o.left+=r,o.right+=r,o.top+=i,o.bottom+=i,o.width=1;var u=e.offsetWidth-e.clientWidth;return u>0&&(n&&(u*=-1),o.left+=u,o.right+=u),o},Ec=function(t,e,n,r){var i,o,a=ws(),s=Vu(t),u=s.length>0?s:"p",c=function(){!function(t){for(var e=Ts(Ie(t),"*[contentEditable=false],video,audio,embed,object"),n=0;n<e.length;n++){var r,i=e[n].dom,o=i.previousSibling;ki(o)&&(1===(r=o.data).length?o.parentNode.removeChild(o):o.deleteData(r.length-1,1)),o=i.nextSibling,Ci(o)&&(1===(r=o.data).length?o.parentNode.removeChild(o):o.deleteData(0,1))}}(e),o&&(mc(o),o=null),a.on((function(t){rs(t.caret).remove(),a.clear()})),i&&(Jr.clearInterval(i),i=void 0)};return{show:function(t,s){var l;if(c(),wc(s))return null;if(!n(s))return o=function(t,e){var n=t.ownerDocument.createTextNode(pi),r=t.parentNode;if(e){if(i=t.previousSibling,yi(i)){if(wi(i))return i;if(ki(i))return i.splitText(i.data.length-1)}r.insertBefore(n,t)}else{var i=t.nextSibling;if(yi(i)){if(wi(i))return i;if(Ci(i))return i.splitText(1),i}t.nextSibling?r.insertBefore(n,t.nextSibling):r.appendChild(n)}return n}(s,t),l=s.ownerDocument.createRange(),Cc(o.nextSibling)?(l.setStart(o,0),l.setEnd(o,0)):(l.setStart(o,1),l.setEnd(o,1)),l;o=function(t,e,n){var r,i=e.ownerDocument.createElement(t);i.setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(((r=document.createElement("br")).setAttribute("data-mce-bogus","1"),r));var o=e.parentNode;return n?o.insertBefore(i,e):e.nextSibling?o.insertBefore(i,e.nextSibling):o.appendChild(i),i}(u,s,t);var f=_c(e,s,t);rs(o).css("top",f.top);var d=rs('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(Ot({},f)).appendTo(e)[0];return a.set({caret:d,element:s,before:t}),t&&rs(d).addClass("mce-visual-caret-before"),i=Jr.setInterval((function(){r()?rs("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):rs("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")}),500),(l=s.ownerDocument.createRange()).setStart(o,0),l.setEnd(o,0),l},hide:c,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){a.on((function(t){var n=_c(e,t.element,t.before);rs(t.caret).css(Ot({},n))}))},destroy:function(){return Jr.clearInterval(i)}}},Sc=function(){return yc.isIE()||yc.isEdge()||yc.isFirefox()},Cc=function(t){return bc(t)||xc(t)},kc=function(t){return Cc(t)||Rn(t)&&Sc()},Mc=Hn,Oc=Xn,Tc=Pn("display","block table table-cell table-caption list-item"),Ac=wi,Nc=bi,Ic=Nn,Pc=ji,Dc=function(t){return t>0},Lc=function(t){return t<0},Rc=function(t,e){for(var n;n=t(e);)if(!Nc(n))return n;return null},jc=function(t,e,n,r,i){var o=new ei(t,r),a=Mc(t)||Nc(t);if(Lc(e)){if(a&&n(t=Rc(o.prev.bind(o),!0)))return t;for(;t=Rc(o.prev.bind(o),i);)if(n(t))return t}if(Dc(e)){if(a&&n(t=Rc(o.next.bind(o),!0)))return t;for(;t=Rc(o.next.bind(o),i);)if(n(t))return t}return null},Bc=function(t,e){for(;t&&t!==e;){if(Tc(t))return t;t=t.parentNode}return null},Fc=function(t,e,n){return Bc(t.container(),n)===Bc(e.container(),n)},zc=function(t,e){if(!e)return null;var n=e.container(),r=e.offset();return Ic(n)?n.childNodes[r+t]:null},$c=function(t,e){var n=e.ownerDocument.createRange();return t?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStartAfter(e),n.setEndAfter(e)),n},Gc=function(t,e,n){return Bc(e,t)===Bc(n,t)},Vc=function(t,e,n){for(var r=t?"previousSibling":"nextSibling";n&&n!==e;){var i=n[r];if(Ac(i)&&(i=i[r]),Mc(i)||Oc(i)){if(Gc(e,i,n))return i;break}if(Pc(i))break;n=n.parentNode}return null},Uc=M($c,!0),Wc=M($c,!1),Hc=function(t,e,n){var r,i=M(Vc,!0,e),o=M(Vc,!1,e),a=n.startContainer,s=n.startOffset;if(bi(a)){Ic(a)||(a=a.parentNode);var u=a.getAttribute("data-mce-caret");if("before"===u&&(r=a.nextSibling,kc(r)))return Uc(r);if("after"===u&&(r=a.previousSibling,kc(r)))return Wc(r)}if(!n.collapsed)return n;if(Fn(a)){if(Ac(a)){if(1===t){if(r=o(a))return Uc(r);if(r=i(a))return Wc(r)}if(-1===t){if(r=i(a))return Wc(r);if(r=o(a))return Uc(r)}return n}if(ki(a)&&s>=a.data.length-1)return 1===t&&(r=o(a))?Uc(r):n;if(Ci(a)&&s<=1)return-1===t&&(r=i(a))?Wc(r):n;if(s===a.data.length)return(r=o(a))?Uc(r):n;if(0===s)return(r=i(a))?Wc(r):n}return n},Yc=function(t,e){return R.from(zc(t?0:-1,e)).filter(Mc)},Xc=function(t,e,n){var r=Hc(t,e,n);return-1===t?mu.fromRangeStart(r):mu.fromRangeEnd(r)},qc=function(t){return R.from(t.getNode()).map(Ie)},Zc=function(t,e){for(;e=t(e);)if(e.isVisible())return e;return e},Kc=function(t,e){var n=Fc(t,e);return!(n||!Vn(t.getNode()))||n};!function(t){t[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards"}(yu||(yu={}));var Jc,Qc,tl,el=Hn,nl=Fn,rl=Nn,il=Vn,ol=ji,al=function(t){return Di(t)||function(t){return!!Bi(t)&&!0!==q(st(t.getElementsByTagName("*")),(function(t,e){return t||Ti(e)}),!1)}(t)},sl=Fi,ul=function(t,e){return t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null},cl=function(t,e){if(Dc(t)){if(ol(e.previousSibling)&&!nl(e.previousSibling))return mu.before(e);if(nl(e))return mu(e,0)}if(Lc(t)){if(ol(e.nextSibling)&&!nl(e.nextSibling))return mu.after(e);if(nl(e))return mu(e,e.data.length)}return Lc(t)?il(e)?mu.before(e):mu.after(e):mu.before(e)},ll=function(t,e,n){var r,i,o,a;if(!rl(n)||!e)return null;if(e.isEqual(mu.after(n))&&n.lastChild){if(a=mu.after(n.lastChild),Lc(t)&&ol(n.lastChild)&&rl(n.lastChild))return il(n.lastChild)?mu.before(n.lastChild):a}else a=e;var s=a.container(),u=a.offset();if(nl(s)){if(Lc(t)&&u>0)return mu(s,--u);if(Dc(t)&&u<s.length)return mu(s,++u);r=s}else{if(Lc(t)&&u>0&&(i=ul(s,u-1),ol(i)))return!al(i)&&(o=jc(i,t,sl,i))?nl(o)?mu(o,o.data.length):mu.after(o):nl(i)?mu(i,i.data.length):mu.before(i);if(Dc(t)&&u<s.childNodes.length&&(i=ul(s,u),ol(i)))return il(i)?function(t,e){var n=e.nextSibling;return n&&ol(n)?nl(n)?mu(n,0):mu.before(n):ll(yu.Forwards,mu.after(e),t)}(n,i):!al(i)&&(o=jc(i,t,sl,i))?nl(o)?mu(o,0):mu.before(o):nl(i)?mu(i,0):mu.after(i);r=i||a.getNode()}if((Dc(t)&&a.isAtEnd()||Lc(t)&&a.isAtStart())&&(r=jc(r,t,I,n,!0),sl(r,n)))return cl(t,r);i=jc(r,t,sl,n);var c=Mt(Y(function(t,e){for(var n=[];t&&t!==e;)n.push(t),t=t.parentNode;return n}(s,n),el));return!c||i&&c.contains(i)?i?cl(t,i):null:a=Dc(t)?mu.after(c):mu.before(c)},fl=function(t){return{next:function(e){return ll(yu.Forwards,e,t)},prev:function(e){return ll(yu.Backwards,e,t)}}},dl=function(t){return mu.isTextPosition(t)?0===t.offset():ji(t.getNode())},hl=function(t){if(mu.isTextPosition(t)){var e=t.container();return t.offset()===e.data.length}return ji(t.getNode(!0))},pl=function(t,e){return!mu.isTextPosition(t)&&!mu.isTextPosition(e)&&t.getNode()===e.getNode(!0)},gl=function(t,e,n){var r=fl(e);return R.from(t?r.next(n):r.prev(n))},vl=function(t,e,n){return gl(t,e,n).bind((function(r){return Fc(n,r,e)&&function(t,e,n){return t?!pl(e,n)&&(r=e,!(!mu.isTextPosition(r)&&Vn(r.getNode())))&&hl(e)&&dl(n):!pl(n,e)&&dl(e)&&hl(n);var r}(t,n,r)?gl(t,e,r):R.some(r)}))},ml=function(t,e,n,r){return vl(t,e,n).bind((function(n){return r(n)?ml(t,e,n,r):R.some(n)}))},yl=function(t,e){var n,r=t?e.firstChild:e.lastChild;return Fn(r)?R.some(mu(r,t?0:r.data.length)):r?ji(r)?R.some(t?mu.before(r):Vn(n=r)?mu.before(n):mu.after(n)):function(t,e,n){var r=t?mu.before(n):mu.after(n);return gl(t,e,r)}(t,e,r):R.none()},bl=M(gl,!0),xl=M(gl,!1),wl=M(yl,!0),_l=M(yl,!1),El="_mce_caret",Sl=function(t){return Nn(t)&&t.id===El},Cl=function(t,e){for(;e&&e!==t;){if(e.id===El)return e;e=e.parentNode}return null},kl=function(t){return Me.isArray(t.start)},Ml=function(t,e){return Nn(e)&&t.isBlock(e)&&!e.innerHTML&&!_e.ie&&(e.innerHTML='<br data-mce-bogus="1" />'),e},Ol=function(t,e){return _l(t).fold(N,(function(t){return e.setStart(t.container(),t.offset()),e.setEnd(t.container(),t.offset()),!0}))},Tl=function(t,e,n){return!(!function(t){return!1===t.hasChildNodes()}(e)||!Cl(t,e)||(function(t,e){var n=t.ownerDocument.createTextNode(pi);t.appendChild(n),e.setStart(n,0),e.setEnd(n,0)}(e,n),0))},Al=function(t,e,n,r){var i,o,a,s,u=n[e?"start":"end"],c=t.getRoot();if(u){for(a=u[0],o=c,i=u.length-1;i>=1;i--){if(s=o.childNodes,Tl(c,o,r))return!0;if(u[i]>s.length-1)return!!Tl(c,o,r)||Ol(o,r);o=s[u[i]]}3===o.nodeType&&(a=Math.min(u[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(u[0],o.childNodes.length)),e?r.setStart(o,a):r.setEnd(o,a)}return!0},Nl=function(t){return Fn(t)&&t.data.length>0},Il=function(t,e,n){var r,i,o,a,s,u,c=t.get(n.id+"_"+e),l=n.keep;if(c){if(r=c.parentNode,"start"===e?(l?c.hasChildNodes()?(r=c.firstChild,i=1):Nl(c.nextSibling)?(r=c.nextSibling,i=0):Nl(c.previousSibling)?(r=c.previousSibling,i=c.previousSibling.data.length):(r=c.parentNode,i=t.nodeIndex(c)+1):i=t.nodeIndex(c),s=r,u=i):(l?c.hasChildNodes()?(r=c.firstChild,i=1):Nl(c.previousSibling)?(r=c.previousSibling,i=c.previousSibling.data.length):(r=c.parentNode,i=t.nodeIndex(c)):i=t.nodeIndex(c),s=r,u=i),!l){for(a=c.previousSibling,o=c.nextSibling,Me.each(Me.grep(c.childNodes),(function(t){Fn(t)&&(t.nodeValue=t.nodeValue.replace(/\uFEFF/g,""))}));c=t.get(n.id+"_"+e);)t.remove(c,!0);a&&o&&a.nodeType===o.nodeType&&Fn(a)&&!_e.opera&&(i=a.nodeValue.length,a.appendData(o.nodeValue),t.remove(o),s=a,u=i)}return R.some(mu(s,u))}return R.none()},Pl=function(t,e,n){return function(t,e,n){return 2===e?Ru(vi,n,t):3===e?function(t){var e=t.getRng();return{start:Ou(t.dom.getRoot(),mu.fromRangeStart(e)),end:Ou(t.dom.getRoot(),mu.fromRangeEnd(e))}}(t):e?function(t){return{rng:t.getRng()}}(t):Bu(t,!1)}(t,e,n)},Dl=function(t,e){(function(t,e){var n=t.dom;if(e){if(kl(e))return function(t,e){var n=t.createRng();return Al(t,!0,e,n)&&Al(t,!1,e,n)?R.some(n):R.none()}(n,e);if(function(t){return f(t.start)}(e))return R.some(function(t,e){var n,r=t.createRng();return n=Tu(t.getRoot(),e.start),r.setStart(n.container(),n.offset()),n=Tu(t.getRoot(),e.end),r.setEnd(n.container(),n.offset()),r}(n,e));if(function(t){return yt(t,"id")}(e))return function(t,e){var n=Il(t,"start",e),r=Il(t,"end",e);return Zn(n,r.or(n),(function(e,n){var r=t.createRng();return r.setStart(Ml(t,e.container()),e.offset()),r.setEnd(Ml(t,n.container()),n.offset()),r}))}(n,e);if(function(t){return yt(t,"name")}(e))return function(t,e){return R.from(t.select(e.name)[e.index]).map((function(e){var n=t.createRng();return n.selectNode(e),n}))}(n,e);if(function(t){return yt(t,"rng")}(e))return R.some(e.rng)}return R.none()})(t,e).each((function(e){t.setRng(e)}))},Ll=function(t){return Nn(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type")},Rl=(Jc=hi,function(t){return Jc===t}),jl=function(t){return""!==t&&-1!==" \f\n\r\t\v".indexOf(t)},Bl=function(t){return!jl(t)&&!Rl(t)},Fl=function(t){return!!t.nodeType},zl=function(t,e,n){var r=n.startOffset,i=n.startContainer;if((i!==n.endContainer||!function(t){return t&&/^(IMG)$/.test(t.nodeName)}(i.childNodes[r]))&&Nn(i)){var o=i.childNodes,a=void 0;r<o.length?(i=o[r],a=new ei(i,t.getParent(i,t.isBlock))):(i=o[o.length-1],(a=new ei(i,t.getParent(i,t.isBlock))).next(!0));for(var s=a.current();s;s=a.next())if(Fn(s)&&!Ul(s))return n.setStart(s,0),void e.setRng(n)}},$l=function(t,e,n){if(t){var r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(Nn(t)||!Ul(t))return t}},Gl=function(t,e){return Fl(e)&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]},Vl=function(t,e,n){return t.schema.isValidChild(e,n)},Ul=function(t,e){if(void 0===e&&(e=!1),y(t)&&Fn(t)){var n=e?t.data.replace(/ /g,""):t.data;return $i(n)}return!1},Wl=function(t,e){return b(t)?t=t(e):y(e)&&(t=t.replace(/%(\w+)/g,(function(t,n){return e[n]||t}))),t},Hl=function(t,e){return e=e||"",t=""+((t=t||"").nodeName||t),e=""+(e.nodeName||e),t.toLowerCase()===e.toLowerCase()},Yl=function(t,e,n){return"color"!==n&&"backgroundColor"!==n||(e=t.toHex(e)),"fontWeight"===n&&700===e&&(e="bold"),"fontFamily"===n&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e},Xl=function(t,e,n){return Yl(t,t.getStyle(e,n),n)},ql=function(t,e){var n;return t.getParent(e,(function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n})),n},Zl=function(t,e,n){return t.getParents(e,n,t.getRoot())},Kl=function(t){return bt(t,"block")},Jl=function(t){return bt(t,"selector")},Ql=function(t){return bt(t,"inline")},tf=function(t){return Jl(t)&&!1!==t.expand&&!Ql(t)},ef=Ll,nf=Zl,rf=Ul,of=Gl,af=function(t,e){for(var n=e;n;){if(Nn(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},sf=function(t,e,n,r){for(var i=e.data,o=n;t?o>=0:o<i.length;t?o--:o++)if(r(i.charAt(o)))return t?o+1:o;return-1},uf=function(t,e,n){return sf(t,e,n,(function(t){return Rl(t)||jl(t)}))},cf=function(t,e,n){return sf(t,e,n,Bl)},lf=function(t,e,n,r,i,o){var a,s=t.getParent(n,t.isBlock)||e,u=function(e,n,r){var o=Gs(t),u=i?o.backwards:o.forwards;return R.from(u(e,n,(function(t,e){return ef(t.parentNode)?-1:(a=t,r(i,t,e))}),s))};return u(n,r,uf).bind((function(t){return o?u(t.container,t.offset+(i?-1:0),cf):R.some(t)})).orThunk((function(){return a?R.some({container:a,offset:i?0:a.length}):R.none()}))},ff=function(t,e,n,r,i){Fn(r)&&Gt(r.data)&&r[i]&&(r=r[i]);for(var o=nf(t,r),a=0;a<o.length;a++)for(var s=0;s<e.length;s++){var u=e[s];if((!y(u.collapsed)||u.collapsed===n.collapsed)&&Jl(u)&&t.is(o[a],u.selector))return o[a]}return r},df=function(t,e,n,r){var i=n,o=t.dom,a=o.getRoot(),s=e[0];if(Kl(s)&&(i=s.wrapper?null:o.getParent(n,s.block,a)),!i){var u=o.getParent(n,"LI,TD,TH");i=o.getParent(Fn(n)?n.parentNode:n,(function(e){return e!==a&&of(t,e)}),u)}if(i&&Kl(s)&&s.wrapper&&(i=nf(o,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i[r]&&!o.isBlock(i[r])&&(i=i[r],!Hl(i,"br")););return i||n},hf=function(t,e,n,r){var i=n.parentNode;return!y(n[r])&&(!(i!==e&&!m(i)&&!t.isBlock(i))||hf(t,e,i,r))},pf=function(t,e,n,r,i){var o,a=n,s=i?"previousSibling":"nextSibling",u=t.getRoot();if(Fn(n)&&!rf(n)&&(i?r>0:r<n.data.length))return n;for(;;){if(!e[0].block_expand&&t.isBlock(a))return a;for(var c=a[s];c;c=c[s]){var l=Fn(c)&&!hf(t,u,c,s);if(!ef(c)&&(!Vn(o=c)||!o.getAttribute("data-mce-bogus")||o.nextSibling)&&!rf(c,l))return a}if(a===u||a.parentNode===u){n=a;break}a=a.parentNode}return n},gf=function(t){return ef(t.parentNode)||ef(t)},vf=function(t,e,n,r){void 0===r&&(r=!1);var i=e.startContainer,o=e.startOffset,a=e.endContainer,s=e.endOffset,u=t.dom,c=n[0];return Nn(i)&&i.hasChildNodes()&&(i=Ks(i,o),Fn(i)&&(o=0)),Nn(a)&&a.hasChildNodes()&&(a=Ks(a,e.collapsed?s:s-1),Fn(a)&&(s=a.nodeValue.length)),i=af(u,i),a=af(u,a),gf(i)&&(i=ef(i)?i:i.parentNode,i=e.collapsed?i.previousSibling||i:i.nextSibling||i,Fn(i)&&(o=e.collapsed?i.length:0)),gf(a)&&(a=ef(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,Fn(a)&&(s=e.collapsed?0:a.length)),e.collapsed&&(lf(u,t.getBody(),i,o,!0,r).each((function(t){var e=t.container,n=t.offset;i=e,o=n})),lf(u,t.getBody(),a,s,!1,r).each((function(t){var e=t.container,n=t.offset;a=e,s=n}))),(Ql(c)||c.block_expand)&&(Ql(c)&&Fn(i)&&0!==o||(i=pf(u,n,i,o,!0)),Ql(c)&&Fn(a)&&s!==a.nodeValue.length||(a=pf(u,n,a,s,!1))),tf(c)&&(i=ff(u,n,e,i,"previousSibling"),a=ff(u,n,e,a,"nextSibling")),(Kl(c)||Jl(c))&&(i=df(t,n,i,"previousSibling"),a=df(t,n,a,"nextSibling"),Kl(c)&&(u.isBlock(i)||(i=pf(u,n,i,o,!0)),u.isBlock(a)||(a=pf(u,n,a,s,!1)))),Nn(i)&&(o=u.nodeIndex(i),i=i.parentNode),Nn(a)&&(s=u.nodeIndex(a)+1,a=a.parentNode),{startContainer:i,startOffset:o,endContainer:a,endOffset:s}},mf=function(t,e,n){var r=e.startOffset,i=Ks(e.startContainer,r),o=e.endOffset,a=Ks(e.endContainer,o-1),s=function(t){var e=t[0];Fn(e)&&e===i&&r>=e.data.length&&t.splice(0,1);var n=t[t.length-1];return 0===o&&t.length>0&&n===a&&Fn(n)&&t.splice(t.length-1,1),t},u=function(t,e,n){for(var r=[];t&&t!==n;t=t[e])r.push(t);return r},c=function(e,n){return t.getParent(e,(function(t){return t.parentNode===n}),n)},l=function(t,e,r){for(var i=r?"nextSibling":"previousSibling",o=t,a=o.parentNode;o&&o!==e;o=a){a=o.parentNode;var c=u(o===t?o:o[i],i);c.length&&(r||c.reverse(),n(s(c)))}};if(i===a)return n(s([i]));var f=t.findCommonAncestor(i,a);if(t.isChildOf(i,a))return l(i,f,!0);if(t.isChildOf(a,i))return l(a,f);var d=c(i,f)||i,h=c(a,f)||a;l(i,d,!0);var p=u(d===i?d:d.nextSibling,"nextSibling",h===a?h.nextSibling:h);p.length&&n(s(p)),l(a,h)},yf=function(t){var e=[];if(t)for(var n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},bf=function(t,e){var n=Ts(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:function(t){return Y(function(t){return Q(t,(function(t){var e=Zs(t);return e?[Ie(e)]:[]}))}(t),fi)}(t)},xf=function(t){return bf(yf(t.selection.getSel()),Ie(t.getBody()))},wf=function(t,e){return Wr(t,"table",e)},_f=function(t){return en(t).fold(S([t]),(function(e){return[t].concat(_f(e))}))},Ef=function(t){return nn(t).fold(S([t]),(function(e){return"br"===Be(e)?qe(e).map((function(e){return[t].concat(Ef(e))})).getOr([]):[t].concat(Ef(e))}))},Sf=function(t,e){return Zn(function(t){var e=t.startContainer,n=t.startOffset;return Fn(e)?0===n?R.some(Ie(e)):R.none():R.from(e.childNodes[n]).map(Ie)}(e),function(t){var e=t.endContainer,n=t.endOffset;return Fn(e)?n===e.data.length?R.some(Ie(e)):R.none():R.from(e.childNodes[n-1]).map(Ie)}(e),(function(e,n){var r=K(_f(t),M(Re,e)),i=K(Ef(t),M(Re,n));return r.isSome()&&i.isSome()})).getOr(!1)},Cf=function(t,e,n,r){var i=n,o=new ei(n,i),a=vt(t.schema.getMoveCaretBeforeOnEnterElements(),(function(t,e){return!$(["td","th","table"],e.toLowerCase())}));do{if(Fn(n)&&0!==Me.trim(n.nodeValue).length)return void(r?e.setStart(n,0):e.setEnd(n,n.nodeValue.length));if(a[n.nodeName])return void(r?e.setStartBefore(n):"BR"===n.nodeName?e.setEndBefore(n):e.setEndAfter(n))}while(n=r?o.next():o.prev());"BODY"===i.nodeName&&(r?e.setStart(i,0):e.setEnd(i,i.childNodes.length))},kf=function(t){var e=t.selection.getSel();return e&&e.rangeCount>0},Mf=function(t,e){var n=xf(t);n.length>0?U(n,(function(n){var r=n.dom,i=t.dom.createRng();i.setStartBefore(r),i.setEndAfter(r),e(i,!0)})):e(t.selection.getRng(),!1)},Of=function(t,e,n){var r=Bu(t,e);n(r),t.moveToBookmark(r)},Tf=(Qc=Ge,{get:function(t){if(!Qc(t))throw new Error("Can only get text value of a text node");return tl(t).getOr("")},getOption:tl=function(t){return Qc(t)?R.from(t.dom.nodeValue):R.none()},set:function(t,e){if(!Qc(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=e}}),Af=function(t){return Tf.get(t)},Nf=function(t,e,n,r){var i=e.uid,o=void 0===i?Rs("mce-annotation"):i,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["uid"]),s=Ae("span",t);ks(s,As()),Qn(s,""+Is(),o),Qn(s,""+Ns(),n);var u=r(o,a),c=u.attributes,l=void 0===c?{}:c,f=u.classes,d=void 0===f?[]:f;return tr(s,l),function(t,e){U(e,(function(e){ks(t,e)}))}(s,d),s},If=function(t,e,n,r,i){var o=[],a=Nf(t.getDoc(),i,n,r),s=ws(),u=function(){s.clear()},c=function(t){U(t,l)},l=function(e){switch(function(t,e,n,r){return Xe(e).fold((function(){return"skipping"}),(function(i){return"br"===r||function(t){return Ge(t)&&Af(t)===pi}(e)?"valid":function(t){return $e(t)&&Ms(t,As())}(e)?"existing":Sl(e.dom)?"caret":Vl(t,n,r)&&Vl(t,Be(i),n)?"valid":"invalid-child"}))}(t,e,"span",Be(e))){case"invalid-child":u();var n=Qe(e);c(n),u();break;case"valid":!function(t,e){fn(t,e),pn(e,t)}(e,s.get().getOrThunk((function(){var t=Fs(a);return o.push(t),s.set(t),t})))}};return mf(t.dom,e,(function(t){u(),function(t){var e=V(t,Ie);c(e)}(t)})),o},Pf=function(t){var e,n=(e={},{register:function(t,n){e[t]={name:t,settings:n}},lookup:function(t){return mt(e,t).map((function(t){return t.settings}))}});!function(t,e){t.on("init",(function(){t.serializer.addNodeFilter("span",(function(t){U(t,(function(t){(function(t){return R.from(t.attr(Ns())).bind(e.lookup)})(t).each((function(e){!1===e.persistent&&t.unwrap()}))}))}))}))}(t,n);var r=function(t,e){var n=gs({}),r=function(){return{listeners:[],previous:ws()}},i=function(t,e){o(t,(function(t){return e(t),t}))},o=function(t,e){var i=n.get(),o=e(mt(i,t).getOrThunk(r));i[t]=o,n.set(i)},a=Es((function(){var e=n.get(),r=rt(ct(e));U(r,(function(e){o(e,(function(n){var r=n.previous.get();return Ps(t,R.some(e)).fold((function(){r.isSome()&&(function(t){i(t,(function(e){U(e.listeners,(function(e){return e(!1,t)}))}))}(e),n.previous.clear())}),(function(t){var e=t.uid,o=t.name,a=t.elements;qn(r,e)||(function(t,e,n){i(t,(function(r){U(r.listeners,(function(r){return r(!0,t,{uid:e,nodes:V(n,(function(t){return t.dom}))})}))}))}(o,e,a),n.previous.set(e))})),{previous:n.previous,listeners:n.listeners}}))}))}),30);return t.on("remove",(function(){a.cancel()})),t.on("NodeChange",(function(){a.throttle()})),{addListener:function(t,e){o(t,(function(t){return{previous:t.previous,listeners:t.listeners.concat([e])}}))}}}(t);return{register:function(t,e){n.register(t,e)},annotate:function(e,r){n.lookup(e).each((function(n){!function(t,e,n,r){t.undoManager.transact((function(){var i=t.selection,o=i.getRng(),a=xf(t).length>0;if(o.collapsed&&!a&&function(t,e){var n=vf(t,e,[{inline:"span"}]);e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),t.selection.setRng(e)}(t,o),i.getRng().collapsed&&!a){var s=Nf(t.getDoc(),r,e,n.decorate);js(s,hi),i.getRng().insertNode(s.dom),i.select(s.dom)}else Of(i,!1,(function(){Mf(t,(function(i){If(t,i,e,n.decorate,r)}))}))}))}(t,e,n,r)}))},annotationChanged:function(t,e){r.addListener(t,e)},remove:function(e){Ps(t,R.some(e)).each((function(t){var e=t.elements;U(e,yn)}))},getAll:function(e){var n=function(t,e){var n=Ie(t.getBody()),r=Ts(n,"["+Ns()+'="'+e+'"]'),i={};return U(r,(function(t){var e=er(t,Is()),n=mt(i,e).getOr([]);i[e]=n.concat([t])})),i}(t,e);return dt(n,(function(t){return V(t,(function(t){return t.dom}))}))}}},Df=function(t){return{getBookmark:M(Pl,t),moveToBookmark:M(Dl,t)}};Df.isBookmarkNode=Ll;var Lf=function(t,e){for(;e&&e!==t;){if(Wn(e)||Hn(e))return e;e=e.parentNode}return null},Rf=function(t,e,n){if(n.collapsed)return!1;if(_e.browser.isIE()&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var r=n.startContainer.childNodes[n.startOffset];if(Nn(r))return G(r.getClientRects(),(function(n){return qs(n,t,e)}))}return G(n.getClientRects(),(function(n){return qs(n,t,e)}))},jf=function(t,e,n){return t.fire(e,n)},Bf=function(t,e,n,r){return t.fire("FormatApply",{format:e,node:n,vars:r})},Ff=function(t,e,n,r){return t.fire("FormatRemove",{format:e,node:n,vars:r})},zf={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(t){return t.shiftKey||t.ctrlKey||t.altKey||zf.metaKeyPressed(t)},metaKeyPressed:function(t){return _e.mac?t.metaKey:t.ctrlKey&&!t.altKey}},$f=Hn,Gf=function(t,e){var n,r,i,o,a,s,u,c,l,f,d,h,p,g,v,m="data-mce-selected",b=e.dom,x=Me.each,w=e.getDoc(),_=document,E=Math.abs,S=Math.round,C=e.getBody(),k={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},M=function(t){return t&&("IMG"===t.nodeName||e.dom.is(t,"figure.image"))},O=function(t){return Xn(t)||b.hasClass(t,"mce-preview-object")},T=function(t){var n=t.target;(function(t,e){if("longpress"===t.type||0===t.type.indexOf("touch")){var n=t.touches[0];return M(t.target)&&!Rf(n.clientX,n.clientY,e)}return M(t.target)&&!Rf(t.clientX,t.clientY,e)})(t,e.selection.getRng())&&!t.isDefaultPrevented()&&e.selection.select(n)},A=function(t){return b.is(t,"figure.image")?[t.querySelector("img")]:b.hasClass(t,"mce-preview-object")&&y(t.firstElementChild)?[t,t.firstElementChild]:[t]},N=function(t){var n=rc(e);return!!n&&"false"!==t.getAttribute("data-mce-resize")&&t!==e.getBody()&&(b.hasClass(t,"mce-preview-object")?De(Ie(t.firstElementChild),n):De(Ie(t),n))},I=function(t,n,r){if(y(r)){var i=A(t);U(i,(function(t){t.style[n]||!e.schema.isValid(t.nodeName.toLowerCase(),n)?b.setStyle(t,n,r):b.setAttrib(t,n,""+r)}))}},P=function(t,e,n){I(t,"width",e),I(t,"height",n)},D=function(t){var a,m,y,x,w;a=t.screenX-s,m=t.screenY-u,h=a*o[2]+c,p=m*o[3]+l,h=h<5?5:h,p=p<5?5:p,y=(M(n)||O(n))&&!1!==function(t){return t.getParam("resize_img_proportional",!0,"boolean")}(e)?!zf.modifierPressed(t):zf.modifierPressed(t),y&&(E(a)>E(m)?(p=S(h*f),h=S(p/f)):(h=S(p/f),p=S(h*f))),P(r,h,p),x=(x=o.startPos.x+a)>0?x:0,w=(w=o.startPos.y+m)>0?w:0,b.setStyles(i,{left:x,top:w,display:"block"}),i.innerHTML=h+" &times; "+p,o[2]<0&&r.clientWidth<=h&&b.setStyle(r,"left",void 0+(c-h)),o[3]<0&&r.clientHeight<=p&&b.setStyle(r,"top",void 0+(l-p)),(a=C.scrollWidth-g)+(m=C.scrollHeight-v)!=0&&b.setStyles(i,{left:x-a,top:w-m}),d||(function(t,e,n,r,i){t.fire("ObjectResizeStart",{target:e,width:n,height:r,origin:i})}(e,n,c,l,"corner-"+o.name),d=!0)},L=function(){var t=d;d=!1,t&&(I(n,"width",h),I(n,"height",p)),b.unbind(w,"mousemove",D),b.unbind(w,"mouseup",L),_!==w&&(b.unbind(_,"mousemove",D),b.unbind(_,"mouseup",L)),b.remove(r),b.remove(i),b.remove(a),R(n),t&&(function(t,e,n,r,i){t.fire("ObjectResized",{target:e,width:n,height:r,origin:i})}(e,n,h,p,"corner-"+o.name),b.setAttrib(n,"style",b.getAttrib(n,"style"))),e.nodeChanged()},R=function(t){z();var d=b.getPos(t,C),y=d.x,E=d.y,S=t.getBoundingClientRect(),M=S.width||S.right-S.left,T=S.height||S.bottom-S.top;n!==t&&(j(),n=t,h=p=0);var I=e.fire("ObjectSelected",{target:t}),R=b.getAttrib(n,m,"1");N(t)&&!I.isDefaultPrevented()?x(k,(function(t,e){var d;(d=b.get("mceResizeHandle"+e))&&b.remove(d),d=b.add(C,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),11===_e.ie&&(d.contentEditable=!1),b.bind(d,"mousedown",(function(d){d.stopImmediatePropagation(),d.preventDefault(),function(d){var h,p=A(n)[0];s=d.screenX,u=d.screenY,c=p.clientWidth,l=p.clientHeight,f=l/c,(o=t).name=e,o.startPos={x:M*t[0]+y,y:T*t[1]+E},g=C.scrollWidth,v=C.scrollHeight,a=b.add(C,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),b.setStyles(a,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),r=O(h=n)?b.create("img",{src:_e.transparentSrc}):h.cloneNode(!0),b.addClass(r,"mce-clonedresizable"),b.setAttrib(r,"data-mce-bogus","all"),r.contentEditable="false",b.setStyles(r,{left:y,top:E,margin:0}),P(r,M,T),r.removeAttribute(m),C.appendChild(r),b.bind(w,"mousemove",D),b.bind(w,"mouseup",L),_!==w&&(b.bind(_,"mousemove",D),b.bind(_,"mouseup",L)),i=b.add(C,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},c+" &times; "+l)}(d)})),t.elm=d,b.setStyles(d,{left:M*t[0]+y-d.offsetWidth/2,top:T*t[1]+E-d.offsetHeight/2})})):j(),b.getAttrib(n,m)||n.setAttribute(m,R)},j=function(){z(),n&&n.removeAttribute(m),ft(k,(function(t,e){var n=b.get("mceResizeHandle"+e);n&&(b.unbind(n),b.remove(n))}))},B=function(n){var r,i=function(t,e){if(t)do{if(t===e)return!0}while(t=t.parentNode)};d||e.removed||(x(b.select("img[data-mce-selected],hr[data-mce-selected]"),(function(t){t.removeAttribute(m)})),r="mousedown"===n.type?n.target:t.getNode(),i(r=b.$(r).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],C)&&($(),i(t.getStart(!0),r)&&i(t.getEnd(!0),r))?R(r):j())},F=function(t){return $f(Lf(e.getBody(),t))},z=function(){ft(k,(function(t){t.elm&&(b.unbind(t.elm),delete t.elm)}))},$=function(){try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(t){}};return e.on("init",(function(){if($(),_e.browser.isIE()||_e.browser.isEdge()){e.on("mousedown click",(function(t){var n=t.target,r=n.nodeName;d||!/^(TABLE|IMG|HR)$/.test(r)||F(n)||(2!==t.button&&e.selection.select(n,"TABLE"===r),"mousedown"===t.type&&e.nodeChanged())}));var t=function(t){var n=function(t){Jr.setEditorTimeout(e,(function(){return e.selection.select(t)}))};if(F(t.target)||Xn(t.target))return t.preventDefault(),void n(t.target);/^(TABLE|IMG|HR)$/.test(t.target.nodeName)&&(t.preventDefault(),"IMG"===t.target.tagName&&n(t.target))};b.bind(C,"mscontrolselect",t),e.on("remove",(function(){return b.unbind(C,"mscontrolselect",t)}))}var r=Jr.throttle((function(t){e.composing||B(t)}));e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",r),e.on("keyup compositionend",(function(t){n&&"TABLE"===n.nodeName&&r(t)})),e.on("hide blur",j),e.on("contextmenu longpress",T,!0)})),e.on("remove",z),{isResizable:N,showResizeRect:R,hideResizeRect:j,updateResizeRect:B,destroy:function(){n=r=a=null}}},Vf=function(t){return Wn(t)||Hn(t)},Uf=function(t,e,n){var r,i,o=n;if(o.caretPositionFromPoint)(i=o.caretPositionFromPoint(t,e))&&((r=n.createRange()).setStart(i.offsetNode,i.offset),r.collapse(!0));else if(o.caretRangeFromPoint)r=o.caretRangeFromPoint(t,e);else if(o.body.createTextRange){r=o.body.createTextRange();try{r.moveToPoint(t,e),r.collapse(!0)}catch(i){r=function(t,e,n){var r,i=n.elementFromPoint(t,e),o=n.body.createTextRange();if(i&&"HTML"!==i.tagName||(i=n.body),o.moveToElementText(i),(r=(r=Me.toArray(o.getClientRects())).sort((function(t,n){return(t=Math.abs(Math.max(t.top-e,t.bottom-e)))-Math.abs(Math.max(n.top-e,n.bottom-e))}))).length>0){e=(r[0].bottom+r[0].top)/2;try{return o.moveToPoint(t,e),o.collapse(!0),o}catch(t){}}return null}(t,e,n)}return function(t,e){var n=t&&t.parentElement?t.parentElement():null;return Hn(function(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null}(n,e,Vf))?null:t}(r,n.body)}return r},Wf=function(t,e){return t&&e&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},Hf=function(t,e,n){return null!==function(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null}(t,e,n)},Yf=function(t,e,n){return Hf(t,e,(function(t){return t.nodeName===n}))},Xf=function(t){return t&&"TABLE"===t.nodeName},qf=function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)},Zf=function(t,e){return wi(t)&&!1===Hf(t,e,Sl)},Kf=function(t,e,n){for(var r=new ei(e,t.getParent(e.parentNode,t.isBlock)||t.getRoot());e=r[n?"prev":"next"]();)if(Vn(e))return!0},Jf=function(t,e,n,r,i){var o,a,s=t.getRoot(),u=t.schema.getNonEmptyElements(),c=t.getParent(i.parentNode,t.isBlock)||s;if(r&&Vn(i)&&e&&t.isEmpty(c))return R.some(mu(i.parentNode,t.nodeIndex(i)));for(var l=new ei(i,c);a=l[r?"prev":"next"]();){if("false"===t.getContentEditableParent(a)||Zf(a,s))return R.none();if(Fn(a)&&a.nodeValue.length>0)return!1===Yf(a,s,"A")?R.some(mu(a,r?a.nodeValue.length:0)):R.none();if(t.isBlock(a)||u[a.nodeName.toLowerCase()])return R.none();o=a}return n&&o?R.some(mu(o,0)):R.none()},Qf=function(t,e,n,r){var i,o,a,s,u=t.getRoot(),c=!1;i=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"];var l=Nn(i)&&o===i.childNodes.length,f=t.schema.getNonEmptyElements();if(s=n,wi(i))return R.none();if(Nn(i)&&o>i.childNodes.length-1&&(s=!1),$n(i)&&(i=u,o=0),i===u){if(s&&(a=i.childNodes[o>0?o-1:0])){if(wi(a))return R.none();if(f[a.nodeName]||Xf(a))return R.none()}if(i.hasChildNodes()){if(o=Math.min(!s&&o>0?o-1:o,i.childNodes.length-1),i=i.childNodes[o],o=Fn(i)&&l?i.data.length:0,!e&&i===u.lastChild&&Xf(i))return R.none();if(function(t,e){for(;e&&e!==t;){if(Hn(e))return!0;e=e.parentNode}return!1}(u,i)||wi(i))return R.none();if(i.hasChildNodes()&&!1===Xf(i)){a=i;var d=new ei(i,u);do{if(Hn(a)||wi(a)){c=!1;break}if(Fn(a)&&a.nodeValue.length>0){o=s?0:a.nodeValue.length,i=a,c=!0;break}if(f[a.nodeName.toLowerCase()]&&!qf(a)){o=t.nodeIndex(a),i=a.parentNode,s||o++,c=!0;break}}while(a=s?d.next():d.prev())}}}return e&&(Fn(i)&&0===o&&Jf(t,l,e,!0,i).each((function(t){i=t.container(),o=t.offset(),c=!0})),Nn(i)&&((a=i.childNodes[o])||(a=i.childNodes[o-1]),!a||!Vn(a)||function(t,e){return t.previousSibling&&"A"===t.previousSibling.nodeName}(a)||Kf(t,a,!1)||Kf(t,a,!0)||Jf(t,l,e,!0,a).each((function(t){i=t.container(),o=t.offset(),c=!0})))),s&&!e&&Fn(i)&&o===i.nodeValue.length&&Jf(t,l,e,!1,i).each((function(t){i=t.container(),o=t.offset(),c=!0})),c?R.some(mu(i,o)):R.none()},td=function(t,e){var n=e.collapsed,r=e.cloneRange(),i=mu.fromRangeStart(e);return Qf(t,n,!0,r).each((function(t){n&&mu.isAbove(i,t)||r.setStart(t.container(),t.offset())})),n||Qf(t,n,!1,r).each((function(t){r.setEnd(t.container(),t.offset())})),n&&r.collapse(!0),Wf(e,r)?R.none():R.some(r)},ed=function(t,e){return t.splitText(e)},nd=function(t){var e=t.startContainer,n=t.startOffset,r=t.endContainer,i=t.endOffset;return e===r&&Fn(e)?n>0&&n<e.nodeValue.length&&(e=(r=ed(e,n)).previousSibling,i>n?(e=r=ed(r,i-=n).previousSibling,i=r.nodeValue.length,n=0):i=0):(Fn(e)&&n>0&&n<e.nodeValue.length&&(e=ed(e,n),n=0),Fn(r)&&i>0&&i<r.nodeValue.length&&(i=(r=ed(r,i).previousSibling).nodeValue.length)),{startContainer:e,startOffset:n,endContainer:r,endOffset:i}},rd=function(t){return{walk:function(e,n){return mf(t,e,n)},split:nd,normalize:function(e){return td(t,e).fold(N,(function(t){return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),!0}))}}};rd.compareRanges=Wf,rd.getCaretRangeFromPoint=Uf,rd.getSelectedNode=Zs,rd.getNode=Ks;var id,od=function(t,e){var n=function(e){var n=function(t){var e=t.dom;return bn(t)?e.getBoundingClientRect().height:e.offsetHeight}(e);if(n<=0||null===n){var r=ir(e,t);return parseFloat(r)||0}return n},r=function(t,e){return q(e,(function(e,n){var r=ir(t,n),i=void 0===r?0:parseInt(r,10);return isNaN(i)?e:e+i}),0)};return{set:function(e,n){if(!x(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom;Kn(r)&&(r.style[t]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(t,e,n){var i=r(t,n);return e>i?e-i:0}}}("height"),ad=function(t,e){return t.view(e).fold(S([]),(function(e){var n=t.owner(e),r=ad(t,n);return[e].concat(r)}))},sd=Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?R.none():R.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(Ie)},owner:function(t){return He(t)}}),ud=function(t){return"textarea"===Be(t)},cd=function(t,e){var n=function(t){var e=t.dom.ownerDocument,n=e.body,r=e.defaultView,i=e.documentElement;if(n===t.dom)return wn(n.offsetLeft,n.offsetTop);var o=_n(null==r?void 0:r.pageYOffset,i.scrollTop),a=_n(null==r?void 0:r.pageXOffset,i.scrollLeft),s=_n(i.clientTop,n.clientTop),u=_n(i.clientLeft,n.clientLeft);return En(t).translate(a-u,o-s)}(t),r=function(t){return od.get(t)}(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},ld=function(t,e,n,r){pd(t,(function(i,o){return dd(t,e,n,r)}),n)},fd=function(t,e,n,r,i){var o={elm:r.element.dom,alignToTop:i};(function(t,e){return t.fire("ScrollIntoView",e).isDefaultPrevented()})(t,o)||(n(e,Sn(e).top,r,i),function(t,e){t.fire("AfterScrollIntoView",e)}(t,o))},dd=function(t,e,n,r){var i=Ie(t.getBody()),o=Ie(t.getDoc());i.dom.offsetWidth;var a,s,u,c,l=(a=Ie(n.startContainer),s=n.startOffset,u=function(t,e){var n=Qe(t);if(0===n.length||ud(t))return{element:t,offset:e};if(e<n.length&&!ud(n[e]))return{element:n[e],offset:0};var r=n[n.length-1];return ud(r)?{element:t,offset:e}:"img"===Be(r)?{element:r,offset:1}:Ge(r)?{element:r,offset:Af(r).length}:{element:r,offset:Qe(r).length}}(a,s),c=Te('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>'),fn(u.element,c),cd(c,(function(){return mn(c)})));fd(t,o,e,l,r),l.cleanup()},hd=function(t,e,n,r){var i=Ie(t.getDoc());fd(t,i,n,function(t){return cd(Ie(t),w)}(e),r)},pd=function(t,e,n){var r=n.startContainer,i=n.startOffset,o=n.endContainer,a=n.endOffset;e(Ie(r),Ie(o));var s=t.dom.createRng();s.setStart(r,i),s.setEnd(o,a),t.selection.setRng(n)},gd=function(t,e,n,r){var i=t.pos;if(n)Cn(i.left,i.top,r);else{var o=i.top-e+t.height;Cn(i.left,o,r)}},vd=function(t,e,n,r,i){var o=n+e,a=r.pos.top,s=r.bottom,u=s-a>=n;a<e?gd(r,n,!1!==i,t):a>o?gd(r,n,u?!1!==i:!0===i,t):s>o&&!u&&gd(r,n,!0===i,t)},md=function(t,e,n,r){var i=t.dom.defaultView.innerHeight;vd(t,e,i,n,r)},yd=function(t,e,n,r){var i=t.dom.defaultView.innerHeight;vd(t,e,i,n,r);var o=function(t){var e=Ie(document),n=Sn(e),r=function(t,e){var n=e.owner(t);return ad(e,n)}(t,sd),i=En(t),o=X(r,(function(t,e){var n=En(e);return{left:t.left+n.left,top:t.top+n.top}}),{left:0,top:0});return wn(o.left+i.left+n.left,o.top+i.top+n.top)}(n.element),a=On(window);o.top<a.y?kn(n.element,!1!==r):o.top>a.bottom&&kn(n.element,!0===r)},bd=function(t,e,n){return ld(t,md,e,n)},xd=function(t,e,n){return hd(t,e,md,n)},wd=function(t,e,n){return ld(t,yd,e,n)},_d=function(t,e,n){return hd(t,e,yd,n)},Ed=function(t,e,n){(t.inline?bd:wd)(t,e,n)},Sd=function(t){var e=un(t).dom;return t.dom===e.activeElement},Cd=function(t){return void 0===t&&(t=Ie(document)),R.from(t.dom.activeElement).map(Ie)},kd=_r([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Md=(kd.before,kd.on,kd.after,_r([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}])),Od=(Md.domRange,Md.relative,Md.exact,function(t,e,n,r){return{start:t,soffset:e,finish:n,foffset:r}}),Td=he().browser,Ad=function(t,e){var n=Ge(e)?Af(e).length:Qe(e).length+1;return t>n?n:t<0?0:t},Nd=function(t){return Od(t.start,Ad(t.soffset,t.start),t.finish,Ad(t.foffset,t.finish))},Id=function(t,e){return!An(e.dom)&&(je(t,e)||Re(t,e))},Pd=function(t){return function(e){return Id(t,e.start)&&Id(t,e.finish)}},Dd=function(t){return!0===t.inline||Td.isIE()},Ld=function(t){return Od(Ie(t.startContainer),t.startOffset,Ie(t.endContainer),t.endOffset)},Rd=function(t){var e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),R.some(e)}catch(t){return R.none()}},jd=function(t){var e,n,r,i=Dd(t)?(e=Ie(t.getBody()),(n=Ye(e).dom,r=n.getSelection(),(r&&0!==r.rangeCount?R.from(r.getRangeAt(0)):R.none()).map(Ld)).filter(Pd(e))):R.none();t.bookmark=i.isSome()?i:t.bookmark},Bd=function(t){return(t.bookmark?t.bookmark:R.none()).bind((function(e){return n=Ie(t.getBody()),r=e,R.from(r).filter(Pd(n)).map(Nd);var n,r})).bind(Rd)},Fd={isEditorUIElement:function(t){var e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},zd=function(t){var e=_s((function(){jd(t)}),0);t.on("init",(function(){t.inline&&function(t,e){var n=function(){e.throttle()};ls.DOM.bind(document,"mouseup",n),t.on("remove",(function(){ls.DOM.unbind(document,"mouseup",n)}))}(t,e),function(t,e){he().browser.isIE()?function(t){t.on("focusout",(function(){jd(t)}))}(t):function(t,e){t.on("mouseup touchend",(function(t){e.throttle()}))}(t,e),t.on("keyup NodeChange",(function(e){(function(t){return"nodechange"===t.type&&t.selectionChange})(e)||jd(t)}))}(t,e)})),t.on("remove",(function(){e.cancel()}))},$d=ls.DOM,Gd=function(t,e){var n=function(t){return t.getParam("custom_ui_selector","","string")}(t),r=$d.getParent(e,(function(e){return function(t){return Fd.isEditorUIElement(t)}(e)||!!n&&t.dom.is(e,n)}));return null!==r},Vd=function(t,e){var n=e.editor;zd(n),n.on("focusin",(function(){var e=t.focusedEditor;e!==n&&(e&&e.fire("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.fire("focus",{blurredEditor:e}),n.focus(!0))})),n.on("focusout",(function(){Jr.setEditorTimeout(n,(function(){var e=t.focusedEditor;Gd(n,function(t){try{var e=un(Ie(t.getElement()));return Cd(e).fold((function(){return document.body}),(function(t){return t.dom}))}catch(t){return document.body}}(n))||e!==n||(n.fire("blur",{focusedEditor:null}),t.focusedEditor=null)}))})),id||(id=function(e){var n=t.activeEditor;n&&function(t){if(sn()&&y(t.target)){var e=Ie(t.target);if($e(e)&&y(e.dom.shadowRoot)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return ot(n)}}return R.from(t.target)}(e).each((function(e){e.ownerDocument===document&&(e===document.body||Gd(n,e)||t.focusedEditor!==n||(n.fire("blur",{focusedEditor:null}),t.focusedEditor=null))}))},$d.bind(document,"focusin",id))},Ud=function(t,e){t.focusedEditor===e.editor&&(t.focusedEditor=null),t.activeEditor||($d.unbind(document,"focusin",id),id=null)},Wd=function(t,e){(function(t,e){return function(t){return t.collapsed?R.from(Ks(t.startContainer,t.startOffset)).map(Ie):R.none()}(e).bind((function(e){return li(e)?R.some(e):!1===je(t,e)?R.some(t):R.none()}))})(Ie(t.getBody()),e).bind((function(t){return wl(t.dom)})).fold((function(){t.selection.normalize()}),(function(e){return t.selection.setRng(e.toRange())}))},Hd=function(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},Yd=function(t){return t.inline?function(t){var e,n,r=t.getBody();return r&&(e=Ie(r),Sd(e)||(n=e,Cd(un(n)).filter((function(t){return n.dom.contains(t.dom)}))).isSome())}(t):function(t){return t.iframeElement&&Sd(Ie(t.iframeElement))}(t)},Xd=function(t){return t.editorManager.setActive(t)},qd=function(t,e,n,r,i){var o=n?e.startContainer:e.endContainer,a=n?e.startOffset:e.endOffset;return R.from(o).map(Ie).map((function(t){return r&&e.collapsed?t:tn(t,i(t,a)).getOr(t)})).bind((function(t){return $e(t)?R.some(t):Xe(t).filter($e)})).map((function(t){return t.dom})).getOr(t)},Zd=function(t,e,n){return qd(t,e,!0,n,(function(t,e){return Math.min(rn(t),e)}))},Kd=function(t,e,n){return qd(t,e,!1,n,(function(t,e){return e>0?e-1:e}))},Jd=function(t,e){for(var n=t;t&&Fn(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Qd=function(t,e){return V(e,(function(e){var n=t.fire("GetSelectionRange",{range:e});return n.range!==e?n.range:e}))},th={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},eh=function(t,e,n){var r=n?"lastChild":"firstChild",i=n?"prev":"next";if(t[r])return t[r];if(t!==e){var o=t[i];if(o)return o;for(var a=t.parent;a&&a!==e;a=a.parent)if(o=a[i])return o}},nh=function(t){if(!$i(t.value))return!1;var e=t.parent;return!e||"span"===e.name&&!e.attr("style")||!/^[ ]+$/.test(t.value)},rh=function(t){var e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e},ih=function(){function t(t,e){this.name=t,this.type=e,1===e&&(this.attributes=[],this.attributes.map={})}return t.create=function(e,n){var r=new t(e,th[e]||1);return n&&ft(n,(function(t,e){r.attr(e,t)})),r},t.prototype.replace=function(t){var e=this;return t.parent&&t.remove(),e.insert(t,e),e.remove(),e},t.prototype.attr=function(t,e){var n,r=this;if("string"!=typeof t)return null!=t&&ft(t,(function(t,e){r.attr(e,t)})),r;if(n=r.attributes){if(void 0!==e){if(null===e){if(t in n.map){delete n.map[t];for(var i=n.length;i--;)if(n[i].name===t)return n.splice(i,1),r}return r}if(t in n.map){for(i=n.length;i--;)if(n[i].name===t){n[i].value=e;break}}else n.push({name:t,value:e});return n.map[t]=e,r}return n.map[t]}},t.prototype.clone=function(){var e,n=this,r=new t(n.name,n.type);if(e=n.attributes){var i=[];i.map={};for(var o=0,a=e.length;o<a;o++){var s=e[o];"id"!==s.name&&(i[i.length]={name:s.name,value:s.value},i.map[s.name]=s.value)}r.attributes=i}return r.value=n.value,r.shortEnded=n.shortEnded,r},t.prototype.wrap=function(t){var e=this;return e.parent.insert(t,e),t.append(e),e},t.prototype.unwrap=function(){for(var t=this,e=t.firstChild;e;){var n=e.next;t.insert(e,t,!0),e=n}t.remove()},t.prototype.remove=function(){var t=this,e=t.parent,n=t.next,r=t.prev;return e&&(e.firstChild===t?(e.firstChild=n,n&&(n.prev=null)):r.next=n,e.lastChild===t?(e.lastChild=r,r&&(r.next=null)):n.prev=r,t.parent=t.next=t.prev=null),t},t.prototype.append=function(t){var e=this;t.parent&&t.remove();var n=e.lastChild;return n?(n.next=t,t.prev=n,e.lastChild=t):e.lastChild=e.firstChild=t,t.parent=e,t},t.prototype.insert=function(t,e,n){t.parent&&t.remove();var r=e.parent||this;return n?(e===r.firstChild?r.firstChild=t:e.prev.next=t,t.prev=e.prev,t.next=e,e.prev=t):(e===r.lastChild?r.lastChild=t:e.next.prev=t,t.next=e.next,t.prev=e,e.next=t),t.parent=r,t},t.prototype.getAll=function(t){for(var e=[],n=this.firstChild;n;n=eh(n,this))n.name===t&&e.push(n);return e},t.prototype.children=function(){for(var t=[],e=this.firstChild;e;e=e.next)t.push(e);return t},t.prototype.empty=function(){var t=this;if(t.firstChild){for(var e=[],n=t.firstChild;n;n=eh(n,t))e.push(n);for(var r=e.length;r--;)(n=e[r]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return t.firstChild=t.lastChild=null,t},t.prototype.isEmpty=function(t,e,n){void 0===e&&(e={});var r=this,i=r.firstChild;if(rh(r))return!1;if(i)do{if(1===i.type){if(i.attr("data-mce-bogus"))continue;if(t[i.name])return!1;if(rh(i))return!1}if(8===i.type)return!1;if(3===i.type&&!nh(i))return!1;if(3===i.type&&i.parent&&e[i.parent.name]&&$i(i.value))return!1;if(n&&n(i))return!1}while(i=eh(i,r));return!0},t.prototype.walk=function(t){return eh(this,null,t)},t}(),oh=function(t,e){return t.replace(e.re,(function(t){return mt(e.uris,t).getOr(t)}))},ah=Me.each,sh=Me.trim,uh="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),ch={ftp:21,http:80,https:443,mailto:25},lh=["img","video"],fh=function(){function t(e,n){e=sh(e),this.settings=n||{};var r=this.settings.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))i.source=e;else{var o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){var a=this.settings.base_uri?this.settings.base_uri.path:new t(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)e="//mce_host"+i.toAbsPath(a,e);else{var s=/([^#?]*)([#?]?.*)/.exec(e);e=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(a,s[1])+s[2]}}e=e.replace(/@@/g,"(mce_at)");var u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);ah(uh,(function(t,e){var n=u[e];n&&(n=n.replace(/\(mce_at\)/g,"@@")),i[t]=n})),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),i.port||"mce_host"!==i.host||(i.port=r.port),i.host&&"mce_host"!==i.host||(i.host=r.host),i.source=""),o&&(i.protocol="")}}return t.parseDataUri=function(t){var e,n=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(e=r[1]),{type:e,data:n[1]}},t.isDomSafe=function(t,e,n){if(void 0===n&&(n={}),n.allow_script_urls)return!0;var r=co.decode(t).replace(/[\s\u0000-\u001F]+/g,"");try{r=decodeURIComponent(r)}catch(t){r=unescape(r)}return!/((java|vb)script|mhtml):/i.test(r)&&!function(t,e,n){return!t.allow_html_data_urls&&(/^data:image\//i.test(e)?function(t,e){return y(t)?!t:!y(e)||!$(lh,e)}(t.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(e):/^data:/i.test(e))}(n,r,e)},t.getDocumentBaseUrl=function(t){var e;return e=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?t.href:t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},t.prototype.setPath=function(t){var e=/^(.*?)\/?(\w+)?$/.exec(t);this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},t.prototype.toRelative=function(e){var n;if("./"===e)return e;var r=new t(e,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();var i=this.getURI(),o=r.getURI();return i===o||"/"===i.charAt(i.length-1)&&i.substr(0,i.length-1)===o?i:(n=this.toRelPath(this.path,r.path),r.query&&(n+="?"+r.query),r.anchor&&(n+="#"+r.anchor),n)},t.prototype.toAbsolute=function(e,n){var r=new t(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))},t.prototype.isSameOrigin=function(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;var e=ch[this.protocol];if(e&&(this.port||e)==(t.port||e))return!0}return!1},t.prototype.toRelPath=function(t,e){var n,r,i=0,o="",a=t.substring(0,t.lastIndexOf("/")).split("/"),s=e.split("/");if(a.length>=s.length)for(n=0,r=a.length;n<r;n++)if(n>=s.length||a[n]!==s[n]){i=n+1;break}if(a.length<s.length)for(n=0,r=s.length;n<r;n++)if(n>=a.length||a[n]!==s[n]){i=n+1;break}if(1===i)return e;for(n=0,r=a.length-(i-1);n<r;n++)o+="../";for(n=i-1,r=s.length;n<r;n++)o+=n!==i-1?"/"+s[n]:s[n];return o},t.prototype.toAbsPath=function(t,e){var n,r,i=0,o=[],a=/\/$/.test(e)?"/":"",s=t.split("/"),u=e.split("/");for(ah(s,(function(t){t&&o.push(t)})),s=o,n=u.length-1,o=[];n>=0;n--)0!==u[n].length&&"."!==u[n]&&(".."!==u[n]?i>0?i--:o.push(u[n]):i++);return 0!==(r=(n=s.length-i)<=0?et(o).join("/"):s.slice(0,n).join("/")+"/"+et(o).join("/")).indexOf("/")&&(r="/"+r),a&&r.lastIndexOf("/")!==r.length-1&&(r+=a),r},t.prototype.getURI=function(t){var e;return void 0===t&&(t=!1),this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source},t}(),dh=Me.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),hh=At((function(){return document.implementation.createHTMLDocument("parser")})),ph=function(t,e,n){for(var r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,i=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,o=t.getShortEndedElements(),a=1,s=n;0!==a;)for(r.lastIndex=s;;){var u=r.exec(e);if(null===u)return s;if("!"===u[1]){s=Rt(u[2],"--")?gh(e,!1,u.index+"!--".length):gh(e,!0,u.index+1);break}i.lastIndex=r.lastIndex;var c=i.exec(e);if(!p(c)&&c.index===r.lastIndex){"/"===u[1]?a-=1:yt(o,u[2])||(a+=1),s=r.lastIndex+c[0].length;break}}return s},gh=function(t,e,n){void 0===n&&(n=0);var r=t.toLowerCase();if(-1!==r.indexOf("[if ",n)&&function(t,e){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(t.substr(e))}(r,n)){var i=r.indexOf("[endif]",n);return r.indexOf(">",i)}if(e){var o=r.indexOf(">",n);return-1!==o?o:r.length}var a=/--!?>/g;a.lastIndex=n;var s=a.exec(t);return s?s.index+s[0].length:r.length},vh=function(t,e){var n=t.exec(e);if(n){var r=n[1],i=n[2];return"string"==typeof r&&"data-mce-bogus"===r.toLowerCase()?i:null}return null},mh=function(t,e){void 0===e&&(e=_o()),t=t||{};var n=hh(),r=n.createElement("form");!1!==t.fix_self_closing&&(t.fix_self_closing=!0);var i=t.comment?t.comment:w,o=t.cdata?t.cdata:w,a=t.text?t.text:w,s=t.start?t.start:w,u=t.end?t.end:w,c=t.pi?t.pi:w,l=t.doctype?t.doctype:w;return{parse:function(f,d){void 0===d&&(d="html"),function(f,d){void 0===d&&(d="html");for(var h,p,g,v,m,y,b,x,w,_,E,S,C,k,M,O,T,A,N,I=f.html,P=0,D=[],L=0,R=co.decode,j=Me.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),B="html"===d?0:1,F=function(t){var e,n;for(e=D.length;e--&&D[e].name!==t;);if(e>=0){for(n=D.length-1;n>=e;n--)(t=D[n]).valid&&u(t.name);D.length=e}},z=function(t,e){return a(oh(t,f),e)},$=function(e){""!==e&&(">"===e.charAt(0)&&(e=" "+e),t.allow_conditional_comments||"[if"!==e.substr(0,3).toLowerCase()||(e=" "+e),i(oh(e,f)))},G=function(t,e){var n=t||"",r=!Rt(n,"--"),i=gh(I,r,e);return t=I.substr(e,i-e),$(r?n+t:t),i+1},V=function(e,i,o,a,s){if(o=function(t){return oh(t,f)}((i=i.toLowerCase())in X?i:R(o||a||s||"")),q&&!x&&!1===function(t){return 0===t.indexOf("data-")||0===t.indexOf("aria-")}(i)){var u=k[i];if(!u&&M){for(var c=M.length;c--&&!(u=M[c]).pattern.test(i););-1===c&&(u=null)}if(!u)return;if(u.validValues&&!(o in u.validValues))return}("name"===i||"id"===i)&&e in dh&&(o in n||o in r)||j[i]&&!fh.isDomSafe(o,e,t)||x&&(i in j||0===i.indexOf("on"))||(v.map[i]=o,v.push({name:i,value:o}))},U=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),W=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,H=e.getShortEndedElements(),Y=t.self_closing_elements||e.getSelfClosingElements(),X=e.getBoolAttrs(),q=t.validate,Z=t.remove_internals,K=t.fix_self_closing,J=e.getSpecialElements(),Q=I+">";h=U.exec(Q);){var tt=h[0];if(P<h.index&&z(R(I.substr(P,h.index-P))),p=h[7])":"===(p=p.toLowerCase()).charAt(0)&&(p=p.substr(1)),F(p);else if(p=h[8]){if(h.index+tt.length>I.length){z(R(I.substr(h.index))),P=h.index+tt.length;continue}":"===(p=p.toLowerCase()).charAt(0)&&(p=p.substr(1)),w=p in H,K&&Y[p]&&D.length>0&&D[D.length-1].name===p&&F(p);var et=vh(W,h[9]);if(null!==et){if("all"===et){P=ph(e,I,U.lastIndex),U.lastIndex=P;continue}E=!1}if(!q||(_=e.getElementRule(p))){if(E=!0,q&&(k=_.attributes,M=_.attributePatterns),(C=h[9])?((x=-1!==C.indexOf("data-mce-type"))&&Z&&(E=!1),(v=[]).map={},C.replace(W,(function(t,e,n,r,i){return V(p,e,n,r,i),""}))):(v=[]).map={},q&&!x){if(O=_.attributesRequired,T=_.attributesDefault,A=_.attributesForced,_.removeEmptyAttrs&&!v.length&&(E=!1),A)for(m=A.length;m--;)b=(S=A[m]).name,"{$uid}"===(N=S.value)&&(N="mce_"+L++),v.map[b]=N,v.push({name:b,value:N});if(T)for(m=T.length;m--;)(b=(S=T[m]).name)in v.map||("{$uid}"===(N=S.value)&&(N="mce_"+L++),v.map[b]=N,v.push({name:b,value:N}));if(O){for(m=O.length;m--&&!(O[m]in v.map););-1===m&&(E=!1)}if(S=v.map["data-mce-bogus"]){if("all"===S){P=ph(e,I,U.lastIndex),U.lastIndex=P;continue}E=!1}}E&&s(p,v,w)}else E=!1;if(g=J[p]){g.lastIndex=P=h.index+tt.length,(h=g.exec(I))?(E&&(y=I.substr(P,h.index-P)),P=h.index+h[0].length):(y=I.substr(P),P=I.length),E&&(y.length>0&&z(y,!0),u(p)),U.lastIndex=P;continue}w||(C&&C.indexOf("/")===C.length-1?E&&u(p):D.push({name:p,valid:E}))}else if(p=h[1])$(p);else if(p=h[2]){if(!(1===B||t.preserve_cdata||D.length>0&&e.isValidChild(D[D.length-1].name,"#cdata"))){P=G("",h.index+2),U.lastIndex=P;continue}o(p)}else if(p=h[3])l(p);else{if((p=h[4])||"<!"===tt){P=G(p,h.index+tt.length),U.lastIndex=P;continue}if(p=h[5]){if(1!==B){P=G("?",h.index+2),U.lastIndex=P;continue}c(p,h[6])}}P=h.index+tt.length}for(P<I.length&&z(R(I.substr(P))),m=D.length-1;m>=0;m--)(p=D[m]).valid&&u(p.name)}(function(t){for(var e,n=/data:[^;<"'\s]+;base64,([a-z0-9\+\/=\s]+)/gi,r=[],i={},o=Rs("img"),a=0,s=0;e=n.exec(t);){var u=e[0],c=o+"_"+s++;i[c]=u,a<e.index&&r.push(t.substr(a,e.index-a)),r.push(c),a=e.index+u.length}var l=new RegExp(o+"_[0-9]+","g");return 0===a?{prefix:o,uris:i,html:t,re:l}:(a<t.length&&r.push(t.substr(a)),{prefix:o,uris:i,html:r.join(""),re:l})}(f),d)}}};mh.findEndTag=ph;var yh=function(t,e){for(var n,r=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i=t.schema,o=function(t,e){var n=new RegExp(["\\s?("+t.join("|")+')="[^"]+"'].join("|"),"gi");return e.replace(n,"")}(t.getTempAttrs(),e),a=i.getShortEndedElements();n=r.exec(o);){var s,u=r.lastIndex,c=n[0].length;s=a[n[1]]?u:mh.findEndTag(i,o,u),o=o.substring(0,u-c)+o.substring(s),r.lastIndex=u-c}return vi(o)},bh=yh,xh=Me.each,wh=function(t){return{compare:function(e,n){if(e.nodeName!==n.nodeName)return!1;var r=function(e){var n={};return xh(t.getAttribs(e),(function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=t.getAttrib(e,i))})),n},i=function(t,e){var n,r;for(r in t)if(yt(t,r)){if(void 0===(n=e[r]))return!1;if(t[r]!==n)return!1;delete e[r]}for(r in e)if(yt(e,r))return!1;return!0};return!(!i(r(e),r(n))||!i(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(n,"style")))||Ll(e)||Ll(n))}}},_h=Me.makeMap,Eh=function(t){var e=[],n=(t=t||{}).indent,r=_h(t.indent_before||""),i=_h(t.indent_after||""),o=co.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"===t.element_format;return{start:function(t,s,u){var c,l,f,d;if(n&&r[t]&&e.length>0&&(d=e[e.length-1]).length>0&&"\n"!==d&&e.push("\n"),e.push("<",t),s)for(c=0,l=s.length;c<l;c++)f=s[c],e.push(" ",f.name,'="',o(f.value,!0),'"');e[e.length]=!u||a?">":" />",u&&n&&i[t]&&e.length>0&&(d=e[e.length-1]).length>0&&"\n"!==d&&e.push("\n")},end:function(t){var r;e.push("</",t,">"),n&&i[t]&&e.length>0&&(r=e[e.length-1]).length>0&&"\n"!==r&&e.push("\n")},text:function(t,n){t.length>0&&(e[e.length]=n?t:o(t))},cdata:function(t){e.push("<![CDATA[",t,"]]>")},comment:function(t){e.push("\x3c!--",t,"--\x3e")},pi:function(t,r){r?e.push("<?",t," ",o(r),"?>"):e.push("<?",t,"?>"),n&&e.push("\n")},doctype:function(t){e.push("<!DOCTYPE",t,">",n?"\n":"")},reset:function(){e.length=0},getContent:function(){return e.join("").replace(/\n$/,"")}}},Sh=function(t,e){void 0===e&&(e=_o());var n=Eh(t);return(t=t||{}).validate=!("validate"in t)||t.validate,{serialize:function(r){var i=t.validate,o={3:function(t){n.text(t.value,t.raw)},8:function(t){n.comment(t.value)},7:function(t){n.pi(t.name,t.value)},10:function(t){n.doctype(t.value)},4:function(t){n.cdata(t.value)},11:function(t){if(t=t.firstChild)do{a(t)}while(t=t.next)}};n.reset();var a=function(t){var r=o[t.type];if(r)r(t);else{var s=t.name,u=t.shortEnded,c=t.attributes;if(i&&c&&c.length>1){var l=[];l.map={};var f=e.getElementRule(t.name);if(f){for(var d=0,h=f.attributesOrder.length;d<h;d++)if((g=f.attributesOrder[d])in c.map){var p=c.map[g];l.map[g]=p,l.push({name:g,value:p})}for(d=0,h=c.length;d<h;d++){var g;(g=c[d].name)in l.map||(p=c.map[g],l.map[g]=p,l.push({name:g,value:p}))}c=l}}if(n.start(t.name,c,u),!u){if(t=t.firstChild)do{a(t)}while(t=t.next);n.end(s)}}};return 1!==r.type||t.inner?o[11](r):a(r),n.getContent()}}},Ch=new Set;U(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(function(t){Ch.add(t)}));var kh=["font","text-decoration","text-emphasis"],Mh=function(t,e){return ct(t.parseStyle(t.getAttrib(e,"style")))},Oh=function(t,e,n){var r=Mh(t,e),i=Mh(t,n),o=function(r){var i=t.getStyle(e,r),o=t.getStyle(n,r);return $t(i)&&$t(o)&&i!==o};return G(r,(function(t){var e=function(e){return G(e,(function(e){return e===t}))};if(!e(i)&&e(kh)){var n=Y(i,(function(t){return G(kh,(function(e){return Rt(t,e)}))}));return G(n,o)}return o(t)}))},Th=function(t,e,n){return R.from(n.container()).filter(Fn).exists((function(r){var i=t?0:-1;return e(r.data.charAt(n.offset()+i))}))},Ah=M(Th,!0,jl),Nh=M(Th,!1,jl),Ih=function(t){var e=t.container();return Fn(e)&&(0===e.data.length||gi(e.data)&&Df.isBookmarkNode(e.parentNode))},Ph=function(t,e){return function(n){return R.from(zc(t?0:-1,n)).filter(e).isSome()}},Dh=function(t){return Un(t)&&"block"===ir(Ie(t),"display")},Lh=function(t){return Hn(t)&&!function(t){return Nn(t)&&"all"===t.getAttribute("data-mce-bogus")}(t)},Rh=Ph(!0,Dh),jh=Ph(!1,Dh),Bh=Ph(!0,Xn),Fh=Ph(!1,Xn),zh=Ph(!0,Rn),$h=Ph(!1,Rn),Gh=Ph(!0,Lh),Vh=Ph(!1,Lh),Uh=function(t){vn(t),pn(t,Te('<br data-mce-bogus="1">'))},Wh=function(t){nn(t).each((function(e){qe(e).each((function(n){ii(t)&&ai(e)&&ii(n)&&mn(e)}))}))},Hh=function(t,e){return function(t,e,n){return je(e,t)?(r=function(t,e){for(var n=b(e)?e:N,r=t.dom,i=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,a=Ie(o);if(i.push(a),!0===n(a))break;r=o}return i}(t,(function(t){return n(t)||Re(t,e)})),r.slice(0,-1)):[];var r}(t,e,N)},Yh=function(t,e){return[t].concat(Hh(t,e))},Xh=function(t,e,n){return ml(t,e,n,Ih)},qh=function(t,e){return K(Yh(Ie(e.container()),t),ii)},Zh=function(t,e,n){return Xh(t,e.dom,n).forall((function(t){return qh(e,n).fold((function(){return!1===Fc(t,n,e.dom)}),(function(r){return!1===Fc(t,n,e.dom)&&je(r,Ie(t.container()))}))}))},Kh=function(t,e,n){return qh(e,n).fold((function(){return Xh(t,e.dom,n).forall((function(t){return!1===Fc(t,n,e.dom)}))}),(function(e){return Xh(t,e.dom,n).isNone()}))},Jh=M(Kh,!1),Qh=M(Kh,!0),tp=M(Zh,!1),ep=M(Zh,!0),np=function(t){return qc(t).exists(ai)},rp=function(t,e,n){var r=Y(Yh(Ie(n.container()),e),ii),i=ot(r).getOr(e);return gl(t,i.dom,n).filter(np)},ip=function(t,e){return qc(e).exists(ai)||rp(!0,t,e).isSome()},op=function(t,e){return function(t){return R.from(t.getNode(!0)).map(Ie)}(e).exists(ai)||rp(!1,t,e).isSome()},ap=M(rp,!1),sp=M(rp,!0),up=function(t){return mu.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd()},cp=function(t,e){var n=Y(Yh(Ie(e.container()),t),ii);return ot(n).getOr(t)},lp=function(t,e){return up(e)?Nh(e):Nh(e)||xl(cp(t,e).dom,e).exists(Nh)},fp=function(t,e){return up(e)?Ah(e):Ah(e)||bl(cp(t,e).dom,e).exists(Ah)},dp=function(t){return qc(t).bind((function(t){return Ur(t,$e)})).exists((function(t){return function(t){return $(["pre","pre-wrap"],t)}(ir(t,"white-space"))}))},hp=function(t,e){return!dp(e)&&(Jh(t,e)||tp(t,e)||op(t,e)||lp(t,e))},pp=function(t,e){return!dp(e)&&(Qh(t,e)||ep(t,e)||ip(t,e)||fp(t,e))},gp=function(t,e){return hp(t,e)||pp(t,function(t){var e=t.container(),n=t.offset();return Fn(e)&&n<e.data.length?mu(e,n+1):t}(e))},vp=function(t,e){return Rl(t.charAt(e))},mp=function(t){var e=t.container();return Fn(e)&&Lt(e.data,hi)},yp=function(t,e){return R.some(e).filter(mp).bind((function(e){var n,r,i,o=e.container(),a=function(t,e){var n=e.data,r=mu(e,0);return!(!vp(n,0)||gp(t,r)||(e.data=" "+n.slice(1),0))}(t,o)||(r=(n=o).data,i=function(t){var e=t.split("");return V(e,(function(t,n){return Rl(t)&&n>0&&n<e.length-1&&Bl(e[n-1])&&Bl(e[n+1])?" ":t})).join("")}(r),i!==r&&(n.data=i,!0))||function(t,e){var n=e.data,r=mu(e,n.length-1);return!(!vp(n,n.length-1)||gp(t,r)||(e.data=n.slice(0,-1)+" ",0))}(t,o);return a?R.some(e):R.none()}))},bp=function(t){var e=Ie(t.getBody());t.selection.isCollapsed()&&yp(e,mu.fromRangeStart(t.selection.getRng())).each((function(e){t.selection.setRng(e.toRange())}))},xp=function(t,e,n){if(0!==n){var r=Ie(t),i=Vr(r,ii).getOr(r),o=t.data.slice(e,e+n),a=e+n>=t.data.length&&pp(i,mu(t,t.data.length)),s=0===e&&hp(i,mu(t,0));t.replaceData(e,n,function(t,e,n){return q(t,(function(r,i){return jl(i)||Rl(i)?r.previousCharIsSpace||""===r.str&&e||r.str.length===t.length-1&&n?{previousCharIsSpace:!1,str:r.str+hi}:{previousCharIsSpace:!0,str:r.str+" "}:{previousCharIsSpace:!1,str:r.str+i}}),{previousCharIsSpace:!1,str:""}).str}(o,s,a))}},wp=function(t,e){var n=t.data.slice(e),r=n.length-Ft(n).length;xp(t,e,r)},_p=function(t,e){var n=t.data.slice(0,e),r=n.length-zt(n).length;xp(t,e-r,r)},Ep=function(t,e,n,r){void 0===r&&(r=!0);var i=zt(t.data).length,o=r?t:e,a=r?e:t;return r?o.appendData(a.data):o.insertData(0,a.data),mn(Ie(a)),n&&wp(o,i),o},Sp=function(t,e){return function(t,e){var n=t.container(),r=t.offset();return!1===mu.isTextPosition(t)&&n===e.parentNode&&r>mu.before(e).offset()}(e,t)?mu(e.container(),e.offset()-1):e},Cp=function(t){return ji(t.previousSibling)?R.some((e=t.previousSibling,Fn(e)?mu(e,e.data.length):mu.after(e))):t.previousSibling?_l(t.previousSibling):R.none();var e},kp=function(t){return ji(t.nextSibling)?R.some((e=t.nextSibling,Fn(e)?mu(e,0):mu.before(e))):t.nextSibling?wl(t.nextSibling):R.none();var e},Mp=function(t,e,n){return function(t,e,n){return t?function(t,e){return kp(e).orThunk((function(){return Cp(e)})).orThunk((function(){return function(t,e){return bl(t,mu.after(e)).fold((function(){return xl(t,mu.before(e))}),R.some)}(t,e)}))}(e,n):function(t,e){return Cp(e).orThunk((function(){return kp(e)})).orThunk((function(){return function(t,e){var n=mu.before(e.previousSibling?e.previousSibling:e.parentNode);return xl(t,n).fold((function(){return bl(t,mu.after(e))}),R.some)}(t,e)}))}(e,n)}(t,e,n).map(M(Sp,n))},Op=function(t,e,n){n.fold((function(){t.focus()}),(function(n){t.selection.setRng(n.toRange(),e)}))},Tp=function(t,e){return e&&yt(t.schema.getBlockElements(),Be(e))},Ap=function(t){if(Hi(t)){var e=Te('<br data-mce-bogus="1">');return vn(t),pn(t,e),R.some(mu.before(e.dom))}return R.none()},Np=function(t,e,n,r){void 0===r&&(r=!0);var i,o=Mp(e,t.getBody(),n.dom),a=Vr(n,M(Tp,t),(i=t.getBody(),function(t){return t.dom===i})),s=function(t,e,n){var r,i,o,a,s=qe(t).filter(Ge),u=Ze(t).filter(Ge);return mn(t),(r=s,i=u,o=e,a=function(t,e,r){var i=t.dom,o=e.dom,a=i.data.length;return Ep(i,o,n),r.container()===o?mu(i,a):r},r.isSome()&&i.isSome()&&o.isSome()?R.some(a(r.getOrDie(),i.getOrDie(),o.getOrDie())):R.none()).orThunk((function(){return n&&(s.each((function(t){return _p(t.dom,t.dom.length)})),u.each((function(t){return wp(t.dom,0)}))),e}))}(n,o,function(t,e){return yt(t.schema.getTextInlineElements(),Be(e))}(t,n));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(Ap).fold((function(){r&&Op(t,e,s)}),(function(n){r&&Op(t,e,R.some(n))}))},Ip=function(t){return Ts(t,"td,th")},Pp=function(t,e){return{start:t,end:e}},Dp=_r([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Lp=function(t,e){return Yr(Ie(t),"td,th",e)},Rp=function(t){return!Re(t.start,t.end)},jp=function(t,e){return wf(t.start,e).bind((function(n){return wf(t.end,e).bind((function(t){return e=Re(n,t),r=n,e?R.some(r):R.none();var e,r}))}))},Bp=function(t){return function(e){return jp(e,t).map((function(t){return function(t,e,n){return{rng:t,table:e,cells:n}}(e,t,Ip(t))}))}},Fp=function(t,e,n,r){if(n.collapsed||!t.forall(Rp))return R.none();if(e.isSameTable){var i=t.bind(Bp(r));return R.some({start:i,end:i})}var o=Lp(n.startContainer,r),a=Lp(n.endContainer,r),s=o.bind(function(t){return function(e){return wf(e,t).bind((function(t){return at(Ip(t)).map((function(t){return Pp(e,t)}))}))}}(r)).bind(Bp(r)),u=a.bind(function(t){return function(e){return wf(e,t).bind((function(t){return ot(Ip(t)).map((function(t){return Pp(t,e)}))}))}}(r)).bind(Bp(r));return R.some({start:s,end:u})},zp=function(t,e){return J(t,(function(t){return Re(t,e)}))},$p=function(t){return Zn(zp(t.cells,t.rng.start),zp(t.cells,t.rng.end),(function(e,n){return t.cells.slice(e,n+1)}))},Gp=function(t,e){var n=e.startTable,r=e.endTable,i=t.cloneRange();return n.each((function(t){return i.setStartAfter(t.dom)})),r.each((function(t){return i.setEndBefore(t.dom)})),i},Vp=function(t,e){var n=function(t){return function(e){return Re(t,e)}}(t),r=function(t,e){var n=Lp(t.startContainer,e),r=Lp(t.endContainer,e);return Zn(n,r,Pp)}(e,n),i=function(t,e){var n=function(t){return wf(Ie(t),e)},r=n(t.startContainer),i=n(t.endContainer),o=r.isSome(),a=i.isSome(),s=Zn(r,i,Re).getOr(!1);return{startTable:r,endTable:i,isStartInTable:o,isEndInTable:a,isSameTable:s,isMultiTable:!s&&o&&a}}(e,n);return function(t,e,n){return t.exists((function(t){return function(t,e){return!Rp(t)&&jp(t,e).exists((function(t){var e=t.dom.rows;return 1===e.length&&1===e[0].cells.length}))}(t,n)&&Sf(t.start,e)}))}(r,e,n)?r.map((function(t){return Dp.singleCellTable(e,t.start)})):i.isMultiTable?function(t,e,n,r){return Fp(t,e,n,r).bind((function(t){var r=t.start,i=t.end,o=r.bind($p).getOr([]),a=i.bind($p).getOr([]);if(o.length>0&&a.length>0){var s=Gp(n,e);return R.some(Dp.multiTable(o,a,s))}return R.none()}))}(r,i,e,n):function(t,e,n,r){return Fp(t,e,n,r).bind((function(t){var e=t.start,n=t.end;return e.or(n)})).bind((function(t){var r=e.isSameTable,i=$p(t).getOr([]);if(r&&t.cells.length===i.length)return R.some(Dp.fullTable(t.table));if(i.length>0){if(r)return R.some(Dp.partialTable(i,R.none()));var o=Gp(n,e);return R.some(Dp.partialTable(i,R.some(Ot(Ot({},e),{rng:o}))))}return R.none()}))}(r,i,e,n)},Up=function(t){var e;return(8===Fe(e=t)||"#comment"===Be(e)?qe(t):nn(t)).bind(Up).orThunk((function(){return R.some(t)}))},Wp=function(t){return U(t,(function(t){rr(t,"contenteditable"),Uh(t)}))},Hp=function(t,e,n,r){var i=n.cloneRange();r?(i.setStart(n.startContainer,n.startOffset),i.setEndAfter(e.dom.lastChild)):(i.setStartBefore(e.dom.firstChild),i.setEnd(n.endContainer,n.endOffset)),Zp(t,i,e,!1)},Yp=function(t){var e=xf(t),n=Ie(t.selection.getNode());Yn(n.dom)&&Hi(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&G(e,(function(t){return Re(t,n)}))&&Qn(n,"data-mce-selected","1")},Xp=function(t,e,n){var r=t.selection.getRng(),i=n.bind((function(n){var i=n.rng,o=n.isStartInTable,a=function(t,e){return R.from(t.dom.getParent(e,t.dom.isBlock)).map(Ie)}(t,o?i.endContainer:i.startContainer);i.deleteContents(),function(t,e,n){n.each((function(n){e?mn(n):(Uh(n),t.selection.setCursorLocation(n.dom,0))}))}(t,o,a.filter(Hi));var s=o?e[0]:e[e.length-1];return Hp(t,s,r,o),Hi(s)?R.none():R.some(o?e.slice(1):e.slice(0,-1))})).getOr(e);return Wp(i),Yp(t),!0},qp=function(t,e,n,r){var i=t.selection.getRng(),o=e[0],a=n[n.length-1];Hp(t,o,i,!0),Hp(t,a,i,!1);var s=Hi(o)?e:e.slice(1),u=Hi(a)?n:n.slice(0,-1);return Wp(s.concat(u)),r.deleteContents(),Yp(t),!0},Zp=function(t,e,n,r){void 0===r&&(r=!0),e.deleteContents();var i,o=Up(n).getOr(n),a=Ie(t.dom.getParent(o.dom,t.dom.isBlock));if(Hi(a)&&(Uh(a),r&&t.selection.setCursorLocation(a.dom,0)),!Re(n,a)){var s=qn(Xe(a),n)?[]:Xe(i=a).map(Qe).map((function(t){return Y(t,(function(t){return!Re(i,t)}))})).getOr([]);U(s.concat(Qe(n)),(function(t){Re(t,a)||je(t,a)||!Hi(t)||mn(t)}))}return!0},Kp=function(t,e){return Np(t,!1,e),!0},Jp=function(t,e){return K(Yh(e,t),fi)},Qp=function(t,e){return K(Yh(e,t),("caption",function(t){return $e(t)&&"caption"===Be(t)}))},tg=function(t,e){return Uh(e),t.selection.setCursorLocation(e.dom,0),R.some(!0)},eg=function(t,e){return t?zh(e):$h(e)},ng=function(t,e,n){var r=Ie(t.getBody());return Qp(r,n).fold((function(){return function(t,e,n,r){var i=mu.fromRangeStart(t.selection.getRng());return Jp(n,r).bind((function(r){return Hi(r)?tg(t,r):function(t,e,n,r,i){return vl(n,t.getBody(),i).bind((function(t){return Jp(e,Ie(t.getNode())).map((function(t){return!1===Re(t,r)}))}))}(t,n,e,r,i)})).getOr(!1)}(t,e,r,n)||function(t,e){var n=mu.fromRangeStart(t.selection.getRng());return eg(e,n)||gl(e,t.getBody(),n).exists((function(t){return eg(e,t)}))}(t,e)}),(function(n){return function(t,e,n,r){var i=mu.fromRangeStart(t.selection.getRng());return Hi(r)?tg(t,r):function(t,e,n,r,i){return vl(n,t.getBody(),i).bind((function(o){return function(t,e,n,r){return wl(t.dom).bind((function(i){return _l(t.dom).map((function(t){return e?n.isEqual(i)&&r.isEqual(t):n.isEqual(t)&&r.isEqual(i)}))})).getOr(!0)}(r,n,i,o)?function(t,e){return tg(t,e)}(t,r):function(t,e,n){return Qp(t,Ie(n.getNode())).map((function(t){return!1===Re(t,e)}))}(e,r,o)})).or(R.some(!0))}(t,n,e,r,i)}(t,e,r,n).getOr(!1)}))},rg=function(t,e){var n=Ie(t.selection.getStart(!0)),r=xf(t);return t.selection.isCollapsed()&&0===r.length?ng(t,e,n):function(t,e,n){var r=Ie(t.getBody()),i=t.selection.getRng();return 0!==n.length?Xp(t,n,R.none()):function(t,e,n,r){return Qp(e,r).fold((function(){return function(t,e,n){return Vp(e,n).map((function(e){return e.fold(M(Zp,t),M(Kp,t),M(Xp,t),M(qp,t))}))}(t,e,n)}),(function(e){return function(t,e){return tg(t,e)}(t,e)})).getOr(!1)}(t,r,i,e)}(t,n,r)},ig=function(t){return t.collapsed?t:function(t){var e=mu.fromRangeStart(t),n=mu.fromRangeEnd(t),r=t.commonAncestorContainer;return gl(!1,r,n).map((function(i){return!Fc(e,n,r)&&Fc(e,i,r)?function(t,e,n,r){var i=document.createRange();return i.setStart(t,e),i.setEnd(n,r),i}(e.container(),e.offset(),i.container(),i.offset()):t})).getOr(t)}(t)},og=function(t,e){var n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),function(t,e){var n=t.getNonEmptyElements();return e&&(e.isEmpty(n)||function(t,e){return t.getBlockElements()[e.name]&&function(t){return t.firstChild&&t.firstChild===t.lastChild}(e)&&function(t){return"br"===t.name||t.value===hi}(e.firstChild)}(t,e))}(t,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)},ag=function(t){return t.length>0&&(!(n=t[t.length-1]).firstChild||(e=n)&&e.firstChild&&e.firstChild===e.lastChild&&function(t){return t.data===hi||Vn(t)}(e.firstChild))?t.slice(0,-1):t;var e,n},sg=function(t,e){var n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},ug=function(t,e){var n=mu.after(t),r=fl(e).prev(n);return r?r.toRange():null},cg=function(t,e,n,r){var i,o=function(t,e,n){var r=e.serialize(n);return function(t){var e=t.firstChild,n=t.lastChild;return e&&"META"===e.nodeName&&e.parentNode.removeChild(e),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),t}(t.createFragment(r))}(e,t,r),a=sg(e,n.startContainer),s=ag((i=o.firstChild,Y(i.childNodes,(function(t){return"LI"===t.nodeName})))),u=e.getRoot(),c=function(t){var r=mu.fromRangeStart(n),i=fl(e.getRoot()),o=1===t?i.prev(r):i.next(r);return!o||sg(e,o.getNode())!==a};return c(1)?function(t,e,n){var r=t.parentNode;return Me.each(e,(function(e){r.insertBefore(e,t)})),function(t,e){var n=mu.before(t),r=fl(e).next(n);return r?r.toRange():null}(t,n)}(a,s,u):c(2)?function(t,e,n,r){return r.insertAfter(e.reverse(),t),ug(e[0],n)}(a,s,u,e):function(t,e,n,r){var i=function(t,e){var n=e.cloneRange(),r=e.cloneRange();return n.setStartBefore(t),r.setEndAfter(t),[n.cloneContents(),r.cloneContents()]}(t,r),o=t.parentNode;return o.insertBefore(i[0],t),Me.each(e,(function(e){o.insertBefore(e,t)})),o.insertBefore(i[1],t),o.removeChild(t),ug(e[e.length-1],n)}(a,s,u,n)},lg=Yn,fg=function(t,e,n){var r,i,o,a=t.selection,s=t.dom;/^ | $/.test(e)&&(e=function(t,e,n){var r=Ie(t.getRoot());return n=hp(r,mu.fromRangeStart(e))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),pp(r,mu.fromRangeEnd(e))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")}(s,a.getRng(),e));var u=t.parser,c=n.merge,l=Sh({validate:ac(t)},t.schema),f='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',d=t.fire("BeforeSetContent",{content:e,format:"html",selection:!0,paste:n.paste});if(d.isDefaultPrevented())t.fire("SetContent",{content:d.content,format:"html",selection:!0,paste:n.paste});else{-1===(e=d.content).indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,f);var h=(i=a.getRng()).startContainer||(i.parentElement?i.parentElement():null),p=t.getBody();h===p&&a.isCollapsed()&&s.isBlock(p.firstChild)&&function(t,e){return e&&!t.schema.getShortEndedElements()[e.nodeName]}(t,p.firstChild)&&s.isEmpty(p.firstChild)&&((i=s.createRng()).setStart(p.firstChild,0),i.setEnd(p.firstChild,0),a.setRng(i)),a.isCollapsed()||function(t){var e=t.dom,n=ig(t.selection.getRng());t.selection.setRng(n);var r=e.getParent(n.startContainer,lg);!function(t,e,n){return null!==n&&n===t.getParent(e.endContainer,lg)&&Sf(Ie(n),e)}(e,n,r)?t.getDoc().execCommand("Delete",!1,null):Zp(t,n,Ie(r))}(t);var g,v={context:(r=a.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},m=u.parse(e,v);if(!0===n.paste&&og(t.schema,m)&&function(t,e){return!!sg(t,e)}(s,r))return i=cg(l,s,a.getRng(),m),a.setRng(i),void t.fire("SetContent",d);if(function(t){for(var e=t;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}(m),"mce_marker"===(o=m.lastChild).attr("id")){var b=o;for(o=o.prev;o;o=o.walk(!0))if(3===o.type||!s.isBlock(o.name)){t.schema.isValidChild(o.parent.name,"span")&&o.parent.insert(b,o,"br"===o.name);break}}if(t._selectionOverrides.showBlockCaretContainer(r),v.invalid){t.selection.setContent(f),r=a.getNode();var x=t.getBody();for(9===r.nodeType?r=o=x:o=r;o!==x;)r=o,o=o.parentNode;e=r===x?x.innerHTML:s.getOuterHTML(r),e=l.serialize(u.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return l.serialize(m)})))),r===x?s.setHTML(x,e):s.setOuterHTML(r,e)}else!function(t,e,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(t.dom.createFragment(e),n);else{var r=n.firstChild,i=n.lastChild;!r||r===i&&"BR"===r.nodeName?t.dom.setHTML(n,e):t.selection.setContent(e)}}(t,e=l.serialize(m),r);!function(t,e){var n=t.schema.getTextInlineElements(),r=t.dom;if(e){var i=t.getBody(),o=wh(r);Me.each(r.select("*[data-mce-fragment]"),(function(t){if(y(n[t.nodeName.toLowerCase()])&&function(t,e){return tt(Mh(t,e),(function(t){return!function(t){return Ch.has(t)}(t)}))}(r,t))for(var e=t.parentNode;y(e)&&e!==i&&!Oh(r,t,e);e=e.parentNode)if(o.compare(e,t)){r.remove(t,!0);break}}))}}(t,c),function(t,e){var n,r=t.dom,i=t.selection;if(e){i.scrollIntoView(e);var o=Lf(t.getBody(),e);if("false"===r.getContentEditable(o))return r.remove(e),void i.select(o);var a=r.createRng(),s=e.previousSibling;if(Fn(s)){if(a.setStart(s,s.nodeValue.length),!_e.ie){var u=e.nextSibling;Fn(u)&&(s.appendData(u.data),u.parentNode.removeChild(u))}}else a.setStartBefore(e),a.setEndBefore(e);var c=r.getParent(e,r.isBlock);r.remove(e),c&&r.isEmpty(c)&&(t.$(c).empty(),a.setStart(c,0),a.setEnd(c,0),lg(c)||function(t){return!!t.getAttribute("data-mce-fragment")}(c)||!(n=function(e){var n=mu.fromRangeStart(e);if(n=fl(t.getBody()).next(n))return n.toRange()}(a))?r.add(c,r.create("br",{"data-mce-bogus":"1"})):(a=n,r.remove(c))),i.setRng(a)}}(t,s.get("mce_marker")),g=t.getBody(),Me.each(g.getElementsByTagName("*"),(function(t){t.removeAttribute("data-mce-fragment")})),function(t,e){R.from(t.getParent(e,"td,th")).map(Ie).each(Wh)}(s,a.getStart()),t.fire("SetContent",d),t.addVisual()}},dg=function(t,e){e(t),t.firstChild&&dg(t.firstChild,e),t.next&&dg(t.next,e)},hg=function(t){return t instanceof ih},pg=function(t,e,n){t.dom.setHTML(t.getBody(),e),!0!==n&&function(t){Yd(t)&&wl(t.getBody()).each((function(e){var n=e.getNode(),r=Rn(n)?wl(n).getOr(e):e;t.selection.setRng(r.toRange())}))}(t)},gg=function(t,e,n){var r=function(t,e){return Ot(Ot({format:"html"},t),{set:!0,content:hg(e)?"":e})}(n,e),i=n.no_events?r:t.fire("BeforeSetContent",r);return hg(e)||(e=i.content),R.from(t.getBody()).fold(S(e),(function(n){return hg(e)?function(t,e,n,r){var i,o,a;i=t.parser.getNodeFilters(),o=t.parser.getAttributeFilters(),a=function(t,e,n){var r={},i={},o=[];for(var a in n.firstChild&&dg(n.firstChild,(function(n){U(t,(function(t){t.name===n.name&&(r[t.name]?r[t.name].nodes.push(n):r[t.name]={filter:t,nodes:[n]})})),U(e,(function(t){"string"==typeof n.attr(t.name)&&(i[t.name]?i[t.name].nodes.push(n):i[t.name]={filter:t,nodes:[n]})}))})),r)yt(r,a)&&o.push(r[a]);for(var s in i)yt(i,s)&&o.push(i[s]);return o}(i,o,n),U(a,(function(t){U(t.filter.callbacks,(function(e){e(t.nodes,t.filter.name,{})}))}));var s=Sh({validate:t.validate},t.schema).serialize(n);return r.content=di(Ie(e))?s:Me.trim(s),pg(t,r.content,r.no_selection),r.no_events||t.fire("SetContent",r),n}(t,n,e,i):function(t,e,n,r){if(0===n.length||/^\s+$/.test(n)){var i='<br data-mce-bogus="1">';"TABLE"===e.nodeName?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(e.nodeName)&&(n="<li>"+i+"</li>");var o=Vu(t);o&&t.schema.isValidChild(e.nodeName.toLowerCase(),o.toLowerCase())?(n=i,n=t.dom.createHTML(o,Uu(t),n)):n||(n='<br data-mce-bogus="1">'),pg(t,n,r.no_selection),t.fire("SetContent",r)}else"raw"!==r.format&&(n=Sh({validate:t.validate},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=di(Ie(e))?n:Me.trim(n),pg(t,r.content,r.no_selection),r.no_events||t.fire("SetContent",r);return r.content}(t,n,e,i)}))},vg=function(t,e){return function(t,e){var n=t.dom;return n.parentNode?function(t,e){return K(t.dom.childNodes,(function(t){return e(Ie(t))})).map(Ie)}(Ie(n.parentNode),(function(n){return!Re(t,n)&&e(n)})):R.none()}(t,e).isSome()},mg=function(t){return b(t)?t:N},yg=function(t,e,n){var r=e(t),i=mg(n);return r.orThunk((function(){return i(t)?R.none():function(t,e,n){for(var r=t.dom,i=mg(n);r.parentNode;){r=r.parentNode;var o=Ie(r),a=e(o);if(a.isSome())return a;if(i(o))break}return R.none()}(t,e,i)}))},bg=Hl,xg=function(t,e,n){var r=t.formatter.get(n);if(r)for(var i=0;i<r.length;i++){var o=r[i];if(Jl(o)&&!1===o.inherit&&t.dom.is(e,o.selector))return!0}return!1},wg=function(t,e,n,r,i){var o=t.dom.getRoot();return e!==o&&(e=t.dom.getParent(e,(function(e){return!!xg(t,e,n)||e.parentNode===o||!!Sg(t,e,n,r,!0)})),!!Sg(t,e,n,r,i))},_g=function(t,e,n){return!!bg(e,n.inline)||!!bg(e,n.block)||(n.selector?1===e.nodeType&&t.is(e,n.selector):void 0)},Eg=function(t,e,n,r,i,o){var a=n[r];if(b(n.onmatch))return n.onmatch(e,n,r);if(a)if(v(a.length)){for(var s in a)if(yt(a,s)){var u="attributes"===r?t.getAttrib(e,s):Xl(t,e,s),c=Wl(a[s],o),l=m(u)||Gt(u);if(l&&m(c))continue;if(i&&l&&!n.exact)return!1;if((!i||n.exact)&&!bg(u,Yl(t,c,s)))return!1}}else for(var f=0;f<a.length;f++)if("attributes"===r?t.getAttrib(e,a[f]):Xl(t,e,a[f]))return!0;return!0},Sg=function(t,e,n,r,i){var o=t.formatter.get(n),a=t.dom;if(o&&e)for(var s=0;s<o.length;s++){var u=o[s];if(_g(t.dom,e,u)&&Eg(a,e,u,"attributes",i,r)&&Eg(a,e,u,"styles",i,r)){var c=u.classes;if(c)for(var l=0;l<c.length;l++)if(!t.dom.hasClass(e,Wl(c[l],r)))return;return u}}},Cg=function(t,e,n,r,i){if(r)return wg(t,r,e,n,i);if(r=t.selection.getNode(),wg(t,r,e,n,i))return!0;var o=t.selection.getStart();return!(o===r||!wg(t,o,e,n,i))},kg=function(t,e,n){return q(n,(function(n,r){var i=function(t,e){return G(t.formatter.get(e),(function(t){var e=function(t){return t.length>1&&"%"===t.charAt(0)};return G(["styles","attributes"],(function(n){return mt(t,n).exists((function(t){var n=h(t)?t:function(t,e){var n=[];return ft(t,(function(t,r){n.push(e(t,r))})),n}(t,C);return G(n,e)}))}))}))}(t,r);return t.formatter.matchNode(e,r,{},i)?n.concat([r]):n}),[])},Mg=pi,Og="_mce_caret",Tg=function(t){return function(t){for(var e=[];t;){if(3===t.nodeType&&t.nodeValue!==Mg||t.childNodes.length>1)return[];1===t.nodeType&&e.push(t),t=t.firstChild}return e}(t).length>0},Ag=function(t){if(t){var e=new ei(t,t);for(t=e.current();t;t=e.next())if(Fn(t))return t}return null},Ng=function(t){var e=Ae("span");return tr(e,{id:Og,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&pn(e,Ne(Mg)),e},Ig=function(t,e,n){void 0===n&&(n=!0);var r=t.dom,i=t.selection;if(Tg(e))Np(t,!1,Ie(e),n);else{var o=i.getRng(),a=r.getParent(e,r.isBlock),s=o.startContainer,u=o.startOffset,c=o.endContainer,l=o.endOffset,f=function(t){var e=Ag(t);return e&&e.nodeValue.charAt(0)===Mg&&e.deleteData(0,1),e}(e);r.remove(e,!0),s===f&&u>0&&o.setStart(f,u-1),c===f&&l>0&&o.setEnd(f,l-1),a&&r.isEmpty(a)&&Uh(Ie(a)),i.setRng(o)}},Pg=function(t,e,n){void 0===n&&(n=!0);var r=t.dom,i=t.selection;if(e)Ig(t,e,n);else if(!(e=Cl(t.getBody(),i.getStart())))for(;e=r.get(Og);)Ig(t,e,!1)},Dg=function(t,e){return t.appendChild(e),e},Lg=function(t,e){var n=X(t,(function(t,e){return Dg(t,e.cloneNode(!1))}),e);return Dg(n,n.ownerDocument.createTextNode(Mg))},Rg=function(t,e,n,r){var i,o,u,c=t.dom,l=t.selection,f=[],d=l.getRng(),h=d.startContainer,p=d.startOffset;for(o=h,3===h.nodeType&&(p!==h.nodeValue.length&&(i=!0),o=o.parentNode);o;){if(Sg(t,o,e,n,r)){u=o;break}o.nextSibling&&(i=!0),f.push(o),o=o.parentNode}if(u)if(i){var g=l.getBookmark();d.collapse(!0);var v=vf(t,d,t.formatter.get(e),!0);v=nd(v),t.formatter.remove(e,n,v,r),l.moveToBookmark(g)}else{var m=Cl(t.getBody(),u),y=Ng(!1).dom;!function(t,e,n){var r,i,o,a=t.dom,s=a.getParent(n,M(Gl,t));s&&a.isEmpty(s)?n.parentNode.replaceChild(e,n):(r=Ie(n),i=Ts(r,"br"),o=Y(function(t){for(var e=[],n=t.dom;n;)e.push(Ie(n)),n=n.lastChild;return e}(r).slice(-1),ai),i.length===o.length&&U(o,mn),a.isEmpty(n)?n.parentNode.replaceChild(e,n):a.insertAfter(e,n))}(t,y,null!==m?m:u);var b=function(t,e,n,r,i,o){var u=t.formatter,c=t.dom,l=Y(ct(u.get()),(function(t){return t!==r&&!Lt(t,"removeformat")})),f=kg(t,n,l);if(Y(f,(function(e){return!function(t,e,n){var r=["inline","block","selector","attributes","styles","classes"],i=function(t){return vt(t,(function(t,e){return G(r,(function(t){return t===e}))}))};return G(t.formatter.get(e),(function(e){var r=i(e);return G(t.formatter.get(n),(function(t){var e=i(t);return function(t,e,n){return void 0===n&&(n=s),a(n).eq(t,e)}(r,e)}))}))}(t,e,r)})).length>0){var d=n.cloneNode(!1);return c.add(e,d),u.remove(r,i,d,o),c.remove(d),R.some(d)}return R.none()}(t,y,u,e,n,r),x=Lg(f.concat(b.toArray()),y);Ig(t,m,!1),l.setCursorLocation(x,1),c.isEmpty(u)&&c.remove(u)}},jg=function(t,e){var n=t.schema.getTextInlineElements();return yt(n,Be(e))&&!Sl(e.dom)&&!Ln(e.dom)},Bg={},Fg=Et,zg=wt;!function(t,e){Bg[t]||(Bg[t]=[]),Bg[t].push((function(t){var e,n=t.selection.getRng(),r=In(["pre"]);n.collapsed||(e=t.selection.getSelectedBlocks(),zg(Fg(Fg(e,r),(function(t){return r(t.previousSibling)&&-1!==St(e,t.previousSibling)})),(function(t){var e,n;e=t.previousSibling,rs(n=t).remove(),rs(e).append("<br><br>").append(n.childNodes)})))}))}("pre");var $g,Gg,Vg=Me.each,Ug=function(t){return Nn(t)&&!Ll(t)&&!Sl(t)&&!Ln(t)},Wg=function(t,e){for(var n=t;n;n=n[e]){if(Fn(n)&&$t(n.data))return t;if(Nn(n)&&!Ll(n))return n}return t},Hg=function(t,e,n){var r=wh(t);if(e&&n&&(e=Wg(e,"previousSibling"),n=Wg(n,"nextSibling"),r.compare(e,n))){for(var i=e.nextSibling;i&&i!==n;){var o=i;i=i.nextSibling,e.appendChild(o)}return t.remove(n),Me.each(Me.grep(n.childNodes),(function(t){e.appendChild(t)})),e}return n},Yg=function(t,e,n,r){if(r&&!1!==e.merge_siblings){var i=Hg(t,$l(r),r);Hg(t,i,$l(i,!0))}},Xg=function(t,e,n){Vg(t.childNodes,(function(t){Ug(t)&&(e(t)&&n(t),t.hasChildNodes()&&Xg(t,e,n))}))},qg=function(t,e){return function(n){return!(!n||!Xl(t,n,e))}},Zg=function(t,e,n){return function(r){t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),function(t,e){"SPAN"===e.nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)}(t,r)}},Kg=_r([{keep:[]},{rename:["name"]},{removed:[]}]),Jg=/^(src|href|style)$/,Qg=Me.each,tv=Hl,ev=function(t,e,n){return t.isChildOf(e,n)&&e!==n&&!t.isBlock(n)},nv=function(t,e,n){var r=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"];if(Nn(r)){var o=r.childNodes.length-1;!n&&i&&i--,r=r.childNodes[i>o?o:i]}return Fn(r)&&n&&i>=r.nodeValue.length&&(r=new ei(r,t.getBody()).next()||r),Fn(r)&&!n&&0===i&&(r=new ei(r,t.getBody()).prev()||r),r},rv=function(t,e){var n=e?"firstChild":"lastChild";if(function(t){return/^(TR|TH|TD)$/.test(t.nodeName)}(t)&&t[n]){var r=t[n];return"TR"===t.nodeName&&r[n]||r}return t},iv=function(t,e,n,r){var i=t.create(n,r);return e.parentNode.insertBefore(i,e),i.appendChild(e),i},ov=function(t,e,n,r,i){var o=Ie(e),a=Ie(t.create(r,i)),s=n?Je(o):Ke(o);return gn(a,s),n?(fn(o,a),hn(a,o)):(dn(o,a),pn(a,o)),a.dom},av=function(t,e,n,r){var i=$l(e,n,r);return m(i)||"BR"===i.nodeName||t.isBlock(i)},sv=function(t,e,n,r,i){var o,a=t.dom;if(!function(t,e,n){return!(!Ql(n)||!tv(e,n.inline))||!(!Kl(n)||!tv(e,n.block))||(Jl(n)?Nn(e)&&t.is(e,n.selector):void 0)}(a,r,e)&&!function(t,e){return e.links&&"A"===t.nodeName}(r,e))return Kg.keep();var s=r;if(Ql(e)&&"all"===e.remove&&h(e.preserve_attributes)){var u=Y(a.getAttribs(s),(function(t){return $(e.preserve_attributes,t.name.toLowerCase())}));if(a.removeAllAttribs(s),U(u,(function(t){return a.setAttrib(s,t.name,t.value)})),u.length>0)return Kg.rename("span")}if("all"!==e.remove){Qg(e.styles,(function(t,r){t=Yl(a,Wl(t,n),r+""),x(r)&&(r=t,i=null),(e.remove_similar||!i||tv(Xl(a,i,r),t))&&a.setStyle(s,r,""),o=!0})),o&&""===a.getAttrib(s,"style")&&(s.removeAttribute("style"),s.removeAttribute("data-mce-style")),Qg(e.attributes,(function(t,r){var o;if(t=Wl(t,n),x(r)&&(r=t,i=null),e.remove_similar||!i||tv(a.getAttrib(i,r),t)){if("class"===r&&(t=a.getAttrib(s,r))&&(o="",U(t.split(/\s+/),(function(t){/mce\-\w+/.test(t)&&(o+=(o?" ":"")+t)})),o))return void a.setAttrib(s,r,o);if(Jg.test(r)&&s.removeAttribute("data-mce-"+r),"style"===r&&In(["li"])(s)&&"none"===a.getStyle(s,"list-style-type"))return s.removeAttribute(r),void a.setStyle(s,"list-style-type","none");"class"===r&&s.removeAttribute("className"),s.removeAttribute(r)}})),Qg(e.classes,(function(t){t=Wl(t,n),i&&!a.hasClass(i,t)||a.removeClass(s,t)}));for(var c=a.getAttribs(s),l=0;l<c.length;l++){var f=c[l].nodeName;if(0!==f.indexOf("_")&&0!==f.indexOf("data-"))return Kg.keep()}}return"none"!==e.remove?(function(t,e,n){var r,i=e.parentNode,o=t.dom,a=Vu(t);Kl(n)&&(a?i===o.getRoot()&&(n.list_block&&tv(e,n.list_block)||U(st(e.childNodes),(function(e){Vl(t,a,e.nodeName.toLowerCase())?r?r.appendChild(e):(r=iv(o,e,a),o.setAttribs(r,t.settings.forced_root_block_attrs)):r=null}))):o.isBlock(e)&&!o.isBlock(i)&&(av(o,e,!1)||av(o,e.firstChild,!0,!0)||e.insertBefore(o.create("br"),e.firstChild),av(o,e,!0)||av(o,e.lastChild,!1,!0)||e.appendChild(o.create("br")))),function(t){return Jl(t)&&Ql(t)&&qn(mt(t,"mixed"),!0)}(n)&&!tv(n.inline,e)||o.remove(e,!0)}(t,s,e),Kg.removed()):Kg.keep()},uv=function(t,e,n,r,i){return sv(t,e,n,r,i).fold(N,(function(e){return t.dom.rename(r,e),!0}),I)},cv=function(t,e,n,r){return sv(t,e,n,r,r).fold(S(r),(function(e){return t.dom.createFragment().appendChild(r),t.dom.rename(r,e)}),S(null))},lv=function(t,e,n,r,i){var o=t.formatter.get(e),a=o[0],s=!0,u=t.dom,c=t.selection,l=function(r){var s=function(t,e,n,r,i){var o;return U(Zl(t.dom,e.parentNode).reverse(),(function(e){if(!o&&"_start"!==e.id&&"_end"!==e.id){var a=Sg(t,e,n,r,i);a&&!1!==a.split&&(o=e)}})),o}(t,r,e,n,i);return function(t,e,n,r,i,o,a,s){var u,c,l,f=t.dom;if(n){for(var d=n.parentNode,h=r.parentNode;h&&h!==d;h=h.parentNode){u=f.clone(h,!1);for(var p=0;p<e.length&&null!==(u=cv(t,e[p],s,u));p++);u&&(c&&u.appendChild(c),l||(l=u),c=u)}a.mixed&&f.isBlock(n)||(r=f.split(n,r)),c&&(i.parentNode.insertBefore(c,i),l.appendChild(i),Ql(a)&&Yg(f,a,0,c))}return r}(t,o,s,r,r,0,a,n)},f=function(e){return G(o,(function(r){return uv(t,r,n,e,e)}))},d=function(e){var n=!0,r=!1;Nn(e)&&u.getContentEditable(e)&&(n=s,s="true"===u.getContentEditable(e),r=!0);var i=st(e.childNodes);if(s&&!r){var c=f(e)||G(o,(function(t){return _g(u,e,t)})),l=e.parentNode;!c&&y(l)&&tf(a)&&f(l)}if(a.deep&&i.length){for(var h=0;h<i.length;h++)d(i[h]);r&&(s=n)}U(["underline","line-through","overline"],(function(n){Nn(e)&&t.dom.getStyle(e,"text-decoration")===n&&e.parentNode&&ql(u,e.parentNode)===n&&uv(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},null,e)}))},h=function(t){var e=u.get(t?"_start":"_end"),n=e[t?"firstChild":"lastChild"];return function(t){return Ll(t)&&Nn(t)&&("_start"===t.id||"_end"===t.id)}(n)&&(n=n[t?"firstChild":"lastChild"]),Fn(n)&&0===n.data.length&&(n=t?e.previousSibling||e.nextSibling:e.nextSibling||e.previousSibling),u.remove(e,!0),n},p=function(e){var n,r,i=vf(t,e,o,e.collapsed);if(a.split){if(i=nd(i),(n=nv(t,i,!0))!==(r=nv(t,i))){if(n=rv(n,!0),r=rv(r,!1),ev(u,n,r)){var s=R.from(n.firstChild).getOr(n);return l(ov(u,s,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void h(!0)}if(ev(u,r,n))return s=R.from(r.lastChild).getOr(r),l(ov(u,s,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void h(!1);n=iv(u,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=iv(u,r,"span",{id:"_end","data-mce-type":"bookmark"});var c=u.createRng();c.setStartAfter(n),c.setEndBefore(r),mf(u,c,(function(t){U(t,(function(t){Ll(t)||Ll(t.parentNode)||l(t)}))})),l(n),l(r),n=h(!0),r=h()}else n=r=l(n);i.startContainer=n.parentNode?n.parentNode:n,i.startOffset=u.nodeIndex(n),i.endContainer=r.parentNode?r.parentNode:r,i.endOffset=u.nodeIndex(r)+1}mf(u,i,(function(t){U(t,d)}))};if(r){if(Fl(r)){var g=u.createRng();g.setStartBefore(r),g.setEndAfter(r),p(g)}else p(r);Ff(t,e,r,n)}else if("false"!==u.getContentEditable(c.getNode()))c.isCollapsed()&&Ql(a)&&!xf(t).length?Rg(t,e,n,i):(Of(c,!0,(function(){Mf(t,p)})),Ql(a)&&Cg(t,e,n,c.getStart())&&zl(u,c,c.getRng()),t.nodeChanged()),Ff(t,e,r,n);else{r=c.getNode();for(var v=0;v<o.length&&(!o[v].ceFalseOverride||!uv(t,o[v],n,r,r));v++);Ff(t,e,r,n)}},fv=Me.each,dv=Me.each,hv=function(t){return Nn(t)&&!Ll(t)&&!Sl(t)&&!Ln(t)},pv=function(t,e,n,r){var i=t.formatter.get(e),o=i[0],a=!r&&t.selection.isCollapsed(),s=t.dom,u=t.selection,c=function(t,e){if(void 0===e&&(e=o),b(e.onformat)&&e.onformat(t,e,n,r),dv(e.styles,(function(e,r){s.setStyle(t,r,Wl(e,n))})),e.styles){var i=s.getAttrib(t,"style");i&&s.setAttrib(t,"data-mce-style",i)}dv(e.attributes,(function(e,r){s.setAttrib(t,r,Wl(e,n))})),dv(e.classes,(function(e){e=Wl(e,n),s.hasClass(t,e)||s.addClass(t,e)}))},l=function(t,e){var n=!1;return dv(t,(function(t){return!!Jl(t)&&(y(t.collapsed)&&t.collapsed!==a?void 0:s.is(e,t.selector)&&!Sl(e)?(c(e,t),n=!0,!1):void 0)})),n},d=function(t){if(f(t)){var e=s.create(t);return c(e),e}return null},h=function(r,a,s){var u=[],f=!0,h=o.inline||o.block,p=d(h);mf(r,a,(function(a){var d,g=function(a){var v=!1,m=f,b=a.nodeName.toLowerCase(),x=a.parentNode,w=x.nodeName.toLowerCase();if(Nn(a)&&r.getContentEditable(a)&&(m=f,f="true"===r.getContentEditable(a),v=!0),Vn(a)&&!function(t,e,n,r){if(function(t){return t.getParam("format_empty_lines",!1,"boolean")}(t)&&Ql(e)){var i=xo(t.schema),o=vg(Ie(n),(function(t){return Sl(t.dom)}));return bt(i,r)&&Hi(Ie(n.parentNode),!1)&&!o}return!1}(t,o,a,w))return d=null,void(Kl(o)&&r.remove(a));if(Kl(o)&&o.wrapper&&Sg(t,a,e,n))d=null;else{if(f&&!v&&Kl(o)&&!o.wrapper&&Gl(t,b)&&Vl(t,w,h)){var _=r.rename(a,h);return c(_),u.push(_),void(d=null)}if(Jl(o)){var E=l(i,a);if(!E&&y(x)&&tf(o)&&(E=l(i,x)),!Ql(o)||E)return void(d=null)}!f||v||!Vl(t,h,b)||!Vl(t,w,h)||!s&&Fn(a)&&gi(a.data)||Sl(a)||Ql(o)&&r.isBlock(a)?(d=null,U(st(a.childNodes),g),v&&(f=m),d=null):(d||(d=r.clone(p,!1),a.parentNode.insertBefore(d,a),u.push(d)),d.appendChild(a))}};U(a,g)})),!0===o.links&&U(u,(function(t){var e=function(t){"A"===t.nodeName&&c(t,o),U(st(t.childNodes),e)};e(t)})),U(u,(function(a){var s=function(t){var e=0;return U(t.childNodes,(function(t){(function(t){return y(t)&&Fn(t)&&0===t.length})(t)||Ll(t)||e++})),e}(a);!(u.length>1)&&r.isBlock(a)||0!==s?(Ql(o)||Kl(o)&&o.wrapper)&&(o.exact||1!==s||(a=function(t){var e=K(t.childNodes,hv).filter((function(t){return _g(r,t,o)}));return e.map((function(e){var n=r.clone(e,!1);return c(n),r.replace(n,t,!0),r.remove(e,!0),n})).getOr(t)}(a)),function(t,e,n,r){fv(e,(function(e){Ql(e)&&fv(t.dom.select(e.inline,r),(function(r){Ug(r)&&uv(t,e,n,r,e.exact?r:null)})),function(t,e,n){if(e.clear_child_styles){var r=e.links?"*:not(a)":"*";Vg(t.select(r,n),(function(n){Ug(n)&&Vg(e.styles,(function(e,r){t.setStyle(n,r,"")}))}))}}(t.dom,e,r)}))}(t,i,n,a),function(t,e,n,r,i){Sg(t,i.parentNode,n,r)&&uv(t,e,r,i)||e.merge_with_parents&&t.dom.getParent(i.parentNode,(function(o){if(Sg(t,o,n,r))return uv(t,e,r,i),!0}))}(t,o,e,n,a),function(t,e,n,r){e.styles&&e.styles.backgroundColor&&Xg(r,qg(t,"fontSize"),Zg(t,"backgroundColor",Wl(e.styles.backgroundColor,n)))}(r,o,n,a),function(t,e,n,r){var i=function(e){if(1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType){var n=ql(t,e.parentNode);t.getStyle(e,"color")&&n?t.setStyle(e,"text-decoration",n):t.getStyle(e,"text-decoration")===n&&t.setStyle(e,"text-decoration",null)}};e.styles&&(e.styles.color||e.styles.textDecoration)&&(Me.walk(r,i,"childNodes"),i(r))}(r,o,0,a),function(t,e,n,r){!Ql(e)||"sub"!==e.inline&&"sup"!==e.inline||(Xg(r,qg(t,"fontSize"),Zg(t,"fontSize","")),t.remove(t.select("sup"===e.inline?"sub":"sup",r),!0))}(r,o,0,a),Yg(r,o,0,a)):r.remove(a,!0)}))};if("false"!==s.getContentEditable(u.getNode())){if(o){if(r)if(Fl(r)){if(!l(i,r)){var p=s.createRng();p.setStartBefore(r),p.setEndAfter(r),h(s,vf(t,p,i),!0)}}else h(s,r,!0);else if(a&&Ql(o)&&!xf(t).length)!function(t,e,n){var r,i,o=t.selection,a=o.getRng(),s=a.startOffset,u=a.startContainer.nodeValue;(r=Cl(t.getBody(),o.getStart()))&&(i=Ag(r));var c,l,f=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(u&&s>0&&s<u.length&&f.test(u.charAt(s))&&f.test(u.charAt(s-1))){var d=o.getBookmark();a.collapse(!0);var h=vf(t,a,t.formatter.get(e));h=nd(h),t.formatter.apply(e,n,h),o.moveToBookmark(d)}else r&&i.nodeValue===Mg||(c=t.getDoc(),l=Ng(!0).dom,i=(r=c.importNode(l,!0)).firstChild,a.insertNode(r),s=1),t.formatter.apply(e,n,r),o.setCursorLocation(i,s)}(t,e,n);else{var g=u.getNode(),v=i[0];t.settings.forced_root_block||!v.defaultBlock||s.getParent(g,s.isBlock)||pv(t,v.defaultBlock),u.setRng(ig(u.getRng())),Of(u,!0,(function(){Mf(t,(function(e,n){var r=n?e:vf(t,e,i);h(s,r,!1)}))})),zl(s,u,u.getRng()),t.nodeChanged()}!function(t,e){zg(Bg[t],(function(t){t(e)}))}(e,t)}Bf(t,e,r,n)}else{r=u.getNode();for(var m=0,x=i.length;m<x;m++){var w=i[m];if(w.ceFalseOverride&&Jl(w)&&s.is(r,w.selector)){c(r,w);break}}Bf(t,e,r,n)}},gv=function(t){return yt(t,"vars")},vv=function(t){return t.selection.getStart()},mv=function(t,e,n,r,i){return Z(e,(function(e){var o=t.formatter.matchNode(e,n,null!=i?i:{},r);return!v(o)}),(function(e){return!!xg(t,e,n)||!r&&y(t.formatter.matchNode(e,n,i,!0))}))},yv=function(t,e){var n=null!=e?e:vv(t);return Y(Zl(t.dom,n),(function(t){return Nn(t)&&!Ln(t)}))},bv=function(t,e,n){var r=yv(t,e);ft(n,(function(n,i){var o=function(n){var o=mv(t,r,i,n.similar,gv(n)?n.vars:void 0),a=o.isSome();if(n.state.get()!==a){n.state.set(a);var s=o.getOr(e);gv(n)?n.callback(a,{node:s,format:i,parents:r}):U(n.callbacks,(function(t){return t(a,{node:s,format:i,parents:r})}))}};U([n.withSimilar,n.withoutSimilar],o),U(n.withVars,o)}))},xv=function(t,e){var n=(e||document).createDocumentFragment();return U(t,(function(t){n.appendChild(t.dom)})),Ie(n)},wv=function(t,e,n){return{element:t,width:e,rows:n}},_v=function(t,e){return{element:t,cells:e}},Ev=function(t,e){return{x:t,y:e}},Sv=function(t,e){var n=parseInt(er(t,e),10);return isNaN(n)?1:n},Cv=function(t,e,n){var r=t.rows;return!!(r[n]?r[n].cells:[])[e]},kv=function(t){return q(t,(function(t,e){return e.cells.length>t?e.cells.length:t}),0)},Mv=function(t,e){for(var n=t.rows,r=0;r<n.length;r++)for(var i=n[r].cells,o=0;o<i.length;o++)if(Re(i[o],e))return R.some(Ev(o,r));return R.none()},Ov=function(t,e,n,r,i){for(var o=[],a=t.rows,s=n;s<=i;s++){var u=a[s].cells,c=e<r?u.slice(e,r+1):u.slice(r,e+1);o.push(_v(a[s].element,c))}return o},Tv=function(t){return function(t,e){var n=Fs(t.element),r=Ae("tbody");return gn(r,e),pn(n,r),n}(t,function(t){return V(t.rows,(function(t){var e=V(t.cells,(function(t){var e=zs(t);return rr(e,"colspan"),rr(e,"rowspan"),e})),n=Fs(t.element);return gn(n,e),n}))}(t))},Av=function(t,e){return K(t,(function(t){return"li"===Be(t)&&Sf(t,e)})).fold(S([]),(function(e){return function(t){return K(t,(function(t){return"ul"===Be(t)||"ol"===Be(t)}))}(t).map((function(t){var e=Ae(Be(t)),n=vt(sr(t),(function(t,e){return Rt(e,"list-style")}));return function(t,e){var n=t.dom;ft(e,(function(t,e){!function(t,e,n){if(!f(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Kn(t)&&t.style.setProperty(e,n)}(n,e,t)}))}(e,n),[Ae("li"),e]})).getOr([])}))},Nv=function(){return xv([])},Iv=function(t,e){return n=Ie(e.cloneContents()),r=function(t,e){var n=Ie(e.commonAncestorContainer),r=Yh(n,t),i=Y(r,(function(t){return oi(t)||ri(t)})),o=Av(r,e),a=i.concat(o.length?o:function(t){return ci(t)?Xe(t).filter(ui).fold(S([]),(function(e){return[t,e]})):ui(t)?[t]:[]}(n));return V(a,Fs)}(t,e),i=q(r,(function(t,e){return pn(e,t),e}),n),r.length>0?xv([i]):i;var n,r,i},Pv=function(t,e){return(n=t,r=e[0],Wr(r,"table",M(Re,n))).bind((function(t){var n,r,i,o=e[0],a=e[e.length-1],s=function(t){var e=wv(Fs(t),0,[]);return U(Ts(t,"tr"),(function(t,n){U(Ts(t,"td,th"),(function(r,i){!function(t,e,n,r,i){for(var o=Sv(i,"rowspan"),a=Sv(i,"colspan"),s=t.rows,u=n;u<n+o;u++){s[u]||(s[u]=_v(zs(r),[]));for(var c=e;c<e+a;c++)s[u].cells[c]=u===n&&c===e?i:Fs(i)}}(e,function(t,e,n){for(;Cv(t,e,n);)e++;return e}(e,i,n),n,t,r)}))})),wv(e.element,kv(e.rows),e.rows)}(t);return(n=s,r=o,i=a,Mv(n,r).bind((function(t){return Mv(n,i).map((function(e){return function(t,e,n){var r=e.x,i=e.y,o=n.x,a=n.y,s=i<a?Ov(t,r,i,o,a):Ov(t,r,a,o,i);return wv(t.element,kv(s),s)}(n,t,e)}))}))).map((function(t){return xv([Tv(t)])}))})).getOrThunk(Nv);var n,r},Dv=function(t,e){return e>=0&&e<t.length&&jl(t.charAt(e))},Lv=function(t,e){var n=vi(t.innerText);return e?function(t){return t.replace(/^[ \f\n\r\t\v]+/,"")}(n):n},Rv=function(t,e,n){void 0===n&&(n={});var r=function(t,e){return Ot(Ot({},t),{format:e,get:!0,selection:!0})}(n,e),i=t.fire("BeforeGetContent",r);if(i.isDefaultPrevented())return t.fire("GetContent",i),i.content;if("text"===i.format)return function(t){return R.from(t.selection.getRng()).map((function(e){var n=R.from(t.dom.getParent(e.commonAncestorContainer,t.dom.isBlock)),r=t.getBody(),i=function(t){return t.map((function(t){return t.nodeName})).getOr("div").toLowerCase()}(n),o=_e.browser.isIE()&&"pre"!==i,a=t.dom.add(r,i,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),s=Lv(a,o),u=vi(a.textContent);if(t.dom.remove(a),Dv(u,0)||Dv(u,u.length-1)){var c=n.getOr(r),l=Lv(c,o),f=l.indexOf(s);return-1===f?s:(Dv(l,f-1)?" ":"")+s+(Dv(l,f+s.length)?" ":"")}return s})).getOr("")}(t);i.getInner=!0;var o=function(t,e){var n=t.selection.getRng(),r=t.dom.create("body"),i=t.selection.getSel(),o=Qd(t,yf(i)),a=e.contextual?function(t,e){var n=bf(e,t);return n.length>0?Pv(t,n):function(t,e){return e.length>0&&e[0].collapsed?Nv():Iv(t,e[0])}(t,e)}(Ie(t.getBody()),o).dom:n.cloneContents();return a&&r.appendChild(a),t.selection.serializer.serialize(r,e)}(t,i);return"tree"===i.format?o:(i.content=t.selection.isCollapsed()?"":o,t.fire("GetContent",i),i.content)},jv=function(t){return Nn(t)?t.outerHTML:Fn(t)?co.encodeRaw(t.data,!1):zn(t)?"\x3c!--"+t.data+"--\x3e":""},Bv=function(t,e){var n,r,i,o,a,s,u,c,l,f=V(st(e.childNodes),jv);return function(t,e){var n=0;U(t,(function(t){0===t[0]?n++:1===t[0]?(function(t,e,n){var r=function(t){var e,n=document.createElement("div"),r=document.createDocumentFragment();for(t&&(n.innerHTML=t);e=n.firstChild;)r.appendChild(e);return r}(e);if(t.hasChildNodes()&&n<t.childNodes.length){var i=t.childNodes[n];i.parentNode.insertBefore(r,i)}else t.appendChild(r)}(e,t[1],n),n++):2===t[0]&&function(t,e){if(t.hasChildNodes()&&e<t.childNodes.length){var n=t.childNodes[e];n.parentNode.removeChild(n)}}(e,n)}))}((r=t,i=(n=f).length+r.length+2,o=new Array(i),a=new Array(i),s=function(t,e,i,o,a){var u=c(t,e,i,o);if(null===u||u.start===e&&u.diag===e-o||u.end===t&&u.diag===t-i)for(var l=t,f=i;l<e||f<o;)l<e&&f<o&&n[l]===r[f]?(a.push([0,n[l]]),++l,++f):e-t>o-i?(a.push([2,n[l]]),++l):(a.push([1,r[f]]),++f);else{s(t,u.start,i,u.start-u.diag,a);for(var d=u.start;d<u.end;++d)a.push([0,n[d]]);s(u.end,e,u.end-u.diag,o,a)}},u=function(t,e,i,o){for(var a=t;a-e<o&&a<i&&n[a]===r[a-e];)++a;return function(t,e,n){return{start:t,end:e,diag:n}}(t,a,e)},c=function(t,e,i,s){var c=e-t,l=s-i;if(0===c||0===l)return null;var f,d,h,p,g,v=c-l,m=l+c,y=(m%2==0?m:m+1)/2;for(o[1+y]=t,a[1+y]=e+1,f=0;f<=y;++f){for(d=-f;d<=f;d+=2){for(h=d+y,d===-f||d!==f&&o[h-1]<o[h+1]?o[h]=o[h+1]:o[h]=o[h-1]+1,g=(p=o[h])-t+i-d;p<e&&g<s&&n[p]===r[g];)o[h]=++p,++g;if(v%2!=0&&v-f<=d&&d<=v+f&&a[h-v]<=o[h])return u(a[h-v],d+t-i,e,s)}for(d=v-f;d<=v+f;d+=2){for(h=d+y-v,d===v-f||d!==v+f&&a[h+1]<=a[h-1]?a[h]=a[h+1]-1:a[h]=a[h-1],g=(p=a[h]-1)-t+i-d;p>=t&&g>=i&&n[p]===r[g];)a[h]=p--,g--;if(v%2==0&&-f<=d&&d<=f&&a[h]<=o[h+v])return u(a[h],d+t-i,e,s)}}},l=[],s(0,n.length,0,r.length,l),l),e),e},Fv=At((function(){return document.implementation.createHTMLDocument("undo")})),zv=function(t){var e,n=(e=t.getBody(),Y(V(st(e.childNodes),jv),(function(t){return t.length>0}))),r=Q(n,(function(e){var n=yh(t.serializer,e);return n.length>0?[n]:[]})),i=r.join("");return-1!==i.indexOf("</iframe>")?function(t){return{type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}}(r):function(t){return{type:"complete",fragments:null,content:t,bookmark:null,beforeBookmark:null}}(i)},$v=function(t,e,n){var r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?Bv(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!y(r)||!kl(r)||!r.isFakeCaret}),t.selection.moveToBookmark(r)},Gv=function(t){return"fragmented"===t.type?t.fragments.join(""):t.content},Vv=function(t){var e=Ae("body",Fv());return js(e,Gv(t)),U(Ts(e,"*[data-mce-bogus]"),yn),e.dom.innerHTML},Uv=function(t,e){return!(!t||!e)&&(!!function(t,e){return Gv(t)===Gv(e)}(t,e)||function(t,e){return Vv(t)===Vv(e)}(t,e))},Wv=function(t){return 0===t.get()},Hv=function(t,e,n){Wv(n)&&(t.typing=e)},Yv=function(t,e){t.typing&&(Hv(t,!1,e),t.add())},Xv=function(t){return{undoManager:{beforeChange:function(e,n){return function(t,e,n){Wv(e)&&n.set(Fu(t.selection))}(t,e,n)},add:function(e,n,r,i,o,a){return function(t,e,n,r,i,o,a){var s=zv(t);if(o=o||{},o=Me.extend(o,s),!1===Wv(r)||t.removed)return null;var u=e.data[n.get()];if(t.fire("BeforeAddUndo",{level:o,lastLevel:u,originalEvent:a}).isDefaultPrevented())return null;if(u&&Uv(u,o))return null;e.data[n.get()]&&i.get().each((function(t){e.data[n.get()].beforeBookmark=t}));var c=function(t){return t.getParam("custom_undo_redo_levels",0,"number")}(t);if(c&&e.data.length>c){for(var l=0;l<e.data.length-1;l++)e.data[l]=e.data[l+1];e.data.length--,n.set(e.data.length)}o.bookmark=Fu(t.selection),n.get()<e.data.length-1&&(e.data.length=n.get()+1),e.data.push(o),n.set(e.data.length-1);var f={level:o,lastLevel:u,originalEvent:a};return n.get()>0?(t.setDirty(!0),t.fire("AddUndo",f),t.fire("change",f)):t.fire("AddUndo",f),o}(t,e,n,r,i,o,a)},undo:function(e,n,r){return function(t,e,n,r){var i;return e.typing&&(e.add(),e.typing=!1,Hv(e,!1,n)),r.get()>0&&(r.set(r.get()-1),i=e.data[r.get()],$v(t,i,!0),t.setDirty(!0),t.fire("Undo",{level:i})),i}(t,e,n,r)},redo:function(e,n){return function(t,e,n){var r;return e.get()<n.length-1&&(e.set(e.get()+1),r=n[e.get()],$v(t,r,!1),t.setDirty(!0),t.fire("Redo",{level:r})),r}(t,e,n)},clear:function(e,n){return function(t,e,n){e.data=[],n.set(0),e.typing=!1,t.fire("ClearUndos")}(t,e,n)},reset:function(t){return function(t){t.clear(),t.add()}(t)},hasUndo:function(e,n){return function(t,e,n){return n.get()>0||e.typing&&e.data[0]&&!Uv(zv(t),e.data[0])}(t,e,n)},hasRedo:function(t,e){return function(t,e){return e.get()<t.data.length-1&&!t.typing}(t,e)},transact:function(t,e,n){return function(t,e,n){return Yv(t,e),t.beforeChange(),t.ignore(n),t.add()}(t,e,n)},ignore:function(t,e){return function(t,e){try{t.set(t.get()+1),e()}finally{t.set(t.get()-1)}}(t,e)},extra:function(e,n,r,i){return function(t,e,n,r,i){if(e.transact(r)){var o=e.data[n.get()].bookmark,a=e.data[n.get()-1];$v(t,a,!0),e.transact(i)&&(e.data[n.get()-1].beforeBookmark=o)}}(t,e,n,r,i)}},formatter:{match:function(e,n,r,i){return Cg(t,e,n,r,i)},matchAll:function(e,n){return function(t,e,n){var r=[],i={},o=t.selection.getStart();return t.dom.getParent(o,(function(o){for(var a=0;a<e.length;a++){var s=e[a];!i[s]&&Sg(t,o,s,n)&&(i[s]=!0,r.push(s))}}),t.dom.getRoot()),r}(t,e,n)},matchNode:function(e,n,r,i){return Sg(t,e,n,r,i)},canApply:function(e){return function(t,e){var n=t.formatter.get(e),r=t.dom;if(n)for(var i=t.selection.getStart(),o=Zl(r,i),a=n.length-1;a>=0;a--){var s=n[a];if(!Jl(s)||y(s.defaultBlock))return!0;for(var u=o.length-1;u>=0;u--)if(r.is(o[u],s.selector))return!0}return!1}(t,e)},closest:function(e){return function(t,e){var n=function(e){return Re(e,Ie(t.getBody()))};return R.from(t.selection.getStart(!0)).bind((function(r){return yg(Ie(r),(function(n){return ut(e,(function(e){return function(e,n){return Sg(t,e.dom,n)?R.some(n):R.none()}(n,e)}))}),n)})).getOrNull()}(t,e)},apply:function(e,n,r){return pv(t,e,n,r)},remove:function(e,n,r,i){return lv(t,e,n,r,i)},toggle:function(e,n,r){return function(t,e,n,r){var i=t.formatter.get(e);!Cg(t,e,n,r)||"toggle"in i[0]&&!i[0].toggle?pv(t,e,n,r):lv(t,e,n,r)}(t,e,n,r)},formatChanged:function(e,n,r,i,o){return function(t,e,n,r,i,o){return null===e.get()&&function(t,e){t.set({}),e.on("NodeChange",(function(n){bv(e,n.element,t.get())})),e.on("FormatApply FormatRemove",(function(n){var r=R.from(n.node).map((function(t){return Fl(t)?t:t.startContainer})).bind((function(t){return Nn(t)?R.some(t):R.from(t.parentElement)})).getOrThunk((function(){return vv(e)}));bv(e,r,t.get())}))}(e,t),function(t,e,n,r,i,o){var a=e.get();U(n.split(","),(function(e){var n=mt(a,e).getOrThunk((function(){var t={withSimilar:{state:gs(!1),similar:!0,callbacks:[]},withoutSimilar:{state:gs(!1),similar:!1,callbacks:[]},withVars:[]};return a[e]=t,t})),s=function(){var n=yv(t);return mv(t,n,e,i,o).isSome()};if(v(o)){var u=i?n.withSimilar:n.withoutSimilar;u.callbacks.push(r),1===u.callbacks.length&&u.state.set(s())}else n.withVars.push({state:gs(s()),similar:i,vars:o,callback:r})})),e.set(a)}(t,e,n,r,i,o),{unbind:function(){return function(t,e,n){var r=t.get();U(e.split(","),(function(t){return mt(r,t).each((function(e){r[t]={withSimilar:Ot(Ot({},e.withSimilar),{callbacks:Y(e.withSimilar.callbacks,(function(t){return t!==n}))}),withoutSimilar:Ot(Ot({},e.withoutSimilar),{callbacks:Y(e.withoutSimilar.callbacks,(function(t){return t!==n}))}),withVars:Y(e.withVars,(function(t){return t.callback!==n}))}}))})),t.set(r)}(e,n,r)}}}(t,e,n,r,i,o)}},editor:{getContent:function(e,n){return function(t,e,n){return R.from(t.getBody()).fold(S("tree"===e.format?new ih("body",11):""),(function(r){return function(t,e,n,r){var i,o=function(t,e){return Ot(Ot({},t),{format:e,get:!0,getInner:!0})}(e,n),a=e.no_events?o:t.fire("BeforeGetContent",o);return i="raw"===a.format?Me.trim(bh(t.serializer,r.innerHTML)):"text"===a.format?t.dom.isEmpty(r)?"":vi(r.innerText||r.textContent):"tree"===a.format?t.serializer.serialize(r,a):function(t,e){var n=Vu(t),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return e.replace(r,"")}(t,t.serializer.serialize(r,a)),$(["text","tree"],a.format)||di(Ie(r))?a.content=i:a.content=Me.trim(i),a.no_events?a.content:t.fire("GetContent",a).content}(t,e,n,r)}))}(t,e,n)},setContent:function(e,n){return gg(t,e,n)},insertContent:function(e,n){return fg(t,e,n)},addVisual:function(e){return function(t,e){var n=t.dom,r=y(e)?e:t.getBody();v(t.hasVisual)&&(t.hasVisual=function(t){return t.getParam("visual",!0,"boolean")}(t)),U(n.select("table,a",r),(function(e){switch(e.nodeName){case"TABLE":var r=function(t){return t.getParam("visual_table_class","mce-item-table","string")}(t),i=n.getAttrib(e,"border");i&&"0"!==i||!t.hasVisual?n.removeClass(e,r):n.addClass(e,r);break;case"A":if(!n.getAttrib(e,"href")){var o=n.getAttrib(e,"name")||e.id,a=function(t){return t.getParam("visual_anchor_class","mce-item-anchor","string")}(t);o&&t.hasVisual?n.addClass(e,a):n.removeClass(e,a)}}})),t.fire("VisualAid",{element:e,hasVisual:t.hasVisual})}(t,e)}},selection:{getContent:function(e,n){return Rv(t,e,n)}},raw:{getModel:function(){return R.none()}}}},qv=function(t){return yt(t.plugins,"rtc")},Zv=function(t){return t.rtcInstance?t.rtcInstance:Xv(t)},Kv=function(t){var e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Jv=function(t){return 0===t.dom.length?(mn(t),R.none()):R.some(t)},Qv=function(t,e,n,r){t.bind((function(t){return(r?_p:wp)(t.dom,r?t.dom.length:0),e.filter(Ge).map((function(e){return function(t,e,n,r){var i=t.dom,o=e.dom,a=r?i.length:o.length;r?(Ep(i,o,!1,!r),n.setStart(o,a)):(Ep(o,i,!1,!r),n.setEnd(o,a))}(t,e,n,r)}))})).orThunk((function(){var t=function(t,e){return t.filter((function(t){return Df.isBookmarkNode(t.dom)})).bind(e?Ze:qe)}(e,r).or(e).filter(Ge);return t.map((function(t){return function(t,e){Xe(t).each((function(n){var r=t.dom;e&&hp(n,mu(r,0))?wp(r,0):!e&&pp(n,mu(r,r.length))&&_p(r,r.length)}))}(t,r)}))}))},tm=function(t,e,n){if(t&&yt(t,e)){var r=Y(t[e],(function(t){return t!==n}));0===r.length?delete t[e]:t[e]=r}},em=function(t){return!!t.select},nm=function(t){return!(!t||!t.ownerDocument)&&je(Ie(t.ownerDocument),Ie(t))},rm=function(t,e,n,r){var i,o,a=function(t,e){var n,r,i=function(e,n){return K(n,(function(n){return t.is(n,e)}))},o=function(e){return t.getParents(e,null,t.getRoot())};return{selectorChangedWithUnbind:function(t,a){return n||(n={},r={},e.on("NodeChange",(function(t){var e=t.element,a=o(e),s={};Me.each(n,(function(t,e){i(e,a).each((function(n){r[e]||(U(t,(function(t){t(!0,{node:n,selector:e,parents:a})})),r[e]=t),s[e]=t}))})),Me.each(r,(function(t,n){s[n]||(delete r[n],Me.each(t,(function(t){t(!1,{node:e,selector:n,parents:a})})))}))}))),n[t]||(n[t]=[]),n[t].push(a),i(t,o(e.selection.getStart())).each((function(){r[t]=n[t]})),{unbind:function(){tm(n,t,a),tm(r,t,a)}}}}}(t,r).selectorChangedWithUnbind,s=function(t,e){return function(t,e,n){void 0===n&&(n={});var r=function(t,e){return Ot(Ot({format:"html"},t),{set:!0,selection:!0,content:e})}(n,e),i=r;if(!r.no_events){var o=t.fire("BeforeSetContent",r);if(o.isDefaultPrevented())return void t.fire("SetContent",o);i=o}i.content=function(t,e){if("raw"!==e.format){var n=t.selection.getRng(),r=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},o=t.parser.parse(e.content,Ot(Ot({isRootContent:!0,forced_root_block:!1},i),e));return Sh({validate:t.validate},t.schema).serialize(o)}return e.content}(t,i);var a=t.selection.getRng();!function(t,e){var n=R.from(e.firstChild).map(Ie),r=R.from(e.lastChild).map(Ie);t.deleteContents(),t.insertNode(e);var i=n.bind(qe).filter(Ge).bind(Jv),o=r.bind(Ze).filter(Ge).bind(Jv);Qv(i,n,t,!0),Qv(o,r,t,!1),t.collapse(!1)}(a,a.createContextualFragment(i.content)),t.selection.setRng(a),Ed(t,a),i.no_events||t.fire("SetContent",i)}(r,t,e)},u=function(t){var e=l();e.collapse(!!t),f(e)},c=function(){return e.getSelection?e.getSelection():e.document.selection},l=function(){var n,a,s,u=function(t,e,n){try{return e.compareBoundaryPoints(t,n)}catch(t){return-1}},l=e.document;if(void 0!==r.bookmark&&!1===Yd(r)){var f=Bd(r);if(f.isSome())return f.map((function(t){return Qd(r,[t])[0]})).getOr(l.createRange())}try{(n=c())&&!An(n.anchorNode)&&(a=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():l.createRange(),a=Qd(r,[a])[0])}catch(t){}return a||(a=l.createRange?l.createRange():l.body.createTextRange()),a.setStart&&9===a.startContainer.nodeType&&a.collapsed&&(s=t.getRoot(),a.setStart(s,0),a.setEnd(s,0)),i&&o&&(0===u(a.START_TO_START,a,i)&&0===u(a.END_TO_END,a,i)?a=o:(i=null,o=null)),a},f=function(t,e){var n;if(function(t){return!!t&&(!!em(t)||nm(t.startContainer)&&nm(t.endContainer))}(t)){var a=em(t)?t:null;if(a){o=null;try{a.select()}catch(t){}}else{var s=c();if(t=r.fire("SetSelectionRange",{range:t,forward:e}).range,s){o=t;try{s.removeAllRanges(),s.addRange(t)}catch(t){}!1===e&&s.extend&&(s.collapse(t.endContainer,t.endOffset),s.extend(t.startContainer,t.startOffset)),i=s.rangeCount>0?s.getRangeAt(0):null}t.collapsed||t.startContainer!==t.endContainer||!s.setBaseAndExtent||_e.ie||t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()&&(n=t.startContainer.childNodes[t.startOffset])&&"IMG"===n.tagName&&(s.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),s.anchorNode===t.startContainer&&s.focusNode===t.endContainer||s.setBaseAndExtent(n,0,n,1)),r.fire("AfterSetSelectionRange",{range:t,forward:e})}}},d=function(){var e=c(),n=null==e?void 0:e.anchorNode,r=null==e?void 0:e.focusNode;if(!e||!n||!r||An(n)||An(r))return!0;var i=t.createRng();i.setStart(n,e.anchorOffset),i.collapse(!0);var o=t.createRng();return o.setStart(r,e.focusOffset),o.collapse(!0),i.compareBoundaryPoints(i.START_TO_START,o)<=0},h={bookmarkManager:null,controlSelection:null,dom:t,win:e,serializer:n,editor:r,collapse:u,setCursorLocation:function(e,n){var i=t.createRng();y(e)&&y(n)?(i.setStart(e,n),i.setEnd(e,n),f(i),u(!1)):(Cf(t,i,r.getBody(),!0),f(i))},getContent:function(t){return function(t,e){return void 0===e&&(e={}),function(t,e,n){return Kv(t).selection.getContent(e,n)}(t,e.format?e.format:"html",e)}(r,t)},setContent:s,getBookmark:function(t,e){return p.getBookmark(t,e)},moveToBookmark:function(t){return p.moveToBookmark(t)},select:function(e,n){return function(t,e,n){return R.from(e).map((function(e){var r=t.nodeIndex(e),i=t.createRng();return i.setStart(e.parentNode,r),i.setEnd(e.parentNode,r+1),n&&(Cf(t,i,e,!0),Cf(t,i,e,!1)),i}))}(t,e,n).each(f),e},isCollapsed:function(){var t=l(),e=c();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!e||t.collapsed)},isForward:d,setNode:function(e){return s(t.getOuterHTML(e)),e},getNode:function(){return function(t,e){var n,r,i;if(!e)return t;r=e.startContainer,i=e.endContainer;var o=e.startOffset,a=e.endOffset;return n=e.commonAncestorContainer,!e.collapsed&&(r===i&&a-o<2&&r.hasChildNodes()&&(n=r.childNodes[o]),3===r.nodeType&&3===i.nodeType&&(r=r.length===o?Jd(r.nextSibling,!0):r.parentNode,i=0===a?Jd(i.previousSibling,!1):i.parentNode,r&&r===i))?r:n&&3===n.nodeType?n.parentNode:n}(r.getBody(),l())},getSel:c,setRng:f,getRng:l,getStart:function(t){return Zd(r.getBody(),l(),t)},getEnd:function(t){return Kd(r.getBody(),l(),t)},getSelectedBlocks:function(e,n){return function(t,e,n,r){var i,o=[],a=t.getRoot();if(n=t.getParent(n||Zd(a,e,e.collapsed),t.isBlock),r=t.getParent(r||Kd(a,e,e.collapsed),t.isBlock),n&&n!==a&&o.push(n),n&&r&&n!==r){i=n;for(var s=new ei(n,a);(i=s.next())&&i!==r;)t.isBlock(i)&&o.push(i)}return r&&n!==r&&r!==a&&o.push(r),o}(t,l(),e,n)},normalize:function(){var e=l(),n=c();if(!(yf(n).length>1)&&kf(r)){var i=td(t,e);return i.each((function(t){f(t,d())})),i.getOr(e)}return e},selectorChanged:function(t,e){return a(t,e),h},selectorChangedWithUnbind:a,getScrollContainer:function(){for(var e,n=t.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){e=n;break}n=n.parentNode}return e},scrollIntoView:function(t,e){y(t)?function(t,e,n){(t.inline?xd:_d)(t,e,n)}(r,t,e):Ed(r,l(),e)},placeCaretAt:function(t,e){return f(Uf(t,e,r.getDoc()))},getBoundingClientRect:function(){var t=l();return t.collapsed?mu.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:function(){e=i=o=null,g.destroy()}},p=Df(h),g=Gf(h,r);return h.bookmarkManager=p,h.controlSelection=g,h},im=function(t,e){var n=So();e.convert_fonts_to_spans&&function(t,e,n){t.addNodeFilter("font",(function(t){U(t,(function(t){var r=e.parse(t.attr("style")),i=t.attr("color"),o=t.attr("face"),a=t.attr("size");i&&(r.color=i),o&&(r["font-family"]=o),a&&(r["font-size"]=n[parseInt(t.attr("size"),10)-1]),t.name="span",t.attr("style",e.serialize(r)),function(t,e){U(["color","face","size"],(function(e){t.attr(e,null)}))}(t)}))}))}(t,n,Me.explode(e.font_size_legacy_values)),function(t,e){t.addNodeFilter("strike",(function(t){U(t,(function(t){var n=e.parse(t.attr("style"));n["text-decoration"]="line-through",t.name="span",t.attr("style",e.serialize(n))}))}))}(t,n)},om=function(t){var e,n=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(e=r[1]),{type:e,data:n[1]}},am=function(t,e){var n;try{n=atob(e)}catch(t){return R.none()}for(var r=new Uint8Array(n.length),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);return R.some(new Blob([r],{type:t}))},sm=function(t){return 0===t.indexOf("blob:")?function(t){return new Xr((function(e,n){var r=function(){n("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="blob",i.onload=function(){200===i.status?e(i.response):r()},i.onerror=r,i.send()}catch(t){r()}}))}(t):0===t.indexOf("data:")?(e=t,new Xr((function(t){var n=om(e),r=n.type,i=n.data;am(r,i).fold((function(){return t(new Blob([]))}),t)}))):null;var e},um=0,cm=function(t){return(t||"blobid")+um++},lm=function(t,e){var n={};return{findAll:function(r,i){i||(i=I);var o=Y(function(t){return t?st(t.getElementsByTagName("img")):[]}(r),(function(e){var n=e.src;return!!_e.fileApi&&!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!n||n===_e.transparentSrc)&&(0===n.indexOf("blob:")?!t.isUploaded(n)&&i(e):0===n.indexOf("data:")&&i(e))})),a=V(o,(function(t){if(void 0!==n[t.src])return new Xr((function(e){n[t.src].then((function(n){if("string"==typeof n)return n;e({image:t,blobInfo:n.blobInfo})}))}));var r=new Xr((function(n,r){!function(t,e,n,r){var i,o;if(0!==e.src.indexOf("blob:")){var a=om(e.src),s=a.data,u=a.type;i=s,(o=t.getByData(i,u))?n({image:e,blobInfo:o}):sm(e.src).then((function(r){o=t.create(cm(),r,i),t.add(o),n({image:e,blobInfo:o})}),(function(t){r(t)}))}else(o=t.getByUri(e.src))?n({image:e,blobInfo:o}):sm(e.src).then((function(r){(function(t){return new Xr((function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)}))})(r).then((function(a){i=om(a).data,o=t.create(cm(),r,i),t.add(o),n({image:e,blobInfo:o})}))}),(function(t){r(t)}))}(e,t,n,r)})).then((function(t){return delete n[t.image.src],t})).catch((function(e){return delete n[t.src],e}));return n[t.src]=r,r}));return Xr.all(a)}}},fm=function(t,e,n,r){(t.padd_empty_with_br||e.insert)&&n[r.name]?r.empty().append(new ih("br",1)).shortEnded=!0:r.empty().append(new ih("#text",3)).value=hi},dm=function(t,e){return t&&t.firstChild&&t.firstChild===t.lastChild&&t.firstChild.name===e},hm=function(t,e,n,r){return r.isEmpty(e,n,(function(e){return function(t,e){var n=t.getElementRule(e.name);return n&&n.paddEmpty}(t,e)}))},pm=Me.makeMap,gm=Me.each,vm=Me.explode,mm=Me.extend,ym=function(t,e){void 0===e&&(e=_o());var n={},r=[],i={},o={};(t=t||{}).validate=!("validate"in t)||t.validate,t.root_name=t.root_name||"body";var a=function(t){var e=t.name;e in n&&((s=i[e])?s.push(t):i[e]=[t]);for(var a=r.length;a--;){var s,u=r[a].name;u in t.attributes.map&&((s=o[u])?s.push(t):o[u]=[t])}return t},s={schema:e,addAttributeFilter:function(t,e){gm(vm(t),(function(t){var n;for(n=0;n<r.length;n++)if(r[n].name===t)return void r[n].callbacks.push(e);r.push({name:t,callbacks:[e]})}))},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(t,e){gm(vm(t),(function(t){var r=n[t];r||(n[t]=r=[]),r.push(e)}))},getNodeFilters:function(){var t=[];for(var e in n)yt(n,e)&&t.push({name:e,callbacks:n[e]});return t},filterNode:a,parse:function(s,u){var c,l,f,d,h,p,g,v,m=[];u=u||{},i={},o={};var b=mm(pm("script,style,head,html,body,title,meta,param"),e.getBlockElements()),x=xo(e),w=e.getNonEmptyElements(),_=e.children,E=t.validate,S=function(t){return!1===t?"":!0===t?"p":t}("forced_root_block"in u?u.forced_root_block:t.forced_root_block),C=e.getWhiteSpaceElements(),k=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,O=/[ \t\r\n]+/g,T=/^[ \t\r\n]+$/,A=yt(C,u.context)||yt(C,t.root_name),N=function(t,e){var r,o=new ih(t,e);return t in n&&((r=i[t])?r.push(o):i[t]=[o]),o},I=function(t){for(var n=e.getBlockElements(),r=t.prev;r&&3===r.type;){var i=r.value.replace(M,"");if(i.length>0)return void(r.value=i);var o=r.next;if(o){if(3===o.type&&o.value.length){r=r.prev;continue}if(!n[o.name]&&"script"!==o.name&&"style"!==o.name){r=r.prev;continue}}var a=r.prev;r.remove(),r=a}},P=mh({validate:E,document:t.document,allow_html_data_urls:t.allow_html_data_urls,allow_svg_data_urls:t.allow_svg_data_urls,allow_script_urls:t.allow_script_urls,allow_conditional_comments:t.allow_conditional_comments,preserve_cdata:t.preserve_cdata,self_closing_elements:function(t){var e={};for(var n in t)"li"!==n&&"p"!==n&&(e[n]=t[n]);return e}(e.getSelfClosingElements()),cdata:function(t){v.append(N("#cdata",4)).value=t},text:function(t,e){var n;A||(t=t.replace(O," "),function(t,e){return t&&(yt(e,t.name)||"br"===t.name)}(v.lastChild,b)&&(t=t.replace(k,""))),0!==t.length&&((n=N("#text",3)).raw=!!e,v.append(n).value=t)},comment:function(t){v.append(N("#comment",8)).value=t},pi:function(t,e){v.append(N(t,7)).value=e,I(v)},doctype:function(t){v.append(N("#doctype",10)).value=t,I(v)},start:function(t,n,i){var a=E?e.getElementRule(t):{};if(a){var s=N(a.outputName||t,1);s.attributes=n,s.shortEnded=i,v.append(s);var u=_[v.name];u&&_[s.name]&&!u[s.name]&&m.push(s);for(var c=r.length;c--;){var l=r[c].name;l in n.map&&((p=o[l])?p.push(s):o[l]=[s])}b[t]&&I(s),i||(v=s),!A&&C[t]&&(A=!0)}},end:function(n){var r,i,o,a=E?e.getElementRule(n):{};if(a){if(b[n]&&!A){if((r=v.firstChild)&&3===r.type)if((i=r.value.replace(k,"")).length>0)r.value=i,r=r.next;else for(o=r.next,r.remove(),r=o;r&&3===r.type;)i=r.value,o=r.next,(0===i.length||T.test(i))&&(r.remove(),r=o),r=o;if((r=v.lastChild)&&3===r.type)if((i=r.value.replace(M,"")).length>0)r.value=i,r=r.prev;else for(o=r.prev,r.remove(),r=o;r&&3===r.type;)i=r.value,o=r.prev,(0===i.length||T.test(i))&&(r.remove(),r=o),r=o}A&&C[n]&&(A=!1);var s=hm(e,w,C,v),c=v.parent;a.paddInEmptyBlock&&s&&function(t){for(var n=t;y(n);){if(n.name in x)return hm(e,w,C,n);n=n.parent}return!1}(v)?fm(t,u,b,v):a.removeEmpty&&s?b[v.name]?v.empty().remove():v.unwrap():a.paddEmpty&&(function(t){return dm(t,"#text")&&t.firstChild.value===hi}(v)||s)&&fm(t,u,b,v),v=c}}},e),D=v=new ih(u.context||t.root_name,11);if(P.parse(s,u.format),E&&m.length&&(u.context?u.invalid=!0:function(t){for(var n=pm("tr,td,th,tbody,thead,tfoot,table"),r=e.getNonEmptyElements(),i=e.getWhiteSpaceElements(),o=e.getTextBlockElements(),s=e.getSpecialElements(),u=function(t,n){if(void 0===n&&(n=t.parent),s[t.name])t.empty().remove();else{for(var r=0,i=t.children();r<i.length;r++){var o=i[r];e.isValidChild(n.name,o.name)||u(o,n)}t.unwrap()}},c=0;c<t.length;c++){var l=t[c],f=void 0,d=void 0,h=void 0;if(l.parent&&!l.fixed)if(o[l.name]&&"li"===l.parent.name){for(var p=l.next;p&&o[p.name];)p.name="li",p.fixed=!0,l.parent.insert(p,l.parent),p=p.next;l.unwrap()}else{var g=[l];for(f=l.parent;f&&!e.isValidChild(f.name,l.name)&&!n[f.name];f=f.parent)g.push(f);if(f&&g.length>1)if(e.isValidChild(f.name,l.name)){g.reverse();for(var v=d=a(g[0].clone()),m=0;m<g.length-1;m++){e.isValidChild(v.name,g[m].name)?(h=a(g[m].clone()),v.append(h)):h=v;for(var y=g[m].firstChild;y&&y!==g[m+1];){var b=y.next;h.append(y),y=b}v=h}hm(e,r,i,d)?f.insert(l,g[0],!0):(f.insert(d,g[0],!0),f.insert(l,d)),f=g[0],(hm(e,r,i,f)||dm(f,"br"))&&f.empty().remove()}else u(l);else if(l.parent){if("li"===l.name){if((p=l.prev)&&("ul"===p.name||"ol"===p.name)){p.append(l);continue}if((p=l.next)&&("ul"===p.name||"ol"===p.name)){p.insert(l,p.firstChild,!0);continue}l.wrap(a(new ih("ul",1)));continue}e.isValidChild(l.parent.name,"div")&&e.isValidChild("div",l.name)?l.wrap(a(new ih("div",1))):u(l)}}}}(m)),S&&("body"===D.name||u.isRootContent)&&function(){var n=D.firstChild,r=null,i=function(t){t&&((n=t.firstChild)&&3===n.type&&(n.value=n.value.replace(k,"")),(n=t.lastChild)&&3===n.type&&(n.value=n.value.replace(M,"")))};if(e.isValidChild(D.name,S.toLowerCase())){for(;n;){var o=n.next;3===n.type||1===n.type&&"p"!==n.name&&!b[n.name]&&!n.attr("data-mce-type")?(r||((r=N(S,1)).attr(t.forced_root_block_attrs),D.insert(r,n)),r.append(n)):(i(r),r=null),n=o}i(r)}}(),!u.invalid){for(g in i)if(yt(i,g)){for(p=n[g],d=(c=i[g]).length;d--;)c[d].parent||c.splice(d,1);for(l=0,f=p.length;l<f;l++)p[l](c,g,u)}for(l=0,f=r.length;l<f;l++)if((p=r[l]).name in o){for(d=(c=o[p.name]).length;d--;)c[d].parent||c.splice(d,1);for(d=0,h=p.callbacks.length;d<h;d++)p.callbacks[d](c,p.name,u)}}return D}};return function(t,e){var n=t.schema;e.remove_trailing_brs&&t.addNodeFilter("br",(function(t,r,i){var o,a,s,u,c,l,f,d,h=t.length,p=Me.extend({},n.getBlockElements()),g=n.getNonEmptyElements(),v=n.getWhiteSpaceElements();for(p.body=1,o=0;o<h;o++)if(s=(a=t[o]).parent,p[a.parent.name]&&a===s.lastChild){for(c=a.prev;c;){if("span"!==(l=c.name)||"bookmark"!==c.attr("data-mce-type")){"br"===l&&(a=null);break}c=c.prev}a&&(a.remove(),hm(n,g,v,s)&&(f=n.getElementRule(s.name))&&(f.removeEmpty?s.remove():f.paddEmpty&&fm(e,i,p,s)))}else{for(u=a;s&&s.firstChild===u&&s.lastChild===u&&(u=s,!p[s.name]);)s=s.parent;u===s&&!0!==e.padd_empty_with_br&&((d=new ih("#text",3)).value=hi,a.replace(d))}})),t.addAttributeFilter("href",(function(t){var n,r,i=t.length;if(!e.allow_unsafe_link_target)for(;i--;){var o=t[i];"a"===o.name&&"_blank"===o.attr("target")&&o.attr("rel",(void 0,r=(n=o.attr("rel"))?Me.trim(n):"",/\b(noopener)\b/g.test(r)?r:function(t){return t.split(" ").filter((function(t){return t.length>0})).concat(["noopener"]).sort().join(" ")}(r)))}})),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",(function(t){for(var e,n,r,i,o=t.length;o--;)if("a"===(i=t[o]).name&&i.firstChild&&!i.attr("href")){r=i.parent,e=i.lastChild;do{n=e.prev,r.insert(e,i),e=n}while(e)}})),e.fix_list_elements&&t.addNodeFilter("ul,ol",(function(t){for(var e,n,r=t.length;r--;)if("ul"===(n=(e=t[r]).parent).name||"ol"===n.name)if(e.prev&&"li"===e.prev.name)e.prev.append(e);else{var i=new ih("li",1);i.attr("style","list-style-type: none"),e.wrap(i)}})),e.validate&&n.getValidClasses()&&t.addAttributeFilter("class",(function(t){for(var e=n.getValidClasses(),r=t.length;r--;){for(var i=t[r],o=i.attr("class").split(" "),a="",s=0;s<o.length;s++){var u=o[s],c=!1,l=e["*"];l&&l[u]&&(c=!0),l=e[i.name],!c&&l&&l[u]&&(c=!0),c&&(a&&(a+=" "),a+=u)}a.length||(a=null),i.attr("class",a)}})),function(t,e){var n=e.blob_cache,r=function(t){var r,i,o=t.attr("src");(function(t){return t.attr("src")===_e.transparentSrc||y(t.attr("data-mce-placeholder"))})(t)||function(t){return y(t.attr("data-mce-bogus"))}(t)||(r=o,i=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(r),i?R.some({type:i[1],data:decodeURIComponent(i[2])}):R.none()).filter((function(){return function(t,e){if(e.images_dataimg_filter){var n=new Image;return n.src=t.attr("src"),ft(t.attributes.map,(function(t,e){n.setAttribute(e,t)})),e.images_dataimg_filter(n)}return!0}(t,e)})).bind((function(t){var e=t.type,r=t.data;return R.from(n.getByData(r,e)).orThunk((function(){return am(e,r).map((function(t){var e=n.create(cm(),t,r);return n.add(e),e}))}))})).each((function(e){t.attr("src",e.blobUri())}))};n&&t.addAttributeFilter("src",(function(t){return U(t,r)}))}(t,e)}(s,t),function(t,e){e.inline_styles&&im(t,e)}(s,t),s},bm=function(t,e,n){-1===Me.inArray(e,n)&&(t.addAttributeFilter(n,(function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)})),e.push(n))},xm=function(t,e){var n=["data-mce-selected"],r=e&&e.dom?e.dom:ls.DOM,i=e&&e.schema?e.schema:_o(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;var o=ym(t,i);return function(t,e,n){t.addAttributeFilter("data-mce-tabindex",(function(t,e){for(var n=t.length;n--;){var r=t[n];r.attr("tabindex",r.attr("data-mce-tabindex")),r.attr(e,null)}})),t.addAttributeFilter("src,href,style",(function(t,r){for(var i="data-mce-"+r,o=e.url_converter,a=e.url_converter_scope,s=t.length;s--;){var u=t[s],c=u.attr(i);void 0!==c?(u.attr(r,c.length>0?c:null),u.attr(i,null)):(c=u.attr(r),"style"===r?c=n.serializeStyle(n.parseStyle(c),u.name):o&&(c=o.call(a,c,r,u.name)),u.attr(r,c.length>0?c:null))}})),t.addAttributeFilter("class",(function(t){for(var e=t.length;e--;){var n=t[e],r=n.attr("class");r&&(r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null))}})),t.addAttributeFilter("data-mce-type",(function(t,e,n){for(var r=t.length;r--;){var i=t[r];if("bookmark"===i.attr("data-mce-type")&&!n.cleanup){var o=R.from(i.firstChild).exists((function(t){return!gi(t.value)}));o?i.unwrap():i.remove()}}})),t.addNodeFilter("noscript",(function(t){for(var e=t.length;e--;){var n=t[e].firstChild;n&&(n.value=co.decode(n.value))}})),t.addNodeFilter("script,style",(function(t,n){for(var r=function(t){return t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},i=t.length;i--;){var o=t[i],a=o.firstChild?o.firstChild.value:"";if("script"===n){var s=o.attr("type");s&&o.attr("type","mce-no/type"===s?null:s.replace(/^mce\-/,"")),"xhtml"===e.element_format&&a.length>0&&(o.firstChild.value="// <![CDATA[\n"+r(a)+"\n// ]]>")}else"xhtml"===e.element_format&&a.length>0&&(o.firstChild.value="\x3c!--\n"+r(a)+"\n--\x3e")}})),t.addNodeFilter("#comment",(function(t){for(var r=t.length;r--;){var i=t[r];e.preserve_cdata&&0===i.value.indexOf("[CDATA[")?(i.name="#cdata",i.type=4,i.value=n.decode(i.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===i.value.indexOf("mce:protected ")&&(i.name="#text",i.type=3,i.raw=!0,i.value=unescape(i.value).substr(14))}})),t.addNodeFilter("xml:namespace,input",(function(t,e){for(var n=t.length;n--;){var r=t[n];7===r.type?r.remove():1===r.type&&("input"!==e||r.attr("type")||r.attr("type","text"))}})),t.addAttributeFilter("data-mce-type",(function(e){U(e,(function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())}))})),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}))}(o,t,r),{schema:i,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(n,a){void 0===a&&(a={});var s=Ot({format:"html"},a),u=function(t,e,n){return function(t,e){return t&&t.hasEventListeners("PreProcess")&&!e.no_events}(t,n)?function(t,e,n){var r,i=t.dom,o=e.cloneNode(!0),a=document.implementation;if(a.createHTMLDocument){var s=a.createHTMLDocument("");Me.each("BODY"===o.nodeName?o.childNodes:[o],(function(t){s.body.appendChild(s.importNode(t,!0))})),o="BODY"!==o.nodeName?s.body.firstChild:s.body,r=i.doc,i.doc=s}return function(t,e){t.fire("PreProcess",e)}(t,Ot(Ot({},n),{node:o})),r&&(i.doc=r),o}(t,e,n):e}(e,n,s),c=function(t,e,n){var r=vi(n.getInner?e.innerHTML:t.getOuterHTML(e));return n.selection||di(Ie(e))?r:Me.trim(r)}(r,u,s),l=function(t,e,n){var r=n.selection?Ot({forced_root_block:!1},n):n,i=t.parse(e,r);return function(t){var e=function(t){return t&&"br"===t.name},n=t.lastChild;if(e(n)){var r=n.prev;e(r)&&(n.remove(),r.remove())}}(i),i}(o,c,s);return"tree"===s.format?l:function(t,e,n,r,i){var o=function(t,e,n){return Sh(t,e).serialize(n)}(e,n,r);return function(t,e,n){if(!e.no_events&&t){var r=function(t,e){return t.fire("PostProcess",e)}(t,Ot(Ot({},e),{content:n}));return r.content}return n}(t,i,o)}(e,t,i,l,s)},addRules:i.addValidElements,setRules:i.setValidElements,addTempAttr:M(bm,o,n),getTempAttrs:S(n),getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters}},wm=function(t,e){var n=xm(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},_m=function(t,e,n){return void 0===n&&(n={}),function(t,e,n){return Zv(t).editor.setContent(e,n)}(t,e,n)},Em=ls.DOM,Sm=function(t){return R.from(t).each((function(t){return t.destroy()}))},Cm=($g=function(t,e){return d(t)&&d(e)?Cm(t,e):e},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var i=t[r];for(var o in i)yt(i,o)&&(n[o]=$g(n[o],i[o]))}return n}),km="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Mm="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Om="imagetools,toc".split(","),Tm=function(t){var e=Y(km,(function(e){return yt(t,e)})),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),rt(e)},Am=function(t){var e=Me.makeMap(t.plugins," "),n=function(t){return yt(e,t)},r=Tt(Tt([],Y(Mm,n),!0),Q(Om,(function(t){return n(t)?[t+" (moving to premium)"]:[]})),!0);return rt(r)},Nm=he().deviceType,Im=Nm.isTouch(),Pm=Nm.isPhone(),Dm=Nm.isTablet(),Lm=["lists","autolink","autosave"],Rm={table_grid:!1,object_resizing:!1,resize:!1},jm=function(t){var e=h(t)?t.join(" "):t,n=V(f(e)?e.split(" "):[],Bt);return Y(n,(function(t){return t.length>0}))},Bm=function(t,e){return yt(t.sections(),e)},Fm=function(t,e){return mt(t,"toolbar_mode").orThunk((function(){return mt(t,"toolbar_drawer").map((function(t){return!1===t?"wrap":t}))})).getOr(e)},zm=function(t,e){var n={resize:!1,toolbar_mode:Fm(t,"scrolling"),toolbar_sticky:!1};return Ot(Ot(Ot({},Rm),n),e?{menubar:!1}:{})},$m=function(t,e){var n=e.external_plugins?e.external_plugins:{};return t&&t.external_plugins?Me.extend({},t.external_plugins,n):n},Gm=function(t,e,n,r){var i=jm(n.forced_plugins),o=jm(r.plugins),a=function(t,e){return Bm(t,e)?t.sections()[e]:{}}(e,"mobile"),s=function(t,e){return[].concat(jm(t)).concat(jm(e))}(i,function(t,e,n,r){return t&&function(t,e,n){var r=t.sections();return Bm(t,e)&&"mobile"===r[e].theme}(e,"mobile")?Y(r,M($,Lm)):t&&Bm(e,"mobile")?r:n}(t,e,o,a.plugins?jm(a.plugins):o));if(_e.browser.isIE()&&$(s,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return Me.extend(r,{plugins:s.join(" ")})},Vm=function(t,e,n,r,i){var o=t?{mobile:zm(i.mobile||{},e)}:{},a=function(t,e){var n,r,i=(r={},gt(e,(function(e,n){return $(t,n)}),pt(n={}),pt(r)),{t:n,f:r});return function(t,e){return{sections:S(t),settings:S(e)}}(i.t,i.f)}(["mobile"],Cm(o,i)),s=Me.extend(n,r,a.settings(),function(t,e){return t&&Bm(e,"mobile")}(t,a)?function(t,e,n){void 0===n&&(n={});var r=t.sections(),i=mt(r,"mobile").getOr({});return Me.extend({},n,i)}(a):{},{validate:!0,external_plugins:$m(r,a.settings())});return Gm(t,a,r,s)},Um=function(t,e,n,r,i){var o=function(t,e,n,r,i){var o={id:e,theme:"silver",toolbar_mode:Fm(t,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i};return Ot(Ot({},o),r?Rm:{})}(i,e,n,Im,t),a=Vm(Pm||Dm,Pm,o,r,i);return!1!==a.deprecation_warnings&&function(t,e){var n=Tm(t),r=Am(e),i=r.length>0,o=n.length>0,a="mobile"===e.theme;if(i||o||a){var s="\n- ",u=a?"\n\nThemes:\n- mobile":"",c=i?"\n\nPlugins:"+s+r.join(s):"",l=o?"\n\nSettings:"+s+n.join(s):"";console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+u+c+l)}}(i,a),a},Wm=function(t,e,n){return R.from(e.settings[n]).filter(t)},Hm=(Gg={},{add:function(t,e){Gg[t]=e},get:function(t){return Gg[t]?Gg[t]:{icons:{}}},has:function(t){return yt(Gg,t)}}),Ym=function(t,e){return e.dom[t]},Xm=function(t,e){return parseInt(ir(e,t),10)},qm=M(Ym,"clientWidth"),Zm=M(Ym,"clientHeight"),Km=M(Xm,"margin-top"),Jm=M(Xm,"margin-left"),Qm=function(t,e,n){var r=Ie(t.getBody()),i=t.inline?r:Ie(He(r).dom.documentElement),o=function(t,e,n,r){var i=function(t){return t.dom.getBoundingClientRect()}(e);return{x:n-(t?i.left+e.dom.clientLeft+Jm(e):0),y:r-(t?i.top+e.dom.clientTop+Km(e):0)}}(t.inline,i,e,n);return function(t,e,n){var r=qm(t),i=Zm(t);return e>=0&&n>=0&&e<=r&&n<=i}(i,o.x,o.y)},ty=function(t){var e=[],n=function(){var e,n=t.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:e,reposition:e,getArgs:e}},r=function(){return R.from(e[0])},i=function(){e.length>0&&n().reposition(e)},o=function(t){J(e,(function(e){return e===t})).each((function(t){e.splice(t,1)}))},a=function(a,s){if(void 0===s&&(s=!0),!t.removed&&function(t){var e;return(e=t.inline?t.getBody():t.getContentAreaContainer(),R.from(e).map(Ie)).map(bn).getOr(!1)}(t))return s&&t.fire("BeforeOpenNotification",{notification:a}),K(e,(function(t){return e=n().getArgs(t),r=a,!(e.type!==r.type||e.text!==r.text||e.progressBar||e.timeout||r.progressBar||r.timeout);var e,r})).getOrThunk((function(){t.editorManager.setActive(t);var s=n().open(a,(function(){o(s),i(),r().fold((function(){return t.focus()}),(function(t){return Ie(t.getEl()).dom.focus()}))}));return function(t){e.push(t)}(s),i(),t.fire("OpenNotification",{notification:Ot({},s)}),s}))},s=S(e);return function(t){t.on("SkinLoaded",(function(){var e=function(t){return t.getParam("service_message")}(t);e&&a({text:e,type:"warning",timeout:0},!1),i()})),t.on("show ResizeEditor ResizeWindow NodeChange",(function(){Jr.requestAnimationFrame(i)})),t.on("remove",(function(){U(e.slice(),(function(t){n().close(t)}))}))}(t),{open:a,close:function(){r().each((function(t){n().close(t),o(t),i()}))},getNotifications:s}},ey=xs.PluginManager,ny=xs.ThemeManager,ry=function(t){var e=[],n=function(){var e,n=t.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:e=function(){throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}},r=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e?e.apply(t,n):void 0}},i=function(n){!function(e){t.fire("CloseWindow",{dialog:e})}(n),0===(e=Y(e,(function(t){return t!==n}))).length&&t.focus()},o=function(n){t.editorManager.setActive(t),jd(t);var r=n();return function(n){e.push(n),function(e){t.fire("OpenWindow",{dialog:e})}(n)}(r),r};return t.on("remove",(function(){U(e,(function(t){n().close(t)}))})),{open:function(t,e){return o((function(){return n().open(t,e,i)}))},openUrl:function(t){return o((function(){return n().openUrl(t,i)}))},alert:function(t,e,i){var o=n();o.alert(t,r(i||o,e))},confirm:function(t,e,i){var o=n();o.confirm(t,r(i||o,e))},close:function(){R.from(e[e.length-1]).each((function(t){n().close(t),i(t)}))}}},iy=function(t,e){t.notificationManager.open({type:"error",text:e})},oy=function(t,e){t._skinLoaded?iy(t,e):t.on("SkinLoaded",(function(){iy(t,e)}))},ay=function(t,e,n){jf(t,e,{message:n}),console.error(n)},sy=function(t,e,n){return n?"Failed to load "+t+": "+n+" from url "+e:"Failed to load "+t+" url: "+e},uy=function(t,e,n){ay(t,"PluginLoadError",sy("plugin",e,n))},cy=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,Tt([t],e,!1)):r.log.apply(r,Tt([t],e,!1)))},ly=function(t,e){var n=t.editorManager.baseURL+"/skins/content",r="content"+t.editorManager.suffix+".css",i=!0===t.inline;return V(e,(function(e){return function(t){return/^[a-z0-9\-]+$/i.test(t)}(e)&&!i?n+"/"+e+"/"+r:t.documentBaseURI.toAbsolute(e)}))},fy=function(t){t.contentCSS=t.contentCSS.concat(function(t){return ly(t,function(t){var e=t.getParam("content_css");return f(e)?V(e.split(","),Bt):h(e)?e:!1===e||t.inline?[]:["default"]}(t))}(t),function(t){return ly(t,nc(t))}(t))},dy=function(){var t={},e=function(t,e){return{status:t,resultUri:e}},n=function(e){return e in t};return{hasBlobUri:n,getResultUri:function(e){var n=t[e];return n?n.resultUri:null},isPending:function(e){return!!n(e)&&1===t[e].status},isUploaded:function(e){return!!n(e)&&2===t[e].status},markPending:function(n){t[n]=e(1,null)},markUploaded:function(n,r){t[n]=e(2,r)},removeFailed:function(e){delete t[e]},destroy:function(){t={}}}},hy=0,py=function(t){return t+hy+++(e=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+e()+e()+e());var e},gy=function(t,e){var n={},r=function(t,n,r,i){var o=new XMLHttpRequest;o.open("POST",e.url),o.withCredentials=e.credentials,o.upload.onprogress=function(t){i(t.loaded/t.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){if(o.status<200||o.status>=300)r("HTTP Error: "+o.status);else{var t,i,a=JSON.parse(o.responseText);a&&"string"==typeof a.location?n((t=e.basePath,i=a.location,t?t.replace(/\/$/,"")+"/"+i.replace(/^\//,""):i)):r("Invalid JSON: "+o.responseText)}};var a=new FormData;a.append("file",t.blob(),t.filename()),o.send(a)},i=function(t,e){return{url:e,blobInfo:t,status:!0}},o=function(t,e,n){return{url:"",blobInfo:t,status:!1,error:{message:e,options:n}}},a=function(t,e){Me.each(n[t],(function(t){t(e)})),delete n[t]};return!1===b(e.handler)&&(e.handler=r),{upload:function(s,u){return e.url||e.handler!==r?function(r,s){return r=Me.grep(r,(function(e){return!t.isUploaded(e.blobUri())})),Xr.all(Me.map(r,(function(r){return t.isPending(r.blobUri())?function(t){var e=t.blobUri();return new Xr((function(t){n[e]=n[e]||[],n[e].push(t)}))}(r):function(e,n,r){return t.markPending(e.blobUri()),new Xr((function(s){var u;try{var c=function(){u&&u.close()};n(e,(function(n){c(),t.markUploaded(e.blobUri(),n),a(e.blobUri(),i(e,n)),s(i(e,n))}),(function(n,r){var i=r||{};c(),t.removeFailed(e.blobUri()),a(e.blobUri(),o(e,n,i)),s(o(e,n,i))}),(function(t){t<0||t>100||R.from(u).orThunk((function(){return R.from(r).map(T)})).each((function(e){u=e,e.progressBar.value(t)}))}))}catch(t){s(o(e,t.message,{}))}}))}(r,e.handler,s)})))}(s,u):new Xr((function(t){t([])}))}}},vy=function(t){return function(){return t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},my=function(t,e){return gy(e,{url:Xu(t),basePath:qu(t),credentials:Zu(t),handler:Ku(t)})},yy=Me.each,by=ls.DOM,xy=function(t,e){var n,r,i,o=e&&e.schema||_o({}),a=function(t){r="string"==typeof t?{name:t,classes:[],attrs:{}}:t;var e=by.create(r.name);return function(t,e){e.classes.length&&by.addClass(t,e.classes.join(" ")),by.setAttribs(t,e.attrs)}(e,r),e},s=function(t,e,n){var r,i,u=e.length>0&&e[0],c=u&&u.name,l=function(t,e){var n="string"!=typeof t?t.nodeName.toLowerCase():t,r=o.getElementRule(n),i=r&&r.parentsRequired;return!(!i||!i.length)&&(e&&-1!==Me.inArray(i,e)?e:i[0])}(t,c);if(l)c===l?(i=e[0],e=e.slice(1)):i=l;else if(u)i=e[0],e=e.slice(1);else if(!n)return t;return i&&(r=a(i)).appendChild(t),n&&(r||(r=by.create("div")).appendChild(t),Me.each(n,(function(e){var n=a(e);r.insertBefore(n,t)}))),s(r,e,i&&i.siblings)};return t&&t.length?(r=t[0],n=a(r),(i=by.create("div")).appendChild(s(n,t.slice(1),r.siblings)),i):""},wy=function(t){var e,n={classes:[],attrs:{}};return"*"!==(t=n.selector=Me.trim(t))&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(t,e,r,i,o){switch(e){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==Me.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===i){var a=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""}))),n.name=e||"div",n},_y=function(t,e){var n,r,i,o="",a=function(t){var e=t.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");return f(e)?e:""}(t);if(""===a)return"";var s=function(t){return t.replace(/%(\w+)/g,"")};if("string"==typeof e){if(!(e=t.formatter.get(e)))return;e=e[0]}if("preview"in e){var u=mt(e,"preview");if(qn(u,!1))return"";a=u.getOr(a)}n=e.block||e.inline||"span";var c,l=(c=e.selector)&&"string"==typeof c?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Me.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(t){var e=Me.map(t.split(/(?:~\+|~|\+)/),wy),n=e.pop();return e.length&&(n.siblings=e),n})).reverse()):[];l.length?(l[0].name||(l[0].name=n),n=e.selector,r=xy(l,t)):r=xy([n],t);var d=by.select(n,r)[0]||r.firstChild;return yy(e.styles,(function(t,e){var n=s(t);n&&by.setStyle(d,e,n)})),yy(e.attributes,(function(t,e){var n=s(t);n&&by.setAttrib(d,e,n)})),yy(e.classes,(function(t){var e=s(t);by.hasClass(d,e)||by.addClass(d,e)})),t.fire("PreviewFormats"),by.setStyles(r,{position:"absolute",left:-65535}),t.getBody().appendChild(r),i=by.getStyle(t.getBody(),"fontSize",!0),i=/px$/.test(i)?parseInt(i,10):0,yy(a.split(" "),(function(e){var n=by.getStyle(d,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=by.getStyle(t.getBody(),e,!0),"#ffffff"===by.toHex(n).toLowerCase())||"color"===e&&"#000000"===by.toHex(n).toLowerCase())){if("font-size"===e&&/em|%$/.test(n)){if(0===i)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*i+"px"}"border"===e&&n&&(o+="padding:0 2px;"),o+=e+":"+n+";"}})),t.fire("AfterPreviewFormats"),by.remove(r),o},Ey=function(t){var e=function(t){var e={},n=function(t,r){t&&(f(t)?(h(r)||(r=[r]),U(r,(function(t){v(t.deep)&&(t.deep=!Jl(t)),v(t.split)&&(t.split=!Jl(t)||Ql(t)),v(t.remove)&&Jl(t)&&!Ql(t)&&(t.remove="none"),Jl(t)&&Ql(t)&&(t.mixed=!0,t.block_expand=!0),f(t.classes)&&(t.classes=t.classes.split(/\s+/))})),e[t]=r):ft(t,(function(t,e){n(e,t)})))};return n(function(t){var e={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(t,e,n){return Nn(t)&&t.hasAttribute("href")},onformat:function(e,n,r){Me.each(r,(function(n,r){t.setAttrib(e,r,n)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(t){var e;return null!==(e=null==t?void 0:t.customValue)&&void 0!==e?e:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Me.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(function(t){e[t]={block:t,remove:"all"}})),e}(t.dom)),n(function(t){return t.getParam("formats")}(t)),{get:function(t){return y(t)?e[t]:e},has:function(t){return yt(e,t)},register:n,unregister:function(t){return t&&e[t]&&delete e[t],e}}}(t),n=gs(null);return function(t){t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(var e=1;e<=6;e++)t.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])}(t),function(t){t.on("mouseup keydown",(function(e){!function(t,e){var n=t.selection,r=t.getBody();Pg(t,null,!1),8!==e&&46!==e||!n.isCollapsed()||n.getStart().innerHTML!==Mg||Pg(t,Cl(r,n.getStart())),37!==e&&39!==e||Pg(t,Cl(r,n.getStart()))}(t,e.keyCode)}))}(t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:function(e,n,r){!function(t,e,n,r){Kv(t).formatter.apply(e,n,r)}(t,e,n,r)},remove:function(e,n,r,i){!function(t,e,n,r,i){Kv(t).formatter.remove(e,n,r,i)}(t,e,n,r,i)},toggle:function(e,n,r){!function(t,e,n,r){Kv(t).formatter.toggle(e,n,r)}(t,e,n,r)},match:function(e,n,r,i){return function(t,e,n,r,i){return Kv(t).formatter.match(e,n,r,i)}(t,e,n,r,i)},closest:function(e){return function(t,e){return Kv(t).formatter.closest(e)}(t,e)},matchAll:function(e,n){return function(t,e,n){return Kv(t).formatter.matchAll(e,n)}(t,e,n)},matchNode:function(e,n,r,i){return function(t,e,n,r,i){return Kv(t).formatter.matchNode(e,n,r,i)}(t,e,n,r,i)},canApply:function(e){return function(t,e){return Kv(t).formatter.canApply(e)}(t,e)},formatChanged:function(e,r,i,o){return function(t,e,n,r,i,o){return Kv(t).formatter.formatChanged(e,n,r,i,o)}(t,n,e,r,i,o)},getCssText:M(_y,t)}},Sy=function(t){switch(t.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return!0;default:return!1}},Cy=function(t){var e=ws(),n=gs(0),r=gs(0),i={data:[],typing:!1,beforeChange:function(){!function(t,e,n){Kv(t).undoManager.beforeChange(e,n)}(t,n,e)},add:function(o,a){return function(t,e,n,r,i,o,a){return Kv(t).undoManager.add(e,n,r,i,o,a)}(t,i,r,n,e,o,a)},undo:function(){return function(t,e,n,r){return Kv(t).undoManager.undo(e,n,r)}(t,i,n,r)},redo:function(){return function(t,e,n){return Kv(t).undoManager.redo(e,n)}(t,r,i.data)},clear:function(){!function(t,e,n){Kv(t).undoManager.clear(e,n)}(t,i,r)},reset:function(){!function(t,e){Kv(t).undoManager.reset(e)}(t,i)},hasUndo:function(){return function(t,e,n){return Kv(t).undoManager.hasUndo(e,n)}(t,i,r)},hasRedo:function(){return function(t,e,n){return Kv(t).undoManager.hasRedo(e,n)}(t,i,r)},transact:function(e){return function(t,e,n,r){return Kv(t).undoManager.transact(e,n,r)}(t,i,n,e)},ignore:function(e){!function(t,e,n){Kv(t).undoManager.ignore(e,n)}(t,n,e)},extra:function(e,n){!function(t,e,n,r,i){Kv(t).undoManager.extra(e,n,r,i)}(t,i,r,e,n)}};return qv(t)||function(t,e,n){var r=gs(!1),i=function(t){Hv(e,!1,n),e.add({},t)};t.on("init",(function(){e.add()})),t.on("BeforeExecCommand",(function(t){var r=t.command;Sy(r)||(Yv(e,n),e.beforeChange())})),t.on("ExecCommand",(function(t){var e=t.command;Sy(e)||i(t)})),t.on("ObjectResizeStart cut",(function(){e.beforeChange()})),t.on("SaveContent ObjectResized blur",i),t.on("dragend",i),t.on("keyup",(function(n){var o=n.keyCode;n.isDefaultPrevented()||((o>=33&&o<=36||o>=37&&o<=40||45===o||n.ctrlKey)&&(i(),t.nodeChanged()),46!==o&&8!==o||t.nodeChanged(),r.get()&&e.typing&&!1===Uv(zv(t),e.data[0])&&(!1===t.isDirty()&&(t.setDirty(!0),t.fire("change",{level:e.data[0],lastLevel:null})),t.fire("TypingUndo"),r.set(!1),t.nodeChanged()))})),t.on("keydown",(function(t){var o=t.keyCode;if(!t.isDefaultPrevented())if(o>=33&&o<=36||o>=37&&o<=40||45===o)e.typing&&i(t);else{var a=t.ctrlKey&&!t.altKey||t.metaKey;!(o<16||o>20)||224===o||91===o||e.typing||a||(e.beforeChange(),Hv(e,!0,n),e.add({},t),r.set(!0))}})),t.on("mousedown",(function(t){e.typing&&i(t)})),t.on("input",(function(t){var e;t.inputType&&("insertReplacementText"===t.inputType||"insertText"===(e=t).inputType&&null===e.data||function(t){return"insertFromPaste"===t.inputType||"insertFromDrop"===t.inputType}(t))&&i(t)})),t.on("AddUndo Undo Redo ClearUndos",(function(e){e.isDefaultPrevented()||t.nodeChanged()}))}(t,i,n),function(t){t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo")}(t),i},ky=[9,27,zf.HOME,zf.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,zf.DOWN,zf.UP,zf.LEFT,zf.RIGHT].concat(_e.browser.isFirefox()?[224]:[]),My="data-mce-placeholder",Oy=function(t){return"keydown"===t.type||"keyup"===t.type},Ty=function(t){var e=t.keyCode;return e===zf.BACKSPACE||e===zf.DELETE},Ay=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Ny=function(t,e){return De(Ie(e),function(t){return t.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")}(t))},Iy=function(t,e,n){var r=function(t,e,n){return Y(ls.DOM.getParents(n.container(),"*",e),t)}(t,e,n);return R.from(r[r.length-1])},Py=function(t,e){if(!e)return e;var n=e.container(),r=e.offset();return t?xi(n)?Fn(n.nextSibling)?mu(n.nextSibling,0):mu.after(n):Ei(e)?mu(n,r+1):e:xi(n)?Fn(n.previousSibling)?mu(n.previousSibling,n.previousSibling.data.length):mu.before(n):Si(e)?mu(n,r-1):e},Dy=M(Py,!0),Ly=M(Py,!1),Ry=function(t){return si(t)||ci(t)},jy=function(t,e){return je(t,e)?Ur(e,Ry,function(t){return function(e){return Re(t,Ie(e.dom.parentNode))}}(t)):R.none()},By=function(t){t.dom.isEmpty(t.getBody())&&(t.setContent(""),function(t){var e=t.getBody(),n=e.firstChild&&t.dom.isBlock(e.firstChild)?e.firstChild:e;t.selection.setCursorLocation(n,0)}(t))},Fy=function(t,e){return{from:t,to:e}},zy=function(t,e){var n=Ie(t),r=Ie(e.container());return jy(n,r).map((function(t){return function(t,e){return{block:t,position:e}}(t,e)}))},$y=function(t){var e=Qe(t);return J(e,ii).fold(S(e),(function(t){return e.slice(0,t)}))},Gy=function(t){var e=$y(t);return U(e,mn),e},Vy=function(t,e){var n=Yh(e,t);return K(n.reverse(),(function(t){return Hi(t)})).each(mn)},Uy=function(t,e,n,r){if(Hi(n))return Uh(n),wl(n.dom);0===Y(Ke(r),(function(t){return!Hi(t)})).length&&Hi(e)&&fn(r,Ae("br"));var i=xl(n.dom,mu.before(r.dom));return U(Gy(e),(function(t){fn(r,t)})),Vy(t,e),i},Wy=function(t,e,n){if(Hi(n))return mn(n),Hi(e)&&Uh(e),wl(e.dom);var r=_l(n.dom);return U(Gy(e),(function(t){pn(n,t)})),Vy(t,e),r},Hy=function(t,e){yl(t,e.dom).map((function(t){return t.getNode()})).map(Ie).filter(ai).each(mn)},Yy=function(t,e,n){return Hy(!0,e),Hy(!1,n),function(t,e){return je(e,t)?function(t,e){var n=Yh(e,t);return R.from(n[n.length-1])}(e,t):R.none()}(e,n).fold(M(Wy,t,e,n),M(Uy,t,e,n))},Xy=function(t,e,n,r){return e?Yy(t,r,n):Yy(t,n,r)},qy=function(t,e){var n=Ie(t.getBody()),r=function(t,e,n){return n.collapsed?function(t,e,n){var r=zy(t,mu.fromRangeStart(n)),i=r.bind((function(n){return gl(e,t,n.position).bind((function(n){return zy(t,n).map((function(n){return function(t,e,n){return Vn(n.position.getNode())&&!1===Hi(n.block)?yl(!1,n.block.dom).bind((function(r){return r.isEqual(n.position)?gl(e,t,r).bind((function(e){return zy(t,e)})):R.some(n)})).getOr(n):n}(t,e,n)}))}))}));return Zn(r,i,Fy).filter((function(t){return function(t){return!1===Re(t.from.block,t.to.block)}(t)&&function(t){return Xe(t.from.block).bind((function(e){return Xe(t.to.block).filter((function(t){return Re(e,t)}))})).isSome()}(t)&&function(t){return!1===Hn(t.from.block.dom)&&!1===Hn(t.to.block.dom)}(t)}))}(t,e,n):R.none()}(n.dom,e,t.selection.getRng()).bind((function(t){return Xy(n,e,t.from.block,t.to.block)}));return r.each((function(e){t.selection.setRng(e.toRange())})),r.isSome()},Zy=function(t,e){var n=Ie(e),r=M(Re,t);return Vr(n,fi,r).isSome()},Ky=function(t){var e=Ie(t.getBody());return function(t,e){var n=xl(t.dom,mu.fromRangeStart(e)).isNone(),r=bl(t.dom,mu.fromRangeEnd(e)).isNone();return!function(t,e){return Zy(t,e.startContainer)||Zy(t,e.endContainer)}(t,e)&&n&&r}(e,t.selection.getRng())?function(t){return t.setContent(""),t.selection.setCursorLocation(),!0}(t):function(t,e){var n=e.getRng();return Zn(jy(t,Ie(n.startContainer)),jy(t,Ie(n.endContainer)),(function(r,i){return!1===Re(r,i)&&(n.deleteContents(),Xy(t,!0,r,i).each((function(t){e.setRng(t.toRange())})),!0)})).getOr(!1)}(e,t.selection)},Jy=function(t,e){return!t.selection.isCollapsed()&&Ky(t)},Qy=Wn,tb=Hn,eb=function(t,e,n,r,i){return R.from(e._selectionOverrides.showCaret(t,n,r,i))},nb=function(t,e){return t.fire("BeforeObjectSelected",{target:e}).isDefaultPrevented()?R.none():R.some(function(t){var e=t.ownerDocument.createRange();return e.selectNode(t),e}(e))},rb=function(t,e,n){var r=Hc(1,t.getBody(),e),i=mu.fromRangeStart(r),o=i.getNode();if(Cc(o))return eb(1,t,o,!i.isAtEnd(),!1);var a=i.getNode(!0);if(Cc(a))return eb(1,t,a,!1,!1);var s=t.dom.getParent(i.getNode(),(function(t){return tb(t)||Qy(t)}));return Cc(s)?eb(1,t,s,!1,n):R.none()},ib=function(t,e,n){return e.collapsed?rb(t,e,n).getOr(e):e},ob=function(t){return Gh(t)||Bh(t)},ab=function(t){return Vh(t)||Fh(t)},sb=function(t,e,n,r,i,o){return eb(r,t,o.getNode(!i),i,!0).each((function(n){if(e.collapsed){var r=e.cloneRange();i?r.setEnd(n.startContainer,n.startOffset):r.setStart(n.endContainer,n.endOffset),r.deleteContents()}else e.deleteContents();t.selection.setRng(n)})),function(t,e){Fn(e)&&0===e.data.length&&t.remove(e)}(t.dom,n),!0},ub=function(t,e){return function(t,e){var n=t.selection.getRng();if(!Fn(n.commonAncestorContainer))return!1;var r=e?yu.Forwards:yu.Backwards,i=fl(t.getBody()),o=M(Zc,e?i.next:i.prev),a=e?ob:ab,s=Xc(r,t.getBody(),n),u=Py(e,o(s));if(!u||!Kc(s,u))return!1;if(a(u))return sb(t,n,s.getNode(),r,e,u);var c=o(u);return!!(c&&a(c)&&Kc(u,c))&&sb(t,n,s.getNode(),r,e,c)}(t,e)},cb=_r([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),lb=function(t,e,n){return gl(e,t,n).bind((function(r){return i=r.getNode(),fi(Ie(i))||ci(Ie(i))||function(t,e,n,r){var i=function(e){return oi(Ie(e))&&!Fc(n,r,t)};return Yc(!e,n).fold((function(){return Yc(e,r).fold(N,i)}),i)}(t,e,n,r)?R.none():e&&Hn(r.getNode())||!1===e&&Hn(r.getNode(!0))?function(t,e,n,r){var i=r.getNode(!1===e);return jy(Ie(t),Ie(n.getNode())).map((function(t){return Hi(t)?cb.remove(t.dom):cb.moveToElement(i)})).orThunk((function(){return R.some(cb.moveToElement(i))}))}(t,e,n,r):e&&Vh(n)||!1===e&&Gh(n)?R.some(cb.moveToPosition(r)):R.none();var i}))},fb=function(t,e){return R.from(Lf(t.getBody(),e))},db=function(t,e){var n=t.selection.getNode();return fb(t,n).filter(Hn).fold((function(){return function(t,e,n){var r=Hc(e?1:-1,t,n),i=mu.fromRangeStart(r),o=Ie(t);return!1===e&&Vh(i)?R.some(cb.remove(i.getNode(!0))):e&&Gh(i)?R.some(cb.remove(i.getNode())):!1===e&&Gh(i)&&op(o,i)?ap(o,i).map((function(t){return cb.remove(t.getNode())})):e&&Vh(i)&&ip(o,i)?sp(o,i).map((function(t){return cb.remove(t.getNode())})):function(t,e,n){return function(t,e){var n=e.getNode(!1===t),r=t?"after":"before";return Nn(n)&&n.getAttribute("data-mce-caret")===r}(e,n)?function(t,e){return t&&Hn(e.nextSibling)?R.some(cb.moveToElement(e.nextSibling)):!1===t&&Hn(e.previousSibling)?R.some(cb.moveToElement(e.previousSibling)):R.none()}(e,n.getNode(!1===e)).fold((function(){return lb(t,e,n)}),R.some):lb(t,e,n).bind((function(e){return function(t,e,n){return n.fold((function(t){return R.some(cb.remove(t))}),(function(t){return R.some(cb.moveToElement(t))}),(function(n){return Fc(e,n,t)?R.none():R.some(cb.moveToPosition(n))}))}(t,n,e)}))}(t,e,i)}(t.getBody(),e,t.selection.getRng()).exists((function(n){return n.fold(function(t,e){return function(n){return t._selectionOverrides.hideFakeCaret(),Np(t,e,Ie(n)),!0}}(t,e),function(t,e){return function(n){var r=e?mu.before(n):mu.after(n);return t.selection.setRng(r.toRange()),!0}}(t,e),function(t){return function(e){return t.selection.setRng(e.toRange()),!0}}(t))}))}),I)},hb=function(t){var e=t.dom,n=t.selection,r=Lf(t.getBody(),n.getNode());if(Wn(r)&&e.isBlock(r)&&e.isEmpty(r)){var i=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(i),n.setRng(mu.before(i).toRange())}return!0},pb=function(t,e){return t.selection.isCollapsed()?db(t,e):function(t,e){var n=t.selection.getNode();return!(!Hn(n)||Yn(n))&&fb(t,n.parentNode).filter(Hn).fold((function(){var n;return n=Ie(t.getBody()),U(Ts(n,".mce-offscreen-selection"),mn),Np(t,e,Ie(t.selection.getNode())),By(t),!0}),I)}(t,e)},gb=function(t,e){return!!t.selection.isCollapsed()&&function(t,e){var n=mu.fromRangeStart(t.selection.getRng());return gl(e,t.getBody(),n).filter((function(t){return e?Rh(t):jh(t)})).bind((function(t){return R.from(zc(e?0:-1,t))})).exists((function(e){return t.selection.select(e),!0}))}(t,e)},vb=Fn,mb=function(t){return vb(t)&&t.data[0]===pi},yb=function(t){return vb(t)&&t.data[t.data.length-1]===pi},bb=function(t){return t.ownerDocument.createTextNode(pi)},xb=function(t,e){return t?function(t){if(vb(t.previousSibling))return yb(t.previousSibling)||t.previousSibling.appendData(pi),t.previousSibling;if(vb(t))return mb(t)||t.insertData(0,pi),t;var e=bb(t);return t.parentNode.insertBefore(e,t),e}(e):function(t){if(vb(t.nextSibling))return mb(t.nextSibling)||t.nextSibling.insertData(0,pi),t.nextSibling;if(vb(t))return yb(t)||t.appendData(pi),t;var e=bb(t);return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e}(e)},wb=M(xb,!0),_b=M(xb,!1),Eb=function(t,e){return Fn(t.container())?xb(e,t.container()):xb(e,t.getNode())},Sb=function(t,e){var n=e.get();return n&&t.container()===n&&xi(n)},Cb=function(t,e){return e.fold((function(e){mc(t.get());var n=wb(e);return t.set(n),R.some(mu(n,n.length-1))}),(function(e){return wl(e).map((function(e){if(Sb(e,t))return mu(t.get(),1);mc(t.get());var n=Eb(e,!0);return t.set(n),mu(n,1)}))}),(function(e){return _l(e).map((function(e){if(Sb(e,t))return mu(t.get(),t.get().length-1);mc(t.get());var n=Eb(e,!1);return t.set(n),mu(n,n.length-1)}))}),(function(e){mc(t.get());var n=_b(e);return t.set(n),R.some(mu(n,1))}))},kb=function(t,e){for(var n=0;n<t.length;n++){var r=t[n].apply(null,e);if(r.isSome())return r}return R.none()},Mb=_r([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Ob=function(t,e){return Bc(e,t)||t},Tb=function(t,e,n){var r=Dy(n),i=Ob(e,r.container());return Iy(t,i,r).fold((function(){return bl(i,r).bind(M(Iy,t,i)).map((function(t){return Mb.before(t)}))}),R.none)},Ab=function(t,e){return null===Cl(t,e)},Nb=function(t,e,n){return Iy(t,e,n).filter(M(Ab,e))},Ib=function(t,e,n){var r=Ly(n);return Nb(t,e,r).bind((function(t){return xl(t,r).isNone()?R.some(Mb.start(t)):R.none()}))},Pb=function(t,e,n){var r=Dy(n);return Nb(t,e,r).bind((function(t){return bl(t,r).isNone()?R.some(Mb.end(t)):R.none()}))},Db=function(t,e,n){var r=Ly(n),i=Ob(e,r.container());return Iy(t,i,r).fold((function(){return xl(i,r).bind(M(Iy,t,i)).map((function(t){return Mb.after(t)}))}),R.none)},Lb=function(t){return!1===(e=jb(t),"rtl"===ls.DOM.getStyle(e,"direction",!0)||(n=e.textContent,Ay.test(n)));var e,n},Rb=function(t,e,n){return kb([Tb,Ib,Pb,Db],[t,e,n]).filter(Lb)},jb=function(t){return t.fold(C,C,C,C)},Bb=function(t){return t.fold(S("before"),S("start"),S("end"),S("after"))},Fb=function(t){return t.fold(Mb.before,Mb.before,Mb.after,Mb.after)},zb=function(t){return t.fold(Mb.start,Mb.start,Mb.end,Mb.end)},$b=function(t,e,n,r,i,o){return Zn(Iy(e,n,r),Iy(e,n,i),(function(e,r){return e!==r&&function(t,e,n){var r=Bc(e,t),i=Bc(n,t);return r&&r===i}(n,e,r)?Mb.after(t?e:r):o})).getOr(o)},Gb=function(t,e){return t.fold(I,(function(t){return r=e,!(Bb(n=t)===Bb(r)&&jb(n)===jb(r));var n,r}))},Vb=function(t,e){return t?e.fold(_(R.some,Mb.start),R.none,_(R.some,Mb.after),R.none):e.fold(R.none,_(R.some,Mb.before),R.none,_(R.some,Mb.end))},Ub=function(t,e,n,r){var i=Py(t,r),o=Rb(e,n,i);return Rb(e,n,i).bind(M(Vb,t)).orThunk((function(){return function(t,e,n,r,i){var o=Py(t,i);return gl(t,n,o).map(M(Py,t)).fold((function(){return r.map(Fb)}),(function(i){return Rb(e,n,i).map(M($b,t,e,n,o,i)).filter(M(Gb,r))})).filter(Lb)}(t,e,n,o,r)}))};M(Ub,!1),M(Ub,!0);var Wb,Hb=function(t,e,n){var r=t?1:-1;return e.setRng(mu(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Wb||(Wb={}));var Yb,Xb=function(t,e){return t===yu.Backwards?et(e):e},qb=function(t,e,n){return t===yu.Forwards?e.next(n):e.prev(n)},Zb=function(t,e,n,r){return Vn(r.getNode(e===yu.Forwards))?Wb.Br:!1===Fc(n,r)?Wb.Block:Wb.Wrap},Kb=function(t,e,n,r){for(var i=fl(n),o=r,a=[];o;){var s=qb(e,i,o);if(!s)break;if(Vn(s.getNode(!1)))return e===yu.Forwards?{positions:Xb(e,a).concat([s]),breakType:Wb.Br,breakAt:R.some(s)}:{positions:Xb(e,a),breakType:Wb.Br,breakAt:R.some(s)};if(s.isVisible()){if(t(o,s)){var u=Zb(0,e,o,s);return{positions:Xb(e,a),breakType:u,breakAt:R.some(s)}}a.push(s),o=s}else o=s}return{positions:Xb(e,a),breakType:Wb.Eol,breakAt:R.none()}},Jb=function(t,e,n,r){return e(n,r).breakAt.map((function(r){var i=e(n,r).positions;return t===yu.Backwards?i.concat(r):[r].concat(i)})).getOr([])},Qb=function(t,e){return q(t,(function(t,n){return t.fold((function(){return R.some(n)}),(function(r){return Zn(ot(r.getClientRects()),ot(n.getClientRects()),(function(t,i){var o=Math.abs(e-t.left);return Math.abs(e-i.left)<=o?n:r})).or(t)}))}),R.none())},tx=function(t,e){return ot(e.getClientRects()).bind((function(e){return Qb(t,e.left)}))},ex=M(Kb,mu.isAbove,-1),nx=M(Kb,mu.isBelow,1),rx=M(Jb,-1,ex),ix=M(Jb,1,nx),ox=function(t){var e=function(e){return V(e,(function(e){var n=Us(e);return n.node=t,n}))};if(Nn(t))return e(t.getClientRects());if(Fn(t)){var n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}},ax=function(t){return Q(t,ox)};!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Yb||(Yb={}));var sx,ux,cx=function(t,e,n,r,i,o){var a=0,s=[],u=function(r){var o=ax([r]);-1===t&&(o=o.reverse());for(var u=0;u<o.length;u++){var l=o[u];if(!n(l,c)){if(s.length>0&&e(l,Mt(s))&&a++,l.line=a,i(l))return!0;s.push(l)}}},c=Mt(o.getClientRects());if(!c)return s;var l=o.getNode();return u(l),function(t,e,n,r){for(;r=jc(r,t,Fi,e);)if(n(r))return}(t,r,u,l),s},lx=M(cx,Yb.Up,Ys,Xs),fx=M(cx,Yb.Down,Xs,Ys),dx=function(t){return function(e){return function(t,e){return e.line>t}(t,e)}},hx=function(t){return function(e){return function(t,e){return e.line===t}(t,e)}},px=Hn,gx=jc,vx=function(t,e){return Math.abs(t.left-e)},mx=function(t,e){return Math.abs(t.right-e)},yx=function(t,e){return t>=e.left&&t<=e.right},bx=function(t,e){return t>=e.top&&t<=e.bottom},xx=function(t,e,n){return void 0===n&&(n=I),Ct(t,(function(t,r){if(yx(e,r))return n(r)?r:t;if(yx(e,t))return n(t)?t:r;var i=Math.min(vx(t,e),mx(t,e)),o=Math.min(vx(r,e),mx(r,e));return o===i&&bt(r,"node")&&px(r.node)||o<i?r:t}))},wx=function(t,e,n,r,i){var o=gx(r,t,Fi,e,!i);do{if(!o||n(o))return}while(o=gx(o,t,Fi,e))},_x=function(t,e){t.selection.setRng(e),Ed(t,t.selection.getRng())},Ex=function(t,e,n){return R.some(ib(t,e,n))},Sx=function(t,e,n,r,i,o){var a=e===yu.Forwards,s=fl(t.getBody()),u=M(Zc,a?s.next:s.prev),c=a?r:i;if(!n.collapsed){var l=Zs(n);if(o(l))return eb(e,t,l,e===yu.Backwards,!1)}var f=Xc(e,t.getBody(),n);if(c(f))return nb(t,f.getNode(!a));var d=Py(a,u(f)),h=Oi(n);if(!d)return h?R.some(n):R.none();if(c(d))return eb(e,t,d.getNode(!a),a,!1);var p=u(d);return p&&c(p)&&Kc(d,p)?eb(e,t,p.getNode(!a),a,!1):h?Ex(t,d.toRange(),!1):R.none()},Cx=function(t,e,n,r,i,o){var a=Xc(e,t.getBody(),n),s=Mt(a.getClientRects()),u=e===Yb.Down;if(!s)return R.none();var c,l=(u?fx:lx)(t.getBody(),dx(1),a),f=Y(l,hx(1)),d=s.left,h=xx(f,d);if(h&&o(h.node)){var p=Math.abs(d-h.left),g=Math.abs(d-h.right);return eb(e,t,h.node,p<g,!1)}if(c=r(a)?a.getNode():i(a)?a.getNode(!0):Zs(n)){var v=function(t,e,n,r){var i,o,a,s,u=fl(e),c=[],l=0,f=function(t){return Mt(t.getClientRects())};1===t?(i=u.next,o=Xs,a=Ys,s=mu.after(r)):(i=u.prev,o=Ys,a=Xs,s=mu.before(r));var d=f(s);do{if(s.isVisible()){var h=f(s);if(!a(h,d)){c.length>0&&o(h,Mt(c))&&l++;var p=Us(h);if(p.position=s,p.line=l,n(p))return c;c.push(p)}}}while(s=i(s));return c}(e,t.getBody(),dx(1),c),m=xx(Y(v,hx(1)),d);if(m)return Ex(t,m.position.toRange(),!1);if(m=Mt(Y(v,hx(0))))return Ex(t,m.position.toRange(),!1)}return 0===f.length?kx(t,u).filter(u?i:r).map((function(e){return ib(t,e.toRange(),!1)})):R.none()},kx=function(t,e){var n=t.selection.getRng(),r=t.getBody();if(e){var i=mu.fromRangeEnd(n),o=nx(r,i);return at(o.positions)}return i=mu.fromRangeStart(n),o=ex(r,i),ot(o.positions)},Mx=function(t,e,n){return kx(t,e).filter(n).exists((function(e){return t.selection.setRng(e.toRange()),!0}))},Ox=function(t,e){var n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},Tx=function(t,e){t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},Ax=function(t,e,n){return Cb(e,n).map((function(e){return Ox(t,e),n}))},Nx=function(t,e,n){return!!sc(t)&&function(t,e,n){var r=t.getBody(),i=mu.fromRangeStart(t.selection.getRng()),o=M(Ny,t);return Ub(n,o,r,i).bind((function(n){return Ax(t,e,n)}))}(t,e,n).isSome()},Ix=function(t,e,n){return!!sc(e)&&function(t,e){var n=e.selection.getRng(),r=t?mu.fromRangeEnd(n):mu.fromRangeStart(n);return!!function(t){return b(t.selection.getSel().modify)}(e)&&(t&&Ei(r)?Hb(!0,e.selection,r):!(t||!Si(r))&&Hb(!1,e.selection,r))}(t,e)},Px=function(t){var e=gs(null),n=M(Ny,t);return t.on("NodeChange",(function(r){!sc(t)||_e.browser.isIE()&&r.initial||(function(t,e,n){var r=V(Ts(Ie(e.getRoot()),'*[data-mce-selected="inline-boundary"]'),(function(t){return t.dom})),i=Y(r,t),o=Y(n,t);U(nt(i,o),M(Tx,!1)),U(nt(o,i),M(Tx,!0))}(n,t.dom,r.parents),function(t,e){if(t.selection.isCollapsed()&&!0!==t.composing&&e.get()){var n=mu.fromRangeStart(t.selection.getRng());mu.isTextPosition(n)&&!1===function(t){return Ei(t)||Si(t)}(n)&&(Ox(t,vc(e.get(),n)),e.set(null))}}(t,e),function(t,e,n,r){if(e.selection.isCollapsed()){var i=Y(r,t);U(i,(function(r){var i=mu.fromRangeStart(e.selection.getRng());Rb(t,e.getBody(),i).bind((function(t){return Ax(e,n,t)}))}))}}(n,t,e,r.parents))})),e},Dx=M(Ix,!0),Lx=M(Ix,!1),Rx=function(t,e,n){if(sc(t)){var r=kx(t,e).getOrThunk((function(){var n=t.selection.getRng();return e?mu.fromRangeEnd(n):mu.fromRangeStart(n)}));return Rb(M(Ny,t),t.getBody(),r).exists((function(e){var r=Fb(e);return Cb(n,r).exists((function(e){return Ox(t,e),!0}))}))}return!1},jx=function(t,e){return function(n){return Cb(e,n).exists((function(e){return Ox(t,e),!0}))}},Bx=function(t,e,n,r){var i=t.getBody(),o=M(Ny,t);t.undoManager.ignore((function(){t.selection.setRng(function(t,e){var n=document.createRange();return n.setStart(t.container(),t.offset()),n.setEnd(e.container(),e.offset()),n}(n,r)),t.execCommand("Delete"),Rb(o,i,mu.fromRangeStart(t.selection.getRng())).map(zb).map(jx(t,e))})),t.nodeChanged()},Fx=function(t,e,n){if(t.selection.isCollapsed()&&sc(t)){var r=mu.fromRangeStart(t.selection.getRng());return function(t,e,n,r){var i=function(t,e){return Bc(e,t)||t}(t.getBody(),r.container()),o=M(Ny,t),a=Rb(o,i,r);return a.bind((function(t){return n?t.fold(S(R.some(zb(t))),R.none,S(R.some(Fb(t))),R.none):t.fold(R.none,S(R.some(Fb(t))),R.none,S(R.some(zb(t))))})).map(jx(t,e)).getOrThunk((function(){var s=vl(n,i,r),u=s.bind((function(t){return Rb(o,i,t)}));return Zn(a,u,(function(){return Iy(o,i,r).exists((function(e){return!!function(t){return Zn(wl(t),_l(t),(function(e,n){var r=Py(!0,e),i=Py(!1,n);return bl(t,r).forall((function(t){return t.isEqual(i)}))})).getOr(!0)}(e)&&(Np(t,n,Ie(e)),!0)}))})).orThunk((function(){return u.bind((function(i){return s.map((function(i){return n?Bx(t,e,r,i):Bx(t,e,i,r),!0}))}))})).getOr(!1)}))}(t,e,n,r)}return!1},zx=function(t){return 1===rn(t)},$x=function(t,e){var n=Ie(t.getBody()),r=Ie(t.selection.getStart()),i=Y(function(t,e){var n=Yh(e,t);return J(n,ii).fold(S(n),(function(t){return n.slice(0,t)}))}(n,r),zx);return at(i).exists((function(n){var r,o=mu.fromRangeStart(t.selection.getRng());return!(!function(t,e,n){return Zn(wl(n),_l(n),(function(r,i){var o=Py(!0,r),a=Py(!1,i),s=Py(!1,e);return t?bl(n,s).exists((function(t){return t.isEqual(a)&&e.isEqual(o)})):xl(n,s).exists((function(t){return t.isEqual(o)&&e.isEqual(a)}))})).getOr(!0)}(e,o,n.dom)||(r=n,Sl(r.dom)&&Tg(r.dom))||(function(t,e,n,r){var i=M(jg,e),o=V(Y(r,i),(function(t){return t.dom}));if(0===o.length)Np(e,t,n);else{var a=function(t,e){var n=Ng(!1),r=Lg(e,n.dom);return fn(Ie(t),n),mn(Ie(t)),mu(r,0)}(n.dom,o);e.selection.setRng(a.toRange())}}(e,t,n,i),0))}))},Gx=function(t,e){return!!t.selection.isCollapsed()&&$x(t,e)},Vx=function(t,e,n){return t._selectionOverrides.hideFakeCaret(),Np(t,e,Ie(n)),!0},Ux=function(t,e){return t.selection.isCollapsed()?function(t,e){var n=e?Bh:Fh,r=e?yu.Forwards:yu.Backwards,i=Xc(r,t.getBody(),t.selection.getRng());return n(i)?Vx(t,e,i.getNode(!e)):R.from(Py(e,i)).filter((function(t){return n(t)&&Kc(i,t)})).exists((function(n){return Vx(t,e,n.getNode(!e))}))}(t,e):function(t,e){var n=t.selection.getNode();return!!Xn(n)&&Vx(t,e,n)}(t,e)},Wx=function(t){var e=parseInt(t,10);return isNaN(e)?0:e},Hx=function(t,e){return(t||"table"===Be(e)?"margin":"padding")+("rtl"===ir(e,"direction")?"-right":"-left")},Yx=function(t){var e=qx(t);return!t.mode.isReadOnly()&&(e.length>1||function(t,e){return tt(e,(function(e){var n=Hx(ec(t),e),r=ar(e,n).map(Wx).getOr(0);return"false"!==t.dom.getContentEditable(e.dom)&&r>0}))}(t,e))},Xx=function(t){return ui(t)||ci(t)},qx=function(t){return Y((e=t.selection.getSelectedBlocks(),V(e,Ie)),(function(t){return!Xx(t)&&!function(t){return Xe(t).exists(Xx)}(t)&&Ur(t,(function(t){return Wn(t.dom)||Hn(t.dom)})).exists((function(t){return Wn(t.dom)}))}));var e},Zx=function(t,e){var n=t.dom,r=t.selection,i=t.formatter,o=function(t){return t.getParam("indentation","40px","string")}(t),a=/[a-z%]+$/i.exec(o)[0],s=parseInt(o,10),u=ec(t),c=Vu(t);t.queryCommandState("InsertUnorderedList")||t.queryCommandState("InsertOrderedList")||""!==c||n.getParent(r.getNode(),n.isBlock)||i.apply("div"),U(qx(t),(function(t){!function(t,e,n,r,i,o){var a=Hx(n,Ie(o));if("outdent"===e){var s=Math.max(0,Wx(o.style[a])-r);t.setStyle(o,a,s?s+i:"")}else s=Wx(o.style[a])+r+i,t.setStyle(o,a,s)}(n,e,u,s,a,t.dom)}))},Kx=function(t,e){if(t.selection.isCollapsed()&&Yx(t)){var n=t.dom,r=t.selection.getRng(),i=mu.fromRangeStart(r),o=n.getParent(r.startContainer,n.isBlock);if(null!==o&&Jh(Ie(o),i))return Zx(t,"outdent"),!0}return!1},Jx=function(t,e){t.getDoc().execCommand(e,!1,null)},Qx=function(t){return void 0===t.touches||1!==t.touches.length?R.none():R.some(t.touches[0])},tw=function(t,e){return yt(t,e.nodeName)},ew=function(t,e){return!!Fn(e)||!!Nn(e)&&!tw(t,e)&&!Ll(e)},nw=function(t,e){if(Fn(e)){if(0===e.nodeValue.length)return!0;if(/^\s+$/.test(e.nodeValue)&&(!e.nextSibling||tw(t,e.nextSibling)))return!0}return!1},rw=function(t){var e,n,r,i=t.dom,o=t.selection,a=t.schema,s=a.getBlockElements(),u=o.getStart(),c=t.getBody(),l=Vu(t);if(u&&Nn(u)&&l){var f=c.nodeName.toLowerCase();if(a.isValidChild(f,l.toLowerCase())&&!function(t,e,n){return G(Hh(Ie(n),Ie(e)),(function(e){return tw(t,e.dom)}))}(s,c,u)){var d=o.getRng(),h=d.startContainer,p=d.startOffset,g=d.endContainer,v=d.endOffset,m=Yd(t);for(u=c.firstChild;u;)if(ew(s,u)){if(nw(s,u)){n=u,u=u.nextSibling,i.remove(n);continue}e||(e=i.create(l,Uu(t)),u.parentNode.insertBefore(e,u),r=!0),n=u,u=u.nextSibling,e.appendChild(n)}else e=null,u=u.nextSibling;r&&m&&(d.setStart(h,p),d.setEnd(g,v),o.setRng(d),t.nodeChanged())}}},iw=function(t,e){e.hasAttribute("data-mce-caret")&&(Mi(e),function(t){t.selection.setRng(t.selection.getRng())}(t),t.selection.scrollIntoView(e))},ow=function(t,e){var n=function(t){return Hr(Ie(t.getBody()),"*[data-mce-caret]").map((function(t){return t.dom})).getOrNull()}(t);if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void iw(t,n)):void(_i(n)&&(iw(t,n),t.undoManager.add()))},aw=Hn,sw=function(t,e,n){var r=fl(t.getBody()),i=M(Zc,1===e?r.next:r.prev);if(n.collapsed&&function(t){return""!==Vu(t)}(t)){var o=t.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!i(mu.fromRangeStart(n))){var a=function(t){var e=t.dom.create(Vu(t));return(!_e.ie||_e.ie>=11)&&(e.innerHTML='<br data-mce-bogus="1">'),e}(t);1===e?t.$(o).after(a):t.$(o).before(a),t.selection.select(a,!0),t.selection.collapse()}}},uw=function(t,e){return function(t,e){var n=e?yu.Forwards:yu.Backwards,r=t.selection.getRng();return function(t,e,n){return Sx(e,t,n,Gh,Vh,aw)}(n,t,r).orThunk((function(){return sw(t,n,r),R.none()}))}(t,e).exists((function(e){return _x(t,e),!0}))},cw=function(t,e){return function(t,e){var n=e?1:-1,r=t.selection.getRng();return function(t,e,n){return Cx(e,t,n,(function(t){return Gh(t)||zh(t)}),(function(t){return Vh(t)||$h(t)}),aw)}(n,t,r).orThunk((function(){return sw(t,n,r),R.none()}))}(t,e).exists((function(e){return _x(t,e),!0}))},lw=function(t,e){return Mx(t,e,e?Vh:Gh)},fw=function(t){return $(["figcaption"],Be(t))},dw=function(t){var e=document.createRange();return e.setStartBefore(t.dom),e.setEndBefore(t.dom),e},hw=function(t,e,n){n?pn(t,e):hn(t,e)},pw=function(t,e){var n=Ie(t.getBody()),r=mu.fromRangeStart(t.selection.getRng()),i=Vu(t),o=Uu(t);return function(t,e){var n=M(Re,e);return Ur(Ie(t.container()),ii,n).filter(fw)}(r,n).exists((function(){if(function(t,e,n){return e?function(t,e){return nx(t,e).breakAt.isNone()}(t.dom,n):function(t,e){return ex(t,e).breakAt.isNone()}(t.dom,n)}(n,e,r)){var a=function(t,e,n,r){return""===e?function(t,e){var n=Ae("br");return hw(t,n,e),dw(n)}(t,r):function(t,e,n,r){var i=Ae(n),o=Ae("br");return tr(i,r),pn(i,o),hw(t,i,e),dw(o)}(t,r,e,n)}(n,i,o,e);return t.selection.setRng(a),!0}return!1}))},gw=function(t,e){return!!t.selection.isCollapsed()&&pw(t,e)},vw=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(null,e)}},mw=function(t,e){return K(function(t,e){return Q(function(t){return V(t,(function(t){return Ot({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:w},t)}))}(t),(function(t){return function(t,e){return e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey}(t,e)?[t]:[]}))}(t,e),(function(t){return t.action()}))},yw=function(t,e){var n=e?yu.Forwards:yu.Backwards,r=t.selection.getRng();return Sx(t,n,r,Bh,Fh,Xn).exists((function(e){return _x(t,e),!0}))},bw=function(t,e){var n=e?1:-1,r=t.selection.getRng();return Cx(t,n,r,Bh,Fh,Xn).exists((function(e){return _x(t,e),!0}))},xw=function(t,e){return Mx(t,e,e?Fh:Bh)},ww=function(t,e,n,r,i){var o=Ts(Ie(n),"td,th,caption").map((function(t){return t.dom})),a=Y(function(t,e){return Q(e,(function(e){var n=function(t,e){return{left:t.left-e,top:t.top-e,right:t.right+-2,bottom:t.bottom+-2,width:t.width+e,height:t.height+e}}(Us(e.getBoundingClientRect()),-1);return[{x:n.left,y:t(n),cell:e},{x:n.right,y:t(n),cell:e}]}))}(t,o),(function(t){return e(t,i)}));return function(t,e,n){return q(t,(function(t,r){return t.fold((function(){return R.some(r)}),(function(t){var i=Math.sqrt(Math.abs(t.x-e)+Math.abs(t.y-n)),o=Math.sqrt(Math.abs(r.x-e)+Math.abs(r.y-n));return R.some(o<i?r:t)}))}),R.none())}(a,r,i).map((function(t){return t.cell}))},_w=M(ww,(function(t){return t.bottom}),(function(t,e){return t.y<e})),Ew=M(ww,(function(t){return t.top}),(function(t,e){return t.y>e})),Sw=function(t,e,n){var r=t(e,n);return function(t){return t.breakType===Wb.Wrap&&0===t.positions.length}(r)||!Vn(n.getNode())&&function(t){return t.breakType===Wb.Br&&1===t.positions.length}(r)?!function(t,e,n){return n.breakAt.exists((function(n){return t(e,n).breakAt.isSome()}))}(t,e,r):r.breakAt.isNone()},Cw=M(Sw,ex),kw=M(Sw,nx),Mw=function(t,e,n,r){var i=t.selection.getRng(),o=e?1:-1;return!(!Sc()||!function(t,e,n){var r=mu.fromRangeStart(e);return yl(!t,n).exists((function(t){return t.isEqual(r)}))}(e,i,n)||(eb(o,t,n,!e,!1).each((function(e){_x(t,e)})),0))},Ow=function(t,e,n){var r=function(t,e){var n=e.getNode(t);return Nn(n)&&"TABLE"===n.nodeName?R.some(n):R.none()}(!!e,n),i=!1===e;r.fold((function(){return _x(t,n.toRange())}),(function(r){return yl(i,t.getBody()).filter((function(t){return t.isEqual(n)})).fold((function(){return _x(t,n.toRange())}),(function(i){return function(t,e,n,r){var i=Vu(e);i?e.undoManager.transact((function(){var r=Ae(i);tr(r,Uu(e)),pn(r,Ae("br")),t?dn(Ie(n),r):fn(Ie(n),r);var o=e.dom.createRng();o.setStart(r.dom,0),o.setEnd(r.dom,0),_x(e,o)})):_x(e,r.toRange())}(e,t,r,n)}))}))},Tw=function(t,e,n,r){var i=t.selection.getRng(),o=mu.fromRangeStart(i),a=t.getBody();if(!e&&Cw(r,o)){var s=function(t,e,n){return function(t,e){return ot(e.getClientRects()).bind((function(e){return _w(t,e.left,e.top)})).bind((function(t){return tx(_l(n=t).map((function(t){return ex(n,t).positions.concat(t)})).getOr([]),e);var n}))}(e,n).orThunk((function(){return ot(n.getClientRects()).bind((function(n){return Qb(rx(t,mu.before(e)),n.left)}))})).getOr(mu.before(e))}(a,n,o);return Ow(t,e,s),!0}return!(!e||!kw(r,o))&&(s=function(t,e,n){return function(t,e){return at(e.getClientRects()).bind((function(e){return Ew(t,e.left,e.top)})).bind((function(t){return tx(wl(n=t).map((function(t){return[t].concat(nx(n,t).positions)})).getOr([]),e);var n}))}(e,n).orThunk((function(){return ot(n.getClientRects()).bind((function(n){return Qb(ix(t,mu.after(e)),n.left)}))})).getOr(mu.after(e))}(a,n,o),Ow(t,e,s),!0)},Aw=function(t,e,n){return R.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind((function(r){return R.from(t.dom.getParent(r,"table")).map((function(i){return n(t,e,i,r)}))})).getOr(!1)},Nw=function(t,e){return Aw(t,e,Mw)},Iw=function(t,e){return Aw(t,e,Tw)},Pw=function(t,e){var n,r=e,i=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(e){if(/^(LI|DT|DD)$/.test(e.nodeName)){var a=function(t){for(;t;){if(1===t.nodeType||3===t.nodeType&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}}(e.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&e.insertBefore(i.doc.createTextNode(hi),e.firstChild)}var s=i.createRng();if(e.normalize(),e.hasChildNodes()){for(var u=new ei(e,e);n=u.current();){if(Fn(n)){s.setStart(n,0),s.setEnd(n,0);break}if(o[n.nodeName.toLowerCase()]){s.setStartBefore(n),s.setEndBefore(n);break}r=n,n=u.next()}n||(s.setStart(r,0),s.setEnd(r,0))}else Vn(e)?e.nextSibling&&i.isBlock(e.nextSibling)?(s.setStartBefore(e),s.setEndBefore(e)):(s.setStartAfter(e),s.setEndAfter(e)):(s.setStart(e,0),s.setEnd(e,0));t.selection.setRng(s),Ed(t,s)}},Dw=function(t){return R.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock))},Lw=function(t,e){return t&&t.parentNode&&t.parentNode.nodeName===e},Rw=function(t){return t&&/^(OL|UL|LI)$/.test(t.nodeName)},jw=function(t){var e=t.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:t},Bw=function(t,e,n){for(var r=t[n?"firstChild":"lastChild"];r&&!Nn(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},Fw=function(t,e){return e&&"A"===e.nodeName&&t.isEmpty(e)},zw=function(t){t.innerHTML='<br data-mce-bogus="1">'},$w=function(t,e){return t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e},Gw=function(t,e){return e&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==t.getContentEditable(e)},Vw=function(t,e,n){return!1===Fn(e)?n:t?1===n&&e.data.charAt(n-1)===pi?0:n:n===e.data.length-1&&e.data.charAt(n)===pi?e.data.length:n},Uw=function(t,e){var n,r,i=t.getRoot();for(n=e;n!==i&&"false"!==t.getContentEditable(n);)"true"===t.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},Ww=function(t,e){var n=Vu(t);n&&n.toLowerCase()===e.tagName.toLowerCase()&&function(t,e,n){var r=t.dom;R.from(n.style).map(r.parseStyle).each((function(t){var n=sr(Ie(e)),i=Ot(Ot({},n),t);r.setStyles(e,i)}));var i=R.from(n.class).map((function(t){return t.split(/\s+/)})),o=R.from(e.className).map((function(t){return Y(t.split(/\s+/),(function(t){return""!==t}))}));Zn(i,o,(function(t,n){var i=Y(n,(function(e){return!$(t,e)})),o=Tt(Tt([],t,!0),i,!0);r.setAttrib(e,"class",o.join(" "))}));var a=["style","class"],s=vt(n,(function(t,e){return!$(a,e)}));r.setAttribs(e,s)}(t,e,Uu(t))},Hw=function(t,e){var n,r,i,o,a,s,u,c,l,f,d=t.dom,h=t.schema,p=h.getNonEmptyElements(),g=t.selection.getRng(),v=function(e){var n,i,a,s=r,u=h.getTextInlineElements();if(a=n=e||"TABLE"===c||"HR"===c?d.create(e||l):o.cloneNode(!1),!1===function(t){return t.getParam("keep_styles",!0)}(t))d.setAttrib(n,"style",null),d.setAttrib(n,"class",null);else do{if(u[s.nodeName]){if(Sl(s)||Ll(s))continue;i=s.cloneNode(!1),d.setAttrib(i,"id",""),n.hasChildNodes()?(i.appendChild(n.firstChild),n.appendChild(i)):(a=i,n.appendChild(i))}}while((s=s.parentNode)&&s!==w);return Ww(t,n),zw(a),n},m=function(t){var e,n,a=Vw(t,r,i);if(Fn(r)&&(t?a>0:a<r.nodeValue.length))return!1;if(r.parentNode===o&&f&&!t)return!0;if(t&&Nn(r)&&r===o.firstChild)return!0;if($w(r,"TABLE")||$w(r,"HR"))return f&&!t||!f&&t;var s=new ei(r,o);for(Fn(r)&&(t&&0===a?s.prev():t||a!==r.nodeValue.length||s.next());e=s.current();){if(Nn(e)){if(!e.getAttribute("data-mce-bogus")&&(n=e.nodeName.toLowerCase(),p[n]&&"br"!==n))return!1}else if(Fn(e)&&!$i(e.nodeValue))return!1;t?s.prev():s.next()}return!0},y=function(){a=/^(H[1-6]|PRE|FIGURE)$/.test(c)&&"HGROUP"!==_?v(l):v(),function(t){return t.getParam("end_container_on_empty_block",!1)}(t)&&Gw(d,u)&&d.isEmpty(o)?a=d.split(u,o):d.insertAfter(a,o),Pw(t,a)};td(d,g).each((function(t){g.setStart(t.startContainer,t.startOffset),g.setEnd(t.endContainer,t.endOffset)})),r=g.startContainer,i=g.startOffset,l=Vu(t);var b=!(!e||!e.shiftKey),x=!(!e||!e.ctrlKey);Nn(r)&&r.hasChildNodes()&&(f=i>r.childNodes.length-1,r=r.childNodes[Math.min(i,r.childNodes.length-1)]||r,i=f&&Fn(r)?r.nodeValue.length:0);var w=Uw(d,r);if(w){(l&&!b||!l&&b)&&(r=function(t,e,n,r,i){var o,a,s,u,c,l,f=e||"P",d=t.dom,h=Uw(d,r);if(!(a=d.getParent(r,d.isBlock))||!Gw(d,a)){if(l=(a=a||h)===t.getBody()||function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)}(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return o=d.create(f),Ww(t,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(u=r;u.parentNode!==a;)u=u.parentNode;for(;u&&!d.isBlock(u);)s=u,u=u.previousSibling;if(s&&t.schema.isValidChild(l,f.toLowerCase())){for(o=d.create(f),Ww(t,o),s.parentNode.insertBefore(o,s),u=s;u&&!d.isBlock(u);)c=u.nextSibling,o.appendChild(u),u=c;n.setStart(r,i),n.setEnd(r,i)}}return r}(t,l,g,r,i)),o=d.getParent(r,d.isBlock),u=o?d.getParent(o.parentNode,d.isBlock):null,c=o?o.nodeName.toUpperCase():"";var _=u?u.nodeName.toUpperCase():"";"LI"!==_||x||(o=u,u=u.parentNode,c=_),/^(LI|DT|DD)$/.test(c)&&d.isEmpty(o)?function(t,e,n,r,i){var o=t.dom,a=t.selection.getRng();if(n!==t.getBody()){var s;Rw(s=n)&&Rw(s.parentNode)&&(i="LI");var u=i?e(i):o.create("BR");if(Bw(n,r,!0)&&Bw(n,r,!1))if(Lw(n,"LI")){var c=jw(n);o.insertAfter(u,c),function(t){var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.firstChild)===t}(n)?o.remove(c):o.remove(n)}else o.replace(u,n);else if(Bw(n,r,!0))Lw(n,"LI")?(o.insertAfter(u,jw(n)),u.appendChild(o.doc.createTextNode(" ")),u.appendChild(n)):n.parentNode.insertBefore(u,n),o.remove(r);else if(Bw(n,r,!1))o.insertAfter(u,jw(n)),o.remove(r);else{n=jw(n);var l=a.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var f=l.extractContents();"LI"===i&&function(t,e){return t.firstChild&&"LI"===t.firstChild.nodeName}(f)?(u=f.firstChild,o.insertAfter(f,n)):(o.insertAfter(f,n),o.insertAfter(u,n)),o.remove(r)}Pw(t,u)}}(t,v,u,o,l):l&&o===t.getBody()||(l=l||"P",bi(o)?(a=Mi(o),d.isEmpty(o)&&zw(o),Ww(t,a),Pw(t,a)):m()?y():m(!0)?(a=o.parentNode.insertBefore(v(),o),Pw(t,$w(o,"HR")?a:o)):(n=function(t){var e=t.cloneRange();return e.setStart(t.startContainer,Vw(!0,t.startContainer,t.startOffset)),e.setEnd(t.endContainer,Vw(!1,t.endContainer,t.endOffset)),e}(g).cloneRange(),n.setEndAfter(o),function(t){U(Os(Ie(t),Ge),(function(t){var e=t.dom;e.nodeValue=vi(e.nodeValue)}))}(s=n.extractContents()),function(t){do{Fn(t)&&(t.nodeValue=t.nodeValue.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)}(s),a=s.firstChild,d.insertAfter(s,o),function(t,e,n){var r,i=n,o=[];if(i){for(;i=i.firstChild;){if(t.isBlock(i))return;Nn(i)&&!e[i.nodeName.toLowerCase()]&&o.push(i)}for(r=o.length;r--;)(!(i=o[r]).hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue||Fw(t,i))&&t.remove(i)}}(d,p,a),function(t,e){e.normalize();var n=e.lastChild;n&&!/^(left|right)$/gi.test(t.getStyle(n,"float",!0))||t.add(e,"br")}(d,o),d.isEmpty(o)&&zw(o),a.normalize(),d.isEmpty(a)?(d.remove(a),y()):(Ww(t,a),Pw(t,a))),d.setAttrib(a,"id",""),t.fire("NewBlock",{newBlock:a}))}},Yw=function(t,e,n){var r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),Ed(t,r)},Xw=function(t,e){var n=Ae("br");fn(Ie(e),n),t.undoManager.add()},qw=function(t,e){Zw(t.getBody(),e)||dn(Ie(e),Ae("br"));var n=Ae("br");dn(Ie(e),n),Yw(t,n.dom,!1),t.undoManager.add()},Zw=function(t,e){return n=mu.after(e),!!Vn(n.getNode())||bl(t,mu.after(e)).map((function(t){return Vn(t.getNode())})).getOr(!1);var n},Kw=function(t){return t&&"A"===t.nodeName&&"href"in t},Jw=function(t){return t.fold(N,Kw,Kw,N)},Qw=function(t,e){e.fold(w,M(Xw,t),M(qw,t),w)},t_=function(t,e){var n=function(t){var e=M(Ny,t),n=mu.fromRangeStart(t.selection.getRng());return Rb(e,t.getBody(),n).filter(Jw)}(t);n.isSome()?n.each(M(Qw,t)):function(t,e){var n,r,i=t.selection,o=t.dom,a=i.getRng();td(o,a).each((function(t){a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset)}));var s=a.startOffset,u=a.startContainer;if(1===u.nodeType&&u.hasChildNodes()){var c=s>u.childNodes.length-1;u=u.childNodes[Math.min(s,u.childNodes.length-1)]||u,s=c&&3===u.nodeType?u.nodeValue.length:0}var l=o.getParent(u,o.isBlock),f=l?o.getParent(l.parentNode,o.isBlock):null,d=f?f.nodeName.toUpperCase():"",h=!(!e||!e.ctrlKey);"LI"!==d||h||(l=f),u&&3===u.nodeType&&s>=u.nodeValue.length&&(function(t,e,n){for(var r,i=new ei(e,n),o=t.getNonEmptyElements();r=i.next();)if(o[r.nodeName.toLowerCase()]||r.length>0)return!0}(t.schema,u,l)||(n=o.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=o.create("br"),xu(o,a,n),Yw(t,n,r),t.undoManager.add()}(t,e)},e_=function(t,e){return Dw(t).filter((function(t){return e.length>0&&De(Ie(t),e)})).isSome()},n_=_r([{br:[]},{block:[]},{none:[]}]),r_=function(t,e){return function(t){return e_(t,function(t){return t.getParam("no_newline_selector","")}(t))}(t)},i_=function(t){return function(e,n){return""===Vu(e)===t}},o_=function(t){return function(e,n){return function(t){return Dw(t).filter((function(t){return ci(Ie(t))})).isSome()}(e)===t}},a_=function(t,e){return function(n,r){var i=function(t){return Dw(t).fold(S(""),(function(t){return t.nodeName.toUpperCase()}))}(n)===t.toUpperCase();return i===e}},s_=function(t){return a_("pre",t)},u_=function(t){return function(e,n){return function(t){return t.getParam("br_in_pre",!0)}(e)===t}},c_=function(t,e){return function(t){return e_(t,function(t){return t.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(t))}(t)},l_=function(t,e){return e},f_=function(t){var e=Vu(t),n=function(t,e){var n,r,i=t.getRoot();for(n=e;n!==i&&"false"!==t.getContentEditable(n);)"true"===t.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i}(t.dom,t.selection.getStart());return n&&t.schema.isValidChild(n.nodeName,e||"P")},d_=function(t,e){return function(n,r){return q(t,(function(t,e){return t&&e(n,r)}),!0)?R.some(e):R.none()}},h_=function(t,e){(function(t,e){return kb([d_([r_],n_.none()),d_([a_("summary",!0)],n_.br()),d_([s_(!0),u_(!1),l_],n_.br()),d_([s_(!0),u_(!1)],n_.block()),d_([s_(!0),u_(!0),l_],n_.block()),d_([s_(!0),u_(!0)],n_.br()),d_([o_(!0),l_],n_.br()),d_([o_(!0)],n_.block()),d_([i_(!0),l_,f_],n_.block()),d_([i_(!0)],n_.br()),d_([c_],n_.br()),d_([i_(!1),l_],n_.br()),d_([f_],n_.block())],[t,!(!e||!e.shiftKey)]).getOr(n_.none())})(t,e).fold((function(){t_(t,e)}),(function(){Hw(t,e)}),w)},p_=he().browser,g_=he(),v_=function(t){return t.stopImmediatePropagation()},m_=function(t){return t.keyCode===zf.PAGE_UP||t.keyCode===zf.PAGE_DOWN},y_=function(t,e,n){n&&!t.get()?e.on("NodeChange",v_,!0):!n&&t.get()&&e.off("NodeChange",v_),t.set(n)},b_=function(t,e){var n=e.container(),r=e.offset();return Fn(n)?(n.insertData(r,t),R.some(mu(n,r+t.length))):qc(e).map((function(n){var r=Ne(t);return e.isAtEnd()?dn(n,r):fn(n,r),mu(r.dom,t.length)}))},x_=M(b_,hi),w_=M(b_," "),__=function(t,e){return function(n){return function(t,e){return!dp(e)&&(function(t,e){return function(t,e){return xl(t.dom,e).isNone()}(t,e)||function(t,e){return bl(t.dom,e).isNone()}(t,e)||Jh(t,e)||Qh(t,e)||op(t,e)||ip(t,e)}(t,e)||lp(t,e)||fp(t,e))}(t,n)?x_(e):w_(e)}},E_=function(t){var e=mu.fromRangeStart(t.selection.getRng()),n=Ie(t.getBody());if(t.selection.isCollapsed()){var r=M(Ny,t),i=mu.fromRangeStart(t.selection.getRng());return Rb(r,t.getBody(),i).bind(function(t){return function(e){return e.fold((function(e){return xl(t.dom,mu.before(e))}),(function(t){return wl(t)}),(function(t){return _l(t)}),(function(e){return bl(t.dom,mu.after(e))}))}}(n)).bind(__(n,e)).exists(function(t){return function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}}(t))}return!1},S_=function(t){var e=Px(t);return function(t){t.on("keyup compositionstart",M(ow,t))}(t),function(t,e){t.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(t,e,n){var r=he().os;mw([{keyCode:zf.RIGHT,action:vw(uw,t,!0)},{keyCode:zf.LEFT,action:vw(uw,t,!1)},{keyCode:zf.UP,action:vw(cw,t,!1)},{keyCode:zf.DOWN,action:vw(cw,t,!0)},{keyCode:zf.RIGHT,action:vw(Nw,t,!0)},{keyCode:zf.LEFT,action:vw(Nw,t,!1)},{keyCode:zf.UP,action:vw(Iw,t,!1)},{keyCode:zf.DOWN,action:vw(Iw,t,!0)},{keyCode:zf.RIGHT,action:vw(yw,t,!0)},{keyCode:zf.LEFT,action:vw(yw,t,!1)},{keyCode:zf.UP,action:vw(bw,t,!1)},{keyCode:zf.DOWN,action:vw(bw,t,!0)},{keyCode:zf.RIGHT,action:vw(Nx,t,e,!0)},{keyCode:zf.LEFT,action:vw(Nx,t,e,!1)},{keyCode:zf.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:vw(Dx,t,e)},{keyCode:zf.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:vw(Lx,t,e)},{keyCode:zf.UP,action:vw(gw,t,!1)},{keyCode:zf.DOWN,action:vw(gw,t,!0)}],n).each((function(t){n.preventDefault()}))}(t,e,n)}))}(t,e),function(t,e){t.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(t,e,n){mw([{keyCode:zf.BACKSPACE,action:vw(Kx,t,!1)},{keyCode:zf.BACKSPACE,action:vw(pb,t,!1)},{keyCode:zf.DELETE,action:vw(pb,t,!0)},{keyCode:zf.BACKSPACE,action:vw(ub,t,!1)},{keyCode:zf.DELETE,action:vw(ub,t,!0)},{keyCode:zf.BACKSPACE,action:vw(Fx,t,e,!1)},{keyCode:zf.DELETE,action:vw(Fx,t,e,!0)},{keyCode:zf.BACKSPACE,action:vw(rg,t,!1)},{keyCode:zf.DELETE,action:vw(rg,t,!0)},{keyCode:zf.BACKSPACE,action:vw(gb,t,!1)},{keyCode:zf.DELETE,action:vw(gb,t,!0)},{keyCode:zf.BACKSPACE,action:vw(Ux,t,!1)},{keyCode:zf.DELETE,action:vw(Ux,t,!0)},{keyCode:zf.BACKSPACE,action:vw(Jy,t,!1)},{keyCode:zf.DELETE,action:vw(Jy,t,!0)},{keyCode:zf.BACKSPACE,action:vw(qy,t,!1)},{keyCode:zf.DELETE,action:vw(qy,t,!0)},{keyCode:zf.BACKSPACE,action:vw(Gx,t,!1)},{keyCode:zf.DELETE,action:vw(Gx,t,!0)}],n).each((function(t){n.preventDefault()}))}(t,e,n)})),t.on("keyup",(function(e){!1===e.isDefaultPrevented()&&function(t,e){mw([{keyCode:zf.BACKSPACE,action:vw(hb,t)},{keyCode:zf.DELETE,action:vw(hb,t)}],e)}(t,e)}))}(t,e),function(t){t.on("keydown",(function(e){e.keyCode===zf.ENTER&&function(t,e){var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact((function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),h_(t,e)})))}(t,e)}))}(t),function(t){t.on("keydown",(function(e){!1===e.isDefaultPrevented()&&function(t,e){mw([{keyCode:zf.SPACEBAR,action:vw(E_,t)}],e).each((function(t){e.preventDefault()}))}(t,e)}))}(t),function(t){!function(t){var e=_s((function(){t.composing||bp(t)}),0);p_.isIE()&&(t.on("keypress",(function(t){e.throttle()})),t.on("remove",(function(t){e.cancel()})))}(t),t.on("input",(function(e){!1===e.isComposing&&bp(t)}))}(t),function(t,e){t.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(t,e,n){mw([{keyCode:zf.END,action:vw(lw,t,!0)},{keyCode:zf.HOME,action:vw(lw,t,!1)},{keyCode:zf.END,action:vw(xw,t,!0)},{keyCode:zf.HOME,action:vw(xw,t,!1)},{keyCode:zf.END,action:vw(Rx,t,!0,e)},{keyCode:zf.HOME,action:vw(Rx,t,!1,e)}],n).each((function(t){n.preventDefault()}))}(t,e,n)}))}(t,e),function(t,e){if(!g_.os.isOSX()){var n=gs(!1);t.on("keydown",(function(e){m_(e)&&y_(n,t,!0)})),t.on("keyup",(function(r){!1===r.isDefaultPrevented()&&function(t,e,n){mw([{keyCode:zf.PAGE_UP,action:vw(Rx,t,!1,e)},{keyCode:zf.PAGE_DOWN,action:vw(Rx,t,!0,e)}],n)}(t,e,r),m_(r)&&n.get()&&(y_(n,t,!1),t.nodeChanged())}))}}(t,e),e},C_=function(){function t(t){var e;this.lastPath=[],this.editor=t;var n=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",(function(n){var r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==n.type&&Wf(i,e)||t.fire("SelectionChange"),e=i})),t.on("contextmenu",(function(){t.fire("SelectionChange")})),t.on("SelectionChange",(function(){var e=t.selection.getStart(!0);!e||!_e.range&&t.selection.isCollapsed()||kf(t)&&!n.isSameElementPath(e)&&t.dom.isChildOf(e,t.getBody())&&t.nodeChanged({selectionChange:!0})})),t.on("mouseup",(function(e){!e.isDefaultPrevented()&&kf(t)&&("IMG"===t.selection.getNode().nodeName?Jr.setEditorTimeout(t,(function(){t.nodeChanged()})):t.nodeChanged())}))}return t.prototype.nodeChanged=function(t){var e,n,r,i=this.editor.selection;this.editor.initialized&&i&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),(e=i.getStart(!0)||r).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(e,r)||(e=r),n=[],this.editor.dom.getParent(e,(function(t){if(t===r)return!0;n.push(t)})),(t=t||{}).element=e,t.parents=n,this.editor.fire("NodeChange",t))},t.prototype.isSameElementPath=function(t){var e,n=this.editor.$(t).parentsUntil(this.editor.getBody()).add(t);if(n.length===this.lastPath.length){for(e=n.length;e>=0&&n[e]===this.lastPath[e];e--);if(-1===e)return this.lastPath=n,!0}return this.lastPath=n,!1},t}(),k_=function(t){return Nn(t)&&si(Ie(t))},M_=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,r=n.documentElement,i=n.defaultView;return{top:e.top+i.pageYOffset-r.clientTop,left:e.left+i.pageXOffset-r.clientLeft}},O_=Hn,T_=Wn,A_=function(t,e,n,r){var i=t.dom,o=e.cloneNode(!0);i.setStyles(o,{width:n,height:r}),i.setAttrib(o,"data-mce-selected",null);var a=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),i.setStyles(o,{margin:0,boxSizing:"border-box"}),a.appendChild(o),a},N_=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},I_=function(t){t.on((function(t){N_(t.ghost)})),t.clear()},P_=function(t){var e=ws(),n=ls.DOM,r=document,i=function(t,e){return function(n){if(function(t){return 0===t.button}(n)){var r=K(e.dom.getParents(n.target),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var n=0;n<t.length;n++)if(t[n](e))return!0;return!1}}(O_,T_)).getOr(null);if(s=e.getBody(),O_(u=r)&&u!==s){var i=e.dom.getPos(r),o=e.getBody(),a=e.getDoc().documentElement;t.set({element:r,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(e.inline?o.scrollWidth:a.offsetWidth)-2,maxY:(e.inline?o.scrollHeight:a.offsetHeight)-2,relX:n.pageX-i.x,relY:n.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:A_(e,r,r.offsetWidth,r.offsetHeight)})}}var s,u}}(e,t),o=function(t,e){var n=Jr.throttle((function(t,n){e._selectionOverrides.hideFakeCaret(),e.selection.placeCaretAt(t,n)}),0);return e.on("remove",n.stop),function(r){return t.on((function(t){var i,o,a=Math.max(Math.abs(r.screenX-t.screenX),Math.abs(r.screenY-t.screenY));if(!t.dragging&&a>10){if(e.fire("dragstart",{target:t.element}).isDefaultPrevented())return;t.dragging=!0,e.focus()}if(t.dragging){var s=function(t,e){return{pageX:e.pageX-t.relX,pageY:e.pageY+5}}(t,function(t,e){return n=function(t){return t.inline?M_(t.getBody()):{left:0,top:0}}(t),r=function(t){var e=t.getBody();return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:0,top:0}}(t),i=function(t,e){if(e.target.ownerDocument!==t.getDoc()){var n=M_(t.getContentAreaContainer()),r=function(t){var e=t.getBody(),n=t.getDoc().documentElement,r={left:e.scrollLeft,top:e.scrollTop},i={left:e.scrollLeft||n.scrollLeft,top:e.scrollTop||n.scrollTop};return t.inline?r:i}(t);return{left:e.pageX-n.left+r.left,top:e.pageY-n.top+r.top}}return{left:e.pageX,top:e.pageY}}(t,e),{pageX:i.left-n.left+r.left,pageY:i.top-n.top+r.top};var n,r,i}(e,r));i=t.ghost,o=e.getBody(),i.parentNode!==o&&o.appendChild(i),function(t,e,n,r,i,o){var a=0,s=0;t.style.left=e.pageX+"px",t.style.top=e.pageY+"px",e.pageX+n>i&&(a=e.pageX+n-i),e.pageY+r>o&&(s=e.pageY+r-o),t.style.width=n-a+"px",t.style.height=r-s+"px"}(t.ghost,s,t.width,t.height,t.maxX,t.maxY),n(r.clientX,r.clientY)}}))}}(e,t),a=function(t,e){return function(n){t.on((function(t){if(t.dragging){if(function(t,e,n){return e!==n&&!t.dom.isChildOf(e,n)&&!O_(e)}(e,3===(o=e.selection.getSel().getRangeAt(0).startContainer).nodeType?o.parentNode:o,t.element)){var r=((i=t.element.cloneNode(!0)).removeAttribute("data-mce-selected"),i);e.fire("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||e.undoManager.transact((function(){N_(t.element),e.insertContent(e.dom.getOuterHTML(r)),e._selectionOverrides.hideFakeCaret()}))}e.fire("dragend")}var i,o})),I_(t)}}(e,t),s=function(t,e){return function(){t.on((function(t){t.dragging&&e.fire("dragend")})),I_(t)}}(e,t);t.on("mousedown",i),t.on("mousemove",o),t.on("mouseup",a),n.bind(r,"mousemove",o),n.bind(r,"mouseup",s),t.on("remove",(function(){n.unbind(r,"mousemove",o),n.unbind(r,"mouseup",s)})),t.on("keydown",(function(t){t.keyCode===zf.ESC&&s()}))},D_=Wn,L_=Hn,R_=function(t,e){return Lf(t.getBody(),e)},j_=function(t){var e,n=t.selection,r=t.dom,i=r.isBlock,o=t.getBody(),a=Ec(t,o,i,(function(){return Yd(t)})),s="sel-"+r.uniqueId(),u="data-mce-selected",c=function(t){return t!==o&&(L_(t)||Xn(t))&&r.isChildOf(t,o)},l=function(t){return Gh(t)||Vh(t)||Bh(t)||Fh(t)},f=function(t){t&&n.setRng(t)},d=n.getRng,h=function(e,r,i,o){return void 0===o&&(o=!0),t.fire("ShowCaret",{target:r,direction:e,before:i}).isDefaultPrevented()?null:(o&&n.scrollIntoView(r,-1===e),a.show(i,r))},p=function(t){return wi(t)||Ci(t)||ki(t)},g=function(t){return p(t.startContainer)||p(t.endContainer)},v=function(i,a){if(!i)return null;if(i.collapsed){if(!g(i)){var l=a?1:-1,f=Xc(l,o,i),d=f.getNode(!a);if(kc(d))return h(l,d,!!a&&!f.isAtEnd(),!1);var p=f.getNode(a);if(kc(p))return h(l,p,!a&&!f.isAtEnd(),!1)}return null}var v=i.startContainer,m=i.startOffset,y=i.endOffset;if(3===v.nodeType&&0===m&&L_(v.parentNode)&&(v=v.parentNode,m=r.nodeIndex(v),v=v.parentNode),1!==v.nodeType)return null;if(y===m+1&&v===i.endContainer){var x=v.childNodes[m];if(c(x))return function(i){var o=i.cloneNode(!0),a=t.fire("ObjectSelected",{target:i,targetClone:o});if(a.isDefaultPrevented())return null;var c=function(e,i,o){var a=t.$,u=Hr(Ie(t.getBody()),"#"+s).fold((function(){return a([])}),(function(t){return a([t.dom])}));0===u.length&&(u=a('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",s)).appendTo(t.getBody());var c=r.createRng();i===o&&_e.ie?(u.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(i),c.setStartAfter(u[0].firstChild.firstChild),c.setEndAfter(i)):(u.empty().append(hi).append(i).append(hi),c.setStart(u[0].firstChild,1),c.setEnd(u[0].lastChild,0)),u.css({top:r.getPos(e,t.getBody()).y}),u[0].focus();var l=n.getSel();return l.removeAllRanges(),l.addRange(c),c}(i,a.targetClone,o),l=Ie(i);return U(Ts(Ie(t.getBody()),"*[data-mce-selected]"),(function(t){Re(l,t)||rr(t,u)})),r.getAttrib(i,u)||i.setAttribute(u,"1"),e=i,b(),c}(x)}return null},y=function(){e&&e.removeAttribute(u),Hr(Ie(t.getBody()),"#"+s).each(mn),e=null},b=function(){a.hide()};return _e.ceFalse&&!qv(t)&&function(){t.on("mouseup",(function(e){var n=d();n.collapsed&&Qm(t,e.clientX,e.clientY)&&rb(t,n,!1).each(f)})),t.on("click",(function(e){var i=R_(t,e.target);i&&(L_(i)&&(e.preventDefault(),t.focus()),D_(i)&&r.isChildOf(i,n.getNode())&&y())})),t.on("blur NewBlock",y),t.on("ResizeWindow FullscreenStateChanged",a.reposition);t.on("tap",(function(e){var n=e.target,r=R_(t,n);L_(r)?(e.preventDefault(),nb(t,r).each(v)):c(n)&&nb(t,n).each(v)}),!0),t.on("mousedown",(function(e){var a,s,u,d,p,g,x=e.target;if((x===o||"HTML"===x.nodeName||r.isChildOf(x,o))&&!1!==Qm(t,e.clientX,e.clientY)){var w=R_(t,x);if(w)L_(w)?(e.preventDefault(),nb(t,w).each(v)):(y(),D_(w)&&e.shiftKey||Rf(e.clientX,e.clientY,n.getRng())||(b(),n.placeCaretAt(e.clientX,e.clientY)));else if(c(x))nb(t,x).each(v);else if(!1===kc(x)){y(),b();var _=function(t,e,n){var r=ax(function(t){return Y(st(t.getElementsByTagName("*")),kc)}(t)),i=Y(r,M(bx,n)),o=function(t){return!Rn(t.node)&&!Xn(t.node)},a=xx(i,e,o);if(a){var s=o(a);if(a=xx(function(t,e,n){void 0===n&&(n=!0);var r=[],i=function(t,n){var i=Y(ax([n]),(function(n){return!t(n,e)}));return r=r.concat(i),0===i.length};return r.push(e),wx(Yb.Up,t,M(i,Ys),e.node,n),wx(Yb.Down,t,M(i,Xs),e.node,n),r}(t,a,s),e,o),a&&kc(a.node))return function(t,e){return{node:t.node,before:vx(t,e)<mx(t,e)}}(a,e)}return null}(o,e.clientX,e.clientY);if(_&&(a=x,s=_.node,p=r.getParent(a,i),g=r.getParent(s,i),m(p)||!(a!==g&&r.isChildOf(p,g)&&!1===L_(R_(t,p))||!r.isChildOf(g,p)&&(u=p,d=g,r.getParent(u,i)!==r.getParent(d,i))&&function(t){var e=t.firstChild;if(m(e))return!1;var n=mu.before(e);if(Vn(n.getNode())&&1===t.childNodes.length)return!l(n);var r=fl(t).next(n);return r&&!l(r)}(p)))){e.preventDefault();var E=h(1,_.node,_.before,!1);f(E),t.getBody().focus()}}}})),t.on("keypress",(function(t){zf.modifierPressed(t)||L_(n.getNode())&&t.preventDefault()})),t.on("GetSelectionRange",(function(t){var n=t.range;if(e){if(!e.parentNode)return void(e=null);(n=n.cloneRange()).selectNode(e),t.range=n}})),t.on("SetSelectionRange",(function(e){e.range=function(e){var n=t.schema.getShortEndedElements(),i=r.createRng(),o=e.startContainer,a=e.startOffset,s=e.endContainer,u=e.endOffset;return yt(n,o.nodeName.toLowerCase())?0===a?i.setStartBefore(o):i.setStartAfter(o):i.setStart(o,a),yt(n,s.nodeName.toLowerCase())?0===u?i.setEndBefore(s):i.setEndAfter(s):i.setEnd(s,u),i}(e.range);var n=v(e.range,e.forward);n&&(e.range=n)})),t.on("AfterSetSelectionRange",(function(t){var e,n=t.range,i=n.startContainer.parentNode;g(n)||"mcepastebin"===i.id||b(),e=i,r.hasClass(e,"mce-offscreen-selection")||y()})),t.on("copy",(function(t){var e,n=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!_e.ie){var i=(e=r.get(s))?e.getElementsByTagName("*")[0]:e;i&&(t.preventDefault(),n.clearData(),n.setData("text/html",i.outerHTML),n.setData("text/plain",i.outerText||i.innerText))}})),function(t){P_(t),function(t){t.on("drop",(function(e){var n=void 0!==e.clientX?t.getDoc().elementFromPoint(e.clientX,e.clientY):null;(O_(n)||"false"===t.dom.getContentEditableParent(n))&&e.preventDefault()}))}(t),function(t){return t.getParam("block_unsupported_drop",!0,"boolean")}(t)&&function(t){var e=function(e){if(!e.isDefaultPrevented()){var n=e.dataTransfer;n&&($(n.types,"Files")||n.files.length>0)&&(e.preventDefault(),"drop"===e.type&&oy(t,"Dropped file type is not supported"))}},n=function(n){Gd(t,n.target)&&e(n)},r=function(){var r=ls.DOM,i=t.dom,o=document,a=t.inline?t.getBody():t.getDoc(),s=["drop","dragover"];U(s,(function(t){r.bind(o,t,n),i.bind(a,t,e)})),t.on("remove",(function(){U(s,(function(t){r.unbind(o,t,n),i.unbind(a,t,e)}))}))};t.on("init",(function(){Jr.setEditorTimeout(t,r,0)}))}(t)}(t),function(t){var e=_s((function(){if(!t.removed&&t.getBody().contains(document.activeElement)){var e=t.selection.getRng();if(e.collapsed){var n=ib(t,e,!1);t.selection.setRng(n)}}}),0);t.on("focus",(function(){e.throttle()})),t.on("blur",(function(){e.cancel()}))}(t),function(t){t.on("init",(function(){t.on("focusin",(function(e){var n=e.target;if(Xn(n)){var r=Lf(t.getBody(),n),i=Hn(r)?r:n;t.selection.getNode()!==i&&nb(t,i).each((function(e){return t.selection.setRng(e)}))}}))}))}(t)}(),{showCaret:h,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(Mi(t),f(d()),n.scrollIntoView(t))},hideFakeCaret:b,destroy:function(){a.destroy(),e=null}}},B_=ls.DOM,F_=function(t){return t.inline?t.getElement().nodeName.toLowerCase():void 0},z_=function(t){return vt(t,(function(t){return!1===v(t)}))},$_=function(t){var e=t.settings;return z_({block_elements:e.block_elements,boolean_attributes:e.boolean_attributes,custom_elements:e.custom_elements,extended_valid_elements:e.extended_valid_elements,invalid_elements:e.invalid_elements,invalid_styles:e.invalid_styles,move_caret_before_on_enter_elements:e.move_caret_before_on_enter_elements,non_empty_elements:e.non_empty_elements,schema:e.schema,self_closing_elements:e.self_closing_elements,short_ended_elements:e.short_ended_elements,special:e.special,text_block_elements:e.text_block_elements,text_inline_elements:e.text_inline_elements,valid_children:e.valid_children,valid_classes:e.valid_classes,valid_elements:e.valid_elements,valid_styles:e.valid_styles,verify_html:e.verify_html,whitespace_elements:e.whitespace_elements,padd_empty_block_inline_children:e.format_empty_lines})},G_=function(t){var e=t.settings,n=t.editorUpload.blobCache;return z_({allow_conditional_comments:e.allow_conditional_comments,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_html_in_named_anchor:e.allow_html_in_named_anchor,allow_script_urls:e.allow_script_urls,allow_unsafe_link_target:e.allow_unsafe_link_target,convert_fonts_to_spans:e.convert_fonts_to_spans,fix_list_elements:e.fix_list_elements,font_size_legacy_values:e.font_size_legacy_values,forced_root_block:e.forced_root_block,forced_root_block_attrs:e.forced_root_block_attrs,padd_empty_with_br:e.padd_empty_with_br,preserve_cdata:e.preserve_cdata,remove_trailing_brs:e.remove_trailing_brs,inline_styles:e.inline_styles,root_name:F_(t),validate:!0,blob_cache:n,document:t.getDoc(),images_dataimg_filter:e.images_dataimg_filter})},V_=function(t){t.bindPendingEventDelegates(),t.initialized=!0,function(t){t.fire("Init")}(t),t.focus(!0),function(t){var e=t.dom.getRoot();t.inline||kf(t)&&t.selection.getStart(!0)!==e||wl(e).each((function(e){var n=e.getNode(),r=Rn(n)?wl(n).getOr(e):e;_e.browser.isIE()?function(t,e){var n=Ie(t.getBody()),r=(Dd(t)?R.from(e):R.none()).map(Ld).filter(Pd(n));t.bookmark=r.isSome()?r:t.bookmark}(t,r.toRange()):t.selection.setRng(r.toRange())}))}(t),t.nodeChanged({initial:!0}),t.execCallback("init_instance_callback",t),function(t){t.settings.auto_focus&&Jr.setEditorTimeout(t,(function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()}),100)}(t)},U_=function(t){return t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader},W_=function(t){var e=U_(t),n=nc(t),r=t.contentCSS,i=function(){e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},o=function(){t.removed?i():t.on("remove",i)};if(t.contentStyles.length>0){var a="";Me.each(t.contentStyles,(function(t){a+=t+"\r\n"})),t.dom.addStyle(a)}var s=Xr.all(function(t,e,n){var r=[new Xr((function(n,r){return U_(t).loadAll(e,n,r)}))];return t.inline?r:r.concat([new Xr((function(e,r){return t.ui.styleSheetLoader.loadAll(n,e,r)}))])}(t,r,n)).then(o).catch(o);return t.settings.content_style&&function(t,e){var n=Ie(t.getBody()),r=cn(un(n)),i=Ae("style");Qn(i,"type","text/css"),pn(i,Ne(e)),pn(r,i),t.on("remove",(function(){mn(i)}))}(t,t.settings.content_style),s},H_=function(t){var e=t.settings,n=t.getDoc(),r=t.getBody();!function(t){t.fire("PreInit")}(t),e.browser_spellcheck||e.gecko_spellcheck||(n.body.spellcheck=!1,B_.setAttrib(r,"spellcheck","false")),t.quirks=function(t){var e,n,r,i=Me.each,o=zf.BACKSPACE,a=zf.DELETE,s=t.dom,u=t.selection,c=t.parser,l=_e.gecko,f=_e.ie,d=_e.webkit,h="data:text/mce-internal,",p=f?"Text":"URL",g=function(e,n){try{t.getDoc().execCommand(e,!1,n)}catch(t){}},v=function(t){return t.isDefaultPrevented()},m=function(){t.shortcuts.add("meta+a",null,"SelectAll")},y=function(){t.inline||s.bind(t.getDoc(),"mousedown mouseup",(function(e){var n;if(e.target===t.getDoc().documentElement)if(n=u.getRng(),t.getBody().focus(),"mousedown"===e.type){if(wi(n.startContainer))return;u.placeCaretAt(e.clientX,e.clientY)}else u.setRng(n)}))},b=function(){Range.prototype.getClientRects||t.on("mousedown",(function(e){if(!v(e)&&"HTML"===e.target.nodeName){var n=t.getBody();n.blur(),Jr.setEditorTimeout(t,(function(){n.focus()}))}}))},x=function(){t.on("click",(function(e){var n=e.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==s.getContentEditableParent(n)&&(e.preventDefault(),t.selection.select(n),t.nodeChanged()),"A"===n.nodeName&&s.hasClass(n,"mce-item-anchor")&&(e.preventDefault(),u.select(n))}))},_=function(){t.on("keydown",(function(t){if(!v(t)&&t.keyCode===o&&u.isCollapsed()&&0===u.getRng().startOffset){var e=u.getNode().previousSibling;if(e&&e.nodeName&&"table"===e.nodeName.toLowerCase())return t.preventDefault(),!1}}))},E=function(){(function(t){return t.getParam("readonly")})(t)||t.on("BeforeExecCommand mousedown",(function(){g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),rc(t)||g("enableObjectResizing",!1)}))},S=function(){t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},C=function(){t.inline||t.on("keydown",(function(){document.activeElement===document.body&&t.getWin().focus()}))},k=function(){t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",(function(e){var n;if("HTML"===e.target.nodeName){if(_e.ie>11)return void t.getBody().focus();n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged()}})))},M=function(){_e.mac&&t.on("keydown",(function(e){!zf.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),t.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))}))},O=function(){t.on("click",(function(t){var e=t.target;do{if("A"===e.tagName)return void t.preventDefault()}while(e=e.parentNode)})),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},T=function(){t.on("init",(function(){t.dom.bind(t.getBody(),"submit",(function(t){t.preventDefault()}))}))},A=w;return qv(t)?(d&&(y(),x(),T(),m(),_e.iOS&&(C(),k(),O())),l&&(b(),E(),S(),M())):(t.on("keydown",(function(e){var n,r;if(!v(e)&&e.keyCode===zf.BACKSPACE){var i=(n=u.getRng()).startContainer,o=n.startOffset,a=s.getRoot();if(r=i,n.collapsed&&0===o){for(;r&&r.parentNode&&r.parentNode.firstChild===r&&r.parentNode!==a;)r=r.parentNode;"BLOCKQUOTE"===r.tagName&&(t.formatter.toggle("blockquote",null,r),(n=s.createRng()).setStart(i,0),n.setEnd(i,0),u.setRng(n))}}})),r=function(t){var e=s.create("body"),n=t.cloneContents();return e.appendChild(n),u.serializer.serialize(e,{format:"html"})},t.on("keydown",(function(e){var n,i,u=e.keyCode;if(!v(e)&&(u===a||u===o)){if(n=t.selection.isCollapsed(),i=t.getBody(),n&&!s.isEmpty(i))return;if(!n&&!function(e){var n=r(e),i=s.createRng();return i.selectNode(t.getBody()),n===r(i)}(t.selection.getRng()))return;e.preventDefault(),t.setContent(""),i.firstChild&&s.isBlock(i.firstChild)?t.selection.setCursorLocation(i.firstChild,0):t.selection.setCursorLocation(i,0),t.nodeChanged()}})),_e.windowsPhone||t.on("keyup focusin mouseup",(function(t){zf.modifierPressed(t)||u.normalize()}),!0),d&&(y(),x(),Vu(t)&&t.on("init",(function(){g("DefaultParagraphSeparator",Vu(t))})),T(),_(),c.addNodeFilter("br",(function(t){for(var e=t.length;e--;)"Apple-interchange-newline"===t[e].attr("class")&&t[e].remove()})),_e.iOS?(C(),k(),O()):m()),_e.ie>=11&&(k(),_()),_e.ie&&(m(),g("AutoUrlDetect",!1),t.on("dragstart",(function(e){!function(e){var n,r;e.dataTransfer&&(t.selection.isCollapsed()&&"IMG"===e.target.tagName&&u.select(e.target),(n=t.selection.getContent()).length>0&&(r=h+escape(t.id)+","+escape(n),e.dataTransfer.setData(p,r)))}(e)})),t.on("drop",(function(e){if(!v(e)){var n=function(t){var e;return t.dataTransfer&&(e=t.dataTransfer.getData(p))&&e.indexOf(h)>=0?(e=e.substr(h.length).split(","),{id:unescape(e[0]),html:unescape(e[1])}):null}(e);if(n&&n.id!==t.id){e.preventDefault();var r=Uf(e.x,e.y,t.getDoc());u.setRng(r),i=n.html,t.queryCommandSupported("mceInsertClipboardContent")?t.execCommand("mceInsertClipboardContent",!1,{content:i,internal:!0}):t.execCommand("mceInsertContent",!1,i)}}var i}))),l&&(t.on("keydown",(function(e){if(!v(e)&&e.keyCode===o){if(!t.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&0===u.getRng().startOffset){var n=u.getNode(),r=n.previousSibling;if("HR"===n.nodeName)return s.remove(n),void e.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(s.remove(r),e.preventDefault())}}})),b(),e=function(){var e=s.getAttribs(u.getStart().cloneNode(!1));return function(){var n=u.getStart();n!==t.getBody()&&(s.setAttrib(n,"style",null),i(e,(function(t){n.setAttributeNode(t.cloneNode(!0))})))}},n=function(){return!u.isCollapsed()&&s.getParent(u.getStart(),s.isBlock)!==s.getParent(u.getEnd(),s.isBlock)},t.on("keypress",(function(r){var i;if(!v(r)&&(8===r.keyCode||46===r.keyCode)&&n())return i=e(),t.getDoc().execCommand("delete",!1,null),i(),r.preventDefault(),!1})),s.bind(t.getDoc(),"cut",(function(r){var i;!v(r)&&n()&&(i=e(),Jr.setEditorTimeout(t,(function(){i()})))})),E(),t.on("SetContent ExecCommand",(function(t){"setcontent"!==t.type&&"mceInsertLink"!==t.command||i(s.select("a"),(function(t){var e=t.parentNode,n=s.getRoot();if(e.lastChild===t){for(;e&&!s.isBlock(e);){if(e.parentNode.lastChild!==e||e===n)return;e=e.parentNode}s.add(e,"br",{"data-mce-bogus":1})}}))})),S(),M(),_())),{refreshContentEditable:A,isHidden:function(){if(!l||t.removed)return!1;var e=t.selection.getSel();return!e||!e.rangeCount||0===e.rangeCount}}}(t),function(t){t.fire("PostRender")}(t);var i=function(t){return t.getParam("directionality",bs.isRtl()?"rtl":void 0)}(t);void 0!==i&&(r.dir=i),e.protect&&t.on("BeforeSetContent",(function(t){Me.each(e.protect,(function(e){t.content=t.content.replace(e,(function(t){return"\x3c!--mce:protected "+escape(t)+"--\x3e"}))}))})),t.on("SetContent",(function(){t.addVisual(t.getBody())})),t.on("compositionstart compositionend",(function(e){t.composing="compositionstart"===e.type}))},Y_=function(t){!0!==t.removed&&(function(t){qv(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})}(t),V_(t))},X_=function(t,e){var n=t.settings,r=t.getElement(),i=t.getDoc();n.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline||(i.open(),i.write(t.iframeHTML),i.close()),t.inline&&(B_.addClass(r,"mce-content-body"),t.contentDocument=i=document,t.contentWindow=window,t.bodyElement=r,t.contentAreaContainer=r);var o=t.getBody();o.disabled=!0,t.readonly=!!n.readonly,t.readonly||(t.inline&&"static"===B_.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable=t.getParam("content_editable_state",!0)),o.disabled=!1,t.editorUpload=function(t){var e,n,r,i,o,a,s=(r=[],i=function(t){if(!t.blob||!t.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var e,n=t.id||py("blobid"),r=t.name||n,i=t.blob;return{id:S(n),name:S(r),filename:S(t.filename||r+"."+(e=i.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[e.toLowerCase()]||"dat")),blob:S(i),base64:S(t.base64),blobUri:S(t.blobUri||URL.createObjectURL(i)),uri:S(t.uri)}},{create:function(t,e,n,r,o){if(f(t))return i({id:t,name:r,filename:o,blob:e,base64:n});if(d(t))return i(t);throw new Error("Unknown input type")},add:function(t){a(t.id())||r.push(t)},get:a=function(t){return o((function(e){return e.id()===t}))},getByUri:function(t){return o((function(e){return e.blobUri()===t}))},getByData:function(t,e){return o((function(n){return n.base64()===t&&n.blob().type===e}))},findFirst:o=function(t){return K(r,t).getOrUndefined()},removeByUri:function(t){r=Y(r,(function(e){return e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)}))},destroy:function(){U(r,(function(t){URL.revokeObjectURL(t.blobUri())})),r=[]}}),u=dy(),c=[],l=function(t){var e=gs(null);return t.on("change AddUndo",(function(t){e.set(Ot({},t.level))})),{fireIfChanged:function(){var n=t.undoManager.data;at(n).filter((function(t){return!Uv(e.get(),t)})).each((function(e){t.setDirty(!0),t.fire("change",{level:e,lastLevel:it(n,n.length-2).getOrNull()})}))}}}(t),h=function(e){return function(n){return t.selection?e(n):[]}},p=function(t,e,n){var r=0;do{-1!==(r=t.indexOf(e,r))&&(t=t.substring(0,r)+n+t.substr(r+e.length),r+=n.length-e.length+1)}while(-1!==r);return t},g=function(t,e,n){var r='src="'+n+'"'+(n===_e.transparentSrc?' data-mce-placeholder="1"':"");return t=p(t,'src="'+e+'"',r),p(t,'data-mce-src="'+e+'"','data-mce-src="'+n+'"')},v=function(e,n){U(t.undoManager.data,(function(t){"fragmented"===t.type?t.fragments=V(t.fragments,(function(t){return g(t,e,n)})):t.content=g(t.content,e,n)}))},m=function(n){return e||(e=my(t,u)),x().then(h((function(r){var i=V(r,(function(t){return t.blobInfo}));return e.upload(i,vy(t)).then(h((function(e){var i=[],o=V(e,(function(e,n){var o=r[n].blobInfo,a=r[n].image;return e.status&&function(t){return t.getParam("images_replace_blob_uris",!0,"boolean")}(t)?(s.removeByUri(a.src),qv(t)||function(e,n){var r,i=t.convertURL(n,"src");v(e.src,n),t.$(e).attr({src:Hu(t)?(r=n,r+(-1===r.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":i})}(a,e.url)):e.error&&(e.error.options.remove&&(v(a.getAttribute("src"),_e.transparentSrc),i.push(a)),function(t,e){oy(t,bs.translate(["Failed to upload image: {0}",e]))}(t,e.error.message)),{element:a,status:e.status,uploadUri:e.url,blobInfo:o}}));return o.length>0&&l.fireIfChanged(),i.length>0&&(qv(t)?console.error("Removing images on failed uploads is currently unsupported for RTC"):t.undoManager.transact((function(){U(i,(function(e){t.dom.remove(e),s.removeByUri(e.src)}))}))),n&&n(o),o})))})))},y=function(e){if(Wu(t))return m(e)},b=function(e){if(!1===tt(c,(function(t){return t(e)})))return!1;if(0===e.getAttribute("src").indexOf("data:")){var n=function(t){return t.getParam("images_dataimg_filter",I,"function")}(t);return n(e)}return!0},x=function(){return n||(n=lm(u,s)),n.findAll(t.getBody(),b).then(h((function(e){return e=Y(e,(function(e){return"string"!=typeof e||(oy(t,e),!1)})),qv(t)||U(e,(function(t){v(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")})),e})))},w=function(e){return e.replace(/src="(blob:[^"]+)"/g,(function(e,n){var r=u.getResultUri(n);if(r)return'src="'+r+'"';var i=s.getByUri(n);return i||(i=q(t.editorManager.get(),(function(t,e){return t||e.editorUpload&&e.editorUpload.blobCache.getByUri(n)}),null)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':e}))};return t.on("SetContent",(function(){Wu(t)?y():x()})),t.on("RawSaveContent",(function(t){t.content=w(t.content)})),t.on("GetContent",(function(t){t.source_view||"raw"===t.format||"tree"===t.format||(t.content=w(t.content))})),t.on("PostRender",(function(){t.parser.addNodeFilter("img",(function(t){U(t,(function(t){var e=t.attr("src");if(!s.getByUri(e)){var n=u.getResultUri(e);n&&t.attr("src",n)}}))}))})),{blobCache:s,addFilter:function(t){c.push(t)},uploadImages:m,uploadImagesAuto:y,scanForImages:x,destroy:function(){s.destroy(),u.destroy(),n=e=null}}}(t),t.schema=_o($_(t)),t.dom=ls(i,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:t.inline?t.getBody():null,collect:function(){return t.inline},schema:t.schema,contentCssCors:Ju(t),referrerPolicy:Qu(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=function(t){var e=ym(G_(t),t.schema);return e.addAttributeFilter("src,href,style,tabindex",(function(e,n){for(var r,i,o=e.length,a=t.dom,s="data-mce-"+n;o--;)if((i=(r=e[o]).attr(n))&&!r.attr(s)){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===n?((i=a.serializeStyle(a.parseStyle(i),r.name)).length||(i=null),r.attr(s,i),r.attr(n,i)):"tabindex"===n?(r.attr(s,i),r.attr(n,null)):r.attr(s,t.convertURL(i,n,r.name))}})),e.addNodeFilter("script",(function(t){for(var e=t.length;e--;){var n=t[e],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}})),t.settings.preserve_cdata&&e.addNodeFilter("#cdata",(function(e){for(var n=e.length;n--;){var r=e[n];r.type=8,r.name="#comment",r.value="[CDATA["+t.dom.encode(r.value)+"]]"}})),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(e){for(var n=e.length,r=t.schema.getNonEmptyElements();n--;){var i=e[n];i.isEmpty(r)&&0===i.getAll("br").length&&(i.append(new ih("br",1)).shortEnded=!0)}})),e}(t),t.serializer=wm(function(t){var e=t.settings;return Ot(Ot(Ot({},G_(t)),$_(t)),z_({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope,element_format:e.element_format,entities:e.entities,entity_encoding:e.entity_encoding,indent:e.indent,indent_after:e.indent_after,indent_before:e.indent_before}))}(t),t),t.selection=rm(t.dom,t.getWin(),t.serializer,t),t.annotator=Pf(t),t.formatter=Ey(t),t.undoManager=Cy(t),t._nodeChangeDispatcher=new C_(t),t._selectionOverrides=j_(t),function(t){var e=ws(),n=gs(!1),r=Es((function(e){t.fire("longpress",Ot(Ot({},e),{type:"longpress"})),n.set(!0)}),400);t.on("touchstart",(function(t){Qx(t).each((function(i){r.cancel();var o={x:i.clientX,y:i.clientY,target:t.target};r.throttle(t),n.set(!1),e.set(o)}))}),!0),t.on("touchmove",(function(i){r.cancel(),Qx(i).each((function(r){e.on((function(i){(function(t,e){var n=Math.abs(t.clientX-e.x),r=Math.abs(t.clientY-e.y);return n>5||r>5})(r,i)&&(e.clear(),n.set(!1),t.fire("longpresscancel"))}))}))}),!0),t.on("touchend touchcancel",(function(i){r.cancel(),"touchcancel"!==i.type&&e.get().filter((function(t){return t.target.isEqualNode(i.target)})).each((function(){n.get()?i.preventDefault():t.fire("tap",Ot(Ot({},i),{type:"tap"}))}))}),!0)}(t),function(t){!function(t){t.on("click",(function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()}))}(t),function(t){t.parser.addNodeFilter("details",(function(t){U(t,(function(t){t.attr("data-mce-open",t.attr("open")),t.attr("open","open")}))})),t.serializer.addNodeFilter("details",(function(t){U(t,(function(t){var e=t.attr("data-mce-open");t.attr("open",f(e)?e:null),t.attr("data-mce-open",null)}))}))}(t)}(t),qv(t)||function(t){t.on("click",(function(e){e.detail>=3&&function(t){var e=t.selection.getRng(),n=mu.fromRangeStart(e),r=mu.fromRangeEnd(e);if(mu.isElementPosition(n)){var i=n.container();k_(i)&&wl(i).each((function(t){return e.setStart(t.container(),t.offset())}))}mu.isElementPosition(r)&&(i=n.container(),k_(i)&&_l(i).each((function(t){return e.setEnd(t.container(),t.offset())}))),t.selection.setRng(ig(e))}(t)}))}(t);var a=function(t){return qv(t)?gs(null):S_(t)}(t);(function(t,e){t.addCommand("delete",(function(){!function(t,e){Kx(t)||pb(t,!1)||ub(t,!1)||Fx(t,e,!1)||qy(t,!1)||rg(t)||gb(t,!1)||Ux(t,!1)||Jy(t)||Gx(t,!1)||(Jx(t,"Delete"),By(t))}(t,e)})),t.addCommand("forwardDelete",(function(){!function(t,e){pb(t,!0)||ub(t,!0)||Fx(t,e,!0)||qy(t,!0)||rg(t)||gb(t,!0)||Ux(t,!0)||Jy(t)||Gx(t,!0)||Jx(t,"ForwardDelete")}(t,e)}))})(t,a),function(t){Vu(t)&&t.on("NodeChange",M(rw,t))}(t),function(t){var e=t.dom,n=Vu(t),r=function(t){return t.getParam("placeholder",zu.getAttrib(t.getElement(),"placeholder"),"string")}(t),i=function(o,a){if(!function(t){if(Oy(t)){var e=t.keyCode;return!Ty(t)&&(zf.metaKeyPressed(t)||t.altKey||e>=112&&e<=123||$(ky,e))}return!1}(o)){var s=t.getBody(),u=!function(t){return Oy(t)&&!(Ty(t)||"keyup"===t.type&&229===t.keyCode)}(o)&&function(t,e,n){if(Hi(Ie(e),!1)){var r=""===n,i=e.firstElementChild;return!i||!t.getStyle(e.firstElementChild,"padding-left")&&!t.getStyle(e.firstElementChild,"padding-right")&&(r?!t.isBlock(i):n===i.nodeName.toLowerCase())}return!1}(e,s,n);(""!==e.getAttrib(s,My)!==u||a)&&(e.setAttrib(s,My,u?r:null),e.setAttrib(s,"aria-placeholder",u?r:null),function(t,e){t.fire("PlaceholderToggle",{state:e})}(t,u),t.on(u?"keydown":"keyup",i),t.off(u?"keyup":"keydown",i))}};r&&t.on("init",(function(e){i(e,!0),t.on("change SetContent ExecCommand",i),t.on("paste",(function(e){return Jr.setEditorTimeout(t,(function(){return i(e)}))}))}))}(t);var s=function(t){var e=t;return function(t){return mt(t.plugins,"rtc").bind((function(t){return R.from(t.setup)}))}(t).fold((function(){return e.rtcInstance=Xv(t),R.none()}),(function(t){return e.rtcInstance=function(){var t=S(null),e=S("");return{undoManager:{beforeChange:w,add:t,undo:t,redo:t,clear:w,reset:w,hasUndo:N,hasRedo:N,transact:t,ignore:w,extra:w},formatter:{match:N,matchAll:S([]),matchNode:S(void 0),canApply:N,closest:e,apply:w,remove:w,toggle:w,formatChanged:S({unbind:w})},editor:{getContent:e,setContent:e,insertContent:w,addVisual:w},selection:{getContent:e},raw:{getModel:S(R.none())}}}(),R.some((function(){return t().then((function(t){return e.rtcInstance=function(t){var e=function(t){return d(t)?t:{}},n=t.undoManager,r=t.formatter,i=t.editor,o=t.selection,a=t.raw;return{undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:function(t,e,r){return n.transact(r)},ignore:function(t,e){return n.ignore(e)},extra:function(t,e,r,i){return n.extra(r,i)}},formatter:{match:function(t,n,i,o){return r.match(t,e(n),o)},matchAll:r.matchAll,matchNode:r.matchNode,canApply:function(t){return r.canApply(t)},closest:function(t){return r.closest(t)},apply:function(t,n,i){return r.apply(t,e(n))},remove:function(t,n,i,o){return r.remove(t,e(n))},toggle:function(t,n,i){return r.toggle(t,e(n))},formatChanged:function(t,e,n,i,o){return r.formatChanged(e,n,i,o)}},editor:{getContent:function(t,e){return i.getContent(t)},setContent:function(t,e){return i.setContent(t,e)},insertContent:function(t,e){return i.insertContent(t)},addVisual:i.addVisual},selection:{getContent:function(t,e){return o.getContent(e)}},raw:{getModel:function(){return R.some(a.getRawModel())}}}}(t),t.rtc.isRemote}))}))}))}(t);H_(t),s.fold((function(){W_(t).then((function(){return Y_(t)}))}),(function(e){t.setProgressState(!0),W_(t).then((function(){e().then((function(e){t.setProgressState(!1),Y_(t)}),(function(e){t.notificationManager.open({type:"error",text:String(e)}),Y_(t)}))}))}))},q_=ls.DOM,Z_=function(t,e){var n,r,i,o,a=t.translate("Rich Text Area"),s=(n=t.id,r=a,e.height,i=function(t){return t.getParam("iframe_attrs",{})}(t),o=Ae("iframe"),tr(o,i),tr(o,{id:n+"_ifr",frameBorder:"0",allowTransparency:"true",title:r}),ks(o,"tox-edit-area__iframe"),o).dom;s.onload=function(){s.onload=null,t.fire("load")};var u=function(t,e){if(document.domain!==window.location.hostname&&_e.browser.isIE()){var n=py("mce");t[n]=function(){X_(t)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return q_.setAttrib(e,"src",r),!0}return!1}(t,s);return t.contentAreaContainer=e.iframeContainer,t.iframeElement=s,t.iframeHTML=function(t){var e=function(t){return t.getParam("doctype","<!DOCTYPE html>")}(t)+"<html><head>";(function(t){return t.getParam("document_base_url","")})(t)!==t.documentBaseUrl&&(e+='<base href="'+t.documentBaseURI.getURI()+'" />'),e+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=function(t){return $u(t,"body_id","tinymce")}(t),r=function(t){return $u(t,"body_class","")}(t),i=t.translate(function(t){return t.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string")}(t));return Gu(t)&&(e+='<meta http-equiv="Content-Security-Policy" content="'+Gu(t)+'" />'),e+'</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+t.id+'" aria-label="'+i+'"><br></body></html>'}(t),q_.add(e.iframeContainer,s),u},K_=ls.DOM,J_=function(t,e,n){var r=ey.get(n),i=ey.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=Me.trim(n),r&&-1===Me.inArray(e,n)){if(Me.each(ey.dependencies(n),(function(n){J_(t,e,n)})),t.plugins[n])return;try{var o=new r(t,i,t.$);t.plugins[n]=o,o.init&&(o.init(t,i),e.push(n))}catch(e){!function(t,e,n){var r=bs.translate(["Failed to initialize plugin: {0}",e]);jf(t,"PluginLoadError",{message:r}),cy(r,n),oy(t,r)}(t,n,e)}}},Q_=function(t){return t.replace(/^\-/,"")},tE=function(t){return{editorContainer:t,iframeContainer:t,api:{}}},eE=function(t){var e=t.getElement();return t.orgDisplay=e.style.display,f(oc(t))?function(t){return t.theme.renderUI()}(t):b(oc(t))?function(t){var e=t.getElement(),n=oc(t)(t,e);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:e.offsetHeight,n}(t):function(t){var e=t.getElement();return t.inline?tE(null):function(t){var e=K_.create("div");return K_.insertAfter(e,t),tE(e)}(e)}(t)},nE=function(t){t.fire("ScriptsLoaded"),function(t){var e=Me.trim(Yu(t)),n=t.ui.registry.getAll().icons,r=Ot(Ot({},Hm.get("default").icons),Hm.get(e).icons);ft(r,(function(e,r){yt(n,r)||t.ui.registry.addIcon(r,e)}))}(t),function(t){var e=oc(t);if(f(e)){t.settings.theme=Q_(e);var n=ny.get(e);t.theme=new n(t,ny.urls[e]),t.theme.init&&t.theme.init(t,ny.urls[e]||t.documentBaseUrl.replace(/\/$/,""),t.$)}else t.theme={}}(t),function(t){var e=[];Me.each(cc(t).split(/[ ,]/),(function(n){J_(t,e,Q_(n))}))}(t);var e=eE(t);!function(t,e){var n={show:R.from(e.show).getOr(w),hide:R.from(e.hide).getOr(w),disable:R.from(e.disable).getOr(w),isDisabled:R.from(e.isDisabled).getOr(N),enable:function(){t.mode.isReadOnly()||R.from(e.enable).map(A)}};t.ui=Ot(Ot({},t.ui),n)}(t,R.from(e.api).getOr({}));var n={editorContainer:e.editorContainer,iframeContainer:e.iframeContainer};return t.editorContainer=n.editorContainer?n.editorContainer:null,fy(t),t.inline?X_(t):function(t,e){var n=Z_(t,e);e.editorContainer&&(q_.get(e.editorContainer).style.display=t.orgDisplay,t.hidden=q_.isHidden(e.editorContainer)),t.getElement().style.display="none",q_.setAttrib(t.id,"aria-hidden","true"),n||X_(t)}(t,n)},rE=ls.DOM,iE=function(t){return"-"===t.charAt(0)},oE=function(t,e,n){return R.from(e).filter((function(t){return t.length>0&&!Hm.has(t)})).map((function(e){return{url:t.editorManager.baseURL+"/icons/"+e+"/icons"+n+".js",name:R.some(e)}}))},aE=function(t,e){var n=ps.ScriptLoader;!function(t,e,n,r){var i=oc(e);if(f(i)){if(!iE(i)&&!yt(ny.urls,i)){var o=function(t){return t.getParam("theme_url")}(e);o?ny.load(i,e.documentBaseURI.toAbsolute(o)):ny.load(i,"themes/"+i+"/theme"+n+".js")}t.loadQueue((function(){ny.waitFor(i,r)}))}else r()}(n,t,e,(function(){(function(t,e){var n=tc(e),r=function(t){return t.getParam("language_url","","string")}(e);if(!1===bs.hasCode(n)&&"en"!==n){var i=""!==r?r:e.editorManager.baseURL+"/langs/"+n+".js";t.add(i,w,void 0,(function(){!function(t,e,n){ay(t,"LanguageLoadError",sy("language",e,n))}(e,i,n)}))}})(n,t),function(t,e,n){var r=oE(e,"default",n),i=function(t){return R.from(function(t){return t.getParam("icons_url","","string")}(t)).filter((function(t){return t.length>0})).map((function(t){return{url:t,name:R.none()}}))}(e).orThunk((function(){return oE(e,Yu(e),"")}));U(function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e}([r,i]),(function(n){t.add(n.url,w,void 0,(function(){!function(t,e,n){ay(t,"IconsLoadError",sy("icons",e,n))}(e,n.url,n.name.getOrUndefined())}))}))}(n,t,e),function(t,e){Me.each(function(t){return t.getParam("external_plugins")}(t),(function(e,n){ey.load(n,e,w,void 0,(function(){uy(t,e,n)})),t.settings.plugins+=" "+n})),Me.each(cc(t).split(/[ ,]/),(function(n){if((n=Me.trim(n))&&!ey.urls[n])if(iE(n)){n=n.substr(1,n.length);var r=ey.dependencies(n);Me.each(r,(function(n){var r={prefix:"plugins/",resource:n,suffix:"/plugin"+e+".js"},i=ey.createUrl(r,n);ey.load(i.resource,i,w,void 0,(function(){uy(t,i.prefix+i.resource+i.suffix,i.resource)}))}))}else{var i={prefix:"plugins/",resource:n,suffix:"/plugin"+e+".js"};ey.load(n,i,w,void 0,(function(){uy(t,i.prefix+i.resource+i.suffix,n)}))}}))}(t,e),n.loadQueue((function(){t.removed||nE(t)}),t,(function(){t.removed||nE(t)}))}))},sE={"font-size":"size","font-family":"face"},uE=function(t){return function(e,n){return R.from(n).map(Ie).filter($e).bind((function(n){return function(t,e,n){return yg(Ie(n),(function(e){return function(e){return ar(e,t).orThunk((function(){return"font"===Be(e)?mt(sE,t).bind((function(t){return nr(e,t)})):R.none()}))}(e)}),(function(t){return Re(Ie(e),t)}))}(t,e,n.dom).or(function(t,e){return R.from(ls.DOM.getStyle(e,t,!0))}(t,n.dom))})).getOr("")}},cE=uE("font-size"),lE=_((function(t){return t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")}),uE("font-family")),fE=function(t){return wl(t.getBody()).map((function(t){var e=t.container();return Fn(e)?e.parentNode:e}))},dE=function(t,e){return function(t,e){return function(t){return R.from(t.selection.getRng()).bind((function(e){var n=t.getBody();return e.startContainer===n&&0===e.startOffset?R.none():R.from(t.selection.getStart(!0))}))}(t).orThunk(M(fE,t)).map(Ie).filter($e).bind(e)}(t,E(R.some,e))},hE=function(t,e){if(/^[0-9.]+$/.test(e)){var n=parseInt(e,10);if(n>=1&&n<=7){var r=function(t){return Me.explode(t.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))}(t),i=function(t){return Me.explode(t.getParam("font_size_classes",""))}(t);return i?i[n-1]||e:r[n-1]||e}return e}return e},pE=function(t){var e=t.split(/\s*,\s*/);return V(e,(function(t){return-1===t.indexOf(" ")||Rt(t,'"')||Rt(t,"'")?t:"'"+t+"'"})).join(",")},gE=Me.each,vE=Me.map,mE=Me.inArray,yE=function(){function t(t){this.commands={state:{},exec:{},value:{}},this.editor=t,this.setupCommands(t)}return t.prototype.execCommand=function(t,e,n,r){var i,o=!1,a=this;if(!a.editor.removed){var s;if("mcefocus"!==t.toLowerCase()&&(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||r&&r.skip_focus?(s=a.editor,Bd(s).each((function(t){return s.selection.setRng(t)}))):a.editor.focus()),(r=a.editor.fire("BeforeExecCommand",{command:t,ui:e,value:n})).isDefaultPrevented())return!1;var u=t.toLowerCase();if(i=a.commands.exec[u])return i(u,e,n),a.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0;if(gE(this.editor.plugins,(function(r){if(r.execCommand&&r.execCommand(t,e,n))return a.editor.fire("ExecCommand",{command:t,ui:e,value:n}),o=!0,!1})),o)return o;if(a.editor.theme&&a.editor.theme.execCommand&&a.editor.theme.execCommand(t,e,n))return a.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0;try{o=a.editor.getDoc().execCommand(t,e,n)}catch(t){}return!!o&&(a.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0)}},t.prototype.queryCommandState=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.state[t])return e(t);try{return this.editor.getDoc().queryCommandState(t)}catch(t){}return!1}},t.prototype.queryCommandValue=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.value[t])return e(t);try{return this.editor.getDoc().queryCommandValue(t)}catch(t){}}},t.prototype.addCommands=function(t,e){void 0===e&&(e="exec");var n=this;gE(t,(function(t,r){gE(r.toLowerCase().split(","),(function(r){n.commands[e][r]=t}))}))},t.prototype.addCommand=function(t,e,n){var r=this;t=t.toLowerCase(),this.commands.exec[t]=function(t,i,o,a){return e.call(n||r.editor,i,o,a)}},t.prototype.queryCommandSupported=function(t){if(t=t.toLowerCase(),this.commands.exec[t])return!0;try{return this.editor.getDoc().queryCommandSupported(t)}catch(t){}return!1},t.prototype.addQueryStateHandler=function(t,e,n){var r=this;t=t.toLowerCase(),this.commands.state[t]=function(){return e.call(n||r.editor)}},t.prototype.addQueryValueHandler=function(t,e,n){var r=this;t=t.toLowerCase(),this.commands.value[t]=function(){return e.call(n||r.editor)}},t.prototype.hasCustomCommand=function(t){return t=t.toLowerCase(),!!this.commands.exec[t]},t.prototype.execNativeCommand=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=null),this.editor.getDoc().execCommand(t,e,n)},t.prototype.isFormatMatch=function(t){return this.editor.formatter.match(t)},t.prototype.toggleFormat=function(t,e){this.editor.formatter.toggle(t,e),this.editor.nodeChanged()},t.prototype.storeSelection=function(t){this.selectionBookmark=this.editor.selection.getBookmark(t)},t.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},t.prototype.setupCommands=function(t){var e=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":w,"mceEndUndoLevel,mceAddUndoLevel":function(){t.undoManager.add()},mceFocus:function(e,n,r){!function(t,e){t.removed||(e?Xd(t):function(t){var e=t.selection,n=t.getBody(),r=e.getRng();t.quirks.refreshContentEditable(),void 0!==t.bookmark&&!1===Yd(t)&&Bd(t).each((function(e){t.selection.setRng(e),r=e}));var i=function(t,e){return t.dom.getParent(e,(function(e){return"true"===t.dom.getContentEditable(e)}))}(t,e.getNode());if(t.$.contains(n,i))return Hd(i),Wd(t,r),void Xd(t);t.inline||(_e.opera||Hd(n),t.getWin().focus()),(_e.gecko||t.inline)&&(Hd(n),Wd(t,r)),Xd(t)}(t))}(t,r)},"Cut,Copy,Paste":function(n){var r,i=t.getDoc();try{e.execNativeCommand(n)}catch(t){r=!0}if("paste"!==n||i.queryCommandEnabled(n)||(r=!0),r||!i.queryCommandSupported(n)){var o=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");_e.mac&&(o=o.replace(/Ctrl\+/g,"+")),t.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(t.selection.isCollapsed()){var e=t.dom.getParent(t.selection.getStart(),"a");e&&t.dom.remove(e,!0)}else t.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var r=n.substring(7);"full"===r&&(r="justify"),gE("left,center,right,justify".split(","),(function(e){r!==e&&t.formatter.remove("align"+e)})),"none"!==r&&e.toggleFormat("align"+r)},"InsertUnorderedList,InsertOrderedList":function(n){var r;e.execNativeCommand(n);var i=t.dom.getParent(t.selection.getNode(),"ol,ul");i&&(r=i.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)&&(e.storeSelection(),t.dom.split(r,i),e.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){e.toggleFormat(t)},"ForeColor,HiliteColor":function(t,n,r){e.toggleFormat(t,{value:r})},FontName:function(e,n,r){!function(t,e){var n=hE(t,e);t.formatter.toggle("fontname",{value:pE(n)}),t.nodeChanged()}(t,r)},FontSize:function(e,n,r){!function(t,e){t.formatter.toggle("fontsize",{value:hE(t,e)}),t.nodeChanged()}(t,r)},LineHeight:function(e,n,r){!function(t,e){t.formatter.toggle("lineheight",{value:String(e)}),t.nodeChanged()}(t,r)},Lang:function(t,n,r){e.toggleFormat(t,{value:r.code,customValue:r.customCode})},RemoveFormat:function(e){t.formatter.remove(e)},mceBlockQuote:function(){e.toggleFormat("blockquote")},FormatBlock:function(t,n,r){return e.toggleFormat(r||"p")},mceCleanup:function(){var e=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(e)},mceRemoveNode:function(n,r,i){var o=i||t.selection.getNode();o!==t.getBody()&&(e.storeSelection(),t.dom.remove(o,!0),e.restoreSelection())},mceSelectNodeDepth:function(e,n,r){var i=0;t.dom.getParent(t.selection.getNode(),(function(e){if(1===e.nodeType&&i++===r)return t.selection.select(e),!1}),t.getBody())},mceSelectNode:function(e,n,r){t.selection.select(r)},mceInsertContent:function(e,n,r){!function(t,e){var n=function(t){if("string"!=typeof t){var e=Me.extend({paste:t.paste,data:{paste:t.paste}},t);return{content:t.content,details:e}}return{content:t,details:{}}}(e);!function(t,e,n){Zv(t).editor.insertContent(e,n)}(t,n.content,n.details)}(t,r)},mceInsertRawHTML:function(e,n,r){t.selection.setContent("tiny_mce_marker");var i=t.getContent();t.setContent(i.replace(/tiny_mce_marker/g,(function(){return r})))},mceInsertNewLine:function(e,n,r){h_(t,r)},mceToggleFormat:function(t,n,r){e.toggleFormat(r)},mceSetContent:function(e,n,r){t.setContent(r)},"Indent,Outdent":function(e){Zx(t,e)},mceRepaint:w,InsertHorizontalRule:function(){t.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){t.hasVisual=!t.hasVisual,t.addVisual()},mceReplaceContent:function(e,n,r){t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceInsertLink:function(e,n,r){"string"==typeof r&&(r={href:r});var i=t.dom.getParent(t.selection.getNode(),"a");r.href=r.href.replace(/ /g,"%20"),i&&r.href||t.formatter.remove("link"),r.href&&t.formatter.apply("link",r,i)},selectAll:function(){var e=t.dom.getParent(t.selection.getStart(),Wn);if(e){var n=t.dom.createRng();n.selectNodeContents(e),t.selection.setRng(n)}},mceNewDocument:function(){t.setContent("")},InsertLineBreak:function(e,n,r){return t_(t,r),!0}});var n=function(e){return function(){var n=t.selection,r=n.isCollapsed()?[t.dom.getParent(n.getNode(),t.dom.isBlock)]:n.getSelectedBlocks(),i=vE(r,(function(n){return!!t.formatter.matchNode(n,e)}));return-1!==mE(i,!0)}};e.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){return e.isFormatMatch(t)},mceBlockQuote:function(){return e.isFormatMatch("blockquote")},Outdent:function(){return Yx(t)},"InsertUnorderedList,InsertOrderedList":function(e){var n=t.dom.getParent(t.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===e&&"UL"===n.tagName||"insertorderedlist"===e&&"OL"===n.tagName)}},"state"),e.addCommands({Undo:function(){t.undoManager.undo()},Redo:function(){t.undoManager.redo()}}),e.addQueryValueHandler("FontName",(function(){return function(t){return dE(t,(function(e){return lE(t.getBody(),e.dom)})).getOr("")}(t)}),this),e.addQueryValueHandler("FontSize",(function(){return function(t){return dE(t,(function(e){return cE(t.getBody(),e.dom)})).getOr("")}(t)}),this),e.addQueryValueHandler("LineHeight",(function(){return function(t){return dE(t,(function(e){var n=Ie(t.getBody()),r=yg(e,(function(t){return ar(t,"line-height")}),M(Re,n));return r.getOrThunk((function(){var t=parseFloat(ir(e,"line-height")),n=parseFloat(ir(e,"font-size"));return String(t/n)}))})).getOr("")}(t)}),this)},t}(),bE="data-mce-contenteditable",xE=function(t,e,n){var r,i;Ms(t,e)&&!1===n?(i=e,Cs(r=t)?r.dom.classList.remove(i):function(t,e){(function(t,e,n){var r=Y(Ss(t,e),(function(t){return t!==n}));r.length>0?Qn(t,e,r.join(" ")):rr(t,e)})(t,"class",e)}(r,i),function(t){var e=Cs(t)?t.dom.classList:function(t){return Ss(t,"class")}(t);0===e.length&&rr(t,"class")}(r)):n&&ks(t,e)},wE=function(t,e,n){try{t.getDoc().execCommand(e,!1,String(n))}catch(t){}},_E=function(t,e){t.dom.contentEditable=e?"true":"false"},EE=function(t,e){var n=Ie(t.getBody());xE(n,"mce-content-readonly",e),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),function(t){R.from(t.selection.getNode()).each((function(t){t.removeAttribute("data-mce-selected")}))}(t),t.readonly=!0,_E(n,!1),U(Ts(n,'*[contenteditable="true"]'),(function(t){Qn(t,bE,"true"),_E(t,!1)}))):(t.readonly=!1,_E(n,!0),U(Ts(n,"*["+bE+'="true"]'),(function(t){rr(t,bE),_E(t,!0)})),wE(t,"StyleWithCSS",!1),wE(t,"enableInlineTableEditing",!1),wE(t,"enableObjectResizing",!1),function(t){return Yd(t)||function(t){var e=un(Ie(t.getElement()));return Cd(e).filter((function(e){return!(void 0!==(n=e.dom.classList)&&(n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body")))&&Gd(t,e.dom);var n})).isSome()}(t)}(t)&&t.focus(),function(t){t.selection.setRng(t.selection.getRng())}(t),t.nodeChanged())},SE=function(t){return t.readonly},CE=function(t){t.parser.addAttributeFilter("contenteditable",(function(e){SE(t)&&U(e,(function(t){t.attr(bE,t.attr("contenteditable")),t.attr("contenteditable","false")}))})),t.serializer.addAttributeFilter(bE,(function(e){SE(t)&&U(e,(function(t){t.attr("contenteditable",t.attr(bE))}))})),t.serializer.addTempAttr(bE)},kE=Me.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),ME=function(){function t(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||N}return t.isNative=function(t){return!!kE[t.toLowerCase()]},t.prototype.fire=function(t,e){var n=t.toLowerCase(),r=Mo(n,e||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);var i=this.bindings[n];if(i)for(var o=0,a=i.length;o<a;o++){var s=i[o];if(!s.removed){if(s.once&&this.off(n,s.func),r.isImmediatePropagationStopped())return r;if(!1===s.func.call(this.scope,r))return r.preventDefault(),r}}return r},t.prototype.on=function(t,e,n,r){if(!1===e&&(e=N),e){var i={func:e,removed:!1};r&&Me.extend(i,r);for(var o=t.toLowerCase().split(" "),a=o.length;a--;){var s=o[a],u=this.bindings[s];u||(u=[],this.toggleEvent(s,!0)),u=n?Tt([i],u,!0):Tt(Tt([],u,!0),[i],!1),this.bindings[s]=u}}return this},t.prototype.off=function(t,e){var n=this;if(t)for(var r=t.toLowerCase().split(" "),i=r.length;i--;){var o=r[i],a=this.bindings[o];if(!o)return ft(this.bindings,(function(t,e){n.toggleEvent(e,!1),delete n.bindings[e]})),this;if(a){if(e){var s=H(a,(function(t){return t.func===e}));a=s.fail,this.bindings[o]=a,U(s.pass,(function(t){t.removed=!0}))}else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[o])}}else ft(this.bindings,(function(t,e){n.toggleEvent(e,!1)})),this.bindings={};return this},t.prototype.once=function(t,e,n){return this.on(t,e,n,{once:!0})},t.prototype.has=function(t){return t=t.toLowerCase(),!(!this.bindings[t]||0===this.bindings[t].length)},t}(),OE=function(t){return t._eventDispatcher||(t._eventDispatcher=new ME({scope:t,toggleEvent:function(e,n){ME.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher},TE={fire:function(t,e,n){var r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return e;var i=OE(r).fire(t,e);if(!1!==n&&r.parent)for(var o=r.parent();o&&!i.isPropagationStopped();)o.fire(t,i,!1),o=o.parent();return i},on:function(t,e,n){return OE(this).on(t,e,n)},off:function(t,e){return OE(this).off(t,e)},once:function(t,e){return OE(this).once(t,e)},hasEventListeners:function(t){return OE(this).has(t)}},AE=ls.DOM,NE=function(t,e){if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e))return t.getDoc().documentElement;var n=ic(t);return n?(t.eventRoot||(t.eventRoot=AE.select(n)[0]),t.eventRoot):t.getBody()},IE=function(t,e,n){!function(t){return!t.hidden&&!SE(t)}(t)?SE(t)&&function(t,e){if(function(t){return"click"===t.type}(e)&&!zf.metaKeyPressed(e)){var n=Ie(e.target);(function(t,e){return Yr(e,"a",(function(e){return Re(e,Ie(t.getBody()))})).bind((function(t){return nr(t,"href")}))})(t,n).each((function(n){if(e.preventDefault(),/^#/.test(n)){var r=t.dom.select(n+',[name="'+(Rt(i=n,"#")?function(t,e){return t.substring(e)}(i,"#".length):i)+'"]');r.length&&t.selection.scrollIntoView(r[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var i}))}}(t,n):t.fire(e,n)},PE=function(t,e){var n;if(t.delegates||(t.delegates={}),!t.delegates[e]&&!t.removed){var r=NE(t,e);if(ic(t)){if(sx||(sx={},t.editorManager.on("removeEditor",(function(){t.editorManager.activeEditor||sx&&(ft(sx,(function(e,n){t.dom.unbind(NE(t,n))})),sx=null)}))),sx[e])return;n=function(n){for(var r=n.target,i=t.editorManager.get(),o=i.length;o--;){var a=i[o].getBody();(a===r||AE.isChildOf(r,a))&&IE(i[o],e,n)}},sx[e]=n,AE.bind(r,e,n)}else n=function(n){IE(t,e,n)},AE.bind(r,e,n),t.delegates[e]=n}},DE=Ot(Ot({},TE),{bindPendingEventDelegates:function(){var t=this;Me.each(t._pendingNativeEvents,(function(e){PE(t,e)}))},toggleNativeEvent:function(t,e){var n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?PE(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&(n.dom.unbind(NE(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents:function(){var t=this,e=t.getBody(),n=t.dom;t.delegates&&(ft(t.delegates,(function(e,n){t.dom.unbind(NE(t,n),n,e)})),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}}),LE=["design","readonly"],RE=function(t,e,n,r){var i=n[e.get()],o=n[r];try{o.activate()}catch(t){return void console.error("problem while activating editor mode "+r+":",t)}i.deactivate(),i.editorReadOnly!==o.editorReadOnly&&EE(t,o.editorReadOnly),e.set(r),function(t,e){t.fire("SwitchMode",{mode:e})}(t,r)},jE=function(t){var e=gs("design"),n=gs({design:{activate:w,deactivate:w,editorReadOnly:!1},readonly:{activate:w,deactivate:w,editorReadOnly:!0}});return function(t){t.serializer?CE(t):t.on("PreInit",(function(){CE(t)}))}(t),function(t){t.on("ShowCaret",(function(e){SE(t)&&e.preventDefault()})),t.on("ObjectSelected",(function(e){SE(t)&&e.preventDefault()}))}(t),{isReadOnly:function(){return SE(t)},set:function(r){return function(t,e,n,r){if(r!==n.get()){if(!yt(e,r))throw new Error("Editor mode '"+r+"' is invalid");t.initialized?RE(t,n,e,r):t.on("init",(function(){return RE(t,n,e,r)}))}}(t,n.get(),e,r)},get:function(){return e.get()},register:function(t,e){n.set(function(t,e,n){var r;if($(LE,e))throw new Error("Cannot override default mode "+e);return Ot(Ot({},t),((r={})[e]=Ot(Ot({},n),{deactivate:function(){try{n.deactivate()}catch(t){console.error("problem while deactivating editor mode "+e+":",t)}}}),r))}(n.get(),t,e))}}},BE=Me.each,FE=Me.explode,zE={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},$E=Me.makeMap("alt,ctrl,shift,meta,access"),GE=function(t){var e,n={};BE(FE(t.toLowerCase(),"+"),(function(t){t in $E?n[t]=!0:/^[0-9]{2,}$/.test(t)?n.keyCode=parseInt(t,10):(n.charCode=t.charCodeAt(0),n.keyCode=zE[t]||t.toUpperCase().charCodeAt(0))}));var r=[n.keyCode];for(e in $E)n[e]?r.push(e):n[e]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,_e.mac?n.ctrl=!0:n.shift=!0),n.meta&&(_e.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},VE=function(){function t(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;var e=this;t.on("keyup keypress keydown",(function(t){!e.hasModifier(t)&&!e.isFunctionKey(t)||t.isDefaultPrevented()||(BE(e.shortcuts,(function(n){if(e.matchShortcut(t,n))return e.pendingPatterns=n.subpatterns.slice(0),"keydown"===t.type&&e.executeShortcutAction(n),!0})),e.matchShortcut(t,e.pendingPatterns[0])&&(1===e.pendingPatterns.length&&"keydown"===t.type&&e.executeShortcutAction(e.pendingPatterns[0]),e.pendingPatterns.shift()))}))}return t.prototype.add=function(t,e,n,r){var i=this,o=i.normalizeCommandFunc(n);return BE(FE(Me.trim(t)),(function(t){var n=i.createShortcut(t,e,o,r);i.shortcuts[n.id]=n})),!0},t.prototype.remove=function(t){var e=this.createShortcut(t);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)},t.prototype.normalizeCommandFunc=function(t){var e=this,n=t;return"string"==typeof n?function(){e.editor.execCommand(n,!1,null)}:Me.isArray(n)?function(){e.editor.execCommand(n[0],n[1],n[2])}:n},t.prototype.createShortcut=function(t,e,n,r){var i=Me.map(FE(t,">"),GE);return i[i.length-1]=Me.extend(i[i.length-1],{func:n,scope:r||this.editor}),Me.extend(i[0],{desc:this.editor.translate(e),subpatterns:i.slice(1)})},t.prototype.hasModifier=function(t){return t.altKey||t.ctrlKey||t.metaKey},t.prototype.isFunctionKey=function(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123},t.prototype.matchShortcut=function(t,e){return!!e&&e.ctrl===t.ctrlKey&&e.meta===t.metaKey&&e.alt===t.altKey&&e.shift===t.shiftKey&&!!(t.keyCode===e.keyCode||t.charCode&&t.charCode===e.charCode)&&(t.preventDefault(),!0)},t.prototype.executeShortcutAction=function(t){return t.func?t.func.call(t.scope):null},t}(),UE=function(){var t,e,n,r,i,o,a,s,u=(e={},n={},r={},i={},o={},a={},s=function(t,e){return function(n,r){return t[n.toLowerCase()]=Ot(Ot({},r),{type:e})}},{addButton:s(t={},"button"),addGroupToolbarButton:s(t,"grouptoolbarbutton"),addToggleButton:s(t,"togglebutton"),addMenuButton:s(t,"menubutton"),addSplitButton:s(t,"splitbutton"),addMenuItem:s(e,"menuitem"),addNestedMenuItem:s(e,"nestedmenuitem"),addToggleMenuItem:s(e,"togglemenuitem"),addAutocompleter:s(n,"autocompleter"),addContextMenu:s(i,"contextmenu"),addContextToolbar:s(o,"contexttoolbar"),addContextForm:s(o,"contextform"),addSidebar:s(a,"sidebar"),addIcon:function(t,e){return r[t.toLowerCase()]=e},getAll:function(){return{buttons:t,menuItems:e,icons:r,popups:n,contextMenus:i,contextToolbars:o,sidebars:a}}});return{addAutocompleter:u.addAutocompleter,addButton:u.addButton,addContextForm:u.addContextForm,addContextMenu:u.addContextMenu,addContextToolbar:u.addContextToolbar,addIcon:u.addIcon,addMenuButton:u.addMenuButton,addMenuItem:u.addMenuItem,addNestedMenuItem:u.addNestedMenuItem,addSidebar:u.addSidebar,addSplitButton:u.addSplitButton,addToggleButton:u.addToggleButton,addGroupToolbarButton:u.addGroupToolbarButton,addToggleMenuItem:u.addToggleMenuItem,getAll:u.getAll}},WE=ls.DOM,HE=Me.extend,YE=Me.each,XE=Me.resolve,qE=_e.ie,ZE=function(){function t(t,e,n){var r=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,HE(this,DE),this.settings=Um(this,t,this.documentBaseUrl,n.defaultSettings,e),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(ps.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),ls.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),xs.languageLoad=this.settings.language_load,xs.baseURL=n.baseURL,this.id=t,this.setDirty(!1),this.documentBaseURI=new fh(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new VE(this),this.editorCommands=new yE(this),this.settings.cache_suffix&&(_e.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:UE(),styleSheetLoader:void 0,show:w,hide:w,enable:w,disable:w,isDisabled:N};var i=jE(this);this.mode=i,this.setMode=i.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=rs.overrideDefaults((function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}}))}return t.prototype.render=function(){!function(t){var e=t.id;bs.setCode(tc(t));var n=function(){rE.unbind(window,"ready",n),t.render()};if(Do.Event.domLoaded){if(t.getElement()&&_e.contentEditable){var r=Ie(t.getElement()),i=function(t){return q(t.dom.attributes,(function(t,e){return t[e.name]=e.value,t}),{})}(r);t.on("remove",(function(){W(r.dom.attributes,(function(t){return rr(r,t.name)})),tr(r,i)})),t.ui.styleSheetLoader=function(t,e){return ti.forElement(t,{contentCssCors:uc(e),referrerPolicy:Qu(e)})}(r,t),function(t){return t.getParam("inline")}(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var o=t.getElement().form||rE.getParent(e,"form");o&&(t.formElement=o,function(t){return t.getParam("hidden_input")}(t)&&!Bn(t.getElement())&&(rE.insertAfter(rE.create("input",{type:"hidden",name:e}),e),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},rE.bind(o,"submit reset",t.formEventDelegate),t.on("reset",(function(){t.resetContent()})),!function(t){return t.getParam("submit_patch")}(t)||o.submit.nodeType||o.submit.length||o._mceOldSubmit||(o._mceOldSubmit=o.submit,o.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),o._mceOldSubmit(o)})),t.windowManager=ry(t),t.notificationManager=ty(t),function(t){return"xml"===t.getParam("encoding")}(t)&&t.on("GetContent",(function(t){t.save&&(t.content=rE.encode(t.content))})),function(t){return t.getParam("add_form_submit_trigger")}(t)&&t.on("submit",(function(){t.initialized&&t.save()})),function(t){return t.getParam("add_unload_trigger")}(t)&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),aE(t,t.suffix)}}else rE.bind(window,"ready",n)}(this)},t.prototype.focus=function(t){this.execCommand("mceFocus",!1,t)},t.prototype.hasFocus=function(){return Yd(this)},t.prototype.execCallback=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=this,o=i.settings[t];if(o)return i.callbackLookup&&(r=i.callbackLookup[t])&&(o=r.func,r=r.scope),"string"==typeof o&&(r=(r=o.replace(/\.\w+$/,""))?XE(r):0,o=XE(o),i.callbackLookup=i.callbackLookup||{},i.callbackLookup[t]={func:o,scope:r}),o.apply(r||i,e)},t.prototype.translate=function(t){return bs.translate(t)},t.prototype.getParam=function(t,e,n){return function(t,e,n,r){var i,o=e in t.settings?t.settings[e]:n;return"hash"===r?function(t){var e={};return"string"==typeof t?U(t.indexOf("=")>0?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(","),(function(t){var n=t.split("=");n.length>1?e[Me.trim(n[0])]=Me.trim(n[1]):e[Me.trim(n[0])]=Me.trim(n[0])})):e=t,e}(o):"string"===r?Wm(f,t,e).getOr(n):"number"===r?Wm(x,t,e).getOr(n):"boolean"===r?Wm(g,t,e).getOr(n):"object"===r?Wm(d,t,e).getOr(n):"array"===r?Wm(h,t,e).getOr(n):"string[]"===r?Wm((i=f,function(t){return h(t)&&tt(t,i)}),t,e).getOr(n):"function"===r?Wm(b,t,e).getOr(n):o}(this,t,e,n)},t.prototype.hasPlugin=function(t,e){return!(!$(cc(this).split(/[ ,]/),t)||e&&void 0===ey.get(t))},t.prototype.nodeChanged=function(t){this._nodeChangeDispatcher.nodeChanged(t)},t.prototype.addCommand=function(t,e,n){this.editorCommands.addCommand(t,e,n)},t.prototype.addQueryStateHandler=function(t,e,n){this.editorCommands.addQueryStateHandler(t,e,n)},t.prototype.addQueryValueHandler=function(t,e,n){this.editorCommands.addQueryValueHandler(t,e,n)},t.prototype.addShortcut=function(t,e,n,r){this.shortcuts.add(t,e,n,r)},t.prototype.execCommand=function(t,e,n,r){return this.editorCommands.execCommand(t,e,n,r)},t.prototype.queryCommandState=function(t){return this.editorCommands.queryCommandState(t)},t.prototype.queryCommandValue=function(t){return this.editorCommands.queryCommandValue(t)},t.prototype.queryCommandSupported=function(t){return this.editorCommands.queryCommandSupported(t)},t.prototype.show=function(){var t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(WE.show(t.getContainer()),WE.hide(t.id)),t.load(),t.fire("show"))},t.prototype.hide=function(){var t=this,e=t.getDoc();t.hidden||(qE&&e&&!t.inline&&e.execCommand("SelectAll"),t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(WE.hide(t.getContainer()),WE.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.fire("hide"))},t.prototype.isHidden=function(){return!!this.hidden},t.prototype.setProgressState=function(t,e){this.fire("ProgressState",{state:t,time:e})},t.prototype.load=function(t){var e,n=this,r=n.getElement();if(n.removed)return"";if(r){(t=t||{}).load=!0;var i=Bn(r)?r.value:r.innerHTML;return e=n.setContent(i,t),t.element=r,t.no_events||n.fire("LoadContent",t),t.element=r=null,e}},t.prototype.save=function(t){var e,n,r=this,i=r.getElement();if(i&&r.initialized&&!r.removed)return(t=t||{}).save=!0,t.element=i,t.content=r.getContent(t),t.no_events||r.fire("SaveContent",t),"raw"===t.format&&r.fire("RawSaveContent",t),e=t.content,Bn(i)?i.value=e:(!t.is_removing&&r.inline||(i.innerHTML=e),(n=WE.getParent(r.id,"form"))&&YE(n.elements,(function(t){if(t.name===r.id)return t.value=e,!1}))),t.element=i=null,!1!==t.set_dirty&&r.setDirty(!1),e},t.prototype.setContent=function(t,e){return _m(this,t,e)},t.prototype.getContent=function(t){return function(t,e){return void 0===e&&(e={}),function(t,e,n){return Zv(t).editor.getContent(e,n)}(t,e,e.format?e.format:"html")}(this,t)},t.prototype.insertContent=function(t,e){e&&(t=HE({content:t},e)),this.execCommand("mceInsertContent",!1,t)},t.prototype.resetContent=function(t){void 0===t?_m(this,this.startContent,{format:"raw"}):_m(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},t.prototype.isDirty=function(){return!this.isNotDirty},t.prototype.setDirty=function(t){var e=!this.isNotDirty;this.isNotDirty=!t,t&&t!==e&&this.fire("dirty")},t.prototype.getContainer=function(){var t=this;return t.container||(t.container=WE.get(t.editorContainer||t.id+"_parent")),t.container},t.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},t.prototype.getElement=function(){return this.targetElm||(this.targetElm=WE.get(this.id)),this.targetElm},t.prototype.getWin=function(){var t,e=this;return e.contentWindow||(t=e.iframeElement)&&(e.contentWindow=t.contentWindow),e.contentWindow},t.prototype.getDoc=function(){var t,e=this;return e.contentDocument||(t=e.getWin())&&(e.contentDocument=t.document),e.contentDocument},t.prototype.getBody=function(){var t=this.getDoc();return this.bodyElement||(t?t.body:null)},t.prototype.convertURL=function(t,e,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",t,n,!0,e):!i.convert_urls||n&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length?t:i.relative_urls?r.documentBaseURI.toRelative(t):t=r.documentBaseURI.toAbsolute(t,i.remove_script_host)},t.prototype.addVisual=function(t){!function(t,e){(function(t,e){Kv(t).editor.addVisual(e)})(t,e)}(this,t)},t.prototype.remove=function(){!function(t){if(!t.removed){var e=t._selectionOverrides,n=t.editorUpload,r=t.getBody(),i=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&i&&Em.remove(i.nextSibling),function(t){t.fire("remove")}(t),t.editorManager.remove(t),!t.inline&&r&&function(t){Em.setStyle(t.id,"display",t.orgDisplay)}(t),function(t){t.fire("detach")}(t),Em.remove(t.getContainer()),Sm(e),Sm(n),t.destroy()}}(this)},t.prototype.destroy=function(t){!function(t,e){var n=t.selection,r=t.dom;t.destroyed||(e||t.removed?(e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),Sm(n),Sm(r)),function(t){var e=t.formElement;e&&(e._mceOldSubmit&&(e.submit=e._mceOldSubmit,e._mceOldSubmit=null),Em.unbind(e,"submit reset",t.formEventDelegate))}(t),function(t){t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null)}(t),t.destroyed=!0):t.remove())}(this,t)},t.prototype.uploadImages=function(t){return this.editorUpload.uploadImages(t)},t.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},t.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},t.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},t.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},t.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},t}(),KE=ls.DOM,JE=Me.explode,QE=Me.each,tS=Me.extend,eS=0,nS=!1,rS=[],iS=[],oS=function(t){var e=t.type;QE(cS.get(),(function(n){switch(e){case"scroll":n.fire("ScrollWindow",t);break;case"resize":n.fire("ResizeWindow",t)}}))},aS=function(t){t!==nS&&(t?rs(window).on("resize scroll",oS):rs(window).off("resize scroll",oS),nS=t)},sS=function(t){var e=iS;delete rS[t.id];for(var n=0;n<rS.length;n++)if(rS[n]===t){rS.splice(n,1);break}return iS=Y(iS,(function(e){return t!==e})),cS.activeEditor===t&&(cS.activeEditor=iS.length>0?iS[0]:null),cS.focusedEditor===t&&(cS.focusedEditor=null),e.length!==iS.length},uS="CSS1Compat"!==document.compatMode,cS=Ot(Ot({},TE),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:rs,majorVersion:"5",minorVersion:"10.7",releaseDate:"2022-12-06",editors:rS,i18n:bs,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var t,e,n=this,r="";e=fh.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/"));var i,o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,r=o.suffix;else{for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var u;if(""!==(u=a[s].src||"")){var c=u.substring(u.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(u)){-1!==c.indexOf(".min")&&(r=".min"),t=u.substring(0,u.lastIndexOf("/"));break}}}!t&&document.currentScript&&(-1!==(u=document.currentScript.src).indexOf(".min")&&(r=".min"),t=u.substring(0,u.lastIndexOf("/")))}n.baseURL=new fh(e).toAbsolute(t),n.documentBaseURL=e,n.baseURI=new fh(n.baseURL),n.suffix=r,(i=n).on("AddEditor",M(Vd,i)),i.on("RemoveEditor",M(Ud,i))},overrideDefaults:function(t){var e=t.base_url;e&&this._setBaseUrl(e);var n=t.suffix;t.suffix&&(this.suffix=n),this.defaultSettings=t;var r=t.plugin_base_urls;void 0!==r&&ft(r,(function(t,e){xs.PluginManager.urls[e]=t}))},init:function(t){var e,n=this,r=Me.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=function(t){var e=t.id;return e||(e=mt(t,"name").filter((function(t){return!KE.get(t)})).getOrThunk(KE.uniqueId),t.setAttribute("id",e)),e},o=function(t,e){return e.constructor===RegExp?e.test(t.className):KE.hasClass(t,e)},a=function(t){e=t},s=function(){var e,u,c=0,l=[],f=function(t,r,i){var o=new ZE(t,r,n);l.push(o),o.on("init",(function(){++c===e.length&&a(l)})),o.targetElm=o.targetElm||i,o.render()};KE.unbind(window,"ready",s),(u=t.onpageload)&&u.apply(n,[]),e=rs.unique(function(t){var e=[];if(_e.browser.isIE()&&_e.browser.version.major<11)return cy("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(uS)return cy("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(t.types)return QE(t.types,(function(t){e=e.concat(KE.select(t.selector))})),e;if(t.selector)return KE.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":var n=t.elements||"";n.length>0&&QE(JE(n),(function(t){var n=KE.get(t);n?e.push(n):QE(document.forms,(function(n){QE(n.elements,(function(n){n.name===t&&(t="mce_editor_"+eS++,KE.setAttrib(n,"id",t),e.push(n))}))}))}));break;case"textareas":case"specific_textareas":QE(KE.select("textarea"),(function(n){t.editor_deselector&&o(n,t.editor_deselector)||t.editor_selector&&!o(n,t.editor_selector)||e.push(n)}))}return e}(t)),t.types?QE(t.types,(function(n){Me.each(e,(function(e){return!KE.is(e,n.selector)||(f(i(e),tS({},t,n),e),!1)}))})):(Me.each(e,(function(t){var e;(e=n.get(t.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(sS(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null)})),0===(e=Me.grep(e,(function(t){return!n.get(t.id)}))).length?a([]):QE(e,(function(e){!function(t,e){return t.inline&&e.tagName.toLowerCase()in r}(t,e)?f(i(e),t,e):cy("Could not initialize inline editor on invalid inline target element",e)})))};return n.settings=t,KE.bind(window,"ready",s),new Xr((function(t){e?t(e):a=function(e){t(e)}}))},get:function(t){return 0===arguments.length?iS.slice(0):f(t)?K(iS,(function(e){return e.id===t})).getOr(null):x(t)&&iS[t]?iS[t]:null},add:function(t){var e=this;return rS[t.id]===t||(null===e.get(t.id)&&("length"!==t.id&&(rS[t.id]=t),rS.push(t),iS.push(t)),aS(!0),e.activeEditor=t,e.fire("AddEditor",{editor:t}),ux||(ux=function(t){var n=e.fire("BeforeUnload");if(n.returnValue)return t.preventDefault(),t.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",ux))),t},createEditor:function(t,e){return this.add(new ZE(t,e,this))},remove:function(t){var e,n,r=this;if(t){if(!f(t))return n=t,p(r.get(n.id))?null:(sS(n)&&r.fire("RemoveEditor",{editor:n}),0===iS.length&&window.removeEventListener("beforeunload",ux),n.remove(),aS(iS.length>0),n);QE(KE.select(t),(function(t){(n=r.get(t.id))&&r.remove(n)}))}else for(e=iS.length-1;e>=0;e--)r.remove(iS[e])},execCommand:function(t,e,n){var r=this,i=r.get(n);switch(t){case"mceAddEditor":return r.get(n)||new ZE(n,r.settings,r).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:function(){QE(iS,(function(t){t.save()}))},addI18n:function(t,e){bs.add(t,e)},translate:function(t){return bs.translate(t)},setActive:function(t){var e=this.activeEditor;this.activeEditor!==t&&(e&&e.fire("deactivate",{relatedTarget:t}),t.fire("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl:function(t){this.baseURL=new fh(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new fh(this.baseURL)}});cS.setup();var lS,fS,dS,hS,pS=Math.min,gS=Math.max,vS=Math.round,mS=function(t,e,n){var r=e.x,i=e.y,o=t.w,a=t.h,s=e.w,u=e.h,c=(n||"").split("");return"b"===c[0]&&(i+=u),"r"===c[1]&&(r+=s),"c"===c[0]&&(i+=vS(u/2)),"c"===c[1]&&(r+=vS(s/2)),"b"===c[3]&&(i-=a),"r"===c[4]&&(r-=o),"c"===c[3]&&(i-=vS(a/2)),"c"===c[4]&&(r-=vS(o/2)),yS(r,i,o,a)},yS=function(t,e,n,r){return{x:t,y:e,w:n,h:r}},bS={inflate:function(t,e,n){return yS(t.x-e,t.y-n,t.w+2*e,t.h+2*n)},relativePosition:mS,findBestRelativePosition:function(t,e,n,r){var i,o;for(o=0;o<r.length;o++)if((i=mS(t,e,r[o])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},intersect:function(t,e){var n=gS(t.x,e.x),r=gS(t.y,e.y),i=pS(t.x+t.w,e.x+e.w),o=pS(t.y+t.h,e.y+e.h);return i-n<0||o-r<0?null:yS(n,r,i-n,o-r)},clamp:function(t,e,n){var r=t.x,i=t.y,o=t.x+t.w,a=t.y+t.h,s=e.x+e.w,u=e.y+e.h,c=gS(0,e.x-r),l=gS(0,e.y-i),f=gS(0,o-s),d=gS(0,a-u);return r+=c,i+=l,n&&(o+=c,a+=l,r-=f,i-=d),yS(r,i,(o-=f)-r,(a-=d)-i)},create:yS,fromClientRect:function(t){return yS(t.left,t.top,t.width,t.height)}},xS=(lS={},fS={},{load:function(t,e){var n='Script at URL "'+e+'" failed to load',r='Script at URL "'+e+"\" did not call `tinymce.Resource.add('"+t+"', data)` within 1 second";if(void 0!==lS[t])return lS[t];var i=new Xr((function(i,o){var a=function(t,e,n){void 0===n&&(n=1e3);var r=!1,i=null,o=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r||(r=!0,null!==i&&(clearTimeout(i),i=null),t.apply(null,e))}},a=o(t),s=o(e);return{start:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r||null!==i||(i=setTimeout((function(){return s.apply(null,t)}),n))},resolve:a,reject:s}}(i,o);fS[t]=a.resolve,ps.ScriptLoader.loadScript(e,(function(){return a.start(r)}),(function(){return a.reject(n)}))}));return lS[t]=i,i},add:function(t,e){void 0!==fS[t]&&(fS[t](e),delete fS[t]),lS[t]=Xr.resolve(e)}}),wS=Me.each,_S=Me.extend,ES=function(){};ES.extend=dS=function(t){var e=this.prototype,n=function(){var t,e,n,r=this;if(!hS&&(r.init&&r.init.apply(r,arguments),e=r.Mixins))for(t=e.length;t--;)(n=e[t]).init&&n.init.apply(r,arguments)},r=function(){return this};hS=!0;var i=new this;return hS=!1,t.Mixins&&(wS(t.Mixins,(function(e){for(var n in e)"init"!==n&&(t[n]=e[n])})),e.Mixins&&(t.Mixins=e.Mixins.concat(t.Mixins))),t.Methods&&wS(t.Methods.split(","),(function(e){t[e]=r})),t.Properties&&wS(t.Properties.split(","),(function(e){var n="_"+e;t[e]=function(t){var e=this;return void 0!==t?(e[n]=t,e):e[n]}})),t.Statics&&wS(t.Statics,(function(t,e){n[e]=t})),t.Defaults&&e.Defaults&&(t.Defaults=_S({},e.Defaults,t.Defaults)),ft(t,(function(t,n){"function"==typeof t&&e[n]?i[n]=function(t,n){return function(){var r=this,i=r._super;r._super=e[t];var o=n.apply(r,arguments);return r._super=i,o}}(n,t):i[n]=t})),n.prototype=i,n.constructor=n,n.extend=dS,n};var SS,CS=Math.min,kS=Math.max,MS=Math.round,OS={serialize:function(t){var e=JSON.stringify(t);return f(e)?e.replace(/[\u0080-\uFFFF]/g,(function(t){var e=t.charCodeAt(0).toString(16);return"\\u"+"0000".substring(e.length)+e})):e},parse:function(t){try{return JSON.parse(t)}catch(t){}}},TS={callbacks:{},count:0,send:function(t){var e=this,n=ls.DOM,r=void 0!==t.count?t.count:e.count,i="tinymce_jsonp_"+r;e.callbacks[r]=function(o){n.remove(i),delete e.callbacks[r],t.callback(o)},n.add(n.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),e.count++}},AS=Ot(Ot({},TE),{send:function(t){var e,n=0,r=function(){!t.async||4===e.readyState||n++>1e4?(t.success&&n<1e4&&200===e.status?t.success.call(t.success_scope,""+e.responseText,e,t):t.error&&t.error.call(t.error_scope,n>1e4?"TIMED_OUT":"GENERAL",e,t),e=null):Jr.setTimeout(r,10)};if(t.scope=t.scope||this,t.success_scope=t.success_scope||t.scope,t.error_scope=t.error_scope||t.scope,t.async=!1!==t.async,t.data=t.data||"",AS.fire("beforeInitialize",{settings:t}),(e=new XMLHttpRequest).overrideMimeType&&e.overrideMimeType(t.content_type),e.open(t.type||(t.data?"POST":"GET"),t.url,t.async),t.crossDomain&&(e.withCredentials=!0),t.content_type&&e.setRequestHeader("Content-Type",t.content_type),t.requestheaders&&Me.each(t.requestheaders,(function(t){e.setRequestHeader(t.key,t.value)})),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),(e=AS.fire("beforeSend",{xhr:e,settings:t}).xhr).send(t.data),!t.async)return r();Jr.setTimeout(r,10)}}),NS=Me.extend,IS=function(){function t(t){this.settings=NS({},t),this.count=0}return t.sendRPC=function(e){return(new t).send(e)},t.prototype.send=function(t){var e=t.error,n=t.success,r=NS(this.settings,t);r.success=function(t,i){void 0===(t=OS.parse(t))&&(t={error:"JSON Parse error."}),t.error?e.call(r.error_scope||r.scope,t.error,i):n.call(r.success_scope||r.scope,t.result)},r.error=function(t,n){e&&e.call(r.error_scope||r.scope,t,n)},r.data=OS.serialize({id:t.id||"c"+this.count++,method:t.method,params:t.params}),r.content_type="application/json",AS.send(r)},t}();try{var PS="__storage_test__";(SS=window.localStorage).setItem(PS,PS),SS.removeItem(PS)}catch(t){SS=function(){var t={},e=[],n={getItem:function(e){return t[e]||null},setItem:function(n,r){e.push(n),t[n]=String(r)},key:function(t){return e[t]},removeItem:function(n){e=e.filter((function(t){return t===n})),delete t[n]},clear:function(){e=[],t={}},length:0};return Object.defineProperty(n,"length",{get:function(){return e.length},configurable:!1,enumerable:!1}),n}()}var DS={geom:{Rect:bS},util:{Promise:Xr,Delay:Jr,Tools:Me,VK:zf,URI:fh,Class:ES,EventDispatcher:ME,Observable:TE,I18n:bs,XHR:AS,JSON:OS,JSONRequest:IS,JSONP:TS,LocalStorage:SS,Color:function(t){var e={},n=0,r=0,i=0,o=function(t){var o;return"object"==typeof t?"r"in t?(n=t.r,r=t.g,i=t.b):"v"in t&&function(t,e,o){if(t=(parseInt(t,10)||0)%360,e=parseInt(e,10)/100,o=parseInt(o,10)/100,e=kS(0,CS(e,1)),o=kS(0,CS(o,1)),0!==e){var a=t/60,s=o*e,u=s*(1-Math.abs(a%2-1)),c=o-s;switch(Math.floor(a)){case 0:n=s,r=u,i=0;break;case 1:n=u,r=s,i=0;break;case 2:n=0,r=s,i=u;break;case 3:n=0,r=u,i=s;break;case 4:n=u,r=0,i=s;break;case 5:n=s,r=0,i=u;break;default:n=r=i=0}n=MS(255*(n+c)),r=MS(255*(r+c)),i=MS(255*(i+c))}else n=r=i=MS(255*o)}(t.h,t.s,t.v):(o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(t))?(n=parseInt(o[1],10),r=parseInt(o[2],10),i=parseInt(o[3],10)):(o=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(t))?(n=parseInt(o[1],16),r=parseInt(o[2],16),i=parseInt(o[3],16)):(o=/#([0-F])([0-F])([0-F])/gi.exec(t))&&(n=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),i=parseInt(o[3]+o[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,i=i<0?0:i>255?255:i,e};return t&&o(t),e.toRgb=function(){return{r:n,g:r,b:i}},e.toHsv=function(){return function(t,e,n){var r,i;i=0;var o=CS(t/=255,CS(e/=255,n/=255)),a=kS(t,kS(e,n));return o===a?{h:0,s:0,v:100*(i=o)}:(r=(a-o)/a,i=a,{h:MS(60*((t===o?3:n===o?1:5)-(t===o?e-n:n===o?t-e:n-t)/(a-o))),s:MS(100*r),v:MS(100*i)})}(n,r,i)},e.toHex=function(){var t=function(t){return(t=parseInt(t,10).toString(16)).length>1?t:"0"+t};return"#"+t(n)+t(r)+t(i)},e.parse=o,e},ImageUploader:function(t){var e=dy(),n=my(t,e);return{upload:function(e,r){return void 0===r&&(r=!0),n.upload(e,r?vy(t):void 0)}}}},dom:{EventUtils:Do,Sizzle:ma,DomQuery:rs,TreeWalker:ei,TextSeeker:Gs,DOMUtils:ls,ScriptLoader:ps,RangeUtils:rd,Serializer:wm,StyleSheetLoader:Qr,ControlSelection:Gf,BookmarkManager:Df,Selection:rm,Event:Do.Event},html:{Styles:So,Entities:co,Node:ih,Schema:_o,SaxParser:mh,DomParser:ym,Writer:Eh,Serializer:Sh},Env:_e,AddOnManager:xs,Annotator:Pf,Formatter:Ey,UndoManager:Cy,EditorCommands:yE,WindowManager:ry,NotificationManager:ty,EditorObservable:DE,Shortcuts:VE,Editor:ZE,FocusManager:Fd,EditorManager:cS,DOM:ls.DOM,ScriptLoader:ps.ScriptLoader,PluginManager:ey,ThemeManager:ny,IconManager:Hm,Resource:xS,trim:Me.trim,isArray:Me.isArray,is:Me.is,toArray:Me.toArray,makeMap:Me.makeMap,each:Me.each,map:Me.map,grep:Me.grep,inArray:Me.inArray,extend:Me.extend,create:Me.create,walk:Me.walk,createNS:Me.createNS,resolve:Me.resolve,explode:Me.explode,_addCacheSuffix:Me._addCacheSuffix,isOpera:_e.opera,isWebKit:_e.webkit,isIE:_e.ie,isGecko:_e.gecko,isMac:_e.mac},LS=Me.extend(cS,DS);!function(t){window.tinymce=t,window.tinyMCE=t}(LS),function(e){try{t.exports=e}catch(t){}}(LS)}()},655:function(t,e,n){"use strict";n.r(e),n.d(e,{__assign:function(){return o},__asyncDelegator:function(){return C},__asyncGenerator:function(){return S},__asyncValues:function(){return k},__await:function(){return E},__awaiter:function(){return p},__classPrivateFieldGet:function(){return N},__classPrivateFieldIn:function(){return P},__classPrivateFieldSet:function(){return I},__createBinding:function(){return v},__decorate:function(){return s},__esDecorate:function(){return c},__exportStar:function(){return m},__extends:function(){return i},__generator:function(){return g},__importDefault:function(){return A},__importStar:function(){return T},__makeTemplateObject:function(){return M},__metadata:function(){return h},__param:function(){return u},__propKey:function(){return f},__read:function(){return b},__rest:function(){return a},__runInitializers:function(){return l},__setFunctionName:function(){return d},__spread:function(){return x},__spreadArray:function(){return _},__spreadArrays:function(){return w},__values:function(){return y}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e,n,r,i,o){function a(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var s,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",l=!e&&t?r.static?t:t.prototype:null,f=e||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d=!1,h=n.length-1;h>=0;h--){var p={};for(var g in r)p[g]="access"===g?{}:r[g];for(var g in r.access)p.access[g]=r.access[g];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(t||null))};var v=(0,n[h])("accessor"===u?{get:f.get,set:f.set}:f[c],p);if("accessor"===u){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(s=a(v.get))&&(f.get=s),(s=a(v.set))&&(f.set=s),(s=a(v.init))&&i.push(s)}else(s=a(v))&&("field"===u?i.push(s):f[c]=s)}l&&Object.defineProperty(l,r.name,f),d=!0}function l(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function f(t){return"symbol"==typeof t?t:"".concat(t)}function d(t,e,n){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function h(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function p(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function g(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var v=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function m(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||v(e,t,n)}function y(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function x(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function w(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function _(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function E(t){return this instanceof E?(this.v=t,this):new E(t)}function S(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof E?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function C(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:E(t[r](e)),done:!1}:i?i(e):e}:i}}function k(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=y(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function M(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var O=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&v(e,t,n);return O(e,t),e}function A(t){return t&&t.__esModule?t:{default:t}}function N(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function I(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}function P(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}},7152:function(t,e,n){"use strict";n.r(e);var r=["compactDisplay","currency","currencyDisplay","currencySign","localeMatcher","notation","numberingSystem","signDisplay","style","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function i(t,e){"undefined"!=typeof console&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}var o=Array.isArray;function a(t){return null!==t&&"object"==typeof t}function s(t){return"string"==typeof t}var u=Object.prototype.toString,c="[object Object]";function l(t){return u.call(t)===c}function f(t){return null==t}function d(t){return"function"==typeof t}function h(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=null,r=null;return 1===t.length?a(t[0])||o(t[0])?r=t[0]:"string"==typeof t[0]&&(n=t[0]):2===t.length&&("string"==typeof t[0]&&(n=t[0]),(a(t[1])||o(t[1]))&&(r=t[1])),{locale:n,params:r}}function p(t){return JSON.parse(JSON.stringify(t))}function g(t,e){return!!~t.indexOf(e)}var v=Object.prototype.hasOwnProperty;function m(t,e){return v.call(t,e)}function y(t){for(var e=arguments,n=Object(t),r=1;r<arguments.length;r++){var i=e[r];if(null!=i){var o=void 0;for(o in i)m(i,o)&&(a(i[o])?n[o]=y(n[o],i[o]):n[o]=i[o])}}return n}function b(t,e){if(t===e)return!0;var n=a(t),r=a(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=o(t),s=o(e);if(i&&s)return t.length===e.length&&t.every((function(t,n){return b(t,e[n])}));if(i||s)return!1;var u=Object.keys(t),c=Object.keys(e);return u.length===c.length&&u.every((function(n){return b(t[n],e[n])}))}catch(t){return!1}}var x={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(t,e){var n=e.data,r=e.parent,i=e.props,o=e.slots,a=r.$i18n;if(a){var s=i.path,u=i.locale,c=i.places,l=o(),f=a.i(s,u,function(t){var e;for(e in t)if("default"!==e)return!1;return Boolean(e)}(l)||c?function(t,e){var n=e?function(t){return Array.isArray(t)?t.reduce(_,{}):Object.assign({},t)}(e):{};if(!t)return n;var r=(t=t.filter((function(t){return t.tag||""!==t.text.trim()}))).every(E);return t.reduce(r?w:_,n)}(l.default,c):l),d=i.tag&&!0!==i.tag||!1===i.tag?i.tag:"span";return d?t(d,n,f):f}}};function w(t,e){return e.data&&e.data.attrs&&e.data.attrs.place&&(t[e.data.attrs.place]=e),t}function _(t,e,n){return t[n]=e,t}function E(t){return Boolean(t.data&&t.data.attrs&&t.data.attrs.place)}var S,C={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(t,e){var n=e.props,i=e.parent,o=e.data,u=i.$i18n;if(!u)return null;var c=null,l=null;s(n.format)?c=n.format:a(n.format)&&(n.format.key&&(c=n.format.key),l=Object.keys(n.format).reduce((function(t,e){var i;return g(r,e)?Object.assign({},t,((i={})[e]=n.format[e],i)):t}),null));var f=n.locale||u.locale,d=u._ntp(n.value,f,c,l),h=d.map((function(t,e){var n,r=o.scopedSlots&&o.scopedSlots[t.type];return r?r(((n={})[t.type]=t.value,n.index=e,n.parts=d,n)):t.value})),p=n.tag&&!0!==n.tag||!1===n.tag?n.tag:"span";return p?t(p,{attrs:o.attrs,class:o.class,staticClass:o.staticClass},h):h}};function k(t,e,n){T(0,n)&&A(t,e,n)}function M(t,e,n,r){if(T(0,n)){var i=n.context.$i18n;(function(t,e){var n=e.context;return t._locale===n.$i18n.locale})(t,n)&&b(e.value,e.oldValue)&&b(t._localeMessage,i.getLocaleMessage(i.locale))||A(t,e,n)}}function O(t,e,n,r){if(n.context){var o=n.context.$i18n||{};e.modifiers.preserve||o.preserveDirectiveContent||(t.textContent=""),t._vt=void 0,delete t._vt,t._locale=void 0,delete t._locale,t._localeMessage=void 0,delete t._localeMessage}else i("Vue instance does not exists in VNode context")}function T(t,e){var n=e.context;return n?!!n.$i18n||(i("VueI18n instance does not exists in Vue instance"),!1):(i("Vue instance does not exists in VNode context"),!1)}function A(t,e,n){var r,o,a=function(t){var e,n,r,i;return s(t)?e=t:l(t)&&(e=t.path,n=t.locale,r=t.args,i=t.choice),{path:e,locale:n,args:r,choice:i}}(e.value),u=a.path,c=a.locale,f=a.args,d=a.choice;if(u||c||f)if(u){var h=n.context;t._vt=t.textContent=null!=d?(r=h.$i18n).tc.apply(r,[u,d].concat(N(c,f))):(o=h.$i18n).t.apply(o,[u].concat(N(c,f))),t._locale=h.$i18n.locale,t._localeMessage=h.$i18n.getLocaleMessage(h.$i18n.locale)}else i("`path` is required in v-t directive");else i("value type not supported")}function N(t,e){var n=[];return t&&n.push(t),e&&(Array.isArray(e)||l(e))&&n.push(e),n}function I(t,e){void 0===e&&(e={bridge:!1}),I.installed=!0,(S=t).version&&Number(S.version.split(".")[0]),function(t){t.prototype.hasOwnProperty("$i18n")||Object.defineProperty(t.prototype,"$i18n",{get:function(){return this._i18n}}),t.prototype.$t=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this.$i18n;return r._t.apply(r,[t,r.locale,r._getMessages(),this].concat(e))},t.prototype.$tc=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];var i=this.$i18n;return i._tc.apply(i,[t,i.locale,i._getMessages(),this,e].concat(n))},t.prototype.$te=function(t,e){var n=this.$i18n;return n._te(t,n.locale,n._getMessages(),e)},t.prototype.$d=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this.$i18n).d.apply(e,[t].concat(n))},t.prototype.$n=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this.$i18n).n.apply(e,[t].concat(n))}}(S),S.mixin(function(t){function e(){this!==this.$root&&this.$options.__INTLIFY_META__&&this.$el&&this.$el.setAttribute("data-intlify",this.$options.__INTLIFY_META__)}return void 0===t&&(t=!1),t?{mounted:e}:{beforeCreate:function(){var t=this.$options;if(t.i18n=t.i18n||(t.__i18nBridge||t.__i18n?{}:null),t.i18n){if(t.i18n instanceof Z){if(t.__i18nBridge||t.__i18n)try{var e=t.i18n&&t.i18n.messages?t.i18n.messages:{};(t.__i18nBridge||t.__i18n).forEach((function(t){e=y(e,JSON.parse(t))})),Object.keys(e).forEach((function(n){t.i18n.mergeLocaleMessage(n,e[n])}))}catch(t){}this._i18n=t.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(l(t.i18n)){var n=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Z?this.$root.$i18n:null;if(n&&(t.i18n.root=this.$root,t.i18n.formatter=n.formatter,t.i18n.fallbackLocale=n.fallbackLocale,t.i18n.formatFallbackMessages=n.formatFallbackMessages,t.i18n.silentTranslationWarn=n.silentTranslationWarn,t.i18n.silentFallbackWarn=n.silentFallbackWarn,t.i18n.pluralizationRules=n.pluralizationRules,t.i18n.preserveDirectiveContent=n.preserveDirectiveContent),t.__i18nBridge||t.__i18n)try{var r=t.i18n&&t.i18n.messages?t.i18n.messages:{};(t.__i18nBridge||t.__i18n).forEach((function(t){r=y(r,JSON.parse(t))})),t.i18n.messages=r}catch(t){}var i=t.i18n.sharedMessages;i&&l(i)&&(t.i18n.messages=y(t.i18n.messages,i)),this._i18n=new Z(t.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(void 0===t.i18n.sync||t.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),n&&n.onComponentInstanceCreated(this._i18n)}}else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Z?this._i18n=this.$root.$i18n:t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof Z&&(this._i18n=t.parent.$i18n)},beforeMount:function(){var t=this.$options;t.i18n=t.i18n||(t.__i18nBridge||t.__i18n?{}:null),t.i18n?(t.i18n instanceof Z||l(t.i18n))&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Z||t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof Z)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},mounted:e,beforeDestroy:function(){if(this._i18n){var t=this;this.$nextTick((function(){t._subscribing&&(t._i18n.unsubscribeDataChanging(t),delete t._subscribing),t._i18nWatcher&&(t._i18nWatcher(),t._i18n.destroyVM(),delete t._i18nWatcher),t._localeWatcher&&(t._localeWatcher(),delete t._localeWatcher)}))}}}}(e.bridge)),S.directive("t",{bind:k,update:M,unbind:O}),S.component(x.name,x),S.component(C.name,C),S.config.optionMergeStrategies.i18n=function(t,e){return void 0===e?t:e}}var P=function(){this._caches=Object.create(null)};P.prototype.interpolate=function(t,e){if(!e)return[t];var n=this._caches[t];return n||(n=function(t){for(var e=[],n=0,r="";n<t.length;){var i=t[n++];if("{"===i){r&&e.push({type:"text",value:r}),r="";var o="";for(i=t[n++];void 0!==i&&"}"!==i;)o+=i,i=t[n++];var a="}"===i,s=D.test(o)?"list":a&&L.test(o)?"named":"unknown";e.push({value:o,type:s})}else"%"===i?"{"!==t[n]&&(r+=i):r+=i}return r&&e.push({type:"text",value:r}),e}(t),this._caches[t]=n),function(t,e){var n=[],r=0,i=Array.isArray(e)?"list":a(e)?"named":"unknown";if("unknown"===i)return n;for(;r<t.length;){var o=t[r];switch(o.type){case"text":n.push(o.value);break;case"list":n.push(e[parseInt(o.value,10)]);break;case"named":"named"===i&&n.push(e[o.value])}r++}return n}(n,e)};var D=/^(?:\d)+/,L=/^(?:\w)+/,R=0,j=5,B=6,F=[];F[0]={ws:[0],ident:[3,R],"[":[4],eof:[7]},F[1]={ws:[1],".":[2],"[":[4],eof:[7]},F[2]={ws:[2],ident:[3,R],0:[3,R],number:[3,R]},F[3]={ident:[3,R],0:[3,R],number:[3,R],ws:[1,1],".":[2,1],"[":[4,1],eof:[7,1]},F[4]={"'":[j,R],'"':[B,R],"[":[4,2],"]":[1,3],eof:8,else:[4,R]},F[j]={"'":[4,R],eof:8,else:[j,R]},F[B]={'"':[4,R],eof:8,else:[B,R]};var z=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function $(t){if(null==t)return"eof";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}var G=function(){this._cache=Object.create(null)};G.prototype.parsePath=function(t){var e=this._cache[t];return e||(e=function(t){var e,n,r,i,o,a,s,u=[],c=-1,l=0,f=0,d=[];function h(){var e=t[c+1];if(l===j&&"'"===e||l===B&&'"'===e)return c++,r="\\"+e,d[R](),!0}for(d[1]=function(){void 0!==n&&(u.push(n),n=void 0)},d[R]=function(){void 0===n?n=r:n+=r},d[2]=function(){d[R](),f++},d[3]=function(){if(f>0)f--,l=4,d[R]();else{if(f=0,void 0===n)return!1;if(!1===(n=function(t){var e,n,r,i=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&(r=i,z.test(r)?(n=(e=i).charCodeAt(0))!==e.charCodeAt(e.length-1)||34!==n&&39!==n?e:e.slice(1,-1):"*"+i)}(n)))return!1;d[1]()}};null!==l;)if(c++,"\\"!==(e=t[c])||!h()){if(i=$(e),8===(o=(s=F[l])[i]||s.else||8))return;if(l=o[0],(a=d[o[1]])&&(r=void 0===(r=o[2])?e:r,!1===a()))return;if(7===l)return u}}(t),e&&(this._cache[t]=e)),e||[]},G.prototype.getPathValue=function(t,e){if(!a(t))return null;var n=this.parsePath(e);if(0===n.length)return null;for(var r=n.length,i=t,o=0;o<r;){var s=i[n[o]];if(null==s)return null;i=s,o++}return i};var V,U=/<\/?[\w\s="/.':;#-\/]+>/,W=/(?:@(?:\.[a-z]+)?:(?:[\w\-_|./]+|\([\w\-_|./]+\)))/g,H=/^@(?:\.([a-z]+))?:/,Y=/[()]/g,X={upper:function(t){return t.toLocaleUpperCase()},lower:function(t){return t.toLocaleLowerCase()},capitalize:function(t){return""+t.charAt(0).toLocaleUpperCase()+t.substr(1)}},q=new P,Z=function(t){var e=this;void 0===t&&(t={}),!S&&"undefined"!=typeof window&&window.Vue&&I(window.Vue);var n=t.locale||"en-US",r=!1!==t.fallbackLocale&&(t.fallbackLocale||"en-US"),i=t.messages||{},o=t.dateTimeFormats||t.datetimeFormats||{},a=t.numberFormats||{};this._vm=null,this._formatter=t.formatter||q,this._modifiers=t.modifiers||{},this._missing=t.missing||null,this._root=t.root||null,this._sync=void 0===t.sync||!!t.sync,this._fallbackRoot=void 0===t.fallbackRoot||!!t.fallbackRoot,this._formatFallbackMessages=void 0!==t.formatFallbackMessages&&!!t.formatFallbackMessages,this._silentTranslationWarn=void 0!==t.silentTranslationWarn&&t.silentTranslationWarn,this._silentFallbackWarn=void 0!==t.silentFallbackWarn&&!!t.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new G,this._dataListeners=new Set,this._componentInstanceCreatedListener=t.componentInstanceCreatedListener||null,this._preserveDirectiveContent=void 0!==t.preserveDirectiveContent&&!!t.preserveDirectiveContent,this.pluralizationRules=t.pluralizationRules||{},this._warnHtmlInMessage=t.warnHtmlInMessage||"off",this._postTranslation=t.postTranslation||null,this._escapeParameterHtml=t.escapeParameterHtml||!1,"__VUE_I18N_BRIDGE__"in t&&(this.__VUE_I18N_BRIDGE__=t.__VUE_I18N_BRIDGE__),this.getChoiceIndex=function(t,n){var r,i,o=Object.getPrototypeOf(e);return o&&o.getChoiceIndex?o.getChoiceIndex.call(e,t,n):e.locale in e.pluralizationRules?e.pluralizationRules[e.locale].apply(e,[t,n]):(r=t,i=n,r=Math.abs(r),2===i?r?r>1?1:0:1:r?Math.min(r,2):0)},this._exist=function(t,n){return!(!t||!n||f(e._path.getPathValue(t,n))&&!t[n])},"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||Object.keys(i).forEach((function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,i[t])})),this._initVM({locale:n,fallbackLocale:r,messages:i,dateTimeFormats:o,numberFormats:a})},K={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0},sync:{configurable:!0}};Z.prototype._checkLocaleMessage=function(t,e,n){var r=function(t,e,n,a){if(l(n))Object.keys(n).forEach((function(i){var o=n[i];l(o)?(a.push(i),a.push("."),r(t,e,o,a),a.pop(),a.pop()):(a.push(i),r(t,e,o,a),a.pop())}));else if(o(n))n.forEach((function(n,i){l(n)?(a.push("["+i+"]"),a.push("."),r(t,e,n,a),a.pop(),a.pop()):(a.push("["+i+"]"),r(t,e,n,a),a.pop())}));else if(s(n)&&U.test(n)){var u="Detected HTML in message '"+n+"' of keypath '"+a.join("")+"' at '"+e+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";"warn"===t?i(u):"error"===t&&function(t,e){"undefined"!=typeof console&&console.error("[vue-i18n] "+t)}(u)}};r(e,t,n,[])},Z.prototype._initVM=function(t){var e=S.config.silent;S.config.silent=!0,this._vm=new S({data:t,__VUE18N__INSTANCE__:!0}),S.config.silent=e},Z.prototype.destroyVM=function(){this._vm.$destroy()},Z.prototype.subscribeDataChanging=function(t){this._dataListeners.add(t)},Z.prototype.unsubscribeDataChanging=function(t){var e,n;e=this._dataListeners,n=t,e.delete(n)},Z.prototype.watchI18nData=function(){var t=this;return this._vm.$watch("$data",(function(){for(var e,n,r=(e=t._dataListeners,n=[],e.forEach((function(t){return n.push(t)})),n),i=r.length;i--;)S.nextTick((function(){r[i]&&r[i].$forceUpdate()}))}),{deep:!0})},Z.prototype.watchLocale=function(t){if(t){if(!this.__VUE_I18N_BRIDGE__)return null;var e=this,n=this._vm;return this.vm.$watch("locale",(function(r){n.$set(n,"locale",r),e.__VUE_I18N_BRIDGE__&&t&&(t.locale.value=r),n.$forceUpdate()}),{immediate:!0})}if(!this._sync||!this._root)return null;var r=this._vm;return this._root.$i18n.vm.$watch("locale",(function(t){r.$set(r,"locale",t),r.$forceUpdate()}),{immediate:!0})},Z.prototype.onComponentInstanceCreated=function(t){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(t,this)},K.vm.get=function(){return this._vm},K.messages.get=function(){return p(this._getMessages())},K.dateTimeFormats.get=function(){return p(this._getDateTimeFormats())},K.numberFormats.get=function(){return p(this._getNumberFormats())},K.availableLocales.get=function(){return Object.keys(this.messages).sort()},K.locale.get=function(){return this._vm.locale},K.locale.set=function(t){this._vm.$set(this._vm,"locale",t)},K.fallbackLocale.get=function(){return this._vm.fallbackLocale},K.fallbackLocale.set=function(t){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",t)},K.formatFallbackMessages.get=function(){return this._formatFallbackMessages},K.formatFallbackMessages.set=function(t){this._formatFallbackMessages=t},K.missing.get=function(){return this._missing},K.missing.set=function(t){this._missing=t},K.formatter.get=function(){return this._formatter},K.formatter.set=function(t){this._formatter=t},K.silentTranslationWarn.get=function(){return this._silentTranslationWarn},K.silentTranslationWarn.set=function(t){this._silentTranslationWarn=t},K.silentFallbackWarn.get=function(){return this._silentFallbackWarn},K.silentFallbackWarn.set=function(t){this._silentFallbackWarn=t},K.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},K.preserveDirectiveContent.set=function(t){this._preserveDirectiveContent=t},K.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},K.warnHtmlInMessage.set=function(t){var e=this,n=this._warnHtmlInMessage;if(this._warnHtmlInMessage=t,n!==t&&("warn"===t||"error"===t)){var r=this._getMessages();Object.keys(r).forEach((function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,r[t])}))}},K.postTranslation.get=function(){return this._postTranslation},K.postTranslation.set=function(t){this._postTranslation=t},K.sync.get=function(){return this._sync},K.sync.set=function(t){this._sync=t},Z.prototype._getMessages=function(){return this._vm.messages},Z.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},Z.prototype._getNumberFormats=function(){return this._vm.numberFormats},Z.prototype._warnDefault=function(t,e,n,r,i,o){if(!f(n))return n;if(this._missing){var a=this._missing.apply(null,[t,e,r,i]);if(s(a))return a}if(this._formatFallbackMessages){var u=h.apply(void 0,i);return this._render(e,o,u.params,e)}return e},Z.prototype._isFallbackRoot=function(t){return!t&&!f(this._root)&&this._fallbackRoot},Z.prototype._isSilentFallbackWarn=function(t){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(t):this._silentFallbackWarn},Z.prototype._isSilentFallback=function(t,e){return this._isSilentFallbackWarn(e)&&(this._isFallbackRoot()||t!==this.fallbackLocale)},Z.prototype._isSilentTranslationWarn=function(t){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(t):this._silentTranslationWarn},Z.prototype._interpolate=function(t,e,n,r,i,a,u){if(!e)return null;var c,h=this._path.getPathValue(e,n);if(o(h)||l(h))return h;if(f(h)){if(!l(e))return null;if(!s(c=e[n])&&!d(c))return null}else{if(!s(h)&&!d(h))return null;c=h}return s(c)&&(c.indexOf("@:")>=0||c.indexOf("@.")>=0)&&(c=this._link(t,e,c,r,"raw",a,u)),this._render(c,i,a,n)},Z.prototype._link=function(t,e,n,r,i,a,s){var u=n,c=u.match(W);for(var l in c)if(c.hasOwnProperty(l)){var f=c[l],d=f.match(H),h=d[0],p=d[1],v=f.replace(h,"").replace(Y,"");if(g(s,v))return u;s.push(v);var m=this._interpolate(t,e,v,r,"raw"===i?"string":i,"raw"===i?void 0:a,s);if(this._isFallbackRoot(m)){if(!this._root)throw Error("unexpected error");var y=this._root.$i18n;m=y._translate(y._getMessages(),y.locale,y.fallbackLocale,v,r,i,a)}m=this._warnDefault(t,v,m,r,o(a)?a:[a],i),this._modifiers.hasOwnProperty(p)?m=this._modifiers[p](m):X.hasOwnProperty(p)&&(m=X[p](m)),s.pop(),u=m?u.replace(f,m):u}return u},Z.prototype._createMessageContext=function(t,e,n,r){var i=this,s=o(t)?t:[],u=a(t)?t:{},c=this._getMessages(),l=this.locale;return{list:function(t){return s[t]},named:function(t){return u[t]},values:t,formatter:e,path:n,messages:c,locale:l,linked:function(t){return i._interpolate(l,c[l]||{},t,null,r,void 0,[t])}}},Z.prototype._render=function(t,e,n,r){if(d(t))return t(this._createMessageContext(n,this._formatter||q,r,e));var i=this._formatter.interpolate(t,n,r);return i||(i=q.interpolate(t,n,r)),"string"!==e||s(i)?i:i.join("")},Z.prototype._appendItemToChain=function(t,e,n){var r=!1;return g(t,e)||(r=!0,e&&(r="!"!==e[e.length-1],e=e.replace(/!/g,""),t.push(e),n&&n[e]&&(r=n[e]))),r},Z.prototype._appendLocaleToChain=function(t,e,n){var r,i=e.split("-");do{var o=i.join("-");r=this._appendItemToChain(t,o,n),i.splice(-1,1)}while(i.length&&!0===r);return r},Z.prototype._appendBlockToChain=function(t,e,n){for(var r=!0,i=0;i<e.length&&"boolean"==typeof r;i++){var o=e[i];s(o)&&(r=this._appendLocaleToChain(t,o,n))}return r},Z.prototype._getLocaleChain=function(t,e){if(""===t)return[];this._localeChainCache||(this._localeChainCache={});var n=this._localeChainCache[t];if(!n){e||(e=this.fallbackLocale),n=[];for(var r,i=[t];o(i);)i=this._appendBlockToChain(n,i,e);(i=s(r=o(e)?e:a(e)?e.default?e.default:null:e)?[r]:r)&&this._appendBlockToChain(n,i,null),this._localeChainCache[t]=n}return n},Z.prototype._translate=function(t,e,n,r,i,o,a){for(var s,u=this._getLocaleChain(e,n),c=0;c<u.length;c++){var l=u[c];if(!f(s=this._interpolate(l,t[l],r,i,o,a,[r])))return s}return null},Z.prototype._t=function(t,e,n,r){for(var i,o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];if(!t)return"";var s,u=h.apply(void 0,o);this._escapeParameterHtml&&(u.params=(null!=(s=u.params)&&Object.keys(s).forEach((function(t){"string"==typeof s[t]&&(s[t]=s[t].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"))})),s));var c=u.locale||e,l=this._translate(n,c,this.fallbackLocale,t,r,"string",u.params);if(this._isFallbackRoot(l)){if(!this._root)throw Error("unexpected error");return(i=this._root).$t.apply(i,[t].concat(o))}return l=this._warnDefault(c,t,l,r,o,"string"),this._postTranslation&&null!=l&&(l=this._postTranslation(l,t)),l},Z.prototype.t=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this)._t.apply(e,[t,this.locale,this._getMessages(),null].concat(n))},Z.prototype._i=function(t,e,n,r,i){var o=this._translate(n,e,this.fallbackLocale,t,r,"raw",i);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(t,e,i)}return this._warnDefault(e,t,o,r,[i],"raw")},Z.prototype.i=function(t,e,n){return t?(s(e)||(e=this.locale),this._i(t,e,this._getMessages(),null,n)):""},Z.prototype._tc=function(t,e,n,r,i){for(var o,a=[],s=arguments.length-5;s-- >0;)a[s]=arguments[s+5];if(!t)return"";void 0===i&&(i=1);var u={count:i,n:i},c=h.apply(void 0,a);return c.params=Object.assign(u,c.params),a=null===c.locale?[c.params]:[c.locale,c.params],this.fetchChoice((o=this)._t.apply(o,[t,e,n,r].concat(a)),i)},Z.prototype.fetchChoice=function(t,e){if(!t||!s(t))return null;var n=t.split("|");return n[e=this.getChoiceIndex(e,n.length)]?n[e].trim():t},Z.prototype.tc=function(t,e){for(var n,r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];return(n=this)._tc.apply(n,[t,this.locale,this._getMessages(),null,e].concat(r))},Z.prototype._te=function(t,e,n){for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var o=h.apply(void 0,r).locale||e;return this._exist(n[o],t)},Z.prototype.te=function(t,e){return this._te(t,this.locale,this._getMessages(),e)},Z.prototype.getLocaleMessage=function(t){return p(this._vm.messages[t]||{})},Z.prototype.setLocaleMessage=function(t,e){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,e)},Z.prototype.mergeLocaleMessage=function(t,e){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,y(void 0!==this._vm.messages[t]&&Object.keys(this._vm.messages[t]).length?Object.assign({},this._vm.messages[t]):{},e))},Z.prototype.getDateTimeFormat=function(t){return p(this._vm.dateTimeFormats[t]||{})},Z.prototype.setDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,e),this._clearDateTimeFormat(t,e)},Z.prototype.mergeDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,y(this._vm.dateTimeFormats[t]||{},e)),this._clearDateTimeFormat(t,e)},Z.prototype._clearDateTimeFormat=function(t,e){for(var n in e){var r=t+"__"+n;this._dateTimeFormatters.hasOwnProperty(r)&&delete this._dateTimeFormatters[r]}},Z.prototype._localizeDateTime=function(t,e,n,r,i){for(var o=e,a=r[o],s=this._getLocaleChain(e,n),u=0;u<s.length;u++){var c=s[u];if(o=c,!f(a=r[c])&&!f(a[i]))break}if(f(a)||f(a[i]))return null;var l=a[i],d=o+"__"+i,h=this._dateTimeFormatters[d];return h||(h=this._dateTimeFormatters[d]=new Intl.DateTimeFormat(o,l)),h.format(t)},Z.prototype._d=function(t,e,n){if(!n)return new Intl.DateTimeFormat(e).format(t);var r=this._localizeDateTime(t,e,this.fallbackLocale,this._getDateTimeFormats(),n);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(t,n,e)}return r||""},Z.prototype.d=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this.locale,i=null;return 1===e.length?s(e[0])?i=e[0]:a(e[0])&&(e[0].locale&&(r=e[0].locale),e[0].key&&(i=e[0].key)):2===e.length&&(s(e[0])&&(i=e[0]),s(e[1])&&(r=e[1])),this._d(t,r,i)},Z.prototype.getNumberFormat=function(t){return p(this._vm.numberFormats[t]||{})},Z.prototype.setNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,e),this._clearNumberFormat(t,e)},Z.prototype.mergeNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,y(this._vm.numberFormats[t]||{},e)),this._clearNumberFormat(t,e)},Z.prototype._clearNumberFormat=function(t,e){for(var n in e){var r=t+"__"+n;this._numberFormatters.hasOwnProperty(r)&&delete this._numberFormatters[r]}},Z.prototype._getNumberFormatter=function(t,e,n,r,i,o){for(var a=e,s=r[a],u=this._getLocaleChain(e,n),c=0;c<u.length;c++){var l=u[c];if(a=l,!f(s=r[l])&&!f(s[i]))break}if(f(s)||f(s[i]))return null;var d,h=s[i];if(o)d=new Intl.NumberFormat(a,Object.assign({},h,o));else{var p=a+"__"+i;(d=this._numberFormatters[p])||(d=this._numberFormatters[p]=new Intl.NumberFormat(a,h))}return d},Z.prototype._n=function(t,e,n,r){if(!Z.availabilities.numberFormat)return"";if(!n)return(r?new Intl.NumberFormat(e,r):new Intl.NumberFormat(e)).format(t);var i=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),n,r),o=i&&i.format(t);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(t,Object.assign({},{key:n,locale:e},r))}return o||""},Z.prototype.n=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=this.locale,o=null,u=null;return 1===e.length?s(e[0])?o=e[0]:a(e[0])&&(e[0].locale&&(i=e[0].locale),e[0].key&&(o=e[0].key),u=Object.keys(e[0]).reduce((function(t,n){var i;return g(r,n)?Object.assign({},t,((i={})[n]=e[0][n],i)):t}),null)):2===e.length&&(s(e[0])&&(o=e[0]),s(e[1])&&(i=e[1])),this._n(t,i,o,u)},Z.prototype._ntp=function(t,e,n,r){if(!Z.availabilities.numberFormat)return[];if(!n)return(r?new Intl.NumberFormat(e,r):new Intl.NumberFormat(e)).formatToParts(t);var i=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),n,r),o=i&&i.formatToParts(t);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(t,e,n,r)}return o||[]},Object.defineProperties(Z.prototype,K),Object.defineProperty(Z,"availabilities",{get:function(){if(!V){var t="undefined"!=typeof Intl;V={dateTimeFormat:t&&void 0!==Intl.DateTimeFormat,numberFormat:t&&void 0!==Intl.NumberFormat}}return V}}),Z.install=I,Z.version="8.26.8",e.default=Z},538:function(t,e,n){"use strict";n.r(e),n.d(e,{EffectScope:function(){return Bn},computed:function(){return fe},customRef:function(){return ne},default:function(){return ui},defineAsyncComponent:function(){return ur},defineComponent:function(){return Sr},del:function(){return Rt},effectScope:function(){return Fn},getCurrentInstance:function(){return dt},getCurrentScope:function(){return zn},h:function(){return Wn},inject:function(){return Un},isProxy:function(){return Ut},isReactive:function(){return $t},isReadonly:function(){return Vt},isRef:function(){return Xt},isShallow:function(){return Gt},markRaw:function(){return Ht},mergeDefaults:function(){return Qe},nextTick:function(){return or},onActivated:function(){return vr},onBeforeMount:function(){return lr},onBeforeUnmount:function(){return pr},onBeforeUpdate:function(){return dr},onDeactivated:function(){return mr},onErrorCaptured:function(){return _r},onMounted:function(){return fr},onRenderTracked:function(){return br},onRenderTriggered:function(){return xr},onScopeDispose:function(){return $n},onServerPrefetch:function(){return yr},onUnmounted:function(){return gr},onUpdated:function(){return hr},provide:function(){return Gn},proxyRefs:function(){return te},reactive:function(){return Bt},readonly:function(){return se},ref:function(){return qt},set:function(){return Lt},shallowReactive:function(){return Ft},shallowReadonly:function(){return le},shallowRef:function(){return Zt},toRaw:function(){return Wt},toRef:function(){return ie},toRefs:function(){return re},triggerRef:function(){return Jt},unref:function(){return Qt},useAttrs:function(){return Ze},useCssModule:function(){return ar},useCssVars:function(){return sr},useListeners:function(){return Ke},useSlots:function(){return qe},version:function(){return Er},watch:function(){return Rn},watchEffect:function(){return Nn},watchPostEffect:function(){return In},watchSyncEffect:function(){return Pn}});var r=Object.freeze({}),i=Array.isArray;function o(t){return null==t}function a(t){return null!=t}function s(t){return!0===t}function u(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function c(t){return"function"==typeof t}function l(t){return null!==t&&"object"==typeof t}var f=Object.prototype.toString;function d(t){return"[object Object]"===f.call(t)}function h(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return a(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function g(t){return null==t?"":Array.isArray(t)||d(t)&&t.toString===f?JSON.stringify(t,null,2):String(t)}function v(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}var y=m("slot,component",!0),b=m("key,ref,slot,slot-scope,is");function x(t,e){var n=t.length;if(n){if(e===t[n-1])return void(t.length=n-1);var r=t.indexOf(e);if(r>-1)return t.splice(r,1)}}var w=Object.prototype.hasOwnProperty;function _(t,e){return w.call(t,e)}function E(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var S=/-(\w)/g,C=E((function(t){return t.replace(S,(function(t,e){return e?e.toUpperCase():""}))})),k=E((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),M=/\B([A-Z])/g,O=E((function(t){return t.replace(M,"-$1").toLowerCase()})),T=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function A(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function N(t,e){for(var n in e)t[n]=e[n];return t}function I(t){for(var e={},n=0;n<t.length;n++)t[n]&&N(e,t[n]);return e}function P(t,e,n){}var D=function(t,e,n){return!1},L=function(t){return t};function R(t,e){if(t===e)return!0;var n=l(t),r=l(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every((function(t,n){return R(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every((function(n){return R(t[n],e[n])}))}catch(t){return!1}}function j(t,e){for(var n=0;n<t.length;n++)if(R(t[n],e))return n;return-1}function B(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function F(t,e){return t===e?0===t&&1/t!=1/e:t==t||e==e}var z="data-server-rendered",$=["component","directive","filter"],G=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],V={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:P,parsePlatformTagName:L,mustUseProp:D,async:!0,_lifecycleHooks:G},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function W(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function H(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var Y=new RegExp("[^".concat(U.source,".$_\\d]")),X="__proto__"in{},q="undefined"!=typeof window,Z=q&&window.navigator.userAgent.toLowerCase(),K=Z&&/msie|trident/.test(Z),J=Z&&Z.indexOf("msie 9.0")>0,Q=Z&&Z.indexOf("edge/")>0;Z&&Z.indexOf("android");var tt=Z&&/iphone|ipad|ipod|ios/.test(Z);Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z);var et,nt=Z&&Z.match(/firefox\/(\d+)/),rt={}.watch,it=!1;if(q)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){it=!0}}),window.addEventListener("test-passive",null,ot)}catch(t){}var at=function(){return void 0===et&&(et=!q&&void 0!==n.g&&n.g.process&&"server"===n.g.process.env.VUE_ENV),et},st=q&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ut(t){return"function"==typeof t&&/native code/.test(t.toString())}var ct,lt="undefined"!=typeof Symbol&&ut(Symbol)&&"undefined"!=typeof Reflect&&ut(Reflect.ownKeys);ct="undefined"!=typeof Set&&ut(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ft=null;function dt(){return ft&&{proxy:ft}}function ht(t){void 0===t&&(t=null),t||ft&&ft._scope.off(),ft=t,t&&t._scope.on()}var pt=function(){function t(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(t.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),t}(),gt=function(t){void 0===t&&(t="");var e=new pt;return e.text=t,e.isComment=!0,e};function vt(t){return new pt(void 0,void 0,void 0,String(t))}function mt(t){var e=new pt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var yt=0,bt=[],xt=function(){for(var t=0;t<bt.length;t++){var e=bt[t];e.subs=e.subs.filter((function(t){return t})),e._pending=!1}bt.length=0},wt=function(){function t(){this._pending=!1,this.id=yt++,this.subs=[]}return t.prototype.addSub=function(t){this.subs.push(t)},t.prototype.removeSub=function(t){this.subs[this.subs.indexOf(t)]=null,this._pending||(this._pending=!0,bt.push(this))},t.prototype.depend=function(e){t.target&&t.target.addDep(this)},t.prototype.notify=function(t){for(var e=this.subs.filter((function(t){return t})),n=0,r=e.length;n<r;n++)e[n].update()},t}();wt.target=null;var _t=[];function Et(t){_t.push(t),wt.target=t}function St(){_t.pop(),wt.target=_t[_t.length-1]}var Ct=Array.prototype,kt=Object.create(Ct);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=Ct[t];H(kt,t,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o}))}));var Mt=Object.getOwnPropertyNames(kt),Ot={},Tt=!0;function At(t){Tt=t}var Nt={notify:P,depend:P,addSub:P,removeSub:P},It=function(){function t(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.value=t,this.shallow=e,this.mock=n,this.dep=n?Nt:new wt,this.vmCount=0,H(t,"__ob__",this),i(t)){if(!n)if(X)t.__proto__=kt;else for(var r=0,o=Mt.length;r<o;r++)H(t,s=Mt[r],kt[s]);e||this.observeArray(t)}else{var a=Object.keys(t);for(r=0;r<a.length;r++){var s;Dt(t,s=a[r],Ot,void 0,e,n)}}}return t.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Pt(t[e],!1,this.mock)},t}();function Pt(t,e,n){return t&&_(t,"__ob__")&&t.__ob__ instanceof It?t.__ob__:!Tt||!n&&at()||!i(t)&&!d(t)||!Object.isExtensible(t)||t.__v_skip||Xt(t)||t instanceof pt?void 0:new It(t,e,n)}function Dt(t,e,n,r,o,a){var s=new wt,u=Object.getOwnPropertyDescriptor(t,e);if(!u||!1!==u.configurable){var c=u&&u.get,l=u&&u.set;c&&!l||n!==Ot&&2!==arguments.length||(n=t[e]);var f=!o&&Pt(n,!1,a);return Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=c?c.call(t):n;return wt.target&&(s.depend(),f&&(f.dep.depend(),i(e)&&jt(e))),Xt(e)&&!o?e.value:e},set:function(e){var r=c?c.call(t):n;if(F(r,e)){if(l)l.call(t,e);else{if(c)return;if(!o&&Xt(r)&&!Xt(e))return void(r.value=e);n=e}f=!o&&Pt(e,!1,a),s.notify()}}}),s}}function Lt(t,e,n){if(!Vt(t)){var r=t.__ob__;return i(t)&&h(e)?(t.length=Math.max(t.length,e),t.splice(e,1,n),r&&!r.shallow&&r.mock&&Pt(n,!1,!0),n):e in t&&!(e in Object.prototype)?(t[e]=n,n):t._isVue||r&&r.vmCount?n:r?(Dt(r.value,e,n,void 0,r.shallow,r.mock),r.dep.notify(),n):(t[e]=n,n)}}function Rt(t,e){if(i(t)&&h(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||Vt(t)||_(t,e)&&(delete t[e],n&&n.dep.notify())}}function jt(t){for(var e=void 0,n=0,r=t.length;n<r;n++)(e=t[n])&&e.__ob__&&e.__ob__.dep.depend(),i(e)&&jt(e)}function Bt(t){return zt(t,!1),t}function Ft(t){return zt(t,!0),H(t,"__v_isShallow",!0),t}function zt(t,e){Vt(t)||Pt(t,e,at())}function $t(t){return Vt(t)?$t(t.__v_raw):!(!t||!t.__ob__)}function Gt(t){return!(!t||!t.__v_isShallow)}function Vt(t){return!(!t||!t.__v_isReadonly)}function Ut(t){return $t(t)||Vt(t)}function Wt(t){var e=t&&t.__v_raw;return e?Wt(e):t}function Ht(t){return Object.isExtensible(t)&&H(t,"__v_skip",!0),t}var Yt="__v_isRef";function Xt(t){return!(!t||!0!==t.__v_isRef)}function qt(t){return Kt(t,!1)}function Zt(t){return Kt(t,!0)}function Kt(t,e){if(Xt(t))return t;var n={};return H(n,Yt,!0),H(n,"__v_isShallow",e),H(n,"dep",Dt(n,"value",t,null,e,at())),n}function Jt(t){t.dep&&t.dep.notify()}function Qt(t){return Xt(t)?t.value:t}function te(t){if($t(t))return t;for(var e={},n=Object.keys(t),r=0;r<n.length;r++)ee(e,t,n[r]);return e}function ee(t,e,n){Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){var t=e[n];if(Xt(t))return t.value;var r=t&&t.__ob__;return r&&r.dep.depend(),t},set:function(t){var r=e[n];Xt(r)&&!Xt(t)?r.value=t:e[n]=t}})}function ne(t){var e=new wt,n=t((function(){e.depend()}),(function(){e.notify()})),r=n.get,i=n.set,o={get value(){return r()},set value(t){i(t)}};return H(o,Yt,!0),o}function re(t){var e=i(t)?new Array(t.length):{};for(var n in t)e[n]=ie(t,n);return e}function ie(t,e,n){var r=t[e];if(Xt(r))return r;var i={get value(){var r=t[e];return void 0===r?n:r},set value(n){t[e]=n}};return H(i,Yt,!0),i}var oe="__v_rawToReadonly",ae="__v_rawToShallowReadonly";function se(t){return ue(t,!1)}function ue(t,e){if(!d(t))return t;if(Vt(t))return t;var n=e?ae:oe,r=t[n];if(r)return r;var i=Object.create(Object.getPrototypeOf(t));H(t,n,i),H(i,"__v_isReadonly",!0),H(i,"__v_raw",t),Xt(t)&&H(i,Yt,!0),(e||Gt(t))&&H(i,"__v_isShallow",!0);for(var o=Object.keys(t),a=0;a<o.length;a++)ce(i,t,o[a],e);return i}function ce(t,e,n,r){Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){var t=e[n];return r||!d(t)?t:se(t)},set:function(){}})}function le(t){return ue(t,!0)}function fe(t,e){var n,r,i=c(t);i?(n=t,r=P):(n=t.get,r=t.set);var o=at()?null:new Tr(ft,n,P,{lazy:!0}),a={effect:o,get value(){return o?(o.dirty&&o.evaluate(),wt.target&&o.depend(),o.value):n()},set value(t){r(t)}};return H(a,Yt,!0),H(a,"__v_isReadonly",i),a}var de=E((function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),r="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=r?t.slice(1):t,once:n,capture:r,passive:e}}));function he(t,e){function n(){var t=n.fns;if(!i(t))return Yn(t,null,arguments,e,"v-on handler");for(var r=t.slice(),o=0;o<r.length;o++)Yn(r[o],null,arguments,e,"v-on handler")}return n.fns=t,n}function pe(t,e,n,r,i,a){var u,c,l,f;for(u in t)c=t[u],l=e[u],f=de(u),o(c)||(o(l)?(o(c.fns)&&(c=t[u]=he(c,a)),s(f.once)&&(c=t[u]=i(f.name,c,f.capture)),n(f.name,c,f.capture,f.passive,f.params)):c!==l&&(l.fns=c,t[u]=l));for(u in e)o(t[u])&&r((f=de(u)).name,e[u],f.capture)}function ge(t,e,n){var r;t instanceof pt&&(t=t.data.hook||(t.data.hook={}));var i=t[e];function u(){n.apply(this,arguments),x(r.fns,u)}o(i)?r=he([u]):a(i.fns)&&s(i.merged)?(r=i).fns.push(u):r=he([i,u]),r.merged=!0,t[e]=r}function ve(t,e,n,r,i){if(a(e)){if(_(e,n))return t[n]=e[n],i||delete e[n],!0;if(_(e,r))return t[n]=e[r],i||delete e[r],!0}return!1}function me(t){return u(t)?[vt(t)]:i(t)?be(t):void 0}function ye(t){return a(t)&&a(t.text)&&!1===t.isComment}function be(t,e){var n,r,c,l,f=[];for(n=0;n<t.length;n++)o(r=t[n])||"boolean"==typeof r||(l=f[c=f.length-1],i(r)?r.length>0&&(ye((r=be(r,"".concat(e||"","_").concat(n)))[0])&&ye(l)&&(f[c]=vt(l.text+r[0].text),r.shift()),f.push.apply(f,r)):u(r)?ye(l)?f[c]=vt(l.text+r):""!==r&&f.push(vt(r)):ye(r)&&ye(l)?f[c]=vt(l.text+r.text):(s(t._isVList)&&a(r.tag)&&o(r.key)&&a(e)&&(r.key="__vlist".concat(e,"_").concat(n,"__")),f.push(r)));return f}var xe=1,we=2;function _e(t,e,n,r,o,f){return(i(n)||u(n))&&(o=r,r=n,n=void 0),s(f)&&(o=we),function(t,e,n,r,o){if(a(n)&&a(n.__ob__))return gt();if(a(n)&&a(n.is)&&(e=n.is),!e)return gt();var s,u;if(i(r)&&c(r[0])&&((n=n||{}).scopedSlots={default:r[0]},r.length=0),o===we?r=me(r):o===xe&&(r=function(t){for(var e=0;e<t.length;e++)if(i(t[e]))return Array.prototype.concat.apply([],t);return t}(r)),"string"==typeof e){var f=void 0;u=t.$vnode&&t.$vnode.ns||V.getTagNamespace(e),s=V.isReservedTag(e)?new pt(V.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!a(f=ni(t.$options,"components",e))?new pt(e,n,r,void 0,void 0,t):Hr(f,n,t,r,e)}else s=Hr(e,n,t,r);return i(s)?s:a(s)?(a(u)&&Ee(s,u),a(n)&&function(t){l(t.style)&&kr(t.style),l(t.class)&&kr(t.class)}(n),s):gt()}(t,e,n,r,o)}function Ee(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),a(t.children))for(var r=0,i=t.children.length;r<i;r++){var u=t.children[r];a(u.tag)&&(o(u.ns)||s(n)&&"svg"!==u.tag)&&Ee(u,e,n)}}function Se(t,e){var n,r,o,s,u=null;if(i(t)||"string"==typeof t)for(u=new Array(t.length),n=0,r=t.length;n<r;n++)u[n]=e(t[n],n);else if("number"==typeof t)for(u=new Array(t),n=0;n<t;n++)u[n]=e(n+1,n);else if(l(t))if(lt&&t[Symbol.iterator]){u=[];for(var c=t[Symbol.iterator](),f=c.next();!f.done;)u.push(e(f.value,u.length)),f=c.next()}else for(o=Object.keys(t),u=new Array(o.length),n=0,r=o.length;n<r;n++)s=o[n],u[n]=e(t[s],s,n);return a(u)||(u=[]),u._isVList=!0,u}function Ce(t,e,n,r){var i,o=this.$scopedSlots[t];o?(n=n||{},r&&(n=N(N({},r),n)),i=o(n)||(c(e)?e():e)):i=this.$slots[t]||(c(e)?e():e);var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function ke(t){return ni(this.$options,"filters",t)||L}function Me(t,e){return i(t)?-1===t.indexOf(e):t!==e}function Oe(t,e,n,r,i){var o=V.keyCodes[e]||n;return i&&r&&!V.keyCodes[e]?Me(i,r):o?Me(o,t):r?O(r)!==e:void 0===t}function Te(t,e,n,r,o){if(n&&l(n)){i(n)&&(n=I(n));var a=void 0,s=function(i){if("class"===i||"style"===i||b(i))a=t;else{var s=t.attrs&&t.attrs.type;a=r||V.mustUseProp(e,s,i)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=C(i),c=O(i);u in a||c in a||(a[i]=n[i],o&&((t.on||(t.on={}))["update:".concat(i)]=function(t){n[i]=t}))};for(var u in n)s(u)}return t}function Ae(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||Ie(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,this._c,this),"__static__".concat(t),!1),r}function Ne(t,e,n){return Ie(t,"__once__".concat(e).concat(n?"_".concat(n):""),!0),t}function Ie(t,e,n){if(i(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&Pe(t[r],"".concat(e,"_").concat(r),n);else Pe(t,e,n)}function Pe(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function De(t,e){if(e&&d(e)){var n=t.on=t.on?N({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}return t}function Le(t,e,n,r){e=e||{$stable:!n};for(var o=0;o<t.length;o++){var a=t[o];i(a)?Le(a,e,n):a&&(a.proxy&&(a.fn.proxy=!0),e[a.key]=a.fn)}return r&&(e.$key=r),e}function Re(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"==typeof r&&r&&(t[e[n]]=e[n+1])}return t}function je(t,e){return"string"==typeof t?e+t:t}function Be(t){t._o=Ne,t._n=v,t._s=g,t._l=Se,t._t=Ce,t._q=R,t._i=j,t._m=Ae,t._f=ke,t._k=Oe,t._b=Te,t._v=vt,t._e=gt,t._u=Le,t._g=De,t._d=Re,t._p=je}function Fe(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(ze)&&delete n[c];return n}function ze(t){return t.isComment&&!t.asyncFactory||" "===t.text}function $e(t){return t.isComment&&t.asyncFactory}function Ge(t,e,n,i){var o,a=Object.keys(n).length>0,s=e?!!e.$stable:!a,u=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&i&&i!==r&&u===i.$key&&!a&&!i.$hasNormal)return i;for(var c in o={},e)e[c]&&"$"!==c[0]&&(o[c]=Ve(t,n,c,e[c]))}else o={};for(var l in n)l in o||(o[l]=Ue(n,l));return e&&Object.isExtensible(e)&&(e._normalized=o),H(o,"$stable",s),H(o,"$key",u),H(o,"$hasNormal",a),o}function Ve(t,e,n,r){var o=function(){var e=ft;ht(t);var n=arguments.length?r.apply(null,arguments):r({}),o=(n=n&&"object"==typeof n&&!i(n)?[n]:me(n))&&n[0];return ht(e),n&&(!o||1===n.length&&o.isComment&&!$e(o))?void 0:n};return r.proxy&&Object.defineProperty(e,n,{get:o,enumerable:!0,configurable:!0}),o}function Ue(t,e){return function(){return t[e]}}function We(t){return{get attrs(){if(!t._attrsProxy){var e=t._attrsProxy={};H(e,"_v_attr_proxy",!0),He(e,t.$attrs,r,t,"$attrs")}return t._attrsProxy},get listeners(){return t._listenersProxy||He(t._listenersProxy={},t.$listeners,r,t,"$listeners"),t._listenersProxy},get slots(){return function(t){return t._slotsProxy||Xe(t._slotsProxy={},t.$scopedSlots),t._slotsProxy}(t)},emit:T(t.$emit,t),expose:function(e){e&&Object.keys(e).forEach((function(n){return ee(t,e,n)}))}}}function He(t,e,n,r,i){var o=!1;for(var a in e)a in t?e[a]!==n[a]&&(o=!0):(o=!0,Ye(t,a,r,i));for(var a in t)a in e||(o=!0,delete t[a]);return o}function Ye(t,e,n,r){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return n[r][e]}})}function Xe(t,e){for(var n in e)t[n]=e[n];for(var n in t)n in e||delete t[n]}function qe(){return Je().slots}function Ze(){return Je().attrs}function Ke(){return Je().listeners}function Je(){var t=ft;return t._setupContext||(t._setupContext=We(t))}function Qe(t,e){var n=i(t)?t.reduce((function(t,e){return t[e]={},t}),{}):t;for(var r in e){var o=n[r];o?i(o)||c(o)?n[r]={type:o,default:e[r]}:o.default=e[r]:null===o&&(n[r]={default:e[r]})}return n}var tn,en=null;function nn(t,e){return(t.__esModule||lt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),l(t)?e.extend(t):t}function rn(t){if(i(t))for(var e=0;e<t.length;e++){var n=t[e];if(a(n)&&(a(n.componentOptions)||$e(n)))return n}}function on(t,e){tn.$on(t,e)}function an(t,e){tn.$off(t,e)}function sn(t,e){var n=tn;return function r(){null!==e.apply(null,arguments)&&n.$off(t,r)}}function un(t,e,n){tn=t,pe(e,n||{},on,an,sn,t),tn=void 0}var cn=null;function ln(t){var e=cn;return cn=t,function(){cn=e}}function fn(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function dn(t,e){if(e){if(t._directInactive=!1,fn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)dn(t.$children[n]);pn(t,"activated")}}function hn(t,e){if(!(e&&(t._directInactive=!0,fn(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)hn(t.$children[n]);pn(t,"deactivated")}}function pn(t,e,n,r){void 0===r&&(r=!0),Et();var i=ft;r&&ht(t);var o=t.$options[e],a="".concat(e," hook");if(o)for(var s=0,u=o.length;s<u;s++)Yn(o[s],t,n||null,t,a);t._hasHookEvent&&t.$emit("hook:"+e),r&&ht(i),St()}var gn=[],vn=[],mn={},yn=!1,bn=!1,xn=0,wn=0,_n=Date.now;if(q&&!K){var En=window.performance;En&&"function"==typeof En.now&&_n()>document.createEvent("Event").timeStamp&&(_n=function(){return En.now()})}var Sn=function(t,e){if(t.post){if(!e.post)return 1}else if(e.post)return-1;return t.id-e.id};function Cn(){var t,e;for(wn=_n(),bn=!0,gn.sort(Sn),xn=0;xn<gn.length;xn++)(t=gn[xn]).before&&t.before(),e=t.id,mn[e]=null,t.run();var n=vn.slice(),r=gn.slice();xn=gn.length=vn.length=0,mn={},yn=bn=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,dn(t[e],!0)}(n),function(t){for(var e=t.length;e--;){var n=t[e],r=n.vm;r&&r._watcher===n&&r._isMounted&&!r._isDestroyed&&pn(r,"updated")}}(r),xt(),st&&V.devtools&&st.emit("flush")}function kn(t){var e=t.id;if(null==mn[e]&&(t!==wt.target||!t.noRecurse)){if(mn[e]=!0,bn){for(var n=gn.length-1;n>xn&&gn[n].id>t.id;)n--;gn.splice(n+1,0,t)}else gn.push(t);yn||(yn=!0,or(Cn))}}var Mn="watcher",On="".concat(Mn," callback"),Tn="".concat(Mn," getter"),An="".concat(Mn," cleanup");function Nn(t,e){return jn(t,null,e)}function In(t,e){return jn(t,null,{flush:"post"})}function Pn(t,e){return jn(t,null,{flush:"sync"})}var Dn,Ln={};function Rn(t,e,n){return jn(t,e,n)}function jn(t,e,n){var o=void 0===n?r:n,a=o.immediate,s=o.deep,u=o.flush,l=void 0===u?"pre":u;o.onTrack,o.onTrigger;var f,d,h=ft,p=function(t,e,n){return void 0===n&&(n=null),Yn(t,null,n,h,e)},g=!1,v=!1;if(Xt(t)?(f=function(){return t.value},g=Gt(t)):$t(t)?(f=function(){return t.__ob__.dep.depend(),t},s=!0):i(t)?(v=!0,g=t.some((function(t){return $t(t)||Gt(t)})),f=function(){return t.map((function(t){return Xt(t)?t.value:$t(t)?kr(t):c(t)?p(t,Tn):void 0}))}):f=c(t)?e?function(){return p(t,Tn)}:function(){if(!h||!h._isDestroyed)return d&&d(),p(t,Mn,[y])}:P,e&&s){var m=f;f=function(){return kr(m())}}var y=function(t){d=b.onStop=function(){p(t,An)}};if(at())return y=P,e?a&&p(e,On,[f(),v?[]:void 0,y]):f(),P;var b=new Tr(ft,f,P,{lazy:!0});b.noRecurse=!e;var x=v?[]:Ln;return b.run=function(){if(b.active)if(e){var t=b.get();(s||g||(v?t.some((function(t,e){return F(t,x[e])})):F(t,x)))&&(d&&d(),p(e,On,[t,x===Ln?void 0:x,y]),x=t)}else b.get()},"sync"===l?b.update=b.run:"post"===l?(b.post=!0,b.update=function(){return kn(b)}):b.update=function(){if(h&&h===ft&&!h._isMounted){var t=h._preWatchers||(h._preWatchers=[]);t.indexOf(b)<0&&t.push(b)}else kn(b)},e?a?b.run():x=b.get():"post"===l&&h?h.$once("hook:mounted",(function(){return b.get()})):b.get(),function(){b.teardown()}}var Bn=function(){function t(t){void 0===t&&(t=!1),this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Dn,!t&&Dn&&(this.index=(Dn.scopes||(Dn.scopes=[])).push(this)-1)}return t.prototype.run=function(t){if(this.active){var e=Dn;try{return Dn=this,t()}finally{Dn=e}}},t.prototype.on=function(){Dn=this},t.prototype.off=function(){Dn=this.parent},t.prototype.stop=function(t){if(this.active){var e=void 0,n=void 0;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].teardown();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}},t}();function Fn(t){return new Bn(t)}function zn(){return Dn}function $n(t){Dn&&Dn.cleanups.push(t)}function Gn(t,e){ft&&(Vn(ft)[t]=e)}function Vn(t){var e=t._provided,n=t.$parent&&t.$parent._provided;return n===e?t._provided=Object.create(n):e}function Un(t,e,n){void 0===n&&(n=!1);var r=ft;if(r){var i=r.$parent&&r.$parent._provided;if(i&&t in i)return i[t];if(arguments.length>1)return n&&c(e)?e.call(r):e}}function Wn(t,e,n){return _e(ft,t,e,n,2,!0)}function Hn(t,e,n){Et();try{if(e)for(var r=e;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,t,e,n))return}catch(t){Xn(t,r,"errorCaptured hook")}}Xn(t,e,n)}finally{St()}}function Yn(t,e,n,r,i){var o;try{(o=n?t.apply(e,n):t.call(e))&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(t){return Hn(t,r,i+" (Promise/async)")})),o._handled=!0)}catch(t){Hn(t,r,i)}return o}function Xn(t,e,n){if(V.errorHandler)try{return V.errorHandler.call(null,t,e,n)}catch(e){e!==t&&qn(e)}qn(t)}function qn(t,e,n){if(!q||"undefined"==typeof console)throw t;console.error(t)}var Zn,Kn=!1,Jn=[],Qn=!1;function tr(){Qn=!1;var t=Jn.slice(0);Jn.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&ut(Promise)){var er=Promise.resolve();Zn=function(){er.then(tr),tt&&setTimeout(P)},Kn=!0}else if(K||"undefined"==typeof MutationObserver||!ut(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Zn="undefined"!=typeof setImmediate&&ut(setImmediate)?function(){setImmediate(tr)}:function(){setTimeout(tr,0)};else{var nr=1,rr=new MutationObserver(tr),ir=document.createTextNode(String(nr));rr.observe(ir,{characterData:!0}),Zn=function(){nr=(nr+1)%2,ir.data=String(nr)},Kn=!0}function or(t,e){var n;if(Jn.push((function(){if(t)try{t.call(e)}catch(t){Hn(t,e,"nextTick")}else n&&n(e)})),Qn||(Qn=!0,Zn()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){n=t}))}function ar(t){return void 0===t&&(t="$style"),ft&&ft[t]||r}function sr(t){if(q){var e=ft;e&&In((function(){var n=e.$el,r=t(e,e._setupProxy);if(n&&1===n.nodeType){var i=n.style;for(var o in r)i.setProperty("--".concat(o),r[o])}}))}}function ur(t){c(t)&&(t={loader:t});var e=t.loader,n=t.loadingComponent,r=t.errorComponent,i=t.delay,o=void 0===i?200:i,a=t.timeout,s=(t.suspensible,t.onError),u=null,l=0,f=function(){var t;return u||(t=u=e().catch((function(t){if(t=t instanceof Error?t:new Error(String(t)),s)return new Promise((function(e,n){s(t,(function(){return e((l++,u=null,f()))}),(function(){return n(t)}),l+1)}));throw t})).then((function(e){return t!==u&&u?u:(e&&(e.__esModule||"Module"===e[Symbol.toStringTag])&&(e=e.default),e)})))};return function(){return{component:f(),delay:o,timeout:a,error:r,loading:n}}}function cr(t){return function(e,n){if(void 0===n&&(n=ft),n)return function(t,e,n){var r=t.$options;r[e]=Jr(r[e],n)}(n,t,e)}}var lr=cr("beforeMount"),fr=cr("mounted"),dr=cr("beforeUpdate"),hr=cr("updated"),pr=cr("beforeDestroy"),gr=cr("destroyed"),vr=cr("activated"),mr=cr("deactivated"),yr=cr("serverPrefetch"),br=cr("renderTracked"),xr=cr("renderTriggered"),wr=cr("errorCaptured");function _r(t,e){void 0===e&&(e=ft),wr(t,e)}var Er="2.7.14";function Sr(t){return t}var Cr=new ct;function kr(t){return Mr(t,Cr),Cr.clear(),t}function Mr(t,e){var n,r,o=i(t);if(!(!o&&!l(t)||t.__v_skip||Object.isFrozen(t)||t instanceof pt)){if(t.__ob__){var a=t.__ob__.dep.id;if(e.has(a))return;e.add(a)}if(o)for(n=t.length;n--;)Mr(t[n],e);else if(Xt(t))Mr(t.value,e);else for(n=(r=Object.keys(t)).length;n--;)Mr(t[r[n]],e)}}var Or=0,Tr=function(){function t(t,e,n,r,i){var o;void 0===(o=Dn&&!Dn._vm?Dn:t?t._scope:void 0)&&(o=Dn),o&&o.active&&o.effects.push(this),(this.vm=t)&&i&&(t._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Or,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ct,this.newDepIds=new ct,this.expression="",c(e)?this.getter=e:(this.getter=function(t){if(!Y.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){var t;Et(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Hn(t,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&kr(t),St(),this.cleanupDeps()}return t},t.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},t.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():kn(this)},t.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||l(t)||this.deep){var e=this.value;if(this.value=t,this.user){var n='callback for watcher "'.concat(this.expression,'"');Yn(this.cb,this.vm,[t,e],this.vm,n)}else this.cb.call(this.vm,t,e)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&x(this.vm._scope.effects,this),this.active){for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}(),Ar={enumerable:!0,configurable:!0,get:P,set:P};function Nr(t,e,n){Ar.get=function(){return this[e][n]},Ar.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Ar)}var Ir={lazy:!0};function Pr(t,e,n){var r=!at();c(n)?(Ar.get=r?Dr(e):Lr(n),Ar.set=P):(Ar.get=n.get?r&&!1!==n.cache?Dr(e):Lr(n.get):P,Ar.set=n.set||P),Object.defineProperty(t,e,Ar)}function Dr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),wt.target&&e.depend(),e.value}}function Lr(t){return function(){return t.call(this,this)}}function Rr(t,e,n,r){return d(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function jr(t,e){if(t){for(var n=Object.create(null),r=lt?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=t[o].from;if(a in e._provided)n[o]=e._provided[a];else if("default"in t[o]){var s=t[o].default;n[o]=c(s)?s.call(e):s}}}return n}}var Br=0;function Fr(t){var e=t.options;if(t.super){var n=Fr(t.super);if(n!==t.superOptions){t.superOptions=n;var r=function(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}(t);r&&N(t.extendOptions,r),(e=t.options=ei(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function zr(t,e,n,o,a){var u,c=this,l=a.options;_(o,"_uid")?(u=Object.create(o))._original=o:(u=o,o=o._original);var f=s(l._compiled),d=!f;this.data=t,this.props=e,this.children=n,this.parent=o,this.listeners=t.on||r,this.injections=jr(l.inject,o),this.slots=function(){return c.$slots||Ge(o,t.scopedSlots,c.$slots=Fe(n,o)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Ge(o,t.scopedSlots,this.slots())}}),f&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=Ge(o,t.scopedSlots,this.$slots)),l._scopeId?this._c=function(t,e,n,r){var a=_e(u,t,e,n,r,d);return a&&!i(a)&&(a.fnScopeId=l._scopeId,a.fnContext=o),a}:this._c=function(t,e,n,r){return _e(u,t,e,n,r,d)}}function $r(t,e,n,r,i){var o=mt(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function Gr(t,e){for(var n in e)t[C(n)]=e[n]}function Vr(t){return t.name||t.__name||t._componentTag}Be(zr.prototype);var Ur={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;Ur.prepatch(n,n)}else(t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return a(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}(t,cn)).$mount(e?t.elm:void 0,e)},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,i,o){var a=i.data.scopedSlots,s=t.$scopedSlots,u=!!(a&&!a.$stable||s!==r&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key||!a&&t.$scopedSlots.$key),c=!!(o||t.$options._renderChildren||u),l=t.$vnode;t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o;var f=i.data.attrs||r;t._attrsProxy&&He(t._attrsProxy,f,l.data&&l.data.attrs||r,t,"$attrs")&&(c=!0),t.$attrs=f,n=n||r;var d=t.$options._parentListeners;if(t._listenersProxy&&He(t._listenersProxy,n,d||r,t,"$listeners"),t.$listeners=t.$options._parentListeners=n,un(t,n,d),e&&t.$options.props){At(!1);for(var h=t._props,p=t.$options._propKeys||[],g=0;g<p.length;g++){var v=p[g],m=t.$options.props;h[v]=ri(v,m,e,t)}At(!0),t.$options.propsData=e}c&&(t.$slots=Fe(o,i.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e,n=t.context,r=t.componentInstance;r._isMounted||(r._isMounted=!0,pn(r,"mounted")),t.data.keepAlive&&(n._isMounted?((e=r)._inactive=!1,vn.push(e)):dn(r,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?hn(e,!0):e.$destroy())}},Wr=Object.keys(Ur);function Hr(t,e,n,u,c){if(!o(t)){var f=n.$options._base;if(l(t)&&(t=f.extend(t)),"function"==typeof t){var d;if(o(t.cid)&&(t=function(t,e){if(s(t.error)&&a(t.errorComp))return t.errorComp;if(a(t.resolved))return t.resolved;var n=en;if(n&&a(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),s(t.loading)&&a(t.loadingComp))return t.loadingComp;if(n&&!a(t.owners)){var r=t.owners=[n],i=!0,u=null,c=null;n.$on("hook:destroyed",(function(){return x(r,n)}));var f=function(t){for(var e=0,n=r.length;e<n;e++)r[e].$forceUpdate();t&&(r.length=0,null!==u&&(clearTimeout(u),u=null),null!==c&&(clearTimeout(c),c=null))},d=B((function(n){t.resolved=nn(n,e),i?r.length=0:f(!0)})),h=B((function(e){a(t.errorComp)&&(t.error=!0,f(!0))})),g=t(d,h);return l(g)&&(p(g)?o(t.resolved)&&g.then(d,h):p(g.component)&&(g.component.then(d,h),a(g.error)&&(t.errorComp=nn(g.error,e)),a(g.loading)&&(t.loadingComp=nn(g.loading,e),0===g.delay?t.loading=!0:u=setTimeout((function(){u=null,o(t.resolved)&&o(t.error)&&(t.loading=!0,f(!1))}),g.delay||200)),a(g.timeout)&&(c=setTimeout((function(){c=null,o(t.resolved)&&h(null)}),g.timeout)))),i=!1,t.loading?t.loadingComp:t.resolved}}(d=t,f),void 0===t))return function(t,e,n,r,i){var o=gt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}(d,e,n,u,c);e=e||{},Fr(t),a(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),s=o[r],u=e.model.callback;a(s)?(i(s)?-1===s.indexOf(u):s!==u)&&(o[r]=[u].concat(s)):o[r]=u}(t.options,e);var h=function(t,e,n){var r=e.options.props;if(!o(r)){var i={},s=t.attrs,u=t.props;if(a(s)||a(u))for(var c in r){var l=O(c);ve(i,u,c,l,!0)||ve(i,s,c,l,!1)}return i}}(e,t);if(s(t.options.functional))return function(t,e,n,o,s){var u=t.options,c={},l=u.props;if(a(l))for(var f in l)c[f]=ri(f,l,e||r);else a(n.attrs)&&Gr(c,n.attrs),a(n.props)&&Gr(c,n.props);var d=new zr(n,c,s,o,t),h=u.render.call(null,d._c,d);if(h instanceof pt)return $r(h,n,d.parent,u);if(i(h)){for(var p=me(h)||[],g=new Array(p.length),v=0;v<p.length;v++)g[v]=$r(p[v],n,d.parent,u);return g}}(t,h,e,n,u);var g=e.on;if(e.on=e.nativeOn,s(t.options.abstract)){var v=e.slot;e={},v&&(e.slot=v)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<Wr.length;n++){var r=Wr[n],i=e[r],o=Ur[r];i===o||i&&i._merged||(e[r]=i?Yr(o,i):o)}}(e);var m=Vr(t.options)||c;return new pt("vue-component-".concat(t.cid).concat(m?"-".concat(m):""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:h,listeners:g,tag:c,children:u},d)}}}function Yr(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}var Xr=P,qr=V.optionMergeStrategies;function Zr(t,e,n){if(void 0===n&&(n=!0),!e)return t;for(var r,i,o,a=lt?Reflect.ownKeys(e):Object.keys(e),s=0;s<a.length;s++)"__ob__"!==(r=a[s])&&(i=t[r],o=e[r],n&&_(t,r)?i!==o&&d(i)&&d(o)&&Zr(i,o):Lt(t,r,o));return t}function Kr(t,e,n){return n?function(){var r=c(e)?e.call(n,n):e,i=c(t)?t.call(n,n):t;return r?Zr(r,i):i}:e?t?function(){return Zr(c(e)?e.call(this,this):e,c(t)?t.call(this,this):t)}:e:t}function Jr(t,e){var n=e?t?t.concat(e):i(e)?e:[e]:t;return n?function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(n):n}function Qr(t,e,n,r){var i=Object.create(t||null);return e?N(i,e):i}qr.data=function(t,e,n){return n?Kr(t,e,n):e&&"function"!=typeof e?t:Kr(t,e)},G.forEach((function(t){qr[t]=Jr})),$.forEach((function(t){qr[t+"s"]=Qr})),qr.watch=function(t,e,n,r){if(t===rt&&(t=void 0),e===rt&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var o={};for(var a in N(o,t),e){var s=o[a],u=e[a];s&&!i(s)&&(s=[s]),o[a]=s?s.concat(u):i(u)?u:[u]}return o},qr.props=qr.methods=qr.inject=qr.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return N(i,t),e&&N(i,e),i},qr.provide=function(t,e){return t?function(){var n=Object.create(null);return Zr(n,c(t)?t.call(this):t),e&&Zr(n,c(e)?e.call(this):e,!1),n}:e};var ti=function(t,e){return void 0===e?t:e};function ei(t,e,n){if(c(e)&&(e=e.options),function(t,e){var n=t.props;if(n){var r,o,a={};if(i(n))for(r=n.length;r--;)"string"==typeof(o=n[r])&&(a[C(o)]={type:null});else if(d(n))for(var s in n)o=n[s],a[C(s)]=d(o)?o:{type:o};t.props=a}}(e),function(t,e){var n=t.inject;if(n){var r=t.inject={};if(i(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(d(n))for(var a in n){var s=n[a];r[a]=d(s)?N({from:a},s):{from:s}}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var r=e[n];c(r)&&(e[n]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(t=ei(t,e.extends,n)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)t=ei(t,e.mixins[r],n);var a,s={};for(a in t)u(a);for(a in e)_(t,a)||u(a);function u(r){var i=qr[r]||ti;s[r]=i(t[r],e[r],n,r)}return s}function ni(t,e,n,r){if("string"==typeof n){var i=t[e];if(_(i,n))return i[n];var o=C(n);if(_(i,o))return i[o];var a=k(o);return _(i,a)?i[a]:i[n]||i[o]||i[a]}}function ri(t,e,n,r){var i=e[t],o=!_(n,t),a=n[t],s=si(Boolean,i.type);if(s>-1)if(o&&!_(i,"default"))a=!1;else if(""===a||a===O(t)){var u=si(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=function(t,e,n){if(_(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:c(r)&&"Function"!==oi(e.type)?r.call(t):r}}(r,i,t);var l=Tt;At(!0),Pt(a),At(l)}return a}var ii=/^\s*function (\w+)/;function oi(t){var e=t&&t.toString().match(ii);return e?e[1]:""}function ai(t,e){return oi(t)===oi(e)}function si(t,e){if(!i(e))return ai(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(ai(e[n],t))return n;return-1}function ui(t){this._init(t)}function ci(t){return t&&(Vr(t.Ctor.options)||t.tag)}function li(t,e){return i(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:(n=t,!("[object RegExp]"!==f.call(n))&&t.test(e));var n}function fi(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=a.name;s&&!e(s)&&di(n,o,r,i)}}}function di(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,x(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=Br++,e._isVue=!0,e.__v_skip=!0,e._scope=new Bn(!0),e._scope._vm=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=ei(Fr(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._provided=n?n._provided:Object.create(null),t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&un(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,i=n&&n.context;t.$slots=Fe(e._renderChildren,i),t.$scopedSlots=n?Ge(t.$parent,n.data.scopedSlots,t.$slots):r,t._c=function(e,n,r,i){return _e(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return _e(t,e,n,r,i,!0)};var o=n&&n.data;Dt(t,"$attrs",o&&o.attrs||r,null,!0),Dt(t,"$listeners",e._parentListeners||r,null,!0)}(e),pn(e,"beforeCreate",void 0,!1),function(t){var e=jr(t.$options.inject,t);e&&(At(!1),Object.keys(e).forEach((function(n){Dt(t,n,e[n])})),At(!0))}(e),function(t){var e=t.$options;if(e.props&&function(t,e){var n=t.$options.propsData||{},r=t._props=Ft({}),i=t.$options._propKeys=[];!t.$parent||At(!1);var o=function(o){i.push(o);var a=ri(o,e,n,t);Dt(r,o,a),o in t||Nr(t,"_props",o)};for(var a in e)o(a);At(!0)}(t,e.props),function(t){var e=t.$options,n=e.setup;if(n){var r=t._setupContext=We(t);ht(t),Et();var i=Yn(n,null,[t._props||Ft({}),r],t,"setup");if(St(),ht(),c(i))e.render=i;else if(l(i))if(t._setupState=i,i.__sfc){var o=t._setupProxy={};for(var a in i)"__sfc"!==a&&ee(o,i,a)}else for(var a in i)W(a)||ee(t,i,a)}}(t),e.methods&&function(t,e){for(var n in t.$options.props,e)t[n]="function"!=typeof e[n]?P:T(e[n],t)}(t,e.methods),e.data)!function(t){var e=t.$options.data;d(e=t._data=c(e)?function(t,e){Et();try{return t.call(e,e)}catch(t){return Hn(t,e,"data()"),{}}finally{St()}}(e,t):e||{})||(e={});for(var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);i--;){var o=n[i];r&&_(r,o)||W(o)||Nr(t,"_data",o)}var a=Pt(e);a&&a.vmCount++}(t);else{var n=Pt(t._data={});n&&n.vmCount++}e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),r=at();for(var i in e){var o=e[i],a=c(o)?o:o.get;r||(n[i]=new Tr(t,a||P,P,Ir)),i in t||Pr(t,i,o)}}(t,e.computed),e.watch&&e.watch!==rt&&function(t,e){for(var n in e){var r=e[n];if(i(r))for(var o=0;o<r.length;o++)Rr(t,n,r[o]);else Rr(t,n,r)}}(t,e.watch)}(e),function(t){var e=t.$options.provide;if(e){var n=c(e)?e.call(t):e;if(!l(n))return;for(var r=Vn(t),i=lt?Reflect.ownKeys(n):Object.keys(n),o=0;o<i.length;o++){var a=i[o];Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))}}}(e),pn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(ui),function(t){Object.defineProperty(t.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(t.prototype,"$props",{get:function(){return this._props}}),t.prototype.$set=Lt,t.prototype.$delete=Rt,t.prototype.$watch=function(t,e,n){var r=this;if(d(e))return Rr(r,t,e,n);(n=n||{}).user=!0;var i=new Tr(r,t,e,n);if(n.immediate){var o='callback for immediate watcher "'.concat(i.expression,'"');Et(),Yn(e,r,[i.value],r,o),St()}return function(){i.teardown()}}}(ui),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(i(t))for(var o=0,a=t.length;o<a;o++)r.$on(t[o],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(i(t)){for(var r=0,o=t.length;r<o;r++)n.$off(t[r],e);return n}var a,s=n._events[t];if(!s)return n;if(!e)return n._events[t]=null,n;for(var u=s.length;u--;)if((a=s[u])===e||a.fn===e){s.splice(u,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?A(n):n;for(var r=A(arguments,1),i='event handler for "'.concat(t,'"'),o=0,a=n.length;o<a;o++)Yn(n[o],e,r,e,i)}return e}}(ui),function(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,o=ln(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n);for(var a=n;a&&a.$vnode&&a.$parent&&a.$vnode===a.$parent._vnode;)a.$parent.$el=a.$el,a=a.$parent},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){pn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||x(e.$children,t),t._scope.stop(),t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),pn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(ui),function(t){Be(t.prototype),t.prototype.$nextTick=function(t){return or(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,o=n._parentVnode;o&&e._isMounted&&(e.$scopedSlots=Ge(e.$parent,o.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&Xe(e._slotsProxy,e.$scopedSlots)),e.$vnode=o;try{ht(e),en=e,t=r.call(e._renderProxy,e.$createElement)}catch(n){Hn(n,e,"render"),t=e._vnode}finally{en=null,ht()}return i(t)&&1===t.length&&(t=t[0]),t instanceof pt||(t=gt()),t.parent=o,t}}(ui);var hi=[String,RegExp,Array],pi={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:hi,exclude:hi,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,n=t.keys,r=t.vnodeToCache,i=t.keyToCache;if(r){var o=r.tag,a=r.componentInstance,s=r.componentOptions;e[i]={name:ci(s),tag:o,componentInstance:a},n.push(i),this.max&&n.length>parseInt(this.max)&&di(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)di(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){fi(t,(function(t){return li(e,t)}))})),this.$watch("exclude",(function(e){fi(t,(function(t){return!li(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=rn(t),n=e&&e.componentOptions;if(n){var r=ci(n),i=this.include,o=this.exclude;if(i&&(!r||!li(i,r))||o&&r&&li(o,r))return e;var a=this.cache,s=this.keys,u=null==e.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):e.key;a[u]?(e.componentInstance=a[u].componentInstance,x(s,u),s.push(u)):(this.vnodeToCache=e,this.keyToCache=u),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return V}};Object.defineProperty(t,"config",e),t.util={warn:Xr,extend:N,mergeOptions:ei,defineReactive:Dt},t.set=Lt,t.delete=Rt,t.nextTick=or,t.observable=function(t){return Pt(t),t},t.options=Object.create(null),$.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,N(t.options.components,pi),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=A(arguments,1);return n.unshift(this),c(t.install)?t.install.apply(t,n):c(t)&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=ei(this.options,t),this}}(t),function(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=Vr(t)||Vr(n.options),a=function(t){this._init(t)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=e++,a.options=ei(n.options,t),a.super=n,a.options.props&&function(t){var e=t.options.props;for(var n in e)Nr(t.prototype,"_props",n)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var n in e)Pr(t.prototype,n,e[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,$.forEach((function(t){a[t]=n[t]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=N({},a.options),i[r]=a,a}}(t),function(t){$.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&d(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&c(n)&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}(t)}(ui),Object.defineProperty(ui.prototype,"$isServer",{get:at}),Object.defineProperty(ui.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(ui,"FunctionalRenderContext",{value:zr}),ui.version=Er;var gi=m("style,class"),vi=m("input,textarea,option,select,progress"),mi=function(t,e,n){return"value"===n&&vi(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},yi=m("contenteditable,draggable,spellcheck"),bi=m("events,caret,typing,plaintext-only"),xi=function(t,e){return Ci(e)||"false"===e?"false":"contenteditable"===t&&bi(e)?e:"true"},wi=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),_i="http://www.w3.org/1999/xlink",Ei=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Si=function(t){return Ei(t)?t.slice(6,t.length):""},Ci=function(t){return null==t||!1===t};function ki(t,e){return{staticClass:Mi(t.staticClass,e.staticClass),class:a(t.class)?[t.class,e.class]:e.class}}function Mi(t,e){return t?e?t+" "+e:t:e||""}function Oi(t){return Array.isArray(t)?function(t){for(var e,n="",r=0,i=t.length;r<i;r++)a(e=Oi(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):l(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var Ti={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ai=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ni=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Ii=function(t){return Ai(t)||Ni(t)};function Pi(t){return Ni(t)?"svg":"math"===t?"math":void 0}var Di=Object.create(null),Li=m("text,number,password,search,email,tel,url");function Ri(t){return"string"==typeof t?document.querySelector(t)||document.createElement("div"):t}var ji=Object.freeze({__proto__:null,createElement:function(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(t,e){return document.createElementNS(Ti[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),Bi={create:function(t,e){Fi(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Fi(t,!0),Fi(e))},destroy:function(t){Fi(t,!0)}};function Fi(t,e){var n=t.data.ref;if(a(n)){var r=t.context,o=t.componentInstance||t.elm,s=e?null:o,u=e?void 0:o;if(c(n))Yn(n,r,[s],r,"template ref function");else{var l=t.data.refInFor,f="string"==typeof n||"number"==typeof n,d=Xt(n),h=r.$refs;if(f||d)if(l){var p=f?h[n]:n.value;e?i(p)&&x(p,o):i(p)?p.includes(o)||p.push(o):f?(h[n]=[o],zi(r,n,h[n])):n.value=[o]}else if(f){if(e&&h[n]!==o)return;h[n]=u,zi(r,n,s)}else if(d){if(e&&n.value!==o)return;n.value=s}}}}function zi(t,e,n){var r=t._setupState;r&&_(r,e)&&(Xt(r[e])?r[e].value=n:r[e]=n)}var $i=new pt("",{},[]),Gi=["create","activate","update","remove","destroy"];function Vi(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&a(t.data)===a(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,r=a(n=t.data)&&a(n=n.attrs)&&n.type,i=a(n=e.data)&&a(n=n.attrs)&&n.type;return r===i||Li(r)&&Li(i)}(t,e)||s(t.isAsyncPlaceholder)&&o(e.asyncFactory.error))}function Ui(t,e,n){var r,i,o={};for(r=e;r<=n;++r)a(i=t[r].key)&&(o[i]=r);return o}var Wi={create:Hi,update:Hi,destroy:function(t){Hi(t,$i)}};function Hi(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,r,i,o=t===$i,a=e===$i,s=Xi(t.data.directives,t.context),u=Xi(e.data.directives,e.context),c=[],l=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Zi(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):(Zi(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var f=function(){for(var n=0;n<c.length;n++)Zi(c[n],"inserted",e,t)};o?ge(e,"insert",f):f()}if(l.length&&ge(e,"postpatch",(function(){for(var n=0;n<l.length;n++)Zi(l[n],"componentUpdated",e,t)})),!o)for(n in s)u[n]||Zi(s[n],"unbind",t,t,a)}(t,e)}var Yi=Object.create(null);function Xi(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++){if((r=t[n]).modifiers||(r.modifiers=Yi),i[qi(r)]=r,e._setupState&&e._setupState.__sfc){var o=r.def||ni(e,"_setupState","v-"+r.name);r.def="function"==typeof o?{bind:o,update:o}:o}r.def=r.def||ni(e.$options,"directives",r.name)}return i}function qi(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function Zi(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(r){Hn(r,n.context,"directive ".concat(t.name," ").concat(e," hook"))}}var Ki=[Bi,Wi];function Ji(t,e){var n=e.componentOptions;if(!(a(n)&&!1===n.Ctor.options.inheritAttrs||o(t.data.attrs)&&o(e.data.attrs))){var r,i,u=e.elm,c=t.data.attrs||{},l=e.data.attrs||{};for(r in(a(l.__ob__)||s(l._v_attr_proxy))&&(l=e.data.attrs=N({},l)),l)i=l[r],c[r]!==i&&Qi(u,r,i,e.data.pre);for(r in(K||Q)&&l.value!==c.value&&Qi(u,"value",l.value),c)o(l[r])&&(Ei(r)?u.removeAttributeNS(_i,Si(r)):yi(r)||u.removeAttribute(r))}}function Qi(t,e,n,r){r||t.tagName.indexOf("-")>-1?to(t,e,n):wi(e)?Ci(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):yi(e)?t.setAttribute(e,xi(e,n)):Ei(e)?Ci(n)?t.removeAttributeNS(_i,Si(e)):t.setAttributeNS(_i,e,n):to(t,e,n)}function to(t,e,n){if(Ci(n))t.removeAttribute(e);else{if(K&&!J&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var eo={create:Ji,update:Ji};function no(t,e){var n=e.elm,r=e.data,i=t.data;if(!(o(r.staticClass)&&o(r.class)&&(o(i)||o(i.staticClass)&&o(i.class)))){var s=function(t){for(var e=t.data,n=t,r=t;a(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=ki(r.data,e));for(;a(n=n.parent);)n&&n.data&&(e=ki(e,n.data));return i=e.staticClass,o=e.class,a(i)||a(o)?Mi(i,Oi(o)):"";var i,o}(e),u=n._transitionClasses;a(u)&&(s=Mi(s,Oi(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var ro,io,oo,ao,so,uo,co={create:no,update:no},lo=/[\w).+\-_$\]]/;function fo(t){var e,n,r,i,o,a=!1,s=!1,u=!1,c=!1,l=0,f=0,d=0,h=0;for(r=0;r<t.length;r++)if(n=e,e=t.charCodeAt(r),a)39===e&&92!==n&&(a=!1);else if(s)34===e&&92!==n&&(s=!1);else if(u)96===e&&92!==n&&(u=!1);else if(c)47===e&&92!==n&&(c=!1);else if(124!==e||124===t.charCodeAt(r+1)||124===t.charCodeAt(r-1)||l||f||d){switch(e){case 34:s=!0;break;case 39:a=!0;break;case 96:u=!0;break;case 40:d++;break;case 41:d--;break;case 91:f++;break;case 93:f--;break;case 123:l++;break;case 125:l--}if(47===e){for(var p=r-1,g=void 0;p>=0&&" "===(g=t.charAt(p));p--);g&&lo.test(g)||(c=!0)}}else void 0===i?(h=r+1,i=t.slice(0,r).trim()):v();function v(){(o||(o=[])).push(t.slice(h,r).trim()),h=r+1}if(void 0===i?i=t.slice(0,r).trim():0!==h&&v(),o)for(r=0;r<o.length;r++)i=ho(i,o[r]);return i}function ho(t,e){var n=e.indexOf("(");if(n<0)return'_f("'.concat(e,'")(').concat(t,")");var r=e.slice(0,n),i=e.slice(n+1);return'_f("'.concat(r,'")(').concat(t).concat(")"!==i?","+i:i)}function po(t,e){console.error("[Vue compiler]: ".concat(t))}function go(t,e){return t?t.map((function(t){return t[e]})).filter((function(t){return t})):[]}function vo(t,e,n,r,i){(t.props||(t.props=[])).push(Co({name:e,value:n,dynamic:i},r)),t.plain=!1}function mo(t,e,n,r,i){(i?t.dynamicAttrs||(t.dynamicAttrs=[]):t.attrs||(t.attrs=[])).push(Co({name:e,value:n,dynamic:i},r)),t.plain=!1}function yo(t,e,n,r){t.attrsMap[e]=n,t.attrsList.push(Co({name:e,value:n},r))}function bo(t,e,n,r,i,o,a,s){(t.directives||(t.directives=[])).push(Co({name:e,rawName:n,value:r,arg:i,isDynamicArg:o,modifiers:a},s)),t.plain=!1}function xo(t,e,n){return n?"_p(".concat(e,',"').concat(t,'")'):t+e}function wo(t,e,n,i,o,a,s,u){var c;(i=i||r).right?u?e="(".concat(e,")==='click'?'contextmenu':(").concat(e,")"):"click"===e&&(e="contextmenu",delete i.right):i.middle&&(u?e="(".concat(e,")==='click'?'mouseup':(").concat(e,")"):"click"===e&&(e="mouseup")),i.capture&&(delete i.capture,e=xo("!",e,u)),i.once&&(delete i.once,e=xo("~",e,u)),i.passive&&(delete i.passive,e=xo("&",e,u)),i.native?(delete i.native,c=t.nativeEvents||(t.nativeEvents={})):c=t.events||(t.events={});var l=Co({value:n.trim(),dynamic:u},s);i!==r&&(l.modifiers=i);var f=c[e];Array.isArray(f)?o?f.unshift(l):f.push(l):c[e]=f?o?[l,f]:[f,l]:l,t.plain=!1}function _o(t,e,n){var r=Eo(t,":"+e)||Eo(t,"v-bind:"+e);if(null!=r)return fo(r);if(!1!==n){var i=Eo(t,e);if(null!=i)return JSON.stringify(i)}}function Eo(t,e,n){var r;if(null!=(r=t.attrsMap[e]))for(var i=t.attrsList,o=0,a=i.length;o<a;o++)if(i[o].name===e){i.splice(o,1);break}return n&&delete t.attrsMap[e],r}function So(t,e){for(var n=t.attrsList,r=0,i=n.length;r<i;r++){var o=n[r];if(e.test(o.name))return n.splice(r,1),o}}function Co(t,e){return e&&(null!=e.start&&(t.start=e.start),null!=e.end&&(t.end=e.end)),t}function ko(t,e,n){var r=n||{},i=r.number,o="$$v",a=o;r.trim&&(a="(typeof ".concat(o," === 'string'")+"? ".concat(o,".trim()")+": ".concat(o,")")),i&&(a="_n(".concat(a,")"));var s=Mo(e,a);t.model={value:"(".concat(e,")"),expression:JSON.stringify(e),callback:"function (".concat(o,") {").concat(s,"}")}}function Mo(t,e){var n=function(t){if(t=t.trim(),ro=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<ro-1)return(ao=t.lastIndexOf("."))>-1?{exp:t.slice(0,ao),key:'"'+t.slice(ao+1)+'"'}:{exp:t,key:null};for(io=t,ao=so=uo=0;!To();)Ao(oo=Oo())?Io(oo):91===oo&&No(oo);return{exp:t.slice(0,so),key:t.slice(so+1,uo)}}(t);return null===n.key?"".concat(t,"=").concat(e):"$set(".concat(n.exp,", ").concat(n.key,", ").concat(e,")")}function Oo(){return io.charCodeAt(++ao)}function To(){return ao>=ro}function Ao(t){return 34===t||39===t}function No(t){var e=1;for(so=ao;!To();)if(Ao(t=Oo()))Io(t);else if(91===t&&e++,93===t&&e--,0===e){uo=ao;break}}function Io(t){for(var e=t;!To()&&(t=Oo())!==e;);}var Po,Do="__r",Lo="__c";function Ro(t,e,n){var r=Po;return function i(){null!==e.apply(null,arguments)&&Fo(t,i,n,r)}}var jo=Kn&&!(nt&&Number(nt[1])<=53);function Bo(t,e,n,r){if(jo){var i=wn,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Po.addEventListener(t,e,it?{capture:n,passive:r}:n)}function Fo(t,e,n,r){(r||Po).removeEventListener(t,e._wrapper||e,n)}function zo(t,e){if(!o(t.data.on)||!o(e.data.on)){var n=e.data.on||{},r=t.data.on||{};Po=e.elm||t.elm,function(t){if(a(t[Do])){var e=K?"change":"input";t[e]=[].concat(t[Do],t[e]||[]),delete t[Do]}a(t[Lo])&&(t.change=[].concat(t[Lo],t.change||[]),delete t[Lo])}(n),pe(n,r,Bo,Fo,Ro,e.context),Po=void 0}}var $o,Go={create:zo,update:zo,destroy:function(t){return zo(t,$i)}};function Vo(t,e){if(!o(t.data.domProps)||!o(e.data.domProps)){var n,r,i=e.elm,u=t.data.domProps||{},c=e.data.domProps||{};for(n in(a(c.__ob__)||s(c._v_attr_proxy))&&(c=e.data.domProps=N({},c)),u)n in c||(i[n]="");for(n in c){if(r=c[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),r===u[n])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===n&&"PROGRESS"!==i.tagName){i._value=r;var l=o(r)?"":String(r);Uo(i,l)&&(i.value=l)}else if("innerHTML"===n&&Ni(i.tagName)&&o(i.innerHTML)){($o=$o||document.createElement("div")).innerHTML="<svg>".concat(r,"</svg>");for(var f=$o.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;f.firstChild;)i.appendChild(f.firstChild)}else if(r!==u[n])try{i[n]=r}catch(t){}}}}function Uo(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,r=t._vModifiers;if(a(r)){if(r.number)return v(n)!==v(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var Wo={create:Vo,update:Vo},Ho=E((function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var r=t.split(n);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Yo(t){var e=Xo(t.style);return t.staticStyle?N(t.staticStyle,e):e}function Xo(t){return Array.isArray(t)?I(t):"string"==typeof t?Ho(t):t}var qo,Zo=/^--/,Ko=/\s*!important$/,Jo=function(t,e,n){if(Zo.test(e))t.style.setProperty(e,n);else if(Ko.test(n))t.style.setProperty(O(e),n.replace(Ko,""),"important");else{var r=ta(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},Qo=["Webkit","Moz","ms"],ta=E((function(t){if(qo=qo||document.createElement("div").style,"filter"!==(t=C(t))&&t in qo)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Qo.length;n++){var r=Qo[n]+e;if(r in qo)return r}}));function ea(t,e){var n=e.data,r=t.data;if(!(o(n.staticStyle)&&o(n.style)&&o(r.staticStyle)&&o(r.style))){var i,s,u=e.elm,c=r.staticStyle,l=r.normalizedStyle||r.style||{},f=c||l,d=Xo(e.data.style)||{};e.data.normalizedStyle=a(d.__ob__)?N({},d):d;var h=function(t,e){for(var n,r={},i=t;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=Yo(i.data))&&N(r,n);(n=Yo(t.data))&&N(r,n);for(var o=t;o=o.parent;)o.data&&(n=Yo(o.data))&&N(r,n);return r}(e);for(s in f)o(h[s])&&Jo(u,s,"");for(s in h)(i=h[s])!==f[s]&&Jo(u,s,null==i?"":i)}}var na={create:ea,update:ea},ra=/\s+/;function ia(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(ra).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" ".concat(t.getAttribute("class")||""," ");n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function oa(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(ra).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" ".concat(t.getAttribute("class")||""," "),r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function aa(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&N(e,sa(t.name||"v")),N(e,t),e}return"string"==typeof t?sa(t):void 0}}var sa=E((function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}})),ua=q&&!J,ca="transition",la="animation",fa="transition",da="transitionend",ha="animation",pa="animationend";ua&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(fa="WebkitTransition",da="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ha="WebkitAnimation",pa="webkitAnimationEnd"));var ga=q?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function va(t){ga((function(){ga(t)}))}function ma(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),ia(t,e))}function ya(t,e){t._transitionClasses&&x(t._transitionClasses,e),oa(t,e)}function ba(t,e,n){var r=wa(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===ca?da:pa,u=0,c=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++u>=a&&c()};setTimeout((function(){u<a&&c()}),o+1),t.addEventListener(s,l)}var xa=/\b(transform|all)(,|$)/;function wa(t,e){var n,r=window.getComputedStyle(t),i=(r[fa+"Delay"]||"").split(", "),o=(r[fa+"Duration"]||"").split(", "),a=_a(i,o),s=(r[ha+"Delay"]||"").split(", "),u=(r[ha+"Duration"]||"").split(", "),c=_a(s,u),l=0,f=0;return e===ca?a>0&&(n=ca,l=a,f=o.length):e===la?c>0&&(n=la,l=c,f=u.length):f=(n=(l=Math.max(a,c))>0?a>c?ca:la:null)?n===ca?o.length:u.length:0,{type:n,timeout:l,propCount:f,hasTransform:n===ca&&xa.test(r[fa+"Property"])}}function _a(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Ea(e)+Ea(t[n])})))}function Ea(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Sa(t,e){var n=t.elm;a(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=aa(t.data.transition);if(!o(r)&&!a(n._enterCb)&&1===n.nodeType){for(var i=r.css,s=r.type,u=r.enterClass,f=r.enterToClass,d=r.enterActiveClass,h=r.appearClass,p=r.appearToClass,g=r.appearActiveClass,m=r.beforeEnter,y=r.enter,b=r.afterEnter,x=r.enterCancelled,w=r.beforeAppear,_=r.appear,E=r.afterAppear,S=r.appearCancelled,C=r.duration,k=cn,M=cn.$vnode;M&&M.parent;)k=M.context,M=M.parent;var O=!k._isMounted||!t.isRootInsert;if(!O||_||""===_){var T=O&&h?h:u,A=O&&g?g:d,N=O&&p?p:f,I=O&&w||m,P=O&&c(_)?_:y,D=O&&E||b,L=O&&S||x,R=v(l(C)?C.enter:C),j=!1!==i&&!J,F=Ma(P),z=n._enterCb=B((function(){j&&(ya(n,N),ya(n,A)),z.cancelled?(j&&ya(n,T),L&&L(n)):D&&D(n),n._enterCb=null}));t.data.show||ge(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),P&&P(n,z)})),I&&I(n),j&&(ma(n,T),ma(n,A),va((function(){ya(n,T),z.cancelled||(ma(n,N),F||(ka(R)?setTimeout(z,R):ba(n,s,z)))}))),t.data.show&&(e&&e(),P&&P(n,z)),j||F||z()}}}function Ca(t,e){var n=t.elm;a(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=aa(t.data.transition);if(o(r)||1!==n.nodeType)return e();if(!a(n._leaveCb)){var i=r.css,s=r.type,u=r.leaveClass,c=r.leaveToClass,f=r.leaveActiveClass,d=r.beforeLeave,h=r.leave,p=r.afterLeave,g=r.leaveCancelled,m=r.delayLeave,y=r.duration,b=!1!==i&&!J,x=Ma(h),w=v(l(y)?y.leave:y),_=n._leaveCb=B((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(ya(n,c),ya(n,f)),_.cancelled?(b&&ya(n,u),g&&g(n)):(e(),p&&p(n)),n._leaveCb=null}));m?m(E):E()}function E(){_.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),b&&(ma(n,u),ma(n,f),va((function(){ya(n,u),_.cancelled||(ma(n,c),x||(ka(w)?setTimeout(_,w):ba(n,s,_)))}))),h&&h(n,_),b||x||_())}}function ka(t){return"number"==typeof t&&!isNaN(t)}function Ma(t){if(o(t))return!1;var e=t.fns;return a(e)?Ma(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Oa(t,e){!0!==e.data.show&&Sa(e)}var Ta=function(t){var e,n,r={},c=t.modules,l=t.nodeOps;for(e=0;e<Gi.length;++e)for(r[Gi[e]]=[],n=0;n<c.length;++n)a(c[n][Gi[e]])&&r[Gi[e]].push(c[n][Gi[e]]);function f(t){var e=l.parentNode(t);a(e)&&l.removeChild(e,t)}function d(t,e,n,i,o,u,c){if(a(t.elm)&&a(u)&&(t=u[c]=mt(t)),t.isRootInsert=!o,!function(t,e,n,i){var o=t.data;if(a(o)){var u=a(t.componentInstance)&&o.keepAlive;if(a(o=o.hook)&&a(o=o.init)&&o(t,!1),a(t.componentInstance))return h(t,e),p(n,t.elm,i),s(u)&&function(t,e,n,i){for(var o,s=t;s.componentInstance;)if(a(o=(s=s.componentInstance._vnode).data)&&a(o=o.transition)){for(o=0;o<r.activate.length;++o)r.activate[o]($i,s);e.push(s);break}p(n,t.elm,i)}(t,e,n,i),!0}}(t,e,n,i)){var f=t.data,d=t.children,v=t.tag;a(v)?(t.elm=t.ns?l.createElementNS(t.ns,v):l.createElement(v,t),b(t),g(t,d,e),a(f)&&y(t,e),p(n,t.elm,i)):s(t.isComment)?(t.elm=l.createComment(t.text),p(n,t.elm,i)):(t.elm=l.createTextNode(t.text),p(n,t.elm,i))}}function h(t,e){a(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,v(t)?(y(t,e),b(t)):(Fi(t),e.push(t))}function p(t,e,n){a(t)&&(a(n)?l.parentNode(n)===t&&l.insertBefore(t,e,n):l.appendChild(t,e))}function g(t,e,n){if(i(e))for(var r=0;r<e.length;++r)d(e[r],n,t.elm,null,!0,e,r);else u(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function v(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return a(t.tag)}function y(t,n){for(var i=0;i<r.create.length;++i)r.create[i]($i,t);a(e=t.data.hook)&&(a(e.create)&&e.create($i,t),a(e.insert)&&n.push(t))}function b(t){var e;if(a(e=t.fnScopeId))l.setStyleScope(t.elm,e);else for(var n=t;n;)a(e=n.context)&&a(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),n=n.parent;a(e=cn)&&e!==t.context&&e!==t.fnContext&&a(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function x(t,e,n,r,i,o){for(;r<=i;++r)d(n[r],o,t,e,!1,n,r)}function w(t){var e,n,i=t.data;if(a(i))for(a(e=i.hook)&&a(e=e.destroy)&&e(t),e=0;e<r.destroy.length;++e)r.destroy[e](t);if(a(e=t.children))for(n=0;n<t.children.length;++n)w(t.children[n])}function _(t,e,n){for(;e<=n;++e){var r=t[e];a(r)&&(a(r.tag)?(E(r),w(r)):f(r.elm))}}function E(t,e){if(a(e)||a(t.data)){var n,i=r.remove.length+1;for(a(e)?e.listeners+=i:e=function(t,e){function n(){0==--n.listeners&&f(t)}return n.listeners=e,n}(t.elm,i),a(n=t.componentInstance)&&a(n=n._vnode)&&a(n.data)&&E(n,e),n=0;n<r.remove.length;++n)r.remove[n](t,e);a(n=t.data.hook)&&a(n=n.remove)?n(t,e):e()}else f(t.elm)}function S(t,e,n,r){for(var i=n;i<r;i++){var o=e[i];if(a(o)&&Vi(t,o))return i}}function C(t,e,n,i,u,c){if(t!==e){a(e.elm)&&a(i)&&(e=i[u]=mt(e));var f=e.elm=t.elm;if(s(t.isAsyncPlaceholder))a(e.asyncFactory.resolved)?O(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(t.isStatic)&&e.key===t.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=t.componentInstance;else{var h,p=e.data;a(p)&&a(h=p.hook)&&a(h=h.prepatch)&&h(t,e);var g=t.children,m=e.children;if(a(p)&&v(e)){for(h=0;h<r.update.length;++h)r.update[h](t,e);a(h=p.hook)&&a(h=h.update)&&h(t,e)}o(e.text)?a(g)&&a(m)?g!==m&&function(t,e,n,r,i){for(var s,u,c,f=0,h=0,p=e.length-1,g=e[0],v=e[p],m=n.length-1,y=n[0],b=n[m],w=!i;f<=p&&h<=m;)o(g)?g=e[++f]:o(v)?v=e[--p]:Vi(g,y)?(C(g,y,r,n,h),g=e[++f],y=n[++h]):Vi(v,b)?(C(v,b,r,n,m),v=e[--p],b=n[--m]):Vi(g,b)?(C(g,b,r,n,m),w&&l.insertBefore(t,g.elm,l.nextSibling(v.elm)),g=e[++f],b=n[--m]):Vi(v,y)?(C(v,y,r,n,h),w&&l.insertBefore(t,v.elm,g.elm),v=e[--p],y=n[++h]):(o(s)&&(s=Ui(e,f,p)),o(u=a(y.key)?s[y.key]:S(y,e,f,p))?d(y,r,t,g.elm,!1,n,h):Vi(c=e[u],y)?(C(c,y,r,n,h),e[u]=void 0,w&&l.insertBefore(t,c.elm,g.elm)):d(y,r,t,g.elm,!1,n,h),y=n[++h]);f>p?x(t,o(n[m+1])?null:n[m+1].elm,n,h,m,r):h>m&&_(e,f,p)}(f,g,m,n,c):a(m)?(a(t.text)&&l.setTextContent(f,""),x(f,null,m,0,m.length-1,n)):a(g)?_(g,0,g.length-1):a(t.text)&&l.setTextContent(f,""):t.text!==e.text&&l.setTextContent(f,e.text),a(p)&&a(h=p.hook)&&a(h=h.postpatch)&&h(t,e)}}}function k(t,e,n){if(s(n)&&a(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var M=m("attrs,class,staticClass,staticStyle,key");function O(t,e,n,r){var i,o=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,s(e.isComment)&&a(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(a(u)&&(a(i=u.hook)&&a(i=i.init)&&i(e,!0),a(i=e.componentInstance)))return h(e,n),!0;if(a(o)){if(a(c))if(t.hasChildNodes())if(a(i=u)&&a(i=i.domProps)&&a(i=i.innerHTML)){if(i!==t.innerHTML)return!1}else{for(var l=!0,f=t.firstChild,d=0;d<c.length;d++){if(!f||!O(f,c[d],n,r)){l=!1;break}f=f.nextSibling}if(!l||f)return!1}else g(e,c,n);if(a(u)){var p=!1;for(var v in u)if(!M(v)){p=!0,y(e,n);break}!p&&u.class&&kr(u.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,i){if(!o(e)){var u,c=!1,f=[];if(o(t))c=!0,d(e,f);else{var h=a(t.nodeType);if(!h&&Vi(t,e))C(t,e,f,null,null,i);else{if(h){if(1===t.nodeType&&t.hasAttribute(z)&&(t.removeAttribute(z),n=!0),s(n)&&O(t,e,f))return k(e,f,!0),t;u=t,t=new pt(l.tagName(u).toLowerCase(),{},[],void 0,u)}var p=t.elm,g=l.parentNode(p);if(d(e,f,p._leaveCb?null:g,l.nextSibling(p)),a(e.parent))for(var m=e.parent,y=v(e);m;){for(var b=0;b<r.destroy.length;++b)r.destroy[b](m);if(m.elm=e.elm,y){for(var x=0;x<r.create.length;++x)r.create[x]($i,m);var E=m.data.hook.insert;if(E.merged)for(var S=1;S<E.fns.length;S++)E.fns[S]()}else Fi(m);m=m.parent}a(g)?_([t],0,0):a(t.tag)&&w(t)}}return k(e,f,c),e.elm}a(t)&&w(t)}}({nodeOps:ji,modules:[eo,co,Go,Wo,na,q?{create:Oa,activate:Oa,remove:function(t,e){!0!==t.data.show?Ca(t,e):e()}}:{}].concat(Ki)});J&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&ja(t,"input")}));var Aa={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?ge(n,"postpatch",(function(){Aa.componentUpdated(t,e,n)})):Na(t,e,n.context),t._vOptions=[].map.call(t.options,Da)):("textarea"===n.tag||Li(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",La),t.addEventListener("compositionend",Ra),t.addEventListener("change",Ra),J&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Na(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,Da);i.some((function(t,e){return!R(t,r[e])}))&&(t.multiple?e.value.some((function(t){return Pa(t,i)})):e.value!==e.oldValue&&Pa(e.value,i))&&ja(t,"change")}}};function Na(t,e,n){Ia(t,e),(K||Q)&&setTimeout((function(){Ia(t,e)}),0)}function Ia(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=j(r,Da(a))>-1,a.selected!==o&&(a.selected=o);else if(R(Da(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function Pa(t,e){return e.every((function(e){return!R(e,t)}))}function Da(t){return"_value"in t?t._value:t.value}function La(t){t.target.composing=!0}function Ra(t){t.target.composing&&(t.target.composing=!1,ja(t.target,"input"))}function ja(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Ba(t){return!t.componentInstance||t.data&&t.data.transition?t:Ba(t.componentInstance._vnode)}var Fa={model:Aa,show:{bind:function(t,e,n){var r=e.value,i=(n=Ba(n)).data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Sa(n,(function(){t.style.display=o}))):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value;!r!=!e.oldValue&&((n=Ba(n)).data&&n.data.transition?(n.data.show=!0,r?Sa(n,(function(){t.style.display=t.__vOriginalDisplay})):Ca(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}}},za={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function $a(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?$a(rn(e.children)):t}function Ga(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var r in i)e[C(r)]=i[r];return e}function Va(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var Ua=function(t){return t.tag||$e(t)},Wa=function(t){return"show"===t.name},Ha={name:"transition",props:za,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(Ua)).length){var r=this.mode,i=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return i;var o=$a(i);if(!o)return i;if(this._leaving)return Va(t,i);var a="__transition-".concat(this._uid,"-");o.key=null==o.key?o.isComment?a+"comment":a+o.tag:u(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var s=(o.data||(o.data={})).transition=Ga(this),c=this._vnode,l=$a(c);if(o.data.directives&&o.data.directives.some(Wa)&&(o.data.show=!0),l&&l.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,l)&&!$e(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var f=l.data.transition=N({},s);if("out-in"===r)return this._leaving=!0,ge(f,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Va(t,i);if("in-out"===r){if($e(o))return c;var d,h=function(){d()};ge(s,"afterEnter",h),ge(s,"enterCancelled",h),ge(f,"delayLeave",(function(t){d=t}))}}return i}}},Ya=N({tag:String,moveClass:String},za);delete Ya.mode;var Xa={props:Ya,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=ln(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=Ga(this),s=0;s<i.length;s++)(l=i[s]).tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")&&(o.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a);if(r){var u=[],c=[];for(s=0;s<r.length;s++){var l;(l=r[s]).data.transition=a,l.data.pos=l.elm.getBoundingClientRect(),n[l.key]?u.push(l):c.push(l)}this.kept=t(e,null,u),this.removed=c}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(qa),t.forEach(Za),t.forEach(Ka),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;ma(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(da,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(da,t),n._moveCb=null,ya(n,e))})}})))},methods:{hasMove:function(t,e){if(!ua)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){oa(n,t)})),ia(n,e),n.style.display="none",this.$el.appendChild(n);var r=wa(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function qa(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Za(t){t.data.newPos=t.elm.getBoundingClientRect()}function Ka(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate(".concat(r,"px,").concat(i,"px)"),o.transitionDuration="0s"}}var Ja={Transition:Ha,TransitionGroup:Xa};ui.config.mustUseProp=mi,ui.config.isReservedTag=Ii,ui.config.isReservedAttr=gi,ui.config.getTagNamespace=Pi,ui.config.isUnknownElement=function(t){if(!q)return!0;if(Ii(t))return!1;if(t=t.toLowerCase(),null!=Di[t])return Di[t];var e=document.createElement(t);return t.indexOf("-")>-1?Di[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Di[t]=/HTMLUnknownElement/.test(e.toString())},N(ui.options.directives,Fa),N(ui.options.components,Ja),ui.prototype.__patch__=q?Ta:P,ui.prototype.$mount=function(t,e){return function(t,e,n){var r;t.$el=e,t.$options.render||(t.$options.render=gt),pn(t,"beforeMount"),r=function(){t._update(t._render(),n)},new Tr(t,r,P,{before:function(){t._isMounted&&!t._isDestroyed&&pn(t,"beforeUpdate")}},!0),n=!1;var i=t._preWatchers;if(i)for(var o=0;o<i.length;o++)i[o].run();return null==t.$vnode&&(t._isMounted=!0,pn(t,"mounted")),t}(this,t=t&&q?Ri(t):void 0,e)},q&&setTimeout((function(){V.devtools&&st&&st.emit("init",ui)}),0);var Qa,ts=/\{\{((?:.|\r?\n)+?)\}\}/g,es=/[-.*+?^${}()|[\]\/\\]/g,ns=E((function(t){var e=t[0].replace(es,"\\$&"),n=t[1].replace(es,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")})),rs={staticKeys:["staticClass"],transformNode:function(t,e){e.warn;var n=Eo(t,"class");n&&(t.staticClass=JSON.stringify(n.replace(/\s+/g," ").trim()));var r=_o(t,"class",!1);r&&(t.classBinding=r)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:".concat(t.staticClass,",")),t.classBinding&&(e+="class:".concat(t.classBinding,",")),e}},is={staticKeys:["staticStyle"],transformNode:function(t,e){e.warn;var n=Eo(t,"style");n&&(t.staticStyle=JSON.stringify(Ho(n)));var r=_o(t,"style",!1);r&&(t.styleBinding=r)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:".concat(t.staticStyle,",")),t.styleBinding&&(e+="style:(".concat(t.styleBinding,"),")),e}},os=m("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),as=m("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),ss=m("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),us=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,cs=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ls="[a-zA-Z_][\\-\\.0-9_a-zA-Z".concat(U.source,"]*"),fs="((?:".concat(ls,"\\:)?").concat(ls,")"),ds=new RegExp("^<".concat(fs)),hs=/^\s*(\/?)>/,ps=new RegExp("^<\\/".concat(fs,"[^>]*>")),gs=/^<!DOCTYPE [^>]+>/i,vs=/^<!\--/,ms=/^<!\[/,ys=m("script,style,textarea",!0),bs={},xs={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},ws=/&(?:lt|gt|quot|amp|#39);/g,_s=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Es=m("pre,textarea",!0),Ss=function(t,e){return t&&Es(t)&&"\n"===e[0]};function Cs(t,e){var n=e?_s:ws;return t.replace(n,(function(t){return xs[t]}))}var ks,Ms,Os,Ts,As,Ns,Is,Ps,Ds=/^@|^v-on:/,Ls=/^v-|^@|^:|^#/,Rs=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,js=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Bs=/^\(|\)$/g,Fs=/^\[.*\]$/,zs=/:(.*)$/,$s=/^:|^\.|^v-bind:/,Gs=/\.[^.\]]+(?=[^\]]*$)/g,Vs=/^v-slot(:|$)|^#/,Us=/[\r\n]/,Ws=/[ \f\t\r\n]+/g,Hs=E((function(t){return(Qa=Qa||document.createElement("div")).innerHTML=t,Qa.textContent})),Ys="_empty_";function Xs(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:eu(e),rawAttrsMap:{},parent:n,children:[]}}function qs(t,e){ks=e.warn||po,Ns=e.isPreTag||D,Is=e.mustUseProp||D,Ps=e.getTagNamespace||D;e.isReservedTag;Os=go(e.modules,"transformNode"),Ts=go(e.modules,"preTransformNode"),As=go(e.modules,"postTransformNode"),Ms=e.delimiters;var n,r,i=[],o=!1!==e.preserveWhitespace,a=e.whitespace,s=!1,u=!1;function c(t){if(l(t),s||t.processed||(t=Zs(t,e)),i.length||t===n||n.if&&(t.elseif||t.else)&&Js(n,{exp:t.elseif,block:t}),r&&!t.forbidden)if(t.elseif||t.else)!function(t,e){var n=function(t){for(var e=t.length;e--;){if(1===t[e].type)return t[e];t.pop()}}(e.children);n&&n.if&&Js(n,{exp:t.elseif,block:t})}(t,r);else{if(t.slotScope){var o=t.slotTarget||'"default"';(r.scopedSlots||(r.scopedSlots={}))[o]=t}r.children.push(t),t.parent=r}t.children=t.children.filter((function(t){return!t.slotScope})),l(t),t.pre&&(s=!1),Ns(t.tag)&&(u=!1);for(var a=0;a<As.length;a++)As[a](t,e)}function l(t){if(!u)for(var e=void 0;(e=t.children[t.children.length-1])&&3===e.type&&" "===e.text;)t.children.pop()}return function(t,e){for(var n,r,i=[],o=e.expectHTML,a=e.isUnaryTag||D,s=e.canBeLeftOpenTag||D,u=0,c=function(){if(n=t,r&&ys(r)){var c=0,d=r.toLowerCase(),h=bs[d]||(bs[d]=new RegExp("([\\s\\S]*?)(</"+d+"[^>]*>)","i"));_=t.replace(h,(function(t,n,r){return c=r.length,ys(d)||"noscript"===d||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Ss(d,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""})),u+=t.length-_.length,t=_,f(d,u-c,u)}else{var p=t.indexOf("<");if(0===p){if(vs.test(t)){var g=t.indexOf("--\x3e");if(g>=0)return e.shouldKeepComment&&e.comment&&e.comment(t.substring(4,g),u,u+g+3),l(g+3),"continue"}if(ms.test(t)){var v=t.indexOf("]>");if(v>=0)return l(v+2),"continue"}var m=t.match(gs);if(m)return l(m[0].length),"continue";var y=t.match(ps);if(y){var b=u;return l(y[0].length),f(y[1],b,u),"continue"}var x=function(){var e=t.match(ds);if(e){var n={tagName:e[1],attrs:[],start:u};l(e[0].length);for(var r=void 0,i=void 0;!(r=t.match(hs))&&(i=t.match(cs)||t.match(us));)i.start=u,l(i[0].length),i.end=u,n.attrs.push(i);if(r)return n.unarySlash=r[1],l(r[0].length),n.end=u,n}}();if(x)return function(t){var n=t.tagName,u=t.unarySlash;o&&("p"===r&&ss(n)&&f(r),s(n)&&r===n&&f(n));for(var c=a(n)||!!u,l=t.attrs.length,d=new Array(l),h=0;h<l;h++){var p=t.attrs[h],g=p[3]||p[4]||p[5]||"",v="a"===n&&"href"===p[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;d[h]={name:p[1],value:Cs(g,v)}}c||(i.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:d,start:t.start,end:t.end}),r=n),e.start&&e.start(n,d,c,t.start,t.end)}(x),Ss(x.tagName,t)&&l(1),"continue"}var w=void 0,_=void 0,E=void 0;if(p>=0){for(_=t.slice(p);!(ps.test(_)||ds.test(_)||vs.test(_)||ms.test(_)||(E=_.indexOf("<",1))<0);)p+=E,_=t.slice(p);w=t.substring(0,p)}p<0&&(w=t),w&&l(w.length),e.chars&&w&&e.chars(w,u-w.length,u)}if(t===n)return e.chars&&e.chars(t),"break"};t&&"break"!==c(););function l(e){u+=e,t=t.substring(e)}function f(t,n,o){var a,s;if(null==n&&(n=u),null==o&&(o=u),t)for(s=t.toLowerCase(),a=i.length-1;a>=0&&i[a].lowerCasedTag!==s;a--);else a=0;if(a>=0){for(var c=i.length-1;c>=a;c--)e.end&&e.end(i[c].tag,n,o);i.length=a,r=a&&i[a-1].tag}else"br"===s?e.start&&e.start(t,[],!0,n,o):"p"===s&&(e.start&&e.start(t,[],!1,n,o),e.end&&e.end(t,n,o))}f()}(t,{warn:ks,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,outputSourceRange:e.outputSourceRange,start:function(t,o,a,l,f){var d=r&&r.ns||Ps(t);K&&"svg"===d&&(o=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];nu.test(r.name)||(r.name=r.name.replace(ru,""),e.push(r))}return e}(o));var h,p=Xs(t,o,r);d&&(p.ns=d),"style"!==(h=p).tag&&("script"!==h.tag||h.attrsMap.type&&"text/javascript"!==h.attrsMap.type)||at()||(p.forbidden=!0);for(var g=0;g<Ts.length;g++)p=Ts[g](p,e)||p;s||(function(t){null!=Eo(t,"v-pre")&&(t.pre=!0)}(p),p.pre&&(s=!0)),Ns(p.tag)&&(u=!0),s?function(t){var e=t.attrsList,n=e.length;if(n)for(var r=t.attrs=new Array(n),i=0;i<n;i++)r[i]={name:e[i].name,value:JSON.stringify(e[i].value)},null!=e[i].start&&(r[i].start=e[i].start,r[i].end=e[i].end);else t.pre||(t.plain=!0)}(p):p.processed||(Ks(p),function(t){var e=Eo(t,"v-if");if(e)t.if=e,Js(t,{exp:e,block:t});else{null!=Eo(t,"v-else")&&(t.else=!0);var n=Eo(t,"v-else-if");n&&(t.elseif=n)}}(p),function(t){null!=Eo(t,"v-once")&&(t.once=!0)}(p)),n||(n=p),a?c(p):(r=p,i.push(p))},end:function(t,e,n){var o=i[i.length-1];i.length-=1,r=i[i.length-1],c(o)},chars:function(t,e,n){if(r&&(!K||"textarea"!==r.tag||r.attrsMap.placeholder!==t)){var i,c=r.children;if(t=u||t.trim()?"script"===(i=r).tag||"style"===i.tag?t:Hs(t):c.length?a?"condense"===a&&Us.test(t)?"":" ":o?" ":"":""){u||"condense"!==a||(t=t.replace(Ws," "));var l=void 0,f=void 0;!s&&" "!==t&&(l=function(t,e){var n=e?ns(e):ts;if(n.test(t)){for(var r,i,o,a=[],s=[],u=n.lastIndex=0;r=n.exec(t);){(i=r.index)>u&&(s.push(o=t.slice(u,i)),a.push(JSON.stringify(o)));var c=fo(r[1].trim());a.push("_s(".concat(c,")")),s.push({"@binding":c}),u=i+r[0].length}return u<t.length&&(s.push(o=t.slice(u)),a.push(JSON.stringify(o))),{expression:a.join("+"),tokens:s}}}(t,Ms))?f={type:2,expression:l.expression,tokens:l.tokens,text:t}:" "===t&&c.length&&" "===c[c.length-1].text||(f={type:3,text:t}),f&&c.push(f)}}},comment:function(t,e,n){if(r){var i={type:3,text:t,isComment:!0};r.children.push(i)}}}),n}function Zs(t,e){var n;!function(t){var e=_o(t,"key");e&&(t.key=e)}(t),t.plain=!t.key&&!t.scopedSlots&&!t.attrsList.length,function(t){var e=_o(t,"ref");e&&(t.ref=e,t.refInFor=function(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(t))}(t),function(t){var e;"template"===t.tag?(e=Eo(t,"scope"),t.slotScope=e||Eo(t,"slot-scope")):(e=Eo(t,"slot-scope"))&&(t.slotScope=e);var n,r=_o(t,"slot");if(r&&(t.slotTarget='""'===r?'"default"':r,t.slotTargetDynamic=!(!t.attrsMap[":slot"]&&!t.attrsMap["v-bind:slot"]),"template"===t.tag||t.slotScope||mo(t,"slot",r,function(t,e){return t.rawAttrsMap[":"+e]||t.rawAttrsMap["v-bind:"+e]||t.rawAttrsMap[e]}(t,"slot"))),"template"===t.tag){if(n=So(t,Vs)){var i=Qs(n),o=i.name,a=i.dynamic;t.slotTarget=o,t.slotTargetDynamic=a,t.slotScope=n.value||Ys}}else if(n=So(t,Vs)){var s=t.scopedSlots||(t.scopedSlots={}),u=Qs(n),c=u.name,l=(a=u.dynamic,s[c]=Xs("template",[],t));l.slotTarget=c,l.slotTargetDynamic=a,l.children=t.children.filter((function(t){if(!t.slotScope)return t.parent=l,!0})),l.slotScope=n.value||Ys,t.children=[],t.plain=!1}}(t),"slot"===(n=t).tag&&(n.slotName=_o(n,"name")),function(t){var e;(e=_o(t,"is"))&&(t.component=e),null!=Eo(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var r=0;r<Os.length;r++)t=Os[r](t,e)||t;return function(t){var e,n,r,i,o,a,s,u,c=t.attrsList;for(e=0,n=c.length;e<n;e++)if(r=i=c[e].name,o=c[e].value,Ls.test(r))if(t.hasBindings=!0,(a=tu(r.replace(Ls,"")))&&(r=r.replace(Gs,"")),$s.test(r))r=r.replace($s,""),o=fo(o),(u=Fs.test(r))&&(r=r.slice(1,-1)),a&&(a.prop&&!u&&"innerHtml"===(r=C(r))&&(r="innerHTML"),a.camel&&!u&&(r=C(r)),a.sync&&(s=Mo(o,"$event"),u?wo(t,'"update:"+('.concat(r,")"),s,null,!1,0,c[e],!0):(wo(t,"update:".concat(C(r)),s,null,!1,0,c[e]),O(r)!==C(r)&&wo(t,"update:".concat(O(r)),s,null,!1,0,c[e])))),a&&a.prop||!t.component&&Is(t.tag,t.attrsMap.type,r)?vo(t,r,o,c[e],u):mo(t,r,o,c[e],u);else if(Ds.test(r))r=r.replace(Ds,""),(u=Fs.test(r))&&(r=r.slice(1,-1)),wo(t,r,o,a,!1,0,c[e],u);else{var l=(r=r.replace(Ls,"")).match(zs),f=l&&l[1];u=!1,f&&(r=r.slice(0,-(f.length+1)),Fs.test(f)&&(f=f.slice(1,-1),u=!0)),bo(t,r,i,o,f,u,a,c[e])}else mo(t,r,JSON.stringify(o),c[e]),!t.component&&"muted"===r&&Is(t.tag,t.attrsMap.type,r)&&vo(t,r,"true",c[e])}(t),t}function Ks(t){var e;if(e=Eo(t,"v-for")){var n=function(t){var e=t.match(Rs);if(e){var n={};n.for=e[2].trim();var r=e[1].trim().replace(Bs,""),i=r.match(js);return i?(n.alias=r.replace(js,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r,n}}(e);n&&N(t,n)}}function Js(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function Qs(t){var e=t.name.replace(Vs,"");return e||"#"!==t.name[0]&&(e="default"),Fs.test(e)?{name:e.slice(1,-1),dynamic:!0}:{name:'"'.concat(e,'"'),dynamic:!1}}function tu(t){var e=t.match(Gs);if(e){var n={};return e.forEach((function(t){n[t.slice(1)]=!0})),n}}function eu(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n].name]=t[n].value;return e}var nu=/^xmlns:NS\d+/,ru=/^NS\d+:/;function iu(t){return Xs(t.tag,t.attrsList.slice(),t.parent)}var ou,au,su=[rs,is,{preTransformNode:function(t,e){if("input"===t.tag){var n=t.attrsMap;if(!n["v-model"])return;var r=void 0;if((n[":type"]||n["v-bind:type"])&&(r=_o(t,"type")),n.type||r||!n["v-bind"]||(r="(".concat(n["v-bind"],").type")),r){var i=Eo(t,"v-if",!0),o=i?"&&(".concat(i,")"):"",a=null!=Eo(t,"v-else",!0),s=Eo(t,"v-else-if",!0),u=iu(t);Ks(u),yo(u,"type","checkbox"),Zs(u,e),u.processed=!0,u.if="(".concat(r,")==='checkbox'")+o,Js(u,{exp:u.if,block:u});var c=iu(t);Eo(c,"v-for",!0),yo(c,"type","radio"),Zs(c,e),Js(u,{exp:"(".concat(r,")==='radio'")+o,block:c});var l=iu(t);return Eo(l,"v-for",!0),yo(l,":type",r),Zs(l,e),Js(u,{exp:i,block:l}),a?u.else=!0:s&&(u.elseif=s),u}}}}],uu={expectHTML:!0,modules:su,directives:{model:function(t,e,n){var r=e.value,i=e.modifiers,o=t.tag,a=t.attrsMap.type;if(t.component)return ko(t,r,i),!1;if("select"===o)!function(t,e,n){var r=n&&n.number,i='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;'+"return ".concat(r?"_n(val)":"val","})"),o="var $$selectedVal = ".concat(i,";");wo(t,"change",o="".concat(o," ").concat(Mo(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]")),null,!0)}(t,r,i);else if("input"===o&&"checkbox"===a)!function(t,e,n){var r=n&&n.number,i=_o(t,"value")||"null",o=_o(t,"true-value")||"true",a=_o(t,"false-value")||"false";vo(t,"checked","Array.isArray(".concat(e,")")+"?_i(".concat(e,",").concat(i,")>-1")+("true"===o?":(".concat(e,")"):":_q(".concat(e,",").concat(o,")"))),wo(t,"change","var $$a=".concat(e,",")+"$$el=$event.target,"+"$$c=$$el.checked?(".concat(o,"):(").concat(a,");")+"if(Array.isArray($$a)){"+"var $$v=".concat(r?"_n("+i+")":i,",")+"$$i=_i($$a,$$v);"+"if($$el.checked){$$i<0&&(".concat(Mo(e,"$$a.concat([$$v])"),")}")+"else{$$i>-1&&(".concat(Mo(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))"),")}")+"}else{".concat(Mo(e,"$$c"),"}"),null,!0)}(t,r,i);else if("input"===o&&"radio"===a)!function(t,e,n){var r=n&&n.number,i=_o(t,"value")||"null";i=r?"_n(".concat(i,")"):i,vo(t,"checked","_q(".concat(e,",").concat(i,")")),wo(t,"change",Mo(e,i),null,!0)}(t,r,i);else if("input"===o||"textarea"===o)!function(t,e,n){var r=t.attrsMap.type,i=n||{},o=i.lazy,a=i.number,s=i.trim,u=!o&&"range"!==r,c=o?"change":"range"===r?Do:"input",l="$event.target.value";s&&(l="$event.target.value.trim()"),a&&(l="_n(".concat(l,")"));var f=Mo(e,l);u&&(f="if($event.target.composing)return;".concat(f)),vo(t,"value","(".concat(e,")")),wo(t,c,f,null,!0),(s||a)&&wo(t,"blur","$forceUpdate()")}(t,r,i);else if(!V.isReservedTag(o))return ko(t,r,i),!1;return!0},text:function(t,e){e.value&&vo(t,"textContent","_s(".concat(e.value,")"),e)},html:function(t,e){e.value&&vo(t,"innerHTML","_s(".concat(e.value,")"),e)}},isPreTag:function(t){return"pre"===t},isUnaryTag:os,mustUseProp:mi,canBeLeftOpenTag:as,isReservedTag:Ii,getTagNamespace:Pi,staticKeys:function(t){return t.reduce((function(t,e){return t.concat(e.staticKeys||[])}),[]).join(",")}(su)},cu=E((function(t){return m("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(t?","+t:""))}));function lu(t,e){t&&(ou=cu(e.staticKeys||""),au=e.isReservedTag||D,fu(t),du(t,!1))}function fu(t){if(t.static=function(t){return 2!==t.type&&(3===t.type||!(!t.pre&&(t.hasBindings||t.if||t.for||y(t.tag)||!au(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(ou))))}(t),1===t.type){if(!au(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var e=0,n=t.children.length;e<n;e++){var r=t.children[e];fu(r),r.static||(t.static=!1)}if(t.ifConditions)for(e=1,n=t.ifConditions.length;e<n;e++){var i=t.ifConditions[e].block;fu(i),i.static||(t.static=!1)}}}function du(t,e){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=e),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var n=0,r=t.children.length;n<r;n++)du(t.children[n],e||!!t.for);if(t.ifConditions)for(n=1,r=t.ifConditions.length;n<r;n++)du(t.ifConditions[n].block,e)}}var hu=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,pu=/\([^)]*?\);*$/,gu=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,vu={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},mu={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},yu=function(t){return"if(".concat(t,")return null;")},bu={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:yu("$event.target !== $event.currentTarget"),ctrl:yu("!$event.ctrlKey"),shift:yu("!$event.shiftKey"),alt:yu("!$event.altKey"),meta:yu("!$event.metaKey"),left:yu("'button' in $event && $event.button !== 0"),middle:yu("'button' in $event && $event.button !== 1"),right:yu("'button' in $event && $event.button !== 2")};function xu(t,e){var n=e?"nativeOn:":"on:",r="",i="";for(var o in t){var a=wu(t[o]);t[o]&&t[o].dynamic?i+="".concat(o,",").concat(a,","):r+='"'.concat(o,'":').concat(a,",")}return r="{".concat(r.slice(0,-1),"}"),i?n+"_d(".concat(r,",[").concat(i.slice(0,-1),"])"):n+r}function wu(t){if(!t)return"function(){}";if(Array.isArray(t))return"[".concat(t.map((function(t){return wu(t)})).join(","),"]");var e=gu.test(t.value),n=hu.test(t.value),r=gu.test(t.value.replace(pu,""));if(t.modifiers){var i="",o="",a=[],s=function(e){if(bu[e])o+=bu[e],vu[e]&&a.push(e);else if("exact"===e){var n=t.modifiers;o+=yu(["ctrl","shift","alt","meta"].filter((function(t){return!n[t]})).map((function(t){return"$event.".concat(t,"Key")})).join("||"))}else a.push(e)};for(var u in t.modifiers)s(u);a.length&&(i+=function(t){return"if(!$event.type.indexOf('key')&&"+"".concat(t.map(_u).join("&&"),")return null;")}(a)),o&&(i+=o);var c=e?"return ".concat(t.value,".apply(null, arguments)"):n?"return (".concat(t.value,").apply(null, arguments)"):r?"return ".concat(t.value):t.value;return"function($event){".concat(i).concat(c,"}")}return e||n?t.value:"function($event){".concat(r?"return ".concat(t.value):t.value,"}")}function _u(t){var e=parseInt(t,10);if(e)return"$event.keyCode!==".concat(e);var n=vu[t],r=mu[t];return"_k($event.keyCode,"+"".concat(JSON.stringify(t),",")+"".concat(JSON.stringify(n),",")+"$event.key,"+"".concat(JSON.stringify(r))+")"}var Eu={on:function(t,e){t.wrapListeners=function(t){return"_g(".concat(t,",").concat(e.value,")")}},bind:function(t,e){t.wrapData=function(n){return"_b(".concat(n,",'").concat(t.tag,"',").concat(e.value,",").concat(e.modifiers&&e.modifiers.prop?"true":"false").concat(e.modifiers&&e.modifiers.sync?",true":"",")")}},cloak:P},Su=function(t){this.options=t,this.warn=t.warn||po,this.transforms=go(t.modules,"transformCode"),this.dataGenFns=go(t.modules,"genData"),this.directives=N(N({},Eu),t.directives);var e=t.isReservedTag||D;this.maybeComponent=function(t){return!!t.component||!e(t.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Cu(t,e){var n=new Su(e),r=t?"script"===t.tag?"null":ku(t,n):'_c("div")';return{render:"with(this){return ".concat(r,"}"),staticRenderFns:n.staticRenderFns}}function ku(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return Mu(t,e);if(t.once&&!t.onceProcessed)return Ou(t,e);if(t.for&&!t.forProcessed)return Nu(t,e);if(t.if&&!t.ifProcessed)return Tu(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return function(t,e){var n=t.slotName||'"default"',r=Lu(t,e),i="_t(".concat(n).concat(r?",function(){return ".concat(r,"}"):""),o=t.attrs||t.dynamicAttrs?Bu((t.attrs||[]).concat(t.dynamicAttrs||[]).map((function(t){return{name:C(t.name),value:t.value,dynamic:t.dynamic}}))):null,a=t.attrsMap["v-bind"];return!o&&!a||r||(i+=",null"),o&&(i+=",".concat(o)),a&&(i+="".concat(o?"":",null",",").concat(a)),i+")"}(t,e);var n=void 0;if(t.component)n=function(t,e,n){var r=e.inlineTemplate?null:Lu(e,n,!0);return"_c(".concat(t,",").concat(Iu(e,n)).concat(r?",".concat(r):"",")")}(t.component,t,e);else{var r=void 0,i=e.maybeComponent(t);(!t.plain||t.pre&&i)&&(r=Iu(t,e));var o=void 0,a=e.options.bindings;i&&a&&!1!==a.__isScriptSetup&&(o=function(t,e){var n=C(e),r=k(n),i=function(i){return t[e]===i?e:t[n]===i?n:t[r]===i?r:void 0},o=i("setup-const")||i("setup-reactive-const");if(o)return o;var a=i("setup-let")||i("setup-ref")||i("setup-maybe-ref");return a||void 0}(a,t.tag)),o||(o="'".concat(t.tag,"'"));var s=t.inlineTemplate?null:Lu(t,e,!0);n="_c(".concat(o).concat(r?",".concat(r):"").concat(s?",".concat(s):"",")")}for(var u=0;u<e.transforms.length;u++)n=e.transforms[u](t,n);return n}return Lu(t,e)||"void 0"}function Mu(t,e){t.staticProcessed=!0;var n=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return ".concat(ku(t,e),"}")),e.pre=n,"_m(".concat(e.staticRenderFns.length-1).concat(t.staticInFor?",true":"",")")}function Ou(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return Tu(t,e);if(t.staticInFor){for(var n="",r=t.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o(".concat(ku(t,e),",").concat(e.onceId++,",").concat(n,")"):ku(t,e)}return Mu(t,e)}function Tu(t,e,n,r){return t.ifProcessed=!0,Au(t.ifConditions.slice(),e,n,r)}function Au(t,e,n,r){if(!t.length)return r||"_e()";var i=t.shift();return i.exp?"(".concat(i.exp,")?").concat(o(i.block),":").concat(Au(t,e,n,r)):"".concat(o(i.block));function o(t){return n?n(t,e):t.once?Ou(t,e):ku(t,e)}}function Nu(t,e,n,r){var i=t.for,o=t.alias,a=t.iterator1?",".concat(t.iterator1):"",s=t.iterator2?",".concat(t.iterator2):"";return t.forProcessed=!0,"".concat(r||"_l","((").concat(i,"),")+"function(".concat(o).concat(a).concat(s,"){")+"return ".concat((n||ku)(t,e))+"})"}function Iu(t,e){var n="{",r=function(t,e){var n=t.directives;if(n){var r,i,o,a,s="directives:[",u=!1;for(r=0,i=n.length;r<i;r++){o=n[r],a=!0;var c=e.directives[o.name];c&&(a=!!c(t,o,e.warn)),a&&(u=!0,s+='{name:"'.concat(o.name,'",rawName:"').concat(o.rawName,'"').concat(o.value?",value:(".concat(o.value,"),expression:").concat(JSON.stringify(o.value)):"").concat(o.arg?",arg:".concat(o.isDynamicArg?o.arg:'"'.concat(o.arg,'"')):"").concat(o.modifiers?",modifiers:".concat(JSON.stringify(o.modifiers)):"","},"))}return u?s.slice(0,-1)+"]":void 0}}(t,e);r&&(n+=r+","),t.key&&(n+="key:".concat(t.key,",")),t.ref&&(n+="ref:".concat(t.ref,",")),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'.concat(t.tag,'",'));for(var i=0;i<e.dataGenFns.length;i++)n+=e.dataGenFns[i](t);if(t.attrs&&(n+="attrs:".concat(Bu(t.attrs),",")),t.props&&(n+="domProps:".concat(Bu(t.props),",")),t.events&&(n+="".concat(xu(t.events,!1),",")),t.nativeEvents&&(n+="".concat(xu(t.nativeEvents,!0),",")),t.slotTarget&&!t.slotScope&&(n+="slot:".concat(t.slotTarget,",")),t.scopedSlots&&(n+="".concat(function(t,e,n){var r=t.for||Object.keys(e).some((function(t){var n=e[t];return n.slotTargetDynamic||n.if||n.for||Pu(n)})),i=!!t.if;if(!r)for(var o=t.parent;o;){if(o.slotScope&&o.slotScope!==Ys||o.for){r=!0;break}o.if&&(i=!0),o=o.parent}var a=Object.keys(e).map((function(t){return Du(e[t],n)})).join(",");return"scopedSlots:_u([".concat(a,"]").concat(r?",null,true":"").concat(!r&&i?",null,false,".concat(function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(a)):"",")")}(t,t.scopedSlots,e),",")),t.model&&(n+="model:{value:".concat(t.model.value,",callback:").concat(t.model.callback,",expression:").concat(t.model.expression,"},")),t.inlineTemplate){var o=function(t,e){var n=t.children[0];if(n&&1===n.type){var r=Cu(n,e.options);return"inlineTemplate:{render:function(){".concat(r.render,"},staticRenderFns:[").concat(r.staticRenderFns.map((function(t){return"function(){".concat(t,"}")})).join(","),"]}")}}(t,e);o&&(n+="".concat(o,","))}return n=n.replace(/,$/,"")+"}",t.dynamicAttrs&&(n="_b(".concat(n,',"').concat(t.tag,'",').concat(Bu(t.dynamicAttrs),")")),t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function Pu(t){return 1===t.type&&("slot"===t.tag||t.children.some(Pu))}function Du(t,e){var n=t.attrsMap["slot-scope"];if(t.if&&!t.ifProcessed&&!n)return Tu(t,e,Du,"null");if(t.for&&!t.forProcessed)return Nu(t,e,Du);var r=t.slotScope===Ys?"":String(t.slotScope),i="function(".concat(r,"){")+"return ".concat("template"===t.tag?t.if&&n?"(".concat(t.if,")?").concat(Lu(t,e)||"undefined",":undefined"):Lu(t,e)||"undefined":ku(t,e),"}"),o=r?"":",proxy:true";return"{key:".concat(t.slotTarget||'"default"',",fn:").concat(i).concat(o,"}")}function Lu(t,e,n,r,i){var o=t.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag){var s=n?e.maybeComponent(a)?",1":",0":"";return"".concat((r||ku)(a,e)).concat(s)}var u=n?function(t,e){for(var n=0,r=0;r<t.length;r++){var i=t[r];if(1===i.type){if(Ru(i)||i.ifConditions&&i.ifConditions.some((function(t){return Ru(t.block)}))){n=2;break}(e(i)||i.ifConditions&&i.ifConditions.some((function(t){return e(t.block)})))&&(n=1)}}return n}(o,e.maybeComponent):0,c=i||ju;return"[".concat(o.map((function(t){return c(t,e)})).join(","),"]").concat(u?",".concat(u):"")}}function Ru(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function ju(t,e){return 1===t.type?ku(t,e):3===t.type&&t.isComment?function(t){return"_e(".concat(JSON.stringify(t.text),")")}(t):"_v(".concat(2===(n=t).type?n.expression:Fu(JSON.stringify(n.text)),")");var n}function Bu(t){for(var e="",n="",r=0;r<t.length;r++){var i=t[r],o=Fu(i.value);i.dynamic?n+="".concat(i.name,",").concat(o,","):e+='"'.concat(i.name,'":').concat(o,",")}return e="{".concat(e.slice(0,-1),"}"),n?"_d(".concat(e,",[").concat(n.slice(0,-1),"])"):e}function Fu(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function zu(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),P}}function $u(t){var e=Object.create(null);return function(n,r,i){(r=N({},r)).warn,delete r.warn;var o=r.delimiters?String(r.delimiters)+n:n;if(e[o])return e[o];var a=t(n,r),s={},u=[];return s.render=zu(a.render,u),s.staticRenderFns=a.staticRenderFns.map((function(t){return zu(t,u)})),e[o]=s}}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");var Gu,Vu,Uu=(Gu=function(t,e){var n=qs(t.trim(),e);!1!==e.optimize&&lu(n,e);var r=Cu(n,e);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}},function(t){function e(e,n){var r=Object.create(t),i=[],o=[];if(n)for(var a in n.modules&&(r.modules=(t.modules||[]).concat(n.modules)),n.directives&&(r.directives=N(Object.create(t.directives||null),n.directives)),n)"modules"!==a&&"directives"!==a&&(r[a]=n[a]);r.warn=function(t,e,n){(n?o:i).push(t)};var s=Gu(e.trim(),r);return s.errors=i,s.tips=o,s}return{compile:e,compileToFunctions:$u(e)}}),Wu=Uu(uu).compileToFunctions;function Hu(t){return(Vu=Vu||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',Vu.innerHTML.indexOf("&#10;")>0}var Yu=!!q&&Hu(!1),Xu=!!q&&Hu(!0),qu=E((function(t){var e=Ri(t);return e&&e.innerHTML})),Zu=ui.prototype.$mount;ui.prototype.$mount=function(t,e){if((t=t&&Ri(t))===document.body||t===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=qu(r));else{if(!r.nodeType)return this;r=r.innerHTML}else t&&(r=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(r){var i=Wu(r,{outputSourceRange:!1,shouldDecodeNewlines:Yu,shouldDecodeNewlinesForHref:Xu,delimiters:n.delimiters,comments:n.comments},this),o=i.render,a=i.staticRenderFns;n.render=o,n.staticRenderFns=a}}return Zu.call(this,t,e)},ui.compile=Wu},9551:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={install:!0};e.install=function(t,e){i.default.isPlainObject(e)&&o.VXETable.setup(e),G.map((function(e){return e.install(t)}))};var i=$(n(8478)),o=n(5053);Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));var a=n(4085);Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))}));var s=n(6705);Object.keys(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===s[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}}))}));var u=n(2562);Object.keys(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===u[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))}));var c=n(1989);Object.keys(c).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===c[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}}))}));var l=n(8887);Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===l[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))}));var f=n(6405);Object.keys(f).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===f[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}}))}));var d=n(7757);Object.keys(d).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===d[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}}))}));var h=n(5723);Object.keys(h).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===h[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}}))}));var p=n(481);Object.keys(p).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===p[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}}))}));var g=n(8572);Object.keys(g).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===g[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return g[t]}}))}));var v=n(3365);Object.keys(v).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===v[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return v[t]}}))}));var m=n(471);Object.keys(m).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===m[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}}))}));var y=n(5377);Object.keys(y).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===y[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return y[t]}}))}));var b=n(992);Object.keys(b).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===b[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return b[t]}}))}));var x=n(2493);Object.keys(x).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===x[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return x[t]}}))}));var w=n(5004);Object.keys(w).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===w[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return w[t]}}))}));var _=n(2600);Object.keys(_).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===_[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return _[t]}}))}));var E=n(8566);Object.keys(E).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===E[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return E[t]}}))}));var S=n(2161);Object.keys(S).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===S[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return S[t]}}))}));var C=n(389);Object.keys(C).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===C[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return C[t]}}))}));var k=n(7891);Object.keys(k).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===k[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return k[t]}}))}));var M=n(3399);Object.keys(M).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===M[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return M[t]}}))}));var O=n(2566);Object.keys(O).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===O[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return O[t]}}))}));var T=n(719);Object.keys(T).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===T[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return T[t]}}))}));var A=n(3316);Object.keys(A).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===A[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return A[t]}}))}));var N=n(4929);Object.keys(N).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===N[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return N[t]}}))}));var I=n(5419);Object.keys(I).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===I[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return I[t]}}))}));var P=n(7247);Object.keys(P).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===P[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return P[t]}}))}));var D=n(2401);Object.keys(D).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===D[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return D[t]}}))}));var L=n(9797);Object.keys(L).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===L[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return L[t]}}))}));var R=n(3859);Object.keys(R).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===R[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return R[t]}}))}));var j=n(5788);Object.keys(j).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===j[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return j[t]}}))}));var B=n(4344);Object.keys(B).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===B[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return B[t]}}))}));var F=$(n(7667)),z=n(7414);function $(t){return t&&t.__esModule?t:{default:t}}Object.keys(z).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===z[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return z[t]}}))}));var G=[h.Footer,a.Icon,s.Filter,u.Menu,c.Edit,l.Export,f.Keyboard,d.Validator,p.Column,g.Colgroup,v.Grid,m.Toolbar,y.Pager,b.Checkbox,x.CheckboxGroup,w.Radio,_.RadioGroup,E.RadioButton,S.Input,C.Textarea,k.Button,M.Modal,O.Tooltip,T.Form,A.FormItem,N.FormGather,I.Select,P.Optgroup,D.Option,L.Switch,R.List,j.Pulldown,B.Table];o.VXETable.setup({i18n:function(t,e){return i.default.toFormatString(i.default.get(F.default,t),e)}})},7891:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Button=void 0;var r,i=(r=n(2558))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Button=o;var a=o;e.default=a},2558:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=f(n(8478)),o=f(n(5042)),a=f(n(7500)),s=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(6970)),u=f(n(1455)),c=n(8468);function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={name:"VxeButton",mixins:[a.default],props:{type:String,size:{type:String,default:function(){return o.default.button.size||o.default.size}},name:[String,Number],content:String,placement:String,status:String,icon:String,round:Boolean,circle:Boolean,disabled:Boolean,loading:Boolean,destroyOnClose:Boolean,className:String,transfer:{type:Boolean,default:function(){return o.default.button.transfer}}},data:function(){return{inited:!1,showPanel:!1,animatVisible:!1,panelIndex:0,panelStyle:null,panelPlacement:null}},computed:{isText:function(){return"text"===this.type},isFormBtn:function(){return["submit","reset","button"].indexOf(this.type)>-1},btnType:function(){return this.isText?this.type:"button"}},created:function(){c.GlobalEvent.on(this,"mousewheel",this.handleGlobalMousewheelEvent)},beforeDestroy:function(){var t=this.$refs.panel;t&&t.parentNode&&t.parentNode.removeChild(t)},destroyed:function(){c.GlobalEvent.off(this,"mousewheel")},render:function(t){var e,n,r,a,s=this,u=this.$scopedSlots,c=this.$listeners,l=this.className,f=this.inited,h=this.type,p=this.destroyOnClose,g=this.isFormBtn,v=this.status,m=this.btnType,y=this.vSize,b=this.name,x=this.disabled,w=this.loading,_=this.showPanel,E=this.animatVisible,S=this.panelPlacement,C=u.dropdowns;return C?t("div",{class:["vxe-button--dropdown",l,(e={},d(e,"size--".concat(y),y),d(e,"is--active",_),e)]},[t("button",{ref:"xBtn",class:["vxe-button","type--".concat(m),(n={},d(n,"size--".concat(y),y),d(n,"theme--".concat(v),v),d(n,"is--round",this.round),d(n,"is--circle",this.circle),d(n,"is--disabled",x||w),d(n,"is--loading",w),n)],attrs:{name:b,type:g?h:"button",disabled:x||w},on:Object.assign({mouseenter:this.mouseenterTargetEvent,mouseleave:this.mouseleaveEvent},i.default.objectMap(c,(function(t,e){return function(t){return s.$emit(e,{$event:t})}})))},this.renderContent(t).concat([t("i",{class:"vxe-button--dropdown-arrow ".concat(o.default.icon.BUTTON_DROPDOWN)})])),t("div",{ref:"panel",class:["vxe-button--dropdown-panel",(r={},d(r,"size--".concat(y),y),d(r,"animat--leave",E),d(r,"animat--enter",_),r)],attrs:{placement:S},style:this.panelStyle},f?[t("div",{class:"vxe-button--dropdown-wrapper",on:{mousedown:this.mousedownDropdownEvent,click:this.clickDropdownEvent,mouseenter:this.mouseenterEvent,mouseleave:this.mouseleaveEvent}},p&&!_?[]:C.call(this,{},t))]:null)]):t("button",{ref:"xBtn",class:["vxe-button","type--".concat(m),l,(a={},d(a,"size--".concat(y),y),d(a,"theme--".concat(v),v),d(a,"is--round",this.round),d(a,"is--circle",this.circle),d(a,"is--disabled",x||w),d(a,"is--loading",w),a)],attrs:{name:b,type:g?h:"button",disabled:x||w},on:i.default.objectMap(c,(function(t,e){return function(t){return s.$emit(e,{$event:t})}}))},this.renderContent(t))},methods:{renderContent:function(t){var e=this.$scopedSlots,n=this.content,r=this.icon,i=[];return this.loading?i.push(t("i",{class:["vxe-button--loading-icon",o.default.icon.BUTTON_LOADING]})):r&&i.push(t("i",{class:["vxe-button--icon",r]})),e.default?i.push(t("span",{class:"vxe-button--content"},e.default.call(this))):n&&i.push(t("span",{class:"vxe-button--content"},[(0,s.getFuncText)(n)])),i},handleGlobalMousewheelEvent:function(t){this.showPanel&&!u.default.getEventTargetNode(t,this.$refs.panel).flag&&this.closePanel()},updateZindex:function(){this.panelIndex<s.default.getLastZIndex()&&(this.panelIndex=s.default.nextZIndex())},mousedownDropdownEvent:function(t){0===t.button&&t.stopPropagation()},clickDropdownEvent:function(t){var e=this,n=t.currentTarget,r=this.$refs.panel,i=u.default.getEventTargetNode(t,n,"vxe-button"),o=i.flag,a=i.targetElem;o&&(r&&(r.dataset.active="N"),this.showPanel=!1,setTimeout((function(){r&&"Y"===r.dataset.active||(e.animatVisible=!1)}),350),this.$emit("dropdown-click",{name:a.getAttribute("name"),$event:t}))},mouseenterTargetEvent:function(){var t=this,e=this.$refs.panel;e.dataset.active="Y",this.inited||(this.inited=!0,this.transfer&&document.body.appendChild(e)),this.showTime=setTimeout((function(){"Y"===e.dataset.active?t.mouseenterEvent():t.animatVisible=!1}),250)},mouseenterEvent:function(){var t=this,e=this.$refs.panel;e.dataset.active="Y",this.animatVisible=!0,setTimeout((function(){"Y"===e.dataset.active&&(t.showPanel=!0,t.updateZindex(),t.updatePlacement(),setTimeout((function(){t.showPanel&&t.updatePlacement()}),50))}),20)},mouseleaveEvent:function(){this.closePanel()},closePanel:function(){var t=this,e=this.$refs.panel;clearTimeout(this.showTime),e?(e.dataset.active="N",setTimeout((function(){"Y"!==e.dataset.active&&(t.showPanel=!1,setTimeout((function(){"Y"!==e.dataset.active&&(t.animatVisible=!1)}),350))}),100)):(this.animatVisible=!1,this.showPanel=!1)},updatePlacement:function(){var t=this;return this.$nextTick().then((function(){var e=t.$refs,n=t.transfer,r=t.placement,i=t.panelIndex,o=e.xBtn,a=e.panel;if(a&&o){var s=o.offsetHeight,c=o.offsetWidth,l=a.offsetHeight,f=a.offsetWidth,d={zIndex:i},h=u.default.getAbsolutePos(o),p=h.top,g=h.left,v=h.boundingTop,m=h.visibleHeight,y=h.visibleWidth,b="bottom";if(n){var x=g+c-f,w=p+s;"top"===r?(b="top",w=p-l):r||(v+s+l+5>m&&(b="top",w=p-l),w<5&&(b="bottom",w=p+s)),x+f+5>y&&(x-=x+f+5-y),x<5&&(x=5),Object.assign(d,{left:"".concat(x,"px"),right:"auto",top:"".concat(w,"px"),minWidth:"".concat(c,"px")})}else"top"===r?(b="top",d.bottom="".concat(s,"px")):r||v+s+l>m&&v-s-l>5&&(b="top",d.bottom="".concat(s,"px"));return t.panelStyle=d,t.panelPlacement=b,t.$nextTick()}}))},focus:function(){return this.$el.focus(),this.$nextTick()},blur:function(){return this.$el.blur(),this.$nextTick()}}};e.default=h},2493:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CheckboxGroup=void 0;var r,i=(r=n(5897))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.CheckboxGroup=o;var a=o;e.default=a},992:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Checkbox=void 0;var r,i=(r=n(2960))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Checkbox=o;var a=o;e.default=a},2960:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(6970),i=a(n(8478)),o=a(n(5042));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={name:"VxeCheckbox",mixins:[a(n(7500)).default],props:{value:[String,Number,Boolean],label:[String,Number],indeterminate:Boolean,title:[String,Number],content:[String,Number],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},disabled:Boolean,size:{type:String,default:function(){return o.default.checkbox.size||o.default.size}}},inject:{$xecheckboxgroup:{default:null},$xeform:{default:null},$xeformiteminfo:{default:null}},computed:{isGroup:function(){return this.$xecheckboxgroup},isDisabled:function(){return this.disabled||this.isGroup&&this.$xecheckboxgroup.disabled}},render:function(t){var e,n=this.$scopedSlots,o=this.$xecheckboxgroup,a=this.isGroup,u=this.isDisabled,c=this.title,l=this.vSize,f=this.indeterminate,d=this.value,h=this.label,p=this.content,g=this.checkedValue,v={};return c&&(v.title=c),t("label",{class:["vxe-checkbox",(e={},s(e,"size--".concat(l),l),s(e,"is--indeterminate",f),s(e,"is--disabled",u),e)],attrs:v},[t("input",{class:"vxe-checkbox--input",attrs:{type:"checkbox",disabled:u},domProps:{checked:a?i.default.includes(o.value,h):d===g},on:{change:this.changeEvent}}),t("span",{class:"vxe-checkbox--icon"}),t("span",{class:"vxe-checkbox--label"},n.default?n.default.call(this,{}):[(0,r.getFuncText)(p)])])},methods:{changeEvent:function(t){var e=this.$xecheckboxgroup,n=this.isGroup,r=this.isDisabled,i=this.label,o=this.checkedValue,a=this.uncheckedValue;if(!r){var s=t.target.checked,u=s?o:a,c={checked:s,value:u,label:i,$event:t};n?e.handleChecked(c,t):(this.$emit("input",u),this.$emit("change",c),this.$xeform&&this.$xeformiteminfo&&this.$xeform.triggerItemEvent(t,this.$xeformiteminfo.itemConfig.field,u))}}}};e.default=u},5897:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(5042))&&r.__esModule?r:{default:r},o={name:"VxeCheckboxGroup",props:{value:Array,disabled:Boolean,size:{type:String,default:function(){return i.default.checkbox.size||i.default.size}}},inject:{$xeform:{default:null},$xeformiteminfo:{default:null}},provide:function(){return{$xecheckboxgroup:this}},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize}},render:function(t){var e=this.$scopedSlots;return t("div",{class:"vxe-checkbox-group"},e.default?e.default.call(this,{}):[])},methods:{handleChecked:function(t,e){var n=t.checked,r=t.label,i=this.value||[],o=i.indexOf(r);n?-1===o&&i.push(r):i.splice(o,1),this.$emit("input",i),this.$emit("change",Object.assign({checklist:i},t)),this.$xeform&&this.$xeformiteminfo&&this.$xeform.triggerItemEvent(e,this.$xeformiteminfo.itemConfig.field,i)}}};e.default=o},8572:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Colgroup=void 0;var r,i=(r=n(6913))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default),t.component("VxeTableColgroup",i.default)}});e.Colgroup=o;var a=o;e.default=a},481:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Column=void 0;var r,i=(r=n(5619))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default),t.component("VxeTableColumn",i.default)}});e.Column=o;var a=o;e.default=a},1989:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Edit=void 0;var r=a(n(4344)),i=a(n(8117)),o=a(n(5053));function a(t){return t&&t.__esModule?t:{default:t}}var s={install:function(){o.default.reg("edit"),r.default.mixins.push(i.default)}};e.Edit=s;var u=s;e.default=u},8117:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=d(n(8478)),o=d(n(5053)),a=f(n(6970)),s=n(9211),u=f(n(1455)),c=n(5981);function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function f(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}function d(t){return t&&t.__esModule?t:{default:t}}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e,n){var r=t.tableFullTreeData,o=t.afterFullData,a=t.fullDataRowIdData,u=t.fullAllDataRowIdData,c=t.treeOpts,l=c.rowField,f=c.parentField,d=c.children,h=c.mapChildren,p=n?"push":"unshift";e.forEach((function(e){var n=e[f],c=(0,s.getRowid)(t,e),g=n?i.default.findTree(r,(function(t){return n===t[l]}),{children:h}):null;if(g){var v=g.item,m=u[(0,s.getRowid)(t,v)],y=m?m.level:0,b=v[d];i.default.isArray(b)||(b=v[d]=[]),b[p](e);var x={row:e,rowid:c,seq:-1,index:-1,_index:-1,$index:-1,items:b,parent:parent,level:y+1};a[c]=x,u[c]=x}else{o[p](e),r[p](e);var w={row:e,rowid:c,seq:-1,index:-1,_index:-1,$index:-1,items:r,parent:null,level:0};a[c]=w,u[c]=w}}))}var b={methods:{_insert:function(t){return this.insertAt(t)},_insertAt:function(t,e){var n,r=this,o=this.tableFullTreeData,u=this.mergeList,l=this.afterFullData,f=this.editStore,d=this.tableFullData,h=this.treeConfig,p=this.fullDataRowIdData,g=this.fullAllDataRowIdData,m=this.treeOpts,b=m.transform,x=m.rowField,w=m.mapChildren;i.default.isArray(t)||(t=[t]);var _=t.map((function(t){return r.defineField(Object.assign({},t))}));if(e)if(-1===e)h&&b?y(this,_,!0):(l.push.apply(l,v(_)),d.push.apply(d,v(_)),u.forEach((function(t){var e=t.row,n=t.rowspan;e+n>l.length&&(t.rowspan=n+_.length)})));else if(h&&b){var E=i.default.findTree(o,(function(t){return e[x]===t[x]}),{children:w});if(E){var S=E.parent,C=E.items,k=g[(0,s.getRowid)(this,S)],M=k?k.level:0;_.forEach((function(t,e){var n=(0,s.getRowid)(r,t);S&&(t[m.parentField]=S[x]),C.splice(E.index+e,0,t);var i={row:t,rowid:n,seq:-1,index:-1,_index:-1,$index:-1,items:C,parent:S,level:M+1};p[n]=i,g[n]=i}))}else y(this,_,!0)}else{if(h)throw new Error(a.default.getLog("vxe.error.noTree",["insert"]));var O=-1;if(i.default.isNumber(e)?e<l.length&&(O=e):O=l.indexOf(e),-1===O)throw new Error((0,c.errLog)("vxe.error.unableInsert"));l.splice.apply(l,[O,0].concat(v(_))),d.splice.apply(d,[d.indexOf(e),0].concat(v(_))),u.forEach((function(t){var e=t.row,n=t.rowspan;e>O?t.row=e+_.length:e+n>O&&(t.rowspan=n+_.length)}))}else h&&b?y(this,_,!1):(l.unshift.apply(l,v(_)),d.unshift.apply(d,v(_)),u.forEach((function(t){var e=t.row;e>0&&(t.row=e+_.length)})));return(n=f.insertList).unshift.apply(n,v(_)),this.handleTableData(h&&b),h&&b||this.updateAfterDataIndex(),this.updateFooter(),this.cacheRowMap(),this.checkSelectionStatus(),this.scrollYLoad&&this.updateScrollYSpace(),this.$nextTick().then((function(){return r.updateCellAreas(),r.recalculate()})).then((function(){return{row:_.length?_[_.length-1]:null,rows:_}}))},_remove:function(t){var e=this,n=this.afterFullData,r=this.tableFullData,o=this.tableFullTreeData,a=this.treeConfig,u=this.mergeList,c=this.editStore,l=this.checkboxOpts,f=this.selection,d=this.isInsertByRow,h=this.treeOpts,p=h.transform,g=c.actived,v=c.removeList,m=c.insertList,y=l.checkField,b=[];return t?i.default.isArray(t)||(t=[t]):t=r,t.forEach((function(t){d(t)||v.push(t)})),y||t.forEach((function(t){var e=f.indexOf(t);e>-1&&f.splice(e,1)})),r===t?(t=b=r.slice(0),this.tableFullData=[],this.afterFullData=[],this.clearMergeCells()):a&&p?t.forEach((function(t){var r=(0,s.getRowid)(e,t),a=i.default.findTree(o,(function(t){return r===(0,s.getRowid)(e,t)}),h);if(a){var u=a.items.splice(a.index,1);b.push(u[0])}var c=n.indexOf(t);c>-1&&n.splice(c,1)})):t.forEach((function(t){var e=r.indexOf(t);if(e>-1){var i=r.splice(e,1);b.push(i[0])}var o=n.indexOf(t);o>-1&&(u.forEach((function(t){var e=t.row,n=t.rowspan;e>o?t.row=e-1:e+n>o&&(t.rowspan=n-1)})),n.splice(o,1))})),g.row&&t.indexOf(g.row)>-1&&this.clearActived(),t.forEach((function(t){var e=m.indexOf(t);e>-1&&m.splice(e,1)})),this.handleTableData(a&&p),a&&p||this.updateAfterDataIndex(),this.updateFooter(),this.cacheRowMap(),this.checkSelectionStatus(),this.scrollYLoad&&this.updateScrollYSpace(),this.$nextTick().then((function(){return e.updateCellAreas(),e.recalculate()})).then((function(){return{row:b.length?b[b.length-1]:null,rows:b}}))},_removeCheckboxRow:function(){var t=this;return this.remove(this.getCheckboxRecords()).then((function(e){return t.clearCheckboxRow(),e}))},_removeRadioRow:function(){var t=this,e=this.getRadioRecord();return this.remove(e||[]).then((function(e){return t.clearRadioRow(),e}))},_removeCurrentRow:function(){var t=this,e=this.getCurrentRecord();return this.remove(e||[]).then((function(e){return t.clearCurrentRow(),e}))},_getRecordset:function(){return{insertRecords:this.getInsertRecords(),removeRecords:this.getRemoveRecords(),updateRecords:this.getUpdateRecords()}},_getInsertRecords:function(){var t=this,e=this.treeConfig,n=this.tableFullTreeData,r=this.tableFullData,o=this.treeOpts,a=this.editStore.insertList,u=[];return a.length&&(e&&o.transform?a.forEach((function(e){var r=(0,s.getRowid)(t,e);i.default.findTree(n,(function(e){return r===(0,s.getRowid)(t,e)}),o)&&u.push(e)})):a.forEach((function(t){r.indexOf(t)>-1&&u.push(t)}))),u},_getRemoveRecords:function(){return this.editStore.removeList},_getUpdateRecords:function(){var t=this.keepSource,e=this.tableFullData,n=this.isUpdateByRow,r=this.treeConfig,o=this.treeOpts,a=this.editStore;if(t){var s=a.actived,u=s.row,c=s.column;return(u||c)&&this._syncActivedCell(),r?i.default.filterTree(e,(function(t){return n(t)}),o):e.filter((function(t){return n(t)}))}return[]},handleActived:function(t,e){var n=this,r=this.editStore,i=this.editOpts,o=this.tableColumn,s=this.editConfig,u=this.mouseConfig,c=i.mode,l=i.activeMethod,f=r.actived,d=t.row,h=t.column,g=h.editRender,v=t.cell=t.cell||this.getCell(d,h);if((0,a.isEnableConf)(s)&&(0,a.isEnableConf)(g)&&v){if(f.row!==d||"cell"===c&&f.column!==h){var m="edit-disabled";l&&!l(p(p({},t),{},{$table:this}))||(u&&(this.clearSelected(e),this.clearCellAreas(e),this.clearCopyCellArea(e)),this.closeTooltip(),f.column&&this.clearActived(e),m="edit-actived",h.renderHeight=v.offsetHeight,f.args=t,f.row=d,f.column=h,"row"===c?o.forEach((function(t){return n._getColumnModel(d,t)})):this._getColumnModel(d,h),this.$nextTick((function(){n.handleFocus(t,e)}))),this.emitEvent(m,{row:d,rowIndex:this.getRowIndex(d),$rowIndex:this.getVMRowIndex(d),column:h,columnIndex:this.getColumnIndex(h),$columnIndex:this.getVMColumnIndex(h)},e)}else{var y=f.column;if(u&&(this.clearSelected(e),this.clearCellAreas(e),this.clearCopyCellArea(e)),y!==h){var b=y.model;b.update&&a.default.setCellValue(d,y,b.value),this.clearValidate()}h.renderHeight=v.offsetHeight,f.args=t,f.column=h,setTimeout((function(){n.handleFocus(t,e)}))}this.focus()}return this.$nextTick()},_getColumnModel:function(t,e){var n=e.model;e.editRender&&(n.value=a.default.getCellValue(t,e),n.update=!1)},_setColumnModel:function(t,e){var n=e.model;e.editRender&&n.update&&(a.default.setCellValue(t,e,n.value),n.update=!1,n.value=null)},_syncActivedCell:function(){var t=this,e=this.tableColumn,n=this.editStore,r=this.editOpts,i=n.actived,o=i.row,a=i.column;(o||a)&&("row"===r.mode?e.forEach((function(e){return t._setColumnModel(o,e)})):this._setColumnModel(o,a))},_clearActived:function(t){return this.clearEdit(t)},_clearEdit:function(t){var e=this.editStore.actived,n=e.row,r=e.column;return(n||r)&&(this._syncActivedCell(),e.args=null,e.row=null,e.column=null,this.updateFooter(),this.emitEvent("edit-closed",{row:n,rowIndex:this.getRowIndex(n),$rowIndex:this.getVMRowIndex(n),column:r,columnIndex:this.getColumnIndex(r),$columnIndex:this.getVMColumnIndex(r)},t)),o.default._valid?this.clearValidate():this.$nextTick()},_getActiveRecord:function(){return this.getEditRecord()},_getEditRecord:function(){var t=this.$el,e=this.editStore,n=this.afterFullData,r=e.actived,i=r.args,o=r.row;return i&&n.indexOf(o)>-1&&t.querySelectorAll(".vxe-body--column.col--actived").length?Object.assign({},i):null},_isActiveByRow:function(t){return this.isEditByRow(t)},_isEditByRow:function(t){return this.editStore.actived.row===t},handleFocus:function(t){var e=t.row,n=t.column,r=t.cell,i=n.editRender;if((0,a.isEnableConf)(i)){var s,c=o.default.renderer.get(i.name),l=i.autofocus,f=i.autoselect;if(l&&(s=r.querySelector(l)),!s&&c&&c.autofocus&&(s=r.querySelector(c.autofocus)),s){if(s.focus(),f)s.select();else if(u.browse.msie){var d=s.createTextRange();d.collapse(!1),d.select()}}else this.scrollToRow(e,n)}},_setActiveRow:function(t){return this.setEditRow(t)},_setEditRow:function(t){return this.setEditCell(t,i.default.find(this.visibleColumn,(function(t){return(0,a.isEnableConf)(t.editRender)})))},_setActiveCell:function(t){return this.setEditCell(t)},_setEditCell:function(t,e){var n=this,r=this.editConfig,o=i.default.isString(e)?this.getColumnByField(e):e;return t&&o&&(0,a.isEnableConf)(r)&&(0,a.isEnableConf)(o.editRender)?this.scrollToRow(t,!0).then((function(){var e=n.getCell(t,o);e&&(n.handleActived({row:t,rowIndex:n.getRowIndex(t),column:o,columnIndex:n.getColumnIndex(o),cell:e,$table:n}),n.lastCallTime=Date.now())})):this.$nextTick()},_setSelectCell:function(t,e){var n=this.tableData,r=this.editOpts,o=this.visibleColumn,a=i.default.isString(e)?this.getColumnByField(e):e;if(t&&a&&"manual"!==r.trigger){var s=n.indexOf(t);if(s>-1){var u=this.getCell(t,a),c={row:t,rowIndex:s,column:a,columnIndex:o.indexOf(a),cell:u};this.handleSelected(c,{})}}return this.$nextTick()},handleSelected:function(t,e){var n=this,r=this.mouseConfig,i=this.mouseOpts,o=this.editOpts,a=this.editStore,s=a.actived,u=a.selected,c=t.row,l=t.column,f=r&&i.selected;return!f||u.row===c&&u.column===l||(s.row!==c||"cell"===o.mode&&s.column!==l)&&(n.clearActived(e),n.clearSelected(e),n.clearCellAreas(e),n.clearCopyCellArea(e),u.args=t,u.row=c,u.column=l,f&&n.addColSdCls(),n.focus(),e&&n.emitEvent("cell-selected",t,e)),n.$nextTick()},_getSelectedCell:function(){var t=this.editStore.selected,e=t.args,n=t.column;return e&&n?Object.assign({},e):null},_clearSelected:function(){var t=this.editStore.selected;return t.row=null,t.column=null,this.reColTitleSdCls(),this.reColSdCls(),this.$nextTick()},reColTitleSdCls:function(){var t=this.elemStore["main-header-list"];t&&i.default.arrayEach(t.querySelectorAll(".col--title-selected"),(function(t){return u.default.removeClass(t,"col--title-selected")}))},reColSdCls:function(){var t=this.$el.querySelector(".col--selected");t&&u.default.removeClass(t,"col--selected")},addColSdCls:function(){var t=this.editStore.selected,e=t.row,n=t.column;if(this.reColSdCls(),e&&n){var r=this.getCell(e,n);r&&u.default.addClass(r,"col--selected")}}}};e.default=b},8887:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Export=void 0,e.print=f,Object.defineProperty(e,"readFile",{enumerable:!0,get:function(){return u.readLocalFile}}),Object.defineProperty(e,"saveFile",{enumerable:!0,get:function(){return u.saveLocalFile}});var i=l(n(4344)),o=l(n(5053)),a=l(n(4975)),s=l(n(6585)),u=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=c(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(9233));function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(c=function(t){return t?n:e})(t)}function l(t){return t&&t.__esModule?t:{default:t}}function f(t){var e=Object.assign({},t,{type:"html"});(0,u.handlePrint)(null,e,e.content)}var d={ExportPanel:a.default,ImportPanel:s.default,install:function(t){o.default.reg("export"),o.default.saveFile=u.saveLocalFile,o.default.readFile=u.readLocalFile,o.default.print=f,o.default.setup({export:{types:{csv:0,html:0,xml:0,txt:0}}}),i.default.mixins.push(u.default),t.component(a.default.name,a.default),t.component(s.default.name,s.default)}};e.Export=d;var h=d;e.default=h},4975:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=f(n(8478)),i=f(n(5042)),o=f(n(5956)),a=f(n(9174)),s=f(n(2960)),u=f(n(8813)),c=f(n(12)),l=f(n(6970));function f(t){return t&&t.__esModule?t:{default:t}}var d={name:"VxeExportPanel",props:{defaultOptions:Object,storeData:Object},components:{VxeModal:o.default,VxeInput:a.default,VxeCheckbox:s.default,VxeSelect:u.default,VxeOption:c.default},data:function(){return{isAll:!1,isIndeterminate:!1,loading:!1}},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize},checkedAll:function(){return this.storeData.columns.every((function(t){return t.checked}))},showSheet:function(){return["html","xml","xlsx","pdf"].indexOf(this.defaultOptions.type)>-1},supportMerge:function(){var t=this.storeData,e=this.defaultOptions;return!e.original&&"current"===e.mode&&(t.isPrint||["html","xlsx"].indexOf(e.type)>-1)},supportStyle:function(){var t=this.defaultOptions;return!t.original&&["xlsx"].indexOf(t.type)>-1}},render:function(t){var e=this,n=this._e,o=this.checkedAll,a=this.isAll,s=this.isIndeterminate,u=this.showSheet,c=this.supportMerge,f=this.supportStyle,d=this.defaultOptions,h=this.storeData,p=h.hasTree,g=h.hasMerge,v=h.isPrint,m=h.hasColgroup,y=d.isHeader,b=[];return r.default.eachTree(h.columns,(function(n){var r=l.default.formatText(n.getTitle(),1),i=n.children&&n.children.length;b.push(t("li",{class:["vxe-export--panel-column-option","level--".concat(n.level),{"is--group":i,"is--checked":n.checked,"is--indeterminate":n.halfChecked,"is--disabled":n.disabled}],attrs:{title:r},on:{click:function(){n.disabled||e.changeOption(n)}}},[t("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"}),t("span",{class:"vxe-checkbox--label"},r)]))})),t("vxe-modal",{res:"modal",props:{value:h.visible,title:i.default.i18n(v?"vxe.export.printTitle":"vxe.export.expTitle"),width:660,mask:!0,lockView:!0,showFooter:!1,escClosable:!0,maskClosable:!0,loading:this.loading},on:{input:function(t){h.visible=t},show:this.showEvent}},[t("div",{class:"vxe-export--panel"},[t("table",{attrs:{cellspacing:0,cellpadding:0,border:0}},[t("tbody",[[v?n():t("tr",[t("td",i.default.i18n("vxe.export.expName")),t("td",[t("vxe-input",{ref:"filename",props:{value:d.filename,type:"text",clearable:!0,placeholder:i.default.i18n("vxe.export.expNamePlaceholder")},on:{modelValue:function(t){d.filename=t}}})])]),v?n():t("tr",[t("td",i.default.i18n("vxe.export.expType")),t("td",[t("vxe-select",{props:{value:d.type},on:{input:function(t){d.type=t}}},h.typeList.map((function(e){return t("vxe-option",{props:{value:e.value,label:i.default.i18n(e.label)}})})))])]),v||u?t("tr",[t("td",i.default.i18n("vxe.export.expSheetName")),t("td",[t("vxe-input",{ref:"sheetname",props:{value:d.sheetName,type:"text",clearable:!0,placeholder:i.default.i18n("vxe.export.expSheetNamePlaceholder")},on:{modelValue:function(t){d.sheetName=t}}})])]):n(),t("tr",[t("td",i.default.i18n("vxe.export.expMode")),t("td",[t("vxe-select",{props:{value:d.mode},on:{input:function(t){d.mode=t}}},h.modeList.map((function(e){return t("vxe-option",{props:{value:e.value,label:i.default.i18n(e.label)}})})))])]),t("tr",[t("td",[i.default.i18n("vxe.export.expColumn")]),t("td",[t("div",{class:"vxe-export--panel-column"},[t("ul",{class:"vxe-export--panel-column-header"},[t("li",{class:["vxe-export--panel-column-option",{"is--checked":a,"is--indeterminate":s}],attrs:{title:i.default.i18n("vxe.table.allTitle")},on:{click:this.allColumnEvent}},[t("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"}),t("span",{class:"vxe-checkbox--label"},i.default.i18n("vxe.export.expCurrentColumn"))])]),t("ul",{class:"vxe-export--panel-column-body"},b)])])]),t("tr",[t("td",i.default.i18n("vxe.export.expOpts")),t("td",[t("div",{class:"vxe-export--panel-option-row"},[t("vxe-checkbox",{props:{value:y,title:i.default.i18n("vxe.export.expHeaderTitle"),content:i.default.i18n("vxe.export.expOptHeader")},on:{input:function(t){d.isHeader=t}}}),t("vxe-checkbox",{props:{value:d.isFooter,disabled:!h.hasFooter,title:i.default.i18n("vxe.export.expFooterTitle"),content:i.default.i18n("vxe.export.expOptFooter")},on:{input:function(t){d.isFooter=t}}}),t("vxe-checkbox",{props:{value:d.original,title:i.default.i18n("vxe.export.expOriginalTitle"),content:i.default.i18n("vxe.export.expOptOriginal")},on:{input:function(t){d.original=t}}})]),t("div",{class:"vxe-export--panel-option-row"},[t("vxe-checkbox",{props:{value:!!(y&&m&&c)&&d.isColgroup,disabled:!y||!m||!c,title:i.default.i18n("vxe.export.expColgroupTitle"),content:i.default.i18n("vxe.export.expOptColgroup")},on:{input:function(t){d.isColgroup=t}}}),t("vxe-checkbox",{props:{value:!!(g&&c&&o)&&d.isMerge,disabled:!g||!c||!o,title:i.default.i18n("vxe.export.expMergeTitle"),content:i.default.i18n("vxe.export.expOptMerge")},on:{input:function(t){d.isMerge=t}}}),v?n():t("vxe-checkbox",{props:{value:!!f&&d.useStyle,disabled:!f,title:i.default.i18n("vxe.export.expUseStyleTitle"),content:i.default.i18n("vxe.export.expOptUseStyle")},on:{input:function(t){d.useStyle=t}}}),t("vxe-checkbox",{props:{value:!!p&&d.isAllExpand,disabled:!p,title:i.default.i18n("vxe.export.expAllExpandTitle"),content:i.default.i18n("vxe.export.expOptAllExpand")},on:{input:function(t){d.isAllExpand=t}}})])])])]])]),t("div",{class:"vxe-export--panel-btns"},[t("vxe-button",{props:{content:i.default.i18n("vxe.export.expCancel")},on:{click:this.cancelEvent}}),t("vxe-button",{ref:"confirmBtn",props:{status:"primary",content:i.default.i18n(v?"vxe.export.expPrint":"vxe.export.expConfirm")},on:{click:this.confirmEvent}})])])])},methods:{changeOption:function(t){var e=!t.checked;r.default.eachTree([t],(function(t){t.checked=e,t.halfChecked=!1})),this.handleOptionCheck(t),this.checkStatus()},handleOptionCheck:function(t){var e=r.default.findTree(this.storeData.columns,(function(e){return e===t}));if(e&&e.parent){var n=e.parent;n.children&&n.children.length&&(n.checked=n.children.every((function(t){return t.checked})),n.halfChecked=!n.checked&&n.children.some((function(t){return t.checked||t.halfChecked})),this.handleOptionCheck(n))}},checkStatus:function(){var t=this.storeData.columns;this.isAll=t.every((function(t){return t.disabled||t.checked})),this.isIndeterminate=!this.isAll&&t.some((function(t){return!t.disabled&&(t.checked||t.halfChecked)}))},allColumnEvent:function(){var t=!this.isAll;r.default.eachTree(this.storeData.columns,(function(e){e.disabled||(e.checked=t,e.halfChecked=!1)})),this.isAll=t,this.checkStatus()},showEvent:function(){var t=this;this.$nextTick((function(){var e=t.$refs,n=e.filename||e.sheetname||e.confirmBtn;n&&n.focus()})),this.checkStatus()},getExportOption:function(){var t=this.checkedAll,e=this.storeData,n=this.defaultOptions,i=this.supportMerge,o=e.hasMerge,a=e.columns,s=r.default.searchTree(a,(function(t){return t.checked}),{children:"children",mapChildren:"childNodes",original:!0});return Object.assign({},n,{columns:s,isMerge:!!(o&&i&&t)&&n.isMerge})},cancelEvent:function(){this.storeData.visible=!1},confirmEvent:function(t){this.storeData.isPrint?this.printEvent(t):this.exportEvent(t)},printEvent:function(){var t=this.$parent;this.storeData.visible=!1,t.print(Object.assign({},t.printOpts,this.getExportOption()))},exportEvent:function(){var t=this,e=this.$parent;this.loading=!0,e.exportData(Object.assign({},e.exportOpts,this.getExportOption())).then((function(){t.loading=!1,t.storeData.visible=!1})).catch((function(){t.loading=!1}))}}};e.default=d},6585:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(8478)),i=u(n(5042)),o=u(n(5956)),a=u(n(8220)),s=u(n(6970));function u(t){return t&&t.__esModule?t:{default:t}}var c={name:"VxeImportPanel",props:{defaultOptions:Object,storeData:Object},components:{VxeModal:o.default,VxeRadio:a.default},data:function(){return{loading:!1}},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize},selectName:function(){return"".concat(this.storeData.filename,".").concat(this.storeData.type)},hasFile:function(){return this.storeData.file&&this.storeData.type},parseTypeLabel:function(){var t=this.storeData,e=t.type,n=t.typeList;if(e){var o=r.default.find(n,(function(t){return e===t.value}));return o?i.default.i18n(o.label):"*.*"}return"*.".concat(n.map((function(t){return t.value})).join(", *."))}},render:function(t){var e=this.hasFile,n=this.parseTypeLabel,r=this.defaultOptions,o=this.storeData,a=this.selectName;return t("vxe-modal",{res:"modal",props:{value:o.visible,title:i.default.i18n("vxe.import.impTitle"),width:440,mask:!0,lockView:!0,showFooter:!1,escClosable:!0,maskClosable:!0,loading:this.loading},on:{input:function(t){o.visible=t},show:this.showEvent}},[t("div",{class:"vxe-export--panel"},[t("table",{attrs:{cellspacing:0,cellpadding:0,border:0}},[t("tbody",[t("tr",[t("td",i.default.i18n("vxe.import.impFile")),t("td",[e?t("div",{class:"vxe-import-selected--file",attrs:{title:a}},[t("span",a),t("i",{class:i.default.icon.INPUT_CLEAR,on:{click:this.clearFileEvent}})]):t("button",{ref:"fileBtn",class:"vxe-import-select--file",attrs:{type:"button"},on:{click:this.selectFileEvent}},i.default.i18n("vxe.import.impSelect"))])]),t("tr",[t("td",i.default.i18n("vxe.import.impType")),t("td",n)]),t("tr",[t("td",i.default.i18n("vxe.import.impOpts")),t("td",[t("vxe-radio-group",{props:{value:r.mode},on:{input:function(t){r.mode=t}}},o.modeList.map((function(e){return t("vxe-radio",{props:{label:e.value}},i.default.i18n(e.label))})))])])])]),t("div",{class:"vxe-export--panel-btns"},[t("vxe-button",{on:{click:this.cancelEvent}},i.default.i18n("vxe.import.impCancel")),t("vxe-button",{props:{status:"primary",disabled:!e},on:{click:this.importEvent}},i.default.i18n("vxe.import.impConfirm"))])])])},methods:{clearFileEvent:function(){Object.assign(this.storeData,{filename:"",sheetName:"",type:""})},selectFileEvent:function(){var t=this;this.$parent.readFile(this.defaultOptions).then((function(e){var n=e.file;Object.assign(t.storeData,s.default.parseFile(n),{file:n})})).catch((function(t){return t}))},showEvent:function(){var t=this;this.$nextTick((function(){var e=t.$refs.fileBtn;e&&e.focus()}))},cancelEvent:function(){this.storeData.visible=!1},importEvent:function(){var t=this,e=this.$parent;this.loading=!0,e.importByFile(this.storeData.file,Object.assign({},e.importOpts,this.defaultOptions)).then((function(){t.loading=!1,t.storeData.visible=!1})).catch((function(){t.loading=!1}))}}};e.default=c},9233:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.handlePrint=Y,e.readLocalFile=V,e.saveLocalFile=D;var r=l(n(8478)),i=l(n(5042)),o=l(n(5053)),a=l(n(6970)),s=n(9211),u=n(1455),c=n(5981);function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var d,h,p,g,v=a.default.formatText,m='body{margin:0;color:#333333;font-size:14px;font-family:"Microsoft YaHei",,"MicrosoftJhengHei",,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type="checkbox"]{margin:0}.vxe-table input[type="checkbox"],.vxe-table input[type="radio"],.vxe-table input[type="checkbox"]+span,.vxe-table input[type="radio"]+span{vertical-align:middle;padding-left:0.4em}',y="\ufeff",b="\r\n";function x(){var t=document.createElement("iframe");return t.className="vxe-table--print-frame",t}function w(t,e){return window.Blob?new Blob([t],{type:"text/".concat(e.type,";charset=utf-8;")}):null}function _(t,e,n,r,i){var o=t.seqOpts.seqMethod||r.seqMethod;return o?o({row:e,rowIndex:t.getRowIndex(e),$rowIndex:n,column:r,columnIndex:t.getColumnIndex(r),$columnIndex:i}):t.getRowSeq(e)}function E(t){return t.property||["seq","checkbox","radio"].indexOf(t.type)>-1}function S(t){return!0===t?"full":t||"default"}function C(t){return r.default.isBoolean(t)?t?"TRUE":"FALSE":t}function k(t){return"TRUE"===t||"true"===t||!0===t}function M(t,e){return(t.original?e.property:e.getTitle())||""}function O(t,e,n,i){var a=i.editRender||i.cellRender,s=i.footerExportMethod;if(!s&&a&&a.name){var u=o.default.renderer.get(a.name);u&&(s=u.footerExportMethod||u.footerCellExportMethod)}var c=t.getVTColumnIndex(i);return s?s({$table:t,items:n,itemIndex:c,_columnIndex:c,column:i,options:e}):r.default.toValueString(n[c])}function T(t,e){var n=t.footerFilterMethod;return n?e.filter((function(t,e){return n({items:t,$rowIndex:e})})):e}function A(t){return/[",\s\n]/.test(t)?'"'.concat(t.replace(/"/g,'""'),'"'):t}function N(t,e,n,i){var o=e[n],a=r.default.isUndefined(o)||r.default.isNull(o)?i:o,s="title"===a||!0===a||"tooltip"===a||"ellipsis"===a;return!t.scrollXLoad&&!t.scrollYLoad||s||(s=!0),s}function I(t,e){var n=t.style;return["<!DOCTYPE html><html>","<head>",'<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">',"<title>".concat(t.sheetName,"</title>"),"<style>".concat(m,"</style>"),n?"<style>".concat(n,"</style>"):"","</head>","<body>".concat(e,"</body>"),"</html>"].join("")}function P(t,e,n,i){if(n.length)switch(e.type){case"csv":return function(t,e,n,r){var i=y;if(e.isHeader&&(i+=n.map((function(t){return A(M(e,t))})).join(",")+b),r.forEach((function(t){i+=n.map((function(e){return A(function(t,e){if(e){if("seq"===t.type)return"\t".concat(e);switch(t.cellType){case"string":if(!isNaN(e))return"\t".concat(e);break;case"number":break;default:if(e.length>=12&&!isNaN(e))return"\t".concat(e)}}return e}(e,t[e.id]))})).join(",")+b})),e.isFooter){var o=t.footerTableData;T(e,o).forEach((function(r){i+=n.map((function(n){return A(O(t,e,r,n))})).join(",")+b}))}return i}(t,e,n,i);case"txt":return function(t,e,n,r){var i="";if(e.isHeader&&(i+=n.map((function(t){return A(M(e,t))})).join("\t")+b),r.forEach((function(t){i+=n.map((function(e){return A(t[e.id])})).join("\t")+b})),e.isFooter){var o=t.footerTableData;T(e,o).forEach((function(r){i+=n.map((function(n){return A(O(t,e,r,n))})).join(",")+b}))}return i}(t,e,n,i);case"html":return function(t,e,n,i){var o=t.id,a=t.border,u=t.treeConfig,c=t.treeOpts,l=t.isAllSelected,f=t.isIndeterminate,d=t.headerAlign,h=t.align,p=t.footerAlign,g=t.showOverflow,m=t.showHeaderOverflow,y=t.mergeList,b=e.print,x=e.isHeader,w=e.isFooter,_=e.isColgroup,E=e.isMerge,C=e.colgroups,A=e.original,P="check-all",D=["vxe-table","border--".concat(S(a)),b?"is--print":"",x?"is--header":""].filter((function(t){return t})),L=['<table class="'.concat(D.join(" "),'" border="0" cellspacing="0" cellpadding="0">'),"<colgroup>".concat(n.map((function(t){return'<col style="width:'.concat(t.renderWidth,'px">')})).join(""),"</colgroup>")];if(x&&(L.push("<thead>"),_&&!A?C.forEach((function(n){L.push("<tr>".concat(n.map((function(n){var i=n.headerAlign||n.align||d||h,o=N(t,n,"showHeaderOverflow",m)?["col--ellipsis"]:[],a=M(e,n),s=0,u=0;r.default.eachTree([n],(function(t){t.childNodes&&n.childNodes.length||u++,s+=t.renderWidth}),{children:"childNodes"});var c=s-u;return i&&o.push("col--".concat(i)),"checkbox"===n.type?'<th class="'.concat(o.join(" "),'" colspan="').concat(n._colSpan,'" rowspan="').concat(n._rowSpan,'"><div ').concat(b?"":'style="width: '.concat(c,'px"'),'><input type="checkbox" class="').concat(P,'" ').concat(l?"checked":"","><span>").concat(a,"</span></div></th>"):'<th class="'.concat(o.join(" "),'" colspan="').concat(n._colSpan,'" rowspan="').concat(n._rowSpan,'" title="').concat(a,'"><div ').concat(b?"":'style="width: '.concat(c,'px"'),"><span>").concat(v(a,!0),"</span></div></th>")})).join(""),"</tr>"))})):L.push("<tr>".concat(n.map((function(n){var r=n.headerAlign||n.align||d||h,i=N(t,n,"showHeaderOverflow",m)?["col--ellipsis"]:[],o=M(e,n);return r&&i.push("col--".concat(r)),"checkbox"===n.type?'<th class="'.concat(i.join(" "),'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),'><input type="checkbox" class="').concat(P,'" ').concat(l?"checked":"","><span>").concat(o,"</span></div></th>"):'<th class="'.concat(i.join(" "),'" title="').concat(o,'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),"><span>").concat(v(o,!0),"</span></div></th>")})).join(""),"</tr>")),L.push("</thead>")),i.length&&(L.push("<tbody>"),u?i.forEach((function(e){L.push("<tr>"+n.map((function(n){var r=n.align||h,i=N(t,n,"showOverflow",g)?["col--ellipsis"]:[],a=e[n.id];if(r&&i.push("col--".concat(r)),n.treeNode){var s="";return e._hasChild&&(s='<i class="'.concat(e._expand?"vxe-table--tree-fold-icon":"vxe-table--tree-unfold-icon",'"></i>')),i.push("vxe-table--tree-node"),"radio"===n.type?'<td class="'.concat(i.join(" "),'" title="').concat(a,'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),'><div class="vxe-table--tree-node-wrapper" style="padding-left: ').concat(e._level*c.indent,'px"><div class="vxe-table--tree-icon-wrapper">').concat(s,'</div><div class="vxe-table--tree-cell"><input type="radio" name="radio_').concat(o,'" ').concat(e._radioDisabled?"disabled ":"").concat(k(a)?"checked":"","><span>").concat(e._radioLabel,"</span></div></div></div></td>"):"checkbox"===n.type?'<td class="'.concat(i.join(" "),'" title="').concat(a,'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),'><div class="vxe-table--tree-node-wrapper" style="padding-left: ').concat(e._level*c.indent,'px"><div class="vxe-table--tree-icon-wrapper">').concat(s,'</div><div class="vxe-table--tree-cell"><input type="checkbox" ').concat(e._checkboxDisabled?"disabled ":"").concat(k(a)?"checked":"","><span>").concat(e._checkboxLabel,"</span></div></div></div></td>"):'<td class="'.concat(i.join(" "),'" title="').concat(a,'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),'><div class="vxe-table--tree-node-wrapper" style="padding-left: ').concat(e._level*c.indent,'px"><div class="vxe-table--tree-icon-wrapper">').concat(s,'</div><div class="vxe-table--tree-cell">').concat(a,"</div></div></div></td>")}return"radio"===n.type?'<td class="'.concat(i.join(" "),'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),'><input type="radio" name="radio_').concat(o,'" ').concat(e._radioDisabled?"disabled ":"").concat(k(a)?"checked":"","><span>").concat(e._radioLabel,"</span></div></td>"):"checkbox"===n.type?'<td class="'.concat(i.join(" "),'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),'><input type="checkbox" ').concat(e._checkboxDisabled?"disabled ":"").concat(k(a)?"checked":"","><span>").concat(e._checkboxLabel,"</span></div></td>"):'<td class="'.concat(i.join(" "),'" title="').concat(a,'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),">").concat(v(a,!0),"</div></td>")})).join("")+"</tr>")})):i.forEach((function(e){L.push("<tr>"+n.map((function(n){var r=n.align||h,i=N(t,n,"showOverflow",g)?["col--ellipsis"]:[],a=e[n.id],u=1,c=1;if(E&&y.length){var l=t.getVTRowIndex(e._row),f=t.getVTColumnIndex(n),d=(0,s.mergeBodyMethod)(y,l,f);if(d){var p=d.rowspan,m=d.colspan;if(!p||!m)return"";p>1&&(u=p),m>1&&(c=m)}}return r&&i.push("col--".concat(r)),"radio"===n.type?'<td class="'.concat(i.join(" "),'" rowspan="').concat(u,'" colspan="').concat(c,'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),'><input type="radio" name="radio_').concat(o,'" ').concat(e._radioDisabled?"disabled ":"").concat(k(a)?"checked":"","><span>").concat(e._radioLabel,"</span></div></td>"):"checkbox"===n.type?'<td class="'.concat(i.join(" "),'" rowspan="').concat(u,'" colspan="').concat(c,'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),'><input type="checkbox" ').concat(e._checkboxDisabled?"disabled ":"").concat(k(a)?"checked":"","><span>").concat(e._checkboxLabel,"</span></div></td>"):'<td class="'.concat(i.join(" "),'" rowspan="').concat(u,'" colspan="').concat(c,'" title="').concat(a,'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),">").concat(v(a,!0),"</div></td>")})).join("")+"</tr>")})),L.push("</tbody>")),w){var R=t.footerTableData,j=T(e,R);j.length&&(L.push("<tfoot>"),j.forEach((function(r){L.push("<tr>".concat(n.map((function(n){var i=n.footerAlign||n.align||p||h,o=N(t,n,"showOverflow",g)?["col--ellipsis"]:[],a=O(t,e,r,n);return i&&o.push("col--".concat(i)),'<td class="'.concat(o.join(" "),'" title="').concat(a,'"><div ').concat(b?"":'style="width: '.concat(n.renderWidth,'px"'),">").concat(v(a,!0),"</div></td>")})).join(""),"</tr>"))})),L.push("</tfoot>"))}var B=!l&&f?'<script>(function(){var a=document.querySelector(".'.concat(P,'");if(a){a.indeterminate=true}})()<\/script>'):"";return L.push("</table>",B),b?L.join(""):I(e,L.join(""))}(t,e,n,i);case"xml":return function(t,e,n,r){var i=['<?xml version="1.0"?>','<?mso-application progid="Excel.Sheet"?>','<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">','<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">',"<Version>16.00</Version>","</DocumentProperties>",'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">',"<WindowHeight>7920</WindowHeight>","<WindowWidth>21570</WindowWidth>","<WindowTopX>32767</WindowTopX>","<WindowTopY>32767</WindowTopY>","<ProtectStructure>False</ProtectStructure>","<ProtectWindows>False</ProtectWindows>","</ExcelWorkbook>",'<Worksheet ss:Name="'.concat(e.sheetName,'">'),"<Table>",n.map((function(t){return'<Column ss:Width="'.concat(t.renderWidth,'"/>')})).join("")].join("");if(e.isHeader&&(i+="<Row>".concat(n.map((function(t){return'<Cell><Data ss:Type="String">'.concat(M(e,t),"</Data></Cell>")})).join(""),"</Row>")),r.forEach((function(t){i+="<Row>"+n.map((function(e){return'<Cell><Data ss:Type="String">'.concat(t[e.id],"</Data></Cell>")})).join("")+"</Row>"})),e.isFooter){var o=t.footerTableData;T(e,o).forEach((function(r){i+="<Row>".concat(n.map((function(n){return'<Cell><Data ss:Type="String">'.concat(O(t,e,r,n),"</Data></Cell>")})).join(""),"</Row>")}))}return"".concat(i,"</Table></Worksheet></Workbook>")}(t,e,n,i)}return""}function D(t){var e=t.filename,n=t.type,i=t.content,o="".concat(e,".").concat(n);if(window.Blob){var s=i instanceof Blob?i:w(r.default.toValueString(i),t);if(navigator.msSaveBlob)navigator.msSaveBlob(s,o);else{var u=URL.createObjectURL(s),c=document.createElement("a");c.target="_blank",c.download=o,c.href=u,document.body.appendChild(c),c.click(),document.body.removeChild(c),requestAnimationFrame((function(){c.parentNode&&c.parentNode.removeChild(c),URL.revokeObjectURL(u)}))}return Promise.resolve()}return Promise.reject(new Error(a.default.getLog("vxe.error.notExp")))}function L(t){r.default.eachTree(t,(function(t){delete t._level,delete t._colSpan,delete t._rowSpan,delete t._children,delete t.childNodes}),{children:"children"})}function R(t,e){var n=e.remote,s=e.columns,u=e.colgroups,c=e.exportMethod,l=e.afterExportMethod;return new Promise((function(l){if(n){var f={options:e,$table:t,$grid:t.$xegrid};l(c?c(f):f)}else{var h=function(t,e){var n=e.columns,i=e.dataFilterMethod,s=e.data;return i&&(s=s.filter((function(t,e){return i({row:t,$rowIndex:e})}))),function(t,e,n,i){var s=e.isAllExpand,u=e.mode,c=t.treeConfig,l=t.treeOpts,f=t.radioOpts,h=t.checkboxOpts;if(d||(d=document.createElement("div")),c){var p=[],g=new Map;return r.default.eachTree(i,(function(i,c,l,v,m,y){var b=i._row||i,x=m&&m._row?m._row:m;if(s||!x||g.has(x)&&t.isTreeExpandByRow(x)){var w=function(t,e){var n=t.treeOpts;return e[n.children]&&e[n.children].length>0}(t,b),E={_row:b,_level:y.length-1,_hasChild:w,_expand:w&&t.isTreeExpandByRow(b)};n.forEach((function(n,i){var s="",l=n.editRender||n.cellRender,p=n.exportMethod;if(!p&&l&&l.name){var g=o.default.renderer.get(l.name);g&&(p=g.exportMethod||g.cellExportMethod)}if(p)s=p({$table:t,row:b,column:n,options:e});else switch(n.type){case"seq":s="all"===u?v.map((function(t,e){return e%2==0?Number(t)+1:"."})).join(""):_(t,b,c,n,i);break;case"checkbox":s=C(t.isCheckedByCheckboxRow(b)),E._checkboxLabel=h.labelField?r.default.get(b,h.labelField):"",E._checkboxDisabled=h.checkMethod&&!h.checkMethod({row:b});break;case"radio":s=C(t.isCheckedByRadioRow(b)),E._radioLabel=f.labelField?r.default.get(b,f.labelField):"",E._radioDisabled=f.checkMethod&&!f.checkMethod({row:b});break;default:if(e.original)s=a.default.getCellValue(b,n);else if(s=t.getCellLabel(b,n),"html"===n.type)d.innerHTML=s,s=d.innerText.trim();else{var m=t.getCell(b,n);m&&(s=m.innerText.trim())}}E[n.id]=r.default.toValueString(s)})),g.set(b,1),p.push(Object.assign(E,b))}}),l),p}return i.map((function(i,s){var c={_row:i};return n.forEach((function(n,l){var p="",g=n.editRender||n.cellRender,v=n.exportMethod;if(!v&&g&&g.name){var m=o.default.renderer.get(g.name);m&&(v=m.exportMethod||m.cellExportMethod)}if(v)p=v({$table:t,row:i,column:n,options:e});else switch(n.type){case"seq":p="all"===u?s+1:_(t,i,s,n,l);break;case"checkbox":p=C(t.isCheckedByCheckboxRow(i)),c._checkboxLabel=h.labelField?r.default.get(i,h.labelField):"",c._checkboxDisabled=h.checkMethod&&!h.checkMethod({row:i});break;case"radio":p=C(t.isCheckedByRadioRow(i)),c._radioLabel=f.labelField?r.default.get(i,f.labelField):"",c._radioDisabled=f.checkMethod&&!f.checkMethod({row:i});break;default:if(e.original)p=a.default.getCellValue(i,n);else if(p=t.getCellLabel(i,n),"html"===n.type)d.innerHTML=p,p=d.innerText.trim();else{var y=t.getCell(i,n);y&&(p=y.innerText.trim())}}c[n.id]=r.default.toValueString(p)})),c}))}(t,e,n,s)}(t,e);l(t.preventEvent(null,"event.export",{options:e,columns:s,colgroups:u,datas:h},(function(){return function(t,e,n){var r=e.filename,a=e.type;if(!e.download){var s=w(n,e);return Promise.resolve({type:a,content:n,blob:s})}D({filename:r,type:a,content:n}).then((function(){!1!==e.message&&o.default.modal.message({content:i.default.i18n("vxe.table.expSuccess"),status:"success"})}))}(0,e,P(t,e,s,h))})))}})).then((function(n){return L(s),e.print||l&&l({status:!0,options:e,$table:t,$grid:t.$xegrid}),Object.assign({status:!0},n)})).catch((function(){return L(s),e.print||l&&l({status:!1,options:e,$table:t,$grid:t.$xegrid}),Promise.reject({status:!1})}))}function j(t,e){return t.getElementsByTagName(e)}function B(t){return"#".concat(t,"@").concat(r.default.uniqueId())}function F(t,e){return t.replace(/#\d+@\d+/g,(function(t){return r.default.hasOwnProp(e,t)?e[t]:t}))}function z(t,e){return F(t,e).replace(/^"+$/g,(function(t){return'"'.repeat(Math.ceil(t.length/2))}))}function $(t,e,n){var r=e.split(b),i=[],o=[];if(r.length){var a={},s=Date.now();r.forEach((function(t){if(t){var e={},r=(t=t.replace(/("")|(\n)/g,(function(t,e){var n=B(s);return a[n]=e?'"':"\n",n})).replace(/"(.*?)"/g,(function(t,e){var n=B(s);return a[n]=F(e,a),n}))).split(n);o.length?(r.forEach((function(t,n){n<o.length&&(e[o[n]]=z(t,a))})),i.push(e)):o=r.map((function(t){return z(t.trim(),a)}))}}))}return{fields:o,rows:i}}function G(t,e,n){var s=n.importMethod,u=n.afterImportMethod,l=a.default.parseFile(e),f=l.type,d=l.filename;if(!s&&!r.default.includes(o.default.config.importTypes,f))return!1!==n.message&&o.default.modal.message({content:i.default.i18n("vxe.error.notType",[f]),status:"error"}),Promise.reject({status:!1});var h=new Promise((function(a,u){var l=function(e){a(e),t._importResolve=null,t._importReject=null},h=function(e){u(e),t._importResolve=null,t._importReject=null};if(t._importResolve=l,t._importReject=h,window.FileReader){var p=Object.assign({mode:"insert"},n,{type:f,filename:d});p.remote?s?Promise.resolve(s({file:e,options:p,$table:t})).then((function(){l({status:!0})})).catch((function(){l({status:!0})})):l({status:!0}):t.preventEvent(null,"event.import",{file:e,options:p,columns:t.tableFullColumn},(function(){var n=new FileReader;n.onerror=function(){(0,c.errLog)("vxe.error.notType",[f]),h({status:!1})},n.onload=function(e){!function(t,e,n){var a=t.tableFullColumn,s=t._importResolve,u=t._importReject,c={fields:[],rows:[]};switch(n.type){case"csv":c=function(t,e){return $(0,e,",")}(0,e);break;case"txt":c=function(t,e){return $(0,e,"\t")}(0,e);break;case"html":c=function(t,e){var n=j((new DOMParser).parseFromString(e,"text/html"),"body"),i=[],o=[];if(n.length){var a=j(n[0],"table");if(a.length){var s=j(a[0],"thead");if(s.length){r.default.arrayEach(j(s[0],"tr"),(function(t){r.default.arrayEach(j(t,"th"),(function(t){o.push(t.textContent)}))}));var u=j(a[0],"tbody");u.length&&r.default.arrayEach(j(u[0],"tr"),(function(t){var e={};r.default.arrayEach(j(t,"td"),(function(t,n){o[n]&&(e[o[n]]=t.textContent||"")})),i.push(e)}))}}}return{fields:o,rows:i}}(0,e);break;case"xml":c=function(t,e){var n=j((new DOMParser).parseFromString(e,"application/xml"),"Worksheet"),i=[],o=[];if(n.length){var a=j(n[0],"Table");if(a.length){var s=j(a[0],"Row");s.length&&(r.default.arrayEach(j(s[0],"Cell"),(function(t){o.push(t.textContent)})),r.default.arrayEach(s,(function(t,e){if(e){var n={},a=j(t,"Cell");r.default.arrayEach(a,(function(t,e){o[e]&&(n[o[e]]=t.textContent)})),i.push(n)}})))}}return{fields:o,rows:i}}(0,e)}var l=c,f=l.fields,d=l.rows;!function(t,e){var n=[];return t.forEach((function(t){var e=t.property;e&&n.push(e)})),e.some((function(t){return n.indexOf(t)>-1}))}(a,f)?!1!==n.message&&(o.default.modal.message({content:i.default.i18n("vxe.error.impFields"),status:"error"}),u&&u({status:!1})):t.createData(d).then((function(e){var r;return r="insert"===n.mode?t.insert(e):t.reloadData(e),!1!==n.message&&o.default.modal.message({content:i.default.i18n("vxe.table.impSuccess",[d.length]),status:"success"}),r.then((function(){s&&s({status:!0})}))}))}(t,e.target.result,p)},n.readAsText(e,p.encoding||"UTF-8")}))}else l({status:!0})}));return h.then((function(){u&&u({status:!0,options:n,$table:t})})).catch((function(e){return u&&u({status:!1,options:n,$table:t}),Promise.reject(e)}))}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h||(h=document.createElement("form"),p=document.createElement("input"),h.className="vxe-table--file-form",p.name="file",p.type="file",h.appendChild(p),document.body.appendChild(h)),new Promise((function(e,n){var s=t.types||[],u=!s.length||s.some((function(t){return"*"===t}));p.multiple=!!t.multiple,p.accept=u?"":".".concat(s.join(", .")),p.onchange=function(c){var l,f=c.target.files,d=f[0];if(!u)for(var h=0;h<f.length;h++){var p=a.default.parseFile(f[h]).type;if(!r.default.includes(s,p)){l=p;break}}l?(!1!==t.message&&o.default.modal.message({content:i.default.i18n("vxe.error.notType",[l]),status:"error"}),n({status:!1,files:f,file:d})):e({status:!0,files:f,file:d})},h.reset(),p.click()}))}function U(){if(g){if(g.parentNode){try{g.contentDocument.write("")}catch(t){}g.parentNode.removeChild(g)}g=null}}function W(){g.parentNode||document.body.appendChild(g)}function H(){requestAnimationFrame(U)}function Y(t,e,n){var r=e.beforePrintMethod;r&&(n=r({content:n,options:e,$table:t})||"");var i=w(n=I(e,n),e);u.browse.msie?(U(),g=x(),W(),g.contentDocument.write(n),g.contentDocument.execCommand("print")):(g||((g=x()).onload=function(t){t.target.src&&(t.target.contentWindow.onafterprint=H,t.target.contentWindow.print())}),W(),g.src=URL.createObjectURL(i))}function X(t,e,n){var i=t.initStore,a=t.customOpts,u=t.collectColumn,c=t.footerTableData,l=t.treeConfig,f=t.mergeList,d=t.isGroup,h=t.exportParams,p=t.getCheckboxRecords(),g=!!c.length,v=l,m=!v&&f.length,y=Object.assign({message:!0,isHeader:!0},e),b=y.types||o.default.config.exportTypes,x=y.modes,w=a.checkMethod,_=u.slice(0),S=y.columns,C=b.map((function(t){return{value:t,label:"vxe.export.types.".concat(t)}})),k=x.map((function(t){return{value:t,label:"vxe.export.modes.".concat(t)}}));return r.default.eachTree(_,(function(t,e,n,i,o){(t.children&&t.children.length||E(t))&&(t.checked=S?S.some((function(e){if((0,s.isColumnInfo)(e))return t===e;if(r.default.isString(e))return t.field===e;var n=e.id||e.colId,i=e.type,o=e.property||e.field;return n?t.id===n:o&&i?t.property===o&&t.type===i:o?t.property===o:i?t.type===i:void 0})):t.visible,t.halfChecked=!1,t.disabled=o&&o.disabled||!!w&&!w({column:t}))})),Object.assign(t.exportStore,{columns:_,typeList:C,modeList:k,hasFooter:g,hasMerge:m,hasTree:v,isPrint:n,hasColgroup:d,visible:!0}),i.export||Object.assign(h,{mode:p.length?"selected":"current"},y),-1===x.indexOf(h.mode)&&(h.mode=x[0]),-1===b.indexOf(h.type)&&(h.type=b[0]),i.export=!0,t.$nextTick()}var q=function t(e){var n=[];return e.forEach((function(e){var r;e.childNodes&&e.childNodes.length?(n.push(e),n.push.apply(n,function(t){if(Array.isArray(t))return f(t)}(r=t(e.childNodes))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):n.push(e)})),n},Z=function(t){var e=1,n=function t(n,r){if(r&&(n._level=r._level+1,e<n._level&&(e=n._level)),n.childNodes&&n.childNodes.length){var i=0;n.childNodes.forEach((function(e){t(e,n),i+=e._colSpan})),n._colSpan=i}else n._colSpan=1};t.forEach((function(t){t._level=1,n(t)}));for(var r=[],i=0;i<e;i++)r.push([]);return q(t).forEach((function(t){t.childNodes&&t.childNodes.length?t._rowSpan=1:t._rowSpan=e-t._level+1,r[t._level-1].push(t)})),r},K={methods:{_exportData:function(t){var e,n=this,a=this.$xegrid,u=this.isGroup,c=this.tableGroupColumn,l=this.tableFullColumn,f=this.afterFullData,d=this.treeConfig,h=this.treeOpts,p=this.exportOpts,g=Object.assign({isHeader:!0,isFooter:!0,isColgroup:!0,isMerge:!1,isAllExpand:!1,download:!0,type:"csv",mode:"current"},p,{print:!1},t),v=g.type,m=g.mode,y=g.columns,b=g.original,x=g.beforeExportMethod,w=y&&y.length?y:null,_=g.columnFilterMethod;w||_||(_=b?function(t){return t.column.property}:function(t){return E(t.column)}),e=w?r.default.searchTree(r.default.mapTree(w,(function(t){var e;if(t){if((0,s.isColumnInfo)(t))e=t;else if(r.default.isString(t))e=n.getColumnByField(t);else{var i=t.id||t.colId,o=t.type,a=t.property||t.field;i?e=n.getColumnById(i):a&&o?e=l.find((function(t){return t.property===a&&t.type===o})):a?e=n.getColumnByField(a):o&&(e=l.find((function(t){return t.type===o})))}return e||{}}}),{children:"childNodes",mapChildren:"_children"}),(function(t,e){return(0,s.isColumnInfo)(t)&&(!_||_({column:t,$columnIndex:e}))}),{children:"_children",mapChildren:"childNodes",original:!0}):r.default.searchTree(u?c:l,(function(t,e){return t.visible&&(!_||_({column:t,$columnIndex:e}))}),{children:"children",mapChildren:"childNodes",original:!0});var S=[];if(r.default.eachTree(e,(function(t){t.children&&t.children.length||S.push(t)}),{children:"childNodes"}),g.columns=S,g.colgroups=Z(e),g.filename||(g.filename=i.default.i18n(g.original?"vxe.table.expOriginFilename":"vxe.table.expFilename",[r.default.toDateString(Date.now(),"yyyyMMddHHmmss")])),g.sheetName||(g.sheetName=document.title),!g.exportMethod&&!r.default.includes(o.default.config.exportTypes,v))return Promise.reject({status:!1});if(g.print||x&&x({options:g,$table:this,$grid:a}),!g.data)if(g.data=f,"selected"===m){var C=this.getCheckboxRecords();["html","pdf"].indexOf(v)>-1&&d?g.data=r.default.searchTree(this.getTableData().fullData,(function(t){return C.indexOf(t)>-1}),Object.assign({},h,{data:"_row"})):g.data=C}else if("all"===m&&a&&!g.remote){var k=a.proxyOpts,M=k.beforeQueryAll,O=k.afterQueryAll,T=k.ajax,A=void 0===T?{}:T,N=k.props,I=void 0===N?{}:N,P=A.queryAll;if(P){var D={$table:this,$grid:a,sort:a.sortData,filters:a.filterData,form:a.formData,target:P,options:g};return Promise.resolve((M||P)(D)).catch((function(t){return t})).then((function(t){return g.data=(I.list?r.default.get(t,I.list):t)||[],O&&O(D),R(n,g)}))}}return R(this,g)},_importByFile:function(t,e){var n=Object.assign({},e),r=n.beforeImportMethod;return r&&r({options:n,$table:this}),G(this,t,n)},_importData:function(t){var e=this,n=Object.assign({types:o.default.config.importTypes},this.importOpts,t),r=n.beforeImportMethod,i=n.afterImportMethod;return r&&r({options:n,$table:this}),V(n).catch((function(t){return i&&i({status:!1,options:n,$table:e}),Promise.reject(t)})).then((function(t){var r=t.file;return G(e,r,n)}))},_saveFile:function(t){return D(t)},_readFile:function(t){return V(t)},_print:function(t){var e=this,n=Object.assign({original:!1},this.printOpts,t,{type:"html",download:!1,remote:!1,print:!0});return n.sheetName||(n.sheetName=document.title),new Promise((function(t){n.content?t(Y(e,n,n.content)):t(e.exportData(n).then((function(t){var r=t.content;return Y(e,n,r)})))}))},_openImport:function(t){var e=Object.assign({mode:"insert",message:!0,types:o.default.config.importTypes},t,this.importOpts),n=e.types;if(this.getTreeStatus())e.message&&o.default.modal.message({content:i.default.i18n("vxe.error.treeNotImp"),status:"error"});else{this.importConfig||(0,c.errLog)("vxe.error.reqProp",["import-config"]);var r=n.map((function(t){return{value:t,label:"vxe.export.types.".concat(t)}})),a=e.modes.map((function(t){return{value:t,label:"vxe.import.modes.".concat(t)}}));Object.assign(this.importStore,{file:null,type:"",filename:"",modeList:a,typeList:r,visible:!0}),Object.assign(this.importParams,e),this.initStore.import=!0}},_openExport:function(t){var e=this.exportOpts;return X(this,Object.assign({},e,t))},_openPrint:function(t){var e=this.printOpts;return X(this,Object.assign({},e,t),!0)}}};e.default=K},6705:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Filter=void 0;var r=s(n(4344)),i=s(n(5053)),o=s(n(9837)),a=s(n(3090));function s(t){return t&&t.__esModule?t:{default:t}}var u={Panel:o.default,install:function(t){i.default.reg("filter"),r.default.mixins.push(a.default),t.component(o.default.name,o.default)}};e.Filter=u;var c=u;e.default=c},3090:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n(8478)),i=s(n(1455)),o=n(9211),a=s(n(5053));function s(t){return t&&t.__esModule?t:{default:t}}var u={methods:{_openFilter:function(t){var e=(0,o.handleFieldOrColumn)(this,t);if(e&&e.filters){var n=this.elemStore,r=e.fixed;return this.scrollToColumn(e).then((function(){var t=n["".concat(r||"main","-header-wrapper")]||n["main-header-wrapper"];if(t){var o=t.querySelector(".vxe-header--column.".concat(e.id," .vxe-filter--btn"));i.default.triggerEvent(o,"click")}}))}return this.$nextTick()},_setFilter:function(t,e){var n=(0,o.handleFieldOrColumn)(this,t);return n&&n.filters&&e&&(n.filters=(0,o.toFilters)(e)),this.$nextTick()},checkFilterOptions:function(){var t=this.filterStore;t.isAllSelected=t.options.every((function(t){return t._checked})),t.isIndeterminate=!t.isAllSelected&&t.options.some((function(t){return t._checked}))},triggerFilterEvent:function(t,e,n){var r=this,o=this.filterStore;if(o.column===e&&o.visible)o.visible=!1;else{var s=t.target,u=t.pageX,c=e.filters,l=e.filterMultiple,f=e.filterRender,d=f?a.default.renderer.get(f.name):null,h=e.filterRecoverMethod||(d?d.filterRecoverMethod:null),p=i.default.getDomNode().visibleWidth;Object.assign(o,{args:n,multiple:l,options:c,column:e,style:null,visible:!0}),o.options.forEach((function(t){var n=t._checked,i=t.checked;t._checked=i,i||n===i||h&&h({option:t,column:e,$table:r})})),this.checkFilterOptions(),this.initStore.filter=!0,this.$nextTick((function(){var t=r.$refs,n=t.tableBody.$el,i=t.filterWrapper.$el,a=0,c=0,l=null,f=null;i&&(a=i.offsetWidth,c=i.offsetHeight,l=i.querySelector(".vxe-table--filter-header"),f=i.querySelector(".vxe-table--filter-footer"));var d,h,g=a/2,v=n.clientWidth-a-10,m={top:"".concat(s.offsetTop+s.offsetParent.offsetTop+s.offsetHeight+8,"px")},y=null;if(c>=n.clientHeight&&(y=Math.max(60,n.clientHeight-(f?f.offsetHeight:0)-(l?l.offsetHeight:0))),"left"===e.fixed?d=s.offsetLeft+s.offsetParent.offsetLeft-g:"right"===e.fixed?h=s.offsetParent.offsetWidth-s.offsetLeft+(s.offsetParent.offsetParent.offsetWidth-s.offsetParent.offsetLeft)-e.renderWidth-g:d=s.offsetLeft+s.offsetParent.offsetLeft-g-n.scrollLeft,d){var b=u+a-g+10-p;b>0&&(d-=b),m.left="".concat(Math.min(v,Math.max(10,d)),"px")}else if(h){var x=u+a-g+10-p;x>0&&(h+=x),m.right="".concat(Math.max(10,h),"px")}o.style=m,o.maxHeight=y}))}this.emitEvent("filter-visible",{column:e,property:e.property,filterList:this.getCheckedFilters(),visible:o.visible},t)},_getCheckedFilters:function(){var t=this.tableFullColumn,e=[];return t.filter((function(t){var n=t.property,r=t.filters,i=[],o=[];r&&r.length&&(r.forEach((function(t){t.checked&&(i.push(t.value),o.push(t.data))})),i.length&&e.push({column:t,property:n,values:i,datas:o}))})),e},confirmFilterEvent:function(t){var e=this,n=this.filterStore,r=this.filterOpts,i=this.scrollXLoad,o=this.scrollYLoad,a=n.column,s=a.property,u=[],c=[];a.filters.forEach((function(t){t.checked&&(u.push(t.value),c.push(t.data))}));var l=this.getCheckedFilters();r.remote||(this.handleTableData(!0),this.checkSelectionStatus()),this.emitEvent("filter-change",{column:a,property:s,values:u,datas:c,filters:l,filterList:l},t),this.closeFilter(),this.updateFooter().then((function(){var t=e.scrollXLoad,n=e.scrollYLoad;if(i||t||o||n)return(i||t)&&e.updateScrollXSpace(),(o||n)&&e.updateScrollYSpace(),e.refreshScroll()})).then((function(){return e.updateCellAreas(),e.recalculate(!0)})).then((function(){setTimeout((function(){return e.recalculate()}),50)}))},handleClearFilter:function(t){if(t){var e=t.filters,n=t.filterRender;if(e){var i=n?a.default.renderer.get(n.name):null,o=t.filterResetMethod||(i?i.filterResetMethod:null);e.forEach((function(t){t._checked=!1,t.checked=!1,o||(t.data=r.default.clone(t.resetValue,!0))})),o&&o({options:e,column:t,$table:this})}}},resetFilterEvent:function(t){this.handleClearFilter(this.filterStore.column),this.confirmFilterEvent(t)},_clearFilter:function(t){var e,n=this.filterStore;return t?(e=(0,o.handleFieldOrColumn)(this,t))&&this.handleClearFilter(e):this.visibleColumn.forEach(this.handleClearFilter),t&&e===n.column||Object.assign(n,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),this.updateData()}}};e.default=u},9837:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n(5042)),i=s(n(5053)),o=s(n(6970)),a=s(n(8478));function s(t){return t&&t.__esModule?t:{default:t}}var u={name:"VxeTableFilter",props:{filterStore:Object},computed:{hasCheckOption:function(){var t=this.filterStore;return t&&t.options.some((function(t){return t.checked}))}},render:function(t){var e=this.$parent,n=this.filterStore,r=n.column,o=r?r.filterRender:null,a=o?i.default.renderer.get(o.name):null;return t("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",a&&a.className?a.className:"",{"is--animat":e.animat,"is--multiple":n.multiple,"is--active":n.visible}],style:n.style},n.visible?this.renderOptions(t,o,a).concat(this.renderFooter(t)):[])},methods:{renderOptions:function(t,e,n){var i=this,a=this.$parent,s=this.filterStore,u=s.args,c=s.column,l=s.multiple,f=s.maxHeight,d=c.slots;return d&&d.filter?[t("div",{class:"vxe-table--filter-template"},a.callSlot(d.filter,Object.assign({$panel:this,context:this},u),t))]:n&&n.renderFilter?[t("div",{class:"vxe-table--filter-template"},n.renderFilter.call(a,t,e,Object.assign({$panel:this,context:this},u)))]:[t("ul",{class:"vxe-table--filter-header"},[t("li",{class:["vxe-table--filter-option",{"is--checked":l?s.isAllSelected:!s.options.some((function(t){return t._checked})),"is--indeterminate":l&&s.isIndeterminate}],attrs:{title:r.default.i18n(l?"vxe.table.allTitle":"vxe.table.allFilter")},on:{click:function(t){i.changeAllOption(t,!s.isAllSelected)}}},(l?[t("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"})]:[]).concat([t("span",{class:"vxe-checkbox--label"},r.default.i18n("vxe.table.allFilter"))]))]),t("ul",{class:"vxe-table--filter-body",style:f?{maxHeight:"".concat(f,"px")}:{}},s.options.map((function(e){return t("li",{class:["vxe-table--filter-option",{"is--checked":e._checked}],attrs:{title:e.label},on:{click:function(t){i.changeOption(t,!e._checked,e)}}},(l?[t("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"})]:[]).concat([t("span",{class:"vxe-checkbox--label"},o.default.formatText(e.label,1))]))})))]},renderFooter:function(t){var e=this.hasCheckOption,n=this.filterStore,o=n.column,s=n.multiple,u=o.filterRender,c=u?i.default.renderer.get(u.name):null,l=!e&&!n.isAllSelected&&!n.isIndeterminate;return!s||c&&(a.default.isBoolean(c.showFilterFooter)?!1===c.showFilterFooter:!1===c.isFooter)?[]:[t("div",{class:"vxe-table--filter-footer"},[t("button",{class:{"is--disabled":l},attrs:{disabled:l},on:{click:this.confirmFilter}},r.default.i18n("vxe.table.confirmFilter")),t("button",{on:{click:this.resetFilter}},r.default.i18n("vxe.table.resetFilter"))])]},filterCheckAllEvent:function(t,e){var n=this.filterStore;n.options.forEach((function(t){t._checked=e,t.checked=e})),n.isAllSelected=e,n.isIndeterminate=!1},changeRadioOption:function(t,e,n){var r=this.$parent;this.filterStore.options.forEach((function(t){t._checked=!1})),n._checked=e,r.checkFilterOptions(),this.confirmFilter(t)},changeMultipleOption:function(t,e,n){var r=this.$parent;n._checked=e,r.checkFilterOptions()},changeAllOption:function(t,e){this.filterStore.multiple?this.filterCheckAllEvent(t,e):this.resetFilter(t)},changeOption:function(t,e,n){this.filterStore.multiple?this.changeMultipleOption(t,e,n):this.changeRadioOption(t,e,n)},confirmFilter:function(t){var e=this.$parent;this.filterStore.options.forEach((function(t){t.checked=t._checked})),e.confirmFilterEvent(t)},resetFilter:function(t){this.$parent.resetFilterEvent(t)}}};e.default=u},5723:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Footer=void 0;var r,i=(r=n(4523))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Footer=o;var a=o;e.default=a},4523:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(8478)),i=a(n(6970)),o=a(n(1455));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u="footer",c={name:"VxeTableFooter",props:{footerTableData:Array,tableColumn:Array,fixedColumn:Array,fixedType:String,size:String},mounted:function(){var t=this.$parent,e=this.$el,n=this.$refs,r=this.fixedType,i=t.elemStore,o="".concat(r||"main","-footer-");i["".concat(o,"wrapper")]=e,i["".concat(o,"table")]=n.table,i["".concat(o,"colgroup")]=n.colgroup,i["".concat(o,"list")]=n.tfoot,i["".concat(o,"xSpace")]=n.xSpace},destroyed:function(){var t=this.$parent,e=this.fixedType,n=t.elemStore,r="".concat(e||"main","-footer-");n["".concat(r,"wrapper")]=null,n["".concat(r,"table")]=null,n["".concat(r,"colgroup")]=null,n["".concat(r,"list")]=null,n["".concat(r,"xSpace")]=null},render:function(t){var e=this._e,n=this.$parent,a=this.fixedType,c=this.fixedColumn,l=this.tableColumn,f=this.footerTableData,d=n.$listeners,h=n.tId,p=n.footerRowClassName,g=n.footerCellClassName,v=n.footerRowStyle,m=n.footerCellStyle,y=n.footerAlign,b=n.mergeFooterList,x=n.footerSpanMethod,w=n.align,_=n.scrollXLoad,E=n.columnKey,S=n.columnOpts,C=n.showFooterOverflow,k=n.currentColumn,M=n.overflowX,O=n.scrollbarWidth,T=n.tooltipOpts,A=n.visibleColumn;return a&&(l=_||C?b.length&&x?A:c:A),t("div",{class:["vxe-table--footer-wrapper",a?"fixed-".concat(a,"--wrapper"):"body--wrapper"],attrs:{xid:h},on:{scroll:this.scrollEvent}},[a?e():t("div",{class:"vxe-body--x-space",ref:"xSpace"}),t("table",{class:"vxe-table--footer",attrs:{xid:h,cellspacing:0,cellpadding:0,border:0},ref:"table"},[t("colgroup",{ref:"colgroup"},l.map((function(e,n){return t("col",{attrs:{name:e.id},key:n})})).concat(O?[t("col",{attrs:{name:"col_gutter"}})]:[])),t("tfoot",{ref:"tfoot"},f.map((function(e,c){var h=c;return t("tr",{class:["vxe-footer--row",p?r.default.isFunction(p)?p({$table:n,_rowIndex:c,$rowIndex:h,fixed:a,type:u}):p:""],style:v?r.default.isFunction(v)?v({$table:n,_rowIndex:c,$rowIndex:h,fixed:a,type:u}):v:null},l.map((function(p,v){var O,A=p.type,N=p.showFooterOverflow,I=p.footerAlign,P=p.align,D=p.footerClassName,L=T.showAll||T.enabled,R=p.children&&p.children.length,j=a?p.fixed!==a&&!R:p.fixed&&M,B=r.default.isUndefined(N)||r.default.isNull(N)?C:N,F=I||P||y||w,z="ellipsis"===B,$="title"===B,G=!0===B||"tooltip"===B,V=$||G||z,U={colid:p.id},W={},H=n.getColumnIndex(p),Y=n.getVTColumnIndex(p),X={$table:n,_rowIndex:c,$rowIndex:h,column:p,columnIndex:H,$columnIndex:v,_columnIndex:Y,itemIndex:Y,items:e,fixed:a,type:u,data:f};if(_&&!V&&(z=V=!0),($||G||L)&&(W.mouseenter=function(t){$?o.default.updateCellTitle(t.currentTarget,p):(G||L)&&n.triggerFooterTooltipEvent(t,X)}),(G||L)&&(W.mouseleave=function(t){(G||L)&&n.handleTargetLeaveEvent(t)}),d["footer-cell-click"]&&(W.click=function(t){n.emitEvent("footer-cell-click",Object.assign({cell:t.currentTarget},X),t)}),d["footer-cell-dblclick"]&&(W.dblclick=function(t){n.emitEvent("footer-cell-dblclick",Object.assign({cell:t.currentTarget},X),t)}),b.length){var q=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r],o=i.row,a=i.col,s=i.rowspan,u=i.colspan;if(a>-1&&o>-1&&s&&u){if(o===e&&a===n)return{rowspan:s,colspan:u};if(e>=o&&e<o+s&&n>=a&&n<a+u)return{rowspan:0,colspan:0}}}}(b,c,Y);if(q){var Z=q.rowspan,K=q.colspan;if(!Z||!K)return null;Z>1&&(U.rowspan=Z),K>1&&(U.colspan=K)}}else if(x){var J=x(X)||{},Q=J.rowspan,tt=void 0===Q?1:Q,et=J.colspan,nt=void 0===et?1:et;if(!tt||!nt)return null;tt>1&&(U.rowspan=tt),nt>1&&(U.colspan=nt)}return t("td",{class:["vxe-footer--column",p.id,(O={},s(O,"col--".concat(F),F),s(O,"col--".concat(A),A),s(O,"col--last",v===l.length-1),s(O,"fixed--hidden",j),s(O,"col--ellipsis",V),s(O,"col--current",k===p),O),i.default.getClass(D,X),i.default.getClass(g,X)],attrs:U,style:m?r.default.isFunction(m)?m(X):m:null,on:W,key:E||S.useKey?p.id:v},[t("div",{class:["vxe-cell",{"c--title":$,"c--tooltip":G,"c--ellipsis":z}]},p.renderFooter(t,X))])})).concat(O?[t("td",{class:"vxe-footer--gutter col--gutter"})]:[]))})))])])},methods:{scrollEvent:function(t){var e=this.$parent,n=this.fixedType,r=e.$refs,i=e.scrollXLoad,o=e.triggerScrollXEvent,a=e.lastScrollLeft,s=r.tableHeader,c=r.tableBody,l=r.tableFooter,f=r.validTip,d=s?s.$el:null,h=l?l.$el:null,p=c.$el,g=h?h.scrollLeft:0,v=g!==a;e.lastScrollLeft=g,e.lastScrollTime=Date.now(),d&&(d.scrollLeft=g),p&&(p.scrollLeft=g),i&&v&&o(t),v&&f&&f.visible&&f.updatePlacement(),e.emitEvent("scroll",{type:u,fixed:n,scrollTop:p.scrollTop,scrollLeft:g,isX:v,isY:!1},t)}}};e.default=c},4929:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormGather=void 0;var r,i=(r=n(1066))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.FormGather=o;var a=o;e.default=a},3316:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormItem=void 0;var r,i=(r=n(788))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.FormItem=o;var a=o;e.default=a},719:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Form=void 0;var r,i=(r=n(8e3))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Form=o;var a=o;e.default=a},6152:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(8478)),i=u(n(5042)),o=u(n(5053)),a=n(6970),s=n(4070);function u(t){return t&&t.__esModule?t:{default:t}}var c={name:"VxeFormConfigItem",props:{itemConfig:Object},inject:{$xeform:{default:null}},provide:function(){return{$xeformgather:null,$xeformiteminfo:{itemConfig:this.itemConfig}}},render:function(t){var e,n=this._e,u=this.$xeform,l=this.itemConfig,f=u.rules,d=u.data,h=u.collapseAll,p=u.validOpts,g=u.titleAlign,v=u.titleWidth,m=u.titleColon,y=u.titleAsterisk,b=u.titleOverflow,x=l.slots,w=l.title,_=l.folding,E=l.visible,S=l.visibleMethod,C=l.field,k=l.collapseNode,M=l.itemRender,O=l.showError,T=l.errRule,A=l.className,N=l.titleOverflow,I=l.children,P=(0,a.isEnableConf)(M)?o.default.renderer.get(M.name):null,D=l.span||u.span,L=l.align||u.align,R=r.default.eqNull(l.titleAlign)?g:l.titleAlign,j=r.default.eqNull(l.titleWidth)?v:l.titleWidth,B=r.default.eqNull(l.titleColon)?m:l.titleColon,F=r.default.eqNull(l.titleAsterisk)?y:l.titleAsterisk,z=S,$=r.default.isUndefined(N)||r.default.isNull(N)?b:N,G="title"===$,V=!0===$||"tooltip"===$,U=G||V||"ellipsis"===$,W={data:d,field:C,property:C,item:l,$form:u};if(!1===E)return n();if(I&&I.length>0){var H=l.children.map((function(e,n){return t(c,{key:n,props:{itemConfig:e}})}));return H.length?t("div",{class:["vxe-form--gather vxe-row",l.id,D?"vxe-col--".concat(D," is--span"):"",A?r.default.isFunction(A)?A(W):A:""]},H):n()}if(!z&&P&&P.itemVisibleMethod&&(z=P.itemVisibleMethod),f){var Y=f[C];Y&&(e=Y.some((function(t){return t.required})))}var X=[];x&&x.default?X=u.callSlot(x.default,W,t):P&&P.renderItemContent?X=P.renderItemContent.call(u,t,M,W):P&&P.renderItem?X=P.renderItem.call(u,t,M,W):C&&(X=[r.default.toValueString(r.default.get(d,C))]);var q=V?{mouseenter:function(t){u.triggerTitleTipEvent(t,W)},mouseleave:u.handleTitleTipLeaveEvent}:{};return t("div",{class:["vxe-form--item",l.id,D?"vxe-col--".concat(D," is--span"):null,A?r.default.isFunction(A)?A(W):A:"",{"is--title":w,"is--colon":B,"is--asterisk":F,"is--required":e,"is--hidden":_&&h,"is--active":!z||z(W),"is--error":O}],props:{itemConfig:l},key:l.id},[t("div",{class:"vxe-form--item-inner"},[w||x&&x.title?t("div",{class:["vxe-form--item-title",R?"align--".concat(R):null,{"is--ellipsis":U}],style:j?{width:isNaN(j)?j:"".concat(j,"px")}:null,attrs:{title:G?(0,a.getFuncText)(w):null},on:q},(0,s.renderTitle)(t,u,l)):null,t("div",{class:["vxe-form--item-content",L?"align--".concat(L):null]},X.concat([k?t("div",{class:"vxe-form--item-trigger-node",on:{click:u.toggleCollapseEvent}},[t("span",{class:"vxe-form--item-trigger-text"},h?i.default.i18n("vxe.form.unfolding"):i.default.i18n("vxe.form.folding")),t("i",{class:["vxe-form--item-trigger-icon",h?i.default.icon.FORM_FOLDING:i.default.icon.FORM_UNFOLDING]})]):null,T&&p.showMessage?t("div",{class:"vxe-form--item-valid",style:T.maxWidth?{width:"".concat(T.maxWidth,"px")}:null},T.content):null]))])])}},l=c;e.default=l},1066:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(788))&&r.__esModule?r:{default:r};n(5981);var o={name:"VxeFormGather",extends:i.default,provide:function(){return{$xeformgather:this,xeformitem:null,$xeformiteminfo:{itemConfig:this.itemConfig}}},created:function(){},render:function(t){return t("div",this.$slots.default)}};e.default=o},788:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=c(n(8478)),i=c(n(5042)),o=c(n(5053)),a=n(6970),s=n(2526),u=n(4070);function c(t){return t&&t.__esModule?t:{default:t}}var l={title:String,field:String,size:String,span:[String,Number],align:String,titleAlign:String,titleWidth:[String,Number],titleColon:{type:Boolean,default:null},titleAsterisk:{type:Boolean,default:null},className:[String,Function],titleOverflow:{type:[Boolean,String],default:null},titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},visible:{type:Boolean,default:null},visibleMethod:Function,folding:Boolean,collapseNode:Boolean,itemRender:Object},f={};Object.keys(l).forEach((function(t){f[t]=function(e){this.itemConfig.update(t,e)}}));var d={name:"VxeFormItem",props:l,inject:{$xeform:{default:null},$xeformgather:{default:null}},provide:function(){return{$xeformitem:this,$xeformiteminfo:{itemConfig:this.itemConfig}}},data:function(){return{itemConfig:null}},watch:f,mounted:function(){(0,s.assemItem)(this)},created:function(){this.itemConfig=(0,s.createItem)(this.$xeform,this)},destroyed:function(){(0,s.destroyItem)(this)},render:function(t){var e=this.$xeform;return e&&e.customLayout?function(t,e,n,s){var c,l=e.rules,f=e.data,d=e.collapseAll,h=e.validOpts,p=e.titleOverflow,g=n.title,v=n.folding,m=n.visible,y=n.visibleMethod,b=n.field,x=n.collapseNode,w=n.itemRender,_=n.showError,E=n.errRule,S=n.className,C=n.titleOverflow,k=(0,a.isEnableConf)(w)?o.default.renderer.get(w.name):null,M=n.span||e.span,O=n.align||e.align,T=n.titleAlign||e.titleAlign,A=n.titleWidth||e.titleWidth,N=y,I=r.default.isUndefined(C)||r.default.isNull(C)?p:C,P="title"===I,D=!0===I||"tooltip"===I,L=P||D||"ellipsis"===I,R={data:f,property:b,item:n,$form:e};if(!N&&k&&k.itemVisibleMethod&&(N=k.itemVisibleMethod),l){var j=l[b];j&&(c=j.some((function(t){return t.required})))}var B=[];s&&s.default?B=e.callSlot(s.default,R,t):k&&k.renderItemContent?B=k.renderItemContent.call(e,t,w,R):k&&k.renderItem?B=k.renderItem.call(e,t,w,R):b&&(B=["".concat(r.default.get(f,b))]);var F=D?{mouseenter:function(t){e.triggerTitleTipEvent(t,R)},mouseleave:e.handleTitleTipLeaveEvent}:{};return t("div",{class:["vxe-form--item",n.id,M?"vxe-col--".concat(M," is--span"):null,S?r.default.isFunction(S)?S(R):S:"",{"is--title":g,"is--required":c,"is--hidden":!1===m||v&&d,"is--active":!N||N(R),"is--error":_}]},[t("div",{class:"vxe-form--item-inner"},[g||s&&s.title?t("div",{class:["vxe-form--item-title",T?"align--".concat(T):null,{"is--ellipsis":L}],style:A?{width:isNaN(A)?A:"".concat(A,"px")}:null,attrs:{title:P?(0,a.getFuncText)(g):null},on:F},(0,u.renderTitle)(t,e,n)):null,t("div",{class:["vxe-form--item-content",O?"align--".concat(O):null]},B.concat([x?t("div",{class:"vxe-form--item-trigger-node",on:{click:e.toggleCollapseEvent}},[t("span",{class:"vxe-form--item-trigger-text"},d?i.default.i18n("vxe.form.unfolding"):i.default.i18n("vxe.form.folding")),t("i",{class:["vxe-form--item-trigger-icon",d?i.default.icon.FORM_FOLDING:i.default.icon.FORM_UNFOLDING]})]):null,E&&h.showMessage?t("div",{class:"vxe-form--item-valid",style:E.maxWidth?{width:"".concat(E.maxWidth,"px")}:null},E.message):null]))])])}(t,e,this.itemConfig,this.$scopedSlots):t("div")}};e.default=d},8e3:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=h(n(8478)),o=h(n(5042)),a=h(n(7500)),s=h(n(5053)),u=n(6970),c=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=d(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(1455)),l=n(2526),f=(n(5981),h(n(6152)));function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(d=function(t){return t?n:e})(t)}function h(t){return t&&t.__esModule?t:{default:t}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,{$options:e,required:e.required,min:e.min,max:e.min,type:e.type,pattern:e.pattern,validator:e.validator,trigger:e.trigger,maxWidth:e.maxWidth})}var e,n;return e=t,(n=[{key:"content",get:function(){return(0,u.getFuncText)(this.$options.content||this.$options.message)}},{key:"message",get:function(){return this.content}}])&&g(e.prototype,n),t}();function m(t,e){var n=t.type,r=t.min,o=t.max,a=t.pattern,s="number"===n,u=s?i.default.toNumber(e):i.default.getSize(e);return!(!s||!isNaN(e))||!i.default.eqNull(r)&&u<i.default.toNumber(r)||!i.default.eqNull(o)&&u>i.default.toNumber(o)||!(!a||(i.default.isRegExp(a)?a:new RegExp(a)).test(e))}var y={name:"VxeForm",mixins:[a.default],props:{collapseStatus:{type:Boolean,default:!0},loading:Boolean,data:Object,size:{type:String,default:function(){return o.default.form.size||o.default.size}},span:{type:[String,Number],default:function(){return o.default.form.span}},align:{type:String,default:function(){return o.default.form.align}},titleAlign:{type:String,default:function(){return o.default.form.titleAlign}},titleWidth:{type:[String,Number],default:function(){return o.default.form.titleWidth}},titleColon:{type:Boolean,default:function(){return o.default.form.titleColon}},titleAsterisk:{type:Boolean,default:function(){return o.default.form.titleAsterisk}},titleOverflow:{type:[Boolean,String],default:null},className:[String,Function],items:Array,rules:Object,preventSubmit:{type:Boolean,default:function(){return o.default.form.preventSubmit}},validConfig:Object,tooltipConfig:Object,customLayout:{type:Boolean,default:function(){return o.default.form.customLayout}}},data:function(){return{collapseAll:this.collapseStatus,staticItems:[],formItems:[],tooltipTimeout:null,tooltipStore:{item:null,visible:!1}}},provide:function(){return{$xeform:this,$xeformgather:null,$xeformitem:null,$xeformiteminfo:null}},computed:{validOpts:function(){return Object.assign({},o.default.form.validConfig,this.validConfig)},tooltipOpts:function(){return Object.assign({},o.default.tooltip,o.default.form.tooltipConfig,this.tooltipConfig)}},watch:{staticItems:function(t){this.formItems=t},items:function(t){this.loadItem(t)},collapseStatus:function(t){this.collapseAll=!!t}},created:function(){var t=this;this.$nextTick((function(){var e=t.items;e&&t.loadItem(e)}))},render:function(t){var e,n=this._e,r=this.loading,o=this.className,a=this.data,u=this.vSize,c=this.tooltipOpts,l=this.formItems,d=this.customLayout,h=s.default._tooltip,g=this.$scopedSlots.default;return t("form",{class:["vxe-form",o?i.default.isFunction(o)?o({items:l,data:a,$form:this}):o:"",(e={},p(e,"size--".concat(u),u),p(e,"is--loading",r),e)],on:{submit:this.submitEvent,reset:this.resetEvent}},[t("div",{class:"vxe-form--wrapper vxe-row"},d?g?g.call(this,t,{}):[]:l.map((function(e,n){return t(f.default,{key:n,props:{itemConfig:e}})}))),t("div",{class:"vxe-form-slots",ref:"hideItem"},d?[]:g?g.call(this,t,{}):[]),t("div",{class:["vxe-loading",{"is--visible":r}]},[t("div",{class:"vxe-loading--spinner"})]),h?t("vxe-tooltip",{ref:"tooltip",props:c}):n()])},methods:{callSlot:function(t,e,n){if(t){var r=this.$scopedSlots;if(i.default.isString(t)&&(t=r[t]||null),i.default.isFunction(t))return t.call(this,e,n)}return[]},loadItem:function(t){var e=this;return this.staticItems=i.default.mapTree(t,(function(t){return(0,l.createItem)(e,t)}),{children:"children"}),this.$nextTick()},getItems:function(){var t=[];return i.default.eachTree(this.formItems,(function(e){t.push(e)}),{children:"children"}),t},getItemByField:function(t){var e=i.default.findTree(this.formItems,(function(e){return e.field===t}),{children:"children"});return e?e.item:null},toggleCollapse:function(){var t=!this.collapseAll;return this.collapseAll=t,this.$emit("update:collapseStatus",t),this.$nextTick()},toggleCollapseEvent:function(t){this.toggleCollapse();var e=this.collapseAll;this.$emit("toggle-collapse",{status:e,collapse:e,data:this.data,$form:this,$event:t},t),this.$emit("collapse",{status:e,collapse:e,data:this.data,$form:this,$event:t},t)},submitEvent:function(t){var e=this;t.preventDefault(),this.preventSubmit||(this.clearValidate(),this.beginValidate(this.getItems()).then((function(n){n?e.$emit("submit-invalid",{data:e.data,errMap:n,$form:e,$event:t}):e.$emit("submit",{data:e.data,$event:t})})))},reset:function(){var t=this,e=this.data;return e&&this.getItems().forEach((function(n){var r=n.field,o=n.resetValue,a=n.itemRender;if((0,u.isEnableConf)(a)){var c=s.default.renderer.get(a.name);c&&c.itemResetMethod?c.itemResetMethod({data:e,field:r,property:r,item:n,$form:t}):r&&i.default.set(e,r,null===o?function(t,e){return i.default.isArray(t)&&(e=[]),e}(i.default.get(e,r),void 0):o)}})),this.clearValidate()},resetEvent:function(t){t.preventDefault(),this.reset(),this.$emit("reset",{data:this.data,$form:this,$event:t})},closeTooltip:function(){var t=this.tooltipStore,e=this.$refs.tooltip;return t.visible&&(Object.assign(t,{item:null,visible:!1}),e&&e.close()),this.$nextTick()},triggerTitleTipEvent:function(t,e){var n=e.item,r=this.tooltipStore,i=this.$refs.tooltip,o=t.currentTarget.children[0],a=(o.textContent||"").trim(),s=o.scrollWidth>o.clientWidth;clearTimeout(this.tooltipTimeout),r.item!==n&&this.closeTooltip(),a&&s&&(Object.assign(r,{item:n,visible:!0}),i&&i.open(o,a))},handleTitleTipLeaveEvent:function(){var t=this,e=this.tooltipOpts,n=this.$refs.tooltip;n&&n.setActived(!1),e.enterable?this.tooltipTimeout=setTimeout((function(){(n=t.$refs.tooltip)&&!n.isActived()&&t.closeTooltip()}),e.leaveDelay):this.closeTooltip()},clearValidate:function(t){if(t){var e=(0,l.handleFieldOrItem)(this,t);e&&(e.showError=!1)}else this.getItems().forEach((function(t){t.showError=!1}));return this.$nextTick()},validate:function(t){return this.clearValidate(),this.beginValidate(this.getItems(),"",t)},validateField:function(t,e){var n=(0,l.handleFieldOrItem)(this,t);return this.beginValidate(n?[n]:[],"",e)},beginValidate:function(t,e,n){var r=this,i=this.data,o=this.rules,a=this.validOpts,s={},u=[],c=[];return clearTimeout(this.showErrTime),i&&o?(t.forEach((function(t){var n=t.field;n&&c.push(r.validItemRules(e||"all",n).then((function(){t.errRule=null})).catch((function(e){var o=e.rule,a={rule:o,rules:e.rules,data:i,field:n,property:n,$form:r};return s[n]||(s[n]=[]),s[n].push(a),u.push(n),t.errRule=o,Promise.reject(a)})))})),Promise.all(c).then((function(){n&&n()})).catch((function(){return new Promise((function(e){r.showErrTime=setTimeout((function(){t.forEach((function(t){t.errRule&&(t.showError=!0)}))}),20),a.autoPos&&r.$nextTick((function(){r.handleFocus(u)})),n?(n(s),e()):e(s)}))}))):(n&&n(),Promise.resolve())},validItemRules:function(t,e,n){var r=this,o=this.data,a=this.rules,s=[],c=[];if(e&&a){var l=i.default.get(a,e);if(l){var f=i.default.isUndefined(n)?i.default.get(o,e):n;l.forEach((function(n){var a=n.type,d=n.trigger,h=n.required;if("all"===t||!d||t===n.trigger)if(i.default.isFunction(n.validator)){var p=n.validator({itemValue:f,rule:n,rules:l,data:o,field:e,property:e,$form:r});p&&(i.default.isError(p)?s.push(new v({type:"custom",trigger:d,content:p.message,rule:new v(n)})):p.catch&&c.push(p.catch((function(t){s.push(new v({type:"custom",trigger:d,content:t?t.message:n.content||n.message,rule:new v(n)}))}))))}else{var g="array"===a||i.default.isArray(f)?!i.default.isArray(f)||!f.length:(0,u.eqEmptyValue)(f);(h?g||m(n,f):!g&&m(n,f))&&s.push(new v(n))}}))}}return Promise.all(c).then((function(){if(s.length){var t={rules:s,rule:s[0]};return Promise.reject(t)}}))},handleFocus:function(t){var e=this,n=this.$el;t.some((function(t,r){var i=e.getItemByField(t);if(i&&(0,u.isEnableConf)(i.itemRender)){var o,a=i.itemRender,l=s.default.renderer.get(a.name);if(r||c.default.scrollToView(n.querySelector(".".concat(i.id))),a.autofocus&&(o=n.querySelector(".".concat(i.id," ").concat(a.autofocus))),!o&&l&&l.autofocus&&(o=n.querySelector(".".concat(i.id," ").concat(l.autofocus))),o){if(o.focus(),c.browse.msie){var f=o.createTextRange();f.collapse(!1),f.select()}return!0}}}))},triggerItemEvent:function(t,e,n){var r=this;return e?this.validItemRules(t?t.type:"all",e,n).then((function(){r.clearValidate(e)})).catch((function(t){var n=t.rule,i=r.getItemByField(e);i&&(i.showError=!0,i.errRule=n)})):this.$nextTick()},updateStatus:function(t,e){var n=t.field;return this.triggerItemEvent(new Event("change"),n,e)}}};e.default=y},4070:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderTitle=function(t,e,n){var r=e.data,a=e.tooltipOpts,s=n.slots,c=n.field,d=n.itemRender,h=n.titlePrefix,p=n.titleSuffix,g=(0,o.isEnableConf)(d)?i.default.renderer.get(d.name):null,v={data:r,property:c,item:n,$form:e},m=[],y=[];h&&y.push(h.content||h.message?t("vxe-tooltip",{props:u(u(u({},a),h),{},{content:(0,o.getFuncText)(h.content||h.message)})},[l(t,h)]):l(t,h)),y.push(t("span",{class:"vxe-form--item-title-label"},g&&g.renderItemTitle?g.renderItemTitle(d,v):s&&s.title?e.callSlot(s.title,v,t):(0,o.getFuncText)(n.title))),m.push(t("div",{class:"vxe-form--item-title-content"},y));var b=[];return p&&b.push(p.content||p.message?t("vxe-tooltip",{props:u(u(u({},a),h),{},{content:(0,o.getFuncText)(p.content||p.message)})},[f(t,p)]):f(t,p)),m.push(t("div",{class:"vxe-form--item-title-postfix"},b)),m};var r=a(n(5042)),i=a(n(5053)),o=n(6970);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){return t("span",{class:"vxe-form--item-title-prefix"},[t("i",{class:e.icon||r.default.icon.FORM_PREFIX})])}function f(t,e){return t("span",{class:"vxe-form--item-title-suffix"},[t("i",{class:e.icon||r.default.icon.FORM_SUFFIX})])}},2526:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assemItem=function(t){var e=t.$el,n=t.$xeform,r=t.$xeformgather,i=t.itemConfig,o=r?r.itemConfig:null;i.slots=t.$scopedSlots,o?(o.children||(o.children=[]),o.children.splice([].indexOf.call(r.$el.children,e),0,i)):n.staticItems.splice([].indexOf.call(n.$refs.hideItem.children,e),0,i)},e.createItem=function(t,e){return u(t,e)},e.destroyItem=function(t){var e=t.$xeform,n=t.itemConfig,i=r.default.findTree(e.staticItems,(function(t){return t===n}));i&&i.items.splice(i.index,1)},e.getItemConfig=u,e.handleFieldOrItem=void 0,e.isItem=s;var r=i(n(8478));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}i(n(5053)),n(5981);var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,{id:r.default.uniqueId("item_"),title:n.title,field:n.field,span:n.span,align:n.align,titleAlign:n.titleAlign,titleWidth:n.titleWidth,titleColon:n.titleColon,titleAsterisk:n.titleAsterisk,titlePrefix:n.titlePrefix,titleSuffix:n.titleSuffix,titleOverflow:n.titleOverflow,resetValue:n.resetValue,visible:n.visible,visibleMethod:n.visibleMethod,folding:n.folding,collapseNode:n.collapseNode,className:n.className,itemRender:n.itemRender,showError:!1,errRule:null,slots:n.slots,children:[]})}var e,n;return e=t,(n=[{key:"update",value:function(t,e){this[t]=e}}])&&o(e.prototype,n),t}();function s(t){return t instanceof a}function u(t,e,n){return s(e)?e:new a(t,e,n)}e.handleFieldOrItem=function(t,e){return e?r.default.isString(e)?t.getItemByField(e):e:null}},3365:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Grid=void 0;var r=o(n(8977)),i=o(n(5053));function o(t){return t&&t.__esModule?t:{default:t}}var a=Object.assign(r.default,{install:function(t){i.default.Grid=r.default,i.default.GridComponent=r.default,t.component(r.default.name,r.default)}});e.Grid=a;var s=a;e.default=s},8977:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=g(n(4344)),o=g(n(8478)),a=g(n(5042)),s=g(n(7500)),u=g(n(5053)),c=p(n(6970)),l=p(n(1455)),f=n(8468),d=n(5981);function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(h=function(t){return t?n:e})(t)}function p(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=h(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}function g(t){return t&&t.__esModule?t:{default:t}}function v(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w={},_=Object.keys(i.default.props);function E(t,e){var n=e.$scopedSlots,r=e.proxyConfig,i=e.proxyOpts,a=e.formData,s=e.formConfig,u=e.formOpts;if((0,c.isEnableConf)(s)&&u.items&&u.items.length){var l={};if(!u.inited){u.inited=!0;var f=i.beforeItem;i&&f&&u.items.forEach((function(t){f.call(e,{$grid:e,item:t})}))}return u.items.forEach((function(t){o.default.each(t.slots,(function(t){o.default.isFunction(t)||n[t]&&(l[t]=n[t])}))})),[t("vxe-form",{props:Object.assign({},u,{data:r&&i.form?a:u.data}),on:{submit:e.submitEvent,reset:e.resetEvent,collapse:e.collapseEvent,"submit-invalid":e.submitInvalidEvent},scopedSlots:l})]}return[]}function S(t,e,n){var r=t.$scopedSlots,i=e[n];if(i){if(!o.default.isString(i))return i;if(r[i])return r[i]}return null}function C(t){t.$scopedSlots;var e,n,r=t.toolbarOpts.slots,i={};return r&&(e=S(t,r,"buttons"),n=S(t,r,"tools"),e&&(i.buttons=e),n&&(i.tools=n)),i}function k(t){var e,n,r=t.pagerOpts.slots,i={};return r&&(e=S(t,r,"left"),n=S(t,r,"right"),e&&(i.left=e),n&&(i.right=n)),i}Object.keys(i.default.methods).forEach((function(t){w[t]=function(){var e;return this.$refs.xTable&&(e=this.$refs.xTable)[t].apply(e,arguments)}}));var M={name:"VxeGrid",mixins:[s.default],props:b(b({},i.default.props),{},{columns:Array,pagerConfig:[Boolean,Object],proxyConfig:Object,toolbar:[Boolean,Object],toolbarConfig:[Boolean,Object],formConfig:[Boolean,Object],zoomConfig:Object,size:{type:String,default:function(){return a.default.grid.size||a.default.size}}}),provide:function(){return{$xegrid:this}},data:function(){return{tableLoading:!1,isZMax:!1,tableData:[],pendingRecords:[],filterData:[],formData:{},sortData:[],tZindex:0,tablePage:{total:0,pageSize:10,currentPage:1}}},computed:{isMsg:function(){return!1!==this.proxyOpts.message},proxyOpts:function(){return Object.assign({},a.default.grid.proxyConfig,this.proxyConfig)},pagerOpts:function(){return Object.assign({},a.default.grid.pagerConfig,this.pagerConfig)},formOpts:function(){return Object.assign({},a.default.grid.formConfig,this.formConfig)},toolbarOpts:function(){return Object.assign({},a.default.grid.toolbarConfig,this.toolbarConfig||this.toolbar)},zoomOpts:function(){return Object.assign({},a.default.grid.zoomConfig,this.zoomConfig)},renderStyle:function(){return this.isZMax?{zIndex:this.tZindex}:null},tableExtendProps:function(){var t=this,e={};return _.forEach((function(n){e[n]=t[n]})),e},tableProps:function(){var t=this.isZMax,e=this.seqConfig,n=this.pagerConfig,r=this.loading,i=this.editConfig,o=this.proxyConfig,a=this.proxyOpts,s=this.tableExtendProps,u=this.tableLoading,l=this.tablePage,f=this.tableData,d=Object.assign({},s);return t&&(s.maxHeight?d.maxHeight="auto":d.height="auto"),o&&(d.loading=r||u,d.data=f,d.rowClassName=this.handleRowClassName,a.seq&&(0,c.isEnableConf)(n)&&(d.seqConfig=Object.assign({},e,{startIndex:(l.currentPage-1)*l.pageSize}))),i&&(d.editConfig=Object.assign({},i,{activeMethod:this.handleActiveMethod})),d}},watch:{columns:function(t){var e=this;this.$nextTick((function(){return e.loadColumn(t)}))},toolbar:function(t){t&&this.initToolbar()},toolbarConfig:function(t){t&&this.initToolbar()},proxyConfig:function(){this.initProxy()},pagerConfig:function(){this.initPages()}},created:function(){var t=this.data,e=this.formOpts,n=this.proxyOpts;this.proxyConfig&&(t||n.form&&e.data)&&(0,d.errLog)("vxe.error.errConflicts",["grid.data","grid.proxy-config"]),f.GlobalEvent.on(this,"keydown",this.handleGlobalKeydownEvent)},mounted:function(){this.columns&&this.columns.length&&this.loadColumn(this.columns),this.initToolbar(),this.initPages(),this.initProxy()},destroyed:function(){f.GlobalEvent.off(this,"keydown")},render:function(t){var e,n,r,i,a,s,u=this.$scopedSlots,l=this.vSize,f=this.isZMax,d=!(!u.form&&!(0,c.isEnableConf)(this.formConfig)),h=!!(u.toolbar||(0,c.isEnableConf)(this.toolbarConfig)||this.toolbar),p=!(!u.pager&&!(0,c.isEnableConf)(this.pagerConfig));return t("div",{class:["vxe-grid",(e={},x(e,"size--".concat(l),l),x(e,"is--animat",!!this.animat),x(e,"is--round",this.round),x(e,"is--maximize",f),x(e,"is--loading",this.loading||this.tableLoading),e)],style:this.renderStyle},[d?t("div",{ref:"formWrapper",class:"vxe-grid--form-wrapper"},u.form?u.form.call(this,{$grid:this},t):E(t,this)):null,h?t("div",{ref:"toolbarWrapper",class:"vxe-grid--toolbar-wrapper"},u.toolbar?u.toolbar.call(this,{$grid:this},t):[t("vxe-toolbar",{props:this.toolbarOpts,ref:"xToolbar",scopedSlots:C(this)})]):null,u.top?t("div",{ref:"topWrapper",class:"vxe-grid--top-wrapper"},u.top.call(this,{$grid:this},t)):null,t("vxe-table",{props:this.tableProps,on:(n=this,r=n.$listeners,i=n.proxyConfig,a=n.proxyOpts,s={},o.default.each(r,(function(t,e){s[e]=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.$emit.apply(n,[e].concat(r))}})),i&&(a.sort&&(s["sort-change"]=n.sortChangeEvent),a.filter&&(s["filter-change"]=n.filterChangeEvent)),s),scopedSlots:u,ref:"xTable"}),u.bottom?t("div",{ref:"bottomWrapper",class:"vxe-grid--bottom-wrapper"},u.bottom.call(this,{$grid:this},t)):null,p?t("div",{ref:"pagerWrapper",class:"vxe-grid--pager-wrapper"},u.pager?u.pager.call(this,{$grid:this},t):[t("vxe-pager",{props:b(b({},this.pagerOpts),this.proxyConfig?this.tablePage:{}),on:{"page-change":this.pageChangeEvent},scopedSlots:k(this)})]):null])},methods:b(b({},w),{},{callSlot:function(t,e,n,r){if(t){var i=this.$scopedSlots;if(o.default.isString(t)&&(t=i[t]||null),o.default.isFunction(t))return t.call(this,e,n,r)}return[]},getParentHeight:function(){var t=this.$el;return(this.isZMax?l.default.getDomNode().visibleHeight:o.default.toNumber(getComputedStyle(t.parentNode).height))-this.getExcludeHeight()},getExcludeHeight:function(){var t=this.$refs,e=this.$el,n=this.isZMax,r=this.height,i=t.formWrapper,o=t.toolbarWrapper,a=t.topWrapper,s=t.bottomWrapper,u=t.pagerWrapper;return(n||"auto"!==r?0:(0,l.getPaddingTopBottomSize)(e.parentNode))+(0,l.getPaddingTopBottomSize)(e)+(0,l.getOffsetHeight)(i)+(0,l.getOffsetHeight)(o)+(0,l.getOffsetHeight)(a)+(0,l.getOffsetHeight)(s)+(0,l.getOffsetHeight)(u)},handleRowClassName:function(t){var e=this.rowClassName,n=[];return this.pendingRecords.some((function(e){return e===t.row}))&&n.push("row--pending"),n.push(e?o.default.isFunction(e)?e(t):e:""),n},handleActiveMethod:function(t){var e=this.editConfig,n=e?e.activeMethod:null;return-1===this.pendingRecords.indexOf(t.row)&&(!n||n(b(b({},t),{},{$grid:this})))},initToolbar:function(){var t=this;this.$nextTick((function(){var e=t.$refs,n=e.xTable,r=e.xToolbar;n&&r&&n.connect(r)}))},initPages:function(){var t=this.tablePage,e=this.pagerConfig,n=this.pagerOpts,r=n.currentPage,i=n.pageSize;e&&(r&&(t.currentPage=r),i&&(t.pageSize=i))},initProxy:function(){var t=this,e=this.proxyInited,n=this.proxyConfig,r=this.proxyOpts,i=this.formConfig,a=this.formOpts;if(n){if((0,c.isEnableConf)(i)&&r.form&&a.items){var s={};a.items.forEach((function(t){var e=t.field,n=t.itemRender;if(e){var r=null;if(n){var i=n.defaultValue;o.default.isFunction(i)?r=i({item:t}):o.default.isUndefined(i)||(r=i)}s[e]=r}})),this.formData=s}e||!1===r.autoLoad||(this.proxyInited=!0,this.$nextTick((function(){return t.commitProxy("_init")})))}},handleGlobalKeydownEvent:function(t){27===t.keyCode&&this.isZMax&&!1!==this.zoomOpts.escRestore&&this.triggerZoomEvent(t)},commitProxy:function(t){var e,n,r=this,i=this.$refs,s=this.toolbar,l=this.toolbarConfig,f=this.toolbarOpts,d=this.proxyOpts,h=this.tablePage,p=this.pagerConfig,g=this.editRules,m=this.formData,y=this.isMsg,x=d.beforeQuery,w=d.afterQuery,_=d.beforeDelete,E=d.afterDelete,S=d.beforeSave,C=d.afterSave,k=d.ajax,M=void 0===k?{}:k,O=d.props,T=void 0===O?{}:O,A=i.xTable;if(o.default.isString(t)){var N=l||s?o.default.findTree(f.buttons,(function(e){return e.code===t}),{children:"dropdowns"}):null;n=t,e=N?N.item:null}else n=(e=t).code;for(var I=e?e.params:null,P=arguments.length,D=new Array(P>1?P-1:0),L=1;L<P;L++)D[L-1]=arguments[L];switch(n){case"insert":this.insert();break;case"insert_actived":this.insert().then((function(t){var e=t.row;return r.setActiveRow(e)}));break;case"mark_cancel":this.triggerPendingEvent(n);break;case"remove":return this.handleDeleteRow(n,"vxe.grid.removeSelectRecord",(function(){return r.removeCheckboxRow()}));case"import":this.importData(I);break;case"open_import":this.openImport(I);break;case"export":this.exportData(I);break;case"open_export":this.openExport(I);break;case"reset_custom":this.resetColumn(!0);break;case"_init":case"reload":case"query":var R=M.query;if(R){var j="_init"===n,B="reload"===n,F=[],z=[],$={};if(p&&((j||B)&&(h.currentPage=1),(0,c.isEnableConf)(p)&&($=b({},h))),j){var G=A.sortOpts.defaultSort;G&&(o.default.isArray(G)||(G=[G]),F=G.map((function(t){return{field:t.field,property:t.field,order:t.order}}))),z=A.getCheckedFilters()}else B?(this.pendingRecords=[],A.clearAll()):(F=A.getSortColumns(),z=A.getCheckedFilters());var V={code:n,button:e,$grid:this,page:$,sort:F.length?F[0]:{},sorts:F,filters:z,form:m,options:R};this.sortData=F,this.filterData=z,this.tableLoading=!0;var U=[V].concat(D);return Promise.resolve((x||R).apply(void 0,v(U))).catch((function(t){return t})).then((function(t){if(r.tableLoading=!1,t)if((0,c.isEnableConf)(p)){var e=o.default.get(t,T.total||"page.total")||0;h.total=o.default.toNumber(e),r.tableData=o.default.get(t,T.result||"result")||[];var n=Math.max(Math.ceil(e/h.pageSize),1);h.currentPage>n&&(h.currentPage=n)}else r.tableData=(T.list?o.default.get(t,T.list):t)||[];else r.tableData=[];w&&w.apply(void 0,v(U))}))}break;case"delete":var W=M.delete;if(W){var H=A.getCheckboxRecords(),Y=H.filter((function(t){return!A.isInsertByRow(t)})),X=[{$grid:this,code:n,button:e,body:{removeRecords:Y},options:W}].concat(D);if(H.length)return this.handleDeleteRow(n,"vxe.grid.deleteSelectRecord",(function(){return Y.length?(r.tableLoading=!0,Promise.resolve((_||W).apply(void 0,v(X))).then((function(t){r.tableLoading=!1,r.pendingRecords=r.pendingRecords.filter((function(t){return-1===Y.indexOf(t)})),y&&u.default.modal.message({content:r.getRespMsg(t,"vxe.grid.delSuccess"),status:"success"}),E?E.apply(void 0,v(X)):r.commitProxy("query")})).catch((function(t){r.tableLoading=!1,y&&u.default.modal.message({id:n,content:r.getRespMsg(t,"vxe.grid.operError"),status:"error"})}))):A.remove(H)}));y&&u.default.modal.message({id:n,content:a.default.i18n("vxe.grid.selectOneRecord"),status:"warning"})}break;case"save":var q=M.save;if(q){var Z=Object.assign({pendingRecords:this.pendingRecords},this.getRecordset()),K=Z.insertRecords,J=Z.removeRecords,Q=Z.updateRecords,tt=Z.pendingRecords,et=[{$grid:this,code:n,button:e,body:Z,options:q}].concat(D);K.length&&(Z.pendingRecords=tt.filter((function(t){return-1===K.indexOf(t)}))),tt.length&&(Z.insertRecords=K.filter((function(t){return-1===tt.indexOf(t)})));var nt=Promise.resolve();return g&&(nt=this.validate(Z.insertRecords.concat(Q))),nt.then((function(t){if(!t)return Z.insertRecords.length||J.length||Q.length||Z.pendingRecords.length?(r.tableLoading=!0,Promise.resolve((S||q).apply(void 0,v(et))).then((function(t){r.tableLoading=!1,r.pendingRecords=[],y&&u.default.modal.message({content:r.getRespMsg(t,"vxe.grid.saveSuccess"),status:"success"}),C?C.apply(void 0,v(et)):r.commitProxy("query")})).catch((function(t){r.tableLoading=!1,y&&u.default.modal.message({id:n,content:r.getRespMsg(t,"vxe.grid.operError"),status:"error"})}))):void(y&&u.default.modal.message({id:n,content:a.default.i18n("vxe.grid.dataUnchanged"),status:"info"}))}))}break;default:var rt=u.default.commands.get(n);rt&&rt.apply(void 0,[{code:n,button:e,$grid:this,$table:A}].concat(D))}return this.$nextTick()},getRespMsg:function(t,e){var n,r=this.proxyOpts.props,i=void 0===r?{}:r;return t&&i.message&&(n=o.default.get(t,i.message)),n||a.default.i18n(e)},handleDeleteRow:function(t,e,n){var r=this.getCheckboxRecords();if(this.isMsg){if(r.length)return u.default.modal.confirm({id:"cfm_".concat(t),content:a.default.i18n(e),escClosable:!0}).then((function(t){"confirm"===t&&n()}));u.default.modal.message({id:"msg_".concat(t),content:a.default.i18n("vxe.grid.selectOneRecord"),status:"warning"})}else r.length&&n();return Promise.resolve()},getFormItems:function(t){var e=this.formConfig,n=this.formOpts,r=[];return o.default.eachTree((0,c.isEnableConf)(e)&&n.items?n.items:[],(function(t){r.push(t)}),{children:"children"}),o.default.isUndefined(t)?r:r[t]},getPendingRecords:function(){return this.pendingRecords},triggerToolbarBtnEvent:function(t,e){this.commitProxy(t,e),this.$emit("toolbar-button-click",{code:t.code,button:t,$grid:this,$event:e})},triggerToolbarTolEvent:function(t,e){this.commitProxy(t,e),this.$emit("toolbar-tool-click",{code:t.code,tool:t,$grid:this,$event:e})},triggerPendingEvent:function(t){var e=this.pendingRecords,n=this.isMsg,r=this.getCheckboxRecords();if(r.length){var i=[],o=[];r.forEach((function(t){e.some((function(e){return t===e}))?o.push(t):i.push(t)})),o.length?this.pendingRecords=e.filter((function(t){return-1===o.indexOf(t)})).concat(i):i.length&&(this.pendingRecords=e.concat(i)),this.clearCheckboxRow()}else n&&u.default.modal.message({id:t,content:a.default.i18n("vxe.grid.selectOneRecord"),status:"warning"})},pageChangeEvent:function(t){var e=this.proxyConfig,n=this.tablePage,r=t.currentPage,i=t.pageSize;n.currentPage=r,n.pageSize=i,this.$emit("page-change",Object.assign({$grid:this},t)),e&&this.commitProxy("query")},sortChangeEvent:function(t){var e=t.$table,n=t.column,r=t.sortList;(o.default.isBoolean(n.remoteSort)?n.remoteSort:e.sortOpts.remote)&&(this.sortData=r,this.proxyConfig&&(this.tablePage.currentPage=1,this.commitProxy("query"))),this.$emit("sort-change",Object.assign({$grid:this},t))},filterChangeEvent:function(t){var e=t.$table,n=t.filterList;e.filterOpts.remote&&(this.filterData=n,this.proxyConfig&&(this.tablePage.currentPage=1,this.commitProxy("query"))),this.$emit("filter-change",Object.assign({$grid:this},t))},submitEvent:function(t){this.proxyConfig&&this.commitProxy("reload"),this.$emit("form-submit",Object.assign({$grid:this},t))},resetEvent:function(t){this.proxyConfig&&this.commitProxy("reload"),this.$emit("form-reset",Object.assign({$grid:this},t))},submitInvalidEvent:function(t){this.$emit("form-submit-invalid",Object.assign({$grid:this},t))},collapseEvent:function(t){var e=this;this.$nextTick((function(){return e.recalculate(!0)})),this.$emit("form-toggle-collapse",Object.assign({$grid:this},t)),this.$emit("form-collapse",Object.assign({$grid:this},t))},triggerZoomEvent:function(t){this.zoom(),this.$emit("zoom",{$grid:this,type:this.isZMax?"max":"revert",$event:t})},zoom:function(){return this[this.isZMax?"revert":"maximize"]()},isMaximized:function(){return this.isZMax},maximize:function(){return this.handleZoom(!0)},revert:function(){return this.handleZoom()},handleZoom:function(t){var e=this,n=this.isZMax;return(t?!n:n)&&(this.isZMax=!n,this.tZindex<c.default.getLastZIndex()&&(this.tZindex=c.default.nextZIndex())),this.$nextTick().then((function(){return e.recalculate(!0)})).then((function(){return e.isZMax}))},getProxyInfo:function(){var t=this.sortData;return this.proxyConfig?{data:this.tableData,filter:this.filterData,form:this.formData,sort:t.length?t[0]:{},sorts:t,pager:this.tablePage,pendingRecords:this.pendingRecords}:null}},null)};e.default=M},7414:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Header=void 0;var r,i=(r=n(9236))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Header=o;var a=o;e.default=a},9236:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(8478)),i=u(n(6970)),o=u(n(1455)),a=n(9521),s=n(9211);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l="header",f={name:"VxeTableHeader",props:{tableData:Array,tableColumn:Array,tableGroupColumn:Array,fixedColumn:Array,size:String,fixedType:String},data:function(){return{headerColumn:[]}},watch:{tableColumn:function(){this.uploadColumn()}},created:function(){this.uploadColumn()},mounted:function(){var t=this.$parent,e=this.$el,n=this.$refs,r=this.fixedType,i=t.elemStore,o="".concat(r||"main","-header-");i["".concat(o,"wrapper")]=e,i["".concat(o,"table")]=n.table,i["".concat(o,"colgroup")]=n.colgroup,i["".concat(o,"list")]=n.thead,i["".concat(o,"xSpace")]=n.xSpace,i["".concat(o,"repair")]=n.repair},destroyed:function(){var t=this.$parent,e=this.fixedType,n=t.elemStore,r="".concat(e||"main","-header-");n["".concat(r,"wrapper")]=null,n["".concat(r,"table")]=null,n["".concat(r,"colgroup")]=null,n["".concat(r,"list")]=null,n["".concat(r,"xSpace")]=null,n["".concat(r,"repair")]=null},render:function(t){var e=this,n=this._e,o=this.$parent,a=this.fixedType,s=this.headerColumn,u=this.fixedColumn,f=o.$listeners,d=o.tId,h=o.isGroup,p=o.resizable,g=o.border,v=o.columnKey,m=o.headerRowClassName,y=o.headerCellClassName,b=o.headerRowStyle,x=o.headerCellStyle,w=o.showHeaderOverflow,_=o.headerAlign,E=o.align,S=o.highlightCurrentColumn,C=o.currentColumn,k=o.scrollXLoad,M=o.overflowX,O=o.scrollbarWidth,T=o.sortOpts,A=o.mouseConfig,N=o.columnOpts,I=this.tableColumn,P=s;return h||(a&&(k||w)&&(I=u),P=[I]),t("div",{class:["vxe-table--header-wrapper",a?"fixed-".concat(a,"--wrapper"):"body--wrapper"],attrs:{xid:d}},[a?n():t("div",{class:"vxe-body--x-space",ref:"xSpace"}),t("table",{class:"vxe-table--header",attrs:{xid:d,cellspacing:0,cellpadding:0,border:0},ref:"table"},[t("colgroup",{ref:"colgroup"},I.map((function(e,n){return t("col",{attrs:{name:e.id},key:n})})).concat(O?[t("col",{attrs:{name:"col_gutter"}})]:[])),t("thead",{ref:"thead"},P.map((function(n,s){return t("tr",{class:["vxe-header--row",m?r.default.isFunction(m)?m({$table:o,$rowIndex:s,fixed:a,type:l}):m:""],style:b?r.default.isFunction(b)?b({$table:o,$rowIndex:s,fixed:a,type:l}):b:null},n.map((function(u,d){var h,m=u.type,b=u.showHeaderOverflow,O=u.headerAlign,I=u.align,P=u.headerClassName,D=u.children&&u.children.length,L=a?u.fixed!==a&&!D:u.fixed&&M,R=r.default.isUndefined(b)||r.default.isNull(b)?w:b,j=O||I||_||E,B="ellipsis"===R,F="title"===R,z=!0===R||"tooltip"===R,$=F||z||B,G={},V=u.filters&&u.filters.some((function(t){return t.checked})),U=o.getColumnIndex(u),W=o.getVTColumnIndex(u),H={$table:o,$rowIndex:s,column:u,columnIndex:U,$columnIndex:d,_columnIndex:W,fixed:a,type:l,isHidden:L,hasFilter:V};return k&&!$&&(B=$=!0),(N.isCurrent||S||f["header-cell-click"]||"cell"===T.trigger)&&(G.click=function(t){return o.triggerHeaderCellClickEvent(t,H)}),f["header-cell-dblclick"]&&(G.dblclick=function(t){return o.triggerHeaderCellDblclickEvent(t,H)}),A&&(G.mousedown=function(t){return o.triggerHeaderCellMousedownEvent(t,H)}),t("th",{class:["vxe-header--column",u.id,(h={},c(h,"col--".concat(j),j),c(h,"col--".concat(m),m),c(h,"col--last",d===n.length-1),c(h,"col--fixed",u.fixed),c(h,"col--group",D),c(h,"col--ellipsis",$),c(h,"fixed--hidden",L),c(h,"is--sortable",u.sortable),c(h,"col--filter",!!u.filters),c(h,"is--filter-active",V),c(h,"col--current",C===u),h),i.default.getClass(P,H),i.default.getClass(y,H)],attrs:{colid:u.id,colspan:u.colSpan>1?u.colSpan:null,rowspan:u.rowSpan>1?u.rowSpan:null},style:x?r.default.isFunction(x)?x(H):x:null,on:G,key:v||N.useKey||D?u.id:d},[t("div",{class:["vxe-cell",{"c--title":F,"c--tooltip":z,"c--ellipsis":B}]},u.renderHeader(t,H)),L||D||!(r.default.isBoolean(u.resizable)?u.resizable:N.resizable||p)?null:t("div",{class:["vxe-resizable",{"is--line":!g||"none"===g}],on:{mousedown:function(t){return e.resizeMousedown(t,H)}}})])})).concat(O?[t("th",{class:"vxe-header--gutter col--gutter"})]:[]))})))]),t("div",{class:"vxe-table--header-border-line",ref:"repair"})])},methods:{uploadColumn:function(){var t=this.$parent;this.headerColumn=t.isGroup?(0,a.convertToRows)(this.tableGroupColumn):[]},resizeMousedown:function(t,e){var n=e.column,r=this.$parent,i=this.$el,a=this.fixedType,u=r.$refs,c=u.tableBody,l=u.leftContainer,f=u.rightContainer,d=u.resizeBar,h=t.target,p=t.clientX,g=e.cell=h.parentNode,v=0,m=c.$el,y=o.default.getOffsetPos(h,i),b=h.clientWidth,x=Math.floor(b/2),w=(0,s.getColMinWidth)(e)-x,_=y.left-g.clientWidth+b+w,E=y.left+x,S=document.onmousemove,C=document.onmouseup,k="left"===a,M="right"===a,O=0;if(k||M){for(var T=k?"nextElementSibling":"previousElementSibling",A=g[T];A&&!o.default.hasClass(A,"fixed--hidden");)o.default.hasClass(A,"col--group")||(O+=A.offsetWidth),A=A[T];M&&f&&(E=f.offsetLeft+O)}var N=function(t){t.stopPropagation(),t.preventDefault();var e=t.clientX-p,n=E+e,r=a?0:m.scrollLeft;k?n=Math.min(n,(f?f.offsetLeft:m.clientWidth)-O-w):M?(_=(l?l.clientWidth:0)+O+w,n=Math.min(n,E+g.clientWidth-w)):_=Math.max(m.scrollLeft,_),v=Math.max(n,_),d.style.left="".concat(v-r,"px")};r._isResize=!0,o.default.addClass(r.$el,"drag--resize"),d.style.display="block",document.onmousemove=N,document.onmouseup=function(t){document.onmousemove=S,document.onmouseup=C,n.resizeWidth=n.renderWidth+(M?E-v:v-E),d.style.display="none",r._isResize=!1,r._lastResizeTime=Date.now(),r.analyColumnWidth(),r.recalculate(!0).then((function(){r.saveCustomResizable(),r.updateCellAreas(),r.emitEvent("resizable-change",e,t)})),o.default.removeClass(r.$el,"drag--resize")},N(t),r.closeMenu()}}};e.default=f},9521:function(t,e){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.convertToRows=void 0;var r=function t(e,r){var i=[];return e.forEach((function(e){var o;e.parentId=r?r.id:null,e.visible&&(e.children&&e.children.length&&e.children.some((function(t){return t.visible}))?(i.push(e),i.push.apply(i,function(t){if(Array.isArray(t))return n(t)}(o=t(e.children,e))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):i.push(e))})),i};e.convertToRows=function(t){var e=1,n=function t(n,r){if(r&&(n.level=r.level+1,e<n.level&&(e=n.level)),n.children&&n.children.length&&n.children.some((function(t){return t.visible}))){var i=0;n.children.forEach((function(e){e.visible&&(t(e,n),i+=e.colSpan)})),n.colSpan=i}else n.colSpan=1};t.forEach((function(t){t.level=1,n(t)}));for(var i=[],o=0;o<e;o++)i.push([]);return r(t).forEach((function(t){t.children&&t.children.length&&t.children.some((function(t){return t.visible}))?t.rowSpan=1:t.rowSpan=e-t.level+1,i[t.level-1].push(t)})),i}},4085:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Icon=void 0;var n={install:function(){}};e.Icon=n;var r=n;e.default=r},9851:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0});var i={};e.default=void 0;var o=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=o?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=t[s]}return i.default=t,n&&n.set(t,i),i}(n(9551));function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(i,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));var s=o;e.default=s},2161:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Input=void 0;var r,i=(r=n(9174))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Input=o;var a=o;e.default=a},5764:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDateQuarter=function(t){var e=t.getMonth();return e<3?1:e<6?2:e<9?3:4},e.toStringTimeDate=function(t){if(t){var e,n,r,o=new Date;if(i.default.isDate(t))e=t.getHours(),n=t.getMinutes(),r=t.getSeconds();else{var a=(t=i.default.toValueString(t)).match(/^(\d{1,2})(:(\d{1,2}))?(:(\d{1,2}))?/);a&&(e=a[1],n=a[3],r=a[5])}return o.setHours(e||0),o.setMinutes(n||0),o.setSeconds(r||0),o}return new Date("")};var r,i=(r=n(8478))&&r.__esModule?r:{default:r}},9174:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=p(n(8478)),o=p(n(5042)),a=p(n(7500)),s=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=h(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(6970)),u=p(n(1455)),c=n(8468),l=n(5764),f=n(5306),d=n(5981);function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(h=function(t){return t?n:e})(t)}function p(t){return t&&t.__esModule?t:{default:t}}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){var n=t.type,r=t.exponential,o=t.digitsValue,a=t.inpMaxlength,s="float"===n?(0,f.toFloatValueFixed)(e,o):i.default.toValueString(e);return!r||e!==s&&i.default.toValueString(e).toLowerCase()!==i.default.toNumber(s).toExponential()?s.slice(0,a):e}function y(t,e,n,r){var o=e.festivalMethod;if(o){var a=o(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({$input:e,type:e.datePanelType,viewType:e.datePanelType},n)),s=a?i.default.isString(a)?{label:a}:a:{},u=s.extra?i.default.isString(s.extra)?{label:s.extra}:s.extra:null,c=[t("span",{class:["vxe-input--date-label",{"is-notice":s.notice}]},u&&u.label?[t("span",r),t("span",{class:["vxe-input--date-label--extra",u.important?"is-important":"",u.className],style:u.style},i.default.toValueString(u.label))]:r)],l=s.label;if(l){var f=i.default.toValueString(l).split(",");c.push(t("span",{class:["vxe-input--date-festival",s.important?"is-important":"",s.className],style:s.style},[f.length>1?t("span",{class:["vxe-input--date-festival--overlap","overlap--".concat(f.length)]},f.map((function(e){return t("span",e.substring(0,3))}))):t("span",{class:"vxe-input--date-festival--label"},f[0].substring(0,3))]))}return c}return r}function b(t,e){var n=t.disabledMethod;return n&&n({$input:t,type:t.datePanelType,viewType:t.datePanelType,date:e.date})}function x(t,e){switch(e.datePanelType){case"week":return function(t,e){var n=e.datePanelType,r=e.dateValue,o=e.datePanelValue,a=e.weekHeaders,s=e.weekDates,u=e.multiple,c=e.dateListValue,l="yyyyMMdd";return[t("table",{class:"vxe-input--date-".concat(n,"-view"),attrs:{cellspacing:0,cellpadding:0,border:0}},[t("thead",[t("tr",a.map((function(e){return t("th",e.label)})))]),t("tbody",s.map((function(n){var a=u?n.some((function(t){return c.some((function(e){return i.default.isDateSame(e,t.date,l)}))})):n.some((function(t){return i.default.isDateSame(r,t.date,l)})),s=n.some((function(t){return i.default.isDateSame(o,t.date,l)}));return t("tr",n.map((function(n){return t("td",{class:{"is--prev":n.isPrev,"is--current":n.isCurrent,"is--now":n.isNow,"is--next":n.isNext,"is--disabled":b(e,n),"is--selected":a,"is--hover":s},on:{click:function(){return e.dateSelectEvent(n)},mouseenter:function(){return e.dateMouseenterEvent(n)}}},y(t,e,n,n.label))})))})))])]}(t,e);case"month":return function(t,e){var n=e.dateValue,r=e.datePanelType,a=e.monthDatas,s=e.datePanelValue,u=e.multiple,c=e.dateListValue,l="yyyyMM";return[t("table",{class:"vxe-input--date-".concat(r,"-view"),attrs:{cellspacing:0,cellpadding:0,border:0}},[t("tbody",a.map((function(r){return t("tr",r.map((function(r){return t("td",{class:{"is--prev":r.isPrev,"is--current":r.isCurrent,"is--now":r.isNow,"is--next":r.isNext,"is--disabled":b(e,r),"is--selected":u?c.some((function(t){return i.default.isDateSame(t,r.date,l)})):i.default.isDateSame(n,r.date,l),"is--hover":i.default.isDateSame(s,r.date,l)},on:{click:function(){return e.dateSelectEvent(r)},mouseenter:function(){return e.dateMouseenterEvent(r)}}},y(t,e,r,o.default.i18n("vxe.input.date.months.m".concat(r.month))))})))})))])]}(t,e);case"quarter":return function(t,e){var n=e.dateValue,r=e.datePanelType,a=e.quarterDatas,s=e.datePanelValue,u=e.multiple,c=e.dateListValue,l="yyyyq";return[t("table",{class:"vxe-input--date-".concat(r,"-view"),attrs:{cellspacing:0,cellpadding:0,border:0}},[t("tbody",a.map((function(r){return t("tr",r.map((function(r){return t("td",{class:{"is--prev":r.isPrev,"is--current":r.isCurrent,"is--now":r.isNow,"is--next":r.isNext,"is--disabled":b(e,r),"is--selected":u?c.some((function(t){return i.default.isDateSame(t,r.date,l)})):i.default.isDateSame(n,r.date,l),"is--hover":i.default.isDateSame(s,r.date,l)},on:{click:function(){return e.dateSelectEvent(r)},mouseenter:function(){return e.dateMouseenterEvent(r)}}},y(t,e,r,o.default.i18n("vxe.input.date.quarters.q".concat(r.quarter))))})))})))])]}(t,e);case"year":return function(t,e){var n=e.dateValue,r=e.datePanelType,o=e.yearDatas,a=e.datePanelValue,s=e.multiple,u=e.dateListValue,c="yyyy";return[t("table",{class:"vxe-input--date-".concat(r,"-view"),attrs:{cellspacing:0,cellpadding:0,border:0}},[t("tbody",o.map((function(r){return t("tr",r.map((function(r){return t("td",{class:{"is--prev":r.isPrev,"is--current":r.isCurrent,"is--now":r.isNow,"is--next":r.isNext,"is--disabled":b(r),"is--selected":s?u.some((function(t){return i.default.isDateSame(t,r.date,c)})):i.default.isDateSame(n,r.date,c),"is--hover":i.default.isDateSame(a,r.date,c)},on:{click:function(){return e.dateSelectEvent(r)},mouseenter:function(){return e.dateMouseenterEvent(r)}}},y(t,e,r,r.year))})))})))])]}(t,e)}return function(t,e){var n=e.datePanelType,r=e.dateValue,o=e.datePanelValue,a=e.dateHeaders,s=e.dayDatas,u=e.multiple,c=e.dateListValue,l="yyyy-MM-dd";return[t("table",{class:"vxe-input--date-".concat(n,"-view"),attrs:{cellspacing:0,cellpadding:0,border:0}},[t("thead",[t("tr",a.map((function(e){return t("th",e.label)})))]),t("tbody",s.map((function(n){return t("tr",n.map((function(n){return t("td",{class:{"is--prev":n.isPrev,"is--current":n.isCurrent,"is--now":n.isNow,"is--next":n.isNext,"is--disabled":b(e,n),"is--selected":u?c.some((function(t){return i.default.isDateSame(t,n.date,l)})):i.default.isDateSame(r,n.date,l),"is--hover":i.default.isDateSame(o,n.date,l)},on:{click:function(){return e.dateSelectEvent(n)},mouseenter:function(){return e.dateMouseenterEvent(n)}}},y(t,e,n,n.label))})))})))])]}(t,e)}function w(t,e){var n=e.datePanelType,r=e.selectDatePanelLabel,i=e.isDisabledPrevDateBtn,a=e.isDisabledNextDateBtn,s=e.multiple,u=e.supportMultiples;return[t("div",{class:"vxe-input--date-picker-header"},[t("div",{class:"vxe-input--date-picker-type-wrapper"},[t("span","year"===n?{class:"vxe-input--date-picker-label"}:{class:"vxe-input--date-picker-btn",on:{click:e.dateToggleTypeEvent}},r)]),t("div",{class:"vxe-input--date-picker-btn-wrapper"},[t("span",{class:["vxe-input--date-picker-btn vxe-input--date-picker-prev-btn",{"is--disabled":i}],on:{click:e.datePrevEvent}},[t("i",{class:"vxe-icon--caret-left"})]),t("span",{class:"vxe-input--date-picker-btn vxe-input--date-picker-current-btn",on:{click:e.dateTodayMonthEvent}},[t("i",{class:"vxe-icon--dot"})]),t("span",{class:["vxe-input--date-picker-btn vxe-input--date-picker-next-btn",{"is--disabled":a}],on:{click:e.dateNextEvent}},[t("i",{class:"vxe-icon--caret-right"})]),s&&u?t("span",{class:"vxe-input--date-picker-btn vxe-input--date-picker-confirm-btn"},[t("button",{class:"vxe-input--date-picker-confirm",attrs:{type:"button"},on:{click:e.dateConfirmEvent}},o.default.i18n("vxe.button.confirm"))]):null])]),t("div",{class:"vxe-input--date-picker-body"},x(t,e))]}function _(t,e){var n=e.dateTimeLabel,r=e.datetimePanelValue,i=e.hourList,a=e.minuteList,s=e.secondList;return[t("div",{class:"vxe-input--time-picker-header"},[t("span",{class:"vxe-input--time-picker-title"},n),t("button",{class:"vxe-input--time-picker-confirm",attrs:{type:"button"},on:{click:e.dateConfirmEvent}},o.default.i18n("vxe.button.confirm"))]),t("div",{ref:"timeBody",class:"vxe-input--time-picker-body"},[t("ul",{class:"vxe-input--time-picker-hour-list"},i.map((function(n,i){return t("li",{key:i,class:{"is--selected":r&&r.getHours()===n.value},on:{click:function(t){return e.dateHourEvent(t,n)}}},n.label)}))),t("ul",{class:"vxe-input--time-picker-minute-list"},a.map((function(n,i){return t("li",{key:i,class:{"is--selected":r&&r.getMinutes()===n.value},on:{click:function(t){return e.dateMinuteEvent(t,n)}}},n.label)}))),t("ul",{class:"vxe-input--time-picker-second-list"},s.map((function(n,i){return t("li",{key:i,class:{"is--selected":r&&r.getSeconds()===n.value},on:{click:function(t){return e.dateSecondEvent(t,n)}}},n.label)})))])]}var E={name:"VxeInput",mixins:[a.default],model:{prop:"value",event:"modelValue"},props:{value:[String,Number,Date],immediate:{type:Boolean,default:!0},name:String,type:{type:String,default:"text"},clearable:{type:Boolean,default:function(){return o.default.input.clearable}},readonly:Boolean,disabled:Boolean,placeholder:String,maxlength:[String,Number],autocomplete:{type:String,default:"off"},align:String,form:String,className:String,size:{type:String,default:function(){return o.default.input.size||o.default.size}},multiple:Boolean,min:{type:[String,Number],default:null},max:{type:[String,Number],default:null},step:[String,Number],exponential:{type:Boolean,default:function(){return o.default.input.exponential}},controls:{type:Boolean,default:function(){return o.default.input.controls}},digits:{type:[String,Number],default:function(){return o.default.input.digits}},dateConfig:Object,minDate:{type:[String,Number,Date],default:function(){return o.default.input.minDate}},maxDate:{type:[String,Number,Date],default:function(){return o.default.input.maxDate}},startWeek:Number,startDay:{type:[String,Number],default:function(){return o.default.input.startDay}},labelFormat:{type:String,default:function(){return o.default.input.labelFormat}},valueFormat:{type:String,default:function(){return o.default.input.valueFormat}},editable:{type:Boolean,default:!0},festivalMethod:{type:Function,default:function(){return o.default.input.festivalMethod}},disabledMethod:{type:Function,default:function(){return o.default.input.disabledMethod}},selectDay:{type:Number,default:function(){return o.default.input.selectDay}},prefixIcon:String,suffixIcon:String,placement:String,transfer:{type:Boolean,default:function(){return o.default.input.transfer}}},inject:{$xeform:{default:null},$xeformiteminfo:{default:null}},data:function(){return{panelIndex:0,showPwd:!1,visiblePanel:!1,animatVisible:!1,panelStyle:null,panelPlacement:null,isActivated:!1,inputValue:this.value,datetimePanelValue:null,datePanelValue:null,datePanelLabel:"",datePanelType:"day",selectMonth:null,currentDate:null}},computed:{isNumType:function(){return["number","integer","float"].indexOf(this.type)>-1},isDatePickerType:function(){return this.isDateTimeType||["date","week","month","quarter","year"].indexOf(this.type)>-1},isDateTimeType:function(){var t=this.type;return"time"===t||"datetime"===t},isPawdType:function(){return"password"===this.type},isSearch:function(){return"search"===this.type},stepValue:function(){var t=this.type,e=this.step;return"integer"===t?i.default.toInteger(e)||1:"float"===t?i.default.toNumber(e)||1/Math.pow(10,this.digitsValue):i.default.toNumber(e)||1},digitsValue:function(){return i.default.toInteger(this.digits)||1},isClearable:function(){return this.clearable&&(this.isPawdType||this.isNumType||this.isDatePickerType||"text"===this.type||"search"===this.type)},isDisabledPrevDateBtn:function(){var t=this.selectMonth,e=this.dateMinTime;return!!t&&t<=e},isDisabledNextDateBtn:function(){var t=this.selectMonth,e=this.dateMaxTime;return!!t&&t>=e},dateMinTime:function(){return this.minDate?i.default.toStringDate(this.minDate):null},dateMaxTime:function(){return this.maxDate?i.default.toStringDate(this.maxDate):null},supportMultiples:function(){return["date","week","month","quarter","year"].includes(this.type)},dateListValue:function(){var t=this,e=this.value,n=this.multiple,r=this.isDatePickerType,o=this.dateValueFormat;return n&&e&&r?i.default.toValueString(e).split(",").map((function(e){var n=t.parseDate(e,o);return i.default.isValidDate(n)?n:null})):[]},dateMultipleValue:function(){var t=this.dateListValue,e=this.dateValueFormat;return t.map((function(t){return i.default.toDateString(t,e)}))},dateMultipleLabel:function(){var t=this.dateListValue,e=this.dateLabelFormat;return t.map((function(t){return i.default.toDateString(t,e)})).join(", ")},dateValue:function(){var t=this.value,e=this.isDatePickerType,n=this.dateValueFormat,r=null;if(t&&e){var o=this.parseDate(t,n);i.default.isValidDate(o)&&(r=o)}return r},dateTimeLabel:function(){var t=this.datetimePanelValue;return t?i.default.toDateString(t,"HH:mm:ss"):""},hmsTime:function(){var t=this.dateValue;return t&&this.isDateTimeType?1e3*(3600*t.getHours()+60*t.getMinutes()+t.getSeconds()):0},dateLabelFormat:function(){return this.isDatePickerType?this.labelFormat||o.default.i18n("vxe.input.date.labelFormat.".concat(this.type)):null},dateValueFormat:function(){var t=this.type;return"time"===t?"HH:mm:ss":this.valueFormat||("datetime"===t?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd")},selectDatePanelLabel:function(){if(this.isDatePickerType){var t,e=this.datePanelType,n=this.selectMonth,r=this.yearList,i="";return n&&(i=n.getFullYear(),t=n.getMonth()+1),"quarter"===e?o.default.i18n("vxe.input.date.quarterLabel",[i]):"month"===e?o.default.i18n("vxe.input.date.monthLabel",[i]):"year"===e?r.length?"".concat(r[0].year," - ").concat(r[r.length-1].year):"":o.default.i18n("vxe.input.date.dayLabel",[i,t?o.default.i18n("vxe.input.date.m".concat(t)):"-"])}return""},firstDayOfWeek:function(){var t=this.startDay,e=this.startWeek;return i.default.toNumber(i.default.isNumber(t)||i.default.isString(t)?t:e)},weekDatas:function(){var t=[];if(this.isDatePickerType){var e=this.firstDayOfWeek;t.push(e);for(var n=0;n<6;n++)e>=6?e=0:e++,t.push(e)}return t},dateHeaders:function(){return this.isDatePickerType?this.weekDatas.map((function(t){return{value:t,label:o.default.i18n("vxe.input.date.weeks.w".concat(t))}})):[]},weekHeaders:function(){return this.isDatePickerType?[{label:o.default.i18n("vxe.input.date.weeks.w")}].concat(this.dateHeaders):[]},yearList:function(){var t=this.selectMonth,e=this.currentDate,n=[];if(t&&e)for(var r=e.getFullYear(),o=t.getFullYear(),a=new Date(o-o%12,0,1),s=-4;s<16;s++){var u=i.default.getWhatYear(a,s,"first"),c=u.getFullYear();n.push({date:u,isCurrent:!0,isPrev:s<0,isNow:r===c,isNext:s>=12,year:c})}return n},yearDatas:function(){return i.default.chunk(this.yearList,4)},quarterList:function(){var t=this.selectMonth,e=this.currentDate,n=[];if(t&&e)for(var r=e.getFullYear(),o=(0,l.getDateQuarter)(e),a=i.default.getWhatYear(t,0,"first"),s=a.getFullYear(),u=-2;u<6;u++){var c=i.default.getWhatQuarter(a,u),f=c.getFullYear(),d=(0,l.getDateQuarter)(c),h=f<s;n.push({date:c,isPrev:h,isCurrent:f===s,isNow:f===r&&d===o,isNext:!h&&f>s,quarter:d})}return n},quarterDatas:function(){return i.default.chunk(this.quarterList,2)},monthList:function(){var t=this.selectMonth,e=this.currentDate,n=[];if(t&&e)for(var r=e.getFullYear(),o=e.getMonth(),a=i.default.getWhatYear(t,0,"first").getFullYear(),s=-4;s<16;s++){var u=i.default.getWhatYear(t,0,s),c=u.getFullYear(),l=u.getMonth(),f=c<a;n.push({date:u,isPrev:f,isCurrent:c===a,isNow:c===r&&l===o,isNext:!f&&c>a,month:l})}return n},monthDatas:function(){return i.default.chunk(this.monthList,4)},dayList:function(){var t=this.weekDatas,e=this.selectMonth,n=this.currentDate,r=this.hmsTime,o=[];if(e&&n)for(var a=n.getFullYear(),s=n.getMonth(),u=n.getDate(),c=e.getFullYear(),l=e.getMonth(),f=e.getDay(),d=-t.indexOf(f),h=new Date(i.default.getWhatDay(e,d).getTime()+r),p=0;p<42;p++){var g=i.default.getWhatDay(h,p),v=g.getFullYear(),m=g.getMonth(),y=g.getDate(),b=g<e;o.push({date:g,isPrev:b,isCurrent:v===c&&m===l,isNow:v===a&&m===s&&y===u,isNext:!b&&l!==m,label:y})}return o},dayDatas:function(){return i.default.chunk(this.dayList,7)},weekDates:function(){var t=this.dayDatas,e=this.firstDayOfWeek;return t.map((function(t){var n=t[0];return[{date:n.date,isWeekNumber:!0,isPrev:!1,isCurrent:!1,isNow:!1,isNext:!1,label:i.default.getYearWeek(n.date,e)}].concat(t)}))},hourList:function(){var t=[];if(this.isDateTimeType)for(var e=0;e<24;e++)t.push({value:e,label:(""+e).padStart(2,0)});return t},minuteList:function(){var t=[];if(this.isDateTimeType)for(var e=0;e<60;e++)t.push({value:e,label:(""+e).padStart(2,0)});return t},secondList:function(){return this.minuteList},inpImmediate:function(){var t=this.type;return this.immediate||!("text"===t||"number"===t||"integer"===t||"float"===t)},inpPlaceholder:function(){var t=this.placeholder;return t?(0,s.getFuncText)(t):""},inputType:function(){var t=this.isDatePickerType,e=this.isNumType,n=this.isPawdType,r=this.type,i=this.showPwd;return t||e||n&&i||"number"===r?"text":r},inpMaxlength:function(){var t=this.isNumType,e=this.maxlength;return t&&!i.default.toNumber(e)?16:e},inpReadonly:function(){var t=this.type,e=this.readonly,n=this.editable,r=this.multiple;return e||r||!n||"week"===t||"quarter"===t},numValue:function(){var t=this.type,e=this.isNumType,n=this.inputValue;return e?"integer"===t?i.default.toInteger((0,f.handleNumber)(n)):i.default.toNumber((0,f.handleNumber)(n)):0},isDisabledSubtractNumber:function(){var t=this.min,e=this.isNumType,n=this.inputValue,r=this.numValue;return!(!n&&0!==n||!e||null===t)&&r<=i.default.toNumber(t)},isDisabledAddNumber:function(){var t=this.max,e=this.isNumType,n=this.inputValue,r=this.numValue;return!(!n&&0!==n||!e||null===t)&&r>=i.default.toNumber(t)}},watch:{value:function(t){this.inputValue=t,this.changeValue()},type:function(){Object.assign(this,{inputValue:this.value,datetimePanelValue:null,datePanelValue:null,datePanelLabel:"",datePanelType:"day",selectMonth:null,currentDate:null}),this.initValue()},dateLabelFormat:function(){this.isDatePickerType&&(this.dateParseValue(this.datePanelValue),this.inputValue=this.multiple?this.dateMultipleLabel:this.datePanelLabel)}},created:function(){this.initValue(),c.GlobalEvent.on(this,"mousewheel",this.handleGlobalMousewheelEvent),c.GlobalEvent.on(this,"mousedown",this.handleGlobalMousedownEvent),c.GlobalEvent.on(this,"keydown",this.handleGlobalKeydownEvent),c.GlobalEvent.on(this,"blur",this.handleGlobalBlurEvent)},mounted:function(){this.dateConfig&&(0,d.warnLog)("vxe.error.removeProp",["date-config"]),this.isDatePickerType&&this.transfer&&document.body.appendChild(this.$refs.panel)},beforeDestroy:function(){var t=this.$refs.panel;t&&t.parentNode&&t.parentNode.removeChild(t)},destroyed:function(){this.numberStopDown(),c.GlobalEvent.off(this,"mousewheel"),c.GlobalEvent.off(this,"mousedown"),c.GlobalEvent.off(this,"keydown"),c.GlobalEvent.off(this,"blur")},render:function(t){var e,n=this.name,r=this.form,a=this.inputType,s=this.inpPlaceholder,u=this.inpMaxlength,c=this.inpReadonly,l=this.className,f=this.controls,d=this.inputValue,h=this.isDatePickerType,p=this.visiblePanel,g=this.isActivated,m=this.vSize,y=this.type,b=this.align,x=this.readonly,E=this.disabled,S=this.autocomplete,C=[],k=function(t,e){var n=e.$scopedSlots,r=e.prefixIcon,i=[];return n.prefix?i.push(t("span",{class:"vxe-input--prefix-icon"},n.prefix.call(this,{},t))):r&&i.push(t("i",{class:["vxe-input--prefix-icon",r]})),i.length?t("span",{class:"vxe-input--prefix",on:{click:e.clickPrefixEvent}},i):null}(t,this),M=function(t,e){var n=e.$scopedSlots,r=e.inputValue,a=e.isClearable,s=e.disabled,u=e.suffixIcon,c=[];return n.suffix?c.push(t("span",{class:"vxe-input--suffix-icon"},n.suffix.call(this,{},t))):u&&c.push(t("i",{class:["vxe-input--suffix-icon",u]})),a&&c.push(t("i",{class:["vxe-input--clear-icon",o.default.icon.INPUT_CLEAR]})),c.length?t("span",{class:["vxe-input--suffix",{"is--clear":a&&!s&&!(""===r||i.default.eqNull(r))}],on:{click:e.clickSuffixEvent}},c):null}(t,this);return k&&C.push(k),C.push(t("input",{ref:"input",class:"vxe-input--inner",domProps:{value:d},attrs:{name:n,form:r,type:a,placeholder:s,maxlength:u,readonly:c,disabled:E,autocomplete:S},on:{keydown:this.keydownEvent,keyup:this.triggerEvent,wheel:this.wheelEvent,click:this.clickEvent,input:this.inputEvent,change:this.changeEvent,focus:this.focusEvent,blur:this.blurEvent}})),M&&C.push(M),C.push(function(t,e){var n,r=e.controls,i=e.isPawdType,a=e.isNumType,s=e.isDatePickerType,u=e.isSearch;return i?n=function(t,e){var n=e.showPwd;return t("span",{class:"vxe-input--password-suffix",on:{click:e.passwordToggleEvent}},[t("i",{class:["vxe-input--password-icon",n?o.default.icon.INPUT_SHOW_PWD:o.default.icon.INPUT_PWD]})])}(t,e):a?r&&(n=function(t,e){return t("span",{class:"vxe-input--number-suffix"},[t("span",{class:["vxe-input--number-prev is--prev",{"is--disabled":e.isDisabledAddNumber}],on:{mousedown:e.numberMousedownEvent,mouseup:e.numberStopDown,mouseleave:e.numberStopDown}},[t("i",{class:["vxe-input--number-prev-icon",o.default.icon.INPUT_PREV_NUM]})]),t("span",{class:["vxe-input--number-next is--next",{"is--disabled":e.isDisabledSubtractNumber}],on:{mousedown:e.numberMousedownEvent,mouseup:e.numberStopDown,mouseleave:e.numberStopDown}},[t("i",{class:["vxe-input--number-next-icon",o.default.icon.INPUT_NEXT_NUM]})])])}(t,e)):s?n=function(t,e){return t("span",{class:"vxe-input--date-picker-suffix",on:{click:e.datePickerOpenEvent}},[t("i",{class:["vxe-input--date-picker-icon",o.default.icon.INPUT_DATE]})])}(t,e):u&&(n=function(t,e){return t("span",{class:"vxe-input--search-suffix",on:{click:e.searchEvent}},[t("i",{class:["vxe-input--search-icon",o.default.icon.INPUT_SEARCH]})])}(t,e)),n?t("span",{class:"vxe-input--extra-suffix"},[n]):null}(t,this)),h&&C.push(function(t,e){var n,r=e.type,i=e.vSize,o=e.isDatePickerType,a=e.transfer,s=e.animatVisible,u=e.visiblePanel,c=e.panelPlacement,l=e.panelStyle,f=[];return o?("datetime"===r?f.push(t("div",{class:"vxe-input--panel-layout-wrapper"},[t("div",{class:"vxe-input--panel-left-wrapper"},w(t,e)),t("div",{class:"vxe-input--panel-right-wrapper"},_(t,e))])):"time"===r?f.push(t("div",{class:"vxe-input--panel-wrapper"},_(t,e))):f.push(t("div",{class:"vxe-input--panel-wrapper"},w(t,e))),t("div",{ref:"panel",class:["vxe-table--ignore-clear vxe-input--panel","type--".concat(r),(n={},v(n,"size--".concat(i),i),v(n,"is--transfer",a),v(n,"animat--leave",s),v(n,"animat--enter",u),n)],attrs:{placement:c},style:l},f)):null}(t,this)),t("div",{class:["vxe-input","type--".concat(y),l,(e={},v(e,"size--".concat(m),m),v(e,"is--".concat(b),b),v(e,"is--controls",f),v(e,"is--prefix",!!k),v(e,"is--suffix",!!M),v(e,"is--readonly",x),v(e,"is--visivle",p),v(e,"is--disabled",E),v(e,"is--active",g),e)]},C)},methods:{focus:function(){return this.isActivated=!0,this.$refs.input.focus(),this.$nextTick()},blur:function(){return this.$refs.input.blur(),this.isActivated=!1,this.$nextTick()},triggerEvent:function(t){var e=this.$refs,n=this.inputValue;this.$emit(t.type,{$panel:e.panel,value:n,$event:t})},emitModel:function(t,e){this.inputValue=t,this.$emit("modelValue",t),this.$emit("input",{value:t,$event:e}),i.default.toValueString(this.value)!==t&&(this.$emit("change",{value:t,$event:e}),this.$xeform&&this.$xeformiteminfo&&this.$xeform.triggerItemEvent(e,this.$xeformiteminfo.itemConfig.field,t))},emitInputEvent:function(t,e){var n=this.inpImmediate,r=this.isDatePickerType;this.inputValue=t,r||(n?this.emitModel(t,e):this.$emit("input",{value:t,$event:e}))},inputEvent:function(t){var e=t.target.value;this.emitInputEvent(e,t)},changeEvent:function(t){this.inpImmediate||this.triggerEvent(t)},focusEvent:function(t){this.isActivated=!0,this.triggerEvent(t)},blurEvent:function(t){var e=this.inputValue;this.inpImmediate||this.emitModel(e,t),this.afterCheckValue(),this.visiblePanel||(this.isActivated=!1),this.$emit("blur",{value:e,$event:t})},keydownEvent:function(t){var e=this.exponential,n=this.controls;if(this.isNumType){var r=t.ctrlKey,i=t.shiftKey,o=t.altKey,a=t.keyCode;r||i||o||!(32===a||(!e||69!==a)&&a>=65&&a<=90||a>=186&&a<=188||a>=191)||t.preventDefault(),n&&this.numberKeydownEvent(t)}this.triggerEvent(t)},wheelEvent:function(t){if(this.isNumType&&this.controls&&this.isActivated){var e=t.deltaY;e>0?this.numberNextEvent(t):e<0&&this.numberPrevEvent(t),t.preventDefault()}this.triggerEvent(t)},clickEvent:function(t){this.isDatePickerType&&this.datePickerOpenEvent(t),this.triggerEvent(t)},clickPrefixEvent:function(t){var e=this.$refs,n=this.disabled,r=this.inputValue;n||this.$emit("prefix-click",{$panel:e.panel,value:r,$event:t})},clickSuffixEvent:function(t){var e=this.$refs,n=this.disabled,r=this.inputValue;n||(u.default.hasClass(t.currentTarget,"is--clear")?(this.emitModel("",t),this.clearValueEvent(t,"")):this.$emit("suffix-click",{$panel:e.panel,value:r,$event:t}))},clearValueEvent:function(t,e){var n=this.$refs,r=this.type,i=this.isNumType;this.isDatePickerType&&this.hidePanel(),(i||["text","search","password"].indexOf(r)>-1)&&this.focus(),this.$emit("clear",{$panel:n.panel,value:e,$event:t})},parseDate:function(t,e){return"time"===this.type?(0,l.toStringTimeDate)(t):i.default.toStringDate(t,e)},initValue:function(){var t=this.type,e=this.isDatePickerType,n=this.inputValue,r=this.digitsValue;if(e)this.changeValue();else if("float"===t&&n){var i=(0,f.toFloatValueFixed)(n,r);n!==i&&this.emitModel(i,{type:"init"})}},changeValue:function(){this.isDatePickerType&&(this.dateParseValue(this.inputValue),this.inputValue=this.multiple?this.dateMultipleLabel:this.datePanelLabel)},afterCheckValue:function(){var t=this.type,e=this.exponential,n=this.inpReadonly,r=this.inputValue,o=this.isDatePickerType,a=this.isNumType,s=this.datetimePanelValue,u=this.dateLabelFormat,c=this.min,d=this.max,h=this.firstDayOfWeek;if(!n)if(a){if(r){var p="integer"===t?i.default.toInteger((0,f.handleNumber)(r)):i.default.toNumber((0,f.handleNumber)(r));if(this.vaildMinNum(p)?this.vaildMaxNum(p)||(p=d):p=c,e){var g=i.default.toValueString(r).toLowerCase();g===i.default.toNumber(p).toExponential()&&(p=g)}this.emitModel(m(this,p),{type:"check"})}}else if(o)if(r)if("week"===t||"quarter"===t);else{var v=this.parseDate(r,u);if(i.default.isValidDate(v))if("time"===t)r!==(v=(0,l.toStringTimeDate)(v))&&this.emitModel(v,{type:"check"}),this.inputValue=v;else{var y=!1;"datetime"===t?r===i.default.toDateString(this.dateValue,u)&&r===i.default.toDateString(v,u)||(y=!0,s.setHours(v.getHours()),s.setMinutes(v.getMinutes()),s.setSeconds(v.getSeconds())):y=!0,this.inputValue=i.default.toDateString(v,u,{firstDay:h}),y&&this.dateChange(v)}else this.dateRevert()}else this.emitModel("",{type:"check"})},passwordToggleEvent:function(t){var e=this.disabled,n=this.readonly,r=this.showPwd;e||n||(this.showPwd=!r),this.$emit("toggle-visible",{visible:this.showPwd,$event:t})},searchEvent:function(t){this.$emit("search-click",{$event:t})},vaildMinNum:function(t){return null===this.min||t>=i.default.toNumber(this.min)},vaildMaxNum:function(t){return null===this.max||t<=i.default.toNumber(this.max)},numberStopDown:function(){clearTimeout(this.downbumTimeout)},numberDownPrevEvent:function(t){var e=this;this.downbumTimeout=setTimeout((function(){e.numberPrevEvent(t),e.numberDownPrevEvent(t)}),60)},numberDownNextEvent:function(t){var e=this;this.downbumTimeout=setTimeout((function(){e.numberNextEvent(t),e.numberDownNextEvent(t)}),60)},numberKeydownEvent:function(t){var e=t.keyCode,n=38===e;(n||40===e)&&(t.preventDefault(),n?this.numberPrevEvent(t):this.numberNextEvent(t))},numberMousedownEvent:function(t){var e=this;if(this.numberStopDown(),0===t.button){var n=u.default.hasClass(t.currentTarget,"is--prev");n?this.numberPrevEvent(t):this.numberNextEvent(t),this.downbumTimeout=setTimeout((function(){n?e.numberDownPrevEvent(t):e.numberDownNextEvent(t)}),500)}},numberPrevEvent:function(t){var e=this.disabled,n=this.readonly,r=this.isDisabledAddNumber;clearTimeout(this.downbumTimeout),e||n||r||this.numberChange(!0,t),this.$emit("prev-number",{$event:t})},numberNextEvent:function(t){var e=this.disabled,n=this.readonly,r=this.isDisabledSubtractNumber;clearTimeout(this.downbumTimeout),e||n||r||this.numberChange(!1,t),this.$emit("next-number",{$event:t})},numberChange:function(t,e){var n,r=this.min,o=this.max,a=this.type,s=this.inputValue,u=this.stepValue,c="integer"===a?i.default.toInteger((0,f.handleNumber)(s)):i.default.toNumber((0,f.handleNumber)(s)),l=t?i.default.add(c,u):i.default.subtract(c,u);n=this.vaildMinNum(l)?this.vaildMaxNum(l)?l:o:r,this.emitInputEvent(m(this,n),e)},datePickerOpenEvent:function(t){this.readonly||(t.preventDefault(),this.showPanel())},dateMonthHandle:function(t,e){this.selectMonth=i.default.getWhatMonth(t,e,"first")},dateNowHandle:function(){var t=i.default.getWhatDay(Date.now(),0,"first");this.currentDate=t,this.dateMonthHandle(t,0)},dateToggleTypeEvent:function(){var t=this.datePanelType;t="month"===t||"quarter"===t?"year":"month",this.datePanelType=t},datePrevEvent:function(t){var e=this.isDisabledPrevDateBtn,n=this.type,r=this.datePanelType;e||(this.selectMonth="year"===n?i.default.getWhatYear(this.selectMonth,-12,"first"):"month"===n||"quarter"===n?"year"===r?i.default.getWhatYear(this.selectMonth,-12,"first"):i.default.getWhatYear(this.selectMonth,-1,"first"):"year"===r?i.default.getWhatYear(this.selectMonth,-12,"first"):"month"===r?i.default.getWhatYear(this.selectMonth,-1,"first"):i.default.getWhatMonth(this.selectMonth,-1,"first"),this.$emit("date-prev",{type:n,$event:t}))},dateTodayMonthEvent:function(t){this.dateNowHandle(),this.multiple||(this.dateChange(this.currentDate),this.hidePanel()),this.$emit("date-today",{type:this.type,$event:t})},dateNextEvent:function(t){var e=this.isDisabledNextDateBtn,n=this.type,r=this.datePanelType;e||(this.selectMonth="year"===n?i.default.getWhatYear(this.selectMonth,12,"first"):"month"===n||"quarter"===n?"year"===r?i.default.getWhatYear(this.selectMonth,12,"first"):i.default.getWhatYear(this.selectMonth,1,"first"):"year"===r?i.default.getWhatYear(this.selectMonth,12,"first"):"month"===r?i.default.getWhatYear(this.selectMonth,1,"first"):i.default.getWhatMonth(this.selectMonth,1,"first"),this.$emit("date-next",{type:n,$event:t}))},dateSelectEvent:function(t){b(this,t)||this.dateSelectItem(t.date)},dateSelectItem:function(t){var e=this.type,n=this.datePanelType,r=this.multiple,i="week"===e;"month"===e?"year"===n?(this.datePanelType="month",this.dateCheckMonth(t)):(this.dateChange(t),r||this.hidePanel()):"year"===e?(this.dateChange(t),r||this.hidePanel()):"quarter"===e?"year"===n?(this.datePanelType="quarter",this.dateCheckMonth(t)):(this.dateChange(t),r||this.hidePanel()):"month"===n?(this.datePanelType="week"===e?e:"day",this.dateCheckMonth(t)):"year"===n?(this.datePanelType="month",this.dateCheckMonth(t)):(this.dateChange(t),r||this.hidePanel()),i&&this.changeValue()},dateMouseenterEvent:function(t){if(!b(this,t)){var e=this.datePanelType;"month"===e?this.dateMoveMonth(t.date):"quarter"===e?this.dateMoveQuarter(t.date):"year"===e?this.dateMoveYear(t.date):this.dateMoveDay(t.date)}},dateHourEvent:function(t,e){this.datetimePanelValue.setHours(e.value),this.dateTimeChangeEvent(t)},dateConfirmEvent:function(){this.dateChange(this.dateValue||this.currentDate),this.hidePanel()},dateMinuteEvent:function(t,e){this.datetimePanelValue.setMinutes(e.value),this.dateTimeChangeEvent(t)},dateSecondEvent:function(t,e){this.datetimePanelValue.setSeconds(e.value),this.dateTimeChangeEvent(t)},dateTimeChangeEvent:function(t){this.datetimePanelValue=new Date(this.datetimePanelValue.getTime()),this.updateTimePos(t.currentTarget)},updateTimePos:function(t){if(t){var e=t.offsetHeight;t.parentNode.scrollTop=t.offsetTop-4*e}},dateMoveDay:function(t){b(this,{date:t})||(this.dayList.some((function(e){return i.default.isDateSame(e.date,t,"yyyyMMdd")}))||this.dateCheckMonth(t),this.dateParseValue(t))},dateMoveMonth:function(t){b(this,{date:t})||(this.monthList.some((function(e){return i.default.isDateSame(e.date,t,"yyyyMM")}))||this.dateCheckMonth(t),this.dateParseValue(t))},dateMoveQuarter:function(t){b(this,{date:t})||(this.quarterList.some((function(e){return i.default.isDateSame(e.date,t,"yyyyq")}))||this.dateCheckMonth(t),this.dateParseValue(t))},dateMoveYear:function(t){b(this,{date:t})||(this.yearList.some((function(e){return i.default.isDateSame(e.date,t,"yyyy")}))||this.dateCheckMonth(t),this.dateParseValue(t))},dateParseValue:function(t){var e=this.type,n=this.dateLabelFormat,r=this.valueFormat,o=this.firstDayOfWeek,a=null,s="";if(t&&(a=this.parseDate(t,r)),i.default.isValidDate(a)){if(s=i.default.toDateString(a,n,{firstDay:o}),n&&"week"===e&&i.default.getWhatWeek(a,0,o,o).getFullYear()<a.getFullYear()){var u=n.indexOf("yyyy");if(u>-1){var c=Number(s.substring(u,u+4));c&&!isNaN(c)&&(s=s.replace("".concat(c),"".concat(c-1)))}}}else a=null;this.datePanelValue=a,this.datePanelLabel=s},dateOffsetEvent:function(t){var e=this.isActivated,n=this.datePanelValue,r=this.datePanelType,o=this.firstDayOfWeek;if(e){t.preventDefault();var a=t.keyCode,s=37===a,u=38===a,c=39===a,l=40===a;if("year"===r){var f=i.default.getWhatYear(n||Date.now(),0,"first");s?f=i.default.getWhatYear(f,-1):u?f=i.default.getWhatYear(f,-4):c?f=i.default.getWhatYear(f,1):l&&(f=i.default.getWhatYear(f,4)),this.dateMoveYear(f)}else if("quarter"===r){var d=i.default.getWhatQuarter(n||Date.now(),0,"first");s?d=i.default.getWhatQuarter(d,-1):u?d=i.default.getWhatQuarter(d,-2):c?d=i.default.getWhatQuarter(d,1):l&&(d=i.default.getWhatQuarter(d,2)),this.dateMoveQuarter(d)}else if("month"===r){var h=i.default.getWhatMonth(n||Date.now(),0,"first");s?h=i.default.getWhatMonth(h,-1):u?h=i.default.getWhatMonth(h,-4):c?h=i.default.getWhatMonth(h,1):l&&(h=i.default.getWhatMonth(h,4)),this.dateMoveMonth(h)}else{var p=n||i.default.getWhatDay(Date.now(),0,"first");s?p=i.default.getWhatDay(p,-1):u?p=i.default.getWhatWeek(p,-1,o):c?p=i.default.getWhatDay(p,1):l&&(p=i.default.getWhatWeek(p,1,o)),this.dateMoveDay(p)}}},datePgOffsetEvent:function(t){if(this.isActivated){var e=33===t.keyCode;t.preventDefault(),e?this.datePrevEvent(t):this.dateNextEvent(t)}},dateChange:function(t){var e=this.value,n=this.datetimePanelValue,r=this.dateValueFormat,o=this.firstDayOfWeek,a=this.isDateTimeType,s=this.multiple;if("week"===this.type){var u=i.default.toNumber(this.selectDay);t=i.default.getWhatWeek(t,0,u,o)}else a&&(t.setHours(n.getHours()),t.setMinutes(n.getMinutes()),t.setSeconds(n.getSeconds()));var c=i.default.toDateString(t,r,{firstDay:o});if(this.dateCheckMonth(t),s){var l=this.dateMultipleValue;if(a){var f=this.dateListValue,d=[];f.forEach((function(e){e&&!i.default.isDateSame(t,e,"yyyyMMdd")&&(e.setHours(n.getHours()),e.setMinutes(n.getMinutes()),e.setSeconds(n.getSeconds()),d.push(e))})),d.push(t),this.emitModel(d.map((function(t){return i.default.toDateString(t,r)})).join(","),{type:"update"})}else l.some((function(t){return i.default.isEqual(t,c)}))?this.emitModel(l.filter((function(t){return!i.default.isEqual(t,c)})).join(","),{type:"update"}):this.emitModel(l.concat([c]).join(","),{type:"update"})}else i.default.isEqual(e,c)||this.emitModel(c,{type:"update"})},dateCheckMonth:function(t){var e=i.default.getWhatMonth(t,0,"first");i.default.isEqual(e,this.selectMonth)||(this.selectMonth=e)},dateOpenPanel:function(){var t=this,e=this.type,n=this.dateValue;["year","quarter","month","week"].indexOf(e)>-1?this.datePanelType=e:this.datePanelType="day",this.currentDate=i.default.getWhatDay(Date.now(),0,"first"),n?(this.dateMonthHandle(n,0),this.dateParseValue(n)):this.dateNowHandle(),this.isDateTimeType&&(this.datetimePanelValue=this.datePanelValue||i.default.getWhatDay(Date.now(),0,"first"),this.$nextTick((function(){i.default.arrayEach(t.$refs.timeBody.querySelectorAll("li.is--selected"),t.updateTimePos)})))},dateRevert:function(){this.inputValue=this.multiple?this.dateMultipleLabel:this.datePanelLabel},updateZindex:function(){this.panelIndex<s.default.getLastZIndex()&&(this.panelIndex=s.default.nextZIndex())},showPanel:function(){var t=this,e=this.disabled,n=this.visiblePanel,r=this.isDatePickerType;return e||n?this.$nextTick():(clearTimeout(this.hidePanelTimeout),this.isActivated=!0,this.animatVisible=!0,r&&this.dateOpenPanel(),setTimeout((function(){t.visiblePanel=!0}),10),this.updateZindex(),this.updatePlacement())},hidePanel:function(){var t=this;return new Promise((function(e){t.visiblePanel=!1,t.hidePanelTimeout=setTimeout((function(){t.animatVisible=!1,e()}),350)}))},updatePlacement:function(){var t=this;return this.$nextTick().then((function(){var e=t.$refs,n=t.transfer,r=t.placement,i=t.panelIndex,o=e.input,a=e.panel;if(o&&a){var s=o.offsetHeight,c=o.offsetWidth,l=a.offsetHeight,f=a.offsetWidth,d={zIndex:i},h=u.default.getAbsolutePos(o),p=h.boundingTop,g=h.boundingLeft,v=h.visibleHeight,m=h.visibleWidth,y="bottom";if(n){var b=g,x=p+s;"top"===r?(y="top",x=p-l):r||(x+l+5>v&&(y="top",x=p-l),x<5&&(y="bottom",x=p+s)),b+f+5>m&&(b-=b+f+5-m),b<5&&(b=5),Object.assign(d,{left:"".concat(b,"px"),top:"".concat(x,"px"),minWidth:"".concat(c,"px")})}else"top"===r?(y="top",d.bottom="".concat(s,"px")):r||p+s+l>v&&p-s-l>5&&(y="top",d.bottom="".concat(s,"px"));return t.panelStyle=d,t.panelPlacement=y,t.$nextTick()}}))},handleGlobalMousedownEvent:function(t){var e=this.$refs,n=this.$el,r=this.disabled,i=this.visiblePanel,o=this.isActivated;!r&&o&&(this.isActivated=u.default.getEventTargetNode(t,n).flag||u.default.getEventTargetNode(t,e.panel).flag,this.isActivated||(this.isDatePickerType?i&&(this.hidePanel(),this.afterCheckValue()):this.afterCheckValue()))},handleGlobalKeydownEvent:function(t){var e=this.isDatePickerType,n=this.visiblePanel,r=this.clearable;if(!this.disabled){var i=t.keyCode,o=9===i,a=46===i,s=27===i,u=13===i,c=38===i,l=40===i,f=33===i,d=34===i,h=37===i||c||39===i||l,p=this.isActivated;o?(p&&this.afterCheckValue(),p=!1,this.isActivated=p):h?e&&p&&(n?this.dateOffsetEvent(t):(c||l)&&this.datePickerOpenEvent(t)):u?e&&(n?this.datePanelValue?this.dateSelectItem(this.datePanelValue):this.hidePanel():p&&this.datePickerOpenEvent(t)):(f||d)&&e&&p&&this.datePgOffsetEvent(t),o||s?n&&this.hidePanel():a&&r&&p&&this.clearValueEvent(t,null)}},handleGlobalMousewheelEvent:function(t){var e=this.$refs,n=this.disabled,r=this.visiblePanel;n||r&&(u.default.getEventTargetNode(t,e.panel).flag?this.updatePlacement():(this.hidePanel(),this.afterCheckValue()))},handleGlobalBlurEvent:function(){var t=this.isActivated;this.visiblePanel?(this.hidePanel(),this.afterCheckValue()):t&&this.afterCheckValue()}}};e.default=E},5306:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleNumber=function(t){return i.default.isString(t)?t.replace(/,/g,""):t},e.toFloatValueFixed=function(t,e){return/^-/.test(""+t)?i.default.toFixed(i.default.ceil(t,e),e):i.default.toFixed(i.default.floor(t,e),e)};var r,i=(r=n(8478))&&r.__esModule?r:{default:r}},6405:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Keyboard=void 0;var r=a(n(4344)),i=a(n(1407)),o=a(n(5053));function a(t){return t&&t.__esModule?t:{default:t}}var s={install:function(){o.default.reg("keyboard"),r.default.mixins.push(i.default)}};e.Keyboard=s;var u=s;e.default=u},1407:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,o=(i=n(8478))&&i.__esModule?i:{default:i},a=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=s(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(1455));function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(s=function(t){return t?n:e})(t)}var u={methods:{moveTabSelected:function(t,e,n){var r,i,o,a=this,s=this.afterFullData,u=this.visibleColumn,c=this.editConfig,l=this.editOpts,f=Object.assign({},t),d=this.getVTRowIndex(f.row),h=this.getVTColumnIndex(f.column);n.preventDefault(),e?h<=0?d>0&&(r=s[i=d-1],o=u.length-1):o=h-1:h>=u.length-1?d<s.length-1&&(r=s[i=d+1],o=0):o=h+1;var p=u[o];p&&(r?(f.rowIndex=i,f.row=r):f.rowIndex=d,f.columnIndex=o,f.column=p,f.cell=this.getCell(f.row,f.column),c?"click"!==l.trigger&&"dblclick"!==l.trigger||("row"===l.mode?this.handleActived(f,n):this.scrollToRow(f.row,f.column).then((function(){return a.handleSelected(f,n)}))):this.scrollToRow(f.row,f.column).then((function(){return a.handleSelected(f,n)})))},moveCurrentRow:function(t,e,n){var r,i=this,a=this.currentRow,s=this.treeConfig,u=this.treeOpts,c=this.afterFullData;if(n.preventDefault(),a)if(s){var l=o.default.findTree(c,(function(t){return t===a}),u),f=l.index,d=l.items;t&&f>0?r=d[f-1]:e&&f<d.length-1&&(r=d[f+1])}else{var h=this.getVTRowIndex(a);t&&h>0?r=c[h-1]:e&&h<c.length-1&&(r=c[h+1])}else r=c[0];if(r){var p={$table:this,row:r};this.scrollToRow(r).then((function(){return i.triggerCurrentRowEvent(n,p)}))}},moveSelected:function(t,e,n,r,i,o){var a=this,s=this.afterFullData,u=this.visibleColumn,c=Object.assign({},t),l=this.getVTRowIndex(c.row),f=this.getVTColumnIndex(c.column);o.preventDefault(),n&&l>0?(c.rowIndex=l-1,c.row=s[c.rowIndex]):i&&l<s.length-1?(c.rowIndex=l+1,c.row=s[c.rowIndex]):e&&f?(c.columnIndex=f-1,c.column=u[c.columnIndex]):r&&f<u.length-1&&(c.columnIndex=f+1,c.column=u[c.columnIndex]),this.scrollToRow(c.row,c.column).then((function(){c.cell=a.getCell(c.row,c.column),a.handleSelected(c,o)}))},triggerHeaderCellMousedownEvent:function(t,e){var n=this.mouseConfig,r=this.mouseOpts;if(n&&r.area&&this.handleHeaderCellAreaEvent){var i=t.currentTarget,o=a.default.getEventTargetNode(t,i,"vxe-cell--sort").flag,s=a.default.getEventTargetNode(t,i,"vxe-cell--filter").flag;this.handleHeaderCellAreaEvent(t,Object.assign({cell:i,triggerSort:o,triggerFilter:s},e))}this.focus(),this.closeMenu()},triggerCellMousedownEvent:function(t,e){var n=t.currentTarget;e.cell=n,this.handleCellMousedownEvent(t,e),this.focus(),this.closeFilter(),this.closeMenu()},handleCellMousedownEvent:function(t,e){var n=this.editConfig,r=this.editOpts,i=this.handleSelected,o=this.checkboxConfig,a=this.checkboxOpts,s=this.mouseConfig,u=this.mouseOpts;if(s&&u.area&&this.handleCellAreaEvent)return this.handleCellAreaEvent(t,e);o&&a.range&&this.handleCheckboxRangeEvent(t,e),s&&u.selected&&(n&&"cell"!==r.mode||i(e,t))},handleCheckboxRangeEvent:function(t,e){var n=this,r=e.column,i=e.cell;if("checkbox"===r.type){var s=this.$el,u=this.elemStore,c=t.clientX,l=t.clientY,f=u["".concat(r.fixed||"main","-body-wrapper")]||u["main-body-wrapper"],d=f.querySelector(".vxe-table--checkbox-range"),h=document.onmousemove,p=document.onmouseup,g=i.parentNode,v=this.getCheckboxRecords(),m=[],y=function(t,e){var n=0,r=0,i=!a.browse.firefox&&a.default.hasClass(t,"vxe-checkbox--label");if(i){var s=getComputedStyle(t);n-=o.default.toNumber(s.paddingTop),r-=o.default.toNumber(s.paddingLeft)}for(;t&&t!==e;)if(n+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent,i){var u=getComputedStyle(t);n-=o.default.toNumber(u.paddingTop),r-=o.default.toNumber(u.paddingLeft)}return{offsetTop:n,offsetLeft:r}}(t.target,f),b=y.offsetTop+t.offsetY,x=y.offsetLeft+t.offsetX,w=f.scrollTop,_=g.offsetHeight,E=null,S=!1,C=1,k=function(t,e){n.emitEvent("checkbox-range-".concat(t),{records:n.getCheckboxRecords(),reserves:n.getCheckboxReserveRecords()},e)},M=function(t){var r=t.clientX,i=t.clientY,o=r-c,a=i-l+(f.scrollTop-w),s=Math.abs(a),u=Math.abs(o),h=b,p=x;a<1?(h+=a)<1&&(h=1,s=b):s=Math.min(s,f.scrollHeight-b-1),o<1?(p+=o,u>x&&(p=1,u=x)):u=Math.min(u,f.clientWidth-x-1),d.style.height="".concat(s,"px"),d.style.width="".concat(u,"px"),d.style.left="".concat(p,"px"),d.style.top="".concat(h,"px"),d.style.display="block";var y=function(t,e,n,r){var i=0,o=[],a=r>0,s=r>0?r:Math.abs(r)+n.offsetHeight,u=t.afterFullData,c=t.scrollYStore;if(t.scrollYLoad){var l=t.getVTRowIndex(e.row);o=a?u.slice(l,l+Math.ceil(s/c.rowHeight)):u.slice(l-Math.floor(s/c.rowHeight)+1,l+1)}else for(var f=a?"next":"previous";n&&i<s;)o.push(t.getRowNode(n).item),i+=n.offsetHeight,n=n["".concat(f,"ElementSibling")];return o}(n,e,g,a<1?-s:s);s>10&&y.length!==m.length&&(m=y,t.ctrlKey?y.forEach((function(t){n.handleSelectRow({row:t},-1===v.indexOf(t))})):(n.setAllCheckboxRow(!1),n.setCheckboxRow(y,!0)),k("change",t))},O=function(){clearTimeout(E),E=null},T=function t(e){O(),E=setTimeout((function(){if(E){var r=f.scrollLeft,i=f.scrollTop,o=f.clientHeight,a=f.scrollHeight,s=Math.ceil(50*C/_);S?i+o<a?(n.scrollTo(r,i+s),t(e),M(e)):O():i?(n.scrollTo(r,i-s),t(e),M(e)):O()}}),50)};a.default.addClass(s,"drag--range"),document.onmousemove=function(t){t.preventDefault(),t.stopPropagation();var e=t.clientY,n=a.default.getAbsolutePos(f).boundingTop;e<n?(S=!1,C=n-e,E||T(t)):e>n+f.clientHeight?(S=!0,C=e-n-f.clientHeight,E||T(t)):E&&O(),M(t)},document.onmouseup=function(t){O(),a.default.removeClass(s,"drag--range"),d.removeAttribute("style"),document.onmousemove=h,document.onmouseup=p,k("end",t)},k("start",t)}}}};e.default=u},3859:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.List=void 0;var r,i=(r=n(7993))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.List=o;var a=o;e.default=a},7993:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=c(n(8478)),i=c(n(5042)),o=c(n(7500)),a=n(768),s=n(8468),u=n(1455);function c(t){return t&&t.__esModule?t:{default:t}}var l={name:"VxeList",mixins:[o.default],props:{data:Array,height:[Number,String],maxHeight:[Number,String],loading:Boolean,className:[String,Function],size:{type:String,default:function(){return i.default.list.size||i.default.size}},autoResize:{type:Boolean,default:function(){return i.default.list.autoResize}},syncResize:[Boolean,String,Number],scrollY:Object},data:function(){return{scrollYLoad:!1,bodyHeight:0,topSpaceHeight:0,items:[]}},computed:{sYOpts:function(){return Object.assign({},i.default.list.scrollY,this.scrollY)},styles:function(){var t=this.height,e=this.maxHeight,n={};return t?n.height=isNaN(t)?t:"".concat(t,"px"):e&&(n.height="auto",n.maxHeight=isNaN(e)?e:"".concat(e,"px")),n}},watch:{data:function(t){this.loadData(t)},syncResize:function(t){var e=this;t&&(this.recalculate(),this.$nextTick((function(){return setTimeout((function(){return e.recalculate()}))})))}},created:function(){Object.assign(this,{fullData:[],lastScrollLeft:0,lastScrollTop:0,scrollYStore:{startIndex:0,endIndex:0,visibleSize:0}}),this.loadData(this.data),s.GlobalEvent.on(this,"resize",this.handleGlobalResizeEvent)},mounted:function(){var t=this;if(this.autoResize){var e=(0,a.createResizeEvent)((function(){return t.recalculate()}));e.observe(this.$el),this.$resize=e}},beforeDestroy:function(){this.$resize&&this.$resize.disconnect()},destroyed:function(){s.GlobalEvent.off(this,"resize")},render:function(t){var e=this.$scopedSlots,n=this.styles,i=this.bodyHeight,o=this.topSpaceHeight,a=this.items,s=this.className,u=this.loading;return t("div",{class:["vxe-list",s?r.default.isFunction(s)?s({$list:this}):s:"",{"is--loading":u}]},[t("div",{ref:"virtualWrapper",class:"vxe-list--virtual-wrapper",style:n,on:{scroll:this.scrollEvent}},[t("div",{ref:"ySpace",class:"vxe-list--y-space",style:{height:i?"".concat(i,"px"):""}}),t("div",{ref:"virtualBody",class:"vxe-list--body",style:{marginTop:o?"".concat(o,"px"):""}},e.default?e.default.call(this,{items:a,$list:this},t):[])]),t("div",{class:["vxe-list--loading vxe-loading",{"is--visible":u}]},[t("div",{class:"vxe-loading--spinner"})])])},methods:{getParentElem:function(){return this.$el.parentNode},loadData:function(t){var e=this,n=this.sYOpts,r=this.scrollYStore,i=t||[];return Object.assign(r,{startIndex:0,endIndex:1,visibleSize:0}),this.fullData=i,this.scrollYLoad=n.enabled&&n.gt>-1&&n.gt<=i.length,this.handleData(),this.computeScrollLoad().then((function(){e.refreshScroll()}))},reloadData:function(t){return this.clearScroll(),this.loadData(t)},handleData:function(){var t=this.fullData,e=this.scrollYLoad,n=this.scrollYStore;return this.items=e?t.slice(n.startIndex,n.endIndex):t.slice(0),this.$nextTick()},recalculate:function(){var t=this.$el;return t.clientWidth&&t.clientHeight?this.computeScrollLoad():Promise.resolve()},clearScroll:function(){var t=this.$refs.virtualWrapper;return t&&(t.scrollTop=0),this.$nextTick()},refreshScroll:function(){var t=this,e=this.lastScrollLeft,n=this.lastScrollTop;return this.clearScroll().then((function(){if(e||n)return t.lastScrollLeft=0,t.lastScrollTop=0,t.scrollTo(e,n)}))},scrollTo:function(t,e){var n=this,i=this.$refs.virtualWrapper;return r.default.isNumber(t)&&(i.scrollLeft=t),r.default.isNumber(e)&&(i.scrollTop=e),this.scrollYLoad?new Promise((function(t){return setTimeout((function(){return t(n.$nextTick())}),50)})):this.$nextTick()},computeScrollLoad:function(){var t=this;return this.$nextTick().then((function(){var e,n=t.$refs,i=t.sYOpts,o=t.scrollYLoad,a=t.scrollYStore,s=n.virtualWrapper,c=n.virtualBody,l=0;if(c&&(i.sItem&&(e=c.querySelector(i.sItem)),e||(e=c.children[0])),e&&(l=e.offsetHeight),l=Math.max(20,l),a.rowHeight=l,o){var f=Math.max(8,Math.ceil(s.clientHeight/l)),d=i.oSize?r.default.toNumber(i.oSize):u.browse.msie?20:u.browse.edge?10:0;a.offsetSize=d,a.visibleSize=f,a.endIndex=Math.max(a.startIndex,f+d,a.endIndex),t.updateYData()}else t.updateYSpace();t.rowHeight=l}))},scrollEvent:function(t){var e=t.target,n=e.scrollTop,r=e.scrollLeft,i=r!==this.lastScrollLeft,o=n!==this.lastScrollTop;this.lastScrollTop=n,this.lastScrollLeft=r,this.scrollYLoad&&this.loadYData(t),this.$emit("scroll",{scrollLeft:r,scrollTop:n,isX:i,isY:o,$event:t})},loadYData:function(t){var e=this.scrollYStore,n=e.startIndex,r=e.endIndex,i=e.visibleSize,o=e.offsetSize,a=e.rowHeight,s=t.target.scrollTop,u=Math.floor(s/a),c=Math.max(0,u-1-o),l=u+i+o;(u<=n||u>=r-i-1)&&(n===c&&r===l||(e.startIndex=c,e.endIndex=l,this.updateYData()))},updateYData:function(){this.handleData(),this.updateYSpace()},updateYSpace:function(){var t=this.scrollYStore,e=this.scrollYLoad,n=this.fullData;this.bodyHeight=e?n.length*t.rowHeight:0,this.topSpaceHeight=e?Math.max(t.startIndex*t.rowHeight,0):0},handleGlobalResizeEvent:function(){this.recalculate()}}};e.default=l},7667:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default={vxe:{error:{groupFixed:"",groupMouseRange:' "{0}" ',groupTag:' "{0}"  "{1}"',scrollErrProp:' "{0}"',scrollXNotGroup:' "scroll-x.enabled=false" ',errConflicts:' "{0}"  "{1}" ',unableInsert:"",useErr:' "{0}"  Table ',barUnableLink:"",expandContent:' "content"',reqModule:' "{0}" ',reqProp:' "{0}" ',emptyProp:' "{0}" ',errProp:' "{0}" "{1}"',colRepet:'column.{0}="{1}" ',notFunc:' "{0}" ',notSlot:' "{0}" ',noTree:' "{0}"',notProp:' "{0}"',coverProp:'"{0}"  "{1}" ',delFunc:' "{0}"  "{1}"',delProp:' "{0}"  "{1}"',delEvent:' "{0}"  "{1}"',removeProp:' "{0}" ',errFormat:' "VXETable.formats"  "formatter={0}" ',notType:' "{0}"',notExp:"/",impFields:"",treeNotImp:""},renderer:{search:"",cases:{equal:"",unequal:"",gt:"",ge:"",lt:"",le:"",begin:"",notbegin:"",endin:"",notendin:"",include:"",exclude:"",between:"",custom:"",insensitive:"",isSensitive:""},combination:{menus:{sortAsc:"",sortDesc:"",fixedColumn:"",fixedGroup:"",cancelFixed:"",fixedLeft:"",fixedRight:"",clearFilter:"",textOption:"",numberOption:""},popup:{title:"",currColumnTitle:"",and:"",or:"",describeHtml:" ? <br/> * "},empty:"()",notData:""}},pro:{area:{mergeErr:"",multiErr:"",extendErr:"",pasteMultiErr:""},fnr:{title:"",findLabel:"",replaceLabel:"",findTitle:"",replaceTitle:"",tabs:{find:"",replace:""},filter:{re:"",whole:"",sensitive:""},btns:{findNext:"",findAll:"",replace:"",replaceAll:"",cancel:""},header:{seq:"#",cell:"",value:""},empty:"()",reError:"",recordCount:" {0} ",notCell:"",replaceSuccess:" {0} "}},table:{emptyText:"",allTitle:"/",seqTitle:"#",confirmFilter:"",resetFilter:"",allFilter:"",sortAsc:"",sortDesc:"",filter:"",impSuccess:" {0} ",expLoading:"",expSuccess:"",expFilename:"_{0}",expOriginFilename:"__{0}",customTitle:"",customAll:"",customConfirm:"",customRestore:""},grid:{selectOneRecord:"",deleteSelectRecord:"",removeSelectRecord:"",dataUnchanged:"",delSuccess:"",saveSuccess:"",operError:""},select:{emptyText:""},pager:{goto:"",pagesize:"{0}/",total:" {0} ",pageClassifier:"",prevPage:"",nextPage:"",prevJump:"",nextJump:""},alert:{title:""},button:{confirm:"",cancel:""},import:{modes:{covering:"",insert:""},impTitle:"",impFile:"",impSelect:"",impType:"",impOpts:"",impConfirm:"",impCancel:""},export:{types:{csv:"CSV ()(*.csv)",html:"(*.html)",xml:"XML (*.xml)",txt:"()(*.txt)",xls:"Excel 97-2003 (*.xls)",xlsx:"Excel (*.xlsx)",pdf:"PDF (*.pdf)"},modes:{current:"",selected:"",all:""},printTitle:"",expTitle:"",expName:"",expNamePlaceholder:"",expSheetName:"",expSheetNamePlaceholder:"",expType:"",expMode:"",expCurrentColumn:"",expColumn:"",expOpts:"",expOptHeader:"",expHeaderTitle:"",expOptFooter:"",expFooterTitle:"",expOptColgroup:"",expColgroupTitle:"",expOptMerge:"",expMergeTitle:"",expOptAllExpand:"",expAllExpandTitle:"",expOptUseStyle:"",expUseStyleTitle:"",expOptOriginal:"",expOriginalTitle:"",expPrint:"",expConfirm:"",expCancel:""},modal:{zoomIn:"",zoomOut:"",close:""},form:{folding:"",unfolding:""},toolbar:{import:"",export:"",print:"",refresh:"",zoomIn:"",zoomOut:"",custom:"",customAll:"",customConfirm:"",customRestore:""},input:{date:{m1:"01 ",m2:"02 ",m3:"03 ",m4:"04 ",m5:"05 ",m6:"06 ",m7:"07 ",m8:"08 ",m9:"09 ",m10:"10 ",m11:"11 ",m12:"12 ",quarterLabel:"{0} ",monthLabel:"{0} ",dayLabel:"{0}  {1}",labelFormat:{date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss",week:"yyyy  WW ",month:"yyyy-MM",quarter:"yyyy  q ",year:"yyyy"},weeks:{w:"",w0:"",w1:"",w2:"",w3:"",w4:"",w5:"",w6:""},months:{m0:"",m1:"",m2:"",m3:"",m4:"",m5:"",m6:"",m7:"",m8:"",m9:"",m10:"",m11:""},quarters:{q1:"",q2:"",q3:"",q4:""}}}}}},2562:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Menu=void 0;var r=s(n(4344)),i=s(n(5053)),o=s(n(6189)),a=s(n(1511));function s(t){return t&&t.__esModule?t:{default:t}}var u={Panel:o.default,install:function(t){i.default.reg("menu"),r.default.mixins.push(a.default),t.component(o.default.name,o.default)}};e.Menu=u;var c=u;e.default=c},1511:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(n(8478)),o=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(6970)),a=c(n(1455)),s=c(n(5053));function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}function c(t){return t&&t.__esModule?t:{default:t}}n(5981);var l={methods:{_closeMenu:function(){return Object.assign(this.ctxMenuStore,{visible:!1,selected:null,selectChild:null,showChild:!1}),this.$nextTick()},moveCtxMenu:function(t,e,n,r,a,s,u){var c,l=i.default.findIndexOf(u,(function(t){return n[r]===t}));if(e===a)s&&o.default.hasChildrenList(n.selected)?n.showChild=!0:(n.showChild=!1,n.selectChild=null);else if(38===e){for(var f=l-1;f>=0;f--)if(!1!==u[f].visible){c=u[f];break}n[r]=c||u[u.length-1]}else if(40===e){for(var d=l+1;d<u.length;d++)if(!1!==u[d].visible){c=u[d];break}n[r]=c||u[0]}else!n[r]||13!==e&&32!==e||this.ctxMenuLinkEvent(t,n[r])},handleGlobalContextmenuEvent:function(t){var e=this.$refs,n=this.tId,r=this.editStore,i=this.menuConfig,s=this.contextMenu,u=this.ctxMenuStore,c=this.ctxMenuOpts,l=this.mouseConfig,f=this.mouseOpts,d=r.selected,h=["header","body","footer"];if((0,o.isEnableConf)(i)||s){if(u.visible&&e.ctxWrapper&&a.default.getEventTargetNode(t,e.ctxWrapper.$el).flag)return void t.preventDefault();if(this._keyCtx){var p="body",g={type:p,$grid:this.$xegrid,$table:this,keyboard:!0,columns:this.visibleColumn.slice(0),$event:t};if(l&&f.area){var v=this.getActiveCellArea();if(v&&v.row&&v.column)return g.row=v.row,g.column=v.column,void this.openContextMenu(t,p,g)}else if(l&&f.selected&&d.row&&d.column)return g.row=d.row,g.column=d.column,void this.openContextMenu(t,p,g)}for(var m=0;m<h.length;m++){var y=h[m],b=a.default.getEventTargetNode(t,this.$el,"vxe-".concat(y,"--column"),(function(t){return t.parentNode.parentNode.parentNode.getAttribute("xid")===n})),x={type:y,$grid:this.$xegrid,$table:this,columns:this.visibleColumn.slice(0),$event:t};if(b.flag){var w=b.targetElem,_=this.getColumnNode(w).item,E="".concat(y,"-");if(Object.assign(x,{column:_,columnIndex:this.getColumnIndex(_),cell:w}),"body"===y){var S=this.getRowNode(w.parentNode).item;E="",x.row=S,x.rowIndex=this.getRowIndex(S)}return this.openContextMenu(t,y,x),void(this.$listeners["".concat(E,"cell-context-menu")]?this.emitEvent("".concat(E,"cell-context-menu"),x,t):this.emitEvent("".concat(E,"cell-menu"),x,t))}if(a.default.getEventTargetNode(t,this.$el,"vxe-table--".concat(y,"-wrapper"),(function(t){return t.getAttribute("xid")===n})).flag)return void("cell"===c.trigger?t.preventDefault():this.openContextMenu(t,y,x))}}e.filterWrapper&&!a.default.getEventTargetNode(t,e.filterWrapper.$el).flag&&this.closeFilter(),this.closeMenu()},openContextMenu:function(t,e,n){var r=this,i=this.isCtxMenu,o=this.ctxMenuStore,s=this.ctxMenuOpts,u=s[e],c=s.visibleMethod;if(u){var l=u.options;u.disabled?t.preventDefault():i&&l&&l.length&&(n.options=l,this.preventEvent(t,"event.showMenu",n,(function(){if(!c||c(n)){t.preventDefault(),r.updateZindex();var e=a.default.getDomNode(),i=e.scrollTop,s=e.scrollLeft,u=e.visibleHeight,f=e.visibleWidth,d=t.clientY+i,h=t.clientX+s,p=function(){Object.assign(o,{args:n,visible:!0,list:l,selected:null,selectChild:null,showChild:!1,style:{zIndex:r.tZindex,top:"".concat(d,"px"),left:"".concat(h,"px")}}),r.$nextTick((function(){var t=r.$refs.ctxWrapper.$el,e=t.clientHeight,n=t.clientWidth,c=a.default.getAbsolutePos(t),l=c.boundingTop,p=c.boundingLeft+n-f;l+e-u>-10&&(o.style.top="".concat(Math.max(i+2,d-e-2),"px")),p>-10&&(o.style.left="".concat(Math.max(s+2,h-n-2),"px"))}))},g=n.keyboard,v=n.row,m=n.column;g&&v&&m?r.scrollToRow(v,m).then((function(){var t=r.getCell(v,m),e=a.default.getAbsolutePos(t),n=e.boundingTop,o=e.boundingLeft;d=n+i+Math.floor(t.offsetHeight/2),h=o+s+Math.floor(t.offsetWidth/2),p()})):p()}else r.closeMenu()})))}this.closeFilter()},ctxMenuMouseoverEvent:function(t,e,n){var r=t.currentTarget,i=this.ctxMenuStore;t.preventDefault(),t.stopPropagation(),i.selected=e,i.selectChild=n,n||(i.showChild=o.default.hasChildrenList(e),i.showChild&&this.$nextTick((function(){var t=r.nextElementSibling;if(t){var e=a.default.getAbsolutePos(r),n=e.boundingTop,i=e.boundingLeft,o=e.visibleHeight,s=e.visibleWidth,u=n+r.offsetHeight,c="",l="";i+r.offsetWidth+t.offsetWidth>s-10&&(c="auto",l="".concat(r.offsetWidth,"px"));var f="",d="";u+t.offsetHeight>o-10&&(f="auto",d="0"),t.style.left=c,t.style.right=l,t.style.top=f,t.style.bottom=d}})))},ctxMenuMouseoutEvent:function(t,e){var n=this.ctxMenuStore;e.children||(n.selected=null),n.selectChild=null},ctxMenuLinkEvent:function(t,e){if(!e.disabled&&(e.code||!e.children||!e.children.length)){var n=s.default.menus.get(e.code),r=Object.assign({menu:e,$grid:this.$xegrid,$table:this,$event:t},this.ctxMenuStore.args);n&&n.call(this,r,t),this.$listeners["context-menu-click"]?this.emitEvent("context-menu-click",r,t):this.emitEvent("menu-click",r,t),this.closeMenu()}}}};e.default=l},6189:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(6970),i={name:"VxeTableContextMenu",props:{ctxMenuStore:Object,ctxMenuOpts:Object},mounted:function(){document.body.appendChild(this.$el)},beforeDestroy:function(){var t=this.$el;t.parentNode&&t.parentNode.removeChild(t)},render:function(t){var e=this.$parent,n=this._e,i=this.ctxMenuOpts,o=this.ctxMenuStore;return t("div",{class:["vxe-table--context-menu-wrapper",i.className],style:o.style},o.list.map((function(i,a){return i.every((function(t){return!1===t.visible}))?n():t("ul",{class:"vxe-context-menu--option-wrapper",key:a},i.map((function(n,i){var s=n.children&&n.children.some((function(t){return!1!==t.visible}));return!1===n.visible?null:t("li",{class:[n.className,{"link--disabled":n.disabled,"link--active":n===o.selected}],key:"".concat(a,"_").concat(i)},[t("a",{class:"vxe-context-menu--link",on:{click:function(t){e.ctxMenuLinkEvent(t,n)},mouseover:function(t){e.ctxMenuMouseoverEvent(t,n)},mouseout:function(t){e.ctxMenuMouseoutEvent(t,n)}}},[t("i",{class:["vxe-context-menu--link-prefix",n.prefixIcon]}),t("span",{class:"vxe-context-menu--link-content"},(0,r.getFuncText)(n.name)),t("i",{class:["vxe-context-menu--link-suffix",s?n.suffixIcon||"suffix--haschild":n.suffixIcon]})]),s?t("ul",{class:["vxe-table--context-menu-clild-wrapper",{"is--show":n===o.selected&&o.showChild}]},n.children.map((function(s,u){return!1===s.visible?null:t("li",{class:[s.className,{"link--disabled":s.disabled,"link--active":s===o.selectChild}],key:"".concat(a,"_").concat(i,"_").concat(u)},[t("a",{class:"vxe-context-menu--link",on:{click:function(t){e.ctxMenuLinkEvent(t,s)},mouseover:function(t){e.ctxMenuMouseoverEvent(t,n,s)},mouseout:function(t){e.ctxMenuMouseoutEvent(t,n,s)}}},[t("i",{class:["vxe-context-menu--link-prefix",s.prefixIcon]}),t("span",{class:"vxe-context-menu--link-content"},(0,r.getFuncText)(s.name))])])}))):null])})))})))}};e.default=i},7500:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default={computed:{vSize:function(){var t=this.$parent;return this.size||t&&(t.size||t.vSize)}}}},3399:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.modal=e.default=e.Modal=void 0;var i=u(n(8478)),o=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=s(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(5956)),a=u(n(5053));function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(s=function(t){return t?n:e})(t)}function u(t){return t&&t.__esModule?t:{default:t}}var c=null;function l(t){var e=Object.assign({},t,{transfer:!0});return new Promise((function(t){if(e&&e.id&&o.allActivedModals.some((function(t){return t.id===e.id})))t("exist");else{var n=e.events||{};e.events=Object.assign({},n,{hide:function(e){n.hide&&n.hide.call(this,e),setTimeout((function(){return r.$destroy()}),r.isMsg?500:100),t(e.type)}});var r=new c({el:document.createElement("div"),propsData:e});setTimeout((function(){r.isDestroy?r.close():r.open()}))}}))}function f(t){return i.default.find(o.allActivedModals,(function(e){return e.id===t}))}var d={get:f,close:function(t){return(arguments.length?[f(t)]:o.allActivedModals).forEach((function(t){t&&(t.isDestroy=!0,t.close("close"))})),Promise.resolve()},open:l},h=d;e.modal=h,["alert","confirm","message"].forEach((function(t,e){var n=2===e?{mask:!1,lockView:!1,showHeader:!1}:{showFooter:!0};n.type=t,n.dblclickZoom=!1,1===e&&(n.status="question"),d[t]=function(r,o,a){var s={};return i.default.isObject(r)?s=r:(o&&(s=2===e?{status:o}:{title:o}),s.content=i.default.toValueString(r)),l(Object.assign({type:t},n,s,a))}}));var p=Object.assign(o.default,{install:function(t){a.default._modal=1,t.component(o.default.name,o.default),c=t.extend(o.default),a.default.modal=d,t.prototype.$vxe?t.prototype.$vxe.modal=d:t.prototype.$vxe={modal:d}}});e.Modal=p;var g=p;e.default=g},5956:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.msgQueue=e.default=e.allActivedModals=void 0;var i=d(n(5042)),o=d(n(7500)),a=d(n(8478)),s=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=f(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(6970)),u=d(n(1455)),c=n(8468),l=n(5981);function f(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(f=function(t){return t?n:e})(t)}function d(t){return t&&t.__esModule?t:{default:t}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=[];e.allActivedModals=g;var v=[];e.msgQueue=v;var m={name:"VxeModal",mixins:[o.default],props:{value:Boolean,id:String,type:{type:String,default:"modal"},loading:{type:Boolean,default:null},status:String,iconStatus:String,className:String,top:{type:[Number,String],default:function(){return i.default.modal.top}},position:[String,Object],title:String,duration:{type:[Number,String],default:function(){return i.default.modal.duration}},message:[String,Function],content:[String,Function],cancelButtonText:{type:String,default:function(){return i.default.modal.cancelButtonText}},confirmButtonText:{type:String,default:function(){return i.default.modal.confirmButtonText}},lockView:{type:Boolean,default:function(){return i.default.modal.lockView}},lockScroll:Boolean,mask:{type:Boolean,default:function(){return i.default.modal.mask}},maskClosable:{type:Boolean,default:function(){return i.default.modal.maskClosable}},escClosable:{type:Boolean,default:function(){return i.default.modal.escClosable}},resize:{type:Boolean,default:function(){return i.default.modal.resize}},showHeader:{type:Boolean,default:function(){return i.default.modal.showHeader}},showFooter:{type:Boolean,default:function(){return i.default.modal.showFooter}},showZoom:{type:Boolean,default:null},showClose:{type:Boolean,default:function(){return i.default.modal.showClose}},dblclickZoom:{type:Boolean,default:function(){return i.default.modal.dblclickZoom}},width:[Number,String],height:[Number,String],minWidth:{type:[Number,String],default:function(){return i.default.modal.minWidth}},minHeight:{type:[Number,String],default:function(){return i.default.modal.minHeight}},zIndex:Number,marginSize:{type:[Number,String],default:function(){return i.default.modal.marginSize}},fullscreen:Boolean,draggable:{type:Boolean,default:function(){return i.default.modal.draggable}},remember:{type:Boolean,default:function(){return i.default.modal.remember}},destroyOnClose:{type:Boolean,default:function(){return i.default.modal.destroyOnClose}},showTitleOverflow:{type:Boolean,default:function(){return i.default.modal.showTitleOverflow}},transfer:{type:Boolean,default:function(){return i.default.modal.transfer}},storage:{type:Boolean,default:function(){return i.default.modal.storage}},storageKey:{type:String,default:function(){return i.default.modal.storageKey}},animat:{type:Boolean,default:function(){return i.default.modal.animat}},size:{type:String,default:function(){return i.default.modal.size||i.default.size}},beforeHideMethod:{type:Function,default:function(){return i.default.modal.beforeHideMethod}},slots:Object,events:Object},data:function(){return{inited:!1,visible:!1,contentVisible:!1,modalTop:0,modalZindex:0,zoomLocat:null,firstOpen:!1}},computed:{isMsg:function(){return"message"===this.type}},watch:{width:function(){this.recalculate()},height:function(){this.recalculate()},value:function(t){this[t?"open":"close"]("model")}},created:function(){this.storage&&!this.id&&(0,l.errLog)("vxe.error.reqProp",["modal.id"])},mounted:function(){var t=this.$listeners,e=this.events,n=void 0===e?{}:e;this.value&&this.open(),this.recalculate(),this.escClosable&&c.GlobalEvent.on(this,"keydown",this.handleGlobalKeydownEvent);var r="inserted",i={type:r,$modal:this,$event:{type:r}};t.inserted?this.$emit("inserted",i):n.inserted&&n.inserted.call(this,i)},beforeDestroy:function(){var t=this.$el;c.GlobalEvent.off(this,"keydown"),this.removeMsgQueue(),t.parentNode===document.body&&t.parentNode.removeChild(t)},render:function(t){var e,n=this,r=this._e,o=this.$scopedSlots,a=this.slots,u=void 0===a?{}:a,c=this.inited,l=this.vSize,f=this.className,d=this.type,h=this.resize,g=this.showClose,v=this.showZoom,m=this.animat,y=this.draggable,b=this.loading,x=this.status,w=this.iconStatus,_=this.showFooter,E=this.zoomLocat,S=this.modalTop,C=this.dblclickZoom,k=this.contentVisible,M=this.visible,O=this.title,T=this.lockScroll,A=this.lockView,N=this.mask,I=this.isMsg,P=this.showTitleOverflow,D=this.destroyOnClose,L=this.content||this.message,R=o.default||u.default,j=o.footer||u.footer,B=o.header||u.header,F=o.title||u.title,z={};return y&&(z.mousedown=this.mousedownEvent),v&&C&&"modal"===d&&(z.dblclick=this.toggleZoomEvent),t("div",{class:["vxe-modal--wrapper","type--".concat(d),f||"",(e={},p(e,"size--".concat(l),l),p(e,"status--".concat(x),x),p(e,"is--animat",m),p(e,"lock--scroll",T),p(e,"lock--view",A),p(e,"is--resize",h),p(e,"is--mask",N),p(e,"is--maximize",E),p(e,"is--visible",k),p(e,"is--active",M),p(e,"is--loading",b),e)],style:{zIndex:this.modalZindex,top:S?"".concat(S,"px"):null},on:{click:this.selfClickEvent}},[t("div",{class:"vxe-modal--box",on:{mousedown:this.boxMousedownEvent},ref:"modalBox"},[this.showHeader?t("div",{class:["vxe-modal--header",{"is--drag":y,"is--ellipsis":!I&&P}],on:z},B?!c||D&&!M?[]:B.call(this,{$modal:this},t):[F?F.call(this,{$modal:this},t):t("span",{class:"vxe-modal--title"},O?(0,s.getFuncText)(O):i.default.i18n("vxe.alert.title")),v?t("i",{class:["vxe-modal--zoom-btn","trigger--btn",E?i.default.icon.MODAL_ZOOM_OUT:i.default.icon.MODAL_ZOOM_IN],attrs:{title:i.default.i18n("vxe.modal.zoom".concat(E?"Out":"In"))},on:{click:this.toggleZoomEvent}}):r(),g?t("i",{class:["vxe-modal--close-btn","trigger--btn",i.default.icon.MODAL_CLOSE],attrs:{title:i.default.i18n("vxe.modal.close")},on:{click:this.closeEvent}}):r()]):null,t("div",{class:"vxe-modal--body"},[x?t("div",{class:"vxe-modal--status-wrapper"},[t("i",{class:["vxe-modal--status-icon",w||i.default.icon["MODAL_".concat(x).toLocaleUpperCase()]]})]):null,t("div",{class:"vxe-modal--content"},R?!c||D&&!M?[]:R.call(this,{$modal:this},t):(0,s.getFuncText)(L)),I?null:t("div",{class:["vxe-loading",{"is--visible":b}]},[t("div",{class:"vxe-loading--spinner"})])]),_?t("div",{class:"vxe-modal--footer"},j?!c||D&&!M?[]:j.call(this,{$modal:this},t):["confirm"===d?t("vxe-button",{ref:"cancelBtn",on:{click:this.cancelEvent}},this.cancelButtonText||i.default.i18n("vxe.button.cancel")):null,t("vxe-button",{ref:"confirmBtn",props:{status:"primary"},on:{click:this.confirmEvent}},this.confirmButtonText||i.default.i18n("vxe.button.confirm"))]):null,!I&&h?t("span",{class:"vxe-modal--resize"},["wl","wr","swst","sest","st","swlb","selb","sb"].map((function(e){return t("span",{class:"".concat(e,"-resize"),attrs:{type:e},on:{mousedown:n.dragEvent}})}))):null])])},methods:{recalculate:function(){var t=this.width,e=this.height,n=this.getBox();return n.style.width=t?isNaN(t)?t:"".concat(t,"px"):null,n.style.height=e?isNaN(e)?e:"".concat(e,"px"):null,this.$nextTick()},selfClickEvent:function(t){this.maskClosable&&t.target===this.$el&&this.close("mask")},updateZindex:function(){var t=this.zIndex,e=this.modalZindex;t?this.modalZindex=t:e<s.default.getLastZIndex()&&(this.modalZindex=s.default.nextZIndex())},closeEvent:function(t){var e=this.events,n=void 0===e?{}:e,r="close",i={type:r,$modal:this,$event:t};n[r]?n[r].call(this,i):this.$emit(r,i),this.close(r)},confirmEvent:function(t){var e=this.events,n=void 0===e?{}:e,r="confirm",i={type:r,$modal:this,$event:t};n[r]?n[r].call(this,i):this.$emit(r,i),this.close(r)},cancelEvent:function(t){var e=this.events,n=void 0===e?{}:e,r="cancel",i={type:r,$modal:this,$event:t};n[r]?n[r].call(this,i):this.$emit(r,i),this.close(r)},open:function(){var t=this,e=this.$refs,n=this.events,r=void 0===n?{}:n,i=this.inited,o=this.duration,s=this.visible,u=this.isMsg,c=this.remember,l=this.showFooter;i||(this.inited=!0,this.transfer&&document.body.appendChild(this.$el)),s||(c||this.recalculate(),this.visible=!0,this.contentVisible=!1,this.updateZindex(),g.push(this),setTimeout((function(){t.contentVisible=!0,t.$nextTick((function(){if(l){var n=e.confirmBtn||e.cancelBtn;n&&n.focus()}var i={type:"",$modal:t};r.show?r.show.call(t,i):(t.$emit("input",!0),t.$emit("show",i))}))}),10),u?(this.addMsgQueue(),-1!==o&&setTimeout((function(){return t.close("close")}),a.default.toNumber(o))):this.$nextTick((function(){var e=t.firstOpen,n=t.fullscreen;c&&e||t.updatePosition().then((function(){setTimeout((function(){return t.updatePosition()}),20)})),e||(t.firstOpen=!0,t.hasPosStorage()?t.restorePosStorage():n&&t.$nextTick((function(){return t.maximize()})))})))},addMsgQueue:function(){-1===v.indexOf(this)&&v.push(this),this.updateStyle()},removeMsgQueue:function(){var t=this;v.indexOf(this)>-1&&a.default.remove(v,(function(e){return e===t})),this.updateStyle()},updateStyle:function(){this.$nextTick((function(){var t=0;v.forEach((function(e){t+=a.default.toNumber(e.top),e.modalTop=t,t+=e.$refs.modalBox.clientHeight}))}))},updatePosition:function(){var t=this;return this.$nextTick().then((function(){var e,n,r=t.marginSize,i=t.position,o=t.getBox(),a=document.documentElement.clientWidth||document.body.clientWidth,s=document.documentElement.clientHeight||document.body.clientHeight,u="center"===i,c=u?{top:i,left:i}:Object.assign({},i),l=c.top,f=c.left,d=u||"center"===l;n=f&&!u&&"center"!==f?isNaN(f)?f:"".concat(f,"px"):"".concat(Math.max(r,a/2-o.offsetWidth/2),"px"),e=l&&!d?isNaN(l)?l:"".concat(l,"px"):"".concat(Math.max(r,s/2-o.offsetHeight/2),"px"),o.style.top=e,o.style.left=n}))},close:function(t){var e=this,n=this.events,r=void 0===n?{}:n,i=this.remember,o=this.visible,s=this.isMsg,u=this.beforeHideMethod,c={type:t,$modal:this};o&&Promise.resolve(u?u(c):null).then((function(t){a.default.isError(t)||(s&&e.removeMsgQueue(),e.contentVisible=!1,i||(e.zoomLocat=null),a.default.remove(g,(function(t){return t===e})),e.$emit("before-hide",c),setTimeout((function(){e.visible=!1,r.hide?r.hide.call(e,c):(e.$emit("input",!1),e.$emit("hide",c))}),200))})).catch((function(t){return t}))},handleGlobalKeydownEvent:function(t){var e=this;if(27===t.keyCode){var n=a.default.max(g,(function(t){return t.modalZindex}));n&&setTimeout((function(){n===e&&n.escClosable&&e.close("exit")}),10)}},getBox:function(){return this.$refs.modalBox},isMaximized:function(){return!!this.zoomLocat},maximize:function(){var t=this;return this.$nextTick().then((function(){if(!t.zoomLocat){var e=Math.max(0,t.marginSize),n=t.getBox(),r=u.default.getDomNode(),i=r.visibleHeight,o=r.visibleWidth;t.zoomLocat={top:n.offsetTop,left:n.offsetLeft,width:n.offsetWidth+(n.style.width?0:1),height:n.offsetHeight+(n.style.height?0:1)},Object.assign(n.style,{top:"".concat(e,"px"),left:"".concat(e,"px"),width:"".concat(o-2*e,"px"),height:"".concat(i-2*e,"px")}),t.savePosStorage()}}))},revert:function(){var t=this;return this.$nextTick().then((function(){var e=t.zoomLocat;if(e){var n=t.getBox();t.zoomLocat=null,Object.assign(n.style,{top:"".concat(e.top,"px"),left:"".concat(e.left,"px"),width:"".concat(e.width,"px"),height:"".concat(e.height,"px")}),t.savePosStorage()}}))},zoom:function(){var t=this;return this[this.zoomLocat?"revert":"maximize"]().then((function(){return t.isMaximized()}))},toggleZoomEvent:function(t){var e=this,n=this.$listeners,r=this.zoomLocat,i=this.events,o=void 0===i?{}:i,a={type:r?"revert":"max",$modal:this,$event:t};return this.zoom().then((function(){n.zoom?e.$emit("zoom",a):o.zoom&&o.zoom.call(e,a)}))},getPosition:function(){if(!this.isMsg){var t=this.getBox();if(t)return{top:t.offsetTop,left:t.offsetLeft}}return null},setPosition:function(t,e){if(!this.isMsg){var n=this.getBox();a.default.isNumber(t)&&(n.style.top="".concat(t,"px")),a.default.isNumber(e)&&(n.style.left="".concat(e,"px"))}return this.$nextTick()},boxMousedownEvent:function(){var t=this.modalZindex;g.some((function(e){return e.visible&&e.modalZindex>t}))&&this.updateZindex()},mousedownEvent:function(t){var e=this,n=this.remember,r=this.storage,i=this.marginSize,o=this.zoomLocat,a=this.getBox();if(!o&&0===t.button&&!u.default.getEventTargetNode(t,a,"trigger--btn").flag){t.preventDefault();var s=document.onmousemove,c=document.onmouseup,l=t.clientX-a.offsetLeft,f=t.clientY-a.offsetTop,d=u.default.getDomNode(),h=d.visibleHeight,p=d.visibleWidth;document.onmousemove=function(t){t.preventDefault();var e=a.offsetWidth,n=a.offsetHeight,r=i,o=p-e-i-1,s=i,u=h-n-i-1,c=t.clientX-l,d=t.clientY-f;c>o&&(c=o),c<r&&(c=r),d>u&&(d=u),d<s&&(d=s),a.style.left="".concat(c,"px"),a.style.top="".concat(d,"px")},document.onmouseup=function(){document.onmousemove=s,document.onmouseup=c,n&&r&&e.$nextTick((function(){e.savePosStorage()}))}}},dragEvent:function(t){var e=this;t.preventDefault();var n=this.$listeners,r=this.marginSize,i=this.events,o=void 0===i?{}:i,s=this.remember,c=this.storage,l=u.default.getDomNode(),f=l.visibleHeight,d=l.visibleWidth,h=t.target.getAttribute("type"),p=a.default.toNumber(this.minWidth),g=a.default.toNumber(this.minHeight),v=d,m=f,y=this.getBox(),b=document.onmousemove,x=document.onmouseup,w=y.clientWidth,_=y.clientHeight,E=t.clientX,S=t.clientY,C=y.offsetTop,k=y.offsetLeft,M={type:"resize",$modal:this};document.onmousemove=function(t){var i,a,u,l;switch(t.preventDefault(),h){case"wl":u=(i=E-t.clientX)+w,k-i>r&&u>p&&(y.style.width="".concat(u<v?u:v,"px"),y.style.left="".concat(k-i,"px"));break;case"swst":i=E-t.clientX,a=S-t.clientY,u=i+w,l=a+_,k-i>r&&u>p&&(y.style.width="".concat(u<v?u:v,"px"),y.style.left="".concat(k-i,"px")),C-a>r&&l>g&&(y.style.height="".concat(l<m?l:m,"px"),y.style.top="".concat(C-a,"px"));break;case"swlb":i=E-t.clientX,a=t.clientY-S,u=i+w,l=a+_,k-i>r&&u>p&&(y.style.width="".concat(u<v?u:v,"px"),y.style.left="".concat(k-i,"px")),C+l+r<f&&l>g&&(y.style.height="".concat(l<m?l:m,"px"));break;case"st":a=S-t.clientY,l=_+a,C-a>r&&l>g&&(y.style.height="".concat(l<m?l:m,"px"),y.style.top="".concat(C-a,"px"));break;case"wr":i=t.clientX-E,k+(u=i+w)+r<d&&u>p&&(y.style.width="".concat(u<v?u:v,"px"));break;case"sest":i=t.clientX-E,l=(a=S-t.clientY)+_,k+(u=i+w)+r<d&&u>p&&(y.style.width="".concat(u<v?u:v,"px")),C-a>r&&l>g&&(y.style.height="".concat(l<m?l:m,"px"),y.style.top="".concat(C-a,"px"));break;case"selb":i=t.clientX-E,l=(a=t.clientY-S)+_,k+(u=i+w)+r<d&&u>p&&(y.style.width="".concat(u<v?u:v,"px")),C+l+r<f&&l>g&&(y.style.height="".concat(l<m?l:m,"px"));break;case"sb":a=t.clientY-S,C+(l=a+_)+r<f&&l>g&&(y.style.height="".concat(l<m?l:m,"px"))}y.className=y.className.replace(/\s?is--drag/,"")+" is--drag",s&&c&&e.savePosStorage(),n.zoom?e.$emit("zoom",M):o.zoom&&o.zoom.call(e,M)},document.onmouseup=function(){e.zoomLocat=null,document.onmousemove=b,document.onmouseup=x,setTimeout((function(){y.className=y.className.replace(/\s?is--drag/,"")}),50)}},getStorageMap:function(t){var e=i.default.version,n=a.default.toStringJSON(localStorage.getItem(t));return n&&n._v===e?n:{_v:e}},hasPosStorage:function(){var t=this.id,e=this.remember,n=this.storage,r=this.storageKey;return!!(e&&n&&this.getStorageMap(r)[t])},restorePosStorage:function(){var t,e,n=this.id,r=this.remember,i=this.storage,o=this.storageKey;if(r&&i){var a=this.getStorageMap(o)[n];if(a){var s=this.getBox(),u=(t=a.split(","),e=8,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],l=u[1],f=u[2],d=u[3],p=u[4],g=u[5],v=u[6],m=u[7];c&&(s.style.left="".concat(c,"px")),l&&(s.style.top="".concat(l,"px")),f&&(s.style.width="".concat(f,"px")),d&&(s.style.height="".concat(d,"px")),p&&g&&(this.zoomLocat={left:p,top:g,width:v,height:m})}}},savePosStorage:function(){var t=this.id,e=this.remember,n=this.storage,r=this.storageKey,i=this.zoomLocat;if(e&&n){var o=this.getBox(),s=this.getStorageMap(r);s[t]=[o.style.left,o.style.top,o.style.width,o.style.height].concat(i?[i.left,i.top,i.width,i.height]:[]).map((function(t){return t?a.default.toNumber(t):""})).join(","),localStorage.setItem(r,a.default.toJSONString(s))}}}};e.default=m},7247:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Optgroup=void 0;var r,i=(r=n(3594))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Optgroup=o;var a=o;e.default=a},2401:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Option=void 0;var r,i=(r=n(12))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Option=o;var a=o;e.default=a},5377:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Pager=void 0;var r,i=(r=n(1240))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Pager=o;var a=o;e.default=a},1240:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(8478)),i=o(n(5042));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={name:"VxePager",mixins:[o(n(7500)).default],props:{size:{type:String,default:function(){return i.default.pager.size||i.default.size}},layouts:{type:Array,default:function(){return i.default.pager.layouts||["PrevJump","PrevPage","Jump","PageCount","NextPage","NextJump","Sizes","Total"]}},currentPage:{type:Number,default:1},loading:Boolean,pageSize:{type:Number,default:function(){return i.default.pager.pageSize||10}},total:{type:Number,default:0},pagerCount:{type:Number,default:function(){return i.default.pager.pagerCount||7}},pageSizes:{type:Array,default:function(){return i.default.pager.pageSizes||[10,15,20,50,100]}},align:{type:String,default:function(){return i.default.pager.align}},border:{type:Boolean,default:function(){return i.default.pager.border}},background:{type:Boolean,default:function(){return i.default.pager.background}},perfect:{type:Boolean,default:function(){return i.default.pager.perfect}},autoHidden:{type:Boolean,default:function(){return i.default.pager.autoHidden}},transfer:{type:Boolean,default:function(){return i.default.pager.transfer}},className:[String,Function],iconPrevPage:String,iconJumpPrev:String,iconJumpNext:String,iconNextPage:String,iconJumpMore:String},inject:{$xegrid:{default:null}},data:function(){return{inpCurrPage:this.currentPage}},computed:{isSizes:function(){return this.layouts.some((function(t){return"Sizes"===t}))},pageCount:function(){return this.getPageCount(this.total,this.pageSize)},numList:function(){for(var t=this.pageCount>this.pagerCount?this.pagerCount-2:this.pagerCount,e=[],n=0;n<t;n++)e.push(n);return e},offsetNumber:function(){return Math.floor((this.pagerCount-2)/2)},sizeList:function(){return this.pageSizes.map((function(t){return r.default.isNumber(t)?{value:t,label:"".concat(i.default.i18n("vxe.pager.pagesize",[t]))}:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({value:"",label:""},t)}))}},watch:{currentPage:function(t){this.inpCurrPage=t}},render:function(t){var e,n=this,i=this.$scopedSlots,o=this.$xegrid,a=this.vSize,u=this.align,c=this.className,l=[];return i.left&&l.push(t("span",{class:"vxe-pager--left-wrapper"},i.left.call(this,{$grid:o}))),this.layouts.forEach((function(e){l.push(n["render".concat(e)](t))})),i.right&&l.push(t("span",{class:"vxe-pager--right-wrapper"},i.right.call(this,{$grid:o}))),t("div",{class:["vxe-pager",c?r.default.isFunction(c)?c({$pager:this}):c:"",(e={},s(e,"size--".concat(a),a),s(e,"align--".concat(u),u),s(e,"is--border",this.border),s(e,"is--background",this.background),s(e,"is--perfect",this.perfect),s(e,"is--hidden",this.autoHidden&&1===this.pageCount),s(e,"is--loading",this.loading),e)]},[t("div",{class:"vxe-pager--wrapper"},l)])},methods:{renderPrevPage:function(t){return t("button",{class:["vxe-pager--prev-btn",{"is--disabled":this.currentPage<=1}],attrs:{type:"button",title:i.default.i18n("vxe.pager.prevPage")},on:{click:this.prevPage}},[t("i",{class:["vxe-pager--btn-icon",this.iconPrevPage||i.default.icon.PAGER_PREV_PAGE]})])},renderPrevJump:function(t,e){return t(e||"button",{class:["vxe-pager--jump-prev",{"is--fixed":!e,"is--disabled":this.currentPage<=1}],attrs:{type:"button",title:i.default.i18n("vxe.pager.prevJump")},on:{click:this.prevJump}},[e?t("i",{class:["vxe-pager--jump-more-icon",this.iconJumpMore||i.default.icon.PAGER_JUMP_MORE]}):null,t("i",{class:["vxe-pager--jump-icon",this.iconJumpPrev||i.default.icon.PAGER_JUMP_PREV]})])},renderNumber:function(t){return t("span",{class:"vxe-pager--btn-wrapper"},this.renderPageBtn(t))},renderJumpNumber:function(t){return t("span",{class:"vxe-pager--btn-wrapper"},this.renderPageBtn(t,!0))},renderNextJump:function(t,e){return t(e||"button",{class:["vxe-pager--jump-next",{"is--fixed":!e,"is--disabled":this.currentPage>=this.pageCount}],attrs:{type:"button",title:i.default.i18n("vxe.pager.nextJump")},on:{click:this.nextJump}},[e?t("i",{class:["vxe-pager--jump-more-icon",this.iconJumpMore||i.default.icon.PAGER_JUMP_MORE]}):null,t("i",{class:["vxe-pager--jump-icon",this.iconJumpNext||i.default.icon.PAGER_JUMP_NEXT]})])},renderNextPage:function(t){return t("button",{class:["vxe-pager--next-btn",{"is--disabled":this.currentPage>=this.pageCount}],attrs:{type:"button",title:i.default.i18n("vxe.pager.nextPage")},on:{click:this.nextPage}},[t("i",{class:["vxe-pager--btn-icon",this.iconNextPage||i.default.icon.PAGER_NEXT_PAGE]})])},renderSizes:function(t){var e=this;return t("vxe-select",{class:"vxe-pager--sizes",props:{value:this.pageSize,placement:"top",transfer:this.transfer,options:this.sizeList},on:{change:function(t){var n=t.value;e.pageSizeEvent(n)}}})},renderFullJump:function(t){return this.renderJump(t,!0)},renderJump:function(t,e){return t("span",{class:"vxe-pager--jump"},[e?t("span",{class:"vxe-pager--goto-text"},i.default.i18n("vxe.pager.goto")):null,t("input",{class:"vxe-pager--goto",domProps:{value:this.inpCurrPage},attrs:{type:"text",autocomplete:"off"},on:{input:this.jumpInputEvent,keydown:this.jumpKeydownEvent,blur:this.triggerJumpEvent}}),e?t("span",{class:"vxe-pager--classifier-text"},i.default.i18n("vxe.pager.pageClassifier")):null])},renderPageCount:function(t){return t("span",{class:"vxe-pager--count"},[t("span",{class:"vxe-pager--separator"}),t("span",this.pageCount)])},renderTotal:function(t){return t("span",{class:"vxe-pager--total"},i.default.i18n("vxe.pager.total",[this.total]))},renderPageBtn:function(t,e){var n=this,r=this.numList,i=this.currentPage,o=this.pageCount,a=this.pagerCount,s=this.offsetNumber,u=[],c=o>a,l=c&&i>s+1,f=c&&i<o-s,d=1;return c&&(d=i>=o-s?Math.max(o-r.length+1,1):Math.max(i-s,1)),e&&l&&u.push(t("button",{class:"vxe-pager--num-btn",attrs:{type:"button"},on:{click:function(){return n.jumpPage(1)}}},1),this.renderPrevJump(t,"span")),r.forEach((function(e,r){var a=d+r;a<=o&&u.push(t("button",{class:["vxe-pager--num-btn",{"is--active":i===a}],attrs:{type:"button"},on:{click:function(){return n.jumpPage(a)}},key:a},a))})),e&&f&&u.push(this.renderNextJump(t,"button"),t("button",{class:"vxe-pager--num-btn",attrs:{type:"button"},on:{click:function(){return n.jumpPage(o)}}},o)),u},getPageCount:function(t,e){return Math.max(Math.ceil(t/e),1)},prevPage:function(){var t=this.currentPage,e=this.pageCount;t>1&&this.jumpPage(Math.min(e,Math.max(t-1,1)))},nextPage:function(){var t=this.currentPage,e=this.pageCount;t<e&&this.jumpPage(Math.min(e,t+1))},prevJump:function(){this.jumpPage(Math.max(this.currentPage-this.numList.length,1))},nextJump:function(){this.jumpPage(Math.min(this.currentPage+this.numList.length,this.pageCount))},jumpPage:function(t){t!==this.currentPage&&(this.$emit("update:currentPage",t),this.$emit("page-change",{type:"current",pageSize:this.pageSize,currentPage:t}))},pageSizeEvent:function(t){this.changePageSize(t)},changePageSize:function(t){t!==this.pageSize&&(this.$emit("update:pageSize",t),this.$emit("page-change",{type:"size",pageSize:t,currentPage:Math.min(this.currentPage,this.getPageCount(this.total,t))}))},jumpInputEvent:function(t){this.inpCurrPage=t.target.value},jumpKeydownEvent:function(t){13===t.keyCode?this.triggerJumpEvent(t):38===t.keyCode?(t.preventDefault(),this.nextPage()):40===t.keyCode&&(t.preventDefault(),this.prevPage())},triggerJumpEvent:function(t){var e=r.default.toNumber(t.target.value),n=e<=0?1:e>=this.pageCount?this.pageCount:e;t.target.value=n,this.jumpPage(n)}}};e.default=u},5788:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Pulldown=void 0;var r,i=(r=n(1598))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Pulldown=o;var a=o;e.default=a},1598:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(5042)),i=u(n(7500)),o=u(n(6970)),a=u(n(1455)),s=n(8468);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={name:"VxePulldown",mixins:[i.default],props:{value:Boolean,disabled:Boolean,placement:String,size:{type:String,default:function(){return r.default.size}},destroyOnClose:Boolean,transfer:Boolean},data:function(){return{inited:!1,panelIndex:0,panelStyle:null,panelPlacement:null,currentValue:null,visiblePanel:!1,animatVisible:!1,isActivated:!1}},watch:{value:function(t){t?this.showPanel():this.hidePanel()}},created:function(){s.GlobalEvent.on(this,"mousewheel",this.handleGlobalMousewheelEvent),s.GlobalEvent.on(this,"mousedown",this.handleGlobalMousedownEvent),s.GlobalEvent.on(this,"blur",this.handleGlobalBlurEvent)},beforeDestroy:function(){var t=this.$refs.panel;t&&t.parentNode&&t.parentNode.removeChild(t)},destroyed:function(){s.GlobalEvent.off(this,"mousewheel"),s.GlobalEvent.off(this,"mousedown"),s.GlobalEvent.off(this,"blur")},render:function(t){var e,n,r=this.$scopedSlots,i=this.inited,o=this.vSize,a=this.destroyOnClose,s=this.transfer,u=this.isActivated,l=this.disabled,f=this.animatVisible,d=this.visiblePanel,h=this.panelStyle,p=this.panelPlacement,g=r.default,v=r.dropdown;return t("div",{class:["vxe-pulldown",(e={},c(e,"size--".concat(o),o),c(e,"is--visivle",d),c(e,"is--disabled",l),c(e,"is--active",u),e)]},[t("div",{ref:"content",class:"vxe-pulldown--content"},g?g.call(this,{$pulldown:this},t):[]),t("div",{ref:"panel",class:["vxe-table--ignore-clear vxe-pulldown--panel",(n={},c(n,"size--".concat(o),o),c(n,"is--transfer",s),c(n,"animat--leave",f),c(n,"animat--enter",d),n)],attrs:{placement:p},style:h},v?[t("div",{class:"vxe-pulldown--wrapper"},!i||a&&!d&&!f?[]:v.call(this,{$pulldown:this},t))]:[])])},methods:{handleGlobalMousewheelEvent:function(t){var e=this.$refs,n=this.disabled,r=this.visiblePanel;n||r&&(a.default.getEventTargetNode(t,e.panel).flag?this.updatePlacement():(this.hidePanel(),this.$emit("hide-panel",{$event:t})))},handleGlobalMousedownEvent:function(t){var e=this.$refs,n=this.$el,r=this.disabled,i=this.visiblePanel;r||(this.isActivated=a.default.getEventTargetNode(t,n).flag||a.default.getEventTargetNode(t,e.panel).flag,i&&!this.isActivated&&(this.hidePanel(),this.$emit("hide-panel",{$event:t})))},handleGlobalBlurEvent:function(t){this.visiblePanel&&(this.isActivated=!1,this.hidePanel(),this.$emit("hide-panel",{$event:t}))},updateZindex:function(){this.panelIndex<o.default.getLastZIndex()&&(this.panelIndex=o.default.nextZIndex())},isPanelVisible:function(){return this.visiblePanel},togglePanel:function(){return this.visiblePanel?this.hidePanel():this.showPanel()},showPanel:function(){var t=this;return this.inited||(this.inited=!0,this.transfer&&document.body.appendChild(this.$refs.panel)),new Promise((function(e){t.disabled?e(t.$nextTick()):(clearTimeout(t.hidePanelTimeout),t.isActivated=!0,t.animatVisible=!0,setTimeout((function(){t.visiblePanel=!0,t.$emit("update:input",!0),t.updatePlacement(),setTimeout((function(){e(t.updatePlacement())}),40)}),10),t.updateZindex())}))},hidePanel:function(){var t=this;return this.visiblePanel=!1,this.$emit("update:input",!1),new Promise((function(e){t.animatVisible?t.hidePanelTimeout=setTimeout((function(){t.animatVisible=!1,e(t.$nextTick())}),350):e(t.$nextTick())}))},updatePlacement:function(){var t=this;return this.$nextTick().then((function(){var e=t.$refs,n=t.transfer,r=t.placement,i=t.panelIndex;if(t.visiblePanel){var o=e.panel,s=e.content;if(o&&s){var u=s.offsetHeight,c=s.offsetWidth,l=o.offsetHeight,f=o.offsetWidth,d={zIndex:i},h=a.default.getAbsolutePos(s),p=h.boundingTop,g=h.boundingLeft,v=h.visibleHeight,m=h.visibleWidth,y="bottom";if(n){var b=g,x=p+u;"top"===r?(y="top",x=p-l):r||(x+l+5>v&&(y="top",x=p-l),x<5&&(y="bottom",x=p+u)),b+f+5>m&&(b-=b+f+5-m),b<5&&(b=5),Object.assign(d,{left:"".concat(b,"px"),top:"".concat(x,"px"),minWidth:"".concat(c,"px")})}else"top"===r?(y="top",d.bottom="".concat(u,"px")):r||p+u+l>v&&p-u-l>5&&(y="top",d.bottom="".concat(u,"px"));t.panelStyle=d,t.panelPlacement=y}}return t.$nextTick()}))}}};e.default=l},8566:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.RadioButton=void 0;var r,i=(r=n(6823))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.RadioButton=o;var a=o;e.default=a},2600:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.RadioGroup=void 0;var r,i=(r=n(4258))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.RadioGroup=o;var a=o;e.default=a},5004:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Radio=void 0;var r,i=(r=n(8220))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Radio=o;var a=o;e.default=a},6823:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=n(6970),o=(r=n(5042))&&r.__esModule?r:{default:r};function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={name:"VxeRadioButton",props:{value:[String,Number,Boolean],label:[String,Number,Boolean],title:[String,Number],content:[String,Number],disabled:Boolean,strict:{type:Boolean,default:function(){return o.default.radioButton.strict}},size:{type:String,default:function(){return o.default.radioButton.size||o.default.size}}},inject:{$xeradiogroup:{default:null},$xeform:{default:null},$xeformiteminfo:{default:null}},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize},isDisabled:function(){var t=this.$xeradiogroup;return this.disabled||t&&t.disabled},isStrict:function(){var t=this.$xeradiogroup;return t?t.strict:this.strict}},render:function(t){var e,n=this.$scopedSlots,r=this.$xeradiogroup,o=this.isDisabled,s=this.title,u=this.vSize,c=this.value,l=this.label,f=this.content,d={};return s&&(d.title=s),t("label",{class:["vxe-radio","vxe-radio-button",(e={},a(e,"size--".concat(u),u),a(e,"is--disabled",o),e)],attrs:d},[t("input",{class:"vxe-radio--input",attrs:{type:"radio",name:r?r.name:null,disabled:o},domProps:{checked:r?r.value===l:c===l},on:{change:this.changeEvent,click:this.clickEvent}}),t("span",{class:"vxe-radio--label"},n.default?n.default.call(this,{}):[(0,i.getFuncText)(f)])])},methods:{handleValue:function(t,e){var n=this.$xeradiogroup,r={label:t,$event:e};n?n.handleChecked(r,e):(this.$emit("input",t),this.$emit("change",r),this.$xeform&&this.$xeformiteminfo&&this.$xeform.triggerItemEvent(e,this.$xeformiteminfo.itemConfig.field,t))},changeEvent:function(t){this.isDisabled||this.handleValue(this.label,t)},clickEvent:function(t){var e=this.$xeradiogroup,n=this.isDisabled,r=this.isStrict;n||r||this.label===(e?e.value:this.value)&&this.handleValue(null,t)}}};e.default=s},4258:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(8478)),i=o(n(5042));function o(t){return t&&t.__esModule?t:{default:t}}var a={name:"VxeRadioGroup",props:{value:[String,Number,Boolean],disabled:Boolean,strict:{type:Boolean,default:function(){return i.default.radioGroup.strict}},size:{type:String,default:function(){return i.default.radioGroup.size||i.default.size}}},inject:{$xeform:{default:null},$xeformiteminfo:{default:null}},provide:function(){return{$xeradiogroup:this}},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize}},data:function(){return{name:r.default.uniqueId("xegroup_")}},render:function(t){var e=this.$scopedSlots;return t("div",{class:"vxe-radio-group"},e.default?e.default.call(this,{}):[])},methods:{handleChecked:function(t,e){this.$emit("input",t.label),this.$emit("change",t),this.$xeform&&this.$xeformiteminfo&&this.$xeform.triggerItemEvent(e,this.$xeformiteminfo.itemConfig.field,t.label)}}};e.default=a},8220:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(6970),i=o(n(5042));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={name:"VxeRadio",mixins:[o(n(7500)).default],props:{value:[String,Number,Boolean],label:[String,Number,Boolean],title:[String,Number],content:[String,Number],disabled:Boolean,name:String,strict:{type:Boolean,default:function(){return i.default.radio.strict}},size:{type:String,default:function(){return i.default.radio.size||i.default.size}}},inject:{$xeradiogroup:{default:null},$xeform:{default:null},$xeformiteminfo:{default:null}},computed:{isDisabled:function(){var t=this.$xeradiogroup;return this.disabled||t&&t.disabled},isStrict:function(){var t=this.$xeradiogroup;return t?t.strict:this.strict}},render:function(t){var e,n=this.$scopedSlots,i=this.$xeradiogroup,o=this.isDisabled,s=this.title,u=this.vSize,c=this.value,l=this.label,f=this.name,d=this.content,h={};return s&&(h.title=s),t("label",{class:["vxe-radio",(e={},a(e,"size--".concat(u),u),a(e,"is--disabled",o),e)],attrs:h},[t("input",{class:"vxe-radio--input",attrs:{type:"radio",name:i?i.name:f,disabled:o},domProps:{checked:i?i.value===l:c===l},on:{change:this.changeEvent,click:this.clickEvent}}),t("span",{class:"vxe-radio--icon"}),t("span",{class:"vxe-radio--label"},n.default?n.default.call(this,{}):[(0,r.getFuncText)(d)])])},methods:{handleValue:function(t,e){var n=this.$xeradiogroup,r={label:t,$event:e};n?n.handleChecked(r,e):(this.$emit("input",t),this.$emit("change",r),this.$xeform&&this.$xeformiteminfo&&this.$xeform.triggerItemEvent(e,this.$xeformiteminfo.itemConfig.field,t))},changeEvent:function(t){this.isDisabled||this.handleValue(this.label,t)},clickEvent:function(t){var e=this.$xeradiogroup,n=this.isDisabled,r=this.isStrict;n||r||this.label===(e?e.value:this.value)&&this.handleValue(null,t)}}};e.default=s},5419:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Select=void 0;var r=a(n(8813)),i=a(n(12)),o=a(n(3594));function a(t){return t&&t.__esModule?t:{default:t}}var s=Object.assign(r.default,{Option:i.default,Optgroup:o.default,install:function(t){t.component(r.default.name,r.default),t.component(i.default.name,i.default),t.component(o.default.name,o.default)}});e.Select=s;var u=s;e.default=u},3594:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(8470),i={label:{type:[String,Number,Boolean],default:""},visible:{type:Boolean,default:null},className:[String,Function],disabled:Boolean},o={};Object.keys(i).forEach((function(t){o[t]=function(e){this.optionConfig.update(t,e)}}));var a={name:"VxeOptgroup",props:i,provide:function(){return{$xeoptgroup:this}},inject:{$xeselect:{default:null}},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize}},watch:o,mounted:function(){(0,r.assemOption)(this)},created:function(){this.optionConfig=(0,r.createOption)(this.$xeselect,this)},destroyed:function(){(0,r.destroyOption)(this)},render:function(t){return t("div",this.$slots.default)}};e.default=a},12:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(8470),i={value:null,label:{type:[String,Number,Boolean],default:""},visible:{type:Boolean,default:null},className:[String,Function],disabled:Boolean},o={};Object.keys(i).forEach((function(t){o[t]=function(e){this.optionConfig.update(t,e)}}));var a={name:"VxeOption",props:i,inject:{$xeselect:{default:null},$xeoptgroup:{default:null}},watch:o,mounted:function(){(0,r.assemOption)(this)},created:function(){this.optionConfig=(0,r.createOption)(this.$xeselect,this)},destroyed:function(){(0,r.destroyOption)(this)},render:function(t){return t("div")}};e.default=a},8813:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.renderOptgroup=x,e.renderOption=b;var i=d(n(8478)),o=d(n(9174)),a=d(n(5042)),s=d(n(7500)),u=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=f(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(6970)),c=d(n(1455)),l=n(8468);function f(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(f=function(t){return t?n:e})(t)}function d(t){return t&&t.__esModule?t:{default:t}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){return!1!==t.visible}function g(t){return t.optionOpts.keyField||t.optionId||"_X_OPTION_KEY"}function v(t,e){var n=e[g(t)];return n?encodeURIComponent(n):""}function m(t,e){var n=t.isGroup,r=t.fullOptionList,i=t.fullGroupList,o=t.valueField;if(n)for(var a=0;a<i.length;a++){var s=i[a];if(s.options)for(var u=0;u<s.options.length;u++){var c=s.options[u];if(e===c[o])return c}}return r.find((function(t){return e===t[o]}))}function y(t,e){var n=m(t,e);return i.default.toValueString(n?n[t.labelField]:e)}function b(t,e,n,r){var i=e.isGroup,o=e.labelField,a=e.valueField,s=e.optionKey,c=e.value,l=e.multiple,f=e.currentValue,d=e.optionOpts.useKey;return n.map((function(n,h){var g=n.slots,m=!i||p(n),y=r&&r.disabled||n.disabled,b=n[a],x=v(e,n),w=g?g.default:null;return m?t("div",{key:d||s?x:h,class:["vxe-select-option",n.className,{"is--disabled":y,"is--selected":l?c&&c.indexOf(b)>-1:c===b,"is--hover":f===b}],attrs:{optid:x},on:{mousedown:e.mousedownOptionEvent,click:function(t){y||e.changeOptionEvent(t,b)},mouseenter:function(){y||e.setCurrentOption(n)}}},w?e.callSlot(w,{option:n,$select:e},t):u.default.formatText((0,u.getFuncText)(n[o]))):null}))}function x(t,e){var n=e.optionKey,r=e.visibleGroupList,i=e.groupLabelField,o=e.groupOptionsField,a=e.optionOpts.useKey;return r.map((function(r,s){var c=r.slots,l=v(e,r),f=r.disabled,d=c?c.default:null;return t("div",{key:a||n?l:s,class:["vxe-optgroup",r.className,{"is--disabled":f}],attrs:{optid:l}},[t("div",{class:"vxe-optgroup--title"},d?e.callSlot(d,{option:r,$select:e},t):(0,u.getFuncText)(r[i])),t("div",{class:"vxe-optgroup--wrapper"},b(t,e,r[o],r))])}))}function w(t,e){var n=e.isGroup,r=e.visibleGroupList,i=e.visibleOptionList;if(n){if(r.length)return x(t,e)}else if(i.length)return b(t,e,i);return[t("div",{class:"vxe-select--empty-placeholder"},e.emptyText||a.default.i18n("vxe.select.emptyText"))]}var _={name:"VxeSelect",mixins:[s.default],props:{value:null,clearable:Boolean,placeholder:String,loading:Boolean,disabled:Boolean,multiple:Boolean,multiCharOverflow:{type:[Number,String],default:function(){return a.default.select.multiCharOverflow}},prefixIcon:String,placement:String,options:Array,optionProps:Object,optionGroups:Array,optionGroupProps:Object,optionConfig:Object,className:[String,Function],size:{type:String,default:function(){return a.default.select.size||a.default.size}},emptyText:String,optionId:{type:String,default:function(){return a.default.select.optionId}},optionKey:Boolean,transfer:{type:Boolean,default:function(){return a.default.select.transfer}}},components:{VxeInput:o.default},inject:{$xeform:{default:null},$xeformiteminfo:{default:null}},provide:function(){return{$xeselect:this}},data:function(){return{inited:!1,collectOption:[],fullGroupList:[],fullOptionList:[],visibleGroupList:[],visibleOptionList:[],panelIndex:0,panelStyle:null,panelPlacement:null,currentValue:null,visiblePanel:!1,animatVisible:!1,isActivated:!1}},computed:{propsOpts:function(){return this.optionProps||{}},groupPropsOpts:function(){return this.optionGroupProps||{}},labelField:function(){return this.propsOpts.label||"label"},valueField:function(){return this.propsOpts.value||"value"},groupLabelField:function(){return this.groupPropsOpts.label||"label"},groupOptionsField:function(){return this.groupPropsOpts.options||"options"},optionOpts:function(){return Object.assign({},a.default.select.optionConfig,this.optionConfig)},isGroup:function(){return this.fullGroupList.some((function(t){return t.options&&t.options.length}))},multiMaxCharNum:function(){return i.default.toNumber(this.multiCharOverflow)},selectLabel:function(){var t=this,e=this.value,n=this.multiple,r=this.multiMaxCharNum;return e&&n?(i.default.isArray(e)?e:[e]).map((function(e){var n=y(t,e);return r>0&&n.length>r?"".concat(n.substring(0,r),"..."):n})).join(", "):y(this,e)}},watch:{collectOption:function(t){t.some((function(t){return t.options&&t.options.length}))?(this.fullOptionList=[],this.fullGroupList=t):(this.fullGroupList=[],this.fullOptionList=t),this.cacheItemMap()},options:function(t){this.fullGroupList=[],this.fullOptionList=t,this.cacheItemMap()},optionGroups:function(t){this.fullOptionList=[],this.fullGroupList=t,this.cacheItemMap()}},created:function(){var t=this.options,e=this.optionGroups;e?this.fullGroupList=e:t&&(this.fullOptionList=t),this.cacheItemMap(),l.GlobalEvent.on(this,"mousewheel",this.handleGlobalMousewheelEvent),l.GlobalEvent.on(this,"mousedown",this.handleGlobalMousedownEvent),l.GlobalEvent.on(this,"keydown",this.handleGlobalKeydownEvent),l.GlobalEvent.on(this,"blur",this.handleGlobalBlurEvent)},beforeDestroy:function(){var t=this.$refs.panel;t&&t.parentNode&&t.parentNode.removeChild(t)},destroyed:function(){l.GlobalEvent.off(this,"mousewheel"),l.GlobalEvent.off(this,"mousedown"),l.GlobalEvent.off(this,"keydown"),l.GlobalEvent.off(this,"blur")},render:function(t){var e,n,r=this.$scopedSlots,o=this.vSize,s=this.className,u=this.inited,c=this.isActivated,l=this.loading,f=this.disabled,d=this.visiblePanel,p=r.prefix;return t("div",{class:["vxe-select",s?i.default.isFunction(s)?s({$select:this}):s:"",(e={},h(e,"size--".concat(o),o),h(e,"is--visivle",d),h(e,"is--disabled",f),h(e,"is--loading",l),h(e,"is--active",c),e)]},[t("div",{class:"vxe-select-slots",ref:"hideOption"},this.$slots.default),t("vxe-input",{ref:"input",props:{clearable:this.clearable,placeholder:this.placeholder,readonly:!0,disabled:f,type:"text",prefixIcon:this.prefixIcon,suffixIcon:l?a.default.icon.SELECT_LOADED:d?a.default.icon.SELECT_OPEN:a.default.icon.SELECT_CLOSE,value:this.selectLabel},on:{clear:this.clearEvent,click:this.togglePanelEvent,focus:this.focusEvent,blur:this.blurEvent,"suffix-click":this.togglePanelEvent},scopedSlots:p?{prefix:function(){return p({})}}:{}}),t("div",{ref:"panel",class:["vxe-table--ignore-clear vxe-select--panel",(n={},h(n,"size--".concat(o),o),h(n,"is--transfer",this.transfer),h(n,"animat--leave",!l&&this.animatVisible),h(n,"animat--enter",!l&&d),n)],attrs:{placement:this.panelPlacement},style:this.panelStyle},u?[t("div",{ref:"optWrapper",class:"vxe-select-option--wrapper"},w(t,this))]:null)])},methods:{callSlot:function(t,e,n){if(t){var r=this.$scopedSlots;if(i.default.isString(t)&&(t=r[t]||null),i.default.isFunction(t))return t.call(this,e,n)}return[]},cacheItemMap:function(){var t=this,e=this.fullOptionList,n=this.fullGroupList,r=this.groupOptionsField,o=g(this),a=function(e){v(t,e)||(e[o]=i.default.uniqueId("opt_"))};n.length?n.forEach((function(t){a(t),t[r]&&t[r].forEach(a)})):e.length&&e.forEach(a),this.refreshOption()},refreshOption:function(){var t=this.isGroup,e=this.fullOptionList,n=this.fullGroupList;return t?this.visibleGroupList=n.filter(p):this.visibleOptionList=e.filter(p),this.$nextTick()},setCurrentOption:function(t){t&&(this.currentValue=t[this.valueField])},scrollToOption:function(t,e){var n=this;return this.$nextTick().then((function(){if(t){var r=n.$refs,i=r.optWrapper,o=r.panel.querySelector("[optid='".concat(v(n,t),"']"));if(i&&o){var a=i.offsetHeight;e?o.offsetTop+o.offsetHeight-i.scrollTop>a&&(i.scrollTop=o.offsetTop+o.offsetHeight-a):(o.offsetTop+5<i.scrollTop||o.offsetTop+5>i.scrollTop+i.clientHeight)&&(i.scrollTop=o.offsetTop-5)}}}))},clearEvent:function(t,e){this.clearValueEvent(e,null),this.hideOptionPanel()},clearValueEvent:function(t,e){this.changeEvent(t,e),this.$emit("clear",{value:e,$event:t})},changeEvent:function(t,e){e!==this.value&&(this.$emit("input",e),this.$emit("change",{value:e,$event:t}),this.$xeform&&this.$xeformiteminfo&&this.$xeform.triggerItemEvent(t,this.$xeformiteminfo.itemConfig.field,e))},mousedownOptionEvent:function(t){0===t.button&&t.stopPropagation()},changeOptionEvent:function(t,e){var n,r=this.value;this.multiple?(n=r?-1===r.indexOf(e)?r.concat([e]):r.filter((function(t){return t!==e})):[e],this.changeEvent(t,n)):(this.changeEvent(t,e),this.hideOptionPanel())},handleGlobalMousewheelEvent:function(t){var e=this.$refs,n=this.disabled,r=this.visiblePanel;n||r&&(c.default.getEventTargetNode(t,e.panel).flag?this.updatePlacement():this.hideOptionPanel())},handleGlobalMousedownEvent:function(t){var e=this.$refs,n=this.$el,r=this.disabled,i=this.visiblePanel;r||(this.isActivated=c.default.getEventTargetNode(t,n).flag||c.default.getEventTargetNode(t,e.panel).flag,i&&!this.isActivated&&this.hideOptionPanel())},handleGlobalKeydownEvent:function(t){var e=this.visiblePanel,n=this.currentValue,r=this.clearable;if(!this.disabled){var i=t.keyCode,o=9===i,a=13===i,s=27===i,u=38===i,c=40===i,l=46===i,f=32===i;if(o&&(this.isActivated=!1),e)if(s||o)this.hideOptionPanel();else if(a)t.preventDefault(),t.stopPropagation(),this.changeOptionEvent(t,n);else if(u||c){t.preventDefault();var d=function(t,e,n){var r,i,o,a,s=t.isGroup,u=t.visibleOptionList,c=t.visibleGroupList,l=t.valueField,f=t.groupOptionsField;if(s)for(var d=0;d<c.length;d++){var h=c[d],g=h[f],v=h.disabled;if(g)for(var m=0;m<g.length;m++){var y=g[m],b=p(y),x=v||y.disabled;if(r||x||(r=y),a&&b&&!x&&(o=y,!n))return{offsetOption:o};if(e===y[l]){if(a=y,n)return{offsetOption:i}}else b&&!x&&(i=y)}}else for(var w=0;w<u.length;w++){var _=u[w],E=_.disabled;if(r||E||(r=_),a&&!E&&(o=_,!n))return{offsetOption:o};if(e===_[l]){if(a=_,n)return{offsetOption:i}}else E||(i=_)}return{firstOption:r}}(this,n,u),h=d.firstOption,g=d.offsetOption;g||m(this,n)||(g=h),this.setCurrentOption(g),this.scrollToOption(g,c)}else f&&t.preventDefault();else(u||c||a||f)&&this.isActivated&&(t.preventDefault(),this.showOptionPanel());this.isActivated&&l&&r&&this.clearValueEvent(t,null)}},handleGlobalBlurEvent:function(){this.hideOptionPanel()},updateZindex:function(){this.panelIndex<u.default.getLastZIndex()&&(this.panelIndex=u.default.nextZIndex())},focusEvent:function(){this.disabled||(this.isActivated=!0)},blurEvent:function(){this.isActivated=!1},isPanelVisible:function(){return this.visiblePanel},togglePanel:function(){this.visiblePanel?this.hideOptionPanel():this.showOptionPanel(),this.$nextTick()},hidePanel:function(){this.visiblePanel&&this.hideOptionPanel(),this.$nextTick()},showPanel:function(){this.visiblePanel||this.showOptionPanel(),this.$nextTick()},togglePanelEvent:function(t){t.$event.preventDefault(),this.visiblePanel?this.hideOptionPanel():this.showOptionPanel()},showOptionPanel:function(){var t=this,e=this.loading,n=this.disabled;e||n||(clearTimeout(this.hidePanelTimeout),this.inited||(this.inited=!0,this.transfer&&document.body.appendChild(this.$refs.panel)),this.isActivated=!0,this.animatVisible=!0,setTimeout((function(){var e=t.value,n=t.multiple,r=m(t,n&&e?e[0]:e);t.visiblePanel=!0,r&&(t.setCurrentOption(r),t.scrollToOption(r))}),10),this.updateZindex(),this.updatePlacement())},hideOptionPanel:function(){var t=this;this.visiblePanel=!1,this.hidePanelTimeout=setTimeout((function(){t.animatVisible=!1}),350)},updatePlacement:function(){var t=this;return this.$nextTick().then((function(){var e=t.$refs,n=t.transfer,r=t.placement,i=t.panelIndex,o=e.input.$el,a=e.panel;if(a&&o){var s=o.offsetHeight,u=o.offsetWidth,l=a.offsetHeight,f=a.offsetWidth,d={zIndex:i},h=c.default.getAbsolutePos(o),p=h.boundingTop,g=h.boundingLeft,v=h.visibleHeight,m=h.visibleWidth,y="bottom";if(n){var b=g,x=p+s;"top"===r?(y="top",x=p-l):r||(x+l+5>v&&(y="top",x=p-l),x<5&&(y="bottom",x=p+s)),b+f+5>m&&(b-=b+f+5-m),b<5&&(b=5),Object.assign(d,{left:"".concat(b,"px"),top:"".concat(x,"px"),minWidth:"".concat(u,"px")})}else"top"===r?(y="top",d.bottom="".concat(s,"px")):r||p+s+l>v&&p-s-l>5&&(y="top",d.bottom="".concat(s,"px"));return t.panelStyle=d,t.panelPlacement=y,t.$nextTick()}}))},focus:function(){return this.isActivated=!0,this.$refs.input.focus(),this.$nextTick()},blur:function(){return this.hideOptionPanel(),this.$refs.input.blur(),this.$nextTick()}}};e.default=_},8470:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assemOption=function(t){var e=t.$el,n=t.$xeselect,r=t.$xeoptgroup,i=t.optionConfig,o=r?r.optionConfig:null;o?(i.slots=t.$slots,o.options||(o.options=[]),o.options.splice([].indexOf.call(r.$el.children,e),0,i)):n.collectOption.splice([].indexOf.call(n.$refs.hideOption.children,e),0,i)},e.createOption=function(t,e){return u(t,e)},e.destroyOption=function(t){var e=t.$xeselect,n=t.optionConfig,r=i.default.findTree(e.collectOption,(function(t){return t===n}),{children:"options"});r&&r.items.splice(r.index,1)},e.getOptionConfig=u,e.isOption=s;var r,i=(r=n(8478))&&r.__esModule?r:{default:r};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,{value:n.value,label:n.label,visible:n.visible,className:n.className,disabled:n.disabled})}var e,n;return e=t,(n=[{key:"update",value:function(t,e){this[t]=e}}])&&o(e.prototype,n),t}();function s(t){return t instanceof a}function u(t,e,n){return s(e)?e:new a(t,e,n)}},9797:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Switch=void 0;var r,i=(r=n(9856))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Switch=o;var a=o;e.default=a},9856:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(6970),i=s(n(5042)),o=s(n(7500)),a=n(1455);function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={name:"VxeSwitch",mixins:[o.default],props:{value:[String,Number,Boolean],disabled:Boolean,className:String,size:{type:String,default:function(){return i.default.switch.size||i.default.size}},openLabel:String,closeLabel:String,openValue:{type:[String,Number,Boolean],default:!0},closeValue:{type:[String,Number,Boolean],default:!1},openIcon:String,closeIcon:String},inject:{$xeform:{default:null},$xeformiteminfo:{default:null}},data:function(){return{isActivated:!1,hasAnimat:!1,offsetLeft:0}},computed:{isChecked:function(){return this.value===this.openValue},onShowLabel:function(){return(0,r.getFuncText)(this.openLabel)},offShowLabel:function(){return(0,r.getFuncText)(this.closeLabel)},styles:function(){return a.browse.msie&&this.isChecked?{left:"".concat(this.offsetLeft,"px")}:null}},created:function(){var t=this;a.browse.msie&&this.$nextTick((function(){return t.updateStyle()}))},render:function(t){var e,n=this.isChecked,r=this.vSize,i=this.className,o=this.disabled,a=this.openIcon,s=this.closeIcon;return t("div",{class:["vxe-switch",i,n?"is--on":"is--off",(e={},u(e,"size--".concat(r),r),u(e,"is--disabled",o),u(e,"is--animat",this.hasAnimat),e)]},[t("button",{ref:"btn",class:"vxe-switch--button",attrs:{type:"button",disabled:o},on:{click:this.clickEvent,focus:this.focusEvent,blur:this.blurEvent}},[t("span",{class:"vxe-switch--label vxe-switch--label-on"},[a?t("i",{class:["vxe-switch--label-icon",a]}):null,this.onShowLabel]),t("span",{class:"vxe-switch--label vxe-switch--label-off"},[s?t("i",{class:["vxe-switch--label-icon",s]}):null,this.offShowLabel]),t("span",{class:"vxe-switch--icon",style:this.styles})])])},methods:{updateStyle:function(){this.hasAnimat=!0,this.offsetLeft=this.$refs.btn.offsetWidth},clickEvent:function(t){var e=this;if(!this.disabled){clearTimeout(this.activeTimeout);var n=this.isChecked?this.closeValue:this.openValue;this.hasAnimat=!0,a.browse.msie&&this.updateStyle(),this.$emit("input",n),this.$emit("change",{value:n,$event:t}),this.$xeform&&this.$xeformiteminfo&&this.$xeform.triggerItemEvent(t,this.$xeformiteminfo.itemConfig.field,n),this.activeTimeout=setTimeout((function(){e.hasAnimat=!1}),400)}},focusEvent:function(t){this.isActivated=!0,this.$emit("focus",{value:this.value,$event:t})},blurEvent:function(t){this.isActivated=!1,this.$emit("blur",{value:this.value,$event:t})}}};e.default=c},4344:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Table=void 0;var r=a(n(6130)),i=a(n(7829)),o=a(n(5053));function a(t){return t&&t.__esModule?t:{default:t}}var s=Object.assign(r.default,{install:function(t){"undefined"!=typeof window&&window.VXETableMixin&&(r.default.mixins.push(window.VXETableMixin),delete window.VXETableMixin),o.default.Vue=t,o.default.Table=r.default,o.default.TableComponent=r.default,t.prototype.$vxe?(t.prototype.$vxe.t=o.default.t,t.prototype.$vxe._t=o.default._t):t.prototype.$vxe={t:o.default.t,_t:o.default._t},t.component(r.default.name,r.default),t.component(i.default.name,i.default)}});e.Table=s;var u=s;e.default=u},7829:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=f(n(8478)),o=f(n(5042)),a=f(n(5053)),s=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(6970)),u=n(9211),c=f(n(1455));function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var g,v="body";function m(t){return t._isResize||t.lastScrollTime&&Date.now()<t.lastScrollTime+t.delayHover}function y(t,e,n,r,o,a){var l=n.stripe,f=n.rowKey,p=n.highlightHoverRow,g=n.rowClassName,b=n.rowStyle,x=n.editConfig,w=n.showOverflow,_=n.treeConfig,E=n.treeOpts,S=n.editOpts,C=n.treeExpandeds,k=n.scrollYLoad,M=n.editStore,O=n.rowExpandeds,T=n.radioOpts,A=n.checkboxOpts,N=n.expandColumn,I=n.hasFixedColumn,P=n.fullAllDataRowIdData,D=n.rowOpts,L=[];return o.forEach((function(R,j){var B,F={},z=n.getVTRowIndex(R);B=n.getRowIndex(R),(D.isHover||p)&&(F.mouseenter=function(t){m(n)||n.triggerHoverEvent(t,{row:R,rowIndex:B})},F.mouseleave=function(){m(n)||n.clearHoverRow()});var $=(0,u.getRowid)(n,R),G=P[$],V=G?G.level:0,U=G?G.seq:-1,W={$table:n,seq:U,rowid:$,fixed:r,type:v,level:V,row:R,rowIndex:B,$rowIndex:j},H=N&&O.length&&O.indexOf(R)>-1,Y=!1,X=[],q=!1;if(x&&(q=M.insertList.indexOf(R)>-1),_&&!k&&!E.transform&&C.length&&(Y=(X=R[E.children])&&X.length&&C.indexOf(R)>-1),L.push(t("tr",{class:["vxe-body--row",_?"row--level-".concat(V):"",{"row--stripe":l&&(n.getVTRowIndex(R)+1)%2==0,"is--new":q,"is--expand-row":H,"is--expand-tree":Y,"row--new":q&&(S.showStatus||S.showInsertStatus),"row--radio":T.highlight&&n.selectRow===R,"row--checked":A.highlight&&n.isCheckedByCheckboxRow(R)},g?i.default.isFunction(g)?g(W):g:""],attrs:{rowid:$},style:b?i.default.isFunction(b)?b(W):b:null,key:f||D.useKey||_?$:j,on:F},a.map((function(e,l){return function(t,e,n,r,o,a,l,f,p,g,y,b,x,w,_){var E,S,C=n.$listeners,k=n.afterFullData,M=n.tableData,O=n.height,T=n.columnKey,A=n.overflowX,N=n.sYOpts,I=n.scrollXLoad,P=n.scrollYLoad,D=n.highlightCurrentRow,L=n.showOverflow,R=n.isAllOverflow,j=n.align,B=n.currentColumn,F=n.cellClassName,z=n.cellStyle,$=n.mergeList,G=n.spanMethod,V=n.radioOpts,U=n.checkboxOpts,W=n.expandOpts,H=n.treeOpts,Y=n.tooltipOpts,X=n.mouseConfig,q=n.editConfig,Z=n.editOpts,K=n.editRules,J=n.validOpts,Q=n.editStore,tt=n.validStore,et=n.tooltipConfig,nt=n.rowOpts,rt=n.columnOpts,it=b.type,ot=b.cellRender,at=b.editRender,st=b.align,ut=b.showOverflow,ct=b.className,lt=b.treeNode,ft=Q.actived,dt=N.rHeight,ht=nt.height,pt=Y.showAll||Y.enabled,gt=n.getColumnIndex(b),vt=n.getVTColumnIndex(b),mt=(0,s.isEnableConf)(at),yt=a?b.fixed!==a:b.fixed&&A,bt=i.default.isUndefined(ut)||i.default.isNull(ut)?L:ut,xt="ellipsis"===bt,wt="title"===bt,_t=!0===bt||"tooltip"===bt,Et=wt||_t||xt,St={},Ct=st||j,kt=tt.row===f&&tt.column===b,Mt=K&&J.showMessage&&("default"===J.message?O||M.length>1:"inline"===J.message),Ot={colid:b.id},Tt=C["cell-mouseenter"],At=C["cell-mouseleave"],Nt=at&&q&&"dblclick"===Z.trigger,It={$table:n,seq:r,rowid:o,row:f,rowIndex:p,$rowIndex:g,_rowIndex:y,column:b,columnIndex:gt,$columnIndex:x,_columnIndex:vt,fixed:a,type:v,isHidden:yt,level:l,visibleData:k,data:M,items:_};if(!I&&!P||Et||(xt=Et=!0),(wt||_t||pt||Tt||et)&&(St.mouseenter=function(t){m(n)||(wt?c.default.updateCellTitle(t.currentTarget,b):(_t||pt)&&n.triggerBodyTooltipEvent(t,It),Tt&&n.emitEvent("cell-mouseenter",Object.assign({cell:t.currentTarget},It),t))}),(_t||pt||At||et)&&(St.mouseleave=function(t){m(n)||((_t||pt)&&n.handleTargetLeaveEvent(t),At&&n.emitEvent("cell-mouseleave",Object.assign({cell:t.currentTarget},It),t))}),(U.range||X)&&(St.mousedown=function(t){n.triggerCellMousedownEvent(t,It)}),(nt.isCurrent||D||C["cell-click"]||at&&q||"row"===W.trigger||"cell"===W.trigger||"row"===V.trigger||"radio"===b.type&&"cell"===V.trigger||"row"===U.trigger||"checkbox"===b.type&&"cell"===U.trigger||"row"===H.trigger||b.treeNode&&"cell"===H.trigger)&&(St.click=function(t){n.triggerCellClickEvent(t,It)}),(Nt||C["cell-dblclick"])&&(St.dblclick=function(t){n.triggerCellDblclickEvent(t,It)}),$.length){var Pt=(0,u.mergeBodyMethod)($,y,vt);if(Pt){var Dt=Pt.rowspan,Lt=Pt.colspan;if(!Dt||!Lt)return null;Dt>1&&(Ot.rowspan=Dt),Lt>1&&(Ot.colspan=Lt)}}else if(G){var Rt=G(It)||{},jt=Rt.rowspan,Bt=void 0===jt?1:jt,Ft=Rt.colspan,zt=void 0===Ft?1:Ft;if(!Bt||!zt)return null;Bt>1&&(Ot.rowspan=Bt),zt>1&&(Ot.colspan=zt)}yt&&$&&(Ot.colspan>1||Ot.rowspan>1)&&(yt=!1),!yt&&q&&(at||ot)&&(Z.showStatus||Z.showUpdateStatus)&&(S=n.isUpdateByRow(f,b.property));var $t=[];return yt&&(L?R:L)?$t.push(t("div",{class:["vxe-cell",{"c--title":wt,"c--tooltip":_t,"c--ellipsis":xt}],style:{maxHeight:Et&&(dt||ht)?"".concat(dt||ht,"px"):""}})):($t.push.apply($t,h(function(t,e,n,r){var i=r.row,o=r.column,a=n.treeOpts,s=n.treeConfig,c=n.fullAllDataRowIdData,l=o.slots,f=o.treeNode,d=c[(0,u.getRowid)(n,i)],h=0,p=0,g=[];return d&&(h=d.level,p=d._index,g=d.items),l&&l.line?n.callSlot(l.line,r,t):s&&f&&a.line?[t("div",{class:"vxe-tree--line-wrapper"},[t("div",{class:"vxe-tree--line",style:{height:"".concat((0,u.calcTreeLine)(r,g,p),"px"),left:"".concat(h*a.indent+(h?2-(0,u.getOffsetSize)(n):0)+16,"px")}})])]:[]}(t,0,n,It)).concat([t("div",{class:["vxe-cell",{"c--title":wt,"c--tooltip":_t,"c--ellipsis":xt}],style:{maxHeight:Et&&(dt||ht)?"".concat(dt||ht,"px"):""},attrs:{title:wt?n.getCellLabel(f,b):null}},b.renderCell(t,It))])),Mt&&kt&&$t.push(t("div",{class:"vxe-cell--valid",style:tt.rule&&tt.rule.maxWidth?{width:"".concat(tt.rule.maxWidth,"px")}:null},[t("span",{class:"vxe-cell--valid-msg"},tt.content)]))),t("td",{class:["vxe-body--column",b.id,(E={},d(E,"col--".concat(Ct),Ct),d(E,"col--".concat(it),it),d(E,"col--last",x===w.length-1),d(E,"col--tree-node",lt),d(E,"col--edit",mt),d(E,"col--ellipsis",Et),d(E,"fixed--hidden",yt),d(E,"col--dirty",S),d(E,"col--actived",q&&mt&&ft.row===f&&(ft.column===b||"row"===Z.mode)),d(E,"col--valid-error",kt),d(E,"col--current",B===b),E),s.default.getClass(ct,It),s.default.getClass(F,It)],key:T||rt.useKey?b.id:x,attrs:Ot,style:Object.assign({height:Et&&(dt||ht)?"".concat(dt||ht,"px"):""},z?i.default.isFunction(z)?z(It):z:null),on:St},$t)}(t,0,n,U,$,r,V,R,B,j,z,e,l,a,o)})))),H){var Z;_&&(Z={paddingLeft:"".concat(V*E.indent+30,"px")});var K=N.showOverflow,J=i.default.isUndefined(K)||i.default.isNull(K)?w:K,Q={$table:n,seq:U,column:N,fixed:r,type:v,level:V,row:R,rowIndex:B,$rowIndex:j};L.push(t("tr",{class:"vxe-body--expanded-row",key:"expand_".concat($),style:b?i.default.isFunction(b)?b(Q):b:null,on:F},[t("td",{class:["vxe-body--expanded-column",{"fixed--hidden":r&&!I,"col--ellipsis":J}],attrs:{colspan:a.length}},[t("div",{class:"vxe-body--expanded-cell",style:Z},[N.renderData(t,Q)])])]))}Y&&L.push.apply(L,h(y(t,e,n,r,X,a)))})),L}function b(t,e,n,r,i){(r||i)&&(r&&((0,u.removeScrollListener)(r),r.scrollTop=n),i&&((0,u.removeScrollListener)(i),i.scrollTop=n),clearTimeout(g),g=setTimeout((function(){(0,u.restoreScrollListener)(r),(0,u.restoreScrollListener)(i)}),300))}var x={name:"VxeTableBody",props:{tableData:Array,tableColumn:Array,fixedColumn:Array,size:String,fixedType:String},data:function(){return{wheelTime:null,wheelYSize:0,wheelYInterval:0,wheelYTotal:0}},mounted:function(){var t=this.$parent,e=this.$el,n=this.$refs,r=this.fixedType,i=t.elemStore,o="".concat(r||"main","-body-");i["".concat(o,"wrapper")]=e,i["".concat(o,"table")]=n.table,i["".concat(o,"colgroup")]=n.colgroup,i["".concat(o,"list")]=n.tbody,i["".concat(o,"xSpace")]=n.xSpace,i["".concat(o,"ySpace")]=n.ySpace,i["".concat(o,"emptyBlock")]=n.emptyBlock,this.$el.onscroll=this.scrollEvent,this.$el._onscroll=this.scrollEvent},beforeDestroy:function(){clearTimeout(this.wheelTime),this.$el._onscroll=null,this.$el.onscroll=null},destroyed:function(){var t=this.$parent,e=this.fixedType,n=t.elemStore,r="".concat(e||"main","-body-");n["".concat(r,"wrapper")]=null,n["".concat(r,"table")]=null,n["".concat(r,"colgroup")]=null,n["".concat(r,"list")]=null,n["".concat(r,"xSpace")]=null,n["".concat(r,"ySpace")]=null,n["".concat(r,"emptyBlock")]=null},render:function(t){var e,n=this._e,r=this.$parent,i=this.fixedColumn,s=this.fixedType,u=r.$scopedSlots,c=r.tId,l=r.tableData,f=r.tableColumn,d=r.visibleColumn,h=r.showOverflow,p=r.keyboardConfig,g=r.keyboardOpts,m=r.mergeList,b=r.spanMethod,x=r.scrollXLoad,w=r.scrollYLoad,_=r.isAllOverflow,E=r.emptyOpts,S=r.mouseConfig,C=r.mouseOpts,k=r.sYOpts;if(s&&(f=x||w||(h?_:h)?m.length||b||p&&g.isMerge?d:i:d),u.empty)e=u.empty.call(this,{$table:r},t);else{var M=E.name?a.default.renderer.get(E.name):null,O=M?M.renderEmpty:null;e=O?O.call(this,t,E,{$table:r}):r.emptyText||o.default.i18n("vxe.table.emptyText")}return t("div",{class:["vxe-table--body-wrapper",s?"fixed-".concat(s,"--wrapper"):"body--wrapper"],attrs:{xid:c},on:w&&"wheel"===k.mode?{wheel:this.wheelEvent}:{}},[s?n():t("div",{class:"vxe-body--x-space",ref:"xSpace"}),t("div",{class:"vxe-body--y-space",ref:"ySpace"}),t("table",{class:"vxe-table--body",attrs:{xid:c,cellspacing:0,cellpadding:0,border:0},ref:"table"},[t("colgroup",{ref:"colgroup"},f.map((function(e,n){return t("col",{attrs:{name:e.id},key:n})}))),t("tbody",{ref:"tbody"},y(t,this,r,s,l,f))]),t("div",{class:"vxe-table--checkbox-range"}),S&&C.area?t("div",{class:"vxe-table--cell-area"},[t("span",{class:"vxe-table--cell-main-area"},C.extension?[t("span",{class:"vxe-table--cell-main-area-btn",on:{mousedown:function(t){r.triggerCellExtendMousedownEvent(t,{$table:r,fixed:s,type:v})}}})]:null),t("span",{class:"vxe-table--cell-copy-area"}),t("span",{class:"vxe-table--cell-extend-area"}),t("span",{class:"vxe-table--cell-multi-area"}),t("span",{class:"vxe-table--cell-active-area"})]):null,s?null:t("div",{class:"vxe-table--empty-block",ref:"emptyBlock"},[t("div",{class:"vxe-table--empty-content"},e)])])},methods:{scrollEvent:function(t){var e=this.$el,n=this.$parent,r=this.fixedType,i=n.$refs,o=n.elemStore,a=n.highlightHoverRow,s=n.scrollXLoad,u=n.scrollYLoad,c=n.lastScrollTop,l=n.lastScrollLeft,f=n.rowOpts,d=i.tableHeader,h=i.tableBody,p=i.leftBody,g=i.rightBody,m=i.tableFooter,y=i.validTip,x=d?d.$el:null,w=m?m.$el:null,_=h.$el,E=p?p.$el:null,S=g?g.$el:null,C=o["main-body-ySpace"],k=o["main-body-xSpace"],M=u&&C?C.clientHeight:_.clientHeight,O=s&&k?k.clientWidth:_.clientWidth,T=e.scrollTop,A=_.scrollLeft,N=A!==l,I=T!==c;n.lastScrollTop=T,n.lastScrollLeft=A,n.lastScrollTime=Date.now(),(f.isHover||a)&&n.clearHoverRow(),E&&"left"===r?b(0,0,T=E.scrollTop,_,S):S&&"right"===r?b(0,0,T=S.scrollTop,_,E):(N&&(x&&(x.scrollLeft=_.scrollLeft),w&&(w.scrollLeft=_.scrollLeft)),(E||S)&&(n.checkScrolling(),I&&b(0,0,T,E,S))),s&&N&&n.triggerScrollXEvent(t),u&&I&&n.triggerScrollYEvent(t),N&&y&&y.visible&&y.updatePlacement(),n.emitEvent("scroll",{type:v,fixed:r,scrollTop:T,scrollLeft:A,scrollHeight:_.scrollHeight,scrollWidth:_.scrollWidth,bodyHeight:M,bodyWidth:O,isX:N,isY:I},t)},handleWheel:function(t,e,n,r,i){var o=this,a=this.$parent,s=a.$refs,u=a.elemStore,c=a.scrollYLoad,l=a.scrollXLoad,f=s.tableBody,d=s.leftBody,h=s.rightBody,p=f.$el,g=d?d.$el:null,m=h?h.$el:null,y=this.isPrevWheelTop===e?Math.max(0,this.wheelYSize-this.wheelYTotal):0,b=u["main-body-ySpace"],x=u["main-body-xSpace"],w=c&&b?b.clientHeight:p.clientHeight,_=l&&x?x.clientWidth:p.clientWidth;this.isPrevWheelTop=e,this.wheelYSize=Math.abs(e?n-y:n+y),this.wheelYInterval=0,this.wheelYTotal=0,clearTimeout(this.wheelTime),function n(){var s=o.fixedType,u=o.wheelYTotal,c=o.wheelYSize,l=o.wheelYInterval;if(u<c){(u+=l=Math.max(5,Math.floor(1.5*l)))>c&&(l-=u-c);var f=p.scrollTop,d=p.clientHeight,h=p.scrollHeight,y=f+l*(e?-1:1);p.scrollTop=y,g&&(g.scrollTop=y),m&&(m.scrollTop=y),(e?y<h-d:y>=0)&&(o.wheelTime=setTimeout(n,10)),o.wheelYTotal=u,o.wheelYInterval=l,a.emitEvent("scroll",{type:v,fixed:s,scrollTop:p.scrollTop,scrollLeft:p.scrollLeft,scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,bodyHeight:w,bodyWidth:_,isX:r,isY:i},t)}}()},wheelEvent:function(t){var e=t.deltaY,n=t.deltaX,r=this.$el,i=this.$parent,o=i.$refs,a=i.highlightHoverRow,s=i.scrollYLoad,u=i.lastScrollTop,c=i.lastScrollLeft,l=i.rowOpts,f=o.tableBody.$el,d=e,h=n,p=d<0;if(!(p?r.scrollTop<=0:r.scrollTop>=r.scrollHeight-r.clientHeight)){var g=r.scrollTop+d,v=f.scrollLeft+h,m=v!==c,y=g!==u;y&&(t.preventDefault(),i.lastScrollTop=g,i.lastScrollLeft=v,i.lastScrollTime=Date.now(),(l.isHover||a)&&i.clearHoverRow(),this.handleWheel(t,p,d,m,y),s&&i.triggerScrollYEvent(t))}}}};e.default=x},584:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Cell=void 0;var i=f(n(8478)),o=f(n(5042)),a=f(n(5053)),s=f(n(1455)),u=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(6970)),c=n(9211);function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e,n){var r=e.$table,o=e.column,a=o.type,u=o.showHeaderOverflow,c=r.showHeaderOverflow,l=r.tooltipOpts,f=l.showAll||l.enabled,d=i.default.isUndefined(u)||i.default.isNull(u)?c:u,h="title"===d,p=!0===d||"tooltip"===d,g={};return(h||p||f)&&(g.mouseenter=function(t){r._isResize||(h?s.default.updateCellTitle(t.currentTarget,o):(p||f)&&r.triggerHeaderTooltipEvent(t,e))}),(p||f)&&(g.mouseleave=function(t){r._isResize||(p||f)&&r.handleTargetLeaveEvent(t)}),["html"===a&&i.default.isString(n)?t("span",{class:"vxe-cell--title",domProps:{innerHTML:n},on:g}):t("span",{class:"vxe-cell--title",on:g},n)]}function v(t,e){var n=e.$table,r=e.column,i=e._columnIndex,o=e.items,s=r.slots,c=r.editRender,l=r.cellRender,f=c||l;if(s&&s.footer)return n.callSlot(s.footer,e,t);if(f){var d=a.default.renderer.get(f.name);if(d&&d.renderFooter)return d.renderFooter.call(n,t,f,e)}return[u.default.formatText(o[i],1)]}function m(t){var e=t.$table,n=t.row,r=t.column;return u.default.formatText(e.getCellLabel(n,r),1)}var y={createColumn:function(t,e){var n=e.type,r=e.sortable,i=e.remoteSort,o=e.filters,a=e.editRender,s=e.treeNode,u=t.editConfig,l=t.editOpts,f=t.checkboxOpts,d={renderHeader:this.renderDefaultHeader,renderCell:s?this.renderTreeCell:this.renderDefaultCell,renderFooter:this.renderDefaultFooter};switch(n){case"seq":d.renderHeader=this.renderSeqHeader,d.renderCell=s?this.renderTreeIndexCell:this.renderSeqCell;break;case"radio":d.renderHeader=this.renderRadioHeader,d.renderCell=s?this.renderTreeRadioCell:this.renderRadioCell;break;case"checkbox":d.renderHeader=this.renderCheckboxHeader,d.renderCell=f.checkField?s?this.renderTreeSelectionCellByProp:this.renderCheckboxCellByProp:s?this.renderTreeSelectionCell:this.renderCheckboxCell;break;case"expand":d.renderCell=this.renderExpandCell,d.renderData=this.renderExpandData;break;case"html":d.renderCell=s?this.renderTreeHTMLCell:this.renderHTMLCell,o&&(r||i)?d.renderHeader=this.renderSortAndFilterHeader:r||i?d.renderHeader=this.renderSortHeader:o&&(d.renderHeader=this.renderFilterHeader);break;default:u&&a?(d.renderHeader=this.renderEditHeader,d.renderCell="cell"===l.mode?s?this.renderTreeCellEdit:this.renderCellEdit:s?this.renderTreeRowEdit:this.renderRowEdit):o&&(r||i)?d.renderHeader=this.renderSortAndFilterHeader:r||i?d.renderHeader=this.renderSortHeader:o&&(d.renderHeader=this.renderFilterHeader)}return(0,c.getColumnConfig)(t,e,d)},renderHeaderTitle:function(t,e){var n=e.$table,r=e.column,i=r.slots,o=r.editRender,s=r.cellRender,c=o||s;if(i&&i.header)return g(t,e,n.callSlot(i.header,e,t));if(c){var l=a.default.renderer.get(c.name);if(l&&l.renderHeader)return g(t,e,l.renderHeader.call(n,t,c,e))}return g(t,e,u.default.formatText(r.getTitle(),1))},renderDefaultHeader:function(t,e){return function(t,e){var n=e.$table,r=e.column,i=r.titlePrefix||r.titleHelp;return i?[t("i",{class:["vxe-cell-help-icon",i.icon||o.default.icon.TABLE_HELP],on:{mouseenter:function(t){n.triggerHeaderHelpEvent(t,e)},mouseleave:function(t){n.handleTargetLeaveEvent(t)}}})]:[]}(t,e).concat(y.renderHeaderTitle(t,e))},renderDefaultCell:function(t,e){var n=e.$table,r=e.row,i=e.column,o=i.slots,s=i.editRender,c=i.cellRender,l=s||c;if(o&&o.default)return n.callSlot(o.default,e,t);if(l){var f=s?"renderCell":"renderDefault",d=a.default.renderer.get(l.name);if(d&&d[f])return d[f].call(n,t,l,Object.assign({$type:s?"edit":"cell"},e))}var h=n.getCellLabel(r,i),p=s?s.placeholder:"";return[t("span",{class:"vxe-cell--label"},s&&(0,u.eqEmptyValue)(h)?[t("span",{class:"vxe-cell--placeholder"},u.default.formatText((0,u.getFuncText)(p),1))]:u.default.formatText(h,1))]},renderTreeCell:function(t,e){return y.renderTreeIcon(t,e,y.renderDefaultCell.call(this,t,e))},renderDefaultFooter:function(t,e){return[t("span",{class:"vxe-cell--item"},v(t,e))]},renderTreeIcon:function(t,e,n){var r=e.$table,i=e.isHidden,a=r.treeOpts,s=r.treeExpandeds,u=r.treeLazyLoadeds,c=e.row,l=e.column,f=e.level,d=l.slots,h=a.children,p=a.hasChild,g=a.indent,v=a.lazy,m=a.trigger,y=a.iconLoaded,b=a.showIcon,x=a.iconOpen,w=a.iconClose,_=c[h],E=!1,S=!1,C=!1,k={};return d&&d.icon?r.callSlot(d.icon,e,t,n):(i||(S=s.indexOf(c)>-1,v&&(C=u.indexOf(c)>-1,E=c[p])),m&&"default"!==m||(k.click=function(t){return r.triggerTreeExpandEvent(t,e)}),[t("div",{class:["vxe-cell--tree-node",{"is--active":S}],style:{paddingLeft:"".concat(f*g,"px")}},[b&&(_&&_.length||E)?[t("div",{class:"vxe-tree--btn-wrapper",on:k},[t("i",{class:["vxe-tree--node-btn",C?y||o.default.icon.TABLE_TREE_LOADED:S?x||o.default.icon.TABLE_TREE_OPEN:w||o.default.icon.TABLE_TREE_CLOSE]})])]:null,t("div",{class:"vxe-tree-cell"},n)])])},renderSeqHeader:function(t,e){var n=e.$table,r=e.column,i=r.slots;return g(t,e,i&&i.header?n.callSlot(i.header,e,t):u.default.formatText(r.getTitle(),1))},renderSeqCell:function(t,e){var n=e.$table,r=e.column,i=n.treeConfig,o=n.seqOpts,a=r.slots;if(a&&a.default)return n.callSlot(a.default,e,t);var s=e.seq,c=o.seqMethod;return[u.default.formatText(c?c(e):i?s:(o.startIndex||0)+s,1)]},renderTreeIndexCell:function(t,e){return y.renderTreeIcon(t,e,y.renderSeqCell(t,e))},renderRadioHeader:function(t,e){var n=e.$table,r=e.column,i=r.slots,o=i?i.header:null,a=i?i.title:null;return g(t,e,o?n.callSlot(o,e,t):[t("span",{class:"vxe-radio--label"},a?n.callSlot(a,e,t):u.default.formatText(r.getTitle(),1))])},renderRadioCell:function(t,e){var n,r=e.$table,o=e.column,a=e.isHidden,s=r.radioOpts,u=r.selectRow,c=o.slots,l=s.labelField,f=s.checkMethod,d=s.visibleMethod,p=e.row,g=c?c.default:null,v=c?c.radio:null,m=p===u,y=!d||d({row:p}),b=!!f;a||(n={click:function(t){!b&&y&&r.triggerRadioRowEvent(t,e)}},f&&(b=!f({row:p})));var x=h(h({},e),{},{checked:m,disabled:b,visible:y});if(v)return r.callSlot(v,x,t);var w=[];return y&&w.push(t("span",{class:"vxe-radio--icon vxe-radio--checked-icon"}),t("span",{class:"vxe-radio--icon vxe-radio--unchecked-icon"})),(g||l)&&w.push(t("span",{class:"vxe-radio--label"},g?r.callSlot(g,x,t):i.default.get(p,l))),[t("span",{class:["vxe-cell--radio",{"is--checked":m,"is--disabled":b}],on:n},w)]},renderTreeRadioCell:function(t,e){return y.renderTreeIcon(t,e,y.renderRadioCell(t,e))},renderCheckboxHeader:function(t,e){var n,r=e.$table,i=e.column,a=e.isHidden,s=r.isAllSelected,u=r.isIndeterminate,c=r.isAllCheckboxDisabled,l=i.slots,f=l?l.header:null,d=l?l.title:null,p=r.checkboxOpts,v=i.getTitle();a||(n={click:function(t){c||r.triggerCheckAllEvent(t,!s)}});var m=h(h({},e),{},{checked:s,disabled:c,indeterminate:u});return f?g(t,m,r.callSlot(f,m,t)):(p.checkStrictly?p.showHeader:!1!==p.showHeader)?g(t,m,[t("span",{class:["vxe-cell--checkbox",{"is--checked":s,"is--disabled":c,"is--indeterminate":u}],attrs:{title:o.default.i18n("vxe.table.allTitle")},on:n},[t("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"})].concat(d||v?[t("span",{class:"vxe-checkbox--label"},d?r.callSlot(d,m,t):v)]:[]))]):g(t,m,[t("span",{class:"vxe-checkbox--label"},d?r.callSlot(d,m,t):v)])},renderCheckboxCell:function(t,e){var n,r=e.$table,o=e.row,a=e.column,s=e.isHidden,u=r.treeConfig,c=r.treeIndeterminates,l=r.checkboxOpts,f=l.labelField,d=l.checkMethod,p=l.visibleMethod,g=a.slots,v=g?g.default:null,m=g?g.checkbox:null,y=!1,b=!1,x=!p||p({row:o}),w=!!d;s||(b=r.selection.indexOf(o)>-1,n={click:function(t){!w&&x&&r.triggerCheckRowEvent(t,e,!b)}},d&&(w=!d({row:o})),u&&(y=c.indexOf(o)>-1));var _=h(h({},e),{},{checked:b,disabled:w,visible:x,indeterminate:y});if(m)return r.callSlot(m,_,t);var E=[];return x&&E.push(t("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"})),(v||f)&&E.push(t("span",{class:"vxe-checkbox--label"},v?r.callSlot(v,_,t):i.default.get(o,f))),[t("span",{class:["vxe-cell--checkbox",{"is--checked":b,"is--disabled":w,"is--indeterminate":y}],on:n},E)]},renderTreeSelectionCell:function(t,e){return y.renderTreeIcon(t,e,y.renderCheckboxCell(t,e))},renderCheckboxCellByProp:function(t,e){var n,r=e.$table,o=e.row,a=e.column,s=e.isHidden,u=r.treeConfig,c=r.treeIndeterminates,l=r.checkboxOpts,f=l.labelField,d=l.checkField,p=l.halfField,g=l.checkMethod,v=l.visibleMethod,m=a.slots,y=m?m.default:null,b=m?m.checkbox:null,x=!1,w=!1,_=!v||v({row:o}),E=!!g;s||(w=i.default.get(o,d),n={click:function(t){!E&&_&&r.triggerCheckRowEvent(t,e,!w)}},g&&(E=!g({row:o})),u&&(x=c.indexOf(o)>-1));var S=h(h({},e),{},{checked:w,disabled:E,visible:_,indeterminate:x});if(b)return r.callSlot(b,S,t);var C=[];return _&&C.push(t("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"})),(y||f)&&C.push(t("span",{class:"vxe-checkbox--label"},y?r.callSlot(y,S,t):i.default.get(o,f))),[t("span",{class:["vxe-cell--checkbox",{"is--checked":w,"is--disabled":E,"is--indeterminate":p&&!w?o[p]:x}],on:n},C)]},renderTreeSelectionCellByProp:function(t,e){return y.renderTreeIcon(t,e,y.renderCheckboxCellByProp(t,e))},renderExpandCell:function(t,e){var n=e.$table,r=e.isHidden,a=e.row,s=e.column,u=n.expandOpts,c=n.rowExpandeds,l=n.expandLazyLoadeds,f=u.lazy,d=u.labelField,h=u.iconLoaded,p=u.showIcon,g=u.iconOpen,v=u.iconClose,m=u.visibleMethod,y=s.slots,b=y?y.default:null,x=!1,w=!1;return y&&y.icon?n.callSlot(y.icon,e,t):(r||(x=c.indexOf(e.row)>-1,f&&(w=l.indexOf(a)>-1)),[!p||m&&!m(e)?null:t("span",{class:["vxe-table--expanded",{"is--active":x}],on:{click:function(t){n.triggerRowExpandEvent(t,e)}}},[t("i",{class:["vxe-table--expand-btn",w?h||o.default.icon.TABLE_EXPAND_LOADED:x?g||o.default.icon.TABLE_EXPAND_OPEN:v||o.default.icon.TABLE_EXPAND_CLOSE]})]),b||d?t("span",{class:"vxe-table--expand-label"},b?n.callSlot(b,e,t):i.default.get(a,d)):null])},renderExpandData:function(t,e){var n=e.$table,r=e.column,i=r.slots,o=r.contentRender;if(i&&i.content)return n.callSlot(i.content,e,t);if(o){var s=a.default.renderer.get(o.name);if(s&&s.renderExpand)return s.renderExpand.call(n,t,o,e)}return[]},renderHTMLCell:function(t,e){var n=e.$table,r=e.column.slots;return r&&r.default?n.callSlot(r.default,e,t):[t("span",{class:"vxe-cell--html",domProps:{innerHTML:m(e)}})]},renderTreeHTMLCell:function(t,e){return y.renderTreeIcon(t,e,y.renderHTMLCell(t,e))},renderSortAndFilterHeader:function(t,e){return y.renderDefaultHeader(t,e).concat(y.renderSortIcon(t,e)).concat(y.renderFilterIcon(t,e))},renderSortHeader:function(t,e){return y.renderDefaultHeader(t,e).concat(y.renderSortIcon(t,e))},renderSortIcon:function(t,e){var n=e.$table,r=e.column,i=n.sortOpts,a=i.showIcon,s=i.iconAsc,u=i.iconDesc;return a?[t("span",{class:"vxe-cell--sort"},[t("i",{class:["vxe-sort--asc-btn",s||o.default.icon.TABLE_SORT_ASC,{"sort--active":"asc"===r.order}],attrs:{title:o.default.i18n("vxe.table.sortAsc")},on:{click:function(t){n.triggerSortEvent(t,r,"asc")}}}),t("i",{class:["vxe-sort--desc-btn",u||o.default.icon.TABLE_SORT_DESC,{"sort--active":"desc"===r.order}],attrs:{title:o.default.i18n("vxe.table.sortDesc")},on:{click:function(t){n.triggerSortEvent(t,r,"desc")}}})])]:[]},renderFilterHeader:function(t,e){return y.renderDefaultHeader(t,e).concat(y.renderFilterIcon(t,e))},renderFilterIcon:function(t,e){var n=e.$table,r=e.column,i=e.hasFilter,a=n.filterStore,s=n.filterOpts,u=s.showIcon,c=s.iconNone,l=s.iconMatch;return u?[t("span",{class:["vxe-cell--filter",{"is--active":a.visible&&a.column===r}]},[t("i",{class:["vxe-filter--btn",i?l||o.default.icon.TABLE_FILTER_MATCH:c||o.default.icon.TABLE_FILTER_NONE],attrs:{title:o.default.i18n("vxe.table.filter")},on:{click:function(t){n.triggerFilterEvent(t,e.column,e)}}})])]:[]},renderEditHeader:function(t,e){var n=e.$table,r=e.column,a=n.editConfig,s=n.editRules,c=n.editOpts,l=r.sortable,f=r.remoteSort,d=r.filters,h=r.editRender,p=!1;if(s){var g=i.default.get(s,e.column.property);g&&(p=g.some((function(t){return t.required})))}return((0,u.isEnableConf)(a)?[p&&c.showAsterisk?t("i",{class:"vxe-cell--required-icon"}):null,(0,u.isEnableConf)(h)&&c.showIcon?t("i",{class:["vxe-cell--edit-icon",c.icon||o.default.icon.TABLE_EDIT]}):null]:[]).concat(y.renderDefaultHeader(t,e)).concat(l||f?y.renderSortIcon(t,e):[]).concat(d?y.renderFilterIcon(t,e):[])},renderRowEdit:function(t,e){var n=e.$table,r=e.column.editRender,i=n.editStore.actived;return y.runRenderer(t,e,this,(0,u.isEnableConf)(r)&&i&&i.row===e.row)},renderTreeRowEdit:function(t,e){return y.renderTreeIcon(t,e,y.renderRowEdit(t,e))},renderCellEdit:function(t,e){var n=e.$table,r=e.column.editRender,i=n.editStore.actived;return y.runRenderer(t,e,this,(0,u.isEnableConf)(r)&&i&&i.row===e.row&&i.column===e.column)},renderTreeCellEdit:function(t,e){return y.renderTreeIcon(t,e,y.renderCellEdit(t,e))},runRenderer:function(t,e,n,r){var i=e.$table,o=e.column,s=o.slots,u=o.editRender,c=o.formatter,l=a.default.renderer.get(u.name);return r?s&&s.edit?i.callSlot(s.edit,e,t):l&&l.renderEdit?l.renderEdit.call(i,t,u,Object.assign({$type:"edit"},e)):[]:s&&s.default?i.callSlot(s.default,e,t):c?[t("span",{class:"vxe-cell--label"},[m(e)])]:y.renderDefaultCell.call(n,t,e)}};e.Cell=y;var b=y;e.default=b},5619:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(584)),i=o(n(6970));function o(t){return t&&t.__esModule?t:{default:t}}var a={colId:[String,Number],type:String,field:String,title:String,width:[Number,String],minWidth:[Number,String],resizable:{type:Boolean,default:null},fixed:String,align:String,headerAlign:String,footerAlign:String,showOverflow:{type:[Boolean,String],default:null},showHeaderOverflow:{type:[Boolean,String],default:null},showFooterOverflow:{type:[Boolean,String],default:null},className:[String,Function],headerClassName:[String,Function],footerClassName:[String,Function],formatter:[Function,Array,String],sortable:Boolean,remoteSort:{type:Boolean,default:null},sortBy:[String,Function],sortType:String,sortMethod:Function,filters:{type:Array,default:null},filterMultiple:{type:Boolean,default:!0},filterMethod:Function,filterResetMethod:Function,filterRecoverMethod:Function,filterRender:Object,treeNode:Boolean,visible:{type:Boolean,default:null},exportMethod:Function,footerExportMethod:Function,titleHelp:Object,titlePrefix:Object,cellType:String,cellRender:Object,editRender:Object,contentRender:Object,params:Object},s={};Object.keys(a).forEach((function(t){s[t]=function(e){this.columnConfig.update(t,e)}}));var u={name:"VxeColumn",props:a,provide:function(){return{$xecolumn:this,$xegrid:null}},inject:{$xetable:{default:null},$xecolumn:{default:null}},watch:s,created:function(){this.columnConfig=this.createColumn(this.$xetable,this)},mounted:function(){i.default.assemColumn(this)},destroyed:function(){i.default.destroyColumn(this)},render:function(t){return t("div",this.$slots.default)},methods:r.default};e.default=u},2159:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnInfo=void 0;var r=s(n(8478)),i=s(n(5042)),o=(n(733),n(9211)),a=n(6970);function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(5981);var c=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.renderHeader,s=i.renderCell,u=i.renderFooter,c=i.renderData;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var l=e.$xegrid,f=l?l.proxyOpts:null,d=n.formatter,h=!r.default.isBoolean(n.visible)||n.visible;Object.assign(this,{type:n.type,property:n.field,field:n.field,title:n.title,width:n.width,minWidth:n.minWidth,resizable:n.resizable,fixed:n.fixed,align:n.align,headerAlign:n.headerAlign,footerAlign:n.footerAlign,showOverflow:n.showOverflow,showHeaderOverflow:n.showHeaderOverflow,showFooterOverflow:n.showFooterOverflow,className:n.className,headerClassName:n.headerClassName,footerClassName:n.footerClassName,formatter:d,sortable:n.sortable,sortBy:n.sortBy,sortType:n.sortType,sortMethod:n.sortMethod,remoteSort:n.remoteSort,filters:(0,o.toFilters)(n.filters),filterMultiple:!r.default.isBoolean(n.filterMultiple)||n.filterMultiple,filterMethod:n.filterMethod,filterResetMethod:n.filterResetMethod,filterRecoverMethod:n.filterRecoverMethod,filterRender:n.filterRender,treeNode:n.treeNode,cellType:n.cellType,cellRender:n.cellRender,editRender:n.editRender,contentRender:n.contentRender,exportMethod:n.exportMethod,footerExportMethod:n.footerExportMethod,titleHelp:n.titleHelp,titlePrefix:n.titlePrefix,params:n.params,id:n.colId||r.default.uniqueId("col_"),parentId:null,visible:h,halfVisible:!1,defaultVisible:h,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,renderWidth:0,renderHeight:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:a||n.renderHeader,renderCell:s||n.renderCell,renderFooter:u||n.renderFooter,renderData:c,slots:n.slots}),f&&f.beforeColumn&&f.beforeColumn({$grid:l,column:this})}var e,n;return e=t,(n=[{key:"getTitle",value:function(){return(0,a.getFuncText)(this.title||("seq"===this.type?i.default.i18n("vxe.table.seqTitle"):""))}},{key:"getKey",value:function(){return this.property||(this.type?"type=".concat(this.type):null)}},{key:"update",value:function(t,e){"filters"!==t&&("field"===t&&(this.property=e),this[t]=e)}}])&&u(e.prototype,n),t}();e.ColumnInfo=c},6913:function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"VxeColgroup",extends:((r=n(5619))&&r.__esModule?r:{default:r}).default,provide:function(){return{xecolgroup:this,$xegrid:null}}};e.default=i},4610:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=g(n(8478)),o=g(n(5042)),a=g(n(584)),s=g(n(5053)),u=n(9211),c=p(n(6970)),l=p(n(1455)),f=n(733),d=n(5981);function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(h=function(t){return t?n:e})(t)}function p(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=h(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}function g(t){return t&&t.__esModule?t:{default:t}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=c.default.setCellValue,w=c.default.hasChildrenList,_=c.default.getColumnList,E=l.default.calcHeight,S=l.default.hasClass,C=l.default.addClass,k=l.default.removeClass,M=l.default.getEventTargetNode,O=l.default.isNodeElement,T=l.browse["-webkit"]&&!l.browse.edge,A=l.browse.msie?80:20,N="VXE_TABLE_CUSTOM_COLUMN_WIDTH",I="VXE_TABLE_CUSTOM_COLUMN_VISIBLE";function P(){return i.default.uniqueId("row_")}function D(t,e,n){var r=i.default.get(t,n),o=i.default.get(e,n);return!(!(0,c.eqEmptyValue)(r)||!(0,c.eqEmptyValue)(o))||(i.default.isString(r)||i.default.isNumber(r)?""+r==""+o:i.default.isEqual(r,o))}function L(t,e){var n=t.sortOpts.orders,r=e.order||null,i=n.indexOf(r)+1;return n[i<n.length?i:0]}function R(t){var e=o.default.version,n=i.default.toStringJSON(localStorage.getItem(t));return n&&n._v===e?n:{_v:e}}function j(t,e){var n=t.fullAllDataRowMap;return e.filter((function(t){return n.has(t)}))}function B(t,e){var n=t.fullDataRowIdData,r=[];return i.default.each(e,(function(t,e){n[e]&&-1===r.indexOf(n[e].row)&&r.push(n[e].row)})),r}function F(t){var e=t.$refs,n=t.visibleColumn,r=e.tableBody,i=r?r.$el:null;if(i){for(var o=i.scrollLeft,a=o+i.clientWidth,s=-1,u=0,c=0,l=0,f=n.length;l<f&&(u+=n[l].renderWidth,-1===s&&o<u&&(s=l),!(s>=0&&(c++,u>a)));l++);return{toVisibleIndex:Math.max(0,s),visibleSize:Math.max(8,c)}}return{toVisibleIndex:0,visibleSize:8}}function z(t,e,n){for(var r=0,i=t.length;r<i;r++){var o=t[r],a=e.startIndex,s=e.endIndex,u=o[n],c=u+o[n+"span"];u<a&&a<c&&(e.startIndex=u),u<s&&s<c&&(e.endIndex=c),e.startIndex===a&&e.endIndex===s||(r=-1)}}function $(t,e,n,r){if(e){var o=t.treeConfig,a=t.visibleColumn;if(o)throw new Error(c.default.getLog("vxe.error.noTree",["merge-footer-items"]));i.default.isArray(e)||(e=[e]),e.forEach((function(t){var e=t.row,o=t.col,s=t.rowspan,u=t.colspan;if(r&&i.default.isNumber(e)&&(e=r[e]),i.default.isNumber(o)&&(o=a[o]),(r?e:i.default.isNumber(e))&&o&&(s||u)&&(s=i.default.toNumber(s)||1,u=i.default.toNumber(u)||1,s>1||u>1)){var c=i.default.findIndexOf(n,(function(t){return t._row===e&&t._col===o})),l=n[c];if(l)l.rowspan=s,l.colspan=u,l._rowspan=s,l._colspan=u;else{var f=r?r.indexOf(e):e,d=a.indexOf(o);n.push({row:f,col:d,rowspan:s,colspan:u,_row:e,_col:o,_rowspan:s,_colspan:u})}}}))}}function G(t,e,n,r){var o=[];if(e){var a=t.treeConfig,s=t.visibleColumn;if(a)throw new Error(c.default.getLog("vxe.error.noTree",["merge-cells"]));i.default.isArray(e)||(e=[e]),e.forEach((function(t){var e=t.row,a=t.col;r&&i.default.isNumber(e)&&(e=r[e]),i.default.isNumber(a)&&(a=s[a]);var u=i.default.findIndexOf(n,(function(t){return t._row===e&&t._col===a}));if(u>-1){var c=n.splice(u,1);o.push(c[0])}}))}return o}function V(t){t.tableFullColumn.forEach((function(t){t.order=null}))}function U(t,e){var n=e.sortBy,r=e.sortType;return function(o){var a;return a=n?i.default.isFunction(n)?n({row:o,column:e}):i.default.get(o,n):t.getCellLabel(o,e),r&&"auto"!==r?"number"===r?i.default.toNumber(a):"string"===r?i.default.toValueString(a):a:isNaN(a)?a:i.default.toNumber(a)}}var W={callSlot:function(t,e,n,r){if(t){var o=this.$xegrid;if(o)return o.callSlot(t,e,n,r);if(i.default.isFunction(t))return t.call(this,e,n,r)}return[]},getParentElem:function(){var t=this.$el,e=this.$xegrid;return e?e.$el.parentNode:t.parentNode},getParentHeight:function(){var t=this.$el,e=this.$xegrid,n=this.height,r=t.parentNode,o="auto"===n?(0,l.getPaddingTopBottomSize)(r):0;return Math.floor(e?e.getParentHeight():i.default.toNumber(getComputedStyle(r).height)-o)},getExcludeHeight:function(){var t=this.$xegrid;return t?t.getExcludeHeight():0},clearAll:function(){return(0,u.clearTableAllStatus)(this)},syncData:function(){var t=this;return this.$nextTick().then((function(){return t.tableData=[],t.$nextTick().then((function(){return t.loadTableData(t.tableFullData)}))}))},updateData:function(){var t=this,e=this.scrollXLoad,n=this.scrollYLoad;return this.handleTableData(!0).then((function(){if(t.updateFooter(),t.checkSelectionStatus(),e||n)return e&&t.updateScrollXSpace(),n&&t.updateScrollYSpace(),t.refreshScroll()})).then((function(){return t.updateCellAreas(),t.recalculate(!0)})).then((function(){setTimeout((function(){return t.recalculate()}),50)}))},handleTableData:function(t){var e=this,n=this.scrollYLoad,r=this.scrollYStore,i=this.fullDataRowIdData,o=this.afterFullData;t&&(this.updateAfterFullData(),o=this.handleVirtualTreeToList());var a=n?o.slice(r.startIndex,r.endIndex):o.slice(0);return a.forEach((function(t,n){var r=(0,u.getRowid)(e,t),o=i[r];o&&(o.$index=n)})),this.tableData=a,this.$nextTick()},updateScrollYStatus:function(t){var e=this.treeConfig,n=this.treeOpts,r=this.sYOpts,i=(n.transform||!e)&&!!r.enabled&&r.gt>-1&&r.gt<t.length;return this.scrollYLoad=i,i},loadTableData:function(t){var e=this,n=this.keepSource,r=this.treeConfig,o=this.treeOpts,a=this.editStore,s=this.scrollYStore,c=this.scrollXStore,l=this.lastScrollLeft,f=this.lastScrollTop,d=this.scrollYLoad,h=[],p=t?t.slice(0):[];r&&(o.transform?p=(h=i.default.toArrayTree(p,{key:o.rowField,parentKey:o.parentField,children:o.children,mapChildren:o.mapChildren})).slice(0):h=p.slice(0)),s.startIndex=0,s.endIndex=1,c.startIndex=0,c.endIndex=1,a.insertList=[],a.removeList=[];var g=this.updateScrollYStatus(p);return this.scrollYLoad=g,this.tableFullData=p,this.tableFullTreeData=h,this.cacheRowMap(!0),this.tableSynchData=t,n&&(this.tableSourceData=i.default.clone(p,!0)),this.clearCellAreas&&this.mouseConfig&&(this.clearCellAreas(),this.clearCopyCellArea()),this.clearMergeCells(),this.clearMergeFooterItems(),this.handleTableData(!0),this.updateFooter(),this.$nextTick().then((function(){e.updateHeight(),e.updateStyle()})).then((function(){e.computeScrollLoad()})).then((function(){return g&&(s.endIndex=s.visibleSize),e.handleReserveStatus(),e.checkSelectionStatus(),new Promise((function(t){e.$nextTick().then((function(){return e.recalculate()})).then((function(){d===g?(0,u.restoreScrollLocation)(e,l,f).then(t):setTimeout((function(){return(0,u.restoreScrollLocation)(e,l,f).then(t)}))}))}))}))},loadData:function(t){var e=this,n=this.inited,r=this.initStatus;return this.loadTableData(t).then((function(){return e.inited=!0,e.initStatus=!0,r||e.handleLoadDefaults(),n||e.handleInitDefaults(),e.recalculate()}))},reloadData:function(t){var e=this,n=this.inited;return this.clearAll().then((function(){return e.inited=!0,e.initStatus=!0,e.loadTableData(t)})).then((function(){return e.handleLoadDefaults(),n||e.handleInitDefaults(),e.recalculate()}))},reloadRow:function(t,e,n){var r=this.keepSource,o=this.tableSourceData,a=this.tableData;if(r){var s=o[this.getRowIndex(t)];if(s&&t)if(n){var u=i.default.get(e||t,n);i.default.set(t,n,u),i.default.set(s,n,u)}else{var c=i.default.clone(y({},e),!0);i.default.destructuring(s,Object.assign(t,c))}this.tableData=a.slice(0)}return this.$nextTick()},loadColumn:function(t){var e=this,n=i.default.mapTree(t,(function(t){return a.default.createColumn(e,t)}),{children:"children"});return this.handleColumn(n)},reloadColumn:function(t){var e=this;return this.clearAll().then((function(){return e.loadColumn(t)}))},handleColumn:function(t){var e=this;this.collectColumn=t;var n=_(t);return this.tableFullColumn=n,this.cacheColumnMap(),this.restoreCustomStorage(),this.parseColumns().then((function(){e.scrollXLoad&&e.loadScrollXData(!0)})),this.clearMergeCells(),this.clearMergeFooterItems(),this.handleTableData(!0),this.$nextTick().then((function(){return e.$toolbar&&e.$toolbar.syncUpdate({collectColumn:t,$table:e}),e.recalculate()}))},cacheRowMap:function(t){var e=this,n=this.treeConfig,r=this.treeOpts,o=this.tableFullData,a=this.fullDataRowMap,s=this.fullAllDataRowMap,l=this.tableFullTreeData,f=this.fullDataRowIdData,d=this.fullAllDataRowIdData,h=(0,u.getRowkey)(this),p=n&&r.lazy,g=function(o,l,g,v,m,y){var b=(0,u.getRowid)(e,o),x=n&&v?(0,u.toTreePathSeq)(v):l+1,w=y?y.length-1:0;(0,c.eqEmptyValue)(b)&&(b=P(),i.default.set(o,h,b)),p&&o[r.hasChild]&&i.default.isUndefined(o[r.children])&&(o[r.children]=null);var _={row:o,rowid:b,seq:x,index:n&&m?-1:l,_index:-1,$index:-1,items:g,parent:m,level:w};t&&(f[b]=_,a.set(o,_)),d[b]=_,s.set(o,_)};t&&(f=this.fullDataRowIdData={},a.clear()),d=this.fullAllDataRowIdData={},s.clear(),n?i.default.eachTree(l,g,r):o.forEach(g)},loadTreeChildren:function(t,e){var n=this,r=this.keepSource,o=this.tableSourceData,a=this.treeOpts,s=this.fullDataRowIdData,c=this.fullDataRowMap,l=this.fullAllDataRowMap,f=this.fullAllDataRowIdData,d=a.transform,h=a.children,p=a.mapChildren,g=f[(0,u.getRowid)(this,t)],v=g?g.level:0;return this.createData(e).then((function(e){if(r){var g=(0,u.getRowid)(n,t),m=i.default.findTree(o,(function(t){return g===(0,u.getRowid)(n,t)}),a);m&&(m.item[h]=i.default.clone(e,!0))}return i.default.eachTree(e,(function(t,e,r,i,o,a){var d=(0,u.getRowid)(n,t),h={row:t,rowid:d,seq:-1,index:e,_index:-1,$index:-1,items:r,parent:o,level:v+a.length};s[d]=h,c.set(t,h),f[d]=h,l.set(t,h)}),a),t[h]=e,d&&(t[p]=e),n.updateAfterDataIndex(),e}))},cacheColumnMap:function(){var t,e,n,r=this.tableFullColumn,o=this.collectColumn,a=this.fullColumnMap,s=this.showOverflow,u=this.fullColumnIdData={},c=this.fullColumnFieldData={},l=o.some(w),f=!!s,h=function(r,i,o,s,l){var h=r.id,p=r.property,g=r.fixed,v=r.type,m=r.treeNode,y={column:r,colid:h,index:i,items:o,parent:l};p&&(c[p]=y),!n&&g&&(n=g),m?e||(e=r):"expand"===v&&(t||(t=r)),f&&!1===r.showOverflow&&(f=!1),u[h]&&(0,d.errLog)("vxe.error.colRepet",["colId",h]),u[h]=y,a.set(r,y)};a.clear(),l?i.default.eachTree(o,(function(t,e,n,r,i,o){t.level=o.length,h(t,e,n,0,i)})):r.forEach(h),this.isGroup=l,this.treeNodeColumn=e,this.expandColumn=t,this.isAllOverflow=f},getRowNode:function(t){if(t){var e=this.fullAllDataRowIdData[t.getAttribute("rowid")];if(e)return{rowid:e.rowid,item:e.row,index:e.index,items:e.items,parent:e.parent}}return null},getColumnNode:function(t){if(t){var e=this.fullColumnIdData[t.getAttribute("colid")];if(e)return{colid:e.colid,item:e.column,index:e.index,items:e.items,parent:e.parent}}return null},getRowSeq:function(t){var e=this.fullDataRowIdData;if(t){var n=e[(0,u.getRowid)(this,t)];if(n)return n.seq}return-1},getRowIndex:function(t){return this.fullDataRowMap.has(t)?this.fullDataRowMap.get(t).index:-1},getVTRowIndex:function(t){return this.afterFullData.indexOf(t)},_getRowIndex:function(t){return this.getVTRowIndex(t)},getVMRowIndex:function(t){return this.tableData.indexOf(t)},$getRowIndex:function(t){return this.getVMRowIndex(t)},getColumnIndex:function(t){return this.fullColumnMap.has(t)?this.fullColumnMap.get(t).index:-1},getVTColumnIndex:function(t){return this.visibleColumn.indexOf(t)},_getColumnIndex:function(t){return this.getVTColumnIndex(t)},getVMColumnIndex:function(t){return this.tableColumn.indexOf(t)},$getColumnIndex:function(t){return this.getVMColumnIndex(t)},isSeqColumn:function(t){return t&&"seq"===t.type},defineField:function(t){var e=this.radioOpts,n=this.checkboxOpts,r=this.treeConfig,o=this.treeOpts,a=this.expandOpts,s=(0,u.getRowkey)(this);return this.tableFullColumn.forEach((function(e){var n=e.property,r=e.editRender;if(n&&!i.default.has(t,n)){var o=null;if(r){var a=r.defaultValue;i.default.isFunction(a)?o=a({column:e}):i.default.isUndefined(a)||(o=a)}i.default.set(t,n,o)}})),[e.labelField,n.checkField,n.labelField,a.labelField].forEach((function(e){e&&(0,c.eqEmptyValue)(i.default.get(t,e))&&i.default.set(t,e,null)})),r&&o.lazy&&i.default.isUndefined(t[o.children])&&(t[o.children]=null),(0,c.eqEmptyValue)(i.default.get(t,s))&&i.default.set(t,s,P()),t},createData:function(t){var e=this,n=this.treeConfig,r=this.treeOpts,o=function(t){return e.defineField(Object.assign({},t))},a=n?i.default.mapTree(t,o,r):t.map(o);return this.$nextTick().then((function(){return a}))},createRow:function(t){var e=this,n=i.default.isArray(t);return n||(t=[t]),this.$nextTick().then((function(){return e.createData(t).then((function(t){return n?t:t[0]}))}))},revertData:function(t,e){var n=this,r=this.keepSource,o=this.tableSourceData,a=this.treeConfig;if(!r)return this.$nextTick();var s=t;return t?i.default.isArray(t)||(s=[t]):s=i.default.toArray(this.getUpdateRecords()),s.length&&s.forEach((function(t){if(!n.isInsertByRow(t)){var r=n.getRowIndex(t);if(a&&-1===r)throw new Error(c.default.getLog("vxe.error.noTree",["revertData"]));var s=o[r];s&&t&&(e?i.default.set(t,e,i.default.clone(i.default.get(s,e),!0)):i.default.destructuring(t,i.default.clone(s,!0)))}})),t?this.$nextTick():this.reloadData(o)},clearData:function(t,e){var n=this.tableFullData,r=this.visibleColumn;return arguments.length?t&&!i.default.isArray(t)&&(t=[t]):t=n,e?t.forEach((function(t){return i.default.set(t,e,null)})):t.forEach((function(t){r.forEach((function(e){e.property&&x(t,e,null)}))})),this.$nextTick()},isInsertByRow:function(t){return this.editStore.insertList.indexOf(t)>-1},removeInsertRow:function(){return this.remove(this.editStore.insertList)},isUpdateByRow:function(t,e){var n=this,r=this.visibleColumn,o=this.keepSource,a=this.treeConfig,s=this.treeOpts,c=this.tableSourceData,l=this.fullDataRowIdData;if(o){var f,d,h=(0,u.getRowid)(this,t);if(!l[h])return!1;if(a){var p=s.children,g=i.default.findTree(c,(function(t){return h===(0,u.getRowid)(n,t)}),s);t=Object.assign({},t,b({},p,null)),g&&(f=Object.assign({},g.item,b({},p,null)))}else f=c[l[h].index];if(f){if(arguments.length>1)return!D(f,t,e);for(var v=0,m=r.length;v<m;v++)if((d=r[v].property)&&!D(f,t,d))return!0}}return!1},getColumns:function(t){var e=this.visibleColumn;return i.default.isUndefined(t)?e.slice(0):e[t]},getColumnById:function(t){var e=this.fullColumnIdData;return e[t]?e[t].column:null},getColumnByField:function(t){var e=this.fullColumnFieldData;return e[t]?e[t].column:null},getTableColumn:function(){return{collectColumn:this.collectColumn.slice(0),fullColumn:this.tableFullColumn.slice(0),visibleColumn:this.visibleColumn.slice(0),tableColumn:this.tableColumn.slice(0)}},getData:function(t){var e=this.data||this.tableSynchData;return i.default.isUndefined(t)?e.slice(0):e[t]},getCheckboxRecords:function(t){var e=this.tableFullData,n=this.afterFullData,r=this.treeConfig,o=this.treeOpts,a=this.checkboxOpts,s=this.tableFullTreeData,u=this.afterTreeFullData,c=o.transform,l=o.children,f=o.mapChildren,d=a.checkField,h=t?c?s:e:c?u:n,p=[];if(d)p=r?i.default.filterTree(h,(function(t){return i.default.get(t,d)}),{children:c?f:l}):h.filter((function(t){return i.default.get(t,d)}));else{var g=this.selection;p=r?i.default.filterTree(h,(function(t){return g.indexOf(t)>-1}),{children:c?f:l}):h.filter((function(t){return g.indexOf(t)>-1}))}return p},handleVirtualTreeToList:function(){var t=this.treeOpts,e=this.treeConfig,n=this.treeExpandeds,r=this.afterTreeFullData,o=this.afterFullData;if(e&&t.transform){var a=[],s=new Map;return i.default.eachTree(r,(function(t,e,r,i,o){(!o||s.has(o)&&n.indexOf(o)>-1)&&(s.set(t,1),a.push(t))}),{children:t.mapChildren}),this.afterFullData=a,this.updateScrollYStatus(a),a}return o},updateAfterFullData:function(){var t=this,e=this.tableFullColumn,n=this.tableFullData,r=this.filterOpts,o=this.sortOpts,a=this.treeConfig,u=this.treeOpts,l=this.tableFullTreeData,f=r.remote,d=r.filterMethod,h=o.remote,p=o.sortMethod,g=o.multiple,v=o.chronological,m=u.transform,b=[],x=[],w=[],_=[];if(e.forEach((function(t){var e=t.property,n=t.sortable,r=t.order,i=t.filters;if(!f&&i&&i.length){var o=[],a=[];i.forEach((function(t){t.checked&&(a.push(t),o.push(t.value))})),a.length&&w.push({column:t,valueList:o,itemList:a})}!h&&n&&r&&_.push({column:t,field:t.property,property:e,order:r,sortTime:t.sortTime})})),g&&v&&_.length>1&&(_=i.default.orderBy(_,"sortTime")),w.length){var E=function(e){return w.every((function(n){var r=n.column,o=n.valueList,a=n.itemList;if(o.length&&!f){var u=r.filterMethod,l=r.filterRender,h=l?s.default.renderer.get(l.name):null,p=h&&h.renderFilter?h.filterMethod:null,g=h?h.defaultFilterMethod:null,v=c.default.getCellValue(e,r);return u?a.some((function(n){return u({value:n.value,option:n,cellValue:v,row:e,column:r,$table:t})})):p?a.some((function(n){return p({value:n.value,option:n,cellValue:v,row:e,column:r,$table:t})})):d?d({options:a,values:o,cellValue:v,row:e,column:r}):g?a.some((function(n){return g({value:n.value,option:n,cellValue:v,row:e,column:r,$table:t})})):o.indexOf(i.default.get(e,r.property))>-1}return!0}))};a&&m?b=x=i.default.searchTree(l,E,y(y({},u),{},{original:!0})):x=b=a?l.filter(E):n.filter(E)}else a&&m?b=x=i.default.searchTree(l,(function(){return!0}),y(y({},u),{},{original:!0})):x=b=a?l.slice(0):n.slice(0);var S=_[0];if(!h&&S)if(a&&m){if(p){var C=p({data:x,sortList:_,$table:this});x=i.default.isArray(C)?C:x}else x=i.default.orderBy(x,_.map((function(e){var n=e.column,r=e.order;return[U(t,n),r]})));b=x}else{if(p){var k=p({data:b,column:S.column,property:S.property,order:S.order,sortList:_,$table:this});b=i.default.isArray(k)?k:b}else{var M;g?b=i.default.orderBy(b,_.map((function(e){var n=e.column,r=e.order;return[U(t,n),r]}))):(i.default.isArray(S.sortBy)&&(M=S.sortBy.map((function(t){return[t,S.order]}))),b=i.default.orderBy(b,M||[S].map((function(e){var n=e.column,r=e.order;return[U(t,n),r]}))))}x=b}this.afterFullData=b,this.afterTreeFullData=x,this.updateAfterDataIndex()},updateAfterDataIndex:function(){var t=this,e=this.treeConfig,n=this.afterFullData,r=this.fullDataRowIdData,o=this.fullAllDataRowIdData,a=this.afterTreeFullData,s=this.treeOpts;e?i.default.eachTree(a,(function(e,n,i,a){var s=(0,u.getRowid)(t,e),c=o[s],l=a.map((function(t,e){return e%2==0?Number(t)+1:"."})).join("");if(c)c.seq=l,c._index=n;else{var f={row:e,rowid:s,seq:l,index:-1,$index:-1,_index:n,items:[],parent:null,level:0};o[s]=f,r[s]=f}}),{children:s.transform?s.mapChildren:s.children}):n.forEach((function(e,n){var i=(0,u.getRowid)(t,e),a=o[i],s=n+1;if(a)a.seq=s,a._index=n;else{var c={row:e,rowid:i,seq:s,index:-1,$index:-1,_index:n,items:[],parent:null,level:0};o[i]=c,r[i]=c}}))},getParentRow:function(t){var e,n=this.treeConfig,r=this.fullDataRowIdData;return t&&n&&(e=i.default.isString(t)?t:(0,u.getRowid)(this,t))&&r[e]?r[e].parent:null},getRowById:function(t){var e=this.fullDataRowIdData;return e[t]?e[t].row:null},getRowid:function(t){var e=this.fullAllDataRowMap;return e.has(t)?e.get(t).rowid:null},getTableData:function(){var t=this.tableFullData,e=this.afterFullData,n=this.tableData,r=this.footerTableData;return{fullData:t.slice(0),visibleData:e.slice(0),tableData:n.slice(0),footerData:r.slice(0)}},handleLoadDefaults:function(){var t=this;this.checkboxConfig&&this.handleDefaultSelectionChecked(),this.radioConfig&&this.handleDefaultRadioChecked(),this.expandConfig&&this.handleDefaultRowExpand(),this.treeConfig&&this.handleDefaultTreeExpand(),this.mergeCells&&this.handleDefaultMergeCells(),this.mergeFooterItems&&this.handleDefaultMergeFooterItems(),this.$nextTick((function(){return setTimeout(t.recalculate)}))},handleInitDefaults:function(){this.sortConfig&&this.handleDefaultSort()},hideColumn:function(t){var e=(0,u.handleFieldOrColumn)(this,t);return e&&(e.visible=!1),this.handleCustom()},showColumn:function(t){var e=(0,u.handleFieldOrColumn)(this,t);return e&&(e.visible=!0),this.handleCustom()},resetColumn:function(t){var e=this.customOpts.checkMethod,n=Object.assign({visible:!0,resizable:!0===t},t);return this.tableFullColumn.forEach((function(t){n.resizable&&(t.resizeWidth=0),e&&!e({column:t})||(t.visible=t.defaultVisible)})),n.resizable&&this.saveCustomResizable(!0),this.handleCustom()},handleCustom:function(){return this.saveCustomVisible(),this.analyColumnWidth(),this.refreshColumn()},restoreCustomStorage:function(){var t=this.id,e=this.collectColumn,n=this.customConfig,r=this.customOpts,o=r.storage,a=!0===r.storage,s=a||o&&o.resizable,u=a||o&&o.visible;if(n&&(s||u)){var c={};if(!t)return void(0,d.errLog)("vxe.error.reqProp",["id"]);if(s){var l=R(N)[t];l&&i.default.each(l,(function(t,e){c[e]={field:e,resizeWidth:t}}))}if(u){var f=R(I)[t];if(f){var h=f.split("|"),p=h[0]?h[0].split(","):[],g=h[1]?h[1].split(","):[];p.forEach((function(t){c[t]?c[t].visible=!1:c[t]={field:t,visible:!1}})),g.forEach((function(t){c[t]?c[t].visible=!0:c[t]={field:t,visible:!0}}))}}var v={};i.default.eachTree(e,(function(t){var e=t.getKey();e&&(v[e]=t)})),i.default.each(c,(function(t,e){var n=t.visible,r=t.resizeWidth,o=v[e];o&&(i.default.isNumber(r)&&(o.resizeWidth=r),i.default.isBoolean(n)&&(o.visible=n))}))}},saveCustomVisible:function(){var t=this.id,e=this.collectColumn,n=this.customConfig,r=this.customOpts,o=r.checkMethod,a=r.storage,s=!0===r.storage||a&&a.visible;if(n&&s){var u=R(I),c=[],l=[];if(!t)return void(0,d.errLog)("vxe.error.reqProp",["id"]);i.default.eachTree(e,(function(t){if(!o||o({column:t}))if(!t.visible&&t.defaultVisible){var e=t.getKey();e&&c.push(e)}else if(t.visible&&!t.defaultVisible){var n=t.getKey();n&&l.push(n)}})),u[t]=[c.join(",")].concat(l.length?[l.join(",")]:[]).join("|")||void 0,localStorage.setItem(I,i.default.toJSONString(u))}},saveCustomResizable:function(t){var e=this.id,n=this.collectColumn,r=this.customConfig,o=this.customOpts,a=o.storage,s=!0===o.storage||a&&a.resizable;if(r&&s){var u,c=R(N);if(!e)return void(0,d.errLog)("vxe.error.reqProp",["id"]);t||(u=i.default.isPlainObject(c[e])?c[e]:{},i.default.eachTree(n,(function(t){if(t.resizeWidth){var e=t.getKey();e&&(u[e]=t.renderWidth)}}))),c[e]=i.default.isEmpty(u)?void 0:u,localStorage.setItem(N,i.default.toJSONString(c))}},refreshColumn:function(){var t=this;return this.parseColumns().then((function(){return t.refreshScroll()})).then((function(){return t.recalculate()}))},parseColumns:function(){var t=this,e=[],n=[],r=[],o=this.collectColumn,a=this.tableFullColumn,s=this.isGroup,u=this.columnStore,c=this.sXOpts,l=this.scrollXStore;if(s){var f=[],h=[],p=[];i.default.eachTree(o,(function(t,o,a,s,u){var c=w(t);u&&u.fixed&&(t.fixed=u.fixed),u&&t.fixed!==u.fixed&&(0,d.errLog)("vxe.error.groupFixed"),c?t.visible=!!i.default.findTree(t.children,(function(t){return w(t)?null:t.visible})):t.visible&&("left"===t.fixed?e.push(t):"right"===t.fixed?r.push(t):n.push(t))})),o.forEach((function(t){t.visible&&("left"===t.fixed?f.push(t):"right"===t.fixed?p.push(t):h.push(t))})),this.tableGroupColumn=f.concat(h).concat(p)}else a.forEach((function(t){t.visible&&("left"===t.fixed?e.push(t):"right"===t.fixed?r.push(t):n.push(t))}));var g=e.concat(n).concat(r),v=c.enabled&&c.gt>-1&&c.gt<a.length;if(this.hasFixedColumn=e.length>0||r.length>0,Object.assign(u,{leftList:e,centerList:n,rightList:r}),v&&s&&(v=!1),v){var m=F(this).visibleSize;l.startIndex=0,l.endIndex=m,l.visibleSize=m}return g.length===this.visibleColumn.length&&this.visibleColumn.every((function(t,e){return t===g[e]}))||(this.clearMergeCells(),this.clearMergeFooterItems()),this.scrollXLoad=v,this.visibleColumn=g,this.handleTableColumn(),this.updateFooter().then((function(){return t.recalculate()})).then((function(){return t.updateCellAreas(),t.recalculate()}))},analyColumnWidth:function(){var t=this.columnOpts,e=t.width,n=t.minWidth,r=[],i=[],o=[],a=[],s=[],u=[];this.tableFullColumn.forEach((function(t){e&&!t.width&&(t.width=e),n&&!t.minWidth&&(t.minWidth=n),t.visible&&(t.resizeWidth?r.push(t):l.default.isPx(t.width)?i.push(t):l.default.isScale(t.width)?a.push(t):l.default.isPx(t.minWidth)?o.push(t):l.default.isScale(t.minWidth)?s.push(t):u.push(t))})),Object.assign(this.columnStore,{resizeList:r,pxList:i,pxMinList:o,scaleList:a,scaleMinList:s,autoList:u})},refreshScroll:function(){var t=this,e=this.lastScrollLeft,n=this.lastScrollTop,r=this.$refs,i=r.tableBody,o=r.leftBody,a=r.rightBody,s=r.tableFooter,c=i?i.$el:null,f=o?o.$el:null,d=a?a.$el:null,h=s?s.$el:null;return new Promise((function(r){if(e||n)return(0,u.restoreScrollLocation)(t,e,n).then((function(){setTimeout(r,30)}));(0,l.setScrollTop)(c,n),(0,l.setScrollTop)(f,n),(0,l.setScrollTop)(d,n),(0,l.setScrollLeft)(h,e),setTimeout(r,30)}))},recalculate:function(t){var e=this,n=this.$refs,r=n.tableBody,i=n.tableHeader,o=n.tableFooter,a=r?r.$el:null,s=i?i.$el:null,u=o?o.$el:null;return a&&(this.autoCellWidth(s,a,u),!0===t)?this.computeScrollLoad().then((function(){return e.autoCellWidth(s,a,u),e.computeScrollLoad()})):this.computeScrollLoad()},autoCellWidth:function(t,e,n){var r=0,i=e.clientWidth-1,o=i,a=o/100,s=this.fit,u=this.columnStore,c=u.resizeList,l=u.pxMinList,f=u.pxList,d=u.scaleList,h=u.scaleMinList,p=u.autoList;if(l.forEach((function(t){var e=parseInt(t.minWidth);r+=e,t.renderWidth=e})),h.forEach((function(t){var e=Math.floor(parseInt(t.minWidth)*a);r+=e,t.renderWidth=e})),d.forEach((function(t){var e=Math.floor(parseInt(t.width)*a);r+=e,t.renderWidth=e})),f.forEach((function(t){var e=parseInt(t.width);r+=e,t.renderWidth=e})),c.forEach((function(t){var e=parseInt(t.resizeWidth);r+=e,t.renderWidth=e})),a=(o-=r)>0?Math.floor(o/(h.length+l.length+p.length)):0,s?o>0&&h.concat(l).forEach((function(t){r+=a,t.renderWidth+=a})):a=40,p.forEach((function(t){var e=Math.max(a,40);t.renderWidth=e,r+=e})),s){var g=d.concat(h).concat(l).concat(p),v=g.length-1;if(v>0){var m=i-r;if(m>0){for(;m>0&&v>=0;)m--,g[v--].renderWidth++;r=i}}}var y=e.offsetHeight,b=e.scrollHeight>e.clientHeight;if(this.scrollbarWidth=b?e.offsetWidth-e.clientWidth:0,this.overflowY=b,this.tableWidth=r,this.tableHeight=y,t?(this.headerHeight=t.clientHeight,this.$nextTick((function(){t&&e&&t.scrollLeft!==e.scrollLeft&&(t.scrollLeft=e.scrollLeft)}))):this.headerHeight=0,n){var x=n.offsetHeight;this.scrollbarHeight=Math.max(x-n.clientHeight,0),this.overflowX=r>n.clientWidth,this.footerHeight=x}else this.footerHeight=0,this.scrollbarHeight=Math.max(y-e.clientHeight,0),this.overflowX=r>i;this.updateHeight(),this.parentHeight=Math.max(this.headerHeight+this.footerHeight+20,this.getParentHeight()),this.overflowX&&this.checkScrolling()},updateHeight:function(){this.customHeight=E(this,"height"),this.customMaxHeight=E(this,"maxHeight")},updateStyle:function(){var t=this,e=this.$refs,n=this.isGroup,r=this.fullColumnIdData,o=this.tableColumn,a=this.customHeight,s=this.customMaxHeight,u=this.border,c=this.headerHeight,f=this.showFooter,d=this.showOverflow,h=this.showHeaderOverflow,p=this.showFooterOverflow,g=this.footerHeight,v=this.tableHeight,m=this.tableWidth,y=this.scrollbarHeight,b=this.scrollbarWidth,x=this.scrollXLoad,w=this.scrollYLoad,_=this.cellOffsetWidth,E=this.columnStore,S=this.elemStore,C=this.editStore,k=this.currentRow,M=this.mouseConfig,T=this.keyboardConfig,A=this.keyboardOpts,N=this.spanMethod,I=this.mergeList,P=this.mergeFooterList,D=this.footerSpanMethod,L=this.isAllOverflow,R=this.visibleColumn,j=e.emptyPlaceholder,B=S["main-body-wrapper"];return j&&(j.style.top="".concat(c,"px"),j.style.height=B?"".concat(B.offsetHeight-y,"px"):""),a>0&&f&&(a+=y),["main","left","right"].forEach((function(C,k){var M=k>0?C:"",j=E["".concat(M,"List")],B=e["".concat(M,"Container")];["header","body","footer"].forEach((function(e){var k=S["".concat(C,"-").concat(e,"-wrapper")],F=S["".concat(C,"-").concat(e,"-table")];if("header"===e){var z=m,$=!1;n||M&&(x||h)&&($=!0),$&&(o=j),($||x)&&(z=o.reduce((function(t,e){return t+e.renderWidth}),0)),F&&(F.style.width=z?"".concat(z+b,"px"):"",l.browse.msie&&i.default.arrayEach(F.querySelectorAll(".vxe-resizable"),(function(t){t.style.height="".concat(t.parentNode.offsetHeight,"px")})));var G=S["".concat(C,"-").concat(e,"-repair")];G&&(G.style.width="".concat(m,"px"));var V=S["".concat(C,"-").concat(e,"-list")];n&&V&&i.default.arrayEach(V.querySelectorAll(".col--group"),(function(e){var n=t.getColumnNode(e);if(n){var r=n.item,o=r.showHeaderOverflow,a=i.default.isBoolean(o)?o:h,s="title"===a||!0===a||"tooltip"===a||"ellipsis"===a,c=0,l=0;s&&i.default.eachTree(r.children,(function(t){t.children&&r.children.length||l++,c+=t.renderWidth})),e.style.width=s?"".concat(c-l-(u?2:0),"px"):""}}))}else if("body"===e){var U,W=S["".concat(C,"-").concat(e,"-emptyBlock")];if(O(k)&&(s?k.style.maxHeight="".concat(M?s-c-(f?0:y):s-c,"px"):k.style.height=a>0?"".concat(M?(a>0?a-c-g:v)-(f?0:y):a-c-g,"px"):""),B){var H="right"===M,Y=E["".concat(M,"List")];O(k)&&(k.style.top="".concat(c,"px")),B.style.height="".concat((a>0?a-c-g:v)+c+g-y*(f?2:1),"px"),B.style.width="".concat(Y.reduce((function(t,e){return t+e.renderWidth}),H?b:0),"px")}M&&(o=x||w||(d?L:d)?I.length||N||T&&A.isMerge?R:j:R),U=o.reduce((function(t,e){return t+e.renderWidth}),0),F&&(F.style.width=U?"".concat(U,"px"):"",F.style.paddingRight=b&&M&&(l.browse["-moz"]||l.browse.safari)?"".concat(b,"px"):""),W&&(W.style.width=U?"".concat(U,"px"):"")}else if("footer"===e){var X;M&&(o=x||p?P.length&&D?R:j:R),X=o.reduce((function(t,e){return t+e.renderWidth}),0),O(k)&&(B&&(k.style.top="".concat(a>0?a-g:v+c,"px")),k.style.marginTop="".concat(-y,"px")),F&&(F.style.width=X?"".concat(X+b,"px"):"")}var q=S["".concat(C,"-").concat(e,"-colgroup")];q&&i.default.arrayEach(q.children,(function(n){var o=n.getAttribute("name");if("col_gutter"===o&&(n.style.width="".concat(b,"px")),r[o]){var a,s=r[o].column,u=s.showHeaderOverflow,c=s.showFooterOverflow,l=s.showOverflow;n.style.width="".concat(s.renderWidth,"px");var f="title"===(a="header"===e?i.default.isUndefined(u)||i.default.isNull(u)?h:u:"footer"===e?i.default.isUndefined(c)||i.default.isNull(c)?p:c:i.default.isUndefined(l)||i.default.isNull(l)?d:l)||!0===a||"tooltip"===a||"ellipsis"===a,g=S["".concat(C,"-").concat(e,"-list")];"header"===e||"footer"===e?x&&!f&&(f=!0):!x&&!w||f||(f=!0),g&&i.default.arrayEach(g.querySelectorAll(".".concat(s.id)),(function(e){var n=parseInt(e.getAttribute("colspan")||1),r=e.querySelector(".vxe-cell"),i=s.renderWidth;if(r){if(n>1)for(var o=t.getColumnIndex(s),a=1;a<n;a++){var u=t.getColumns(o+a);u&&(i+=u.renderWidth)}r.style.width=f?"".concat(i-_*n,"px"):""}}))}}))}))})),k&&this.setCurrentRow(k),M&&M.selected&&C.selected.row&&C.selected.column&&this.addColSdCls(),this.$nextTick()},checkScrolling:function(){var t=this.$refs,e=t.tableBody,n=t.leftContainer,r=t.rightContainer,i=e?e.$el:null;i&&(n&&l.default[i.scrollLeft>0?"addClass":"removeClass"](n,"scrolling--middle"),r&&l.default[i.clientWidth<i.scrollWidth-Math.ceil(i.scrollLeft)?"addClass":"removeClass"](r,"scrolling--middle"))},preventEvent:function(t,e,n,r,i){var o,a=this;return s.default.interceptor.get(e).some((function(e){return!1===e(Object.assign({$grid:a.$xegrid,$table:a,$event:t},n))}))||r&&(o=r()),i&&i(),o},handleGlobalMousedownEvent:function(t){var e=this,n=this.$el,r=this.$refs,i=this.$xegrid,o=this.$toolbar,a=this.mouseConfig,s=this.editStore,u=this.ctxMenuStore,c=this.editOpts,l=this.filterStore,f=this.getRowNode,d=s.actived,h=r.ctxWrapper,p=r.filterWrapper,g=r.validTip;if(p&&(M(t,n,"vxe-cell--filter").flag||M(t,p.$el).flag||M(t,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(t,"event.clearFilter",l.args,this.closeFilter)),d.row){if(!1!==c.autoClear){var v=d.args.cell;v&&M(t,v).flag||g&&M(t,g.$el).flag||(!this.lastCallTime||this.lastCallTime+50<Date.now())&&(M(t,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(t,"event.clearActived",d.args,(function(){var r;if("row"===c.mode){var i=M(t,n,"vxe-body--row");r=!!i.flag&&f(i.targetElem).item!==d.args.row}else r=!M(t,n,"col--edit").flag;if(r||(r=M(t,n,"vxe-header--row").flag),r||(r=M(t,n,"vxe-footer--row").flag),!r&&e.height&&!e.overflowY){var o=t.target;S(o,"vxe-table--body-wrapper")&&(r=t.offsetY<o.clientHeight)}!r&&M(t,n).flag||setTimeout((function(){return e.clearActived(t)}))})))}}else a&&(M(t,n).flag||i&&M(t,i.$el).flag||h&&M(t,h.$el).flag||o&&M(t,o.$el).flag||(this.clearSelected(),M(t,document.body,"vxe-table--ignore-areas-clear").flag||this.preventEvent(t,"event.clearAreas",{},(function(){e.clearCellAreas(),e.clearCopyCellArea()}))));u.visible&&h&&!M(t,h.$el).flag&&this.closeMenu(),this.isActivated=M(t,(i||this).$el).flag},handleGlobalBlurEvent:function(){this.closeFilter(),this.closeMenu()},handleGlobalMousewheelEvent:function(){this.closeTooltip(),this.closeMenu()},keydownEvent:function(t){var e=this,n=this.filterStore,r=this.ctxMenuStore,i=this.editStore,o=this.keyboardConfig,a=this.mouseConfig,s=this.mouseOpts,u=this.keyboardOpts,c=i.actived;27===t.keyCode&&this.preventEvent(t,"event.keydown",null,(function(){if(e.emitEvent("keydown-start",{},t),o&&a&&s.area&&e.handleKeyboardEvent)e.handleKeyboardEvent(t);else if((c.row||n.visible||r.visible)&&(t.stopPropagation(),e.closeFilter(),e.closeMenu(),o&&u.isEsc&&c.row)){var i=c.args;e.clearActived(t),a&&s.selected&&e.$nextTick((function(){return e.handleSelected(i,t)}))}e.emitEvent("keydown",{},t),e.emitEvent("keydown-end",{},t)}))},handleGlobalKeydownEvent:function(t){var e=this;this.isActivated&&this.preventEvent(t,"event.keydown",null,(function(){var n,r=e.filterStore,o=e.isCtxMenu,a=e.ctxMenuStore,s=e.editStore,u=e.editOpts,l=e.editConfig,f=e.mouseConfig,d=e.mouseOpts,h=e.keyboardConfig,p=e.keyboardOpts,g=e.treeConfig,v=e.treeOpts,m=e.highlightCurrentRow,b=e.currentRow,_=e.bodyCtxMenu,E=e.rowOpts,S=s.selected,C=s.actived,k=t.keyCode,M=8===k,O=9===k,T=13===k,A=27===k,N=32===k,I=37===k,P=38===k,D=39===k,L=40===k,R=46===k,j=113===k,B=93===k,F=t.metaKey,z=t.ctrlKey,$=t.shiftKey,G=t.altKey,V=I||P||D||L,U=o&&a.visible&&(T||N||V),W=(0,c.isEnableConf)(l)&&C.column&&C.row;if(r.visible)A&&e.closeFilter();else{if(U)t.preventDefault(),a.showChild&&w(a.selected)?e.moveCtxMenu(t,k,a,"selectChild",37,!1,a.selected.children):e.moveCtxMenu(t,k,a,"selected",39,!0,e.ctxMenuList);else if(h&&f&&d.area&&e.handleKeyboardEvent)e.handleKeyboardEvent(t);else if(h&&N&&p.isChecked&&S.row&&S.column&&("checkbox"===S.column.type||"radio"===S.column.type))t.preventDefault(),"checkbox"===S.column.type?e.handleToggleCheckRowEvent(t,S.args):e.triggerRadioRowEvent(t,S.args);else if(j&&(0,c.isEnableConf)(l))W||S.row&&S.column&&(t.stopPropagation(),t.preventDefault(),e.handleActived(S.args,t));else if(B)e._keyCtx=S.row&&S.column&&_.length,clearTimeout(e.keyCtxTimeout),e.keyCtxTimeout=setTimeout((function(){e._keyCtx=!1}),1e3);else if(T&&!G&&h&&p.isEnter&&(S.row||C.row||g&&(E.isCurrent||m)&&b)){if(z)C.row&&(n=C.args,e.clearActived(t),f&&d.selected&&e.$nextTick((function(){return e.handleSelected(n,t)})));else if(S.row||C.row){var H=S.row?S.args:C.args;$?p.enterToTab?e.moveTabSelected(H,$,t):e.moveSelected(H,I,!0,D,!1,t):p.enterToTab?e.moveTabSelected(H,$,t):e.moveSelected(H,I,!1,D,!0,t)}else if(g&&(E.isCurrent||m)&&b){var Y=b[v.children];if(Y&&Y.length){t.preventDefault();var X=Y[0];n={$table:e,row:X},e.setTreeExpand(b,!0).then((function(){return e.scrollToRow(X)})).then((function(){return e.triggerCurrentRowEvent(t,n)}))}}}else if(V&&h&&p.isArrow)W||(S.row&&S.column?e.moveSelected(S.args,I,P,D,L,t):(P||L)&&(E.isCurrent||m)&&e.moveCurrentRow(P,L,t));else if(O&&h&&p.isTab)S.row||S.column?e.moveTabSelected(S.args,$,t):(C.row||C.column)&&e.moveTabSelected(C.args,$,t);else if(h&&(R||(g&&(E.isCurrent||m)&&b?M&&p.isArrow:M))){if(!W){var q=p.delMethod,Z=p.backMethod;if(p.isDel&&(S.row||S.column))q?q({row:S.row,rowIndex:e.getRowIndex(S.row),column:S.column,columnIndex:e.getColumnIndex(S.column),$table:e}):x(S.row,S.column,null),M?Z?Z({row:S.row,rowIndex:e.getRowIndex(S.row),column:S.column,columnIndex:e.getColumnIndex(S.column),$table:e}):e.handleActived(S.args,t):R&&e.updateFooter();else if(M&&p.isArrow&&g&&(E.isCurrent||m)&&b){var K=i.default.findTree(e.afterFullData,(function(t){return t===b}),v).parent;K&&(t.preventDefault(),n={$table:e,row:K},e.setTreeExpand(K,!1).then((function(){return e.scrollToRow(K)})).then((function(){return e.triggerCurrentRowEvent(t,n)})))}}}else if(h&&p.isEdit&&!z&&!F&&(N||k>=48&&k<=57||k>=65&&k<=90||k>=96&&k<=111||k>=186&&k<=192||k>=219&&k<=222)){var J=p.editMethod;S.column&&S.row&&(0,c.isEnableConf)(S.column.editRender)&&(u.activeMethod&&!u.activeMethod(y(y({},S.args),{},{$table:e}))||(J?J({row:S.row,rowIndex:e.getRowIndex(S.row),column:S.column,columnIndex:e.getColumnIndex(S.column),$table:e}):(x(S.row,S.column,null),e.handleActived(S.args,t))))}e.emitEvent("keydown",{},t)}}))},handleGlobalPasteEvent:function(t){var e=this.isActivated,n=this.keyboardConfig,r=this.keyboardOpts,i=this.mouseConfig,o=this.mouseOpts,a=this.editStore,s=this.filterStore,u=a.actived;e&&!s.visible&&(u.row||u.column||n&&r.isClip&&i&&o.area&&this.handlePasteCellAreaEvent&&this.handlePasteCellAreaEvent(t),this.emitEvent("paste",{},t))},handleGlobalCopyEvent:function(t){var e=this.isActivated,n=this.keyboardConfig,r=this.keyboardOpts,i=this.mouseConfig,o=this.mouseOpts,a=this.editStore,s=this.filterStore,u=a.actived;e&&!s.visible&&(u.row||u.column||n&&r.isClip&&i&&o.area&&this.handleCopyCellAreaEvent&&this.handleCopyCellAreaEvent(t),this.emitEvent("copy",{},t))},handleGlobalCutEvent:function(t){var e=this.isActivated,n=this.keyboardConfig,r=this.keyboardOpts,i=this.mouseConfig,o=this.mouseOpts,a=this.editStore,s=this.filterStore,u=a.actived;e&&!s.visible&&(u.row||u.column||n&&r.isClip&&i&&o.area&&this.handleCutCellAreaEvent&&this.handleCutCellAreaEvent(t),this.emitEvent("cut",{},t))},handleGlobalResizeEvent:function(){this.closeMenu(),this.updateCellAreas(),this.recalculate(!0)},handleTargetEnterEvent:function(t){var e=this.$refs.tooltip;clearTimeout(this.tooltipTimeout),t?this.closeTooltip():e&&e.setActived(!0)},handleTargetLeaveEvent:function(){var t=this,e=this.tooltipOpts,n=this.$refs.tooltip;n&&n.setActived(!1),e.enterable?this.tooltipTimeout=setTimeout((function(){(n=t.$refs.tooltip)&&!n.isActived()&&t.closeTooltip()}),e.leaveDelay):this.closeTooltip()},triggerHeaderHelpEvent:function(t,e){var n=e.column,r=n.titlePrefix||n.titleHelp;if(r.content||r.message){var i=this.$refs,o=this.tooltipStore,a=(0,c.getFuncText)(r.content||r.message);this.handleTargetEnterEvent(!0),o.visible=!0,o.currOpts=y(y({},r),{},{content:null}),this.$nextTick((function(){var e=i.tooltip;e&&e.open(t.currentTarget,a)}))}},triggerHeaderTooltipEvent:function(t,e){var n=this.tooltipStore,r=e.column,i=t.currentTarget;this.handleTargetEnterEvent(n.column!==r||n.row),n.column===r&&n.visible||this.handleTooltip(t,i,i,null,e)},triggerBodyTooltipEvent:function(t,e){var n,r,i=this.editConfig,o=this.editOpts,a=this.editStore,s=this.tooltipStore,u=a.actived,l=e.row,f=e.column,d=t.currentTarget;this.handleTargetEnterEvent(s.column!==f||s.row!==l),(0,c.isEnableConf)(i)&&("row"===o.mode&&u.row===l||u.row===l&&u.column===f)||s.column===f&&s.row===l&&s.visible||(f.treeNode?(n=d.querySelector(".vxe-tree-cell"),"html"===f.type&&(r=d.querySelector(".vxe-cell--html"))):r=d.querySelector("html"===f.type?".vxe-cell--html":".vxe-cell--label"),this.handleTooltip(t,d,n||d.children[0],r,e))},triggerFooterTooltipEvent:function(t,e){var n=e.column,r=this.tooltipStore,i=t.currentTarget;this.handleTargetEnterEvent(!0),r.column===n&&r.visible||this.handleTooltip(t,i,i.querySelector(".vxe-cell--item")||i.children[0],null,e)},handleTooltip:function(t,e,n,r,o){o.cell=e;var a=this.$refs,s=this.tooltipOpts,u=this.tooltipStore,l=o.column,f=o.row,d=s.showAll,h=s.enabled,p=s.contentMethod,g=p?p(o):null,v=p&&!i.default.eqNull(g),m=v?g:("html"===l.type?n.innerText:n.textContent).trim(),y=n.scrollWidth>n.clientWidth;return m&&(d||h||v||y)&&(Object.assign(u,{row:f,column:l,visible:!0,currOpts:null}),this.$nextTick((function(){var t=a.tooltip;t&&t.open(y?n:r||n,c.default.formatText(m))}))),this.$nextTick()},openTooltip:function(t,e){var n=this.$refs.commTip;return n?n.open(t,e):this.$nextTick()},closeTooltip:function(){var t=this.$refs,e=this.tooltipStore,n=t.tooltip,r=t.commTip;return e.visible&&(Object.assign(e,{row:null,column:null,content:null,visible:!1,currOpts:null}),n&&n.close()),r&&r.close(),this.$nextTick()},isAllCheckboxChecked:function(){return this.isAllSelected},isAllCheckboxIndeterminate:function(){return!this.isAllSelected&&this.isIndeterminate},isCheckboxIndeterminate:function(){return(0,d.warnLog)("vxe.error.delFunc",["isCheckboxIndeterminate","isAllCheckboxIndeterminate"]),this.isAllCheckboxIndeterminate()},getCheckboxIndeterminateRecords:function(t){var e=this.treeConfig,n=this.treeIndeterminates,r=this.afterFullData;return e?t?n.slice(0):n.filter((function(t){return r.indexOf(t)})):[]},handleDefaultSelectionChecked:function(){var t=this.fullDataRowIdData,e=this.checkboxOpts,n=e.checkAll,r=e.checkRowKeys;if(n)this.setAllCheckboxRow(!0);else if(r){var i=[];r.forEach((function(e){t[e]&&i.push(t[e].row)})),this.setCheckboxRow(i,!0)}},setCheckboxRow:function(t,e){var n=this;return t&&!i.default.isArray(t)&&(t=[t]),t.forEach((function(t){return n.handleSelectRow({row:t},!!e)})),this.$nextTick()},isCheckedByCheckboxRow:function(t){var e=this.checkboxOpts.checkField;return e?i.default.get(t,e):this.selection.indexOf(t)>-1},isIndeterminateByCheckboxRow:function(t){return this.treeIndeterminates.indexOf(t)>-1&&!this.isCheckedByCheckboxRow(t)},handleSelectRow:function(t,e){var n=this,r=t.row,o=this.selection,a=this.afterFullData,s=this.treeConfig,u=this.treeOpts,c=this.treeIndeterminates,l=this.checkboxOpts,f=l.checkField,d=l.checkStrictly,h=l.checkMethod;if(f)if(s&&!d){-1===e?(-1===c.indexOf(r)&&c.push(r),i.default.set(r,f,!1)):i.default.eachTree([r],(function(t){r!==t&&h&&!h({row:t})||(i.default.set(t,f,e),i.default.remove(c,(function(e){return e===t})),n.handleCheckboxReserveRow(r,e))}),u);var p=i.default.findTree(a,(function(t){return t===r}),u);if(p&&p.parent){var g,v=h?p.items.filter((function(t){return h({row:t})})):p.items;if(i.default.find(p.items,(function(t){return c.indexOf(t)>-1})))g=-1;else{var m=p.items.filter((function(t){return i.default.get(t,f)}));g=m.filter((function(t){return v.indexOf(t)>-1})).length===v.length||!(!m.length&&-1!==e)&&-1}return this.handleSelectRow({row:p.parent},g)}}else h&&!h({row:r})||(i.default.set(r,f,e),this.handleCheckboxReserveRow(r,e));else if(s&&!d){-1===e?(-1===c.indexOf(r)&&c.push(r),i.default.remove(o,(function(t){return t===r}))):i.default.eachTree([r],(function(t){r!==t&&h&&!h({row:t})||(e?o.push(t):i.default.remove(o,(function(e){return e===t})),i.default.remove(c,(function(e){return e===t})),n.handleCheckboxReserveRow(r,e))}),u);var y=i.default.findTree(a,(function(t){return t===r}),u);if(y&&y.parent){var b,x=h?y.items.filter((function(t){return h({row:t})})):y.items;if(i.default.find(y.items,(function(t){return c.indexOf(t)>-1})))b=-1;else{var w=y.items.filter((function(t){return o.indexOf(t)>-1}));b=w.filter((function(t){return x.indexOf(t)>-1})).length===x.length||!(!w.length&&-1!==e)&&-1}return this.handleSelectRow({row:y.parent},b)}}else h&&!h({row:r})||(e?-1===o.indexOf(r)&&o.push(r):i.default.remove(o,(function(t){return t===r})),this.handleCheckboxReserveRow(r,e));this.checkSelectionStatus()},handleToggleCheckRowEvent:function(t,e){var n=this.selection,r=this.checkboxOpts.checkField,o=e.row,a=r?!i.default.get(o,r):-1===n.indexOf(o);t?this.triggerCheckRowEvent(t,e,a):this.handleSelectRow(e,a)},triggerCheckRowEvent:function(t,e,n){var r=this.checkboxOpts.checkMethod;r&&!r({row:e.row})||(this.handleSelectRow(e,n),this.emitEvent("checkbox-change",Object.assign({records:this.getCheckboxRecords(),reserves:this.getCheckboxReserveRecords(),indeterminates:this.getCheckboxIndeterminateRecords(),checked:n},e),t))},toggleCheckboxRow:function(t){return this.handleToggleCheckRowEvent(null,{row:t}),this.$nextTick()},setAllCheckboxRow:function(t){var e=this,n=this.afterFullData,r=this.treeConfig,o=this.treeOpts,a=this.selection,s=this.checkboxReserveRowMap,c=this.checkboxOpts,l=c.checkField,f=c.reserve,d=c.checkStrictly,h=c.checkMethod,p=[],g=r?[]:a.filter((function(t){return-1===n.indexOf(t)}));if(d)this.isAllSelected=t;else{if(l){var v=function(e){h&&!h({row:e})||(t&&p.push(e),i.default.set(e,l,t))};r?i.default.eachTree(n,v,o):n.forEach(v)}else r?t?i.default.eachTree(n,(function(t){h&&!h({row:t})||p.push(t)}),o):h&&i.default.eachTree(n,(function(t){!h({row:t})&&a.indexOf(t)>-1&&p.push(t)}),o):t?p=h?n.filter((function(t){return a.indexOf(t)>-1||h({row:t})})):n.slice(0):h&&(p=n.filter((function(t){return h({row:t})?0:a.indexOf(t)>-1})));f&&(t?p.forEach((function(t){s[(0,u.getRowid)(e,t)]=t})):n.forEach((function(t){return e.handleCheckboxReserveRow(t,!1)}))),this.selection=l?[]:g.concat(p)}this.treeIndeterminates=[],this.checkSelectionStatus()},checkSelectionStatus:function(){var t=this.afterFullData,e=this.selection,n=this.treeIndeterminates,r=this.checkboxOpts,o=this.treeConfig,a=r.checkField,s=r.halfField,u=r.checkStrictly,c=r.checkMethod;if(!u){var l=[],f=[],d=!1,h=!1;a?(d=t.every(c?function(t){return c({row:t})?!!i.default.get(t,a)&&(f.push(t),!0):(l.push(t),!0)}:function(t){return i.default.get(t,a)})&&t.length!==l.length,h=o?s?!d&&t.some((function(t){return i.default.get(t,a)||i.default.get(t,s)||n.indexOf(t)>-1})):!d&&t.some((function(t){return i.default.get(t,a)||n.indexOf(t)>-1})):s?!d&&t.some((function(t){return i.default.get(t,a)||i.default.get(t,s)})):!d&&t.some((function(t){return i.default.get(t,a)}))):(d=t.every(c?function(t){return c({row:t})?e.indexOf(t)>-1&&(f.push(t),!0):(l.push(t),!0)}:function(t){return e.indexOf(t)>-1})&&t.length!==l.length,h=o?!d&&t.some((function(t){return n.indexOf(t)>-1||e.indexOf(t)>-1})):!d&&t.some((function(t){return e.indexOf(t)>-1}))),this.isAllSelected=d,this.isIndeterminate=h}},handleReserveStatus:function(){var t=this.expandColumn,e=this.treeOpts,n=this.treeConfig,r=this.fullDataRowIdData,i=this.fullAllDataRowMap,o=this.currentRow,a=this.selectRow,s=this.radioReserveRow,c=this.radioOpts,l=this.checkboxOpts,f=this.selection,d=this.rowExpandeds,h=this.treeExpandeds,p=this.expandOpts;if(a&&!i.has(a)&&(this.selectRow=null),c.reserve&&s){var g=(0,u.getRowid)(this,s);r[g]&&this.setRadioRow(r[g].row)}this.selection=j(this,f),l.reserve&&this.setCheckboxRow(B(this,this.checkboxReserveRowMap),!0),o&&!i.has(o)&&(this.currentRow=null),this.rowExpandeds=t?j(this,d):[],t&&p.reserve&&this.setRowExpand(B(this,this.rowExpandedReserveRowMap),!0),this.treeExpandeds=n?j(this,h):[],n&&e.reserve&&this.setTreeExpand(B(this,this.treeExpandedReserveRowMap),!0)},getRadioReserveRecord:function(t){var e=this.fullDataRowIdData,n=this.radioReserveRow,r=this.radioOpts,o=this.afterFullData,a=this.treeConfig,s=this.treeOpts;if(r.reserve&&n){var c=(0,u.getRowid)(this,n);if(t){if(!e[c])return n}else{var l=(0,u.getRowkey)(this);if(a){if(i.default.findTree(o,(function(t){return c===i.default.get(t,l)}),s))return n}else if(!o.some((function(t){return c===i.default.get(t,l)})))return n}}return null},clearRadioReserve:function(){return this.radioReserveRow=null,this.$nextTick()},handleRadioReserveRow:function(t){this.radioOpts.reserve&&(this.radioReserveRow=t)},getCheckboxReserveRecords:function(t){var e=this,n=this.fullDataRowIdData,r=this.afterFullData,o=this.checkboxReserveRowMap,a=this.checkboxOpts,s=this.treeConfig,c=this.treeOpts,l=[];if(a.reserve){var f={};s?i.default.eachTree(r,(function(t){f[(0,u.getRowid)(e,t)]=1}),c):r.forEach((function(t){f[(0,u.getRowid)(e,t)]=1})),i.default.each(o,(function(e,r){e&&(t?n[r]||l.push(e):f[r]||l.push(e))}))}return l},clearCheckboxReserve:function(){return this.checkboxReserveRowMap={},this.$nextTick()},handleCheckboxReserveRow:function(t,e){var n=this.checkboxReserveRowMap;if(this.checkboxOpts.reserve){var r=(0,u.getRowid)(this,t);e?n[r]=t:n[r]&&delete n[r]}},triggerCheckAllEvent:function(t,e){this.setAllCheckboxRow(e),this.emitEvent("checkbox-all",{records:this.getCheckboxRecords(),reserves:this.getCheckboxReserveRecords(),indeterminates:this.getCheckboxIndeterminateRecords(),checked:e},t)},toggleAllCheckboxRow:function(){return this.triggerCheckAllEvent(null,!this.isAllSelected),this.$nextTick()},clearCheckboxRow:function(){var t=this,e=this.tableFullData,n=this.treeConfig,r=this.treeOpts,o=this.checkboxOpts,a=o.checkField,s=o.reserve;return a&&(n?i.default.eachTree(e,(function(t){return i.default.set(t,a,!1)}),r):e.forEach((function(t){return i.default.set(t,a,!1)}))),s&&e.forEach((function(e){return t.handleCheckboxReserveRow(e,!1)})),this.isAllSelected=!1,this.isIndeterminate=!1,this.selection=[],this.treeIndeterminates=[],this.$nextTick()},handleDefaultRadioChecked:function(){var t=this.radioOpts,e=this.fullDataRowIdData,n=t.checkRowKey,r=t.reserve;if(n&&(e[n]&&this.setRadioRow(e[n].row),r)){var i=(0,u.getRowkey)(this);this.radioReserveRow=b({},i,n)}},triggerRadioRowEvent:function(t,e){var n=this.selectRow,r=this.radioOpts,i=e.row,o=n!==i;o?this.setRadioRow(i):r.strict||(o=n===i)&&(i=null,this.clearRadioRow()),o&&this.emitEvent("radio-change",y({oldValue:n,newValue:i},e),t)},triggerCurrentRowEvent:function(t,e){var n=this.currentRow,r=e.row,i=n!==r;this.setCurrentRow(r),i&&this.emitEvent("current-change",y({oldValue:n,newValue:r},e),t)},setCurrentRow:function(t){var e=this.$el,n=this.rowOpts;return this.clearCurrentRow(),this.clearCurrentColumn(),this.currentRow=t,(n.isCurrent||this.highlightCurrentRow)&&e&&i.default.arrayEach(e.querySelectorAll('[rowid="'.concat((0,u.getRowid)(this,t),'"]')),(function(t){return C(t,"row--current")})),this.$nextTick()},isCheckedByRadioRow:function(t){return this.selectRow===t},setRadioRow:function(t){var e=this.radioOpts.checkMethod;return!t||e&&!e({row:t})||(this.selectRow=t,this.handleRadioReserveRow(t)),this.$nextTick()},clearCurrentRow:function(){var t=this.$el;return this.currentRow=null,this.hoverRow=null,t&&i.default.arrayEach(t.querySelectorAll(".row--current"),(function(t){return k(t,"row--current")})),this.$nextTick()},clearRadioRow:function(){return this.selectRow=null,this.$nextTick()},getCurrentRecord:function(){return this.rowOpts.isCurrent||this.highlightCurrentRow?this.currentRow:null},getRadioRecord:function(t){var e=this.treeConfig,n=this.treeOpts,r=this.selectRow,o=this.fullDataRowIdData,a=this.afterFullData;if(r){var s=(0,u.getRowid)(this,r);if(t){if(!o[s])return r}else if(e){var c=(0,u.getRowkey)(this);if(i.default.findTree(a,(function(t){return s===i.default.get(t,c)}),n))return r}else if(a.indexOf(r)>-1)return r}return null},triggerHoverEvent:function(t,e){var n=e.row;this.setHoverRow(n)},setHoverRow:function(t){var e=this.$el,n=(0,u.getRowid)(this,t);this.clearHoverRow(),e&&i.default.arrayEach(e.querySelectorAll('[rowid="'.concat(n,'"]')),(function(t){return C(t,"row--hover")})),this.hoverRow=t},clearHoverRow:function(){var t=this.$el;t&&i.default.arrayEach(t.querySelectorAll(".vxe-body--row.row--hover"),(function(t){return k(t,"row--hover")})),this.hoverRow=null},triggerHeaderCellClickEvent:function(t,e){var n=this._lastResizeTime,r=this.sortOpts,i=e.column,o=t.currentTarget,a=n&&n>Date.now()-300,s=M(t,o,"vxe-cell--sort").flag,u=M(t,o,"vxe-cell--filter").flag;return"cell"!==r.trigger||a||s||u||this.triggerSortEvent(t,i,L(this,i)),this.emitEvent("header-cell-click",Object.assign({triggerResizable:a,triggerSort:s,triggerFilter:u,cell:o},e),t),this.columnOpts.isCurrent||this.highlightCurrentColumn?this.setCurrentColumn(i):this.$nextTick()},triggerHeaderCellDblclickEvent:function(t,e){this.emitEvent("header-cell-dblclick",Object.assign({cell:t.currentTarget},e),t)},getCurrentColumn:function(){return this.columnOpts.isCurrent||this.highlightCurrentColumn?this.currentColumn:null},setCurrentColumn:function(t){var e=(0,u.handleFieldOrColumn)(this,t);return e&&(this.clearCurrentRow(),this.clearCurrentColumn(),this.currentColumn=e),this.$nextTick()},clearCurrentColumn:function(){return this.currentColumn=null,this.$nextTick()},checkValidate:function(t){return s.default._valid?this.triggerValidate(t):this.$nextTick()},handleChangeCell:function(t,e){var n=this;this.checkValidate("blur").catch((function(t){return t})).then((function(){n.handleActived(e,t).then((function(){return n.checkValidate("change")})).catch((function(t){return t}))}))},triggerCellClickEvent:function(t,e){var n=this.highlightCurrentRow,r=this.editStore,i=this.radioOpts,o=this.expandOpts,a=this.treeOpts,s=this.editConfig,u=this.editOpts,l=this.checkboxOpts,f=this.rowOpts,d=r.actived,h=e,p=h.row,g=h.column,v=g.type,m=g.treeNode,y="radio"===v,b="checkbox"===v,x="expand"===v,w=t.currentTarget,_=y&&M(t,w,"vxe-cell--radio").flag,E=b&&M(t,w,"vxe-cell--checkbox").flag,S=m&&M(t,w,"vxe-tree--btn-wrapper").flag,C=x&&M(t,w,"vxe-table--expanded").flag;e=Object.assign({cell:w,triggerRadio:_,triggerCheckbox:E,triggerTreeNode:S,triggerExpandNode:C},e),E||_||(!C&&("row"===o.trigger||x&&"cell"===o.trigger)&&this.triggerRowExpandEvent(t,e),("row"===a.trigger||m&&"cell"===a.trigger)&&this.triggerTreeExpandEvent(t,e)),S||(C||((f.isCurrent||n)&&(E||_||this.triggerCurrentRowEvent(t,e)),!_&&("row"===i.trigger||y&&"cell"===i.trigger)&&this.triggerRadioRowEvent(t,e),!E&&("row"===l.trigger||b&&"cell"===l.trigger)&&this.handleToggleCheckRowEvent(t,e)),(0,c.isEnableConf)(s)&&("manual"===u.trigger?d.args&&d.row===p&&g!==d.column&&this.handleChangeCell(t,e):d.args&&p===d.row&&g===d.column||("click"===u.trigger||"dblclick"===u.trigger&&"row"===u.mode&&d.row===p)&&this.handleChangeCell(t,e))),this.emitEvent("cell-click",e,t)},triggerCellDblclickEvent:function(t,e){var n=this,r=this.editStore,i=this.editConfig,o=this.editOpts,a=r.actived,s=t.currentTarget;e.cell=s,(0,c.isEnableConf)(i)&&"dblclick"===o.trigger&&(a.args&&t.currentTarget===a.args.cell||("row"===o.mode?this.checkValidate("blur").catch((function(t){return t})).then((function(){n.handleActived(e,t).then((function(){return n.checkValidate("change")})).catch((function(t){return t}))})):"cell"===o.mode&&this.handleActived(e,t).then((function(){return n.checkValidate("change")})).catch((function(t){return t})))),this.emitEvent("cell-dblclick",e,t)},handleDefaultSort:function(){var t=this,e=this.sortConfig,n=this.sortOpts,r=n.defaultSort;r&&(i.default.isArray(r)||(r=[r]),r.length&&((e.multiple?r:r.slice(0,1)).forEach((function(e,n){var r=e.field,i=e.order;if(r&&i){var o=t.getColumnByField(r);o&&o.sortable&&(o.order=i,o.sortTime=Date.now()+n)}})),n.remote||this.handleTableData(!0).then(this.updateStyle)))},triggerSortEvent:function(t,e,n){var r=this.sortOpts,i=e.property;if(e.sortable||e.remoteSort){n&&e.order!==n?this.sort({field:i,order:n}):this.clearSort(r.multiple?e:null);var o={column:e,property:i,order:e.order,sortList:this.getSortColumns()};this.emitEvent("sort-change",o,t)}},sort:function(t,e){var n,r=this,o=this.sortOpts,a=o.multiple,s=o.remote,u=o.orders;return t&&i.default.isString(t)&&(t=[{field:t,order:e}]),i.default.isArray(t)||(t=[t]),t.length?(a||V(this),(a?t:[t[0]]).forEach((function(t,e){var o=t.field,a=t.order,s=o;i.default.isString(o)&&(s=r.getColumnByField(o)),s&&(s.sortable||s.remoteSort)&&(n||(n=s),-1===u.indexOf(a)&&(a=L(r,s)),s.order!==a&&(s.order=a),s.sortTime=Date.now()+e)})),(!s||n&&n.remoteSort)&&this.handleTableData(!0),this.$nextTick().then(this.updateStyle)):this.$nextTick()},clearSort:function(t){var e=this.sortOpts;if(t){var n=(0,u.handleFieldOrColumn)(this,t);n&&(n.order=null)}else V(this);return e.remote||this.handleTableData(!0),this.$nextTick().then(this.updateStyle)},getSortColumn:function(){return i.default.find(this.tableFullColumn,(function(t){return(t.sortable||t.remoteSort)&&t.order}))},isSort:function(t){if(t){var e=(0,u.handleFieldOrColumn)(this,t);return e&&e.sortable&&!!e.order}return this.getSortColumns().length>0},getSortColumns:function(){var t=this.sortOpts,e=t.multiple,n=t.chronological,r=[];return this.tableFullColumn.forEach((function(t){var e=t.property,n=t.order;(t.sortable||t.remoteSort)&&n&&r.push({column:t,field:t.property,property:e,order:n,sortTime:t.sortTime})})),e&&n&&r.length>1?i.default.orderBy(r,"sortTime"):r},closeFilter:function(){var t=this.filterStore,e=t.column,n=t.visible;return Object.assign(t,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),n&&this.emitEvent("filter-visible",{column:e,property:e.property,filterList:this.getCheckedFilters(),visible:!1},null),this.$nextTick()},isFilter:function(t){var e=(0,u.handleFieldOrColumn)(this,t);return e?e.filters&&e.filters.some((function(t){return t.checked})):this.getCheckedFilters().length>0},isRowExpandLoaded:function(t){var e=this.fullAllDataRowMap.get(t);return e&&e.expandLoaded},clearRowExpandLoaded:function(t){var e=this.expandOpts,n=this.expandLazyLoadeds,r=this.fullAllDataRowMap,o=e.lazy,a=r.get(t);return o&&a&&(a.expandLoaded=!1,i.default.remove(n,(function(e){return t===e}))),this.$nextTick()},reloadRowExpand:function(t){var e=this,n=this.expandOpts,r=this.expandLazyLoadeds;return n.lazy&&-1===r.indexOf(t)&&this.clearRowExpandLoaded(t).then((function(){return e.handleAsyncRowExpand(t)})),this.$nextTick()},reloadExpandContent:function(t){return this.reloadRowExpand(t)},triggerRowExpandEvent:function(t,e){var n=this.expandOpts,r=this.expandLazyLoadeds,i=this.expandColumn,o=e.row;if(!n.lazy||-1===r.indexOf(o)){var a=!this.isExpandByRow(o),s=this.getColumnIndex(i),u=this.getVMColumnIndex(i);this.setRowExpand(o,a),this.emitEvent("toggle-row-expand",{expanded:a,column:i,columnIndex:s,$columnIndex:u,row:o,rowIndex:this.getRowIndex(o),$rowIndex:this.getVMRowIndex(o)},t)}},toggleRowExpand:function(t){return this.setRowExpand(t,!this.isExpandByRow(t))},handleDefaultRowExpand:function(){var t=this.expandOpts,e=this.fullDataRowIdData,n=t.expandAll,r=t.expandRowKeys;if(n)this.setAllRowExpand(!0);else if(r){var i=[];r.forEach((function(t){e[t]&&i.push(e[t].row)})),this.setRowExpand(i,!0)}},setAllRowExpand:function(t){return this.setRowExpand(this.expandOpts.lazy?this.tableData:this.tableFullData,t)},handleAsyncRowExpand:function(t){var e=this,n=this.fullAllDataRowMap.get(t);return new Promise((function(r){e.expandLazyLoadeds.push(t),e.expandOpts.loadMethod({$table:e,row:t,rowIndex:e.getRowIndex(t),$rowIndex:e.getVMRowIndex(t)}).then((function(){n.expandLoaded=!0,e.rowExpandeds.push(t)})).catch((function(){n.expandLoaded=!1})).finally((function(){i.default.remove(e.expandLazyLoadeds,(function(e){return e===t})),r(e.$nextTick().then(e.recalculate))}))}))},setRowExpand:function(t,e){var n=this,r=this.fullAllDataRowMap,o=this.expandLazyLoadeds,a=this.expandOpts,s=this.expandColumn,u=this.rowExpandeds,c=a.reserve,l=a.lazy,f=a.accordion,d=a.toggleMethod,h=[],p=this.getColumnIndex(s),g=this.getVMColumnIndex(s);if(t){i.default.isArray(t)||(t=[t]),f&&(u=[],t=t.slice(t.length-1,t.length));var v=d?t.filter((function(t){return d({expanded:e,column:s,columnIndex:p,$columnIndex:g,row:t,rowIndex:n.getRowIndex(t),$rowIndex:n.getVMRowIndex(t)})})):t;e?v.forEach((function(t){if(-1===u.indexOf(t)){var e=r.get(t);l&&!e.expandLoaded&&-1===o.indexOf(t)?h.push(n.handleAsyncRowExpand(t)):u.push(t)}})):i.default.remove(u,(function(t){return v.indexOf(t)>-1})),c&&v.forEach((function(t){return n.handleRowExpandReserve(t,e)}))}return this.rowExpandeds=u,Promise.all(h).then(this.recalculate)},isExpandByRow:function(t){return this.rowExpandeds.indexOf(t)>-1},clearRowExpand:function(){var t=this,e=this.expandOpts,n=this.rowExpandeds,r=this.tableFullData,i=e.reserve,o=n.length;return this.rowExpandeds=[],i&&r.forEach((function(e){return t.handleRowExpandReserve(e,!1)})),this.$nextTick().then((function(){o&&t.recalculate()}))},clearRowExpandReserve:function(){return this.rowExpandedReserveRowMap={},this.$nextTick()},handleRowExpandReserve:function(t,e){var n=this.rowExpandedReserveRowMap;if(this.expandOpts.reserve){var r=(0,u.getRowid)(this,t);e?n[r]=t:n[r]&&delete n[r]}},getRowExpandRecords:function(){return this.rowExpandeds.slice(0)},getTreeExpandRecords:function(){return this.treeExpandeds.slice(0)},getTreeStatus:function(){return this.treeConfig?{config:this.treeOpts,rowExpandeds:this.getTreeExpandRecords()}:null},isTreeExpandLoaded:function(t){var e=this.fullAllDataRowMap.get(t);return e&&e.treeLoaded},clearTreeExpandLoaded:function(t){var e=this.treeOpts,n=this.treeExpandeds,r=this.fullAllDataRowMap,o=e.transform,a=e.lazy,s=r.get(t);return a&&s&&(s.treeLoaded=!1,i.default.remove(n,(function(e){return t===e}))),o?(this.handleVirtualTreeToList(),this.handleTableData()):this.$nextTick()},reloadTreeExpand:function(t){var e=this,n=this.treeOpts,r=this.treeLazyLoadeds,i=n.transform,o=n.lazy,a=n.hasChild;return o&&t[a]&&-1===r.indexOf(t)&&this.clearTreeExpandLoaded(t).then((function(){return e.handleAsyncTreeExpandChilds(t)})).then((function(){if(i)return e.handleVirtualTreeToList(),e.handleTableData()})).then((function(){return e.recalculate()})),this.$nextTick()},reloadTreeChilds:function(t){return this.reloadTreeExpand(t)},triggerTreeExpandEvent:function(t,e){var n=this.treeOpts,r=this.treeLazyLoadeds,i=e.row,o=e.column;if(!n.lazy||-1===r.indexOf(i)){var a=!this.isTreeExpandByRow(i),s=this.getColumnIndex(o),u=this.getVMColumnIndex(o);this.setTreeExpand(i,a),this.emitEvent("toggle-tree-expand",{expanded:a,column:o,columnIndex:s,$columnIndex:u,row:i},t)}},toggleTreeExpand:function(t){return this.setTreeExpand(t,!this.isTreeExpandByRow(t))},handleDefaultTreeExpand:function(){var t=this.treeConfig,e=this.treeOpts,n=this.tableFullData;if(t){var r=e.expandAll,o=e.expandRowKeys;if(r)this.setAllTreeExpand(!0);else if(o){var a=[],s=(0,u.getRowkey)(this);o.forEach((function(t){var r=i.default.findTree(n,(function(e){return t===i.default.get(e,s)}),e);r&&a.push(r.item)})),this.setTreeExpand(a,!0)}}},handleAsyncTreeExpandChilds:function(t){var e=this,n=this.fullAllDataRowMap,r=this.treeExpandeds,o=this.treeOpts,a=this.treeLazyLoadeds,s=this.checkboxOpts,u=o.transform,c=o.loadMethod,l=s.checkStrictly,f=n.get(t);return new Promise((function(n){a.push(t),c({$table:e,row:t}).then((function(n){if(f.treeLoaded=!0,i.default.remove(a,(function(e){return e===t})),i.default.isArray(n)||(n=[]),n)return e.loadTreeChildren(t,n).then((function(n){return n.length&&-1===r.indexOf(t)&&r.push(t),!l&&e.isCheckedByCheckboxRow(t)&&e.setCheckboxRow(n,!0),e.$nextTick().then((function(){if(u)return e.handleTableData()}))}))})).catch((function(){f.treeLoaded=!1,i.default.remove(a,(function(e){return e===t}))})).finally((function(){e.$nextTick().then((function(){return e.recalculate()})).then((function(){return n()}))}))}))},setAllTreeExpand:function(t){var e=this.tableFullData,n=this.treeOpts,r=n.lazy,o=n.children,a=[];return i.default.eachTree(e,(function(t){var e=t[o];(r||e&&e.length)&&a.push(t)}),n),this.setTreeExpand(a,t)},handleBaseTreeExpand:function(t,e){var n=this,r=this.fullAllDataRowMap,o=this.tableFullData,a=this.treeExpandeds,s=this.treeOpts,u=this.treeLazyLoadeds,c=this.treeNodeColumn,l=s.reserve,f=s.lazy,d=s.hasChild,h=s.children,p=s.accordion,g=s.toggleMethod,v=[],m=this.getColumnIndex(c),y=this.getVMColumnIndex(c),b=g?t.filter((function(t){return g({expanded:e,column:c,columnIndex:m,$columnIndex:y,row:t})})):t;if(p){b=b.length?[b[b.length-1]]:[];var x=i.default.findTree(o,(function(t){return t===b[0]}),s);x&&i.default.remove(a,(function(t){return x.items.indexOf(t)>-1}))}return e?b.forEach((function(t){if(-1===a.indexOf(t)){var e=r.get(t);f&&t[d]&&!e.treeLoaded&&-1===u.indexOf(t)?v.push(n.handleAsyncTreeExpandChilds(t)):t[h]&&t[h].length&&a.push(t)}})):i.default.remove(a,(function(t){return b.indexOf(t)>-1})),l&&b.forEach((function(t){return n.handleTreeExpandReserve(t,e)})),Promise.all(v).then(this.recalculate)},handleVirtualTreeExpand:function(t,e){var n=this;return this.handleBaseTreeExpand(t,e).then((function(){return n.handleVirtualTreeToList(),n.handleTableData()})).then((function(){return n.recalculate()}))},setTreeExpand:function(t,e){var n=this.treeOpts.transform;return t&&(i.default.isArray(t)||(t=[t]),t.length)?n?this.handleVirtualTreeExpand(t,e):this.handleBaseTreeExpand(t,e):this.$nextTick()},isTreeExpandByRow:function(t){return this.treeExpandeds.indexOf(t)>-1},clearTreeExpand:function(){var t=this,e=this.treeOpts,n=this.treeExpandeds,r=this.tableFullData,o=e.transform,a=e.reserve,s=n.length;return this.treeExpandeds=[],a&&i.default.eachTree(r,(function(e){return t.handleTreeExpandReserve(e,!1)}),e),this.handleTableData().then((function(){if(o)return t.handleVirtualTreeToList(),t.handleTableData()})).then((function(){s&&t.recalculate()}))},clearTreeExpandReserve:function(){return this.treeExpandedReserveRowMap={},this.$nextTick()},handleTreeExpandReserve:function(t,e){var n=this.treeExpandedReserveRowMap;if(this.treeOpts.reserve){var r=(0,u.getRowid)(this,t);e?n[r]=t:n[r]&&delete n[r]}},getScroll:function(){var t=this.$refs,e=this.scrollXLoad,n=this.scrollYLoad,r=t.tableBody.$el;return{virtualX:e,virtualY:n,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}},triggerScrollXEvent:function(){this.loadScrollXData()},loadScrollXData:function(){var t=this.mergeList,e=this.mergeFooterList,n=this.scrollXStore,r=n.startIndex,i=n.endIndex,o=n.offsetSize,a=F(this),s=a.toVisibleIndex,u=a.visibleSize,c={startIndex:Math.max(0,s-1-o),endIndex:s+u+o};z(t.concat(e),c,"col");var l=c.startIndex,f=c.endIndex;(s<=r||s>=i-u-1)&&(r===l&&i===f||(n.startIndex=l,n.endIndex=f,this.updateScrollXData())),this.closeTooltip()},triggerScrollYEvent:function(t){var e=this.scrollYStore,n=e.adaptive,r=e.offsetSize,i=e.visibleSize;T&&n&&2*r+i<=40?this.loadScrollYData(t):this.debounceScrollY(t)},debounceScrollY:i.default.debounce((function(t){this.loadScrollYData(t)}),A,{leading:!1,trailing:!0}),loadScrollYData:function(t){var e=this.mergeList,n=this.scrollYStore,r=n.startIndex,i=n.endIndex,o=n.visibleSize,a=n.offsetSize,s=n.rowHeight,u=(t.currentTarget||t.target).scrollTop,c=Math.floor(u/s),l={startIndex:Math.max(0,c-1-a),endIndex:c+o+a};z(e,l,"row");var f=l.startIndex,d=l.endIndex;(c<=r||c>=i-o-1)&&(r===f&&i===d||(n.startIndex=f,n.endIndex=d,this.updateScrollYData()))},computeScrollLoad:function(){var t=this;return this.$nextTick().then((function(){var e=t.sYOpts,n=t.sXOpts,r=t.scrollXLoad,o=t.scrollYLoad,a=t.scrollXStore,s=t.scrollYStore;if(r){var u=F(t).visibleSize,c=n.oSize?i.default.toNumber(n.oSize):l.browse.msie?10:l.browse.edge?5:0;a.offsetSize=c,a.visibleSize=u,a.endIndex=Math.max(a.startIndex+a.visibleSize+c,a.endIndex),t.updateScrollXData()}else t.updateScrollXSpace();var f=function(t){var e=t.$refs,n=t.vSize,r=t.rowHeightMaps,i=e.tableHeader,o=e.tableBody,a=o?o.$el:null;if(a){var s,u=i?i.$el:null,c=0;return!(s=a.querySelector("tr"))&&u&&(s=u.querySelector("tr")),s&&(c=s.clientHeight),c||(c=r[n||"default"]),{rowHeight:c,visibleSize:Math.max(8,Math.ceil(a.clientHeight/c)+2)}}return{rowHeight:0,visibleSize:8}}(t),d=f.rowHeight,h=f.visibleSize;if(s.rowHeight=d,o){var p=e.oSize?i.default.toNumber(e.oSize):l.browse.msie?20:l.browse.edge?10:0;s.offsetSize=p,s.visibleSize=h,s.endIndex=Math.max(s.startIndex+h+p,s.endIndex),t.updateScrollYData()}else t.updateScrollYSpace();t.rowHeight=d,t.$nextTick(t.updateStyle)}))},handleTableColumn:function(){var t=this.scrollXLoad,e=this.visibleColumn,n=this.scrollXStore;this.tableColumn=t?e.slice(n.startIndex,n.endIndex):e.slice(0)},updateScrollXData:function(){var t=this;this.$nextTick((function(){t.handleTableColumn(),t.updateScrollXSpace()}))},updateScrollXSpace:function(){var t=this.$refs,e=this.elemStore,n=this.visibleColumn,r=this.scrollXStore,i=this.scrollXLoad,o=this.tableWidth,a=this.scrollbarWidth,s=t.tableHeader,u=t.tableBody,c=t.tableFooter,l=u?u.$el:null;if(l){var f=s?s.$el:null,d=c?c.$el:null,h=f?f.querySelector(".vxe-table--header"):null,p=l.querySelector(".vxe-table--body"),g=d?d.querySelector(".vxe-table--footer"):null,v=n.slice(0,r.startIndex).reduce((function(t,e){return t+e.renderWidth}),0),m="";i&&(m="".concat(v,"px")),h&&(h.style.marginLeft=m),p.style.marginLeft=m,g&&(g.style.marginLeft=m),["main"].forEach((function(t){["header","body","footer"].forEach((function(n){var r=e["".concat(t,"-").concat(n,"-xSpace")];r&&(r.style.width=i?"".concat(o+("header"===n?a:0),"px"):"")}))})),this.$nextTick(this.updateStyle)}},updateScrollYData:function(){var t=this;this.$nextTick((function(){t.handleTableData(),t.updateScrollYSpace()}))},updateScrollYSpace:function(){var t=this.elemStore,e=this.scrollYStore,n=this.scrollYLoad,r=this.afterFullData,i=e.startIndex,o=e.rowHeight,a=r.length*o,s=Math.max(0,i*o),u="",c="";n&&(u="".concat(s,"px"),c="".concat(a,"px")),["main","left","right"].forEach((function(e){var n=t["".concat(e,"-body-table")];n&&(n.style.marginTop=u),["header","body","footer"].forEach((function(n){var r=t["".concat(e,"-").concat(n,"-ySpace")];r&&(r.style.height=c)}))})),this.$nextTick(this.updateStyle)},scrollTo:function(t,e){var n=this,r=this.$refs,o=r.tableBody,a=r.rightBody,s=r.tableFooter,u=o?o.$el:null,c=a?a.$el:null,f=s?s.$el:null;return i.default.isNumber(t)&&(0,l.setScrollLeft)(f||u,t),i.default.isNumber(e)&&(0,l.setScrollTop)(c||u,e),this.scrollXLoad||this.scrollYLoad?new Promise((function(t){return setTimeout((function(){return t(n.$nextTick())}),50)})):this.$nextTick()},scrollToRow:function(t,e){var n=[];return t&&(this.treeConfig?n.push(this.scrollToTreeRow(t)):n.push((0,u.rowToVisible)(this,t))),e&&n.push(this.scrollToColumn(e)),Promise.all(n)},scrollToColumn:function(t){var e=(0,u.handleFieldOrColumn)(this,t);return e&&this.fullColumnMap.has(e)?(0,u.colToVisible)(this,e):this.$nextTick()},scrollToTreeRow:function(t){var e=this,n=this.tableFullData,r=this.treeConfig,o=this.treeOpts,a=[];if(r){var s=i.default.findTree(n,(function(e){return e===t}),o);if(s){var c=s.nodes;c.forEach((function(t,n){n<c.length-1&&!e.isTreeExpandByRow(t)&&a.push(e.setTreeExpand(t,!0))}))}}return Promise.all(a).then((function(){return(0,u.rowToVisible)(e,t)}))},clearScroll:function(){var t=this.$refs,e=this.scrollXStore,n=this.scrollYStore,r=t.tableBody,i=t.rightBody,o=t.tableFooter,a=r?r.$el:null,s=i?i.$el:null,c=o?o.$el:null;return s&&((0,u.restoreScrollListener)(s),s.scrollTop=0),c&&(c.scrollLeft=0),a&&((0,u.restoreScrollListener)(a),a.scrollTop=0,a.scrollLeft=0),e.startIndex=0,n.startIndex=0,this.$nextTick()},updateFooter:function(){var t=this.showFooter,e=this.visibleColumn,n=this.footerMethod;return t&&n&&(this.footerTableData=e.length?n({columns:e,data:this.afterFullData,$table:this,$grid:this.$xegrid}):[]),this.$nextTick()},updateStatus:function(t,e){var n=this,r=!i.default.isUndefined(e);return this.$nextTick().then((function(){var i=n.$refs,o=n.editRules,a=n.validStore;if(t&&i.tableBody&&o){var s=t.row,u=t.column,c="change";if(n.hasCellRules(c,s,u)){var l=n.getCell(s,u);if(l)return n.validCellRules(c,s,u,e).then((function(){r&&a.visible&&x(s,u,e),n.clearValidate()})).catch((function(t){var i=t.rule;r&&x(s,u,e),n.showValidTooltip({rule:i,row:s,column:u,cell:l})}))}}}))},handleDefaultMergeCells:function(){this.setMergeCells(this.mergeCells)},setMergeCells:function(t){var e=this;return this.spanMethod&&(0,d.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]),$(this,t,this.mergeList,this.afterFullData),this.$nextTick().then((function(){return e.updateCellAreas()}))},removeMergeCells:function(t){var e=this;this.spanMethod&&(0,d.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]);var n=G(this,t,this.mergeList,this.afterFullData);return this.$nextTick().then((function(){return e.updateCellAreas(),n}))},getMergeCells:function(){return this.mergeList.slice(0)},clearMergeCells:function(){return this.mergeList=[],this.$nextTick()},handleDefaultMergeFooterItems:function(){this.setMergeFooterItems(this.mergeFooterItems)},setMergeFooterItems:function(t){var e=this;return this.footerSpanMethod&&(0,d.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),$(this,t,this.mergeFooterList,null),this.$nextTick().then((function(){return e.updateCellAreas()}))},removeMergeFooterItems:function(t){var e=this;this.footerSpanMethod&&(0,d.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);var n=G(this,t,this.mergeFooterList,null);return this.$nextTick().then((function(){return e.updateCellAreas(),n}))},getMergeFooterItems:function(){return this.mergeFooterList.slice(0)},clearMergeFooterItems:function(){return this.mergeFooterList=[],this.$nextTick()},updateZindex:function(){this.zIndex?this.tZindex=this.zIndex:this.tZindex<c.default.getLastZIndex()&&(this.tZindex=c.default.nextZIndex())},updateCellAreas:function(){this.mouseConfig&&this.mouseOpts.area&&this.handleUpdateCellAreas&&this.handleUpdateCellAreas()},emitEvent:function(t,e,n){this.$emit(t,Object.assign({$table:this,$grid:this.$xegrid,$event:n},e))},focus:function(){return this.isActivated=!0,this.$nextTick()},blur:function(){return this.isActivated=!1,this.$nextTick()},connect:function(t){return t&&t.syncUpdate?(t.syncUpdate({collectColumn:this.collectColumn,$table:this}),this.$toolbar=t):(0,d.errLog)("vxe.error.barUnableLink"),this.$nextTick()},getCell:function(t,e){var n=this.$refs,r=(0,u.getRowid)(this,t),i=n["".concat(e.fixed||"table","Body")]||n.tableBody;return i&&i.$el?i.$el.querySelector('.vxe-body--row[rowid="'.concat(r,'"] .').concat(e.id)):null},getCellLabel:function(t,e){var n,r=e.formatter,o=c.default.getCellValue(t,e),a=o;if(r){var s,u,l=this.fullAllDataRowMap,d=e.id;if(l.has(t)&&((u=(s=l.get(t)).formatData)||(u=l.get(t).formatData={}),s&&u[d]&&u[d].value===o))return u[d].label;var h={cellValue:o,row:t,rowIndex:this.getRowIndex(t),column:e,columnIndex:this.getColumnIndex(e)};if(i.default.isString(r)){var p=f.formats.get(r);a=p?p(h):""}else if(i.default.isArray(r)){var g=f.formats.get(r[0]);a=g?g.apply(void 0,[h].concat(function(t){if(Array.isArray(t))return v(t)}(n=r.slice(1))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):""}else a=r(h);u&&(u[d]={value:o,label:a})}return a},getSetupOptions:function(){return o.default}};"setFilter,openFilter,clearFilter,getCheckedFilters,closeMenu,setActiveCellArea,getActiveCellArea,getCellAreas,clearCellAreas,copyCellArea,cutCellArea,pasteCellArea,getCopyCellArea,getCopyCellAreas,clearCopyCellArea,setCellAreas,openFind,openReplace,closeFNR,getSelectedCell,clearSelected,insert,insertAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,clearEdit,clearActived,getEditRecord,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell,setSelectCell,clearValidate,fullValidate,validate,openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").forEach((function(t){W[t]=function(){return this["_".concat(t)]?this["_".concat(t)].apply(this,arguments):null}}));var H=W;e.default=H},6130:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=p(n(8478)),i=p(n(5042)),o=p(n(5053)),a=p(n(7829)),s=p(n(7414)),u=p(n(7500)),c=n(6970),l=n(768),f=n(8468),d=p(n(4610)),h=n(5981);function p(t){return t&&t.__esModule?t:{default:t}}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e,n){var r=e._e,i=e.tableData,o=e.tableColumn,a=e.tableGroupColumn,u=e.vSize,c=e.showHeader,l=e.showFooter,f=e.columnStore,d=e.footerTableData,h=f["".concat(n,"List")];return t("div",{class:"vxe-table--fixed-".concat(n,"-wrapper"),ref:"".concat(n,"Container")},[c?t(s.default,{props:{fixedType:n,tableData:i,tableColumn:o,tableGroupColumn:a,size:u,fixedColumn:h},ref:"".concat(n,"Header")}):r(),t("vxe-table-body",{props:{fixedType:n,tableData:i,tableColumn:o,fixedColumn:h,size:u},ref:"".concat(n,"Body")}),l?t("vxe-table-footer",{props:{footerTableData:d,tableColumn:o,fixedColumn:h,fixedType:n,size:u},ref:"".concat(n,"Footer")}):r()])}function b(t,e){var n=e.$scopedSlots,r=e.emptyOpts,a="",s={$table:e};if(n.empty)a=n.empty.call(e,s,t);else{var u=r.name?o.default.renderer.get(r.name):null,l=u?u.renderEmpty:null;a=l?l.call(e,t,r,s):(0,c.getFuncText)(e.emptyText)||i.default.i18n("vxe.table.emptyText")}return a}function x(t){var e=t.$el;e&&e.clientWidth&&e.clientHeight&&t.recalculate()}var w={name:"VxeTable",mixins:[u.default],props:{id:String,data:Array,height:[Number,String],maxHeight:[Number,String],resizable:{type:Boolean,default:function(){return i.default.table.resizable}},stripe:{type:Boolean,default:function(){return i.default.table.stripe}},border:{type:[Boolean,String],default:function(){return i.default.table.border}},round:{type:Boolean,default:function(){return i.default.table.round}},size:{type:String,default:function(){return i.default.table.size||i.default.size}},fit:{type:Boolean,default:function(){return i.default.table.fit}},loading:Boolean,align:{type:String,default:function(){return i.default.table.align}},headerAlign:{type:String,default:function(){return i.default.table.headerAlign}},footerAlign:{type:String,default:function(){return i.default.table.footerAlign}},showHeader:{type:Boolean,default:function(){return i.default.table.showHeader}},highlightCurrentRow:{type:Boolean,default:function(){return i.default.table.highlightCurrentRow}},highlightHoverRow:{type:Boolean,default:function(){return i.default.table.highlightHoverRow}},highlightCurrentColumn:{type:Boolean,default:function(){return i.default.table.highlightCurrentColumn}},highlightHoverColumn:{type:Boolean,default:function(){return i.default.table.highlightHoverColumn}},highlightCell:Boolean,showFooter:Boolean,footerMethod:Function,rowClassName:[String,Function],cellClassName:[String,Function],headerRowClassName:[String,Function],headerCellClassName:[String,Function],footerRowClassName:[String,Function],footerCellClassName:[String,Function],cellStyle:[Object,Function],headerCellStyle:[Object,Function],footerCellStyle:[Object,Function],rowStyle:[Object,Function],headerRowStyle:[Object,Function],footerRowStyle:[Object,Function],mergeCells:Array,mergeFooterItems:Array,spanMethod:Function,footerSpanMethod:Function,showOverflow:{type:[Boolean,String],default:function(){return i.default.table.showOverflow}},showHeaderOverflow:{type:[Boolean,String],default:function(){return i.default.table.showHeaderOverflow}},showFooterOverflow:{type:[Boolean,String],default:function(){return i.default.table.showFooterOverflow}},columnKey:Boolean,rowKey:Boolean,rowId:{type:String,default:function(){return i.default.table.rowId}},zIndex:Number,emptyText:{type:String,default:function(){return i.default.table.emptyText}},keepSource:{type:Boolean,default:function(){return i.default.table.keepSource}},autoResize:{type:Boolean,default:function(){return i.default.table.autoResize}},syncResize:[Boolean,String,Number],columnConfig:Object,rowConfig:Object,resizableConfig:Object,seqConfig:Object,sortConfig:Object,filterConfig:Object,radioConfig:Object,checkboxConfig:Object,tooltipConfig:Object,exportConfig:[Boolean,Object],importConfig:[Boolean,Object],printConfig:Object,expandConfig:Object,treeConfig:[Boolean,Object],menuConfig:[Boolean,Object],contextMenu:[Boolean,Object],mouseConfig:Object,areaConfig:Object,keyboardConfig:Object,clipConfig:Object,fnrConfig:Object,editConfig:[Boolean,Object],validConfig:Object,editRules:Object,emptyRender:[Boolean,Object],customConfig:[Boolean,Object],scrollX:Object,scrollY:Object,animat:{type:Boolean,default:function(){return i.default.table.animat}},delayHover:{type:Number,default:function(){return i.default.table.delayHover}},params:Object},components:{VxeTableBody:a.default},provide:function(){return{$xetable:this,xecolgroup:null}},inject:{$xegrid:{default:null}},data:function(){return{tId:"".concat(r.default.uniqueId()),staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,selection:[],currentRow:null,currentColumn:null,selectRow:null,footerTableData:[],expandColumn:null,hasFixedColumn:!1,treeNodeColumn:null,rowExpandeds:[],expandLazyLoadeds:[],treeExpandeds:[],treeLazyLoadeds:[],treeIndeterminates:[],mergeList:[],mergeFooterList:[],initStore:{filter:!1,import:!1,export:!1},filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],scaleList:[],scaleMinList:[],autoList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},insertList:[],removeList:[]},tooltipStore:{row:null,column:null,visible:!1,currOpts:null},validStore:{visible:!1,row:null,column:null,content:"",rule:null,isArrow:!1},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasTree:!1,hasMerge:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isFooter:!1}}},computed:{validOpts:function(){return Object.assign({message:"default"},i.default.table.validConfig,this.validConfig)},sXOpts:function(){return Object.assign({},i.default.table.scrollX,this.scrollX)},sYOpts:function(){return Object.assign({},i.default.table.scrollY,this.scrollY)},rowHeightMaps:function(){return{default:48,medium:44,small:40,mini:36}},columnOpts:function(){return Object.assign({},i.default.table.columnConfig,this.columnConfig)},rowOpts:function(){return Object.assign({},i.default.table.rowConfig,this.rowConfig)},resizableOpts:function(){return Object.assign({},i.default.table.resizableConfig,this.resizableConfig)},seqOpts:function(){return Object.assign({startIndex:0},i.default.table.seqConfig,this.seqConfig)},radioOpts:function(){return Object.assign({},i.default.table.radioConfig,this.radioConfig)},checkboxOpts:function(){return Object.assign({},i.default.table.checkboxConfig,this.checkboxConfig)},tooltipOpts:function(){return Object.assign({},i.default.tooltip,i.default.table.tooltipConfig,this.tooltipConfig)},tipConfig:function(){return v(v({},this.tooltipOpts),this.tooltipStore.currOpts)},validTipOpts:function(){return Object.assign({isArrow:!1},this.tooltipOpts)},editOpts:function(){return Object.assign({},i.default.table.editConfig,this.editConfig)},sortOpts:function(){return Object.assign({orders:["asc","desc",null]},i.default.table.sortConfig,this.sortConfig)},filterOpts:function(){return Object.assign({},i.default.table.filterConfig,this.filterConfig)},mouseOpts:function(){return Object.assign({},i.default.table.mouseConfig,this.mouseConfig)},areaOpts:function(){return Object.assign({},i.default.table.areaConfig,this.areaConfig)},keyboardOpts:function(){return Object.assign({},i.default.table.keyboardConfig,this.keyboardConfig)},clipOpts:function(){return Object.assign({},i.default.table.clipConfig,this.clipConfig)},fnrOpts:function(){return Object.assign({},i.default.table.fnrConfig,this.fnrConfig)},hasTip:function(){return o.default._tooltip},headerCtxMenu:function(){var t=this.ctxMenuOpts.header;return t&&t.options?t.options:[]},bodyCtxMenu:function(){var t=this.ctxMenuOpts.body;return t&&t.options?t.options:[]},footerCtxMenu:function(){var t=this.ctxMenuOpts.footer;return t&&t.options?t.options:[]},isCtxMenu:function(){return!(!this.contextMenu&&!this.menuConfig||!(0,c.isEnableConf)(this.ctxMenuOpts)||!(this.headerCtxMenu.length||this.bodyCtxMenu.length||this.footerCtxMenu.length))},ctxMenuOpts:function(){return Object.assign({},i.default.table.menuConfig,this.contextMenu,this.menuConfig)},ctxMenuList:function(){var t=[];return this.ctxMenuStore.list.forEach((function(e){e.forEach((function(e){t.push(e)}))})),t},exportOpts:function(){return Object.assign({},i.default.table.exportConfig,this.exportConfig)},importOpts:function(){return Object.assign({},i.default.table.importConfig,this.importConfig)},printOpts:function(){return Object.assign({},i.default.table.printConfig,this.printConfig)},expandOpts:function(){return Object.assign({},i.default.table.expandConfig,this.expandConfig)},treeOpts:function(){return Object.assign({},i.default.table.treeConfig,this.treeConfig)},emptyOpts:function(){return Object.assign({},i.default.table.emptyRender,this.emptyRender)},cellOffsetWidth:function(){return this.border?Math.max(2,Math.ceil(this.scrollbarWidth/this.tableColumn.length)):1},customOpts:function(){return Object.assign({},i.default.table.customConfig,this.customConfig)},tableBorder:function(){var t=this.border;return!0===t?"full":t||"default"},isAllCheckboxDisabled:function(){var t=this.tableFullData,e=this.tableData,n=(this.treeConfig,this.checkboxOpts),r=n.strict,i=n.checkMethod;return!!r&&(!e.length&&!t.length||!!i&&t.every((function(t){return!i({row:t})})))}},watch:{data:function(t){var e=this,n=this.inited,r=this.initStatus;this.loadTableData(t).then((function(){e.inited=!0,e.initStatus=!0,r||e.handleLoadDefaults(),n||e.handleInitDefaults(),(e.scrollXLoad||e.scrollYLoad)&&e.expandColumn&&(0,h.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),e.recalculate()}))},staticColumns:function(t){this.handleColumn(t)},tableColumn:function(){this.analyColumnWidth()},showHeader:function(){var t=this;this.$nextTick((function(){t.recalculate(!0).then((function(){return t.refreshScroll()}))}))},showFooter:function(){var t=this;this.$nextTick((function(){t.recalculate(!0).then((function(){return t.refreshScroll()}))}))},height:function(){var t=this;this.$nextTick((function(){return t.recalculate(!0)}))},maxHeight:function(){var t=this;this.$nextTick((function(){return t.recalculate(!0)}))},syncResize:function(t){var e=this;t&&(x(this),this.$nextTick((function(){x(e),setTimeout((function(){return x(e)}))})))},mergeCells:function(t){var e=this;this.clearMergeCells(),this.$nextTick((function(){return e.setMergeCells(t)}))},mergeFooterItems:function(t){var e=this;this.clearMergeFooterItems(),this.$nextTick((function(){return e.setMergeFooterItems(t)}))}},created:function(){var t=this,e=Object.assign(this,{tZindex:0,elemStore:{},scrollXStore:{},scrollYStore:{},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},tableFullData:[],afterFullData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowMap:new Map,fullAllDataRowIdData:{},fullDataRowMap:new Map,fullDataRowIdData:{},fullColumnMap:new Map,fullColumnIdData:{},fullColumnFieldData:{}}),n=e.scrollXStore,r=e.sYOpts,i=e.scrollYStore,o=e.data;e.editOpts,e.treeOpts,e.treeConfig,e.showOverflow,e.rowOpts,Object.assign(i,{startIndex:0,endIndex:1,visibleSize:0,adaptive:!1!==r.adaptive}),Object.assign(n,{startIndex:0,endIndex:1,visibleSize:0}),this.loadTableData(o).then((function(){o&&o.length&&(t.inited=!0,t.initStatus=!0,t.handleLoadDefaults(),t.handleInitDefaults()),t.updateStyle()})),f.GlobalEvent.on(this,"paste",this.handleGlobalPasteEvent),f.GlobalEvent.on(this,"copy",this.handleGlobalCopyEvent),f.GlobalEvent.on(this,"cut",this.handleGlobalCutEvent),f.GlobalEvent.on(this,"mousedown",this.handleGlobalMousedownEvent),f.GlobalEvent.on(this,"blur",this.handleGlobalBlurEvent),f.GlobalEvent.on(this,"mousewheel",this.handleGlobalMousewheelEvent),f.GlobalEvent.on(this,"keydown",this.handleGlobalKeydownEvent),f.GlobalEvent.on(this,"resize",this.handleGlobalResizeEvent),f.GlobalEvent.on(this,"contextmenu",this.handleGlobalContextmenuEvent),this.preventEvent(null,"created")},mounted:function(){var t=this;if(this.autoResize){var e=(0,l.createResizeEvent)((function(){return t.recalculate(!0)}));e.observe(this.$el),e.observe(this.getParentElem()),this.$resize=e}this.preventEvent(null,"mounted")},activated:function(){var t=this;this.recalculate().then((function(){return t.refreshScroll()})),this.preventEvent(null,"activated")},deactivated:function(){this.preventEvent(null,"deactivated")},beforeDestroy:function(){this.$resize&&this.$resize.disconnect(),this.closeFilter(),this.closeMenu(),this.preventEvent(null,"beforeDestroy")},destroyed:function(){f.GlobalEvent.off(this,"paste"),f.GlobalEvent.off(this,"copy"),f.GlobalEvent.off(this,"cut"),f.GlobalEvent.off(this,"mousedown"),f.GlobalEvent.off(this,"blur"),f.GlobalEvent.off(this,"mousewheel"),f.GlobalEvent.off(this,"keydown"),f.GlobalEvent.off(this,"resize"),f.GlobalEvent.off(this,"contextmenu"),this.preventEvent(null,"destroyed")},render:function(t){var e=this._e,n=this.tId,r=this.tableData,i=this.tableColumn,o=this.tableGroupColumn,a=this.isGroup,u=this.loading,c=this.stripe,l=this.showHeader,f=this.height,d=this.tableBorder,h=this.treeOpts,p=this.treeConfig,g=this.mouseConfig,v=this.mouseOpts,m=this.vSize,x=this.validOpts,w=this.showFooter,_=this.overflowX,E=this.overflowY,S=this.scrollXLoad,C=this.scrollYLoad,k=this.scrollbarHeight,M=this.highlightCell,O=this.highlightHoverRow,T=this.highlightHoverColumn,A=this.editConfig,N=this.validTipOpts,I=this.initStore,P=this.columnStore,D=this.filterStore,L=this.ctxMenuStore,R=this.ctxMenuOpts,j=this.footerTableData,B=this.hasTip,F=this.columnOpts,z=this.rowOpts,$=P.leftList,G=P.rightList;return t("div",{class:["vxe-table","vxe-table--render-default","tid_".concat(n),m?"size--".concat(m):"","border--".concat(d),{"vxe-editable":!!A,"cell--highlight":M,"cell--selected":g&&v.selected,"cell--area":g&&v.area,"row--highlight":z.isHover||O,"column--highlight":F.isHover||T,"is--header":l,"is--footer":w,"is--group":a,"is--tree-line":p&&h.line,"is--fixed-left":$.length,"is--fixed-right":G.length,"is--animat":!!this.animat,"is--round":this.round,"is--stripe":!p&&c,"is--loading":u,"is--empty":!u&&!r.length,"is--scroll-y":E,"is--scroll-x":_,"is--virtual-x":S,"is--virtual-y":C}],on:{keydown:this.keydownEvent}},[t("div",{class:"vxe-table-slots",ref:"hideColumn"},this.$slots.default),t("div",{class:"vxe-table--render-wrapper"},[t("div",{class:"vxe-table--main-wrapper"},[l?t(s.default,{ref:"tableHeader",props:{tableData:r,tableColumn:i,tableGroupColumn:o,size:m}}):e(),t("vxe-table-body",{ref:"tableBody",props:{tableData:r,tableColumn:i,size:m}}),w?t("vxe-table-footer",{ref:"tableFooter",props:{footerTableData:j,tableColumn:i,size:m}}):e()]),t("div",{class:"vxe-table--fixed-wrapper"},[$&&$.length&&_?y(t,this,"left"):e(),G&&G.length&&_?y(t,this,"right"):e()])]),t("div",{ref:"emptyPlaceholder",class:"vxe-table--empty-placeholder"},[t("div",{class:"vxe-table--empty-content"},b(t,this))]),t("div",{class:"vxe-table--border-line"}),t("div",{class:"vxe-table--resizable-bar",style:_?{"padding-bottom":"".concat(k,"px")}:null,ref:"resizeBar"}),t("div",{class:["vxe-table--loading vxe-loading",{"is--visible":u}]},[t("div",{class:"vxe-loading--spinner"})]),I.filter?t("vxe-table-filter",{ref:"filterWrapper",props:{filterStore:D}}):e(),I.import&&this.importConfig?t("vxe-import-panel",{props:{defaultOptions:this.importParams,storeData:this.importStore}}):e(),I.export&&(this.exportConfig||this.printConfig)?t("vxe-export-panel",{props:{defaultOptions:this.exportParams,storeData:this.exportStore}}):e(),L.visible&&this.isCtxMenu?t("vxe-table-context-menu",{ref:"ctxWrapper",props:{ctxMenuStore:L,ctxMenuOpts:R}}):e(),B?t("vxe-tooltip",{ref:"commTip",props:{isArrow:!1,enterable:!1}}):e(),B?t("vxe-tooltip",{ref:"tooltip",props:this.tipConfig}):e(),B&&this.editRules&&x.showMessage&&("default"===x.message?!f:"tooltip"===x.message)?t("vxe-tooltip",{ref:"validTip",class:"vxe-table--valid-error",props:"tooltip"===x.message||1===r.length?N:null}):e()])},methods:d.default};e.default=w},9211:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calcTreeLine=function(t,e,n){var r=t.$table,i=1;return n&&(i=p(e[n-1],t)),r.rowHeight*i-(n?1:12-g(r))},e.clearTableAllStatus=function(t){return t.clearFilter&&r.default._filter&&t.clearFilter(),v(t)},e.clearTableDefaultStatus=v,e.colToVisible=function(t,e){var n=t.$refs.tableBody,r=n?n.$el:null;if(r){var i=r.querySelector(".".concat(e.id));if(i){var o=r.clientWidth,a=r.scrollLeft,s=i.offsetLeft+(i.offsetParent?i.offsetParent.offsetLeft:0),u=i.clientWidth;if(s<a||s>a+o)return t.scrollTo(s);if(s+u>=o+a)return t.scrollTo(a+u)}else if(t.scrollXLoad){for(var c=t.visibleColumn,l=0,f=0;f<c.length&&c[f]!==e;f++)l+=c[f].renderWidth;return t.scrollTo(l)}}return Promise.resolve()},e.getColMinWidth=function(t){var e=t.$table,n=t.column,r=t.cell,o=e.showHeaderOverflow,s=e.resizableOpts.minWidth;if(s){var u=i.default.isFunction(s)?s(t):s;if("auto"!==u)return Math.max(1,i.default.toNumber(u))}var c=n.showHeaderOverflow,l=n.minWidth,p=i.default.isUndefined(c)||i.default.isNull(c)?o:c,g="title"===p||(!0===p||"tooltip"===p)||"ellipsis"===p,v=i.default.floor(1.6*(i.default.toNumber(getComputedStyle(r).fontSize)||14))+(f(r)+f(h(r,"")));if(g){var m=f(h(r,"--title>.vxe-cell--checkbox")),y=d(h(r,">.vxe-cell--required-icon")),b=d(h(r,">.vxe-cell--edit-icon")),x=d(h(r,">.vxe-cell-help-icon")),w=d(h(r,">.vxe-cell--sort"));v+=m+y+b+x+d(h(r,">.vxe-cell--filter"))+w}if(l){var _=e.$refs.tableBody,E=_?_.$el:null;if(E){if(a.default.isScale(l)){var S=(E.clientWidth-1)/100;return Math.max(v,Math.floor(i.default.toInteger(l)*S))}if(a.default.isPx(l))return Math.max(v,i.default.toInteger(l))}}return v},e.getColumnConfig=function(t,e,n){return m(e)?e:new o.ColumnInfo(t,e,n)},e.getOffsetSize=g,e.getRowid=l,e.getRowkey=c,e.handleFieldOrColumn=function(t,e){return e?i.default.isString(e)?t.getColumnByField(e):e:null},e.isColumnInfo=m,e.mergeBodyMethod=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r],o=i.row,a=i.col,s=i.rowspan,u=i.colspan;if(a>-1&&o>-1&&s&&u){if(o===e&&a===n)return{rowspan:s,colspan:u};if(e>=o&&e<o+s&&n>=a&&n<a+u)return{rowspan:0,colspan:0}}}},e.removeScrollListener=function(t){t&&t._onscroll&&(t.onscroll=null)},e.restoreScrollListener=function(t){t&&t._onscroll&&(t.onscroll=t._onscroll)},e.restoreScrollLocation=function(t,e,n){return t.clearScroll().then((function(){if(e||n)return t.lastScrollLeft=0,t.lastScrollTop=0,t.scrollTo(e,n)}))},e.rowToVisible=function(t,e){var n=t.$refs.tableBody,r=n?n.$el:null;if(r){var i=r.querySelector('[rowid="'.concat(l(t,e),'"]'));if(i){var o=r.clientHeight,a=r.scrollTop,s=i.offsetTop+(i.offsetParent?i.offsetParent.offsetTop:0),u=i.clientHeight;if(s<a||s>a+o)return t.scrollTo(null,s);if(s+u>=o+a)return t.scrollTo(null,a+u)}else if(t.scrollYLoad)return t.scrollTo(null,(t.afterFullData.indexOf(e)-1)*t.scrollYStore.rowHeight)}return Promise.resolve()},e.toFilters=function(t){return t&&i.default.isArray(t)?t.map((function(t){var e=t.label,n=t.value,r=t.data,i=t.resetValue,o=t.checked;return{label:e,value:n,data:r,resetValue:i,checked:!!o,_checked:!!o}})):t},e.toTreePathSeq=function(t){return t.map((function(t,e){return e%2==0?Number(t)+1:"."})).join("")};var r=s(n(5053)),i=s(n(8478)),o=n(2159),a=s(n(1455));function s(t){return t&&t.__esModule?t:{default:t}}var u={mini:3,small:2,medium:1};function c(t){return t.rowOpts.keyField||t.rowId||"_X_ROW_KEY"}function l(t,e){var n=i.default.get(e,c(t));return i.default.eqNull(n)?"":encodeURIComponent(n)}function f(t){if(t){var e=getComputedStyle(t);return i.default.toNumber(e.paddingLeft)+i.default.toNumber(e.paddingRight)}return 0}function d(t){if(t){var e=getComputedStyle(t),n=i.default.toNumber(e.marginLeft),r=i.default.toNumber(e.marginRight);return t.offsetWidth+n+r}return 0}function h(t,e){return t.querySelector(".vxe-cell"+e)}function p(t,e){var n=1;if(!t)return n;var r=e.$table,i=t[r.treeOpts.children];if(r.isTreeExpandByRow(t))for(var o=0;o<i.length;o++)n+=p(i[o],e);return n}function g(t){return u[t.vSize]||0}function v(t){return t.initStatus=!1,t.clearSort(),t.clearCurrentRow(),t.clearCurrentColumn(),t.clearRadioRow(),t.clearRadioReserve(),t.clearCheckboxRow(),t.clearCheckboxReserve(),t.clearRowExpand(),t.clearTreeExpand(),t.clearTreeExpandReserve(),t.clearActived&&r.default._edit&&t.clearActived(),t.clearSelected&&(t.keyboardConfig||t.mouseConfig)&&t.clearSelected(),t.clearCellAreas&&t.mouseConfig&&(t.clearCellAreas(),t.clearCopyCellArea()),t.clearScroll()}function m(t){return t instanceof o.ColumnInfo}},389:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Textarea=void 0;var r,i=(r=n(3100))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Textarea=o;var a=o;e.default=a},3100:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=u(n(8478)),o=u(n(5042)),a=u(n(7500)),s=n(6970);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={name:"VxeTextarea",mixins:[a.default],model:{prop:"value",event:"modelValue"},props:{value:[String,Number],immediate:{type:Boolean,default:!0},name:String,readonly:Boolean,disabled:Boolean,placeholder:String,maxlength:[String,Number],rows:{type:[String,Number],default:2},cols:{type:[String,Number],default:null},showWordCount:Boolean,countMethod:Function,autosize:[Boolean,Object],form:String,resize:{type:String,default:function(){return o.default.textarea.resize}},className:String,size:{type:String,default:function(){return o.default.textarea.size||o.default.size}}},inject:{$xeform:{default:null},$xeformiteminfo:{default:null}},data:function(){return{inputValue:this.value}},computed:{inputCount:function(){return i.default.getSize(this.inputValue)},isCountError:function(){return this.maxlength&&this.inputCount>i.default.toNumber(this.maxlength)},defaultEvents:function(){var t=this,e={};return i.default.each(this.$listeners,(function(n,r){-1===["input","change","blur"].indexOf(r)&&(e[r]=t.triggerEvent)})),e.input=this.inputEvent,e.change=this.changeEvent,e.blur=this.blurEvent,e},sizeOpts:function(){return Object.assign({minRows:1,maxRows:10},o.default.textarea.autosize,this.autosize)}},watch:{value:function(t){this.inputValue=t,this.updateAutoTxt()}},mounted:function(){this.autosize&&(this.updateAutoTxt(),this.handleResize())},render:function(t){var e,n=this.className,r=this.defaultEvents,o=this.inputValue,a=this.vSize,u=this.name,l=this.form,f=this.resize,d=this.placeholder,h=this.readonly,p=this.disabled,g=this.maxlength,v=this.autosize,m=this.showWordCount,y=this.countMethod,b=this.rows,x=this.cols,w={name:u,form:l,placeholder:d,maxlength:g,readonly:h,disabled:p,rows:b,cols:x};return d&&(w.placeholder=(0,s.getFuncText)(d)),t("div",{class:["vxe-textarea",n,(e={},c(e,"size--".concat(a),a),c(e,"is--autosize",v),c(e,"is--disabled",p),c(e,"def--rows",!i.default.eqNull(b)),c(e,"def--cols",!i.default.eqNull(x)),e)]},[t("textarea",{ref:"textarea",class:"vxe-textarea--inner",domProps:{value:o},attrs:w,style:f?{resize:f}:null,on:r}),m?t("span",{class:["vxe-textarea--count",{"is--error":this.isCountError}]},y?"".concat(y({value:o})):"".concat(this.inputCount).concat(g?"/".concat(g):"")):null])},methods:{focus:function(){return this.$refs.textarea.focus(),this.$nextTick()},blur:function(){return this.$refs.textarea.blur(),this.$nextTick()},triggerEvent:function(t){var e=this.inputValue;this.$emit(t.type,{value:e,$event:t})},emitUpdate:function(t,e){this.inputValue=t,this.$emit("modelValue",t),this.value!==t&&(this.$emit("change",{value:t,$event:e}),this.$xeform&&this.$xeformiteminfo&&this.$xeform.triggerItemEvent(e,this.$xeformiteminfo.itemConfig.field,t))},inputEvent:function(t){var e=this.immediate,n=t.target.value;this.inputValue=n,e&&this.emitUpdate(n,t),this.handleResize(),this.triggerEvent(t)},changeEvent:function(t){this.immediate?this.triggerEvent(t):this.emitUpdate(this.inputValue,t)},blurEvent:function(t){var e=this.inputValue;this.immediate||this.emitUpdate(e,t),this.$emit("blur",{value:e,$event:t})},updateAutoTxt:function(){var t=this.$refs,e=this.inputValue,n=this.size;if(this.autosize){r||(r=document.createElement("div")),r.parentNode||document.body.appendChild(r);var i=t.textarea,o=getComputedStyle(i);r.className=["vxe-textarea--autosize",n?"size--".concat(n):""].join(" "),r.style.width="".concat(i.clientWidth,"px"),r.style.padding=o.padding,r.innerHTML=(""+(e||"")).replace(/\n$/,"\n")}},handleResize:function(){var t=this;this.autosize&&this.$nextTick((function(){var e=t.$refs,n=t.sizeOpts,o=n.minRows,a=n.maxRows,s=e.textarea,u=r.clientHeight,c=getComputedStyle(s),l=i.default.toNumber(c.lineHeight),f=i.default.toNumber(c.paddingTop)+i.default.toNumber(c.paddingBottom)+i.default.toNumber(c.borderTopWidth)+i.default.toNumber(c.borderBottomWidth),d=(u-f)/l,h=d&&/[0-9]/.test(d)?d:Math.floor(d)+1,p=h;h<o?p=o:h>a&&(p=a),s.style.height="".concat(p*l+f,"px")}))}}};e.default=l},471:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Toolbar=void 0;var r,i=(r=n(3589))&&r.__esModule?r:{default:r},o=Object.assign(i.default,{install:function(t){t.component(i.default.name,i.default)}});e.Toolbar=o;var a=o;e.default=a},3589:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=f(n(8478)),i=f(n(5042)),o=f(n(5053)),a=f(n(7500)),s=f(n(6970)),u=f(n(1455)),c=n(8468),l=n(5981);function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t,e,n,r){var i=e._e,o=n.dropdowns;return o?o.map((function(n){return!1===n.visible?i():t("vxe-button",{on:{click:function(t){return r?e.btnEvent(t,n):e.tolEvent(t,n)}},props:{disabled:n.disabled,loading:n.loading,type:n.type,icon:n.icon,circle:n.circle,round:n.round,status:n.status,content:n.name}})})):[]};function p(t,e){var n=e._e,r=e.$scopedSlots,i=e.$xegrid,a=e.$xetable,s=e.buttons,u=void 0===s?[]:s,c=r.buttons;return c?c.call(e,{$grid:i,$table:a},t):u.map((function(r){var s=r.dropdowns,u=r.buttonRender,c=u?o.default.renderer.get(u.name):null;if(!1===r.visible)return n();if(c){var l=c.renderToolbarButton||c.renderButton;if(l)return t("span",{class:"vxe-button--item"},l.call(e,t,u,{$grid:i,$table:a,button:r}))}return t("vxe-button",{on:{click:function(t){return e.btnEvent(t,r)}},props:{disabled:r.disabled,loading:r.loading,type:r.type,icon:r.icon,circle:r.circle,round:r.round,status:r.status,content:r.name,destroyOnClose:r.destroyOnClose,placement:r.placement,transfer:r.transfer},scopedSlots:s&&s.length?{dropdowns:function(){return h(t,e,r,!0)}}:null})}))}function g(t,e){var n=e._e,r=e.$scopedSlots,i=e.$xegrid,a=e.$xetable,s=e.tools,u=void 0===s?[]:s,c=r.tools;return c?c.call(e,{$grid:i,$table:a},t):u.map((function(r){var s=r.dropdowns,u=r.toolRender,c=u?o.default.renderer.get(u.name):null;if(!1===r.visible)return n();if(c){var l=c.renderToolbarTool;if(l)return t("span",{class:"vxe-tool--item"},l.call(e,t,u,{$grid:i,$table:a,tool:r}))}return t("vxe-button",{on:{click:function(t){return e.tolEvent(t,r)}},props:{disabled:r.disabled,loading:r.loading,type:r.type,icon:r.icon,circle:r.circle,round:r.round,status:r.status,content:r.name,destroyOnClose:r.destroyOnClose,placement:r.placement,transfer:r.transfer},scopedSlots:s&&s.length?{dropdowns:function(){return h(t,e,r,!1)}}:null})}))}function v(t,e){var n=e.$xetable,o=e.customStore,a=e.customOpts,u=e.columns,c=[],l={},f={},d=n?n.customOpts.checkMethod:null;return"manual"===a.trigger||("hover"===a.trigger?(l.mouseenter=e.handleMouseenterSettingEvent,l.mouseleave=e.handleMouseleaveSettingEvent,f.mouseenter=e.handleWrapperMouseenterEvent,f.mouseleave=e.handleWrapperMouseleaveEvent):l.click=e.handleClickSettingEvent),r.default.eachTree(u,(function(n){var r=s.default.formatText(n.getTitle(),1),i=n.getKey(),o=n.children&&n.children.length,a=!!d&&!d({column:n});(o||i)&&c.push(t("li",{class:["vxe-custom--option","level--".concat(n.level),{"is--group":o,"is--checked":n.visible,"is--indeterminate":n.halfVisible,"is--disabled":a}],attrs:{title:r},on:{click:function(){a||e.changeCustomOption(n)}}},[t("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"}),t("span",{class:"vxe-checkbox--label"},r)]))})),t("div",{class:["vxe-custom--wrapper",{"is--active":o.visible}],ref:"customWrapper"},[t("vxe-button",{props:{circle:!0,icon:a.icon||i.default.icon.TOOLBAR_TOOLS_CUSTOM},attrs:{title:i.default.i18n("vxe.toolbar.custom")},on:l}),t("div",{class:"vxe-custom--option-wrapper"},[t("ul",{class:"vxe-custom--header"},[t("li",{class:["vxe-custom--option",{"is--checked":o.isAll,"is--indeterminate":o.isIndeterminate}],attrs:{title:i.default.i18n("vxe.table.allTitle")},on:{click:e.allCustomEvent}},[t("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),t("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"}),t("span",{class:"vxe-checkbox--label"},i.default.i18n("vxe.toolbar.customAll"))])]),t("ul",{class:"vxe-custom--body",on:f},c),!1===a.isFooter?null:t("div",{class:"vxe-custom--footer"},[t("button",{class:"btn--confirm",on:{click:e.confirmCustomEvent}},i.default.i18n("vxe.toolbar.customConfirm")),t("button",{class:"btn--reset",on:{click:e.resetCustomEvent}},i.default.i18n("vxe.toolbar.customRestore"))])])])}var m={name:"VxeToolbar",mixins:[a.default],props:{loading:Boolean,refresh:[Boolean,Object],import:[Boolean,Object],export:[Boolean,Object],print:[Boolean,Object],zoom:[Boolean,Object],custom:[Boolean,Object],buttons:{type:Array,default:function(){return i.default.toolbar.buttons}},tools:{type:Array,default:function(){return i.default.toolbar.tools}},perfect:{type:Boolean,default:function(){return i.default.toolbar.perfect}},size:{type:String,default:function(){return i.default.toolbar.size||i.default.size}},className:[String,Function]},inject:{$xegrid:{default:null}},data:function(){return{$xetable:null,isRefresh:!1,columns:[],customStore:{isAll:!1,isIndeterminate:!1,visible:!1}}},computed:{refreshOpts:function(){return Object.assign({},i.default.toolbar.refresh,this.refresh)},importOpts:function(){return Object.assign({},i.default.toolbar.import,this.import)},exportOpts:function(){return Object.assign({},i.default.toolbar.export,this.export)},printOpts:function(){return Object.assign({},i.default.toolbar.print,this.print)},zoomOpts:function(){return Object.assign({},i.default.toolbar.zoom,this.zoom)},customOpts:function(){return Object.assign({},i.default.toolbar.custom,this.custom)}},created:function(){var t=this,e=this.refresh,n=this.refreshOpts;this.$nextTick((function(){var r=t.fintTable();!e||t.$xegrid||n.query||(0,l.warnLog)("vxe.error.notFunc",["query"]),r&&r.connect(t)})),c.GlobalEvent.on(this,"mousedown",this.handleGlobalMousedownEvent),c.GlobalEvent.on(this,"blur",this.handleGlobalBlurEvent)},destroyed:function(){c.GlobalEvent.off(this,"mousedown"),c.GlobalEvent.off(this,"blur")},render:function(t){var e,n=this._e,o=this.$xegrid,a=this.perfect,s=this.loading,u=this.importOpts,c=this.exportOpts,l=this.refresh,f=this.refreshOpts,h=this.zoom,m=this.zoomOpts,y=this.custom,b=this.vSize,x=this.className;return t("div",{class:["vxe-toolbar",x?r.default.isFunction(x)?x({$toolbar:this}):x:"",(e={},d(e,"size--".concat(b),b),d(e,"is--perfect",a),d(e,"is--loading",s),e)]},[t("div",{class:"vxe-buttons--wrapper"},p(t,this)),t("div",{class:"vxe-tools--wrapper"},g(t,this)),t("div",{class:"vxe-tools--operate"},[this.import?t("vxe-button",{props:{circle:!0,icon:u.icon||i.default.icon.TOOLBAR_TOOLS_IMPORT},attrs:{title:i.default.i18n("vxe.toolbar.import")},on:{click:this.importEvent}}):n(),this.export?t("vxe-button",{props:{circle:!0,icon:c.icon||i.default.icon.TOOLBAR_TOOLS_EXPORT},attrs:{title:i.default.i18n("vxe.toolbar.export")},on:{click:this.exportEvent}}):n(),this.print?t("vxe-button",{props:{circle:!0,icon:this.printOpts.icon||i.default.icon.TOOLBAR_TOOLS_PRINT},attrs:{title:i.default.i18n("vxe.toolbar.print")},on:{click:this.printEvent}}):n(),l?t("vxe-button",{props:{circle:!0,icon:this.isRefresh?f.iconLoading||i.default.icon.TOOLBAR_TOOLS_REFRESH_LOADING:f.icon||i.default.icon.TOOLBAR_TOOLS_REFRESH},attrs:{title:i.default.i18n("vxe.toolbar.refresh")},on:{click:this.refreshEvent}}):n(),h&&o?t("vxe-button",{props:{circle:!0,icon:o.isMaximized()?m.iconOut||i.default.icon.TOOLBAR_TOOLS_ZOOM_OUT:m.iconIn||i.default.icon.TOOLBAR_TOOLS_ZOOM_IN},attrs:{title:i.default.i18n("vxe.toolbar.zoom".concat(o.isMaximized()?"Out":"In"))},on:{click:o.triggerZoomEvent}}):n(),y?v(t,this):n()])])},methods:{syncUpdate:function(t){var e=t.collectColumn,n=t.$table;this.$xetable=n,this.columns=e},fintTable:function(){var t=this.$parent.$children,e=t.indexOf(this);return r.default.find(t,(function(t,n){return t&&t.loadData&&n>e&&"vxe-table"===t.$vnode.componentOptions.tag}))},checkTable:function(){if(this.$xetable)return!0;(0,l.errLog)("vxe.error.barUnableLink")},showCustom:function(){this.customStore.visible=!0,this.checkCustomStatus()},closeCustom:function(){var t=this.custom,e=this.customStore;e.visible&&(e.visible=!1,t&&!e.immediate&&this.handleTableCustom())},confirmCustomEvent:function(t){this.closeCustom(),this.emitCustomEvent("confirm",t)},customOpenEvent:function(t){var e=this.customStore;this.checkTable()&&(e.visible||(this.showCustom(),this.emitCustomEvent("open",t)))},customColseEvent:function(t){this.customStore.visible&&(this.closeCustom(),this.emitCustomEvent("close",t))},resetCustomEvent:function(t){var e=this.$xetable,n=this.columns,i=e.customOpts.checkMethod;r.default.eachTree(n,(function(t){i&&!i({column:t})||(t.visible=t.defaultVisible,t.halfVisible=!1),t.resizeWidth=0})),e.saveCustomResizable(!0),this.closeCustom(),this.emitCustomEvent("reset",t)},emitCustomEvent:function(t,e){var n=this.$xetable,r=this.$xegrid;(r||n).$emit("custom",{type:t,$table:n,$grid:r,$event:e})},changeCustomOption:function(t){var e=!t.visible;r.default.eachTree([t],(function(t){t.visible=e,t.halfVisible=!1})),this.handleOptionCheck(t),this.custom&&this.customOpts.immediate&&this.handleTableCustom(),this.checkCustomStatus()},handleOptionCheck:function(t){var e=r.default.findTree(this.columns,(function(e){return e===t}));if(e&&e.parent){var n=e.parent;n.children&&n.children.length&&(n.visible=n.children.every((function(t){return t.visible})),n.halfVisible=!n.visible&&n.children.some((function(t){return t.visible||t.halfVisible})),this.handleOptionCheck(n))}},handleTableCustom:function(){this.$xetable.handleCustom()},checkCustomStatus:function(){var t=this.$xetable,e=this.columns,n=t.customOpts.checkMethod;this.customStore.isAll=e.every((function(t){return!!n&&!n({column:t})||t.visible})),this.customStore.isIndeterminate=!this.customStore.isAll&&e.some((function(t){return(!n||n({column:t}))&&(t.visible||t.halfVisible)}))},allCustomEvent:function(){var t=this.$xetable,e=this.columns,n=this.customStore,i=t.customOpts.checkMethod,o=!n.isAll;r.default.eachTree(e,(function(t){i&&!i({column:t})||(t.visible=o,t.halfVisible=!1)})),n.isAll=o,this.checkCustomStatus()},handleGlobalMousedownEvent:function(t){u.default.getEventTargetNode(t,this.$refs.customWrapper).flag||this.customColseEvent(t)},handleGlobalBlurEvent:function(t){this.customColseEvent(t)},handleClickSettingEvent:function(t){this.customStore.visible?this.customColseEvent(t):this.customOpenEvent(t)},handleMouseenterSettingEvent:function(t){this.customStore.activeBtn=!0,this.customOpenEvent(t)},handleMouseleaveSettingEvent:function(t){var e=this,n=this.customStore;n.activeBtn=!1,setTimeout((function(){n.activeBtn||n.activeWrapper||e.customColseEvent(t)}),300)},handleWrapperMouseenterEvent:function(t){this.customStore.activeWrapper=!0,this.customOpenEvent(t)},handleWrapperMouseleaveEvent:function(t){var e=this,n=this.customStore;n.activeWrapper=!1,setTimeout((function(){n.activeBtn||n.activeWrapper||e.customColseEvent(t)}),300)},refreshEvent:function(){var t=this,e=this.$xegrid,n=this.refreshOpts;if(!this.isRefresh)if(n.query){this.isRefresh=!0;try{Promise.resolve(n.query()).catch((function(t){return t})).then((function(){t.isRefresh=!1}))}catch(t){this.isRefresh=!1}}else e&&(this.isRefresh=!0,e.commitProxy("reload").catch((function(t){return t})).then((function(){t.isRefresh=!1})))},btnEvent:function(t,e){var n=this.$xegrid,r=this.$xetable,i=e.code;if(i)if(n)n.triggerToolbarBtnEvent(e,t);else{var a=o.default.commands.get(i),s={code:i,button:e,$xegrid:n,$table:r,$event:t};a&&a.call(this,s,t),this.$emit("button-click",s)}},tolEvent:function(t,e){var n=this.$xegrid,r=this.$xetable,i=e.code;if(i)if(n)n.triggerToolbarTolEvent(e,t);else{var a=o.default.commands.get(i),s={code:i,tool:e,$xegrid:n,$table:r,$event:t};a&&a.call(this,s,t),this.$emit("tool-click",s)}},importEvent:function(){this.checkTable()&&this.$xetable.openImport(this.importOpts)},exportEvent:function(){this.checkTable()&&this.$xetable.openExport(this.exportOpts)},printEvent:function(){this.checkTable()&&this.$xetable.openPrint(this.printOpts)}}};e.default=m},1455:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.browse=e.DomTools=void 0,e.getOffsetHeight=function(t){return t?t.offsetHeight:0},e.getPaddingTopBottomSize=function(t){if(t){var e=getComputedStyle(t);return i.default.toNumber(e.paddingTop)+i.default.toNumber(e.paddingBottom)}return 0},e.setScrollLeft=function(t,e){t&&(t.scrollLeft=e)},e.setScrollTop=function(t,e){t&&(t.scrollTop=e)};var r,i=(r=n(8478))&&r.__esModule?r:{default:r},o=i.default.browse();e.browse=o;var a={};function s(t){return a[t]||(a[t]=new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g")),a[t]}function u(t,e,n){if(t){var r=t.parentNode;if(n.top+=t.offsetTop,n.left+=t.offsetLeft,r&&r!==document.documentElement&&r!==document.body&&(n.top-=r.scrollTop,n.left-=r.scrollLeft),(!e||t!==e&&t.offsetParent!==e)&&t.offsetParent)return u(t.offsetParent,e,n)}return n}function c(t){return t&&/^\d+%$/.test(t)}function l(t,e){return t&&t.className&&t.className.match&&t.className.match(s(e))}function f(t,e){t&&l(t,e)&&(t.className=t.className.replace(s(e),""))}function d(){var t=document.documentElement,e=document.body;return{scrollTop:t.scrollTop||e.scrollTop,scrollLeft:t.scrollLeft||e.scrollLeft,visibleHeight:t.clientHeight||e.clientHeight,visibleWidth:t.clientWidth||e.clientWidth}}var h={browse:o,isPx:function(t){return t&&/^\d+(px)?$/.test(t)},isScale:c,hasClass:l,removeClass:f,addClass:function(t,e){t&&!l(t,e)&&(f(t,e),t.className="".concat(t.className," ").concat(e))},updateCellTitle:function(t,e){var n="html"===e.type?t.innerText:t.textContent;t.getAttribute("title")!==n&&t.setAttribute("title",n)},getDomNode:d,getEventTargetNode:function(t,e,n,r){for(var i,o=t.target;o&&o.nodeType&&o!==document;){if(n&&l(o,n)&&(!r||r(o)))i=o;else if(o===e)return{flag:!n||!!i,container:e,targetElem:i};o=o.parentNode}return{flag:!1}},getOffsetPos:function(t,e){return u(t,e,{left:0,top:0})},getAbsolutePos:function(t){var e=t.getBoundingClientRect(),n=e.top,r=e.left,i=d();return{boundingTop:n,top:i.scrollTop+n,boundingLeft:r,left:i.scrollLeft+r,visibleHeight:i.visibleHeight,visibleWidth:i.visibleWidth}},scrollToView:function(t){var e="scrollIntoViewIfNeeded",n="scrollIntoView";t&&(t[e]?t[e]():t[n]&&t[n]())},triggerEvent:function(t,e){t&&t.dispatchEvent(new Event(e))},calcHeight:function(t,e){var n=t[e],r=0;if(n)if("auto"===n)r=t.parentHeight;else{var o=t.getExcludeHeight();r=c(n)?Math.floor((i.default.toInteger(n)||1)/100*t.parentHeight):i.default.toNumber(n),r=Math.max(40,r-o)}return r},isNodeElement:function(t){return t&&1===t.nodeType}};e.DomTools=h;var p=h;e.default=p},8468:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasEventKey=e.GlobalEvent=e.EVENT_KEYS=void 0;var r,i=(r=n(8478))&&r.__esModule?r:{default:r},o=n(1455),a={F2:"F2",ESCAPE:"Escape",ENTER:"Enter",TAB:"Tab",DELETE:"Delete",BACKSPACE:"Backspace",SPACEBAR:" ",CONTEXT_MENU:"ContextMenu",ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown"};e.EVENT_KEYS=a;var s={" ":"Spacebar",Apps:a.CONTEXT_MENU,Del:a.DELETE,Up:a.ARROW_UP,Down:a.ARROW_DOWN,Left:a.ARROW_LEFT,Right:a.ARROW_RIGHT},u=o.browse.firefox?"DOMMouseScroll":"mousewheel",c=[];e.hasEventKey=function(t,e){var n=t.key;return e=e.toLowerCase(),!(!n||e!==n.toLowerCase()&&(!s[n]||s[n].toLowerCase()!==e))};var l={on:function(t,e,n){n&&c.push({comp:t,type:e,cb:n})},off:function(t,e){i.default.remove(c,(function(n){return n.comp===t&&n.type===e}))},trigger:function(t){var e=t.type===u;c.forEach((function(n){var r=n.comp,i=n.type,o=n.cb;t.cancelBubble||(i===t.type||e&&"mousewheel"===i)&&o.call(r,t)}))},eqKeypad:function(t,e){var n=t.key;return e.toLowerCase()===n.toLowerCase()}};e.GlobalEvent=l,o.browse.isDoc&&(o.browse.msie||(document.addEventListener("copy",l.trigger,!1),document.addEventListener("cut",l.trigger,!1),document.addEventListener("paste",l.trigger,!1)),document.addEventListener("keydown",l.trigger,!1),document.addEventListener("contextmenu",l.trigger,!1),window.addEventListener("mousedown",l.trigger,!1),window.addEventListener("blur",l.trigger,!1),window.addEventListener("resize",l.trigger,!1),window.addEventListener(u,i.default.throttle(l.trigger,100,{leading:!0,trailing:!1}),!1))},5981:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.errLog=void 0,e.getLog=o,e.warnLog=void 0;var r,i=(r=n(5042))&&r.__esModule?r:{default:r};function o(t,e){return"[vxe-table v".concat("3.5.8-beta.0","] ",i.default.i18n(t,e))}function a(t){return function(e,n){var r=o(e,n);return console[t](r),r}}var s=a("warn");e.warnLog=s;var u=a("error");e.errLog=u},768:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createResizeEvent=function(t){return window.ResizeObserver?new window.ResizeObserver(t):new d(t)};var r,i=a(n(8478)),o=a(n(5042));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=[],c=500;function l(){u.length&&(u.forEach((function(t){t.tarList.forEach((function(e){var n=e.target,r=e.width,i=e.heighe,o=n.clientWidth,a=n.clientHeight;(o&&r!==o||a&&i!==a)&&(e.width=o,e.heighe=a,setTimeout(t.callback))}))})),f())}function f(){clearTimeout(r),r=setTimeout(l,o.default.resizeInterval||c)}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tarList=[],this.callback=e}var e,n;return e=t,(n=[{key:"observe",value:function(t){var e=this;t&&(this.tarList.some((function(e){return e.target===t}))||this.tarList.push({target:t,width:t.clientWidth,heighe:t.clientHeight}),u.length||f(),u.some((function(t){return t===e}))||u.push(this))}},{key:"unobserve",value:function(t){i.default.remove(u,(function(e){return e.tarList.some((function(e){return e.target===t}))}))}},{key:"disconnect",value:function(){var t=this;i.default.remove(u,(function(e){return e===t}))}}])&&s(e.prototype,n),t}()},6970:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.UtilTools=void 0,e.eqEmptyValue=function(t){return""===t||r.default.eqNull(t)},e.getColumnList=c,e.getFuncText=function(t){return r.default.isFunction(t)?t():i.default.translate?i.default.translate(t):t},e.isEnableConf=function(t){return t&&!1!==t.enabled};var r=o(n(8478)),i=o(n(5042));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n(5981);var s=0,u=1;function c(t){var e=[];return t.forEach((function(t){var n;e.push.apply(e,function(t){if(Array.isArray(t))return a(t)}(n=t.children&&t.children.length?c(t.children):[t])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),e}var l={nextZIndex:function(){return u=i.default.zIndex+s++},getLastZIndex:function(){return u},getColumnList:c,getClass:function(t,e){return t?r.default.isFunction(t)?t(e):t:""},formatText:function(t,e){return""+(""===t||null==t?e?i.default.emptyCell:"":t)},getCellValue:function(t,e){return r.default.get(t,e.property)},setCellValue:function(t,e,n){return r.default.set(t,e.property,n)},assemColumn:function(t){var e=t.$el,n=t.$xetable,r=t.$xecolumn,i=t.columnConfig,o=r?r.columnConfig:null;i.slots=t.$scopedSlots,o?(o.children||(o.children=[]),o.children.splice([].indexOf.call(r.$el.children,e),0,i)):n.staticColumns.splice([].indexOf.call(n.$refs.hideColumn.children,e),0,i)},destroyColumn:function(t){var e=t.$xetable,n=t.columnConfig,i=r.default.findTree(e.staticColumns,(function(t){return t===n}));i&&i.items.splice(i.index,1)},hasChildrenList:function(t){return t&&t.children&&t.children.length>0},parseFile:function(t){var e=t.name,n=r.default.lastIndexOf(e,"."),i=e.substring(n+1,e.length);return{filename:e.substring(0,n),type:i}},isNumVal:function(t){return!isNaN(parseFloat(""+t))}};e.UtilTools=l;var f=l;e.default=f},2566:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Tooltip=void 0;var r=o(n(2757)),i=o(n(5053));function o(t){return t&&t.__esModule?t:{default:t}}var a=Object.assign(r.default,{install:function(t){i.default._tooltip=1,t.component(r.default.name,r.default)}});e.Tooltip=a;var s=a;e.default=s},2757:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(8478)),i=u(n(5042)),o=u(n(7500)),a=u(n(6970)),s=u(n(1455));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){var e=t.$el,n=t.tipTarget,r=t.tipStore;if(n){var i=s.default.getDomNode(),o=i.scrollTop,a=i.scrollLeft,u=i.visibleWidth,c=s.default.getAbsolutePos(n),l=c.top,f=c.left,d=e.offsetHeight,h=e.offsetWidth,p=l-d-6,g=Math.max(6,f+Math.floor((n.offsetWidth-h)/2));g+h+6>a+u&&(g=a+u-h-6),l-d<o+6&&(r.placement="bottom",p=l+n.offsetHeight+6),r.style.top="".concat(p,"px"),r.style.left="".concat(g,"px"),r.arrowStyle.left="".concat(f-g+n.offsetWidth/2,"px")}}function f(t){var e=t.$el,n=t.tipStore,r=t.zIndex;return e.parentNode||document.body.appendChild(e),t.updateValue(!0),t.updateZindex(),n.placement="top",n.style={width:"auto",left:0,top:0,zIndex:r||t.tipZindex},n.arrowStyle={left:"50%"},t.updatePlacement()}function d(t,e){var n=e.$scopedSlots,r=e.useHTML,i=e.tipContent;return n.content?t("div",{key:1,class:"vxe-table--tooltip-content"},n.content.call(this,{})):r?t("div",{key:2,class:"vxe-table--tooltip-content",domProps:{innerHTML:i}}):t("div",{key:3,class:"vxe-table--tooltip-content"},a.default.formatText(i))}var h={name:"VxeTooltip",mixins:[o.default],props:{value:Boolean,size:{type:String,default:function(){return i.default.tooltip.size||i.default.size}},trigger:{type:String,default:function(){return i.default.tooltip.trigger}},theme:{type:String,default:function(){return i.default.tooltip.theme}},content:{type:[String,Number],default:null},useHTML:Boolean,zIndex:[String,Number],isArrow:{type:Boolean,default:!0},enterable:Boolean,enterDelay:{type:Number,default:function(){return i.default.tooltip.enterDelay}},leaveDelay:{type:Number,default:function(){return i.default.tooltip.leaveDelay}}},data:function(){return{isUpdate:!1,visible:!1,tipContent:"",tipActive:!1,tipTarget:null,tipZindex:0,tipStore:{style:{},placement:"",arrowStyle:null}}},watch:{content:function(t){this.tipContent=t},value:function(t){this.isUpdate||this[t?"open":"close"](),this.isUpdate=!1}},created:function(){var t=this;this.showDelayTip=r.default.debounce((function(){t.tipActive&&f(t)}),this.enterDelay,{leading:!1,trailing:!0})},mounted:function(){var t,e=this.$el,n=this.trigger,i=this.content,o=this.value,s=e.parentNode;s&&(this.tipContent=i,this.tipZindex=a.default.nextZIndex(),r.default.arrayEach(e.children,(function(n,r){r>1&&(s.insertBefore(n,e),t||(t=n))})),s.removeChild(e),this.target=t,t&&("hover"===n?(t.onmouseleave=this.targetMouseleaveEvent,t.onmouseenter=this.targetMouseenterEvent):"click"===n&&(t.onclick=this.clickEvent)),o&&this.open())},beforeDestroy:function(){var t=this.$el,e=this.target,n=this.trigger,r=t.parentNode;r&&r.removeChild(t),e&&("hover"===n?(e.onmouseenter=null,e.onmouseleave=null):"click"===n&&(e.onclick=null))},render:function(t){var e,n,r=this.$scopedSlots,i=this.vSize,o=this.theme,a=this.tipActive,s=this.isArrow,u=this.visible,l=this.tipStore,f=this.enterable;return f&&(n={mouseenter:this.wrapperMouseenterEvent,mouseleave:this.wrapperMouseleaveEvent}),t("div",{class:["vxe-table--tooltip-wrapper","theme--".concat(o),(e={},c(e,"size--".concat(i),i),c(e,"placement--".concat(l.placement),l.placement),c(e,"is--enterable",f),c(e,"is--visible",u),c(e,"is--arrow",s),c(e,"is--actived",a),e)],style:l.style,ref:"tipWrapper",on:n},[d(t,this),t("div",{class:"vxe-table--tooltip-arrow",style:l.arrowStyle})].concat(r.default?r.default.call(this,{}):[]))},methods:{open:function(t,e){return this.toVisible(t||this.target,e)},close:function(){return this.tipTarget=null,this.tipActive=!1,Object.assign(this.tipStore,{style:{},placement:"",arrowStyle:null}),this.updateValue(!1),this.$nextTick()},updateValue:function(t){t!==this.visible&&(this.visible=t,this.isUpdate=!0,this.$listeners.input&&this.$emit("input",this.visible))},updateZindex:function(){this.tipZindex<a.default.getLastZIndex()&&(this.tipZindex=a.default.nextZIndex())},toVisible:function(t,e){if(t){var n=this.trigger,r=this.enterDelay;if(this.tipActive=!0,this.tipTarget=t,e&&(this.tipContent=e),!r||"hover"!==n)return f(this);this.showDelayTip()}return this.$nextTick()},updatePlacement:function(){var t=this;return this.$nextTick().then((function(){var e=t.$el;if(t.tipTarget&&e)return l(t),t.$nextTick().then((function(){return l(t)}))}))},isActived:function(){return this.tipActive},setActived:function(t){this.tipActive=!!t},clickEvent:function(){this[this.visible?"close":"open"]()},targetMouseenterEvent:function(){this.open()},targetMouseleaveEvent:function(){var t=this,e=this.trigger,n=this.enterable,r=this.leaveDelay;this.tipActive=!1,n&&"hover"===e?setTimeout((function(){t.tipActive||t.close()}),r):this.close()},wrapperMouseenterEvent:function(){this.tipActive=!0},wrapperMouseleaveEvent:function(){var t=this,e=this.trigger,n=this.enterable,r=this.leaveDelay;this.tipActive=!1,n&&"hover"===e&&setTimeout((function(){t.tipActive||t.close()}),r)}}};e.default=h},5053:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={use:!0,config:!0,t:!0,_t:!0,v:!0,VXETable:!0};e.VXETable=void 0,e._t=x,e.default=e.config=void 0,e.t=b,e.use=v,e.v=void 0;var i=h(n(8478)),o=h(n(5042)),a=n(5769);Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))}));var s=n(651);Object.keys(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===s[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}}))}));var u=n(3436);Object.keys(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===u[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))}));var c=n(9863);Object.keys(c).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===c[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}}))}));var l=n(733);Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===l[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))}));var f=n(8017);Object.keys(f).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===f[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}}))}));var d=n(6970);function h(t){return t&&t.__esModule?t:{default:t}}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(5981);var g=[];function v(t,e){return t&&t.install&&-1===g.indexOf(t)&&(t.install(w,e),g.push(t)),w}function m(t,e){var n=[];return i.default.objectEach(t,(function(t,r){0!==t&&t!==e||n.push(r)})),n}var y=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"zIndex",get:function(){return d.UtilTools.getLastZIndex()}},{key:"nextZIndex",get:function(){return d.UtilTools.nextZIndex()}},{key:"exportTypes",get:function(){return m(o.default.export.types,1)}},{key:"importTypes",get:function(){return m(o.default.export.types,2)}}])&&p(e.prototype,n),t}());function b(t,e){return o.default.i18n(t,e)}function x(t,e){return t?i.default.toValueString(o.default.translate?o.default.translate(t,e):t):""}e.config=y,e.v="v3";var w={v:"v3",version:"3.5.8-beta.0",reg:function(t){w["_".concat(t)]=1},use:v,setup:f.setup,interceptor:a.interceptor,renderer:s.renderer,commands:u.commands,formats:l.formats,menus:c.menus,config:y,t:b,_t:x};e.VXETable=w;var _=w;e.default=_},3436:function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.commands=void 0;var i=new(((r=n(8494))&&r.__esModule?r:{default:r}).default);e.commands=i},5042:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n="vxe-icon--",r={size:null,zIndex:999,version:0,emptyCell:"",table:{fit:!0,showHeader:!0,animat:!0,delayHover:250,autoResize:!0,radioConfig:{strict:!0},checkboxConfig:{strict:!0},tooltipConfig:{enterable:!0},validConfig:{showMessage:!0,message:"default"},sortConfig:{showIcon:!0},filterConfig:{showIcon:!0},treeConfig:{rowField:"id",parentField:"parentId",children:"children",hasChild:"hasChild",mapChildren:"_X_ROW_CHILD",indent:20,showIcon:!0},expandConfig:{showIcon:!0},editConfig:{showIcon:!0,showAsterisk:!0},importConfig:{modes:["insert","covering"]},exportConfig:{modes:["current","selected"]},printConfig:{modes:["current","selected"]},mouseConfig:{extension:!0},keyboardConfig:{isEsc:!0},areaConfig:{selectCellByHeader:!0},clipConfig:{isCopy:!0,isCut:!0,isPaste:!0},fnrConfig:{isFind:!0,isReplace:!0},scrollX:{enabled:!0,gt:60},scrollY:{enabled:!0,gt:100}},export:{types:{}},icon:{TABLE_SORT_ASC:n+"caret-top",TABLE_SORT_DESC:n+"caret-bottom",TABLE_FILTER_NONE:n+"funnel",TABLE_FILTER_MATCH:n+"funnel",TABLE_EDIT:n+"edit-outline",TABLE_HELP:n+"question",TABLE_TREE_LOADED:n+"refresh roll",TABLE_TREE_OPEN:n+"caret-right rotate90",TABLE_TREE_CLOSE:n+"caret-right",TABLE_EXPAND_LOADED:n+"refresh roll",TABLE_EXPAND_OPEN:n+"arrow-right rotate90",TABLE_EXPAND_CLOSE:n+"arrow-right",BUTTON_DROPDOWN:n+"arrow-bottom",BUTTON_LOADING:n+"refresh roll",SELECT_LOADED:n+"refresh roll",SELECT_OPEN:n+"caret-bottom rotate180",SELECT_CLOSE:n+"caret-bottom",PAGER_JUMP_PREV:n+"d-arrow-left",PAGER_JUMP_NEXT:n+"d-arrow-right",PAGER_PREV_PAGE:n+"arrow-left",PAGER_NEXT_PAGE:n+"arrow-right",PAGER_JUMP_MORE:n+"more",INPUT_CLEAR:n+"close",INPUT_PWD:n+"eye-slash",INPUT_SHOW_PWD:n+"eye",INPUT_PREV_NUM:n+"caret-top",INPUT_NEXT_NUM:n+"caret-bottom",INPUT_DATE:n+"calendar",INPUT_SEARCH:n+"search",MODAL_ZOOM_IN:n+"square",MODAL_ZOOM_OUT:n+"zoomout",MODAL_CLOSE:n+"close",MODAL_INFO:n+"info",MODAL_SUCCESS:n+"success",MODAL_WARNING:n+"warning",MODAL_ERROR:n+"error",MODAL_QUESTION:n+"question",MODAL_LOADING:n+"refresh roll",TOOLBAR_TOOLS_REFRESH:n+"refresh",TOOLBAR_TOOLS_REFRESH_LOADING:n+"refresh roll",TOOLBAR_TOOLS_IMPORT:n+"upload",TOOLBAR_TOOLS_EXPORT:n+"download",TOOLBAR_TOOLS_PRINT:n+"print",TOOLBAR_TOOLS_ZOOM_IN:n+"zoomin",TOOLBAR_TOOLS_ZOOM_OUT:n+"zoomout",TOOLBAR_TOOLS_CUSTOM:n+"menu",FORM_PREFIX:n+"question",FORM_SUFFIX:n+"question",FORM_FOLDING:n+"arrow-top rotate180",FORM_UNFOLDING:n+"arrow-top"},grid:{formConfig:{enabled:!0},pagerConfig:{enabled:!0},toolbarConfig:{enabled:!0},proxyConfig:{enabled:!0,autoLoad:!0,message:!0,props:{list:null,result:"result",total:"page.total",message:"message"}}},tooltip:{trigger:"hover",theme:"dark",enterDelay:500,leaveDelay:300},pager:{},form:{validConfig:{showMessage:!0,autoPos:!0},tooltipConfig:{enterable:!0},titleAsterisk:!0},input:{minDate:new Date(1900,0,1),maxDate:new Date(2100,0,1),startDay:1,selectDay:1,digits:2,controls:!0},textarea:{},select:{multiCharOverflow:8},toolbar:{},button:{},radio:{strict:!0},radioButton:{strict:!0},radioGroup:{strict:!0},checkbox:{},switch:{},modal:{top:15,showHeader:!0,minWidth:340,minHeight:140,lockView:!0,mask:!0,duration:3e3,marginSize:0,dblclickZoom:!0,showTitleOverflow:!0,animat:!0,showClose:!0,draggable:!0,storageKey:"VXE_MODAL_POSITION"},list:{scrollY:{enabled:!0,gt:100}},i18n:function(t){return t}};e.default=r},733:function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.formats=void 0;var i=new(((r=n(8494))&&r.__esModule?r:{default:r}).default);e.formats=i},5769:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.interceptor=void 0;var r,i=(r=n(8478))&&r.__esModule?r:{default:r};function o(t){return i.default.toValueString(t).replace("_","").toLowerCase()}n(5981);var a="created,mounted,activated,beforeDestroy,destroyed,event.clearActived,event.clearFilter,event.clearAreas,event.showMenu,event.keydown,event.export,event.import".split(",").map(o),s={},u={mixin:function(t){return i.default.each(t,(function(t,e){return u.add(e,t)})),u},get:function(t){return s[o(t)]||[]},add:function(t,e){if(t=o(t),e&&a.indexOf(t)>-1){var n=s[t];n||(n=s[t]=[]),n.push(e)}return u},delete:function(t,e){var n=s[o(t)];return n&&i.default.remove(n,(function(t){return t===e})),u}};e.interceptor=u},9863:function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.menus=void 0;var i=new(((r=n(8494))&&r.__esModule?r:{default:r}).default);e.menus=i},651:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.renderer=void 0;var i=u(n(8478)),o=u(n(5042)),a=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=s(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(6970));function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(s=function(t){return t?n:e})(t)}function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(5981);var l={transfer:!0},f="value";function d(t){return null==t||""===t}function h(t){var e=t.name;return"vxe-".concat(e.replace("$",""))}function p(t,e,n){t.$panel.changeOption({},e,n)}function g(t){var e=t.name,n=t.attrs;return"input"===e&&(n=Object.assign({type:"text"},n)),n}function v(t){var e=t.name,n=t.immediate,r=t.props;if(!n){if("$input"===e){var i=(r||{}).type;return!(!i||"text"===i||"number"===i||"integer"===i||"float"===i)}return"input"!==e&&"textarea"!==e&&"$textarea"!==e}return n}function m(t,e){return"cell"===e.$type||v(t)}function y(t,e,n,r){var o=e.$table.vSize;return i.default.assign({immediate:v(t)},o?{size:o}:{},l,r,t.props,c({},f,n))}function b(t,e,n,r){var o=e.$table.vSize;return i.default.assign(o?{size:o}:{},l,r,t.props,c({},f,n))}function x(t,e,n,r){var o=e.$form.vSize;return i.default.assign(o?{size:o}:{},l,r,t.props,c({},f,n))}function w(t,e,n,r){var i=e.placeholder;return[t("span",{class:"vxe-cell--label"},i&&d(r)?[t("span",{class:"vxe-cell--placeholder"},a.default.formatText((0,a.getFuncText)(i),1))]:a.default.formatText(r,1))]}function _(t,e){var n=t.nativeEvents,r={};return i.default.objectEach(n,(function(t,n){r[n]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(void 0,[e].concat(r))}})),r}function E(t,e,n,r){var o=t.name,a=t.events,s="input",u=function(t){switch(t.name){case"input":case"textarea":case"$input":case"$textarea":return"input"}return"change"}(t),c=u===s,l={};return i.default.objectEach(a,(function(t,n){l[n]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(void 0,[e].concat(r))}})),n&&(l[s]=function(t){n("$input"===o||"$textarea"===o?t.value:t),a&&a[s]&&a[s](e,t),c&&r&&r(t)}),!c&&r&&(l[u]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(void 0,n),a&&a[u]&&a[u].apply(a,[e].concat(n))}),l}function S(t,e){var n=e.$table,r=e.row,i=e.column,o=t.name,s=i.model,u=m(t,e);return E(t,e,(function(t){u?a.default.setCellValue(r,i,t):(s.update=!0,s.value=t)}),(function(t){u||"$input"!==o&&"$textarea"!==o?n.updateStatus(e):n.updateStatus(e,t.value)}))}function C(t,e,n){return E(t,e,(function(t){n.data=t}),(function(){p(e,!i.default.eqNull(n.data),n)}))}function k(t,e){var n=e.$form,r=e.data,o=e.property;return E(t,e,(function(t){i.default.set(r,o,t)}),(function(){n.updateStatus(e)}))}function M(t,e){var n=e.$table,r=e.row,i=e.column,o=i.model;return E(t,e,(function(n){var s=n.target.value;m(t,e)?a.default.setCellValue(r,i,s):(o.update=!0,o.value=s)}),(function(t){var r=t.target.value;n.updateStatus(e,r)}))}function O(t,e,n){return E(t,e,(function(t){n.data=t.target.value}),(function(){p(e,!i.default.eqNull(n.data),n)}))}function T(t,e){var n=e.$form,r=e.data,o=e.property;return E(t,e,(function(t){var e=t.target.value;i.default.set(r,o,e)}),(function(){n.updateStatus(e)}))}function A(t,e,n){var r=n.row,i=n.column,o=e.name,s=g(e),u=m(e,n)?a.default.getCellValue(r,i):i.model.value;return[t(o,{class:"vxe-default-".concat(o),attrs:s,domProps:{value:u},on:M(e,n)})]}function N(t,e,n){var r=n.row,i=n.column,o=a.default.getCellValue(r,i);return[t(h(e),{props:y(e,n,o),on:S(e,n),nativeOn:_(e,n)})]}function I(t,e,n){return[t("vxe-button",{props:y(e,n),on:E(e,n),nativeOn:_(e,n)})]}function P(t,e,n,r){var i=e.optionGroups,o=e.optionGroupProps,a=void 0===o?{}:o,s=a.options||"options",u=a.label||"label";return i.map((function(i,o){return t("optgroup",{key:o,domProps:{label:i[u]}},r(t,i[s],e,n))}))}function D(t,e,n,r){var i=n.optionProps,o=void 0===i?{}:i,s=r.row,u=r.column,c=o.label||"label",l=o.value||"value",f=o.disabled||"disabled",d=m(n,r)?a.default.getCellValue(s,u):u.model.value;return e.map((function(e,n){return t("option",{key:n,attrs:{value:e[l],disabled:e[f]},domProps:{selected:e[l]==d}},e[c])}))}function L(t){var e=t.option,n=t.row,r=t.column,o=e.data;return i.default.get(n,r.property)==o}function R(t,e,n){return[t("select",{class:"vxe-default-select",attrs:g(e),on:M(e,n)},e.optionGroups?P(t,e,n,D):D(t,e.options,e,n))]}function j(t,e,n){var r=n.row,i=n.column,o=e.options,s=e.optionProps,u=e.optionGroups,c=e.optionGroupProps,l=a.default.getCellValue(r,i);return[t(h(e),{props:y(e,n,l,{options:o,optionProps:s,optionGroups:u,optionGroupProps:c}),on:S(e,n)})]}function B(t,e){var n,r=e.row,o=e.column,a=t.props,s=void 0===a?{}:a,u=t.options,c=t.optionGroups,l=t.optionProps,f=void 0===l?{}:l,h=t.optionGroupProps,p=void 0===h?{}:h,g=i.default.get(r,o.property),v=f.label||"label",m=f.value||"value";return d(g)?null:i.default.map(s.multiple?g:[g],c?function(t){for(var e=p.options||"options",r=0;r<c.length&&!(n=i.default.find(c[r][e],(function(e){return e[m]==t})));r++);return n?n[v]:t}:function(t){return(n=i.default.find(u,(function(e){return e[m]==t})))?n[v]:t}).join(", ")}function F(t,e,n){var r=n.data,o=n.property,a=e.name,s=g(e),u=i.default.get(r,o);return[t(a,{class:"vxe-default-".concat(a),attrs:s,domProps:!s||"input"!==a||"submit"!==s.type&&"reset"!==s.type?{value:u}:null,on:T(e,n)})]}function z(t,e,n){var r=n.data,o=n.property,a=i.default.get(r,o);return[t(h(e),{props:x(e,n,a),on:k(e,n),nativeOn:_(e,n)})]}function $(t,e,n){return[t("vxe-button",{props:x(e,n),on:E(e,n),nativeOn:_(e,n)})]}function G(t,e,n,r){var o=r.data,a=r.property,s=n.optionProps,u=void 0===s?{}:s,c=u.label||"label",l=u.value||"value",f=u.disabled||"disabled",d=i.default.get(o,a);return e.map((function(e,n){return t("option",{key:n,attrs:{value:e[l],disabled:e[f]},domProps:{selected:e[l]==d}},e[c])}))}function V(t){var e=t.row,n=t.column;return t.options.original?a.default.getCellValue(e,n):B(n.editRender||n.cellRender,t)}function U(t,e,n){var r=e.options,o=e.optionProps,a=void 0===o?{}:o,s=n.data,u=n.property,c=a.label||"label",l=a.value||"value",f=a.disabled||"disabled",d=i.default.get(s,u),p=h(e);return r?[t("".concat(p,"-group"),{props:x(e,n,d),on:k(e,n),nativeOn:_(e,n)},r.map((function(e,n){return t(p,{key:n,props:{label:e[l],content:e[c],disabled:e[f]}})})))]:[t(p,{props:x(e,n,d),on:k(e,n),nativeOn:_(e,n)})]}var W={input:{autofocus:"input",renderEdit:A,renderDefault:A,renderFilter:function(t,e,n){var r=n.column,i=e.name,o=g(e);return r.filters.map((function(r,a){return t(i,{key:a,class:"vxe-default-".concat(i),attrs:o,domProps:{value:r.data},on:O(e,n,r)})}))},defaultFilterMethod:L,renderItemContent:F},textarea:{autofocus:"textarea",renderEdit:A,renderItemContent:F},select:{renderEdit:R,renderDefault:R,renderCell:function(t,e,n){return w(t,e,0,B(e,n))},renderFilter:function(t,e,n){return n.column.filters.map((function(r,i){return t("select",{key:i,class:"vxe-default-select",attrs:g(e),on:O(e,n,r)},e.optionGroups?P(t,e,n,D):D(t,e.options,e,n))}))},defaultFilterMethod:L,renderItemContent:function(t,e,n){return[t("select",{class:"vxe-default-select",attrs:g(e),on:T(e,n)},e.optionGroups?P(t,e,n,G):G(t,e.options,e,n))]},cellExportMethod:V},$input:{autofocus:".vxe-input--inner",renderEdit:N,renderCell:function(t,e,n){var r=e.props,a=void 0===r?{}:r,s=n.row,u=n.column,c=a.digits||o.default.input.digits,l=i.default.get(s,u.property);if(l)switch(a.type){case"date":case"week":case"month":case"year":l=function(t,e){return function(t,e,n){var r=e.dateConfig,o=void 0===r?{}:r;return i.default.toDateString(function(t,e){return t&&e.valueFormat?i.default.toStringDate(t,e.valueFormat):t}(t,e),o.labelFormat||n)}(t,e,o.default.i18n("vxe.input.date.labelFormat.".concat(e.type)))}(l,a);break;case"float":l=i.default.toFixed(i.default.floor(l,c),c)}return w(t,e,0,l)},renderDefault:N,renderFilter:function(t,e,n){return n.column.filters.map((function(r,i){var o=r.data;return t(h(e),{key:i,props:b(e,e,o),on:C(e,n,r)})}))},defaultFilterMethod:L,renderItemContent:z},$textarea:{autofocus:".vxe-textarea--inner",renderItemContent:z},$button:{renderDefault:I,renderItemContent:$},$buttons:{renderDefault:function(t,e,n){return e.children.map((function(e){return I(t,e,n)[0]}))},renderItemContent:function(t,e,n){return e.children.map((function(e){return $(t,e,n)[0]}))}},$select:{autofocus:".vxe-input--inner",renderEdit:j,renderDefault:j,renderCell:function(t,e,n){return w(t,e,0,B(e,n))},renderFilter:function(t,e,n){var r=n.column,i=e.options,o=e.optionProps,a=e.optionGroups,s=e.optionGroupProps,u=_(e,n);return r.filters.map((function(r,c){var l=r.data;return t(h(e),{key:c,props:b(e,n,l,{options:i,optionProps:o,optionGroups:a,optionGroupProps:s}),on:C(e,n,r),nativeOn:u})}))},defaultFilterMethod:L,renderItemContent:function(t,e,n){var r=n.data,o=n.property,a=e.options,s=e.optionProps,u=e.optionGroups,c=e.optionGroupProps,l=i.default.get(r,o);return[t(h(e),{props:x(e,n,l,{options:a,optionProps:s,optionGroups:u,optionGroupProps:c}),on:k(e,n),nativeOn:_(e,n)})]},cellExportMethod:V},$radio:{autofocus:".vxe-radio--input",renderItemContent:U},$checkbox:{autofocus:".vxe-checkbox--input",renderItemContent:U},$switch:{autofocus:".vxe-switch--button",renderEdit:N,renderDefault:N,renderItemContent:z}},H={mixin:function(t){return i.default.each(t,(function(t,e){return H.add(e,t)})),H},get:function(t){return W[t]||null},add:function(t,e){if(t&&e){var n=W[t];n?Object.assign(n,e):W[t]=e}return H},delete:function(t){return delete W[t],H}};e.renderer=H},8017:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setup=function(t){return i.default.merge(r.default,t)};var r=o(n(5042)),i=o(n(8478));function o(t){return t&&t.__esModule?t:{default:t}}},8494:function(t,e,n){"use strict";var r;function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,(r=n(8478))&&r.__esModule,n(5981);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store={}}var e,n;return e=t,(n=[{key:"mixin",value:function(e){return Object.assign(this.store,e),t}},{key:"get",value:function(t){return this.store[t]}},{key:"add",value:function(e,n){return this.store[e]=n,t}},{key:"delete",value:function(e){return delete this.store[e],t}}])&&i(e.prototype,n),t}();e.default=o},7757:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Validator=void 0;var r=a(n(4344)),i=a(n(7984)),o=a(n(5053));function a(t){return t&&t.__esModule?t:{default:t}}var s={install:function(){o.default.reg("valid"),r.default.mixins.push(i.default)}};e.Validator=s;var u=s;e.default=u},7984:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n(8478)),i=s(n(5042)),o=n(6970),a=s(n(1455));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,{$options:e,required:e.required,min:e.min,max:e.max,type:e.type,pattern:e.pattern,validator:e.validator,trigger:e.trigger,maxWidth:e.maxWidth})}var e,n;return e=t,(n=[{key:"content",get:function(){return(0,o.getFuncText)(this.$options.content||this.$options.message)}},{key:"message",get:function(){return this.content}}])&&u(e.prototype,n),t}();function l(t,e){var n=t.type,i=t.min,o=t.max,a=t.pattern,s="number"===n,u=s?r.default.toNumber(e):r.default.getSize(e);return!(!s||!isNaN(e))||!r.default.eqNull(i)&&u<r.default.toNumber(i)||!r.default.eqNull(o)&&u>r.default.toNumber(o)||!(!a||(r.default.isRegExp(a)?a:new RegExp(a)).test(e))}var f={methods:{_fullValidate:function(t,e){return this.beginValidate(t,e,!0)},_validate:function(t,e){return this.beginValidate(t,e)},handleValidError:function(t){var e=this;return new Promise((function(n){!1===e.validOpts.autoPos?(e.emitEvent("valid-error",t),n()):e.handleActived(t,{type:"valid-error",trigger:"call"}).then((function(){setTimeout((function(){n(e.showValidTooltip(t))}),10)}))}))},beginValidate:function(t,e,n){var o,s=this,u={},c=this.editRules,l=this.afterFullData,f=this.treeConfig,d=this.treeOpts;!0===t?o=l:t&&(r.default.isFunction(t)?e=t:o=r.default.isArray(t)?t:[t]),o||(o=this.getInsertRecords().concat(this.getUpdateRecords()));var h=[];if(this.lastCallTime=Date.now(),this.validRuleErr=!1,this.clearValidate(),c){var p=this.getColumns(),g=function(t){if(n||!s.validRuleErr){var e=[];p.forEach((function(i){!n&&s.validRuleErr||!r.default.has(c,i.property)||e.push(s.validCellRules("all",t,i).catch((function(e){var r={rule:e.rule,rules:e.rules,rowIndex:s.getRowIndex(t),row:t,columnIndex:s.getColumnIndex(i),column:i,field:i.property,$table:s};if(u[i.property]||(u[i.property]=[]),u[i.property].push(r),!n)return s.validRuleErr=!0,Promise.reject(r)})))})),h.push(Promise.all(e))}};return f?r.default.eachTree(o,g,d):o.forEach(g),Promise.all(h).then((function(){var t=Object.keys(u);return s.$nextTick().then((function(){if(t.length)return Promise.reject(u[t[0]][0]);e&&e()}))})).catch((function(t){return new Promise((function(n,r){var o=function(){s.$nextTick((function(){e?(e(u),n()):"obsolete"===i.default.validToReject?r(u):n(u)}))},c=function(){t.cell=s.getCell(t.row,t.column),a.default.scrollToView(t.cell),s.handleValidError(t).then(o)},d=t.row,h=l.indexOf(d),p=h>0?l[h-1]:d;!1===s.validOpts.autoPos?o():f?s.scrollToTreeRow(p).then(c):s.scrollToRow(p).then(c)}))}))}return this.$nextTick().then((function(){e&&e()}))},hasCellRules:function(t,e,n){var i=this.editRules,o=n.property;if(o&&i){var a=r.default.get(i,o);return a&&r.default.find(a,(function(e){return"all"===t||!e.trigger||t===e.trigger}))}return!1},validCellRules:function(t,e,n,i){var a=this,s=this.editRules,u=n.property,f=[],d=[];if(u&&s){var h=r.default.get(s,u);if(h){var p=r.default.isUndefined(i)?r.default.get(e,u):i;h.forEach((function(i){var s=i.type,u=i.trigger,g=i.required;if("all"===t||!u||t===u)if(r.default.isFunction(i.validator)){var v=i.validator({cellValue:p,rule:i,rules:h,row:e,rowIndex:a.getRowIndex(e),column:n,columnIndex:a.getColumnIndex(n),field:n.property,$table:a});v&&(r.default.isError(v)?(a.validRuleErr=!0,f.push(new c({type:"custom",trigger:u,content:v.message,rule:new c(i)}))):v.catch&&d.push(v.catch((function(t){a.validRuleErr=!0,f.push(new c({type:"custom",trigger:u,content:t&&t.message?t.message:i.content||i.message,rule:new c(i)}))}))))}else{var m="array"===s||r.default.isArray(p)?!r.default.isArray(p)||!p.length:(0,o.eqEmptyValue)(p);(g?m||l(i,p):!m&&l(i,p))&&(a.validRuleErr=!0,f.push(new c(i)))}}))}}return Promise.all(d).then((function(){if(f.length){var t={rules:f,rule:f[0]};return Promise.reject(t)}}))},_clearValidate:function(){var t=this.$refs.validTip;return Object.assign(this.validStore,{visible:!1,row:null,column:null,content:"",rule:null}),t&&t.visible&&t.close(),this.$nextTick()},triggerValidate:function(t){var e=this,n=this.editConfig,r=this.editStore,i=this.editRules,o=this.validStore,a=r.actived;if(a.row&&i){var s=a.args,u=s.row,c=s.column,l=s.cell;if(this.hasCellRules(t,u,c))return this.validCellRules(t,u,c).then((function(){"row"===n.mode&&o.visible&&o.row===u&&o.column===c&&e.clearValidate()})).catch((function(n){var r=n.rule;if(!r.trigger||t===r.trigger){var i={rule:r,row:u,column:c,cell:l};return e.showValidTooltip(i),Promise.reject(i)}return Promise.resolve()}))}return Promise.resolve()},showValidTooltip:function(t){var e=this,n=this.$refs,r=this.height,i=this.tableData,o=this.validOpts,a=t.rule,s=t.row,u=t.column,c=t.cell,l=n.validTip,f=a.content;return this.$nextTick((function(){if(Object.assign(e.validStore,{row:s,column:u,rule:a,content:f,visible:!0}),e.emitEvent("valid-error",t),l&&("tooltip"===o.message||"default"===o.message&&!r&&i.length<2))return l.open(c,f)}))}}};e.default=f},5489:function(t,e,n){var r=n(8013),i=n(5866);t.exports=function(t,e){return r(i(t),i(e))}},8159:function(t,e,n){var r=n(8104);t.exports=function(t,e,n){var i=0,o=[];return function(){var a=arguments;++i<=t&&o.push(a[0]),i>=t&&e.apply(n,[o].concat(r(a)))}}},4419:function(t){t.exports=function(t,e,n){if(t)if(t.forEach)t.forEach(e,n);else for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)}},2272:function(t){t.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(e===t[n])return n}},8676:function(t){t.exports=function(t,e){if(t.lastIndexOf)return t.lastIndexOf(e);for(var n=t.length-1;n>=0;n--)if(e===t[n])return n;return-1}},5125:function(t,e,n){var r=n(4419),i=n(7164),o=n(9987),a=n(7917),s=Object.assign;function u(t,e,n){for(var o,s=e.length,u=1;u<s;u++)o=e[u],r(i(e[u]),n?function(e){t[e]=a(o[e],n)}:function(e){t[e]=o[e]});return t}t.exports=function(t){if(t){var e=arguments;if(!0!==t)return s?s.apply(Object,e):u(t,e);if(e.length>1)return u(t=o(t[1])?[]:{},e,!0)}return t}},771:function(t,e,n){var r=n(8104);t.exports=function(t,e,n){var i=0,o=[];return n=n||this,function(){var a=arguments;++i<t&&(o.push(a[0]),e.apply(n,[o].concat(r(a))))}}},2654:function(t,e,n){var r=n(8104);t.exports=function(t,e){var n=r(arguments,2);return function(){return t.apply(e,r(arguments).concat(n))}}},6062:function(t,e,n){var r=n(785),i=n(2645),o=n(7054),a=n(5125),s=n(4419);function u(t){try{var e="__xe_t";return t.setItem(e,1),t.removeItem(e),!0}catch(t){return!1}}function c(t){return navigator.userAgent.indexOf(t)>-1}t.exports=function(){var t,e,n,l=!1,f={isNode:!1,isMobile:l,isPC:!1,isDoc:!!i};return o||typeof process===r?(n=c("Edge"),e=c("Chrome"),l=/(Android|webOS|iPhone|iPad|iPod|SymbianOS|BlackBerry|Windows Phone)/.test(navigator.userAgent),f.isDoc&&(t=i.body||i.documentElement,s(["webkit","khtml","moz","ms","o"],(function(e){f["-"+e]=!!t[e+"MatchesSelector"]}))),a(f,{edge:n,firefox:c("Firefox"),msie:!n&&f["-ms"],safari:!e&&!n&&c("Safari"),isMobile:l,isPC:!l,isLocalStorage:u(o.localStorage),isSessionStorage:u(o.sessionStorage)})):f.isNode=!0,f}},4403:function(t,e,n){var r=n(5852),i=n(7906),o=n(5001),a=n(8447),s={};t.exports=function(t){if(t=r(t),s[t])return s[t];var e=t.length,n=t.replace(/([-]+)/g,(function(t,n,r){return r&&r+n.length<e?"-":""}));return e=n.length,n=n.replace(/([A-Z]+)/g,(function(t,n,r){var s=n.length;return n=a(n),r?s>2&&r+s<e?o(i(n,0,1))+i(n,1,s-1)+o(i(n,s-1,s)):o(i(n,0,1))+i(n,1,s):s>1&&r+s<e?i(n,0,s-1)+o(i(n,s-1,s)):n})).replace(/(-[a-zA-Z])/g,(function(t,e){return o(i(e,1,e.length))})),s[t]=n,n}},7869:function(t,e,n){var r=n(7366)("ceil");t.exports=r},5876:function(t,e,n){var r=n(9987);t.exports=function(t,e){var n,i=[],o=e>>0||1;if(r(t))if(o>=0&&t.length>o)for(n=0;n<t.length;)i.push(t.slice(n,n+o)),n+=o;else i=t.length?[t]:t;return i}},5776:function(t,e,n){var r=n(2656),i=n(4448),o=n(1120),a=n(9987),s=n(6909),u=n(5125),c=n(4589);t.exports=function(t,e,n){if(t){var l,f=arguments.length>1&&(s(e)||!o(e)),d=f?n:e;if(i(t))c(t,f?function(n,r){t[r]=e}:function(e,n){r(t,n)}),d&&u(t,d);else if(a(t)){if(f)for(l=t.length;l>0;)l--,t[l]=e;else t.length=0;d&&t.push.apply(t,d)}}return t}},7917:function(t,e,n){var r=n(601),i=n(4589),o=n(4419);function a(t,e){var n=t.__proto__.constructor;return e?new n(e):new n}function s(t,e){return e?u(t,e):t}function u(t,e){if(t)switch(r.call(t)){case"[object Object]":var n=Object.create(t.__proto__);return i(t,(function(t,r){n[r]=s(t,e)})),n;case"[object Date]":case"[object RegExp]":return a(t,t.valueOf());case"[object Array]":case"[object Arguments]":var u=[];return o(t,(function(t){u.push(s(t,e))})),u;case"[object Set]":var c=a(t);return c.forEach((function(t){c.add(s(t,e))})),c;case"[object Map]":var l=a(t);return l.forEach((function(t,n){l.set(s(t,e))})),l}return t}t.exports=function(t,e){return t?u(t,e):t}},1118:function(t,e,n){var r=n(688),i=n(506),o=n(7869),a=n(1149),s=n(5628),u=n(5852),c=n(5588),l=n(1508),f=n(5125);t.exports=function(t,e){var n,d,h,p,g,v=f({},r.commafyOptions,e),m=v.digits;return s(t)?(n=(v.ceil?o:v.floor?a:i)(t,m),p=(d=l(m?c(n,m):n).split("."))[0],g=d[1],(h=p&&n<0)&&(p=p.substring(1,p.length))):p=(d=(n=u(t).replace(/,/g,""))?[n]:[])[0],d.length?(h?"-":"")+p.replace(new RegExp("(?=(?!(\\b))(.{"+(v.spaceNumber||3)+"})+$)","g"),v.separator||",")+(g?"."+g:""):n}},9338:function(t,e,n){var r=n(688),i=n(2645),o=n(368),a=n(667),s=n(9987),u=n(1120),c=n(4435),l=n(5667),f=n(7295),d=n(7164),h=n(5125),p=n(4419),g=n(5617),v=n(154),m=n(7858),y=n(3406),b=n(3199);function x(t,e){var n=parseFloat(e),r=g(),i=v(r);switch(t){case"y":return v(m(r,n));case"M":return v(y(r,n));case"d":return v(b(r,n));case"h":case"H":return i+60*n*60*1e3;case"m":return i+60*n*1e3;case"s":return i+1e3*n}return i}function w(t){return(c(t)?t:new Date(t)).toUTCString()}function _(t,e,n){if(i){var f,d,g,v,m,y,b=[],_=arguments;return s(t)?b=t:_.length>1?b=[h({name:t,value:e},n)]:u(t)&&(b=[t]),b.length>0?(p(b,(function(t){f=h({},r.cookies,t),g=[],f.name&&(d=f.expires,g.push(a(f.name)+"="+a(u(f.value)?JSON.stringify(f.value):f.value)),d&&(d=isNaN(d)?d.replace(/^([0-9]+)(y|M|d|H|h|m|s)$/,(function(t,e,n){return w(x(n,e))})):/^[0-9]{11,13}$/.test(d)||c(d)?w(d):w(x("d",d)),f.expires=d),p(["expires","path","domain","secure"],(function(t){l(f[t])||g.push(f[t]&&"secure"===t?t:t+"="+f[t])}))),i.cookie=g.join("; ")})),!0):(v={},(m=i.cookie)&&p(m.split("; "),(function(t){y=t.indexOf("="),v[o(t.substring(0,y))]=o(t.substring(y+1)||"")})),1===_.length?v[t]:v)}return!1}function E(t){return _(t)}function S(t,e,n){return _(t,e,n),_}function C(t,e){_(t,"",h({expires:-1},r.cookies,e))}function k(){return d(_())}h(_,{has:function(t){return f(k(),t)},set:S,setItem:S,get:E,getItem:E,remove:C,removeItem:C,keys:k,getJSON:function(){return _()}}),t.exports=_},9064:function(t,e,n){var r=n(9987);t.exports=function(t,e,n,i){if(r(t)&&t.copyWithin)return t.copyWithin(e,n,i);var o,a,s=e>>0,u=n>>0,c=t.length,l=arguments.length>3?i>>0:c;if(s<c&&(s=s>=0?s:c+s)>=0&&(u=u>=0?u:c+u)<(l=l>=0?l:c+l))for(o=0,a=t.slice(u,l);s<c&&!(a.length<=o);s++)t[s]=a[o++];return t}},8725:function(t,e,n){var r=n(7920),i=n(4589);t.exports=function(t,e,n){var o=r(t,e,n||this);return i(o,(function(t,e){o[e]=t.length})),o}},7289:function(t,e,n){"use strict";var r=n(688),i=n(4419),o=n(5203),a=n(8896),s=n(5125),u=function(){};u.VERSION="3.5.3",u.mixin=function(){i(arguments,(function(t){o(t,(function(t,e){u[e]=a(t)?function(){var e=t.apply(u.$context,arguments);return u.$context=null,e}:t}))}))},u.setup=function(t){return s(r,t)},t.exports=u},5443:function(t){t.exports=function(t,e,n){var r,i,o=n||{},a=!1,s=0,u="boolean"==typeof n,c="leading"in o?o.leading:u,l="trailing"in o?o.trailing:!u,f=function(){a=!0,s=0,t.apply(i,r)},d=function(){!0===c&&(s=0),a||!0!==l||f()},h=function(){a=!1,r=arguments,i=this,0===s?!0===c&&f():clearTimeout(s),s=setTimeout(d,e)};return h.cancel=function(){var t=0!==s;return clearTimeout(s),s=0,t},h}},2326:function(t,e,n){var r=n(8104);t.exports=function(t,e){var n=r(arguments,2),i=this;return setTimeout((function(){t.apply(i,n)}),e)}},4315:function(t,e,n){var r=n(7164),i=n(8104),o=n(7295),a=n(4419),s=n(5125);t.exports=function(t,e){if(t&&e){var n=s.apply(this,[{}].concat(i(arguments,1))),u=r(n);a(r(t),(function(e){o(u,e)&&(t[e]=n[e])}))}return t}},1138:function(t,e,n){var r=n(2427),i=n(5866);t.exports=function(t,e){return r(i(t),i(e))}},5203:function(t,e,n){var r=n(9987),i=n(4419),o=n(4589);t.exports=function(t,e,n){return t?(r(t)?i:o)(t,e,n):t}},4849:function(t,e,n){var r=n(2006),i=n(5203),o=r((function t(e,n,r,o,a,s,u,c){var l,f;i(n,(function(i,d){l=a.concat([""+d]),f=s.concat([i]),r.call(o,i,d,n,l,e,f),i&&u&&(l.push(u),t(i,i[u],r,o,l,f,u,c))}))}));t.exports=o},2200:function(t,e,n){var r=n(5852);t.exports=function(t,e,n){var i=r(t),o=arguments.length;return o>1&&(o>2?i.substring(0,n).indexOf(e)===n-1:i.indexOf(e)===i.length-1)}},9536:function(t,e,n){var r=n(4227)("entries",2);t.exports=r},2289:function(t,e,n){var r=n(6909),i=n(5667);t.exports=function(t){return r(t)||i(t)}},5732:function(t,e,n){var r=n(7772),i=n(7072)(r);t.exports=i},7483:function(t,e,n){var r=n(5131)("every",1,1,!1,!0);t.exports=r},6871:function(t,e,n){var r=n(5203);t.exports=function(t,e,n){var i=[];if(t&&e){if(t.filter)return t.filter(e,n);r(t,(function(r,o){e.call(n,r,o,t)&&i.push(r)}))}return i}},1216:function(t,e,n){var r=n(4849);t.exports=function(t,e,n,i){var o=[];return t&&e&&r(t,(function(t,n,r,a,s,u){e.call(i,t,n,r,a,s,u)&&o.push(t)}),n),o}},520:function(t,e,n){var r=n(5131)("find",1,3,!0);t.exports=r},6842:function(t,e,n){var r=n(4430)((function(t,e,n){for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return r;return-1}));t.exports=r},1793:function(t,e,n){var r=n(5131)("",0,2,!0);t.exports=r},6177:function(t,e,n){var r=n(9987),i=n(8798);t.exports=function(t,e,n){if(t){r(t)||(t=i(t));for(var o=t.length-1;o>=0;o--)if(e.call(n,t[o],o,t))return t[o]}}},3331:function(t,e,n){var r=n(4430)((function(t,e,n){for(var r=t.length-1;r>=0;r--)if(e.call(n,t[r],r,t))return r;return-1}));t.exports=r},1029:function(t,e,n){var r=n(2006)((function t(e,n,r,i,o,a,s,u){var c,l,f,d,h,p;if(n)for(l=0,f=n.length;l<f;l++){if(c=n[l],d=o.concat([""+l]),h=a.concat([c]),r.call(i,c,l,n,d,e,h))return{index:l,item:c,path:d,items:n,parent:e,nodes:h};if(s&&c&&(p=t(c,c[s],r,i,d.concat([s]),h,s,u)))return p}}));t.exports=r},999:function(t,e,n){var r=n(8798);t.exports=function(t){return r(t)[0]}},7058:function(t,e,n){var r=n(9987),i=n(4419);function o(t,e){var n=[];return i(t,(function(t){n=n.concat(r(t)?e?o(t,e):t:[t])})),n}t.exports=function(t,e){return r(t)?o(t,e):[]}},1149:function(t,e,n){var r=n(7366)("floor");t.exports=r},6035:function(t,e,n){var r=n(9987),i=n(8014);t.exports=function(t,e,n){if(t)if(r(t))for(var o=0,a=t.length;o<a&&!1!==e.call(n,t[o],o,t);o++);else for(var s in t)if(i(t,s)&&!1===e.call(n,t[s],s,t))break}},626:function(t,e,n){var r=n(4568),i=n(3379),o=n(8014),a=n(5667),s=n(2289);function u(t,e){var n=e?e.match(r):"";return n?n[1]?t[n[1]]?t[n[1]][n[2]]:void 0:t[n[2]]:t[e]}t.exports=function(t,e,n){if(s(t))return n;var r=function(t,e){if(t){var n,r,a,c=0;if(t[e]||o(t,e))return t[e];if(a=(r=i(e)).length)for(n=t;c<a;c++)if(n=u(n,r[c]),s(n))return c===a-1?n:void 0;return n}}(t,e);return a(r)?n:r}},6620:function(t,e,n){var r=n(2440),i=n(4052),o=n(9773);t.exports=function(){if(r){var t=r.pathname,e=o(t,"/")+1;return i()+(e===t.length?t:t.substring(0,e))}return""}},8399:function(t,e,n){var r=n(688),i=n(154),o=n(5617),a=n(2269),s=n(6148);t.exports=function(t,e,n){var u,c,l,f,d,h,p,g={done:!1,time:0};if(t=a(t),e=e?a(e):o(),s(t)&&s(e)&&(u=i(t))<(c=i(e)))for(f=g.time=c-u,d=n&&n.length>0?n:r.dateDiffRules,g.done=!0,p=0,h=d.length;p<h;p++)f>=(l=d[p])[1]?p===h-1?g[l[0]]=f||0:(g[l[0]]=Math.floor(f/l[1]),f-=g[l[0]]*l[1]):g[l[0]]=0;return g}},9807:function(t,e,n){var r=n(2105),i=n(871),o=n(8195),a=n(154),s=n(3406),u=n(2269),c=n(6148);t.exports=function(t,e){return t=u(t),c(t)?Math.floor((a(s(t,e,o))-a(s(t,e,i)))/r)+1:NaN}},4233:function(t,e,n){var r=n(7858),i=n(2269),o=n(6148),a=n(4112);t.exports=function(t,e){return t=i(t),o(t)?a(r(t,e))?366:365:NaN}},396:function(t,e,n){var r=n(9357)((function(t){return new Date(t.getFullYear(),t.getMonth(),1)}));t.exports=r},1198:function(t,e,n){var r=n(9987),i=n(8511),o=n(5203);t.exports=function(t){var e=0;return i(t)||r(t)?t.length:(o(t,(function(){e++})),e)}},599:function(t,e,n){var r=n(9191),i=n(4435),o=n(9987),a=n(2663),s=n(3619),u=n(6909);t.exports=function(t){return u(t)?"null":r(t)?"symbol":i(t)?"date":o(t)?"array":a(t)?"regexp":s(t)?"error":typeof t}},3199:function(t,e,n){var r=n(871),i=n(8195),o=n(3721),a=n(8900),s=n(2619),u=n(154),c=n(2269),l=n(6148);t.exports=function t(e,n,f){if(e=c(e),l(e)&&!isNaN(n)){if(e.setDate(e.getDate()+o(n)),f===r)return new Date(a(e),s(e),e.getDate());if(f===i)return new Date(u(t(e,1,r))-1)}return e}},3406:function(t,e,n){var r=n(871),i=n(8195),o=n(2105),a=n(8900),s=n(154),u=n(2619),c=n(2269),l=n(6148),f=n(5628);t.exports=function t(e,n,d){var h=n&&!isNaN(n)?n:0;if(e=c(e),l(e)){if(d===r)return new Date(a(e),u(e)+h,1);if(d===i)return new Date(s(t(e,h+1,r))-1);if(f(d)&&e.setDate(d),h){var p=e.getDate();if(e.setMonth(u(e)+h),p!==e.getDate())return e.setDate(1),new Date(s(e)-o)}}return e}},6408:function(t,e,n){var r=n(3406),i=n(2269),o=n(6148);t.exports=function(t,e,n){var a,s=e&&!isNaN(e)?3*e:0;return t=i(t),o(t)?(a=3*(function(t){var e=t.getMonth();return e<3?1:e<6?2:e<9?3:4}(t)-1),t.setMonth(a),r(t,s,n)):t}},6939:function(t,e,n){var r=n(688),i=n(2105),o=n(5517),a=n(154),s=n(2269),u=n(6148),c=n(5628);t.exports=function(t,e,n,l){if(t=s(t),u(t)){var f=c(n),d=c(l),h=a(t);if(f||d){var p=d?l:r.firstDayOfWeek,g=t.getDay(),v=f?n:g;if(g!==v){var m=0;p>g?m=-(7-p+g):p<g&&(m=p-g),h+=v>p?((0===v?7:v)-p+m)*i:v<p?(7-p+v+m)*i:m*i}}return e&&!isNaN(e)&&(h+=e*o),new Date(h)}return t}},7858:function(t,e,n){var r=n(871),i=n(8195),o=n(8900),a=n(3406),s=n(2269),u=n(6148);t.exports=function(t,e,n){var c;if(t=s(t),u(t)&&(e&&(c=e&&!isNaN(e)?e:0,t.setFullYear(o(t)+c)),n||!isNaN(n))){if(n===r)return new Date(o(t),0,1);if(n===i)return t.setMonth(11),a(t,0,i);t.setMonth(n)}return t}},959:function(t,e,n){var r=n(2105),i=n(871),o=n(247),a=n(7858),s=n(2269),u=n(6148);t.exports=function(t){return t=s(t),u(t)?Math.floor((o(t)-o(a(t,0,i)))/r)+1:NaN}},457:function(t,e,n){var r=n(9357)((function(t){return new Date(t.getFullYear(),0,1)}));t.exports=r},7920:function(t,e,n){var r=n(8558),i=n(1120),o=n(8896),a=n(9011),s=n(5203);t.exports=function(t,e,n){var u,c={};return t&&(e&&i(e)?e=function(t){return function(){return r(t)}}(e):o(e)||(e=a(e)),s(t,(function(r,i){u=e?e.call(n,r,i,t):r,c[u]?c[u].push(r):c[u]=[r]}))),c}},9374:function(t,e,n){var r=n(4568),i=n(3379),o=n(8014);t.exports=function(t,e){if(t){if(o(t,e))return!0;var n,a,s,u,c,l,f=i(e),d=0,h=f.length;for(c=t;d<h&&(l=!1,(u=(n=f[d])?n.match(r):"")?(a=u[1],s=u[2],a?c[a]&&o(c[a],s)&&(l=!0,c=c[a][s]):o(c,s)&&(l=!0,c=c[s])):o(c,n)&&(l=!0,c=c[n]),l);d++)if(d===h-1)return!0}return!1}},8014:function(t){t.exports=function(t,e){return!(!t||!t.hasOwnProperty)&&t.hasOwnProperty(e)}},9357:function(t,e,n){var r=n(688),i=n(5517),o=n(5628),a=n(6148),s=n(6939),u=n(154);t.exports=function(t){return function(e,n){var c=o(n)?n:r.firstDayOfWeek,l=s(e,0,c,c);if(a(l)){var f=new Date(l.getFullYear(),l.getMonth(),l.getDate()),d=t(l),h=d.getDay();return h>c&&d.setDate(7-h+c+1),h<c&&d.setDate(c-h+1),Math.floor((u(f)-u(d))/i+1)}return NaN}}},4227:function(t,e,n){var r=n(5203);t.exports=function(t,e){var n=Object[t];return function(t){var i=[];if(t){if(n)return n(t);r(t,e>1?function(e){i.push([""+e,t[e]])}:function(){i.push(arguments[e])})}return i}}},6535:function(t,e,n){var r=n(601);t.exports=function(t){return function(e){return"[object "+t+"]"===r.call(e)}}},8472:function(t){t.exports=function(t){return function(e){return typeof e===t}}},46:function(t,e,n){var r=n(9987),i=n(8511),o=n(8014);t.exports=function(t,e){return function(n,a){if(n){if(n[t])return n[t](a);if(i(n)||r(n))return e(n,a);for(var s in n)if(o(n,s)&&a===n[s])return s}return-1}}},5131:function(t,e,n){var r=n(8014),i=n(9987);t.exports=function(t,e,n,o,a){return function(s,u,c){if(s&&u){if(t&&s[t])return s[t](u,c);if(e&&i(s)){for(var l=0,f=s.length;l<f;l++)if(!!u.call(c,s[l],l,s)===o)return[!0,!1,l,s[l]][n]}else for(var d in s)if(r(s,d)&&!!u.call(c,s[d],d,s)===o)return[!0,!1,d,s[d]][n]}return a}}},7366:function(t,e,n){var r=n(5586),i=n(5866),o=n(1508);t.exports=function(t){return function(e,n){var a=i(e),s=a;if(a){n>>=0;var u=o(a).split("."),c=u[0],l=u[1]||"",f=l.substring(0,n+1),d=c+(f?"."+f:"");if(n>=l.length)return i(d);if(d=a,n>0){var h=Math.pow(10,n);s=Math[t](r(d,h))/h}else s=Math[t](d)}return s}}},6155:function(t,e,n){var r=n(8896),i=n(2289),o=n(626),a=n(4419);t.exports=function(t){return function(e,n){var s,u;return e&&e.length?(a(e,(function(a,c){n&&(a=r(n)?n(a,c,e):o(a,n)),i(a)||!i(s)&&!t(s,a)||(u=c,s=a)})),e[u]):s}}},6596:function(t,e,n){var r=n(8896),i=n(9987),o=n(5203),a=n(6842);t.exports=function(t,e){return function(n,s){var u,c,l={},f=[],d=this,h=arguments,p=h.length;if(!r(s)){for(c=1;c<p;c++)u=h[c],f.push.apply(f,i(u)?u:[u]);s=0}return o(n,(function(r,i){((s?s.call(d,r,i,n):a(f,(function(t){return t===i}))>-1)?t:e)&&(l[i]=r)})),l}}},7560:function(t){t.exports=function(t){return function(e){if(e){var n=t(e);if(!isNaN(n))return n}return 0}}},2006:function(t){t.exports=function(t){return function(e,n,r,i){var o=r||{},a=o.children||"children";return t(null,e,n,i,[],[],a,o)}}},4430:function(t,e,n){var r=n(8896),i=n(8511),o=n(9987),a=n(8014);t.exports=function(t){return function(e,n,s){if(e&&r(n)){if(o(e)||i(e))return t(e,n,s);for(var u in e)if(a(e,u)&&n.call(s,e[u],u,e))return u}return-1}}},3943:function(t){t.exports=function(t,e){return t===e}},2656:function(t){t.exports=function(t,e){try{delete t[e]}catch(n){t[e]=void 0}}},7965:function(t,e,n){var r=n(5628),i=n(9987),o=n(8511),a=n(2663),s=n(4435),u=n(3149),c=n(5667),l=n(7164),f=n(7483);t.exports=function t(e,n,d,h,p,g,v){if(e===n)return!0;if(e&&n&&!r(e)&&!r(n)&&!o(e)&&!o(n)){if(a(e))return d(""+e,""+n,p,g,v);if(s(e)||u(e))return d(+e,+n,p,g,v);var m,y,b,x=i(e),w=i(n);if(x||w?x&&w:e.constructor===n.constructor)return y=l(e),b=l(n),h&&(m=h(e,n,p)),y.length===b.length&&(c(m)?f(y,(function(r,i){return r===b[i]&&t(e[r],n[b[i]],d,h,x||w?i:r,e,n)})):!!m)}return d(e,n,p,g,v)}},7072:function(t,e,n){var r=n(5852),i=n(7164);t.exports=function(t){var e=new RegExp("(?:"+i(t).join("|")+")","g");return function(n){return r(n).replace(e,(function(e){return t[e]}))}}},8900:function(t){t.exports=function(t){return t.getFullYear()}},2619:function(t){t.exports=function(t){return t.getMonth()}},154:function(t){t.exports=function(t){return t.getTime()}},3379:function(t){t.exports=function(t){return t?t.splice&&t.join?t:(""+t).replace(/(\[\d+\])\.?/g,"$1.").replace(/\.$/,"").split("."):[]}},4052:function(t,e,n){var r=n(2440);t.exports=function(){return r?r.origin||r.protocol+"//"+r.host:""}},9072:function(t){t.exports=function(t){return Date.UTC(t.y,t.M||0,t.d||1,t.H||0,t.m||0,t.s||0,t.S||0)}},403:function(t,e,n){var r=n(8900),i=n(2619);t.exports=function(t){return new Date(r(t),i(t),t.getDate())}},247:function(t,e,n){var r=n(154),i=n(403);t.exports=function(t){return r(i(t))}},5586:function(t,e,n){var r=n(7401),i=n(1508);t.exports=function(t,e){var n=i(t),o=i(e);return parseInt(n.replace(".",""))*parseInt(o.replace(".",""))/Math.pow(10,r(n)+r(o))}},5617:function(t){t.exports=function(){return new Date}},8013:function(t,e,n){var r=n(7401),i=n(1508),o=n(3293);t.exports=function(t,e){var n=i(t),a=i(e),s=Math.pow(10,Math.max(r(n),r(a)));return(o(t,s)+o(e,s))/s}},7401:function(t){t.exports=function(t){return(t.split(".")[1]||"").length}},2427:function(t,e,n){var r=n(7401),i=n(1508),o=n(3293);t.exports=function(t,e){var n=i(t),a=i(e),s=r(n),u=r(a)-s,c=u<0,l=Math.pow(10,c?Math.abs(u):u);return o(n.replace(".","")/a.replace(".",""),c?1/l:l)}},1751:function(t){t.exports=function(t,e){return t.substring(0,e)+"."+t.substring(e,t.length)}},8447:function(t){t.exports=function(t){return t.toLowerCase()}},6815:function(t,e,n){var r=n(3721);t.exports=function(t,e){if(t.repeat)return t.repeat(e);var n=isNaN(e)?[]:new Array(r(e));return n.join(t)+(n.length>0?t:"")}},7906:function(t){t.exports=function(t,e,n){return t.substring(e,n)}},5001:function(t){t.exports=function(t){return t.toUpperCase()}},1493:function(t,e,n){var r=n(9987),i=n(7295);t.exports=function(t,e){var n,o=0;if(r(t)&&r(e)){for(n=e.length;o<n;o++)if(!i(t,e[o]))return!1;return!0}return i(t,e)}},7295:function(t,e,n){var r=n(8014);t.exports=function(t,e){if(t){if(t.includes)return t.includes(e);for(var n in t)if(r(t,n)&&e===t[n])return!0}return!1}},8478:function(t,e,n){"use strict";var r=n(7289),i=n(5125),o=n(4589),a=n(8933),s=n(4345),u=n(910),c=n(2891),l=n(717),f=n(7483),d=n(1493),h=n(4419),p=n(301),g=n(4014),v=n(1258),m=n(3843),y=n(4286),b=n(9677),x=n(8917),w=n(9545),_=n(8104),E=n(6871),S=n(1793),C=n(7295),k=n(520),M=n(6177),O=n(9941),T=n(9064),A=n(5876),N=n(6972),I=n(470),P=n(2968),D=n(7058),L=n(2053),R=n(9582),j=n(4627),B=n(7283),F=n(1029),z=n(4849),$=n(3211),G=n(1216),V=n(1616),U=n(2272),W=n(8676),H=n(8014),Y=n(9987),X=n(6909),q=n(1991),Z=n(5667),K=n(8896),J=n(1120),Q=n(8511),tt=n(4448),et=n(4112),nt=n(4435),rt=n(2289),it=n(5203),ot=n(6035),at=n(6734),st=n(6068),ut=n(9773),ct=n(7164),lt=n(8798),ft=n(7917),dt=n(1198),ht=n(7665),pt=n(1528),gt=n(5776),vt=n(3432),mt=n(2567),yt=n(1265),bt=n(3149),xt=n(5628),wt=n(2663),_t=n(3619),Et=n(3332),St=n(8558),Ct=n(9191),kt=n(5734),Mt=n(4501),Ot=n(1606),Tt=n(5822),At=n(3297),Nt=n(5496),It=n(4809),Pt=n(91),Dt=n(704),Lt=n(1281),Rt=n(6563),jt=n(5468),Bt=n(599),Ft=n(3992),zt=n(6842),$t=n(3331),Gt=n(5605),Vt=n(7459),Ut=n(9536),Wt=n(4779),Ht=n(7300),Yt=n(999),Xt=n(3958),qt=n(9374),Zt=n(626),Kt=n(2072),Jt=n(7920),Qt=n(8725),te=n(9033),ee=n(4315),ne=n(6949),re=n(7631),ie=n(4603),oe=n(1118),ae=n(506),se=n(7869),ue=n(1149),ce=n(5588),le=n(6285),fe=n(5866),de=n(1508),he=n(5489),pe=n(2754),ge=n(3293),ve=n(1138),me=n(4751),ye=n(1454),be=n(7858),xe=n(6408),we=n(3406),_e=n(3199),Ee=n(2269),Se=n(3157),Ce=n(6934),ke=n(7721),Me=n(6148),Oe=n(336),Te=n(6939),Ae=n(959),Ne=n(457),Ie=n(396),Pe=n(4233),De=n(9807),Le=n(8399),Re=n(4731),je=n(6329),Be=n(6206),Fe=n(3884),ze=n(4050),$e=n(8236),Ge=n(5732),Ve=n(1993),Ue=n(4403),We=n(3345),He=n(965),Ye=n(2200),Xe=n(267),qe=n(7763),Ze=n(5852),Ke=n(6117),Je=n(9011),Qe=n(2654),tn=n(2058),en=n(8159),nn=n(771),rn=n(622),on=n(5443),an=n(2326),sn=n(8893),un=n(326),cn=n(3380),ln=n(6620),fn=n(1151),dn=n(9338);i(r,{assign:i,objectEach:o,lastObjectEach:a,objectMap:s,merge:u,uniq:g,union:v,sortBy:y,orderBy:b,shuffle:x,sample:w,some:l,every:f,slice:_,filter:E,find:k,findLast:M,findKey:S,includes:C,arrayIndexOf:U,arrayLastIndexOf:W,map:c,reduce:O,copyWithin:T,chunk:A,zip:N,unzip:I,zipObject:P,flatten:D,toArray:m,includeArrays:d,pluck:L,invoke:R,arrayEach:h,lastArrayEach:p,toArrayTree:j,toTreeArray:B,findTree:F,eachTree:z,mapTree:$,filterTree:G,searchTree:V,hasOwnProp:H,eqNull:rt,isNaN:q,isFinite:vt,isUndefined:Z,isArray:Y,isFloat:mt,isInteger:yt,isFunction:K,isBoolean:bt,isString:Q,isNumber:xt,isRegExp:wt,isObject:J,isPlainObject:tt,isDate:nt,isError:_t,isTypeError:Et,isEmpty:St,isNull:X,isSymbol:Ct,isArguments:kt,isElement:Mt,isDocument:Ot,isWindow:Tt,isFormData:At,isMap:Nt,isWeakMap:It,isSet:Pt,isWeakSet:Dt,isLeapYear:et,isMatch:Lt,isEqual:Rt,isEqualWith:jt,getType:Bt,uniqueId:Ft,getSize:dt,indexOf:st,lastIndexOf:ut,findIndexOf:zt,findLastIndexOf:$t,toStringJSON:Gt,toJSONString:Vt,keys:ct,values:lt,entries:Ut,pick:Wt,omit:Ht,first:Yt,last:Xt,each:it,forOf:ot,lastForOf:at,lastEach:ht,has:qt,get:Zt,set:Kt,groupBy:Jt,countBy:Qt,clone:ft,clear:gt,remove:pt,range:te,destructuring:ee,random:ne,min:ie,max:re,commafy:oe,round:ae,ceil:se,floor:ue,toFixed:ce,toNumber:fe,toNumberString:de,toInteger:le,add:he,subtract:pe,multiply:ge,divide:ve,sum:me,mean:ye,now:Ce,timestamp:ke,isValidDate:Me,isDateSame:Oe,toStringDate:Ee,toDateString:Se,getWhatYear:be,getWhatQuarter:xe,getWhatMonth:we,getWhatWeek:Te,getWhatDay:_e,getYearDay:Ae,getYearWeek:Ne,getMonthWeek:Ie,getDayOfYear:Pe,getDayOfMonth:De,getDateDiff:Le,trim:Fe,trimLeft:$e,trimRight:ze,escape:Ge,unescape:Ve,camelCase:Ue,kebabCase:We,repeat:Be,padStart:je,padEnd:Re,startsWith:He,endsWith:Ye,template:Xe,toFormatString:qe,toString:Ze,toValueString:Ze,noop:Ke,property:Je,bind:Qe,once:tn,after:en,before:nn,throttle:rn,debounce:on,delay:an,unserialize:sn,serialize:un,parseUrl:cn,getBaseURL:ln,locat:fn,browse:n(6062),cookie:dn}),t.exports=r},6068:function(t,e,n){var r=n(46)("indexOf",n(2272));t.exports=r},9582:function(t,e,n){var r=n(2891),i=n(9987);t.exports=function(t,e){for(var n,o=arguments,a=[],s=[],u=2,c=o.length;u<c;u++)a.push(o[u]);if(i(e)){for(c=e.length-1,u=0;u<c;u++)s.push(e[u]);e=e[c]}return r(t,(function(t){if(s.length&&(t=function(t,e){for(var n=0,r=e.length;t&&n<r;)t=t[e[n++]];return r&&t?t:0}(t,s)),(n=t[e]||e)&&n.apply)return n.apply(t,a)}))}},5734:function(t,e,n){var r=n(6535)("Arguments");t.exports=r},9987:function(t,e,n){var r=n(6535),i=Array.isArray||r("Array");t.exports=i},3149:function(t,e,n){var r=n(8472)("boolean");t.exports=r},4435:function(t,e,n){var r=n(6535)("Date");t.exports=r},336:function(t,e,n){var r=n(3157);t.exports=function(t,e,n){return!(!t||!e)&&"Invalid Date"!==(t=r(t,n))&&t===r(e,n)}},1606:function(t,e,n){var r=n(2645);t.exports=function(t){return!(!t||!r||9!==t.nodeType)}},4501:function(t,e,n){var r=n(8511),i=n(5628);t.exports=function(t){return!!(t&&r(t.nodeName)&&i(t.nodeType))}},8558:function(t){t.exports=function(t){for(var e in t)return!1;return!0}},6563:function(t,e,n){var r=n(7965),i=n(3943);t.exports=function(t,e){return r(t,e,i)}},5468:function(t,e,n){var r=n(7965),i=n(3943),o=n(8896),a=n(5667);t.exports=function(t,e,n){return o(n)?r(t,e,(function(t,e,r,o,s){var u=n(t,e,r,o,s);return a(u)?i(t,e):!!u}),n):r(t,e,i)}},3619:function(t,e,n){var r=n(6535)("Error");t.exports=r},3432:function(t,e,n){var r=n(5628);t.exports=function(t){return r(t)&&isFinite(t)}},2567:function(t,e,n){var r=n(9987),i=n(1265),o=n(6909);t.exports=function(t){return!(o(t)||isNaN(t)||r(t)||i(t))}},3297:function(t,e,n){var r=n(785),i=typeof FormData!==r;t.exports=function(t){return i&&t instanceof FormData}},8896:function(t,e,n){var r=n(8472)("function");t.exports=r},1265:function(t,e,n){var r=n(9987),i=n(6909);t.exports=function(t){return!i(t)&&!isNaN(t)&&!r(t)&&t%1==0}},4112:function(t,e,n){var r=n(4435),i=n(2269),o=n(5617);t.exports=function(t){var e,n=t?i(t):o();return!!r(n)&&(e=n.getFullYear())%4==0&&(e%100!=0||e%400==0)}},5496:function(t,e,n){var r=n(785),i=typeof Map!==r;t.exports=function(t){return i&&t instanceof Map}},1281:function(t,e,n){var r=n(7164),i=n(6842),o=n(6563),a=n(717),s=n(1493);t.exports=function(t,e){var n=r(t),u=r(e);return!u.length||(s(n,u)?a(u,(function(r){return i(n,(function(n){return n===r&&o(t[n],e[r])}))>-1})):o(t,e))}},1991:function(t,e,n){var r=n(5628);t.exports=function(t){return r(t)&&isNaN(t)}},6909:function(t){t.exports=function(t){return null===t}},5628:function(t,e,n){var r=n(8472)("number");t.exports=r},1120:function(t,e,n){var r=n(8472)("object");t.exports=r},4448:function(t){t.exports=function(t){return!!t&&t.constructor===Object}},2663:function(t,e,n){var r=n(6535)("RegExp");t.exports=r},91:function(t,e,n){var r=n(785),i=typeof Set!==r;t.exports=function(t){return i&&t instanceof Set}},8511:function(t,e,n){var r=n(8472)("string");t.exports=r},9191:function(t,e,n){var r=n(785),i=typeof Symbol!==r;t.exports=function(t){return i&&Symbol.isSymbol?Symbol.isSymbol(t):"symbol"==typeof t}},3332:function(t){t.exports=function(t){return!!t&&t.constructor===TypeError}},5667:function(t,e,n){var r=n(785),i=n(8472)(r);t.exports=i},6148:function(t,e,n){var r=n(4435),i=n(154);t.exports=function(t){return r(t)&&!isNaN(i(t))}},4809:function(t,e,n){var r=n(785),i=typeof WeakMap!==r;t.exports=function(t){return i&&t instanceof WeakMap}},704:function(t,e,n){var r=n(785),i=typeof WeakSet!==r;t.exports=function(t){return i&&t instanceof WeakSet}},5822:function(t,e,n){var r=n(7054);t.exports=function(t){return r&&!(!t||t!==t.window)}},3345:function(t,e,n){var r=n(5852),i=n(7906),o=n(8447),a={};t.exports=function(t){if(t=r(t),a[t])return a[t];if(/^[A-Z]+$/.test(t))return o(t);var e=t.replace(/^([a-z])([A-Z]+)([a-z]+)$/,(function(t,e,n,r){var a=n.length;return a>1?e+"-"+o(i(n,0,a-1))+"-"+o(i(n,a-1,a))+r:o(e+"-"+n+r)})).replace(/^([A-Z]+)([a-z]+)?$/,(function(t,e,n){var r=e.length;return o(i(e,0,r-1)+"-"+i(e,r-1,r)+(n||""))})).replace(/([a-z]?)([A-Z]+)([a-z]?)/g,(function(t,e,n,r,a){var s=n.length;return s>1&&(e&&(e+="-"),r)?(e||"")+o(i(n,0,s-1))+"-"+o(i(n,s-1,s))+r:(e||"")+(a?"-":"")+o(n)+(r||"")}));return e=e.replace(/([-]+)/g,(function(t,n,r){return r&&r+n.length<e.length?"-":""})),a[t]=e,e}},7164:function(t,e,n){var r=n(4227)("keys",1);t.exports=r},3958:function(t,e,n){var r=n(8798);t.exports=function(t){var e=r(t);return e[e.length-1]}},301:function(t){t.exports=function(t,e,n){for(var r=t.length-1;r>=0;r--)e.call(n,t[r],r,t)}},7665:function(t,e,n){var r=n(9987),i=n(301),o=n(8933);t.exports=function(t,e,n){return t?(r(t)?i:o)(t,e,n):t}},6734:function(t,e,n){var r=n(9987),i=n(8014);t.exports=function(t,e,n){var o,a;if(t)if(r(t))for(o=t.length-1;o>=0&&!1!==e.call(n,t[o],o,t);o--);else for(o=(a=i(t)).length-1;o>=0&&!1!==e.call(n,t[a[o]],a[o],t);o--);}},9773:function(t,e,n){var r=n(46)("lastIndexOf",n(8676));t.exports=r},8933:function(t,e,n){var r=n(301),i=n(7164);t.exports=function(t,e,n){r(i(t),(function(r){e.call(n,t[r],r,t)}))}},1151:function(t,e,n){var r=n(2440),i=n(3380);t.exports=function(){return r?i(r.href):{}}},2891:function(t,e,n){var r=n(5203);t.exports=function(t,e,n){var i=[];if(t&&arguments.length>1){if(t.map)return t.map(e,n);r(t,(function(){i.push(e.apply(n,arguments))}))}return i}},3211:function(t,e,n){var r=n(2006),i=n(2891),o=r((function t(e,n,r,o,a,s,u,c){var l,f,d,h=c.mapChildren||u;return i(n,(function(i,p){return l=a.concat([""+p]),f=s.concat([i]),(d=r.call(o,i,p,n,l,e,f))&&i&&u&&i[u]&&(d[h]=t(i,i[u],r,o,l,f,u,c)),d}))}));t.exports=o},7631:function(t,e,n){var r=n(6155)((function(t,e){return t<e}));t.exports=r},1454:function(t,e,n){var r=n(2427),i=n(1198),o=n(4751);t.exports=function(t,e,n){return r(o(t,e,n),i(t))}},910:function(t,e,n){var r=n(9987),i=n(4448),o=n(5203);function a(t,e){return i(t)&&i(e)||r(t)&&r(e)?(o(e,(function(e,n){t[n]=a(t[n],e)})),t):e}t.exports=function(t){t||(t={});for(var e,n=arguments,r=n.length,i=1;i<r;i++)(e=n[i])&&a(t,e);return t}},4603:function(t,e,n){var r=n(6155)((function(t,e){return t>e}));t.exports=r},3293:function(t,e,n){var r=n(5586),i=n(5866);t.exports=function(t,e){var n=i(t),o=i(e);return r(n,o)}},6117:function(t){t.exports=function(){}},6934:function(t,e,n){var r=n(154),i=n(5617),o=Date.now||function(){return r(i())};t.exports=o},4589:function(t,e,n){var r=n(8014);t.exports=function(t,e,n){if(t)for(var i in t)r(t,i)&&e.call(n,t[i],i,t)}},4345:function(t,e,n){var r=n(5203),i=n(8896),o=n(9011);t.exports=function(t,e,n){var a={};if(t){if(!e)return t;i(e)||(e=o(e)),r(t,(function(r,i){a[i]=e.call(n,r,i,t)}))}return a}},7300:function(t,e,n){var r=n(6596)(0,1);t.exports=r},2058:function(t,e,n){var r=n(8104);t.exports=function(t,e){var n=!1,i=null,o=r(arguments,2);return function(){return n||(i=t.apply(e,r(arguments).concat(o)),n=!0),i}}},9677:function(t,e,n){var r=n(4419),i=n(3843),o=n(2891),a=n(9987),s=n(8896),u=n(4448),c=n(5667),l=n(6909),f=n(2289),d=n(626),h=n(9011),p="desc";function g(t,e){return c(t)?1:l(t)?c(e)?-1:1:t&&t.localeCompare?t.localeCompare(e):t>e?1:-1}function v(t,e,n){return function(r,i){var o=r[t],a=i[t];return o===a?n?n(r,i):0:e.order===p?g(a,o):g(o,a)}}t.exports=function(t,e,n){if(t){if(f(e))return i(t).sort(g);for(var c,l=o(t,(function(t){return{data:t}})),p=function(t,e,n,i){var o=[];return n=a(n)?n:[n],r(n,(function(n,c){if(n){var l,f=n;a(n)?(f=n[0],l=n[1]):u(n)&&(f=n.field,l=n.order),o.push({field:f,order:l||"asc"}),r(e,s(f)?function(e,n){e[c]=f.call(i,e.data,n,t)}:function(t){t[c]=f?d(t.data,f):t.data})}})),o}(t,l,e,n),m=p.length-1;m>=0;)c=v(m,p[m],c),m--;return c&&(l=l.sort(c)),o(l,h("data"))}return[]}},4731:function(t,e,n){var r=n(5852),i=n(5667),o=n(6815);t.exports=function(t,e,n){var a=r(t);return e>>=0,n=i(n)?" ":""+n,a.padEnd?a.padEnd(e,n):e>a.length?((e-=a.length)>n.length&&(n+=o(n,e/n.length)),a+n.slice(0,e)):a}},6329:function(t,e,n){var r=n(5852),i=n(5667),o=n(6815);t.exports=function(t,e,n){var a=r(t);return e>>=0,n=i(n)?" ":""+n,a.padStart?a.padStart(e,n):e>a.length?((e-=a.length)>n.length&&(n+=o(n,e/n.length)),n.slice(0,e)+a):a}},3380:function(t,e,n){var r=n(2440),i=n(8893),o=n(4052);function a(t){return i(t.split("?")[1]||"")}t.exports=function(t){var e,n,i,s,u=""+t;return 0===u.indexOf("//")?u=(r?r.protocol:"")+u:0===u.indexOf("/")&&(u=o()+u),i=u.replace(/#.*/,"").match(/(\?.*)/),(s={href:u,hash:"",host:"",hostname:"",protocol:"",port:"",search:i&&i[1]&&i[1].length>1?i[1]:""}).path=u.replace(/^([a-z0-9.+-]*:)\/\//,(function(t,e){return s.protocol=e,""})).replace(/^([a-z0-9.+-]*)(:\d+)?\/?/,(function(t,e,r){return n=r||"",s.port=n.replace(":",""),s.hostname=e,s.host=e+n,"/"})).replace(/(#.*)/,(function(t,e){return s.hash=e.length>1?e:"",""})),e=s.hash.match(/#((.*)\?|(.*))/),s.pathname=s.path.replace(/(\?|#.*).*/,""),s.origin=s.protocol+"//"+s.host,s.hashKey=e&&(e[2]||e[1])||"",s.hashQuery=a(s.hash),s.searchQuery=a(s.search),s}},4779:function(t,e,n){var r=n(6596)(1,0);t.exports=r},2053:function(t,e,n){var r=n(2891),i=n(9011);t.exports=function(t,e){return r(t,i(e))}},9011:function(t,e,n){var r=n(6909);t.exports=function(t,e){return function(n){return r(n)?e:n[t]}}},6949:function(t){t.exports=function(t,e){return t>=e?t:(t>>=0)+Math.round(Math.random()*((e||9)-t))}},9033:function(t){t.exports=function(t,e,n){var r,i,o=[],a=arguments;if(a.length<2&&(e=a[0],t=0),i=e>>0,(r=t>>0)<e)for(n=n>>0||1;r<i;r+=n)o.push(r);return o}},9941:function(t,e,n){var r=n(7164);t.exports=function(t,e,n){if(t){var i,o,a=0,s=null,u=n,c=arguments.length>2,l=r(t);if(t.length&&t.reduce)return o=function(){return e.apply(s,arguments)},c?t.reduce(o,u):t.reduce(o);for(c&&(a=1,u=t[l[0]]),i=l.length;a<i;a++)u=e.call(s,u,t[l[a]],a,t);return u}}},1528:function(t,e,n){var r=n(2656),i=n(8896),o=n(9987),a=n(5203),s=n(4419),u=n(7665),c=n(5776),l=n(2289);t.exports=function(t,e,n){if(t){if(!l(e)){var f=[],d=[];return i(e)||(h=e,e=function(t,e){return e===h}),a(t,(function(t,r,i){e.call(n,t,r,i)&&f.push(r)})),o(t)?u(f,(function(e,n){d.push(t[e]),t.splice(e,1)})):(d={},s(f,(function(e){d[e]=t[e],r(t,e)}))),d}return c(t)}var h;return t}},6206:function(t,e,n){var r=n(5852),i=n(6815);t.exports=function(t,e){return i(r(t),e)}},506:function(t,e,n){var r=n(7366)("round");t.exports=r},9545:function(t,e,n){var r=n(8917);t.exports=function(t,e){var n=r(t);return arguments.length<=1?n[0]:(e<n.length&&(n.length=e||0),n)}},1616:function(t,e,n){var r=n(2006),i=n(4419),o=n(5125);function a(t,e,n,r,s,u,c,l,f){var d,h,p,g,v,m=[],y=f.original,b=f.data,x=f.mapChildren||l;return i(n,(function(i,w){d=u.concat([""+w]),h=c.concat([i]),g=t||r.call(s,i,w,n,d,e,h),v=l&&i[l],g||v?(y?p=i:(p=o({},i),b&&(p[b]=i)),p[x]=a(g,i,i[l],r,s,d,h,l,f),(g||p[x].length)&&m.push(p)):g&&m.push(p)})),m}var s=r((function(t,e,n,r,i,o,s,u){return a(0,t,e,n,r,i,o,s,u)}));t.exports=s},326:function(t,e,n){var r=n(667),i=n(5203),o=n(9987),a=n(6909),s=n(5667),u=n(4448);function c(t,e,n){var s,l=[];return i(t,(function(t,i){s=o(t),u(t)||s?l=l.concat(c(t,e+"["+i+"]",s)):l.push(r(e+"["+(n?"":i)+"]")+"="+r(a(t)?"":t))})),l}t.exports=function(t){var e,n=[];return i(t,(function(t,i){s(t)||(e=o(t),u(t)||e?n=n.concat(c(t,i,e)):n.push(r(i)+"="+r(a(t)?"":t)))})),n.join("&").replace(/%20/g,"+")}},2072:function(t,e,n){var r=n(3721),i=n(3379),o=n(8014),a=/(.+)?\[(\d+)\]$/;function s(t,e,n,i,o){if(!t[e]){var s,u,c=e?e.match(a):null;if(n)u=o;else{var l=i?i.match(a):null;u=l&&!l[1]?new Array(r(l[2])+1):{}}return c?c[1]?(s=r(c[2]),t[c[1]]?n?t[c[1]][s]=u:t[c[1]][s]?u=t[c[1]][s]:t[c[1]][s]=u:(t[c[1]]=new Array(s+1),t[c[1]][s]=u)):t[c[2]]=u:t[e]=u,u}return n&&(t[e]=o),t[e]}function u(t){return"__proto__"===t||"constructor"===t||"prototype"===t}t.exports=function(t,e,n){if(t)if(!t[e]&&!o(t,e)||u(e)){for(var r=t,a=i(e),c=a.length,l=0;l<c;l++)if(!u(a[l])){var f=l===c-1;r=s(r,a[l],f,f?null:a[l+1],n)}}else t[e]=n;return t}},688:function(t){"use strict";t.exports={cookies:{path:"/"},treeOptions:{parentKey:"parentId",key:"id",children:"children"},parseDateFormat:"yyyy-MM-dd HH:mm:ss",firstDayOfWeek:1,dateDiffRules:[["yyyy",31536e6],["MM",2592e6],["dd",864e5],["HH",36e5],["mm",6e4],["ss",1e3],["S",0]]}},8917:function(t,e,n){var r=n(6949),i=n(8798);t.exports=function(t){for(var e,n=[],o=i(t),a=o.length-1;a>=0;a--)e=a>0?r(0,a):0,n.push(o[e]),o.splice(e,1);return n}},8104:function(t,e,n){var r=n(5866);t.exports=function(t,e,n){var i=[],o=arguments.length;if(t){if(e=o>=2?r(e):0,n=o>=3?r(n):t.length,t.slice)return t.slice(e,n);for(;e<n;e++)i.push(t[e])}return i}},717:function(t,e,n){var r=n(5131)("some",1,0,!0,!1);t.exports=r},4286:function(t,e,n){var r=n(9677);t.exports=r},965:function(t,e,n){var r=n(5852);t.exports=function(t,e,n){var i=r(t);return 0===(1===arguments.length?i:i.substring(n)).indexOf(e)}},2105:function(t){t.exports=864e5},368:function(t){var e=decodeURIComponent;t.exports=e},2645:function(t,e,n){var r=n(785),i=typeof document===r?0:document;t.exports=i},667:function(t){var e=encodeURIComponent;t.exports=e},7772:function(t){t.exports={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}},4568:function(t){t.exports=/(.+)?\[(\d+)\]$/},2440:function(t,e,n){var r=n(785),i=typeof location===r?0:location;t.exports=i},601:function(t){var e=Object.prototype.toString;t.exports=e},3721:function(t){var e=parseInt;t.exports=e},871:function(t){t.exports="first"},8195:function(t){t.exports="last"},785:function(t){t.exports="undefined"},5517:function(t,e,n){var r=7*n(2105);t.exports=r},7054:function(t,e,n){var r=n(785),i=typeof window===r?0:window;t.exports=i},2754:function(t,e,n){var r=n(7401),i=n(1508),o=n(5866),a=n(5588);t.exports=function(t,e){var n=o(t),s=o(e),u=i(n),c=i(s),l=r(u),f=r(c),d=Math.pow(10,Math.max(l,f));return parseFloat(a((n*d-s*d)/d,l>=f?l:f))}},4751:function(t,e,n){var r=n(8013),i=n(8896),o=n(5203),a=n(626);t.exports=function(t,e,n){var s=0;return o(t,e?i(e)?function(){s=r(s,e.apply(n,arguments))}:function(t){s=r(s,a(t,e))}:function(t){s=r(s,t)}),s}},267:function(t,e,n){var r=n(688),i=n(5852),o=n(3884),a=n(626);t.exports=function(t,e,n){return i(t).replace((n||r).tmplRE||/\{{2}([.\w[\]\s]+)\}{2}/g,(function(t,n){return a(e,o(n))}))}},622:function(t){t.exports=function(t,e,n){var r,i,o=n||{},a=!1,s=0,u=!("leading"in o)||o.leading,c="trailing"in o&&o.trailing,l=function(){a=!0,t.apply(i,r),s=setTimeout(f,e)},f=function(){s=0,a||!0!==c||l()},d=function(){r=arguments,i=this,a=!1,0===s&&(!0===u?l():!0===c&&(s=setTimeout(f,e)))};return d.cancel=function(){var t=0!==s;return clearTimeout(s),a=!1,s=0,t},d}},7721:function(t,e,n){var r=n(154),i=n(6934),o=n(2269),a=n(4435);t.exports=function(t,e){if(t){var n=o(t,e);return a(n)?r(n):n}return i()}},3843:function(t,e,n){var r=n(2891);t.exports=function(t){return r(t,(function(t){return t}))}},4627:function(t,e,n){var r=n(688),i=n(2891),o=n(9677),a=n(7917),s=n(7295),u=n(5203),c=n(1528),l=n(5125);t.exports=function(t,e){var n,f,d,h,p=l({},r.treeOptions,e),g=p.strict,v=p.key,m=p.parentKey,y=p.children,b=p.mapChildren,x=p.sortKey,w=p.reverse,_=p.data,E=[],S={};return x&&(t=o(a(t),x),w&&(t=t.reverse())),n=i(t,(function(t){return t[v]})),u(t,(function(t){f=t[v],_?(d={})[_]=t:d=t,h=t[m],S[f]=S[f]||[],S[h]=S[h]||[],S[h].push(d),d[v]=f,d[m]=h,d[y]=S[f],b&&(d[b]=S[f]),(!g||g&&!h)&&(s(n,h)||E.push(d))})),g&&function(t,e){u(t,(function(t){t.children&&!t.children.length&&c(t,e)}))}(t,y),E}},3157:function(t,e,n){var r=n(688),i=n(5001),o=n(8900),a=n(2619),s=n(2269),u=n(457),c=n(959),l=n(5125),f=n(6148),d=n(8896),h=n(6329);function p(t,e,n,r){var i=e[n];return i?d(i)?i(r,n,t):i[r]:r}var g=/\[([^\]]+)]|y{2,4}|M{1,2}|d{1,2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|S{1,3}|Z{1,2}|W{1,2}|D{1,3}|[aAeEq]/g;t.exports=function(t,e,n){if(t){if(t=s(t),f(t)){var d=e||r.parseDateFormat||r.formatString,v=t.getHours(),m=v<12?"am":"pm",y=l({},r.parseDateRules||r.formatStringMatchs,n?n.formats:null),b=function(e,n){return(""+o(t)).substr(4-n)},x=function(e,n){return h(a(t)+1,n,"0")},w=function(e,n){return h(t.getDate(),n,"0")},_=function(t,e){return h(v,e,"0")},E=function(t,e){return h(v<=12?v:v-12,e,"0")},S=function(e,n){return h(t.getMinutes(),n,"0")},C=function(e,n){return h(t.getSeconds(),n,"0")},k=function(e,n){return h(t.getMilliseconds(),n,"0")},M=function(e,n){var r=t.getTimezoneOffset()/60*-1;return p(t,y,e,(r>=0?"+":"-")+h(r,2,"0")+(1===n?":":"")+"00")},O=function(e,i){return h(p(t,y,e,u(t,(n?n.firstDay:null)||r.firstDayOfWeek)),i,"0")},T=function(e,n){return h(p(t,y,e,c(t)),n,"0")},A={yyyy:b,yy:b,MM:x,M:x,dd:w,d:w,HH:_,H:_,hh:E,h:E,mm:S,m:S,ss:C,s:C,SSS:k,S:k,ZZ:M,Z:M,WW:O,W:O,DDD:T,D:T,a:function(e){return p(t,y,e,m)},A:function(e){return p(t,y,e,i(m))},e:function(e){return p(t,y,e,t.getDay())},E:function(e){return p(t,y,e,t.getDay())},q:function(e){return p(t,y,e,Math.floor((a(t)+3)/3))}};return d.replace(g,(function(t,e){return e||(A[t]?A[t](t,t.length):t)}))}return"Invalid Date"}return""}},5588:function(t,e,n){var r=n(506),i=n(5852),o=n(6815),a=n(1751);t.exports=function(t,e){var n=i(r(t,e>>=0)).split("."),s=n[0],u=n[1]||"",c=e-u.length;return e?c>0?s+"."+u+o("0",c):s+a(u,Math.abs(c)):s}},7763:function(t,e,n){var r=n(267);t.exports=function(t,e){return r(t,e,{tmplRE:/\{([.\w[\]\s]+)\}/g})}},6285:function(t,e,n){var r=n(3721),i=n(7560)(r);t.exports=i},7459:function(t,e,n){var r=n(2289);t.exports=function(t){return r(t)?"":JSON.stringify(t)}},5866:function(t,e,n){var r=n(7560)(parseFloat);t.exports=r},1508:function(t,e,n){var r=n(6815),i=n(1751);t.exports=function(t){var e=""+t,n=e.match(/^([-+]?)((\d+)|((\d+)?[.](\d+)?))e([-+]{1})([0-9]+)$/);if(n){var o=t<0?"-":"",a=n[3]||"",s=n[5]||"",u=n[6]||"",c=n[7],l=n[8],f=l-u.length,d=l-a.length,h=l-s.length;return"+"===c?a?o+a+r("0",l):f>0?o+s+u+r("0",f):o+s+i(u,l):a?d>0?o+"0."+r("0",Math.abs(d))+a:o+i(a,d):h>0?o+"0."+r("0",Math.abs(h))+s+u:o+i(s,h)+u}return e}},2269:function(t,e,n){var r=n(3721),i=n(9072),o=n(154),a=n(8511),s=n(4435);function u(t){return"(\\d{"+t+"})"}function c(t){return isNaN(t)?t:r(t)}for(var l=u(2),f=u("1,2"),d=u("1,7"),h=u("3,4"),p=".{1}",g=p+f,v="(([zZ])|([-+]\\d{2}:?\\d{2}))",m=[h,g,g,g,g,g,p+d,v],y=[],b=m.length-1;b>=0;b--){for(var x="",w=0;w<b+1;w++)x+=m[w];y.push(new RegExp("^"+x+"$"))}var _=[["yyyy",h],["yy",l],["MM",l],["M",f],["dd",l],["d",f],["HH",l],["H",f],["mm",l],["m",f],["ss",l],["s",f],["SSS",u(3)],["S",d],["Z",v]],E={},S=["\\[([^\\]]+)\\]"];for(w=0;w<_.length;w++){var C=_[w];E[C[0]]=C[1]+"?",S.push(C[0])}var k=new RegExp(S.join("|"),"g"),M={};t.exports=function(t,e){if(t){var n=s(t);if(n||!e&&/^[0-9]{11,15}$/.test(t))return new Date(n?o(t):r(t));if(a(t)){var u=e?function(t,e){var n=M[e];if(!n){var r=[],i=e.replace(/([$(){}*+.?\\^|])/g,"\\$1").replace(k,(function(t,e){var n=t.charAt(0);return"["===n?e:(r.push(n),E[t])}));n=M[e]={_i:r,_r:new RegExp(i)}}var o={},a=t.match(n._r);if(a){for(var s=n._i,u=1,c=a.length;u<c;u++)o[s[u-1]]=a[u];return o}return o}(t,e):function(t){for(var e,n={},r=0,i=y.length;r<i;r++)if(e=t.match(y[r])){n.y=e[1],n.M=e[2],n.d=e[3],n.H=e[4],n.m=e[5],n.s=e[6],n.S=e[7],n.Z=e[8];break}return n}(t);if(u.y)return u.M&&(u.M=c(u.M)-1),u.S&&(u.S=(l=c(u.S.substring(0,3)))<10?100*l:l<100?10*l:l),u.Z?function(t){if(/^[zZ]/.test(t.Z))return new Date(i(t));var e=t.Z.match(/([-+])(\d{2}):?(\d{2})/);return e?new Date(i(t)-("-"===e[1]?-1:1)*r(e[2])*36e5+6e4*r(e[3])):new Date("")}(u):new Date(u.y,u.M||0,u.d||1,u.H||0,u.m||0,u.s||0,u.S||0)}}var l;return new Date("")}},5605:function(t,e,n){var r=n(4448),i=n(8511);t.exports=function(t){if(r(t))return t;if(i(t))try{return JSON.parse(t)}catch(t){}return{}}},7283:function(t,e,n){var r=n(688),i=n(5203),o=n(5125);function a(t,e,n){var r=n.children,o=n.data,s=n.clear;return i(e,(function(e){var i=e[r];o&&(e=e[o]),t.push(e),i&&i.length&&a(t,i,n),s&&delete e[r]})),t}t.exports=function(t,e){return a([],t,o({},r.treeOptions,e))}},5852:function(t,e,n){var r=n(2289),i=n(5628),o=n(1508);t.exports=function(t){return i(t)?o(t):""+(r(t)?"":t)}},3884:function(t,e,n){var r=n(4050),i=n(8236);t.exports=function(t){return t&&t.trim?t.trim():r(i(t))}},8236:function(t,e,n){var r=n(5852);t.exports=function(t){return t&&t.trimLeft?t.trimLeft():r(t).replace(/^[\s\uFEFF\xA0]+/g,"")}},4050:function(t,e,n){var r=n(5852);t.exports=function(t){return t&&t.trimRight?t.trimRight():r(t).replace(/[\s\uFEFF\xA0]+$/g,"")}},1993:function(t,e,n){var r=n(7772),i=n(7072),o=n(5203),a={};o(r,(function(t,e){a[r[e]]=e}));var s=i(a);t.exports=s},1258:function(t,e,n){var r=n(4014),i=n(3843);t.exports=function(){for(var t=arguments,e=[],n=0,o=t.length;n<o;n++)e=e.concat(i(t[n]));return r(e)}},4014:function(t,e,n){var r=n(5203),i=n(7295);t.exports=function(t){var e=[];return r(t,(function(t){i(e,t)||e.push(t)})),e}},3992:function(t){var e=0;t.exports=function(t){return[t,++e].join("")}},8893:function(t,e,n){var r=n(368),i=n(4419),o=n(8511);t.exports=function(t){var e,n={};return t&&o(t)&&i(t.split("&"),(function(t){e=t.split("="),n[r(e[0])]=r(e[1]||"")})),n}},470:function(t,e,n){var r=n(2053),i=n(7631);t.exports=function(t){var e,n,o,a=[];if(t&&t.length)for(e=0,o=(n=i(t,(function(t){return t?t.length:0})))?n.length:0;e<o;e++)a.push(r(t,e));return a}},8798:function(t,e,n){var r=n(4227)("values",0);t.exports=r},6972:function(t,e,n){var r=n(470);t.exports=function(){return r(arguments)}},2968:function(t,e,n){var r=n(8798),i=n(5203);t.exports=function(t,e){var n={};return e=e||[],i(r(t),(function(t,r){n[t]=e[r]})),n}},3642:function(t,e,n){t.exports=n},7061:function(t,e,n){var r=n(8698).default;function i(){"use strict";t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new O(r||[]);return a(o,"_invoke",{value:S(t,n,s)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p={};function g(){}function v(){}function m(){}var y={};f(y,u,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(T([])));x&&x!==n&&o.call(x,u)&&(y=x);var w=m.prototype=g.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,a,s,u){var c=h(t[i],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function S(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function C(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=h(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function T(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=m,a(w,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:v,configurable:!0}),v.displayName=f(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},_(E.prototype),f(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(d(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(w),f(w,l,"Generator"),f(w,u,(function(){return this})),f(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},8698:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},4687:function(t,e,n){var r=n(7061)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t};var __webpack_exports__=__webpack_require__(3642);_dll_vendor=__webpack_exports__})();